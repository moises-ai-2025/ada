const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-CbckxSIa.js","assets/index-C3YgEsuc.js","assets/components-CloOpq9Q.js","assets/angular-html-LfdN0zeE.js","assets/html-C2L_23MC.js","assets/javascript-ySlJ1b_l.js","assets/css-BPhBrDlE.js","assets/angular-ts-CKsD7JZE.js","assets/scss-C31hgJw-.js","assets/apl-BBq3IX1j.js","assets/xml-e3z08dGr.js","assets/java-xI-RfyKK.js","assets/json-BQoSv7ci.js","assets/astro-CqkE3fuf.js","assets/typescript-Dj6nwHGl.js","assets/postcss-B3ZDOciz.js","assets/blade-a8OxSdnT.js","assets/sql-COK4E0Yg.js","assets/bsl-Dgyn0ogV.js","assets/sdbl-BLhTXw86.js","assets/cairo--RitsXJZ.js","assets/python-DhUJRlN_.js","assets/cobol-PTqiYgYu.js","assets/coffee-dyiR41kL.js","assets/cpp-BksuvNSY.js","assets/regexp-DWJ3fJO_.js","assets/glsl-DBO2IWDn.js","assets/c-C3t2pwGQ.js","assets/crystal-DtDmRg-F.js","assets/shellscript-atvbtKCR.js","assets/edge-D5gP-w-T.js","assets/html-derivative-CSfWNPLT.js","assets/elixir-CLiX3zqd.js","assets/elm-CmHSxxaM.js","assets/erb-BYTLMnw6.js","assets/ruby-DeZ3UC14.js","assets/haml-B2EZWmdv.js","assets/graphql-cDcHW_If.js","assets/jsx-BAng5TT0.js","assets/tsx-B6W0miNI.js","assets/lua-CvWAzNxB.js","assets/yaml-CVw76BM1.js","assets/fortran-fixed-form-TqA4NnZg.js","assets/fortran-free-form-DKXYxT9g.js","assets/fsharp-XplgxFYe.js","assets/markdown-UIAJJxZW.js","assets/gdresource-BHYsBjWJ.js","assets/gdshader-SKMF96pI.js","assets/gdscript-DfxzS6Rs.js","assets/git-commit-i4q6IMui.js","assets/diff-BgYniUM_.js","assets/git-rebase-B-v9cOL2.js","assets/glimmer-js-D-cwc0-E.js","assets/glimmer-ts-pgjy16dm.js","assets/hack-D1yCygmZ.js","assets/handlebars-BQGss363.js","assets/http-FRrOvY1W.js","assets/hxml-TIA70rKU.js","assets/haxe-C5wWYbrZ.js","assets/imba-bv_oIlVt.js","assets/jinja-DGy0s7-h.js","assets/jison-BqZprYcd.js","assets/julia-BBuGR-5E.js","assets/r-CwjWoCRV.js","assets/latex-C-cWTeAZ.js","assets/tex-rYs2v40G.js","assets/liquid-D3W5UaiH.js","assets/marko-z0MBrx5-.js","assets/less-BfCpw3nA.js","assets/mdc-DB_EDNY_.js","assets/nginx-D_VnBJ67.js","assets/nim-ZlGxZxc3.js","assets/perl-CHQXSrWU.js","assets/php-B5ebYQev.js","assets/pug-CM9l7STV.js","assets/qml-D8XfuvdV.js","assets/razor-CNLDkMZG.js","assets/csharp-D9R-vmeu.js","assets/rst-4NLicBqY.js","assets/cmake-DbXoA79R.js","assets/sas-BmTFh92c.js","assets/shaderlab-B7qAK45m.js","assets/hlsl-ifBTmRxC.js","assets/shellsession-C_rIy8kc.js","assets/soy-C-lX7w71.js","assets/sparql-bYkjHRlG.js","assets/turtle-BMR_PYu6.js","assets/stata-DorPZHa4.js","assets/svelte-MSaWC3Je.js","assets/templ-dwX3ZSMB.js","assets/go-B1SYOhNW.js","assets/ts-tags-CipyTH0X.js","assets/twig-NC5TFiHP.js","assets/vue-BuYVFjOK.js","assets/vue-html-xdeiXROB.js","assets/xsl-Dd0NUgwM.js","assets/index-CeA6VvNC.js","assets/index-BO4dp53l.js","assets/index-Cx5PNcg_.js","assets/index-B1_69SMo.js","assets/index-BuGqNPwf.js","assets/index-yPh6CZU4.js","assets/index-q8kqF5P8.js","assets/index-DsBAg0hk.js","assets/index-CTEPw3x3.js","assets/index-BZp5qYPI.js","assets/index-DRqLTxC_.js"])))=>i.map(i=>d[i]);
import{r as T,j as p,z as ut,A as $m,p as Hm,B as hde,y as ao,x as ii,C as fde,u as pde,a as yW,D as mde,t as gde,F as bde}from"./components-CloOpq9Q.js";import{a as tr,u as It,t as Ly,b as vW,p as An,c as sR,d as Di,m as Ld,e as ur,l as Lt,s as yde,g as NM,r as Ag}from"./index-C3YgEsuc.js";const vde=5,Z_=6,Q_=10;let _de=(t,e,n,r)=>(t.events=t.events||{},t.events[n+Q_]||(t.events[n+Q_]=r(s=>{t.events[n].reduceRight((i,o)=>(o(i),i),{shared:{},...s})})),t.events[n]=t.events[n]||[],t.events[n].push(e),()=>{let s=t.events[n],i=s.indexOf(e);s.splice(i,1),s.length||(delete t.events[n],t.events[n+Q_](),delete t.events[n+Q_])}),xde=1e3,wde=(t,e)=>_de(t,r=>{let s=e(r);s&&t.events[Z_].push(s)},vde,r=>{let s=t.listen;t.listen=(...o)=>(!t.lc&&!t.active&&(t.active=!0,r()),s(...o));let i=t.off;return t.events[Z_]=[],t.off=()=>{i(),setTimeout(()=>{if(t.active&&!t.lc){t.active=!1;for(let o of t.events[Z_])o();t.events[Z_]=[]}},xde)},()=>{t.listen=s,t.off=i}}),Ede=(t,e,n)=>{Array.isArray(t)||(t=[t]);let r,s=0,i=()=>{let l=t.map(c=>c.get());if(r===void 0||l.some((c,u)=>c!==r[u])){let c=++s;r=l;let u=e(...l);u&&u.then&&u.t?u.then(d=>{c===s&&o.set(d)}):o.set(u)}},o=tr(void 0,Math.max(...t.map(l=>l.l))+1),a=i;return wde(o,()=>{let l=t.map(c=>c.listen(a,-1/o.l));return i(),()=>{for(let c of l)c()}}),o},iR=(t,e)=>Ede(t,e);function Bn(t){"@babel/helpers - typeof";return Bn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bn(t)}function Sde(){return()=>{}}function kde(){return T.useSyncExternalStore(Sde,()=>!0,()=>!1)}function Ec({children:t,fallback:e=null}){return kde()?T.createElement(T.Fragment,null,t()):T.createElement(T.Fragment,null,e)}const oR=T.createContext({});function Oy(t){const e=T.useRef(null);return e.current===null&&(e.current=t()),e.current}const sk=T.createContext(null),aR=T.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class Cde extends T.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Ade({children:t,isPresent:e}){const n=T.useId(),r=T.useRef(null),s=T.useRef({width:0,height:0,top:0,left:0}),{nonce:i}=T.useContext(aR);return T.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=s.current;if(e||!r.current||!o||!a)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return i&&(u.nonce=i),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),p.jsx(Cde,{isPresent:e,childRef:r,sizeRef:s,children:T.cloneElement(t,{ref:r})})}const Tde=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o})=>{const a=Oy(Nde),l=T.useId(),c=T.useCallback(d=>{a.set(d,!0);for(const h of a.values())if(!h)return;r&&r()},[a,r]),u=T.useMemo(()=>({id:l,initial:e,isPresent:n,custom:s,onExitComplete:c,register:d=>(a.set(d,!1),()=>a.delete(d))}),i?[Math.random(),c]:[n,c]);return T.useMemo(()=>{a.forEach((d,h)=>a.set(h,!1))},[n]),T.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=p.jsx(Ade,{isPresent:n,children:t})),p.jsx(sk.Provider,{value:u,children:t})};function Nde(){return new Map}function _W(t=!0){const e=T.useContext(sk);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,i=T.useId();T.useEffect(()=>{t&&s(i)},[t]);const o=T.useCallback(()=>t&&r&&r(i),[i,r,t]);return!n&&r?[!1,o]:[!0]}const ex=t=>t.key||"";function PM(t){const e=[];return T.Children.forEach(t,n=>{T.isValidElement(n)&&e.push(n)}),e}const lR=typeof window<"u",xW=lR?T.useLayoutEffect:T.useEffect,zl=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1})=>{const[a,l]=_W(o),c=T.useMemo(()=>PM(t),[t]),u=o&&!a?[]:c.map(ex),d=T.useRef(!0),h=T.useRef(c),f=Oy(()=>new Map),[g,y]=T.useState(c),[m,b]=T.useState(c);xW(()=>{d.current=!1,h.current=c;for(let E=0;E<m.length;E++){const w=ex(m[E]);u.includes(w)?f.delete(w):f.get(w)!==!0&&f.set(w,!1)}},[m,u.length,u.join("-")]);const v=[];if(c!==g){let E=[...c];for(let w=0;w<m.length;w++){const S=m[w],k=ex(S);u.includes(k)||(E.splice(w,0,S),v.push(S))}i==="wait"&&v.length&&(E=v),b(PM(E)),y(c);return}const{forceRender:_}=T.useContext(oR);return p.jsx(p.Fragment,{children:m.map(E=>{const w=ex(E),S=o&&!a?!1:c===m||u.includes(w),k=()=>{if(f.has(w))f.set(w,!0);else return;let x=!0;f.forEach(I=>{I||(x=!1)}),x&&(_?.(),b(h.current),o&&l?.(),r&&r())};return p.jsx(Tde,{isPresent:S,initial:!d.current||n?void 0:!1,custom:S?void 0:e,presenceAffectsLayout:s,mode:i,onExitComplete:S?void 0:k,children:E},w)})})},Qi=t=>t;let wW=Qi;function cR(t){let e;return()=>(e===void 0&&(e=t()),e)}const cf=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Dl=t=>t*1e3,Ml=t=>t/1e3,Pde={useManualTiming:!1};function Ide(t){let e=new Set,n=new Set,r=!1,s=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){i.has(c)&&(l.schedule(c),t()),c(o)}const l={schedule:(c,u=!1,d=!1)=>{const f=d&&r?e:n;return u&&i.add(c),f.has(c)||f.add(c),c},cancel:c=>{n.delete(c),i.delete(c)},process:c=>{if(o=c,r){s=!0;return}r=!0,[e,n]=[n,e],e.forEach(a),e.clear(),r=!1,s&&(s=!1,l.process(c))}};return l}const tx=["read","resolveKeyframes","update","preRender","render","postRender"],Rde=40;function EW(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=tx.reduce((b,v)=>(b[v]=Ide(i),b),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:d,postRender:h}=o,f=()=>{const b=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(b-s.timestamp,Rde),1),s.timestamp=b,s.isProcessing=!0,a.process(s),l.process(s),c.process(s),u.process(s),d.process(s),h.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(f))},g=()=>{n=!0,r=!0,s.isProcessing||t(f)};return{schedule:tx.reduce((b,v)=>{const _=o[v];return b[v]=(E,w=!1,S=!1)=>(n||g(),_.schedule(E,w,S)),b},{}),cancel:b=>{for(let v=0;v<tx.length;v++)o[tx[v]].cancel(b)},state:s,steps:o}}const{schedule:nr,cancel:hd,state:gs,steps:KA}=EW(typeof requestAnimationFrame<"u"?requestAnimationFrame:Qi,!0),SW=T.createContext({strict:!1}),IM={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},zm={};for(const t in IM)zm[t]={isEnabled:e=>IM[t].some(n=>!!e[n])};function Lde(t){for(const e in t)zm[e]={...zm[e],...t[e]}}const Ode=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function O2(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Ode.has(t)}let kW=t=>!O2(t);function Dde(t){t&&(kW=e=>e.startsWith("on")?!O2(e):t(e))}try{Dde(require("@emotion/is-prop-valid").default)}catch{}function Mde(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(kW(s)||n===!0&&O2(s)||!e&&!O2(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function jde(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}const ik=T.createContext({});function Dy(t){return typeof t=="string"||Array.isArray(t)}function ok(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const uR=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],dR=["initial",...uR];function ak(t){return ok(t.animate)||dR.some(e=>Dy(t[e]))}function CW(t){return!!(ak(t)||t.variants)}function Fde(t,e){if(ak(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Dy(n)?n:void 0,animate:Dy(r)?r:void 0}}return t.inherit!==!1?e:{}}function Bde(t){const{initial:e,animate:n}=Fde(t,T.useContext(ik));return T.useMemo(()=>({initial:e,animate:n}),[RM(e),RM(n)])}function RM(t){return Array.isArray(t)?t.join(" "):t}const Ude=Symbol.for("motionComponentSymbol");function Qp(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function $de(t,e,n){return T.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Qp(n)&&(n.current=r))},[e])}const hR=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Hde="framerAppearId",AW="data-"+hR(Hde),{schedule:fR}=EW(queueMicrotask,!1),TW=T.createContext({});function zde(t,e,n,r,s){var i,o;const{visualElement:a}=T.useContext(ik),l=T.useContext(SW),c=T.useContext(sk),u=T.useContext(aR).reducedMotion,d=T.useRef(null);r=r||l.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const h=d.current,f=T.useContext(TW);h&&!h.projection&&s&&(h.type==="html"||h.type==="svg")&&Vde(d.current,n,s,f);const g=T.useRef(!1);T.useInsertionEffect(()=>{h&&g.current&&h.update(n,c)});const y=n[AW],m=T.useRef(!!y&&!(!((i=window.MotionHandoffIsComplete)===null||i===void 0)&&i.call(window,y))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,y)));return xW(()=>{h&&(g.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),fR.render(h.render),m.current&&h.animationState&&h.animationState.animateChanges())}),T.useEffect(()=>{h&&(!m.current&&h.animationState&&h.animationState.animateChanges(),m.current&&(queueMicrotask(()=>{var b;(b=window.MotionHandoffMarkAsComplete)===null||b===void 0||b.call(window,y)}),m.current=!1))}),h}function Vde(t,e,n,r){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:NW(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||a&&Qp(a),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function NW(t){if(t)return t.options.allowProjection!==!1?t.projection:NW(t.parent)}function Wde({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){var i,o;t&&Lde(t);function a(c,u){let d;const h={...T.useContext(aR),...c,layoutId:Gde(c)},{isStatic:f}=h,g=Bde(c),y=r(c,f);if(!f&&lR){qde();const m=Kde(h);d=m.MeasureLayout,g.visualElement=zde(s,y,h,e,m.ProjectionNode)}return p.jsxs(ik.Provider,{value:g,children:[d&&g.visualElement?p.jsx(d,{visualElement:g.visualElement,...h}):null,n(s,c,$de(y,g.visualElement,u),y,f,g.visualElement)]})}a.displayName=`motion.${typeof s=="string"?s:`create(${(o=(i=s.displayName)!==null&&i!==void 0?i:s.name)!==null&&o!==void 0?o:""})`}`;const l=T.forwardRef(a);return l[Ude]=s,l}function Gde({layoutId:t}){const e=T.useContext(oR).id;return e&&t!==void 0?e+"-"+t:t}function qde(t,e){T.useContext(SW).strict}function Kde(t){const{drag:e,layout:n}=zm;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Yde=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function pR(t){return typeof t!="string"||t.includes("-")?!1:!!(Yde.indexOf(t)>-1||/[A-Z]/u.test(t))}function LM(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function mR(t,e,n,r){if(typeof e=="function"){const[s,i]=LM(r);e=e(n!==void 0?n:t.custom,s,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,i]=LM(r);e=e(n!==void 0?n:t.custom,s,i)}return e}const sN=t=>Array.isArray(t),Xde=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),Jde=t=>sN(t)?t[t.length-1]||0:t,os=t=>!!(t&&t.getVelocity);function Vw(t){const e=os(t)?t.get():t;return Xde(e)?e.toValue():e}function Zde({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,s,i){const o={latestValues:Qde(r,s,i,t),renderState:e()};return n&&(o.onMount=a=>n({props:r,current:a,...o}),o.onUpdate=a=>n(a)),o}const PW=t=>(e,n)=>{const r=T.useContext(ik),s=T.useContext(sk),i=()=>Zde(t,e,r,s);return n?i():Oy(i)};function Qde(t,e,n,r){const s={},i=r(t,{});for(const h in i)s[h]=Vw(i[h]);let{initial:o,animate:a}=t;const l=ak(t),c=CW(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const d=u?a:o;if(d&&typeof d!="boolean"&&!ok(d)){const h=Array.isArray(d)?d:[d];for(let f=0;f<h.length;f++){const g=mR(t,h[f]);if(g){const{transitionEnd:y,transition:m,...b}=g;for(const v in b){let _=b[v];if(Array.isArray(_)){const E=u?_.length-1:0;_=_[E]}_!==null&&(s[v]=_)}for(const v in y)s[v]=y[v]}}}return s}const Tg=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],jf=new Set(Tg),IW=t=>e=>typeof e=="string"&&e.startsWith(t),RW=IW("--"),ehe=IW("var(--"),gR=t=>ehe(t)?the.test(t.split("/*")[0].trim()):!1,the=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,LW=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Kc=(t,e,n)=>n>e?e:n<t?t:n,Ng={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},My={...Ng,transform:t=>Kc(0,1,t)},nx={...Ng,default:1},mv=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Iu=mv("deg"),jl=mv("%"),Bt=mv("px"),nhe=mv("vh"),rhe=mv("vw"),OM={...jl,parse:t=>jl.parse(t)/100,transform:t=>jl.transform(t*100)},she={borderWidth:Bt,borderTopWidth:Bt,borderRightWidth:Bt,borderBottomWidth:Bt,borderLeftWidth:Bt,borderRadius:Bt,radius:Bt,borderTopLeftRadius:Bt,borderTopRightRadius:Bt,borderBottomRightRadius:Bt,borderBottomLeftRadius:Bt,width:Bt,maxWidth:Bt,height:Bt,maxHeight:Bt,top:Bt,right:Bt,bottom:Bt,left:Bt,padding:Bt,paddingTop:Bt,paddingRight:Bt,paddingBottom:Bt,paddingLeft:Bt,margin:Bt,marginTop:Bt,marginRight:Bt,marginBottom:Bt,marginLeft:Bt,backgroundPositionX:Bt,backgroundPositionY:Bt},ihe={rotate:Iu,rotateX:Iu,rotateY:Iu,rotateZ:Iu,scale:nx,scaleX:nx,scaleY:nx,scaleZ:nx,skew:Iu,skewX:Iu,skewY:Iu,distance:Bt,translateX:Bt,translateY:Bt,translateZ:Bt,x:Bt,y:Bt,z:Bt,perspective:Bt,transformPerspective:Bt,opacity:My,originX:OM,originY:OM,originZ:Bt},DM={...Ng,transform:Math.round},bR={...she,...ihe,zIndex:DM,size:Bt,fillOpacity:My,strokeOpacity:My,numOctaves:DM},ohe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ahe=Tg.length;function lhe(t,e,n){let r="",s=!0;for(let i=0;i<ahe;i++){const o=Tg[i],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=LW(a,bR[o]);if(!l){s=!1;const u=ohe[o]||o;r+=`${u}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function yR(t,e,n){const{style:r,vars:s,transformOrigin:i}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(jf.has(l)){o=!0;continue}else if(RW(l)){s[l]=c;continue}else{const u=LW(c,bR[l]);l.startsWith("origin")?(a=!0,i[l]=u):r[l]=u}}if(e.transform||(o||n?r.transform=lhe(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=i;r.transformOrigin=`${l} ${c} ${u}`}}const che={offset:"stroke-dashoffset",array:"stroke-dasharray"},uhe={offset:"strokeDashoffset",array:"strokeDasharray"};function dhe(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?che:uhe;t[i.offset]=Bt.transform(-r);const o=Bt.transform(e),a=Bt.transform(n);t[i.array]=`${o} ${a}`}function MM(t,e,n){return typeof t=="string"?t:Bt.transform(e+n*t)}function hhe(t,e,n){const r=MM(e,t.x,t.width),s=MM(n,t.y,t.height);return`${r} ${s}`}function vR(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,d){if(yR(t,c,d),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:f,dimensions:g}=t;h.transform&&(g&&(f.transform=h.transform),delete h.transform),g&&(s!==void 0||i!==void 0||f.transform)&&(f.transformOrigin=hhe(g,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),o!==void 0&&dhe(h,o,a,l,!1)}const _R=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),OW=()=>({..._R(),attrs:{}}),xR=t=>typeof t=="string"&&t.toLowerCase()==="svg";function DW(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const i in n)t.style.setProperty(i,n[i])}const MW=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function jW(t,e,n,r){DW(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(MW.has(s)?s:hR(s),e.attrs[s])}const D2={};function fhe(t){Object.assign(D2,t)}function FW(t,{layout:e,layoutId:n}){return jf.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!D2[t]||t==="opacity")}function wR(t,e,n){var r;const{style:s}=t,i={};for(const o in s)(os(s[o])||e.style&&os(e.style[o])||FW(o,t)||((r=n?.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(i[o]=s[o]);return i}function BW(t,e,n){const r=wR(t,e,n);for(const s in t)if(os(t[s])||os(e[s])){const i=Tg.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=t[s]}return r}function phe(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const jM=["x","y","width","height","cx","cy","r"],mhe={useVisualState:PW({scrapeMotionValuesFromProps:BW,createRenderState:OW,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:s})=>{if(!n)return;let i=!!t.drag;if(!i){for(const a in s)if(jf.has(a)){i=!0;break}}if(!i)return;let o=!e;if(e)for(let a=0;a<jM.length;a++){const l=jM[a];t[l]!==e[l]&&(o=!0)}o&&nr.read(()=>{phe(n,r),nr.render(()=>{vR(r,s,xR(n.tagName),t.transformTemplate),jW(n,r)})})}})},ghe={useVisualState:PW({scrapeMotionValuesFromProps:wR,createRenderState:_R})};function UW(t,e,n){for(const r in e)!os(e[r])&&!FW(r,n)&&(t[r]=e[r])}function bhe({transformTemplate:t},e){return T.useMemo(()=>{const n=_R();return yR(n,e,t),Object.assign({},n.vars,n.style)},[e])}function yhe(t,e){const n=t.style||{},r={};return UW(r,n,t),Object.assign(r,bhe(t,e)),r}function vhe(t,e){const n={},r=yhe(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function _he(t,e,n,r){const s=T.useMemo(()=>{const i=OW();return vR(i,e,xR(r),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};UW(i,t.style,t),s.style={...i,...s.style}}return s}function xhe(t=!1){return(n,r,s,{latestValues:i},o)=>{const l=(pR(n)?_he:vhe)(r,i,o,n),c=Mde(r,typeof n=="string",t),u=n!==T.Fragment?{...c,...l,ref:s}:{},{children:d}=r,h=T.useMemo(()=>os(d)?d.get():d,[d]);return T.createElement(n,{...u,children:h})}}function whe(t,e){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const o={...pR(r)?mhe:ghe,preloadedFeatures:t,useRender:xhe(s),createVisualElement:e,Component:r};return Wde(o)}}function $W(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function lk(t,e,n){const r=t.getProps();return mR(r,e,n!==void 0?n:r.custom,t)}const Ehe=cR(()=>window.ScrollTimeline!==void 0);class She{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(s=>{if(Ehe()&&s.attachTimeline)return s.attachTimeline(e);if(typeof n=="function")return n(s)});return()=>{r.forEach((s,i)=>{s&&s(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class HW extends She{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function ER(t,e){return t?t[e]||t.default||t:void 0}const M2=2e4;function SR(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<M2;)e+=n,r=t.next(e);return e>=M2?1/0:e}function khe(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(SR(r),M2);return{type:"keyframes",ease:i=>r.next(s*i).value/e,duration:Ml(s)}}function ck(t){return typeof t=="function"}function FM(t,e){t.timeline=e,t.onfinish=null}const kR=t=>Array.isArray(t)&&typeof t[0]=="number",Che={linearEasing:void 0};function Ahe(t,e){const n=cR(t);return()=>{var r;return(r=Che[e])!==null&&r!==void 0?r:n()}}const j2=Ahe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),zW=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let i=0;i<s;i++)r+=t(cf(0,s-1,i))+", ";return`linear(${r.substring(0,r.length-2)})`};function VW(t){return!!(typeof t=="function"&&j2()||!t||typeof t=="string"&&(t in iN||j2())||kR(t)||Array.isArray(t)&&t.every(VW))}const hb=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,iN={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:hb([0,.65,.55,1]),circOut:hb([.55,0,1,.45]),backIn:hb([.31,.01,.66,-.59]),backOut:hb([.33,1.53,.69,.99])};function WW(t,e){if(t)return typeof t=="function"&&j2()?zW(t,e):kR(t)?hb(t):Array.isArray(t)?t.map(n=>WW(n,e)||iN.easeOut):iN[t]}const pa={x:!1,y:!1};function GW(){return pa.x||pa.y}function qW(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let s=document;e&&(s=e.current);const i=(r=n?.[t])!==null&&r!==void 0?r:s.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}function KW(t,e){const n=qW(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function BM(t){return e=>{e.pointerType==="touch"||GW()||t(e)}}function The(t,e,n={}){const[r,s,i]=KW(t,n),o=BM(a=>{const{target:l}=a,c=e(a);if(typeof c!="function"||!l)return;const u=BM(d=>{c(d),l.removeEventListener("pointerleave",u)});l.addEventListener("pointerleave",u,s)});return r.forEach(a=>{a.addEventListener("pointerenter",o,s)}),i}const YW=(t,e)=>e?t===e?!0:YW(t,e.parentElement):!1,CR=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Nhe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Phe(t){return Nhe.has(t.tagName)||t.tabIndex!==-1}const fb=new WeakSet;function UM(t){return e=>{e.key==="Enter"&&t(e)}}function YA(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Ihe=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=UM(()=>{if(fb.has(n))return;YA(n,"down");const s=UM(()=>{YA(n,"up")}),i=()=>YA(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",i,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function $M(t){return CR(t)&&!GW()}function Rhe(t,e,n={}){const[r,s,i]=KW(t,n),o=a=>{const l=a.currentTarget;if(!$M(a)||fb.has(l))return;fb.add(l);const c=e(a),u=(f,g)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",h),!(!$M(f)||!fb.has(l))&&(fb.delete(l),typeof c=="function"&&c(f,{success:g}))},d=f=>{u(f,n.useGlobalTarget||YW(l,f.target))},h=f=>{u(f,!1)};window.addEventListener("pointerup",d,s),window.addEventListener("pointercancel",h,s)};return r.forEach(a=>{!Phe(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,s),a.addEventListener("focus",c=>Ihe(c,s),s)}),i}function Lhe(t){return t==="x"||t==="y"?pa[t]?null:(pa[t]=!0,()=>{pa[t]=!1}):pa.x||pa.y?null:(pa.x=pa.y=!0,()=>{pa.x=pa.y=!1})}const XW=new Set(["width","height","top","left","right","bottom",...Tg]);let Ww;function Ohe(){Ww=void 0}const Fl={now:()=>(Ww===void 0&&Fl.set(gs.isProcessing||Pde.useManualTiming?gs.timestamp:performance.now()),Ww),set:t=>{Ww=t,queueMicrotask(Ohe)}};function AR(t,e){t.indexOf(e)===-1&&t.push(e)}function uk(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class TR{constructor(){this.subscriptions=[]}add(e){return AR(this.subscriptions,e),()=>uk(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function JW(t,e){return e?t*(1e3/e):0}const HM=30,Dhe=t=>!isNaN(parseFloat(t));class Mhe{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const i=Fl.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Fl.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Dhe(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new TR);const r=this.events[e].add(n);return e==="change"?()=>{r(),nr.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Fl.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>HM)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,HM);return JW(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function jy(t,e){return new Mhe(t,e)}function jhe(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,jy(n))}function Fhe(t,e){const n=lk(t,e);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const o in i){const a=Jde(i[o]);jhe(t,o,a)}}function Bhe(t){return!!(os(t)&&t.add)}function oN(t,e){const n=t.getValue("willChange");if(Bhe(n))return n.add(e)}function ZW(t){return t.props[AW]}const QW=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Uhe=1e-7,$he=12;function Hhe(t,e,n,r,s){let i,o,a=0;do o=e+(n-e)/2,i=QW(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>Uhe&&++a<$he);return o}function Ff(t,e,n,r){if(t===e&&n===r)return Qi;const s=i=>Hhe(i,0,1,t,n);return i=>i===0||i===1?i:QW(s(i),e,r)}const eG=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,tG=t=>e=>1-t(1-e),nG=Ff(.33,1.53,.69,.99),NR=tG(nG),rG=eG(NR),sG=t=>(t*=2)<1?.5*NR(t):.5*(2-Math.pow(2,-10*(t-1))),PR=t=>1-Math.sin(Math.acos(t)),iG=tG(PR),oG=eG(PR),aG=t=>/^0[^.\s]+$/u.test(t);function zhe(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||aG(t):!0}const Fb=t=>Math.round(t*1e5)/1e5,IR=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Vhe(t){return t==null}const Whe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,RR=(t,e)=>n=>!!(typeof n=="string"&&Whe.test(n)&&n.startsWith(t)||e&&!Vhe(n)&&Object.prototype.hasOwnProperty.call(n,e)),lG=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,i,o,a]=r.match(IR);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Ghe=t=>Kc(0,255,t),XA={...Ng,transform:t=>Math.round(Ghe(t))},Ch={test:RR("rgb","red"),parse:lG("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+XA.transform(t)+", "+XA.transform(e)+", "+XA.transform(n)+", "+Fb(My.transform(r))+")"};function qhe(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const aN={test:RR("#"),parse:qhe,transform:Ch.transform},em={test:RR("hsl","hue"),parse:lG("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+jl.transform(Fb(e))+", "+jl.transform(Fb(n))+", "+Fb(My.transform(r))+")"},Ds={test:t=>Ch.test(t)||aN.test(t)||em.test(t),parse:t=>Ch.test(t)?Ch.parse(t):em.test(t)?em.parse(t):aN.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ch.transform(t):em.transform(t)},Khe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Yhe(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(IR))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(Khe))===null||n===void 0?void 0:n.length)||0)>0}const cG="number",uG="color",Xhe="var",Jhe="var(",zM="${}",Zhe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Fy(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const a=e.replace(Zhe,l=>(Ds.test(l)?(r.color.push(i),s.push(uG),n.push(Ds.parse(l))):l.startsWith(Jhe)?(r.var.push(i),s.push(Xhe),n.push(l)):(r.number.push(i),s.push(cG),n.push(parseFloat(l))),++i,zM)).split(zM);return{values:n,split:a,indexes:r,types:s}}function dG(t){return Fy(t).values}function hG(t){const{split:e,types:n}=Fy(t),r=e.length;return s=>{let i="";for(let o=0;o<r;o++)if(i+=e[o],s[o]!==void 0){const a=n[o];a===cG?i+=Fb(s[o]):a===uG?i+=Ds.transform(s[o]):i+=s[o]}return i}}const Qhe=t=>typeof t=="number"?0:t;function efe(t){const e=dG(t);return hG(t)(e.map(Qhe))}const fd={test:Yhe,parse:dG,createTransformer:hG,getAnimatableNone:efe},tfe=new Set(["brightness","contrast","saturate","opacity"]);function nfe(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(IR)||[];if(!r)return t;const s=n.replace(r,"");let i=tfe.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const rfe=/\b([a-z-]*)\(.*?\)/gu,lN={...fd,getAnimatableNone:t=>{const e=t.match(rfe);return e?e.map(nfe).join(" "):t}},sfe={...bR,color:Ds,backgroundColor:Ds,outlineColor:Ds,fill:Ds,stroke:Ds,borderColor:Ds,borderTopColor:Ds,borderRightColor:Ds,borderBottomColor:Ds,borderLeftColor:Ds,filter:lN,WebkitFilter:lN},LR=t=>sfe[t];function fG(t,e){let n=LR(t);return n!==lN&&(n=fd),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const ife=new Set(["auto","none","0"]);function ofe(t,e,n){let r=0,s;for(;r<t.length&&!s;){const i=t[r];typeof i=="string"&&!ife.has(i)&&Fy(i).values.length&&(s=t[r]),r++}if(s&&n)for(const i of e)t[i]=fG(n,s)}const VM=t=>t===Ng||t===Bt,WM=(t,e)=>parseFloat(t.split(", ")[e]),GM=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/u);if(s)return WM(s[1],e);{const i=r.match(/^matrix\((.+)\)$/u);return i?WM(i[1],t):0}},afe=new Set(["x","y","z"]),lfe=Tg.filter(t=>!afe.has(t));function cfe(t){const e=[];return lfe.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Vm={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:GM(4,13),y:GM(5,14)};Vm.translateX=Vm.x;Vm.translateY=Vm.y;const Wh=new Set;let cN=!1,uN=!1;function pG(){if(uN){const t=Array.from(Wh).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=cfe(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,o])=>{var a;(a=r.getValue(i))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}uN=!1,cN=!1,Wh.forEach(t=>t.complete()),Wh.clear()}function mG(){Wh.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(uN=!0)})}function ufe(){mG(),pG()}class OR{constructor(e,n,r,s,i,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Wh.add(this),cN||(cN=!0,nr.read(mG),nr.resolveKeyframes(pG))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;for(let i=0;i<e.length;i++)if(e[i]===null)if(i===0){const o=s?.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),s&&o===void 0&&s.set(e[0])}else e[i]=e[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Wh.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Wh.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const gG=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),dfe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function hfe(t){const e=dfe.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function bG(t,e,n=1){const[r,s]=hfe(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return gG(o)?parseFloat(o):o}return gR(s)?bG(s,e,n+1):s}const yG=t=>e=>e.test(t),ffe={test:t=>t==="auto",parse:t=>t},vG=[Ng,Bt,jl,Iu,rhe,nhe,ffe],qM=t=>vG.find(yG(t));class _G extends OR{constructor(e,n,r,s,i){super(e,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),gR(c))){const u=bG(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!XW.has(r)||e.length!==2)return;const[s,i]=e,o=qM(s),a=qM(i);if(o!==a)if(VM(o)&&VM(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)zhe(e[s])&&r.push(s);r.length&&ofe(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Vm[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:s}=this;if(!n||!n.current)return;const i=n.getValue(r);i&&i.jump(this.measuredOrigin,!1);const o=s.length-1,a=s[o];s[o]=Vm[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const KM=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(fd.test(t)||t==="0")&&!t.startsWith("url("));function pfe(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function mfe(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=KM(s,e),a=KM(i,e);return!o||!a?!1:pfe(t)||(n==="spring"||ck(n))&&r}const gfe=t=>t!==null;function dk(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(gfe),i=e&&n!=="loop"&&e%2===1?0:s.length-1;return!i||r===void 0?s[i]:r}const bfe=40;class xG{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Fl.now(),this.options={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>bfe?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&ufe(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Fl.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:i,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!mfe(e,r,s,i))if(o)this.options.duration=0;else{l&&l(dk(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,n);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...u},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const ir=(t,e,n)=>t+(e-t)*n;function JA(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function yfe({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;s=JA(l,a,t+1/3),i=JA(l,a,t),o=JA(l,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function F2(t,e){return n=>n>0?e:t}const ZA=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},vfe=[aN,Ch,em],_fe=t=>vfe.find(e=>e.test(t));function YM(t){const e=_fe(t);if(!e)return!1;let n=e.parse(t);return e===em&&(n=yfe(n)),n}const XM=(t,e)=>{const n=YM(t),r=YM(e);if(!n||!r)return F2(t,e);const s={...n};return i=>(s.red=ZA(n.red,r.red,i),s.green=ZA(n.green,r.green,i),s.blue=ZA(n.blue,r.blue,i),s.alpha=ir(n.alpha,r.alpha,i),Ch.transform(s))},xfe=(t,e)=>n=>e(t(n)),gv=(...t)=>t.reduce(xfe),dN=new Set(["none","hidden"]);function wfe(t,e){return dN.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Efe(t,e){return n=>ir(t,e,n)}function DR(t){return typeof t=="number"?Efe:typeof t=="string"?gR(t)?F2:Ds.test(t)?XM:Cfe:Array.isArray(t)?wG:typeof t=="object"?Ds.test(t)?XM:Sfe:F2}function wG(t,e){const n=[...t],r=n.length,s=t.map((i,o)=>DR(i)(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}}function Sfe(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=DR(t[s])(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function kfe(t,e){var n;const r=[],s={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],a=t.indexes[o][s[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[i]=l,s[o]++}return r}const Cfe=(t,e)=>{const n=fd.createTransformer(e),r=Fy(t),s=Fy(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?dN.has(t)&&!s.values.length||dN.has(e)&&!r.values.length?wfe(t,e):gv(wG(kfe(r,s),s.values),n):F2(t,e)};function EG(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?ir(t,e,n):DR(t)(t,e)}const Afe=5;function SG(t,e,n){const r=Math.max(e-Afe,0);return JW(n-t(r),e-r)}const br={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},JM=.001;function Tfe({duration:t=br.duration,bounce:e=br.bounce,velocity:n=br.velocity,mass:r=br.mass}){let s,i,o=1-e;o=Kc(br.minDamping,br.maxDamping,o),t=Kc(br.minDuration,br.maxDuration,Ml(t)),o<1?(s=c=>{const u=c*o,d=u*t,h=u-n,f=hN(c,o),g=Math.exp(-d);return JM-h/f*g},i=c=>{const d=c*o*t,h=d*n+n,f=Math.pow(o,2)*Math.pow(c,2)*t,g=Math.exp(-d),y=hN(Math.pow(c,2),o);return(-s(c)+JM>0?-1:1)*((h-f)*g)/y}):(s=c=>{const u=Math.exp(-c*t),d=(c-n)*t+1;return-.001+u*d},i=c=>{const u=Math.exp(-c*t),d=(n-c)*(t*t);return u*d});const a=5/t,l=Pfe(s,i,a);if(t=Dl(t),isNaN(l))return{stiffness:br.stiffness,damping:br.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const Nfe=12;function Pfe(t,e,n){let r=n;for(let s=1;s<Nfe;s++)r=r-t(r)/e(r);return r}function hN(t,e){return t*Math.sqrt(1-e*e)}const Ife=["duration","bounce"],Rfe=["stiffness","damping","mass"];function ZM(t,e){return e.some(n=>t[n]!==void 0)}function Lfe(t){let e={velocity:br.velocity,stiffness:br.stiffness,damping:br.damping,mass:br.mass,isResolvedFromDuration:!1,...t};if(!ZM(t,Rfe)&&ZM(t,Ife))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*Kc(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:br.mass,stiffness:s,damping:i}}else{const n=Tfe(t);e={...e,...n,mass:br.mass},e.isResolvedFromDuration=!0}return e}function MR(t=br.visualDuration,e=br.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:i},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:f}=Lfe({...n,velocity:-Ml(n.velocity||0)}),g=h||0,y=c/(2*Math.sqrt(l*u)),m=o-i,b=Ml(Math.sqrt(l/u)),v=Math.abs(m)<5;r||(r=v?br.restSpeed.granular:br.restSpeed.default),s||(s=v?br.restDelta.granular:br.restDelta.default);let _;if(y<1){const w=hN(b,y);_=S=>{const k=Math.exp(-y*b*S);return o-k*((g+y*b*m)/w*Math.sin(w*S)+m*Math.cos(w*S))}}else if(y===1)_=w=>o-Math.exp(-b*w)*(m+(g+b*m)*w);else{const w=b*Math.sqrt(y*y-1);_=S=>{const k=Math.exp(-y*b*S),x=Math.min(w*S,300);return o-k*((g+y*b*m)*Math.sinh(x)+w*m*Math.cosh(x))/w}}const E={calculatedDuration:f&&d||null,next:w=>{const S=_(w);if(f)a.done=w>=d;else{let k=0;y<1&&(k=w===0?Dl(g):SG(_,w,S));const x=Math.abs(k)<=r,I=Math.abs(o-S)<=s;a.done=x&&I}return a.value=a.done?o:S,a},toString:()=>{const w=Math.min(SR(E),M2),S=zW(k=>E.next(w*k).value,w,30);return w+"ms "+S}};return E}function QM({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const d=t[0],h={done:!1,value:d},f=x=>a!==void 0&&x<a||l!==void 0&&x>l,g=x=>a===void 0?l:l===void 0||Math.abs(a-x)<Math.abs(l-x)?a:l;let y=n*e;const m=d+y,b=o===void 0?m:o(m);b!==m&&(y=b-d);const v=x=>-y*Math.exp(-x/r),_=x=>b+v(x),E=x=>{const I=v(x),R=_(x);h.done=Math.abs(I)<=c,h.value=h.done?b:R};let w,S;const k=x=>{f(h.value)&&(w=x,S=MR({keyframes:[h.value,g(h.value)],velocity:SG(_,x,h.value),damping:s,stiffness:i,restDelta:c,restSpeed:u}))};return k(0),{calculatedDuration:null,next:x=>{let I=!1;return!S&&w===void 0&&(I=!0,E(x),k(x)),w!==void 0&&x>=w?S.next(x-w):(!I&&E(x),h)}}}const Ofe=Ff(.42,0,1,1),Dfe=Ff(0,0,.58,1),kG=Ff(.42,0,.58,1),CG=t=>Array.isArray(t)&&typeof t[0]!="number",Mfe={linear:Qi,easeIn:Ofe,easeInOut:kG,easeOut:Dfe,circIn:PR,circInOut:oG,circOut:iG,backIn:NR,backInOut:rG,backOut:nG,anticipate:sG},e8=t=>{if(kR(t)){wW(t.length===4);const[e,n,r,s]=t;return Ff(e,n,r,s)}else if(typeof t=="string")return Mfe[t];return t};function jfe(t,e,n){const r=[],s=n||EG,i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Qi:e;a=gv(l,a)}r.push(a)}return r}function Ffe(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(wW(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=jfe(e,r,s),l=a.length,c=u=>{if(o&&u<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(u<t[d+1]);d++);const h=cf(t[d],t[d+1],u);return a[d](h)};return n?u=>c(Kc(t[0],t[i-1],u)):c}function AG(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=cf(0,e,r);t.push(ir(n,1,s))}}function TG(t){const e=[0];return AG(e,t.length-1),e}function Bfe(t,e){return t.map(n=>n*e)}function Ufe(t,e){return t.map(()=>e||kG).splice(0,t.length-1)}function B2({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=CG(r)?r.map(e8):e8(r),i={done:!1,value:e[0]},o=Bfe(n&&n.length===e.length?n:TG(e),t),a=Ffe(o,e,{ease:Array.isArray(s)?s:Ufe(e,s)});return{calculatedDuration:t,next:l=>(i.value=a(l),i.done=l>=t,i)}}const $fe=t=>{const e=({timestamp:n})=>t(n);return{start:()=>nr.update(e,!0),stop:()=>hd(e),now:()=>gs.isProcessing?gs.timestamp:Fl.now()}},Hfe={decay:QM,inertia:QM,tween:B2,keyframes:B2,spring:MR},zfe=t=>t/100;class jR extends xG{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:s,keyframes:i}=this.options,o=s?.KeyframeResolver||OR,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(i,a,n,r,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=this.options,a=ck(n)?n:Hfe[n]||B2;let l,c;a!==B2&&typeof e[0]!="number"&&(l=gv(zfe,EG(e[0],e[1])),e=[0,100]);const u=a({...this.options,keyframes:e});i==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=SR(u));const{calculatedDuration:d}=u,h=d+s,f=h*(r+1)-s;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:h,totalDuration:f}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:x}=this.options;return{done:!0,value:x[x.length-1]}}const{finalKeyframe:s,generator:i,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:d}=r;if(this.startTime===null)return i.next(0);const{delay:h,repeat:f,repeatType:g,repeatDelay:y,onUpdate:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const b=this.currentTime-h*(this.speed>=0?1:-1),v=this.speed>=0?b<0:b>u;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let _=this.currentTime,E=i;if(f){const x=Math.min(this.currentTime,u)/d;let I=Math.floor(x),R=x%1;!R&&x>=1&&(R=1),R===1&&I--,I=Math.min(I,f+1),!!(I%2)&&(g==="reverse"?(R=1-R,y&&(R-=y/d)):g==="mirror"&&(E=o)),_=Kc(0,1,R)*d}const w=v?{done:!1,value:l[0]}:E.next(_);a&&(w.value=a(w.value));let{done:S}=w;!v&&c!==null&&(S=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&S);return k&&s!==void 0&&(w.value=dk(l,this.options,s)),m&&m(w.value),k&&this.finish(),w}get duration(){const{resolved:e}=this;return e?Ml(e.calculatedDuration):0}get time(){return Ml(this.currentTime)}set time(e){e=Dl(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Ml(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=$fe,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const Vfe=new Set(["opacity","clipPath","filter","transform"]);function Wfe(t,e,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=WW(a,s);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:s,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}const Gfe=cR(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),U2=10,qfe=2e4;function Kfe(t){return ck(t.type)||t.type==="spring"||!VW(t.ease)}function Yfe(t,e){const n=new jR({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const s=[];let i=0;for(;!r.done&&i<qfe;)r=n.sample(i),s.push(r.value),i+=U2;return{times:void 0,keyframes:s,duration:i-U2,ease:"linear"}}const NG={anticipate:sG,backInOut:rG,circInOut:oG};function Xfe(t){return t in NG}class t8 extends xG{constructor(e){super(e);const{name:n,motionValue:r,element:s,keyframes:i}=this.options;this.resolver=new _G(i,(o,a)=>this.onKeyframesResolved(o,a),n,r,s),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:s,ease:i,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof i=="string"&&j2()&&Xfe(i)&&(i=NG[i]),Kfe(this.options)){const{onComplete:d,onUpdate:h,motionValue:f,element:g,...y}=this.options,m=Yfe(e,y);e=m.keyframes,e.length===1&&(e[1]=e[0]),r=m.duration,s=m.times,i=m.ease,o="keyframes"}const u=Wfe(a.owner.current,l,e,{...this.options,duration:r,times:s,ease:i});return u.startTime=c??this.calcStartTime(),this.pendingTimeline?(FM(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:d}=this.options;a.set(dk(e,this.options,n)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:r,times:s,type:o,ease:i,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Ml(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Ml(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Dl(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Qi;const{animation:r}=n;FM(r,e)}return Qi}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:s,type:i,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:d,element:h,...f}=this.options,g=new jR({...f,keyframes:r,duration:s,type:i,ease:o,times:a,isGenerator:!0}),y=Dl(this.time);c.setWithVelocity(g.sample(y-U2).value,g.sample(y).value,U2)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:s,repeatType:i,damping:o,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return Gfe()&&r&&Vfe.has(r)&&!l&&!c&&!s&&i!=="mirror"&&o!==0&&a!=="inertia"}}const Jfe={type:"spring",stiffness:500,damping:25,restSpeed:10},Zfe=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Qfe={type:"keyframes",duration:.8},epe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},tpe=(t,{keyframes:e})=>e.length>2?Qfe:jf.has(t)?t.startsWith("scale")?Zfe(e[1]):Jfe:epe;function npe({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const FR=(t,e,n,r={},s,i)=>o=>{const a=ER(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-Dl(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:h=>{e.set(h),a.onUpdate&&a.onUpdate(h)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:i?void 0:s};npe(a)||(u={...u,...tpe(t,u)}),u.duration&&(u.duration=Dl(u.duration)),u.repeatDelay&&(u.repeatDelay=Dl(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let d=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(d=!0)),d&&!i&&e.get()!==void 0){const h=dk(u.keyframes,a);if(h!==void 0)return nr.update(()=>{u.onUpdate(h),u.onComplete()}),new HW([])}return!i&&t8.supports(u)?new t8(u):new jR(u)};function rpe({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function BR(t,e,{delay:n=0,transitionOverride:r,type:s}={}){var i;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const c=[],u=s&&t.animationState&&t.animationState.getState()[s];for(const d in l){const h=t.getValue(d,(i=t.latestValues[d])!==null&&i!==void 0?i:null),f=l[d];if(f===void 0||u&&rpe(u,d))continue;const g={delay:n,...ER(o||{},d)};let y=!1;if(window.MotionHandoffAnimation){const b=ZW(t);if(b){const v=window.MotionHandoffAnimation(b,d,nr);v!==null&&(g.startTime=v,y=!0)}}oN(t,d),h.start(FR(d,h,f,t.shouldReduceMotion&&XW.has(d)?{type:!1}:g,t,y));const m=h.animation;m&&c.push(m)}return a&&Promise.all(c).then(()=>{nr.update(()=>{a&&Fhe(t,a)})}),c}function fN(t,e,n={}){var r;const s=lk(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(i=n.transitionOverride);const o=s?()=>Promise.all(BR(t,s,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:h}=i;return spe(t,e,u+c,d,h,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(n.delay)])}function spe(t,e,n=0,r=0,s=1,i){const o=[],a=(t.variantChildren.size-1)*r,l=s===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(ipe).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(fN(c,e,{...i,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function ipe(t,e){return t.sortNodePosition(e)}function ope(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>fN(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=fN(t,e,n);else{const s=typeof e=="function"?lk(t,e,n.custom):e;r=Promise.all(BR(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const ape=dR.length;function PG(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?PG(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<ape;n++){const r=dR[n],s=t.props[r];(Dy(s)||s===!1)&&(e[r]=s)}return e}const lpe=[...uR].reverse(),cpe=uR.length;function upe(t){return e=>Promise.all(e.map(({animation:n,options:r})=>ope(t,n,r)))}function dpe(t){let e=upe(t),n=n8(),r=!0;const s=l=>(c,u)=>{var d;const h=lk(t,u,l==="exit"?(d=t.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(h){const{transition:f,transitionEnd:g,...y}=h;c={...c,...y,...g}}return c};function i(l){e=l(t)}function o(l){const{props:c}=t,u=PG(t.parent)||{},d=[],h=new Set;let f={},g=1/0;for(let m=0;m<cpe;m++){const b=lpe[m],v=n[b],_=c[b]!==void 0?c[b]:u[b],E=Dy(_),w=b===l?v.isActive:null;w===!1&&(g=m);let S=_===u[b]&&_!==c[b]&&E;if(S&&r&&t.manuallyAnimateOnMount&&(S=!1),v.protectedKeys={...f},!v.isActive&&w===null||!_&&!v.prevProp||ok(_)||typeof _=="boolean")continue;const k=hpe(v.prevProp,_);let x=k||b===l&&v.isActive&&!S&&E||m>g&&E,I=!1;const R=Array.isArray(_)?_:[_];let C=R.reduce(s(b),{});w===!1&&(C={});const{prevResolvedValues:N={}}=v,O={...N,...C},P=J=>{x=!0,h.has(J)&&(I=!0,h.delete(J)),v.needsAnimating[J]=!0;const Z=t.getValue(J);Z&&(Z.liveStyle=!1)};for(const J in O){const Z=C[J],M=N[J];if(f.hasOwnProperty(J))continue;let F=!1;sN(Z)&&sN(M)?F=!$W(Z,M):F=Z!==M,F?Z!=null?P(J):h.add(J):Z!==void 0&&h.has(J)?P(J):v.protectedKeys[J]=!0}v.prevProp=_,v.prevResolvedValues=C,v.isActive&&(f={...f,...C}),r&&t.blockInitialAnimation&&(x=!1),x&&(!(S&&k)||I)&&d.push(...R.map(J=>({animation:J,options:{type:b}})))}if(h.size){const m={};h.forEach(b=>{const v=t.getBaseTarget(b),_=t.getValue(b);_&&(_.liveStyle=!0),m[b]=v??null}),d.push({animation:m})}let y=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(y=!1),r=!1,y?e(d):Promise.resolve()}function a(l,c){var u;if(n[l].isActive===c)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(h=>{var f;return(f=h.animationState)===null||f===void 0?void 0:f.setActive(l,c)}),n[l].isActive=c;const d=o(l);for(const h in n)n[h].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n,reset:()=>{n=n8(),r=!0}}}function hpe(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!$W(e,t):!1}function eh(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function n8(){return{animate:eh(!0),whileInView:eh(),whileHover:eh(),whileTap:eh(),whileDrag:eh(),whileFocus:eh(),exit:eh()}}class Od{constructor(e){this.isMounted=!1,this.node=e}update(){}}class fpe extends Od{constructor(e){super(e),e.animationState||(e.animationState=dpe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();ok(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let ppe=0;class mpe extends Od{constructor(){super(...arguments),this.id=ppe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const gpe={animation:{Feature:fpe},exit:{Feature:mpe}};function By(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function bv(t){return{point:{x:t.pageX,y:t.pageY}}}const bpe=t=>e=>CR(e)&&t(e,bv(e));function Bb(t,e,n,r){return By(t,e,bpe(n),r)}const r8=(t,e)=>Math.abs(t-e);function ype(t,e){const n=r8(t.x,e.x),r=r8(t.y,e.y);return Math.sqrt(n**2+r**2)}class IG{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=eT(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,f=ype(d.offset,{x:0,y:0})>=3;if(!h&&!f)return;const{point:g}=d,{timestamp:y}=gs;this.history.push({...g,timestamp:y});const{onStart:m,onMove:b}=this.handlers;h||(m&&m(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,d)},this.handlePointerMove=(d,h)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=QA(h,this.transformPagePoint),nr.update(this.updatePoint,!0)},this.handlePointerUp=(d,h)=>{this.end();const{onEnd:f,onSessionEnd:g,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=eT(d.type==="pointercancel"?this.lastMoveEventInfo:QA(h,this.transformPagePoint),this.history);this.startEvent&&f&&f(d,m),g&&g(d,m)},!CR(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=bv(e),a=QA(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=gs;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,eT(a,this.history)),this.removeListeners=gv(Bb(this.contextWindow,"pointermove",this.handlePointerMove),Bb(this.contextWindow,"pointerup",this.handlePointerUp),Bb(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),hd(this.updatePoint)}}function QA(t,e){return e?{point:e(t.point)}:t}function s8(t,e){return{x:t.x-e.x,y:t.y-e.y}}function eT({point:t},e){return{point:t,delta:s8(t,RG(e)),offset:s8(t,vpe(e)),velocity:_pe(e,.1)}}function vpe(t){return t[0]}function RG(t){return t[t.length-1]}function _pe(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=RG(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Dl(e)));)n--;if(!r)return{x:0,y:0};const i=Ml(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const LG=1e-4,xpe=1-LG,wpe=1+LG,OG=.01,Epe=0-OG,Spe=0+OG;function ro(t){return t.max-t.min}function kpe(t,e,n){return Math.abs(t-e)<=n}function i8(t,e,n,r=.5){t.origin=r,t.originPoint=ir(e.min,e.max,t.origin),t.scale=ro(n)/ro(e),t.translate=ir(n.min,n.max,t.origin)-t.originPoint,(t.scale>=xpe&&t.scale<=wpe||isNaN(t.scale))&&(t.scale=1),(t.translate>=Epe&&t.translate<=Spe||isNaN(t.translate))&&(t.translate=0)}function Ub(t,e,n,r){i8(t.x,e.x,n.x,r?r.originX:void 0),i8(t.y,e.y,n.y,r?r.originY:void 0)}function o8(t,e,n){t.min=n.min+e.min,t.max=t.min+ro(e)}function Cpe(t,e,n){o8(t.x,e.x,n.x),o8(t.y,e.y,n.y)}function a8(t,e,n){t.min=e.min-n.min,t.max=t.min+ro(e)}function $b(t,e,n){a8(t.x,e.x,n.x),a8(t.y,e.y,n.y)}function Ape(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?ir(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?ir(n,t,r.max):Math.min(t,n)),t}function l8(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Tpe(t,{top:e,left:n,bottom:r,right:s}){return{x:l8(t.x,n,s),y:l8(t.y,e,r)}}function c8(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Npe(t,e){return{x:c8(t.x,e.x),y:c8(t.y,e.y)}}function Ppe(t,e){let n=.5;const r=ro(t),s=ro(e);return s>r?n=cf(e.min,e.max-r,t.min):r>s&&(n=cf(t.min,t.max-s,e.min)),Kc(0,1,n)}function Ipe(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const pN=.35;function Rpe(t=pN){return t===!1?t=0:t===!0&&(t=pN),{x:u8(t,"left","right"),y:u8(t,"top","bottom")}}function u8(t,e,n){return{min:d8(t,e),max:d8(t,n)}}function d8(t,e){return typeof t=="number"?t:t[e]||0}const h8=()=>({translate:0,scale:1,origin:0,originPoint:0}),tm=()=>({x:h8(),y:h8()}),f8=()=>({min:0,max:0}),mr=()=>({x:f8(),y:f8()});function Eo(t){return[t("x"),t("y")]}function DG({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Lpe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Ope(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function tT(t){return t===void 0||t===1}function mN({scale:t,scaleX:e,scaleY:n}){return!tT(t)||!tT(e)||!tT(n)}function dh(t){return mN(t)||MG(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function MG(t){return p8(t.x)||p8(t.y)}function p8(t){return t&&t!=="0%"}function $2(t,e,n){const r=t-n,s=e*r;return n+s}function m8(t,e,n,r,s){return s!==void 0&&(t=$2(t,s,r)),$2(t,n,r)+e}function gN(t,e=0,n=1,r,s){t.min=m8(t.min,e,n,r,s),t.max=m8(t.max,e,n,r,s)}function jG(t,{x:e,y:n}){gN(t.x,e.translate,e.scale,e.originPoint),gN(t.y,n.translate,n.scale,n.originPoint)}const g8=.999999999999,b8=1.0000000000001;function Dpe(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&rm(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,jG(t,o)),r&&dh(i.latestValues)&&rm(t,i.latestValues))}e.x<b8&&e.x>g8&&(e.x=1),e.y<b8&&e.y>g8&&(e.y=1)}function nm(t,e){t.min=t.min+e,t.max=t.max+e}function y8(t,e,n,r,s=.5){const i=ir(t.min,t.max,s);gN(t,e,n,i,r)}function rm(t,e){y8(t.x,e.x,e.scaleX,e.scale,e.originX),y8(t.y,e.y,e.scaleY,e.scale,e.originY)}function FG(t,e){return DG(Ope(t.getBoundingClientRect(),e))}function Mpe(t,e,n){const r=FG(t,n),{scroll:s}=e;return s&&(nm(r.x,s.offset.x),nm(r.y,s.offset.y)),r}const BG=({current:t})=>t?t.ownerDocument.defaultView:null,jpe=new WeakMap;class Fpe{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=mr(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=u=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(bv(u).point)},i=(u,d)=>{const{drag:h,dragPropagation:f,onDragStart:g}=this.getProps();if(h&&!f&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Lhe(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Eo(m=>{let b=this.getAxisMotionValue(m).get()||0;if(jl.test(b)){const{projection:v}=this.visualElement;if(v&&v.layout){const _=v.layout.layoutBox[m];_&&(b=ro(_)*(parseFloat(b)/100))}}this.originPoint[m]=b}),g&&nr.postRender(()=>g(u,d)),oN(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},o=(u,d)=>{const{dragPropagation:h,dragDirectionLock:f,onDirectionLock:g,onDrag:y}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:m}=d;if(f&&this.currentDirection===null){this.currentDirection=Bpe(m),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",d.point,m),this.updateAxis("y",d.point,m),this.visualElement.render(),y&&y(u,d)},a=(u,d)=>this.stop(u,d),l=()=>Eo(u=>{var d;return this.getAnimationState(u)==="paused"&&((d=this.getAxisMotionValue(u).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new IG(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:BG(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&nr.postRender(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!rx(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=Ape(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;n&&Qp(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=Tpe(s.layoutBox,n):this.constraints=!1,this.elastic=Rpe(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Eo(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=Ipe(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Qp(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=Mpe(r,s.root,this.visualElement.getTransformPagePoint());let o=Npe(s.layout.layoutBox,i);if(n){const a=n(Lpe(o));this.hasMutatedConstraints=!!a,a&&(o=DG(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Eo(u=>{if(!rx(u,n,this.currentDirection))return;let d=l&&l[u]||{};o&&(d={min:0,max:0});const h=s?200:1e6,f=s?40:1e7,g={type:"inertia",velocity:r?e[u]:0,bounceStiffness:h,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...i,...d};return this.startAxisValueAnimation(u,g)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return oN(this.visualElement,e),r.start(FR(e,r,0,n,this.visualElement,!1))}stopAnimation(){Eo(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Eo(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Eo(n=>{const{drag:r}=this.getProps();if(!rx(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(e[n]-ir(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Qp(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Eo(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();s[o]=Ppe({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Eo(o=>{if(!rx(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(ir(l,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;jpe.set(this.visualElement,this);const e=this.visualElement.current,n=Bb(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Qp(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),nr.read(r);const o=By(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Eo(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=pN,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function rx(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Bpe(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Upe extends Od{constructor(e){super(e),this.removeGroupControls=Qi,this.removeListeners=Qi,this.controls=new Fpe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Qi}unmount(){this.removeGroupControls(),this.removeListeners()}}const v8=t=>(e,n)=>{t&&nr.postRender(()=>t(e,n))};class $pe extends Od{constructor(){super(...arguments),this.removePointerDownListener=Qi}onPointerDown(e){this.session=new IG(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:BG(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:v8(e),onStart:v8(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&nr.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=Bb(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Gw={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function _8(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const L0={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Bt.test(t))t=parseFloat(t);else return t;const n=_8(t,e.target.x),r=_8(t,e.target.y);return`${n}% ${r}%`}},Hpe={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=fd.parse(t);if(s.length>5)return r;const i=fd.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=l;const c=ir(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),i(s)}};class zpe extends T.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;fhe(Vpe),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Gw.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||nr.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),fR.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function UG(t){const[e,n]=_W(),r=T.useContext(oR);return p.jsx(zpe,{...t,layoutGroup:r,switchLayoutGroup:T.useContext(TW),isPresent:e,safeToRemove:n})}const Vpe={borderRadius:{...L0,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:L0,borderTopRightRadius:L0,borderBottomLeftRadius:L0,borderBottomRightRadius:L0,boxShadow:Hpe};function $G(t,e,n){const r=os(t)?t:jy(t);return r.start(FR("",r,e,n)),r.animation}function HG(t){return t instanceof SVGElement&&t.tagName!=="svg"}const Wpe=(t,e)=>t.depth-e.depth;class Gpe{constructor(){this.children=[],this.isDirty=!1}add(e){AR(this.children,e),this.isDirty=!0}remove(e){uk(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Wpe),this.isDirty=!1,this.children.forEach(e)}}function qpe(t,e){const n=Fl.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(hd(r),t(i-e))};return nr.read(r,!0),()=>hd(r)}const zG=["TopLeft","TopRight","BottomLeft","BottomRight"],Kpe=zG.length,x8=t=>typeof t=="string"?parseFloat(t):t,w8=t=>typeof t=="number"||Bt.test(t);function Ype(t,e,n,r,s,i){s?(t.opacity=ir(0,n.opacity!==void 0?n.opacity:1,Xpe(r)),t.opacityExit=ir(e.opacity!==void 0?e.opacity:1,0,Jpe(r))):i&&(t.opacity=ir(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<Kpe;o++){const a=`border${zG[o]}Radius`;let l=E8(e,a),c=E8(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||w8(l)===w8(c)?(t[a]=Math.max(ir(x8(l),x8(c),r),0),(jl.test(c)||jl.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=ir(e.rotate||0,n.rotate||0,r))}function E8(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Xpe=VG(0,.5,iG),Jpe=VG(.5,.95,Qi);function VG(t,e,n){return r=>r<t?0:r>e?1:n(cf(t,e,r))}function S8(t,e){t.min=e.min,t.max=e.max}function _o(t,e){S8(t.x,e.x),S8(t.y,e.y)}function k8(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function C8(t,e,n,r,s){return t-=e,t=$2(t,1/n,r),s!==void 0&&(t=$2(t,1/s,r)),t}function Zpe(t,e=0,n=1,r=.5,s,i=t,o=t){if(jl.test(e)&&(e=parseFloat(e),e=ir(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=ir(i.min,i.max,r);t===i&&(a-=e),t.min=C8(t.min,e,n,a,s),t.max=C8(t.max,e,n,a,s)}function A8(t,e,[n,r,s],i,o){Zpe(t,e[n],e[r],e[s],e.scale,i,o)}const Qpe=["x","scaleX","originX"],eme=["y","scaleY","originY"];function T8(t,e,n,r){A8(t.x,e,Qpe,n?n.x:void 0,r?r.x:void 0),A8(t.y,e,eme,n?n.y:void 0,r?r.y:void 0)}function N8(t){return t.translate===0&&t.scale===1}function WG(t){return N8(t.x)&&N8(t.y)}function P8(t,e){return t.min===e.min&&t.max===e.max}function tme(t,e){return P8(t.x,e.x)&&P8(t.y,e.y)}function I8(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function GG(t,e){return I8(t.x,e.x)&&I8(t.y,e.y)}function R8(t){return ro(t.x)/ro(t.y)}function L8(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class nme{constructor(){this.members=[]}add(e){AR(this.members,e),e.scheduleRender()}remove(e){if(uk(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function rme(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y,o=n?.z||0;if((s||i||o)&&(r=`translate3d(${s}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:d,rotateY:h,skewX:f,skewY:g}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),d&&(r+=`rotateX(${d}deg) `),h&&(r+=`rotateY(${h}deg) `),f&&(r+=`skewX(${f}deg) `),g&&(r+=`skewY(${g}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const hh={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},pb=typeof window<"u"&&window.MotionDebug!==void 0,nT=["","X","Y","Z"],sme={visibility:"hidden"},O8=1e3;let ime=0;function rT(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function qG(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=ZW(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",nr,!(s||i))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&qG(r)}function KG({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e?.()){this.id=ime++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,pb&&(hh.totalNodes=hh.resolvedTargetDeltas=hh.recalculatedProjection=0),this.nodes.forEach(lme),this.nodes.forEach(fme),this.nodes.forEach(pme),this.nodes.forEach(cme),pb&&window.MotionDebug.record(hh)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Gpe)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new TR),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=HG(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let d;const h=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=qpe(h,250),Gw.hasAnimatedSinceResize&&(Gw.hasAnimatedSinceResize=!1,this.nodes.forEach(M8))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeTargetChanged:f,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||u.getDefaultTransition()||vme,{onLayoutAnimationStart:m,onLayoutAnimationComplete:b}=u.getProps(),v=!this.targetLayout||!GG(this.targetLayout,g)||f,_=!h&&f;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||_||h&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,_);const E={...ER(y,"layout"),onPlay:m,onComplete:b};(u.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E)}else h||M8(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,hd(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(mme),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&qG(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(D8);return}this.isUpdating||this.nodes.forEach(dme),this.isUpdating=!1,this.nodes.forEach(hme),this.nodes.forEach(ome),this.nodes.forEach(ame),this.clearAllSnapshots();const a=Fl.now();gs.delta=Kc(0,1e3/60,a-gs.timestamp),gs.timestamp=a,gs.isProcessing=!0,KA.update.process(gs),KA.preRender.process(gs),KA.render.process(gs),gs.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,fR.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(ume),this.sharedNodes.forEach(gme)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,nr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){nr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=mr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!WG(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||dh(this.latestValues)||u)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),_me(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return mr();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(xme))){const{scroll:u}=this.root;u&&(nm(l.x,u.offset.x),nm(l.y,u.offset.y))}return l}removeElementScroll(o){var a;const l=mr();if(_o(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:h}=u;u!==this.root&&d&&h.layoutScroll&&(d.wasRoot&&_o(l,o),nm(l.x,d.offset.x),nm(l.y,d.offset.y))}return l}applyTransform(o,a=!1){const l=mr();_o(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&rm(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),dh(u.latestValues)&&rm(l,u.latestValues)}return dh(this.latestValues)&&rm(l,this.latestValues),l}removeTransform(o){const a=mr();_o(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!dh(c.latestValues))continue;mN(c.latestValues)&&c.updateSnapshot();const u=mr(),d=c.measurePageBox();_o(u,d),T8(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return dh(this.latestValues)&&T8(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==gs.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=gs.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=mr(),this.relativeTargetOrigin=mr(),$b(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),_o(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=mr(),this.targetWithTransforms=mr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Cpe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):_o(this.target,this.layout.layoutBox),jG(this.target,this.targetDelta)):_o(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=mr(),this.relativeTargetOrigin=mr(),$b(this.relativeTargetOrigin,this.target,f.target),_o(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}pb&&hh.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||mN(this.parent.latestValues)||MG(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===gs.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;_o(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;Dpe(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=mr());const{target:g}=a;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(k8(this.prevProjectionDelta.x,this.projectionDelta.x),k8(this.prevProjectionDelta.y,this.projectionDelta.y)),Ub(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!L8(this.projectionDelta.x,this.prevProjectionDelta.x)||!L8(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),pb&&hh.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=tm(),this.projectionDelta=tm(),this.projectionDeltaWithTransform=tm()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},d=tm();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const h=mr(),f=l?l.source:void 0,g=this.layout?this.layout.source:void 0,y=f!==g,m=this.getStack(),b=!m||m.members.length<=1,v=!!(y&&!b&&this.options.crossfade===!0&&!this.path.some(yme));this.animationProgress=0;let _;this.mixTargetDelta=E=>{const w=E/1e3;j8(d.x,o.x,w),j8(d.y,o.y,w),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&($b(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),bme(this.relativeTarget,this.relativeTargetOrigin,h,w),_&&tme(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=mr()),_o(_,this.relativeTarget)),y&&(this.animationValues=u,Ype(u,c,this.latestValues,w,v,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=w},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(hd(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=nr.update(()=>{Gw.hasAnimatedSinceResize=!0,this.currentAnimation=$G(0,O8,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(O8),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&YG(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||mr();const d=ro(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const h=ro(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+h}_o(a,l),rm(a,u),Ub(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new nme),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&rT("z",o,c,this.animationValues);for(let u=0;u<nT.length;u++)rT(`rotate${nT[u]}`,o,c,this.animationValues),rT(`skew${nT[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return sme;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Vw(o?.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=Vw(o?.pointerEvents)||""),this.hasProjected&&!dh(this.latestValues)&&(y.transform=u?u({},""):"none",this.hasProjected=!1),y}const h=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=rme(this.projectionDeltaWithTransform,this.treeScale,h),u&&(c.transform=u(h,c.transform));const{x:f,y:g}=this.projectionDelta;c.transformOrigin=`${f.origin*100}% ${g.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(a=h.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:c.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const y in D2){if(h[y]===void 0)continue;const{correct:m,applyTo:b}=D2[y],v=c.transform==="none"?h[y]:m(h[y],d);if(b){const _=b.length;for(let E=0;E<_;E++)c[b[E]]=v}else c[y]=v}return this.options.layoutId&&(c.pointerEvents=d===this?Vw(o?.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(D8),this.root.sharedNodes.clear()}}}function ome(t){t.updateLayout()}function ame(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=n.source!==t.layout.source;i==="size"?Eo(d=>{const h=o?n.measuredBox[d]:n.layoutBox[d],f=ro(h);h.min=r[d].min,h.max=h.min+f}):YG(i,n.layoutBox,r)&&Eo(d=>{const h=o?n.measuredBox[d]:n.layoutBox[d],f=ro(r[d]);h.max=h.min+f,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+f)});const a=tm();Ub(a,r,n.layoutBox);const l=tm();o?Ub(l,t.applyTransform(s,!0),n.measuredBox):Ub(l,r,n.layoutBox);const c=!WG(a);let u=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:h,layout:f}=d;if(h&&f){const g=mr();$b(g,n.layoutBox,h.layoutBox);const y=mr();$b(y,r,f.layoutBox),GG(g,y)||(u=!0),d.options.layoutRoot&&(t.relativeTarget=y,t.relativeTargetOrigin=g,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function lme(t){pb&&hh.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function cme(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function ume(t){t.clearSnapshot()}function D8(t){t.clearMeasurements()}function dme(t){t.isLayoutDirty=!1}function hme(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function M8(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function fme(t){t.resolveTargetDelta()}function pme(t){t.calcProjection()}function mme(t){t.resetSkewAndRotation()}function gme(t){t.removeLeadSnapshot()}function j8(t,e,n){t.translate=ir(e.translate,0,n),t.scale=ir(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function F8(t,e,n,r){t.min=ir(e.min,n.min,r),t.max=ir(e.max,n.max,r)}function bme(t,e,n,r){F8(t.x,e.x,n.x,r),F8(t.y,e.y,n.y,r)}function yme(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const vme={duration:.45,ease:[.4,0,.1,1]},B8=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),U8=B8("applewebkit/")&&!B8("chrome/")?Math.round:Qi;function $8(t){t.min=U8(t.min),t.max=U8(t.max)}function _me(t){$8(t.x),$8(t.y)}function YG(t,e,n){return t==="position"||t==="preserve-aspect"&&!kpe(R8(e),R8(n),.2)}function xme(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const wme=KG({attachResizeListener:(t,e)=>By(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),sT={current:void 0},XG=KG({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!sT.current){const t=new wme({});t.mount(window),t.setOptions({layoutScroll:!0}),sT.current=t}return sT.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Eme={pan:{Feature:$pe},drag:{Feature:Upe,ProjectionNode:XG,MeasureLayout:UG}};function H8(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&nr.postRender(()=>i(e,bv(e)))}class Sme extends Od{mount(){const{current:e}=this.node;e&&(this.unmount=The(e,n=>(H8(this.node,n,"Start"),r=>H8(this.node,r,"End"))))}unmount(){}}class kme extends Od{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=gv(By(this.node.current,"focus",()=>this.onFocus()),By(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function z8(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&nr.postRender(()=>i(e,bv(e)))}class Cme extends Od{mount(){const{current:e}=this.node;e&&(this.unmount=Rhe(e,n=>(z8(this.node,n,"Start"),(r,{success:s})=>z8(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const bN=new WeakMap,iT=new WeakMap,Ame=t=>{const e=bN.get(t.target);e&&e(t)},Tme=t=>{t.forEach(Ame)};function Nme({root:t,...e}){const n=t||document;iT.has(n)||iT.set(n,{});const r=iT.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(Tme,{root:t,...e})),r[s]}function Pme(t,e,n){const r=Nme(e);return bN.set(t,n),r.observe(t),()=>{bN.delete(t),r.unobserve(t)}}const Ime={some:0,all:1};class Rme extends Od{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:Ime[s]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),h=c?u:d;h&&h(l)};return Pme(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Lme(e,n))&&this.startObserver()}unmount(){}}function Lme({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Ome={inView:{Feature:Rme},tap:{Feature:Cme},focus:{Feature:kme},hover:{Feature:Sme}},Dme={layout:{ProjectionNode:XG,MeasureLayout:UG}},yN={current:null},JG={current:!1};function Mme(){if(JG.current=!0,!!lR)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>yN.current=t.matches;t.addListener(e),e()}else yN.current=!1}const jme=[...vG,Ds,fd],Fme=t=>jme.find(yG(t)),Wm=new WeakMap;function Bme(t,e,n){for(const r in e){const s=e[r],i=n[r];if(os(s))t.addValue(r,s);else if(os(i))t.addValue(r,jy(s,{owner:t}));else if(i!==s)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=t.getStaticValue(r);t.addValue(r,jy(o!==void 0?o:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const V8=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class ZG{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=OR,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=Fl.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,nr.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:u}=o;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=ak(n),this.isVariantNode=CW(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in h){const g=h[f];l[f]!==void 0&&os(g)&&g.set(l[f],!1)}}mount(e){this.current=e,Wm.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),JG.current||Mme(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:yN.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Wm.delete(this.current),this.projection&&this.projection.unmount(),hd(this.notifyUpdate),hd(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=jf.has(e),s=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&nr.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),i(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in zm){const n=zm[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):mr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<V8.length;r++){const s=V8[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=e[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=Bme(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=jy(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(gG(s)||aG(s))?s=parseFloat(s):!Fme(s)&&fd.test(n)&&(s=fG(e,n)),this.setBaseTarget(e,os(s)?s.get():s)),os(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const o=mR(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(s=o[e])}if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!os(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new TR),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class QG extends ZG{constructor(){super(...arguments),this.KeyframeResolver=_G}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;os(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Ume(t){return window.getComputedStyle(t)}class eq extends QG{constructor(){super(...arguments),this.type="html",this.renderInstance=DW}readValueFromInstance(e,n){if(jf.has(n)){const r=LR(n);return r&&r.default||0}else{const r=Ume(e),s=(RW(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return FG(e,n)}build(e,n,r){yR(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return wR(e,n,r)}}class tq extends QG{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=mr}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(jf.has(n)){const r=LR(n);return r&&r.default||0}return n=MW.has(n)?n:hR(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return BW(e,n,r)}build(e,n,r){vR(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,s){jW(e,n,r,s)}mount(e){this.isSVGTag=xR(e.tagName),super.mount(e)}}const $me=(t,e)=>pR(t)?new tq(e):new eq(e,{allowProjection:t!==T.Fragment}),Hme=whe({...gpe,...Ome,...Eme,...Dme},$me),ot=jde(Hme);function zme(t){return T.useEffect(()=>()=>t(),[])}const Vme=(t,e,n)=>{const r=e-t;return((n-t)%r+r)%r+t};function nq(t,e){return CG(t)?t[Vme(0,t.length,e)]:t}function UR(t){return typeof t=="object"&&!Array.isArray(t)}function rq(t,e,n,r){return typeof t=="string"&&UR(e)?qW(t,n,r):t instanceof NodeList?Array.from(t):Array.isArray(t)?t:[t]}function Wme(t,e,n){return t*(e+1)}function W8(t,e,n,r){var s;return typeof e=="number"?e:e.startsWith("-")||e.startsWith("+")?Math.max(0,t+parseFloat(e)):e==="<"?n:(s=r.get(e))!==null&&s!==void 0?s:t}function Gme(t,e,n){for(let r=0;r<t.length;r++){const s=t[r];s.at>e&&s.at<n&&(uk(t,s),r--)}}function qme(t,e,n,r,s,i){Gme(t,s,i);for(let o=0;o<e.length;o++)t.push({value:e[o],at:ir(s,i,r[o]),easing:nq(n,o)})}function Kme(t,e){for(let n=0;n<t.length;n++)t[n]=t[n]/(e+1)}function Yme(t,e){return t.at===e.at?t.value===null?1:e.value===null?-1:0:t.at-e.at}const Xme="easeInOut";function Jme(t,{defaultTransition:e={},...n}={},r,s){const i=e.duration||.3,o=new Map,a=new Map,l={},c=new Map;let u=0,d=0,h=0;for(let f=0;f<t.length;f++){const g=t[f];if(typeof g=="string"){c.set(g,d);continue}else if(!Array.isArray(g)){c.set(g.name,W8(d,g.at,u,c));continue}let[y,m,b={}]=g;b.at!==void 0&&(d=W8(d,b.at,u,c));let v=0;const _=(E,w,S,k=0,x=0)=>{const I=Zme(E),{delay:R=0,times:C=TG(I),type:N="keyframes",repeat:O,repeatType:P,repeatDelay:$=0,...ee}=w;let{ease:J=e.ease||"easeOut",duration:Z}=w;const M=typeof R=="function"?R(k,x):R,F=I.length,G=ck(N)?N:s?.[N];if(F<=2&&G){let W=100;if(F===2&&tge(I)){const Y=I[1]-I[0];W=Math.abs(Y)}const re={...ee};Z!==void 0&&(re.duration=Dl(Z));const te=khe(re,W,G);J=te.ease,Z=te.duration}Z??(Z=i);const D=d+M;C.length===1&&C[0]===0&&(C[1]=1);const j=C.length-I.length;if(j>0&&AG(C,j),I.length===1&&I.unshift(null),O){Z=Wme(Z,O);const W=[...I],re=[...C];J=Array.isArray(J)?[...J]:[J];const te=[...J];for(let Y=0;Y<O;Y++){I.push(...W);for(let de=0;de<W.length;de++)C.push(re[de]+(Y+1)),J.push(de===0?"linear":nq(te,de-1))}Kme(C,O)}const V=D+Z;qme(S,I,J,C,D,V),v=Math.max(M+Z,v),h=Math.max(V,h)};if(os(y)){const E=G8(y,a);_(m,b,q8("default",E))}else{const E=rq(y,m,r,l),w=E.length;for(let S=0;S<w;S++){m=m,b=b;const k=E[S],x=G8(k,a);for(const I in m)_(m[I],Qme(b,I),q8(I,x),S,w)}}u=d,d+=v}return a.forEach((f,g)=>{for(const y in f){const m=f[y];m.sort(Yme);const b=[],v=[],_=[];for(let w=0;w<m.length;w++){const{at:S,value:k,easing:x}=m[w];b.push(k),v.push(cf(0,h,S)),_.push(x||"easeOut")}v[0]!==0&&(v.unshift(0),b.unshift(b[0]),_.unshift(Xme)),v[v.length-1]!==1&&(v.push(1),b.push(null)),o.has(g)||o.set(g,{keyframes:{},transition:{}});const E=o.get(g);E.keyframes[y]=b,E.transition[y]={...e,duration:h,ease:_,times:v,...n}}}),o}function G8(t,e){return!e.has(t)&&e.set(t,{}),e.get(t)}function q8(t,e){return e[t]||(e[t]=[]),e[t]}function Zme(t){return Array.isArray(t)?t:[t]}function Qme(t,e){return t&&t[e]?{...t,...t[e]}:{...t}}const ege=t=>typeof t=="number",tge=t=>t.every(ege);function nge(t,e){return t in e}class rge extends ZG{constructor(){super(...arguments),this.type="object"}readValueFromInstance(e,n){if(nge(n,e)){const r=e[n];if(typeof r=="string"||typeof r=="number")return r}}getBaseTargetFromProps(){}removeValueFromRenderState(e,n){delete n.output[e]}measureInstanceViewportBox(){return mr()}build(e,n){Object.assign(e.output,n)}renderInstance(e,{output:n}){Object.assign(e,n)}sortInstanceNodePosition(){return 0}}function sge(t){const e={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},n=HG(t)?new tq(e):new eq(e);n.mount(t),Wm.set(t,n)}function ige(t){const e={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},n=new rge(e);n.mount(t),Wm.set(t,n)}function oge(t,e){return os(t)||typeof t=="number"||typeof t=="string"&&!UR(e)}function sq(t,e,n,r){const s=[];if(oge(t,e))s.push($G(t,UR(e)&&e.default||e,n&&(n.default||n)));else{const i=rq(t,e,r),o=i.length;for(let a=0;a<o;a++){const l=i[a],c=l instanceof Element?sge:ige;Wm.has(l)||c(l);const u=Wm.get(l),d={...n};"delay"in d&&typeof d.delay=="function"&&(d.delay=d.delay(a,o)),s.push(...BR(u,{...e,transition:d},{}))}}return s}function age(t,e,n){const r=[];return Jme(t,e,n,{spring:MR}).forEach(({keyframes:i,transition:o},a)=>{r.push(...sq(a,i,o))}),r}function lge(t){return Array.isArray(t)&&t.some(Array.isArray)}function cge(t){function e(n,r,s){let i=[];lge(n)?i=age(n,r,t):i=sq(n,r,s,t);const o=new HW(i);return t&&t.animations.push(o),o}return e}function uge(){const t=Oy(()=>({current:null,animations:[]})),e=Oy(()=>cge(t));return zme(()=>{t.animations.forEach(n=>n.stop())}),[t,e]}function iq(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=iq(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Uc(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=iq(t))&&(r&&(r+=" "),r+=e);return r}const Uy=t=>typeof t=="number"&&!isNaN(t),Gh=t=>typeof t=="string",qi=t=>typeof t=="function",qw=t=>Gh(t)||qi(t)?t:null,vN=t=>T.isValidElement(t)||Gh(t)||qi(t)||Uy(t);function dge(t,e,n){n===void 0&&(n=300);const{scrollHeight:r,style:s}=t;requestAnimationFrame(()=>{s.minHeight="initial",s.height=r+"px",s.transition=`all ${n}ms`,requestAnimationFrame(()=>{s.height="0",s.padding="0",s.margin="0",setTimeout(e,n)})})}function yv(t){let{enter:e,exit:n,appendPosition:r=!1,collapse:s=!0,collapseDuration:i=300}=t;return function(o){let{children:a,position:l,preventExitTransition:c,done:u,nodeRef:d,isIn:h,playToast:f}=o;const g=r?`${e}--${l}`:e,y=r?`${n}--${l}`:n,m=T.useRef(0);return T.useLayoutEffect(()=>{const b=d.current,v=g.split(" "),_=E=>{E.target===d.current&&(f(),b.removeEventListener("animationend",_),b.removeEventListener("animationcancel",_),m.current===0&&E.type!=="animationcancel"&&b.classList.remove(...v))};b.classList.add(...v),b.addEventListener("animationend",_),b.addEventListener("animationcancel",_)},[]),T.useEffect(()=>{const b=d.current,v=()=>{b.removeEventListener("animationend",v),s?dge(b,u,i):u()};h||(c?v():(m.current=1,b.className+=` ${y}`,b.addEventListener("animationend",v)))},[h]),ut.createElement(ut.Fragment,null,a)}}function K8(t,e){return t!=null?{content:t.content,containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,status:e}:{}}const oi=new Map;let $y=[];const _N=new Set,hge=t=>_N.forEach(e=>e(t)),oq=()=>oi.size>0;function aq(t,e){var n;if(e)return!((n=oi.get(e))==null||!n.isToastActive(t));let r=!1;return oi.forEach(s=>{s.isToastActive(t)&&(r=!0)}),r}function lq(t,e){vN(t)&&(oq()||$y.push({content:t,options:e}),oi.forEach(n=>{n.buildToast(t,e)}))}function Y8(t,e){oi.forEach(n=>{e!=null&&e!=null&&e.containerId?e?.containerId===n.id&&n.toggle(t,e?.id):n.toggle(t,e?.id)})}function fge(t){const{subscribe:e,getSnapshot:n,setProps:r}=T.useRef(function(i){const o=i.containerId||1;return{subscribe(a){const l=function(u,d,h){let f=1,g=0,y=[],m=[],b=[],v=d;const _=new Map,E=new Set,w=()=>{b=Array.from(_.values()),E.forEach(x=>x())},S=x=>{m=x==null?[]:m.filter(I=>I!==x),w()},k=x=>{const{toastId:I,onOpen:R,updateId:C,children:N}=x.props,O=C==null;x.staleId&&_.delete(x.staleId),_.set(I,x),m=[...m,x.props.toastId].filter(P=>P!==x.staleId),w(),h(K8(x,O?"added":"updated")),O&&qi(R)&&R(T.isValidElement(N)&&N.props)};return{id:u,props:v,observe:x=>(E.add(x),()=>E.delete(x)),toggle:(x,I)=>{_.forEach(R=>{I!=null&&I!==R.props.toastId||qi(R.toggle)&&R.toggle(x)})},removeToast:S,toasts:_,clearQueue:()=>{g-=y.length,y=[]},buildToast:(x,I)=>{if((D=>{let{containerId:j,toastId:V,updateId:W}=D;const re=j?j!==u:u!==1,te=_.has(V)&&W==null;return re||te})(I))return;const{toastId:R,updateId:C,data:N,staleId:O,delay:P}=I,$=()=>{S(R)},ee=C==null;ee&&g++;const J={...v,style:v.toastStyle,key:f++,...Object.fromEntries(Object.entries(I).filter(D=>{let[j,V]=D;return V!=null})),toastId:R,updateId:C,data:N,closeToast:$,isIn:!1,className:qw(I.className||v.toastClassName),bodyClassName:qw(I.bodyClassName||v.bodyClassName),progressClassName:qw(I.progressClassName||v.progressClassName),autoClose:!I.isLoading&&(Z=I.autoClose,M=v.autoClose,Z===!1||Uy(Z)&&Z>0?Z:M),deleteToast(){const D=_.get(R),{onClose:j,children:V}=D.props;qi(j)&&j(T.isValidElement(V)&&V.props),h(K8(D,"removed")),_.delete(R),g--,g<0&&(g=0),y.length>0?k(y.shift()):w()}};var Z,M;J.closeButton=v.closeButton,I.closeButton===!1||vN(I.closeButton)?J.closeButton=I.closeButton:I.closeButton===!0&&(J.closeButton=!vN(v.closeButton)||v.closeButton);let F=x;T.isValidElement(x)&&!Gh(x.type)?F=T.cloneElement(x,{closeToast:$,toastProps:J,data:N}):qi(x)&&(F=x({closeToast:$,toastProps:J,data:N}));const G={content:F,props:J,staleId:O};v.limit&&v.limit>0&&g>v.limit&&ee?y.push(G):Uy(P)?setTimeout(()=>{k(G)},P):k(G)},setProps(x){v=x},setToggle:(x,I)=>{_.get(x).toggle=I},isToastActive:x=>m.some(I=>I===x),getSnapshot:()=>b}}(o,i,hge);oi.set(o,l);const c=l.observe(a);return $y.forEach(u=>lq(u.content,u.options)),$y=[],()=>{c(),oi.delete(o)}},setProps(a){var l;(l=oi.get(o))==null||l.setProps(a)},getSnapshot(){var a;return(a=oi.get(o))==null?void 0:a.getSnapshot()}}}(t)).current;r(t);const s=T.useSyncExternalStore(e,n,n);return{getToastToRender:function(i){if(!s)return[];const o=new Map;return t.newestOnTop&&s.reverse(),s.forEach(a=>{const{position:l}=a.props;o.has(l)||o.set(l,[]),o.get(l).push(a)}),Array.from(o,a=>i(a[0],a[1]))},isToastActive:aq,count:s?.length}}function pge(t){const[e,n]=T.useState(!1),[r,s]=T.useState(!1),i=T.useRef(null),o=T.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:a,pauseOnHover:l,closeToast:c,onClick:u,closeOnClick:d}=t;var h,f;function g(){n(!0)}function y(){n(!1)}function m(_){const E=i.current;o.canDrag&&E&&(o.didMove=!0,e&&y(),o.delta=t.draggableDirection==="x"?_.clientX-o.start:_.clientY-o.start,o.start!==_.clientX&&(o.canCloseOnClick=!1),E.style.transform=`translate3d(${t.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`},0)`,E.style.opacity=""+(1-Math.abs(o.delta/o.removalDistance)))}function b(){document.removeEventListener("pointermove",m),document.removeEventListener("pointerup",b);const _=i.current;if(o.canDrag&&o.didMove&&_){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance)return s(!0),t.closeToast(),void t.collapseAll();_.style.transition="transform 0.2s, opacity 0.2s",_.style.removeProperty("transform"),_.style.removeProperty("opacity")}}(f=oi.get((h={id:t.toastId,containerId:t.containerId,fn:n}).containerId||1))==null||f.setToggle(h.id,h.fn),T.useEffect(()=>{if(t.pauseOnFocusLoss)return document.hasFocus()||y(),window.addEventListener("focus",g),window.addEventListener("blur",y),()=>{window.removeEventListener("focus",g),window.removeEventListener("blur",y)}},[t.pauseOnFocusLoss]);const v={onPointerDown:function(_){if(t.draggable===!0||t.draggable===_.pointerType){o.didMove=!1,document.addEventListener("pointermove",m),document.addEventListener("pointerup",b);const E=i.current;o.canCloseOnClick=!0,o.canDrag=!0,E.style.transition="none",t.draggableDirection==="x"?(o.start=_.clientX,o.removalDistance=E.offsetWidth*(t.draggablePercent/100)):(o.start=_.clientY,o.removalDistance=E.offsetHeight*(t.draggablePercent===80?1.5*t.draggablePercent:t.draggablePercent)/100)}},onPointerUp:function(_){const{top:E,bottom:w,left:S,right:k}=i.current.getBoundingClientRect();_.nativeEvent.type!=="touchend"&&t.pauseOnHover&&_.clientX>=S&&_.clientX<=k&&_.clientY>=E&&_.clientY<=w?y():g()}};return a&&l&&(v.onMouseEnter=y,t.stacked||(v.onMouseLeave=g)),d&&(v.onClick=_=>{u&&u(_),o.canCloseOnClick&&c()}),{playToast:g,pauseToast:y,isRunning:e,preventExitTransition:r,toastRef:i,eventHandlers:v}}function mge(t){let{delay:e,isRunning:n,closeToast:r,type:s="default",hide:i,className:o,style:a,controlledProgress:l,progress:c,rtl:u,isIn:d,theme:h}=t;const f=i||l&&c===0,g={...a,animationDuration:`${e}ms`,animationPlayState:n?"running":"paused"};l&&(g.transform=`scaleX(${c})`);const y=Uc("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${h}`,`Toastify__progress-bar--${s}`,{"Toastify__progress-bar--rtl":u}),m=qi(o)?o({rtl:u,type:s,defaultClassName:y}):Uc(y,o),b={[l&&c>=1?"onTransitionEnd":"onAnimationEnd"]:l&&c<1?null:()=>{d&&r()}};return ut.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":f},ut.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${h} Toastify__progress-bar--${s}`}),ut.createElement("div",{role:"progressbar","aria-hidden":f?"true":"false","aria-label":"notification timer",className:m,style:g,...b}))}let gge=1;const cq=()=>""+gge++;function bge(t){return t&&(Gh(t.toastId)||Uy(t.toastId))?t.toastId:cq()}function Hb(t,e){return lq(t,e),e.toastId}function H2(t,e){return{...e,type:e&&e.type||t,toastId:bge(e)}}function sx(t){return(e,n)=>Hb(e,H2(t,n))}function ze(t,e){return Hb(t,H2("default",e))}ze.loading=(t,e)=>Hb(t,H2("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e})),ze.promise=function(t,e,n){let r,{pending:s,error:i,success:o}=e;s&&(r=Gh(s)?ze.loading(s,n):ze.loading(s.render,{...n,...s}));const a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(u,d,h)=>{if(d==null)return void ze.dismiss(r);const f={type:u,...a,...n,data:h},g=Gh(d)?{render:d}:d;return r?ze.update(r,{...f,...g}):ze(g.render,{...f,...g}),h},c=qi(t)?t():t;return c.then(u=>l("success",o,u)).catch(u=>l("error",i,u)),c},ze.success=sx("success"),ze.info=sx("info"),ze.error=sx("error"),ze.warning=sx("warning"),ze.warn=ze.warning,ze.dark=(t,e)=>Hb(t,H2("default",{theme:"dark",...e})),ze.dismiss=function(t){(function(e){var n;if(oq()){if(e==null||Gh(n=e)||Uy(n))oi.forEach(r=>{r.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){const r=oi.get(e.containerId);r?r.removeToast(e.id):oi.forEach(s=>{s.removeToast(e.id)})}}else $y=$y.filter(r=>e!=null&&r.options.toastId!==e)})(t)},ze.clearWaitingQueue=function(t){t===void 0&&(t={}),oi.forEach(e=>{!e.props.limit||t.containerId&&e.id!==t.containerId||e.clearQueue()})},ze.isActive=aq,ze.update=function(t,e){e===void 0&&(e={});const n=((r,s)=>{var i;let{containerId:o}=s;return(i=oi.get(o||1))==null?void 0:i.toasts.get(r)})(t,e);if(n){const{props:r,content:s}=n,i={delay:100,...r,...e,toastId:e.toastId||t,updateId:cq()};i.toastId!==t&&(i.staleId=t);const o=i.render||s;delete i.render,Hb(o,i)}},ze.done=t=>{ze.update(t,{progress:1})},ze.onChange=function(t){return _N.add(t),()=>{_N.delete(t)}},ze.play=t=>Y8(!0,t),ze.pause=t=>Y8(!1,t);const yge=typeof window<"u"?T.useLayoutEffect:T.useEffect,ix=t=>{let{theme:e,type:n,isLoading:r,...s}=t;return ut.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${n})`,...s})},oT={info:function(t){return ut.createElement(ix,{...t},ut.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(t){return ut.createElement(ix,{...t},ut.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(t){return ut.createElement(ix,{...t},ut.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(t){return ut.createElement(ix,{...t},ut.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return ut.createElement("div",{className:"Toastify__spinner"})}},vge=t=>{const{isRunning:e,preventExitTransition:n,toastRef:r,eventHandlers:s,playToast:i}=pge(t),{closeButton:o,children:a,autoClose:l,onClick:c,type:u,hideProgressBar:d,closeToast:h,transition:f,position:g,className:y,style:m,bodyClassName:b,bodyStyle:v,progressClassName:_,progressStyle:E,updateId:w,role:S,progress:k,rtl:x,toastId:I,deleteToast:R,isIn:C,isLoading:N,closeOnClick:O,theme:P}=t,$=Uc("Toastify__toast",`Toastify__toast-theme--${P}`,`Toastify__toast--${u}`,{"Toastify__toast--rtl":x},{"Toastify__toast--close-on-click":O}),ee=qi(y)?y({rtl:x,position:g,type:u,defaultClassName:$}):Uc($,y),J=function(G){let{theme:D,type:j,isLoading:V,icon:W}=G,re=null;const te={theme:D,type:j};return W===!1||(qi(W)?re=W({...te,isLoading:V}):T.isValidElement(W)?re=T.cloneElement(W,te):V?re=oT.spinner():(Y=>Y in oT)(j)&&(re=oT[j](te))),re}(t),Z=!!k||!l,M={closeToast:h,type:u,theme:P};let F=null;return o===!1||(F=qi(o)?o(M):T.isValidElement(o)?T.cloneElement(o,M):function(G){let{closeToast:D,theme:j,ariaLabel:V="close"}=G;return ut.createElement("button",{className:`Toastify__close-button Toastify__close-button--${j}`,type:"button",onClick:W=>{W.stopPropagation(),D(W)},"aria-label":V},ut.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},ut.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(M)),ut.createElement(f,{isIn:C,done:R,position:g,preventExitTransition:n,nodeRef:r,playToast:i},ut.createElement("div",{id:I,onClick:c,"data-in":C,className:ee,...s,style:m,ref:r},ut.createElement("div",{...C&&{role:S},className:qi(b)?b({type:u}):Uc("Toastify__toast-body",b),style:v},J!=null&&ut.createElement("div",{className:Uc("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!N})},J),ut.createElement("div",null,a)),F,ut.createElement(mge,{...w&&!Z?{key:`pb-${w}`}:{},rtl:x,theme:P,delay:l,isRunning:e,isIn:C,closeToast:h,hide:d,type:u,style:E,className:_,controlledProgress:Z,progress:k||0})))},hk=function(t,e){return e===void 0&&(e=!1),{enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}},_ge=yv(hk("bounce",!0));yv(hk("slide",!0));yv(hk("zoom"));yv(hk("flip"));const xge={position:"top-right",transition:_ge,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};function wge(t){let e={...xge,...t};const n=t.stacked,[r,s]=T.useState(!0),i=T.useRef(null),{getToastToRender:o,isToastActive:a,count:l}=fge(e),{className:c,style:u,rtl:d,containerId:h}=e;function f(y){const m=Uc("Toastify__toast-container",`Toastify__toast-container--${y}`,{"Toastify__toast-container--rtl":d});return qi(c)?c({position:y,rtl:d,defaultClassName:m}):Uc(m,qw(c))}function g(){n&&(s(!0),ze.play())}return yge(()=>{if(n){var y;const m=i.current.querySelectorAll('[data-in="true"]'),b=12,v=(y=e.position)==null?void 0:y.includes("top");let _=0,E=0;Array.from(m).reverse().forEach((w,S)=>{const k=w;k.classList.add("Toastify__toast--stacked"),S>0&&(k.dataset.collapsed=`${r}`),k.dataset.pos||(k.dataset.pos=v?"top":"bot");const x=_*(r?.2:1)+(r?0:b*S);k.style.setProperty("--y",`${v?x:-1*x}px`),k.style.setProperty("--g",`${b}`),k.style.setProperty("--s",""+(1-(r?E:0))),_+=k.offsetHeight,E+=.025})}},[r,l,n]),ut.createElement("div",{ref:i,className:"Toastify",id:h,onMouseEnter:()=>{n&&(s(!1),ze.pause())},onMouseLeave:g},o((y,m)=>{const b=m.length?{...u}:{...u,pointerEvents:"none"};return ut.createElement("div",{className:f(y),style:b,key:`container-${y}`},m.map(v=>{let{content:_,props:E}=v;return ut.createElement(vge,{...E,stacked:n,collapseAll:g,isIn:a(E.toastId,E.containerId),style:E.style,key:`toast-${E.key}`},_)}))}))}function Nt(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t?.(s),n===!1||!s.defaultPrevented)return e?.(s)}}function X8(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function fk(...t){return e=>{let n=!1;const r=t.map(s=>{const i=X8(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():X8(t[s],null)}}}}function Un(...t){return T.useCallback(fk(...t),t)}function Ege(t,e){const n=T.createContext(e),r=i=>{const{children:o,...a}=i,l=T.useMemo(()=>a,Object.values(a));return p.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function s(i){const o=T.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function Xo(t,e=[]){let n=[];function r(i,o){const a=T.createContext(o),l=n.length;n=[...n,o];const c=d=>{const{scope:h,children:f,...g}=d,y=h?.[t]?.[l]||a,m=T.useMemo(()=>g,Object.values(g));return p.jsx(y.Provider,{value:m,children:f})};c.displayName=i+"Provider";function u(d,h){const f=h?.[t]?.[l]||a,g=T.useContext(f);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${i}\``)}return[c,u]}const s=()=>{const i=n.map(o=>T.createContext(o));return function(a){const l=a?.[t]||i;return T.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,Sge(s,...e)]}function Sge(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(i)[`__scope${c}`];return{...a,...d}},{});return T.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var Yc=globalThis?.document?T.useLayoutEffect:()=>{},kge=$m.useId||(()=>{}),Cge=0;function Vc(t){const[e,n]=T.useState(kge());return Yc(()=>{n(r=>r??String(Cge++))},[t]),t||(e?`radix-${e}`:"")}function Vr(t){const e=T.useRef(t);return T.useEffect(()=>{e.current=t}),T.useMemo(()=>(...n)=>e.current?.(...n),[])}function Bf({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=Age({defaultProp:e,onChange:n}),i=t!==void 0,o=i?t:r,a=Vr(n),l=T.useCallback(c=>{if(i){const d=typeof c=="function"?c(t):c;d!==t&&a(d)}else s(c)},[i,t,s,a]);return[o,l]}function Age({defaultProp:t,onChange:e}){const n=T.useState(t),[r]=n,s=T.useRef(r),i=Vr(e);return T.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}var uf=T.forwardRef((t,e)=>{const{children:n,...r}=t,s=T.Children.toArray(n),i=s.find(Tge);if(i){const o=i.props.children,a=s.map(l=>l===i?T.Children.count(o)>1?T.Children.only(null):T.isValidElement(o)?o.props.children:null:l);return p.jsx(xN,{...r,ref:e,children:T.isValidElement(o)?T.cloneElement(o,void 0,a):null})}return p.jsx(xN,{...r,ref:e,children:n})});uf.displayName="Slot";var xN=T.forwardRef((t,e)=>{const{children:n,...r}=t;if(T.isValidElement(n)){const s=Pge(n),i=Nge(r,n.props);return n.type!==T.Fragment&&(i.ref=e?fk(e,s):s),T.cloneElement(n,i)}return T.Children.count(n)>1?T.Children.only(null):null});xN.displayName="SlotClone";var uq=({children:t})=>p.jsx(p.Fragment,{children:t});function Tge(t){return T.isValidElement(t)&&t.type===uq}function Nge(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{i(...a),s(...a)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function Pge(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Ige=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],hn=Ige.reduce((t,e)=>{const n=T.forwardRef((r,s)=>{const{asChild:i,...o}=r,a=i?uf:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(a,{...o,ref:s})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function dq(t,e){t&&Hm.flushSync(()=>t.dispatchEvent(e))}function Rge(t,e=globalThis?.document){const n=Vr(t);T.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var Lge="DismissableLayer",wN="dismissableLayer.update",Oge="dismissableLayer.pointerDownOutside",Dge="dismissableLayer.focusOutside",J8,hq=T.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),vv=T.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=T.useContext(hq),[u,d]=T.useState(null),h=u?.ownerDocument??globalThis?.document,[,f]=T.useState({}),g=Un(e,k=>d(k)),y=Array.from(c.layers),[m]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),b=y.indexOf(m),v=u?y.indexOf(u):-1,_=c.layersWithOutsidePointerEventsDisabled.size>0,E=v>=b,w=Fge(k=>{const x=k.target,I=[...c.branches].some(R=>R.contains(x));!E||I||(s?.(k),o?.(k),k.defaultPrevented||a?.())},h),S=Bge(k=>{const x=k.target;[...c.branches].some(R=>R.contains(x))||(i?.(k),o?.(k),k.defaultPrevented||a?.())},h);return Rge(k=>{v===c.layers.size-1&&(r?.(k),!k.defaultPrevented&&a&&(k.preventDefault(),a()))},h),T.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(J8=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),Z8(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=J8)}},[u,h,n,c]),T.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),Z8())},[u,c]),T.useEffect(()=>{const k=()=>f({});return document.addEventListener(wN,k),()=>document.removeEventListener(wN,k)},[]),p.jsx(hn.div,{...l,ref:g,style:{pointerEvents:_?E?"auto":"none":void 0,...t.style},onFocusCapture:Nt(t.onFocusCapture,S.onFocusCapture),onBlurCapture:Nt(t.onBlurCapture,S.onBlurCapture),onPointerDownCapture:Nt(t.onPointerDownCapture,w.onPointerDownCapture)})});vv.displayName=Lge;var Mge="DismissableLayerBranch",jge=T.forwardRef((t,e)=>{const n=T.useContext(hq),r=T.useRef(null),s=Un(e,r);return T.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),p.jsx(hn.div,{...t,ref:s})});jge.displayName=Mge;function Fge(t,e=globalThis?.document){const n=Vr(t),r=T.useRef(!1),s=T.useRef(()=>{});return T.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){fq(Oge,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function Bge(t,e=globalThis?.document){const n=Vr(t),r=T.useRef(!1);return T.useEffect(()=>{const s=i=>{i.target&&!r.current&&fq(Dge,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Z8(){const t=new CustomEvent(wN);document.dispatchEvent(t)}function fq(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?dq(s,i):s.dispatchEvent(i)}var aT="focusScope.autoFocusOnMount",lT="focusScope.autoFocusOnUnmount",Q8={bubbles:!1,cancelable:!0},Uge="FocusScope",pk=T.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=T.useState(null),c=Vr(s),u=Vr(i),d=T.useRef(null),h=Un(e,y=>l(y)),f=T.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;T.useEffect(()=>{if(r){let y=function(_){if(f.paused||!a)return;const E=_.target;a.contains(E)?d.current=E:Ru(d.current,{select:!0})},m=function(_){if(f.paused||!a)return;const E=_.relatedTarget;E!==null&&(a.contains(E)||Ru(d.current,{select:!0}))},b=function(_){if(document.activeElement===document.body)for(const w of _)w.removedNodes.length>0&&Ru(a)};document.addEventListener("focusin",y),document.addEventListener("focusout",m);const v=new MutationObserver(b);return a&&v.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",m),v.disconnect()}}},[r,a,f.paused]),T.useEffect(()=>{if(a){tj.add(f);const y=document.activeElement;if(!a.contains(y)){const b=new CustomEvent(aT,Q8);a.addEventListener(aT,c),a.dispatchEvent(b),b.defaultPrevented||($ge(Gge(pq(a)),{select:!0}),document.activeElement===y&&Ru(a))}return()=>{a.removeEventListener(aT,c),setTimeout(()=>{const b=new CustomEvent(lT,Q8);a.addEventListener(lT,u),a.dispatchEvent(b),b.defaultPrevented||Ru(y??document.body,{select:!0}),a.removeEventListener(lT,u),tj.remove(f)},0)}}},[a,c,u,f]);const g=T.useCallback(y=>{if(!n&&!r||f.paused)return;const m=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,b=document.activeElement;if(m&&b){const v=y.currentTarget,[_,E]=Hge(v);_&&E?!y.shiftKey&&b===E?(y.preventDefault(),n&&Ru(_,{select:!0})):y.shiftKey&&b===_&&(y.preventDefault(),n&&Ru(E,{select:!0})):b===v&&y.preventDefault()}},[n,r,f.paused]);return p.jsx(hn.div,{tabIndex:-1,...o,ref:h,onKeyDown:g})});pk.displayName=Uge;function $ge(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Ru(r,{select:e}),document.activeElement!==n)return}function Hge(t){const e=pq(t),n=ej(e,t),r=ej(e.reverse(),t);return[n,r]}function pq(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function ej(t,e){for(const n of t)if(!zge(n,{upTo:e}))return n}function zge(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Vge(t){return t instanceof HTMLInputElement&&"select"in t}function Ru(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Vge(t)&&e&&t.select()}}var tj=Wge();function Wge(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=nj(t,e),t.unshift(e)},remove(e){t=nj(t,e),t[0]?.resume()}}}function nj(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function Gge(t){return t.filter(e=>e.tagName!=="A")}var qge="Portal",_v=T.forwardRef((t,e)=>{const{container:n,...r}=t,[s,i]=T.useState(!1);Yc(()=>i(!0),[]);const o=n||s&&globalThis?.document?.body;return o?hde.createPortal(p.jsx(hn.div,{...r,ref:e}),o):null});_v.displayName=qge;function Kge(t,e){return T.useReducer((n,r)=>e[n][r]??n,t)}var Ss=t=>{const{present:e,children:n}=t,r=Yge(e),s=typeof n=="function"?n({present:r.isPresent}):T.Children.only(n),i=Un(r.ref,Xge(s));return typeof n=="function"||r.isPresent?T.cloneElement(s,{ref:i}):null};Ss.displayName="Presence";function Yge(t){const[e,n]=T.useState(),r=T.useRef({}),s=T.useRef(t),i=T.useRef("none"),o=t?"mounted":"unmounted",[a,l]=Kge(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return T.useEffect(()=>{const c=ox(r.current);i.current=a==="mounted"?c:"none"},[a]),Yc(()=>{const c=r.current,u=s.current;if(u!==t){const h=i.current,f=ox(c);t?l("MOUNT"):f==="none"||c?.display==="none"?l("UNMOUNT"):l(u&&h!==f?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),Yc(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=f=>{const y=ox(r.current).includes(f.animationName);if(f.target===e&&y&&(l("ANIMATION_END"),!s.current)){const m=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=m)})}},h=f=>{f.target===e&&(i.current=ox(r.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:T.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function ox(t){return t?.animationName||"none"}function Xge(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var cT=0;function $R(){T.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??rj()),document.body.insertAdjacentElement("beforeend",t[1]??rj()),cT++,()=>{cT===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),cT--}},[])}function rj(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var vl=function(){return vl=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},vl.apply(this,arguments)};function mq(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Jge(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function Zge(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Qge(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function e0e(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var Kw="right-scroll-bar-position",Yw="width-before-scroll-bar",t0e="with-scroll-bars-hidden",n0e="--removed-body-scroll-bar-size";function uT(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function r0e(t,e){var n=T.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var s0e=typeof window<"u"?T.useLayoutEffect:T.useEffect,sj=new WeakMap;function i0e(t,e){var n=r0e(null,function(r){return t.forEach(function(s){return uT(s,r)})});return s0e(function(){var r=sj.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||uT(a,null)}),i.forEach(function(a){s.has(a)||uT(a,o)})}sj.set(n,t)},[t]),n}function o0e(t){return t}function a0e(t,e){e===void 0&&(e=o0e);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var l=function(){var u=o;o=[],u.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return s}function l0e(t){t===void 0&&(t={});var e=a0e(null);return e.options=vl({async:!0,ssr:!1},t),e}var gq=function(t){var e=t.sideCar,n=mq(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return T.createElement(r,vl({},n))};gq.isSideCarExport=!0;function c0e(t,e){return t.useMedium(e),gq}var bq=l0e(),dT=function(){},mk=T.forwardRef(function(t,e){var n=T.useRef(null),r=T.useState({onScrollCapture:dT,onWheelCapture:dT,onTouchMoveCapture:dT}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,h=t.sideCar,f=t.noIsolation,g=t.inert,y=t.allowPinchZoom,m=t.as,b=m===void 0?"div":m,v=t.gapMode,_=mq(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=h,w=i0e([n,e]),S=vl(vl({},_),s);return T.createElement(T.Fragment,null,u&&T.createElement(E,{sideCar:bq,removeScrollBar:c,shards:d,noIsolation:f,inert:g,setCallbacks:i,allowPinchZoom:!!y,lockRef:n,gapMode:v}),o?T.cloneElement(T.Children.only(a),vl(vl({},S),{ref:w})):T.createElement(b,vl({},S,{className:l,ref:w}),a))});mk.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};mk.classNames={fullWidth:Yw,zeroRight:Kw};var u0e=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function d0e(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=u0e();return e&&t.setAttribute("nonce",e),t}function h0e(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function f0e(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var p0e=function(){var t=0,e=null;return{add:function(n){t==0&&(e=d0e())&&(h0e(e,n),f0e(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},m0e=function(){var t=p0e();return function(e,n){T.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},yq=function(){var t=m0e(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},g0e={left:0,top:0,right:0,gap:0},hT=function(t){return parseInt(t||"",10)||0},b0e=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[hT(n),hT(r),hT(s)]},y0e=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return g0e;var e=b0e(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},v0e=yq(),bm="data-scroll-locked",_0e=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(t0e,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(bm,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Kw,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Yw,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Kw," .").concat(Kw,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Yw," .").concat(Yw,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(bm,`] {
    `).concat(n0e,": ").concat(a,`px;
  }
`)},ij=function(){var t=parseInt(document.body.getAttribute(bm)||"0",10);return isFinite(t)?t:0},x0e=function(){T.useEffect(function(){return document.body.setAttribute(bm,(ij()+1).toString()),function(){var t=ij()-1;t<=0?document.body.removeAttribute(bm):document.body.setAttribute(bm,t.toString())}},[])},w0e=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;x0e();var i=T.useMemo(function(){return y0e(s)},[s]);return T.createElement(v0e,{styles:_0e(i,!e,s,n?"":"!important")})},EN=!1;if(typeof window<"u")try{var ax=Object.defineProperty({},"passive",{get:function(){return EN=!0,!0}});window.addEventListener("test",ax,ax),window.removeEventListener("test",ax,ax)}catch{EN=!1}var Ap=EN?{passive:!1}:!1,E0e=function(t){return t.tagName==="TEXTAREA"},vq=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!E0e(t)&&n[e]==="visible")},S0e=function(t){return vq(t,"overflowY")},k0e=function(t){return vq(t,"overflowX")},oj=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=_q(t,r);if(s){var i=xq(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},C0e=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},A0e=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},_q=function(t,e){return t==="v"?S0e(e):k0e(e)},xq=function(t,e){return t==="v"?C0e(e):A0e(e)},T0e=function(t,e){return t==="h"&&e==="rtl"?-1:1},N0e=function(t,e,n,r,s){var i=T0e(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),c=!1,u=o>0,d=0,h=0;do{var f=xq(t,a),g=f[0],y=f[1],m=f[2],b=y-m-i*g;(g||b)&&_q(t,a)&&(d+=b,h+=g),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(d)<1||!u&&Math.abs(h)<1)&&(c=!0),c},lx=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},aj=function(t){return[t.deltaX,t.deltaY]},lj=function(t){return t&&"current"in t?t.current:t},P0e=function(t,e){return t[0]===e[0]&&t[1]===e[1]},I0e=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},R0e=0,Tp=[];function L0e(t){var e=T.useRef([]),n=T.useRef([0,0]),r=T.useRef(),s=T.useState(R0e++)[0],i=T.useState(yq)[0],o=T.useRef(t);T.useEffect(function(){o.current=t},[t]),T.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var y=e0e([t.lockRef.current],(t.shards||[]).map(lj),!0).filter(Boolean);return y.forEach(function(m){return m.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),y.forEach(function(m){return m.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=T.useCallback(function(y,m){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var b=lx(y),v=n.current,_="deltaX"in y?y.deltaX:v[0]-b[0],E="deltaY"in y?y.deltaY:v[1]-b[1],w,S=y.target,k=Math.abs(_)>Math.abs(E)?"h":"v";if("touches"in y&&k==="h"&&S.type==="range")return!1;var x=oj(k,S);if(!x)return!0;if(x?w=k:(w=k==="v"?"h":"v",x=oj(k,S)),!x)return!1;if(!r.current&&"changedTouches"in y&&(_||E)&&(r.current=w),!w)return!0;var I=r.current||w;return N0e(I,m,y,I==="h"?_:E)},[]),l=T.useCallback(function(y){var m=y;if(!(!Tp.length||Tp[Tp.length-1]!==i)){var b="deltaY"in m?aj(m):lx(m),v=e.current.filter(function(w){return w.name===m.type&&(w.target===m.target||m.target===w.shadowParent)&&P0e(w.delta,b)})[0];if(v&&v.should){m.cancelable&&m.preventDefault();return}if(!v){var _=(o.current.shards||[]).map(lj).filter(Boolean).filter(function(w){return w.contains(m.target)}),E=_.length>0?a(m,_[0]):!o.current.noIsolation;E&&m.cancelable&&m.preventDefault()}}},[]),c=T.useCallback(function(y,m,b,v){var _={name:y,delta:m,target:b,should:v,shadowParent:O0e(b)};e.current.push(_),setTimeout(function(){e.current=e.current.filter(function(E){return E!==_})},1)},[]),u=T.useCallback(function(y){n.current=lx(y),r.current=void 0},[]),d=T.useCallback(function(y){c(y.type,aj(y),y.target,a(y,t.lockRef.current))},[]),h=T.useCallback(function(y){c(y.type,lx(y),y.target,a(y,t.lockRef.current))},[]);T.useEffect(function(){return Tp.push(i),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,Ap),document.addEventListener("touchmove",l,Ap),document.addEventListener("touchstart",u,Ap),function(){Tp=Tp.filter(function(y){return y!==i}),document.removeEventListener("wheel",l,Ap),document.removeEventListener("touchmove",l,Ap),document.removeEventListener("touchstart",u,Ap)}},[]);var f=t.removeScrollBar,g=t.inert;return T.createElement(T.Fragment,null,g?T.createElement(i,{styles:I0e(s)}):null,f?T.createElement(w0e,{gapMode:t.gapMode}):null)}function O0e(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const D0e=c0e(bq,L0e);var gk=T.forwardRef(function(t,e){return T.createElement(mk,vl({},t,{ref:e,sideCar:D0e}))});gk.classNames=mk.classNames;var M0e=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Np=new WeakMap,cx=new WeakMap,ux={},fT=0,wq=function(t){return t&&(t.host||wq(t.parentNode))},j0e=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=wq(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},F0e=function(t,e,n,r){var s=j0e(e,Array.isArray(t)?t:[t]);ux[n]||(ux[n]=new WeakMap);var i=ux[n],o=[],a=new Set,l=new Set(s),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};s.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(a.has(h))u(h);else try{var f=h.getAttribute(r),g=f!==null&&f!=="false",y=(Np.get(h)||0)+1,m=(i.get(h)||0)+1;Np.set(h,y),i.set(h,m),o.push(h),y===1&&g&&cx.set(h,!0),m===1&&h.setAttribute(n,"true"),g||h.setAttribute(r,"true")}catch(b){console.error("aria-hidden: cannot operate on ",h,b)}})};return u(e),a.clear(),fT++,function(){o.forEach(function(d){var h=Np.get(d)-1,f=i.get(d)-1;Np.set(d,h),i.set(d,f),h||(cx.has(d)||d.removeAttribute(r),cx.delete(d)),f||d.removeAttribute(n)}),fT--,fT||(Np=new WeakMap,Np=new WeakMap,cx=new WeakMap,ux={})}},HR=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=M0e(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),F0e(r,s,n,"aria-hidden")):function(){return null}},zR="Dialog",[Eq,bht]=Xo(zR),[B0e,Oa]=Eq(zR),Sq=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=T.useRef(null),l=T.useRef(null),[c=!1,u]=Bf({prop:r,defaultProp:s,onChange:i});return p.jsx(B0e,{scope:e,triggerRef:a,contentRef:l,contentId:Vc(),titleId:Vc(),descriptionId:Vc(),open:c,onOpenChange:u,onOpenToggle:T.useCallback(()=>u(d=>!d),[u]),modal:o,children:n})};Sq.displayName=zR;var kq="DialogTrigger",Cq=T.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Oa(kq,n),i=Un(e,s.triggerRef);return p.jsx(hn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":GR(s.open),...r,ref:i,onClick:Nt(t.onClick,s.onOpenToggle)})});Cq.displayName=kq;var VR="DialogPortal",[U0e,Aq]=Eq(VR,{forceMount:void 0}),Tq=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=Oa(VR,e);return p.jsx(U0e,{scope:e,forceMount:n,children:T.Children.map(r,o=>p.jsx(Ss,{present:n||i.open,children:p.jsx(_v,{asChild:!0,container:s,children:o})}))})};Tq.displayName=VR;var z2="DialogOverlay",Nq=T.forwardRef((t,e)=>{const n=Aq(z2,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Oa(z2,t.__scopeDialog);return i.modal?p.jsx(Ss,{present:r||i.open,children:p.jsx($0e,{...s,ref:e})}):null});Nq.displayName=z2;var $0e=T.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Oa(z2,n);return p.jsx(gk,{as:uf,allowPinchZoom:!0,shards:[s.contentRef],children:p.jsx(hn.div,{"data-state":GR(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),df="DialogContent",Pq=T.forwardRef((t,e)=>{const n=Aq(df,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Oa(df,t.__scopeDialog);return p.jsx(Ss,{present:r||i.open,children:i.modal?p.jsx(H0e,{...s,ref:e}):p.jsx(z0e,{...s,ref:e})})});Pq.displayName=df;var H0e=T.forwardRef((t,e)=>{const n=Oa(df,t.__scopeDialog),r=T.useRef(null),s=Un(e,n.contentRef,r);return T.useEffect(()=>{const i=r.current;if(i)return HR(i)},[]),p.jsx(Iq,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Nt(t.onCloseAutoFocus,i=>{i.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:Nt(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:Nt(t.onFocusOutside,i=>i.preventDefault())})}),z0e=T.forwardRef((t,e)=>{const n=Oa(df,t.__scopeDialog),r=T.useRef(!1),s=T.useRef(!1);return p.jsx(Iq,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{t.onCloseAutoFocus?.(i),i.defaultPrevented||(r.current||n.triggerRef.current?.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{t.onInteractOutside?.(i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;n.triggerRef.current?.contains(o)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),Iq=T.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=Oa(df,n),l=T.useRef(null),c=Un(e,l);return $R(),p.jsxs(p.Fragment,{children:[p.jsx(pk,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:p.jsx(vv,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":GR(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),p.jsxs(p.Fragment,{children:[p.jsx(V0e,{titleId:a.titleId}),p.jsx(G0e,{contentRef:l,descriptionId:a.descriptionId})]})]})}),WR="DialogTitle",Rq=T.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Oa(WR,n);return p.jsx(hn.h2,{id:s.titleId,...r,ref:e})});Rq.displayName=WR;var Lq="DialogDescription",Oq=T.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Oa(Lq,n);return p.jsx(hn.p,{id:s.descriptionId,...r,ref:e})});Oq.displayName=Lq;var Dq="DialogClose",Mq=T.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Oa(Dq,n);return p.jsx(hn.button,{type:"button",...r,ref:e,onClick:Nt(t.onClick,()=>s.onOpenChange(!1))})});Mq.displayName=Dq;function GR(t){return t?"open":"closed"}var jq="DialogTitleWarning",[yht,Fq]=Ege(jq,{contentName:df,titleName:WR,docsSlug:"dialog"}),V0e=({titleId:t})=>{const e=Fq(jq),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return T.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},W0e="DialogDescriptionWarning",G0e=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Fq(W0e).contentName}}.`;return T.useEffect(()=>{const s=t.current?.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},jo=Sq,q0e=Cq,qh=Tq,Kh=Nq,Yh=Pq,qR=Rq,K0e=Oq,Gm=Mq;function Pe(...t){let e="";for(const n of t)e=Bq(e,Y0e(n));return e}function Y0e(t){if(typeof t=="string"||typeof t=="number")return t;if(typeof t!="object")return"";if(Array.isArray(t))return Pe(...t);let e="";for(const n in t)t[n]&&(e=Bq(e,n));return e}function Bq(t,e){return e?t?t+" "+e:t+e:t}const so=Ff(.4,0,.2,1),dr=T.memo(T.forwardRef(({icon:t,size:e="xl",className:n,iconClassName:r,disabledClassName:s,disabled:i=!1,title:o,onClick:a,children:l},c)=>p.jsx("button",{ref:c,className:Pe("flex items-center text-bolt-elements-item-contentDefault bg-transparent enabled:hover:text-bolt-elements-item-contentActive rounded-md p-1 enabled:hover:bg-bolt-elements-item-backgroundActive disabled:cursor-not-allowed",{[Pe("opacity-30",s)]:i},n),title:o,disabled:i,onClick:u=>{i||a?.(u)},children:l||p.jsx("div",{className:Pe(t,X0e(e),r)})})));function X0e(t){return t==="sm"?"text-sm":t==="md"?"text-md":t==="lg"?"text-lg":t==="xl"?"text-xl":"text-2xl"}const V2=T.memo(({type:t,children:e,onClick:n,disabled:r})=>p.jsx("button",{className:Pe("inline-flex items-center gap-2 px-4 py-2 rounded-lg text-sm transition-colors",{"bg-blue-500 text-white hover:bg-blue-600 dark:bg-blue-500 dark:hover:bg-blue-600":t==="primary","bg-transparent text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-gray-900 dark:hover:text-gray-100":t==="secondary","bg-transparent text-red-500 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-500/10":t==="danger"}),onClick:n,disabled:r,children:e})),hf=T.memo(({className:t,children:e,...n})=>p.jsx(qR,{className:Pe("text-lg font-medium text-bolt-elements-textPrimary","flex items-center gap-2",t),...n,children:e})),Uq=T.memo(({className:t,children:e,...n})=>p.jsx(K0e,{className:Pe("text-sm text-bolt-elements-textSecondary","mt-1",t),...n,children:e})),W2={duration:.15,ease:so},J0e={closed:{opacity:0,transition:W2},open:{opacity:1,transition:W2}},Z0e={closed:{x:"-50%",y:"-40%",scale:.96,opacity:0,transition:W2},open:{x:"-50%",y:"-50%",scale:1,opacity:1,transition:W2}},qm=T.memo(({children:t,className:e,showCloseButton:n=!0,onClose:r,onBackdrop:s})=>p.jsxs(qh,{children:[p.jsx(Kh,{asChild:!0,children:p.jsx(ot.div,{className:Pe("fixed inset-0 z-[9999]","bg-[#FAFAFA]/80 dark:bg-[#0A0A0A]/80","backdrop-blur-[2px]"),initial:"closed",animate:"open",exit:"closed",variants:J0e,onClick:s})}),p.jsx(Yh,{asChild:!0,children:p.jsx(ot.div,{className:Pe("fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2","bg-[#FAFAFA] dark:bg-[#0A0A0A]","rounded-lg shadow-lg","border border-[#E5E5E5] dark:border-[#1A1A1A]","z-[9999] w-[520px]",e),initial:"closed",animate:"open",exit:"closed",variants:Z0e,children:p.jsxs("div",{className:"flex flex-col",children:[t,n&&p.jsx(Gm,{asChild:!0,onClick:r,children:p.jsx(dr,{icon:"i-ph:x",className:"absolute top-3 right-3 text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary"})})]})})})]})),Q0e=T.memo(({className:t})=>{const e=It(Ly),[n,r]=T.useState(!1);return T.useEffect(()=>{r(!0)},[]),n&&p.jsx(dr,{className:t,icon:e==="dark"?"i-ph-sun-dim-duotone":"i-ph-moon-stars-duotone",size:"xl",title:"Toggle Theme",onClick:vW})});function ebe(t){const e=T.useRef({value:t,previous:t});return T.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}function $q(t){const[e,n]=T.useState(void 0);return Yc(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var KR="Switch",[tbe,vht]=Xo(KR),[nbe,rbe]=tbe(KR),YR=T.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:o,disabled:a,value:l="on",onCheckedChange:c,form:u,...d}=t,[h,f]=T.useState(null),g=Un(e,_=>f(_)),y=T.useRef(!1),m=h?u||!!h.closest("form"):!0,[b=!1,v]=Bf({prop:s,defaultProp:i,onChange:c});return p.jsxs(nbe,{scope:n,checked:b,disabled:a,children:[p.jsx(hn.button,{type:"button",role:"switch","aria-checked":b,"aria-required":o,"data-state":Vq(b),"data-disabled":a?"":void 0,disabled:a,value:l,...d,ref:g,onClick:Nt(t.onClick,_=>{v(E=>!E),m&&(y.current=_.isPropagationStopped(),y.current||_.stopPropagation())})}),m&&p.jsx(sbe,{control:h,bubbles:!y.current,name:r,value:l,checked:b,required:o,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});YR.displayName=KR;var Hq="SwitchThumb",zq=T.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=rbe(Hq,n);return p.jsx(hn.span,{"data-state":Vq(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});zq.displayName=Hq;var sbe=t=>{const{control:e,checked:n,bubbles:r=!0,...s}=t,i=T.useRef(null),o=ebe(n),a=$q(e);return T.useEffect(()=>{const l=i.current,c=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(c,"checked").set;if(o!==n&&d){const h=new Event("click",{bubbles:r});d.call(l,n),l.dispatchEvent(h)}},[o,n,r]),p.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:i,style:{...t.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Vq(t){return t?"checked":"unchecked"}var ibe=YR,obe=zq;const Fo=T.memo(({className:t,onCheckedChange:e,checked:n})=>p.jsx(ibe,{className:Pe("relative h-6 w-11 cursor-pointer rounded-full bg-bolt-elements-button-primary-background","transition-colors duration-200 ease-in-out","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50","data-[state=checked]:bg-bolt-elements-item-contentAccent",t),checked:n,onCheckedChange:r=>e?.(r),children:p.jsx(obe,{className:Pe("block h-5 w-5 rounded-full bg-white","shadow-lg shadow-black/20","transition-transform duration-200 ease-in-out","translate-x-0.5","data-[state=checked]:translate-x-[1.375rem]","will-change-transform")})}));var Wq="vercel.ai.error",abe=Symbol.for(Wq),Gq,lbe=class qq extends Error{constructor({name:e,message:n,cause:r}){super(n),this[Gq]=!0,this.name=e,this.cause=r}static isInstance(e){return qq.hasMarker(e,Wq)}static hasMarker(e,n){const r=Symbol.for(n);return e!=null&&typeof e=="object"&&r in e&&typeof e[r]=="boolean"&&e[r]===!0}};Gq=abe;var _r=lbe,Kq="AI_APICallError",Yq=`vercel.ai.error.${Kq}`,cbe=Symbol.for(Yq),Xq,Nc=class extends _r{constructor({message:e,url:n,requestBodyValues:r,statusCode:s,responseHeaders:i,responseBody:o,cause:a,isRetryable:l=s!=null&&(s===408||s===409||s===429||s>=500),data:c}){super({name:Kq,message:e,cause:a}),this[Xq]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=s,this.responseHeaders=i,this.responseBody=o,this.isRetryable=l,this.data=c}static isInstance(e){return _r.hasMarker(e,Yq)}};Xq=cbe;var Jq="AI_EmptyResponseBodyError",Zq=`vercel.ai.error.${Jq}`,ube=Symbol.for(Zq),Qq,dbe=class extends _r{constructor({message:e="Empty response body"}={}){super({name:Jq,message:e}),this[Qq]=!0}static isInstance(e){return _r.hasMarker(e,Zq)}};Qq=ube;function eK(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}var tK="AI_InvalidArgumentError",nK=`vercel.ai.error.${tK}`,hbe=Symbol.for(nK),rK,fbe=class extends _r{constructor({message:e,cause:n,argument:r}){super({name:tK,message:e,cause:n}),this[rK]=!0,this.argument=r}static isInstance(e){return _r.hasMarker(e,nK)}};rK=hbe;var sK="AI_InvalidPromptError",iK=`vercel.ai.error.${sK}`,pbe=Symbol.for(iK),oK,mbe=class extends _r{constructor({prompt:e,message:n,cause:r}){super({name:sK,message:`Invalid prompt: ${n}`,cause:r}),this[oK]=!0,this.prompt=e}static isInstance(e){return _r.hasMarker(e,iK)}};oK=pbe;var aK="AI_InvalidResponseDataError",lK=`vercel.ai.error.${aK}`,gbe=Symbol.for(lK),cK,ym=class extends _r{constructor({data:e,message:n=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:aK,message:n}),this[cK]=!0,this.data=e}static isInstance(e){return _r.hasMarker(e,lK)}};cK=gbe;var uK="AI_JSONParseError",dK=`vercel.ai.error.${uK}`,bbe=Symbol.for(dK),hK,G2=class extends _r{constructor({text:e,cause:n}){super({name:uK,message:`JSON parsing failed: Text: ${e}.
Error message: ${eK(n)}`,cause:n}),this[hK]=!0,this.text=e}static isInstance(e){return _r.hasMarker(e,dK)}};hK=bbe;var fK="AI_LoadAPIKeyError",pK=`vercel.ai.error.${fK}`,ybe=Symbol.for(pK),mK,dx=class extends _r{constructor({message:e}){super({name:fK,message:e}),this[mK]=!0}static isInstance(e){return _r.hasMarker(e,pK)}};mK=ybe;var gK="AI_NoSuchModelError",bK=`vercel.ai.error.${gK}`,vbe=Symbol.for(bK),yK,_be=class extends _r{constructor({errorName:t=gK,modelId:e,modelType:n,message:r=`No such ${n}: ${e}`}){super({name:t,message:r}),this[yK]=!0,this.modelId=e,this.modelType=n}static isInstance(t){return _r.hasMarker(t,bK)}};yK=vbe;var vK="AI_TooManyEmbeddingValuesForCallError",_K=`vercel.ai.error.${vK}`,xbe=Symbol.for(_K),xK,wK=class extends _r{constructor(e){super({name:vK,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[xK]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return _r.hasMarker(e,_K)}};xK=xbe;var EK="AI_TypeValidationError",SK=`vercel.ai.error.${EK}`,wbe=Symbol.for(SK),kK,Ebe=class SN extends _r{constructor({value:e,cause:n}){super({name:EK,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${eK(n)}`,cause:n}),this[kK]=!0,this.value=e}static isInstance(e){return _r.hasMarker(e,SK)}static wrap({value:e,cause:n}){return SN.isInstance(n)&&n.value===e?n:new SN({value:e,cause:n})}};kK=wbe;var q2=Ebe,CK="AI_UnsupportedFunctionalityError",AK=`vercel.ai.error.${CK}`,Sbe=Symbol.for(AK),TK,vr=class extends _r{constructor({functionality:e,message:n=`'${e}' functionality not supported.`}){super({name:CK,message:n}),this[TK]=!0,this.functionality=e}static isInstance(e){return _r.hasMarker(e,AK)}};TK=Sbe;let NK=(t,e=21)=>(n=e)=>{let r="",s=n|0;for(;s--;)r+=t[Math.random()*t.length|0];return r};var qr={},bk={};bk.byteLength=Abe;bk.toByteArray=Nbe;bk.fromByteArray=Rbe;var _l=[],So=[],kbe=typeof Uint8Array<"u"?Uint8Array:Array,pT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Pp=0,Cbe=pT.length;Pp<Cbe;++Pp)_l[Pp]=pT[Pp],So[pT.charCodeAt(Pp)]=Pp;So[45]=62;So[95]=63;function PK(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function Abe(t){var e=PK(t),n=e[0],r=e[1];return(n+r)*3/4-r}function Tbe(t,e,n){return(e+n)*3/4-n}function Nbe(t){var e,n=PK(t),r=n[0],s=n[1],i=new kbe(Tbe(t,r,s)),o=0,a=s>0?r-4:r,l;for(l=0;l<a;l+=4)e=So[t.charCodeAt(l)]<<18|So[t.charCodeAt(l+1)]<<12|So[t.charCodeAt(l+2)]<<6|So[t.charCodeAt(l+3)],i[o++]=e>>16&255,i[o++]=e>>8&255,i[o++]=e&255;return s===2&&(e=So[t.charCodeAt(l)]<<2|So[t.charCodeAt(l+1)]>>4,i[o++]=e&255),s===1&&(e=So[t.charCodeAt(l)]<<10|So[t.charCodeAt(l+1)]<<4|So[t.charCodeAt(l+2)]>>2,i[o++]=e>>8&255,i[o++]=e&255),i}function Pbe(t){return _l[t>>18&63]+_l[t>>12&63]+_l[t>>6&63]+_l[t&63]}function Ibe(t,e,n){for(var r,s=[],i=e;i<n;i+=3)r=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(t[i+2]&255),s.push(Pbe(r));return s.join("")}function Rbe(t){for(var e,n=t.length,r=n%3,s=[],i=16383,o=0,a=n-r;o<a;o+=i)s.push(Ibe(t,o,o+i>a?a:o+i));return r===1?(e=t[n-1],s.push(_l[e>>2]+_l[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],s.push(_l[e>>10]+_l[e>>4&63]+_l[e<<2&63]+"=")),s.join("")}var XR={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */XR.read=function(t,e,n,r,s){var i,o,a=s*8-r-1,l=(1<<a)-1,c=l>>1,u=-7,d=n?s-1:0,h=n?-1:1,f=t[e+d];for(d+=h,i=f&(1<<-u)-1,f>>=-u,u+=a;u>0;i=i*256+t[e+d],d+=h,u-=8);for(o=i&(1<<-u)-1,i>>=-u,u+=r;u>0;o=o*256+t[e+d],d+=h,u-=8);if(i===0)i=1-c;else{if(i===l)return o?NaN:(f?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-c}return(f?-1:1)*o*Math.pow(2,i-r)};XR.write=function(t,e,n,r,s,i){var o,a,l,c=i*8-s-1,u=(1<<c)-1,d=u>>1,h=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:i-1,g=r?1:-1,y=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+d>=1?e+=h/l:e+=h*Math.pow(2,1-d),e*l>=2&&(o++,l/=2),o+d>=u?(a=0,o=u):o+d>=1?(a=(e*l-1)*Math.pow(2,s),o=o+d):(a=e*Math.pow(2,d-1)*Math.pow(2,s),o=0));s>=8;t[n+f]=a&255,f+=g,a/=256,s-=8);for(o=o<<s|a,c+=s;c>0;t[n+f]=o&255,f+=g,o/=256,c-=8);t[n+f-g]|=y*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=bk,n=XR,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=w,t.INSPECT_MAX_BYTES=50;const s=2147483647;t.kMaxLength=s;const{Uint8Array:i,ArrayBuffer:o,SharedArrayBuffer:a}=globalThis;u.TYPED_ARRAY_SUPPORT=l(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const ie=new i(1),z={foo:function(){return 42}};return Object.setPrototypeOf(z,i.prototype),Object.setPrototypeOf(ie,z),ie.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function c(ie){if(ie>s)throw new RangeError('The value "'+ie+'" is invalid for option "size"');const z=new i(ie);return Object.setPrototypeOf(z,u.prototype),z}function u(ie,z,X){if(typeof ie=="number"){if(typeof z=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g(ie)}return d(ie,z,X)}u.poolSize=8192;function d(ie,z,X){if(typeof ie=="string")return y(ie,z);if(o.isView(ie))return b(ie);if(ie==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ie);if(Be(ie,o)||ie&&Be(ie.buffer,o)||typeof a<"u"&&(Be(ie,a)||ie&&Be(ie.buffer,a)))return v(ie,z,X);if(typeof ie=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const pe=ie.valueOf&&ie.valueOf();if(pe!=null&&pe!==ie)return u.from(pe,z,X);const Le=_(ie);if(Le)return Le;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ie[Symbol.toPrimitive]=="function")return u.from(ie[Symbol.toPrimitive]("string"),z,X);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ie)}u.from=function(ie,z,X){return d(ie,z,X)},Object.setPrototypeOf(u.prototype,i.prototype),Object.setPrototypeOf(u,i);function h(ie){if(typeof ie!="number")throw new TypeError('"size" argument must be of type number');if(ie<0)throw new RangeError('The value "'+ie+'" is invalid for option "size"')}function f(ie,z,X){return h(ie),ie<=0?c(ie):z!==void 0?typeof X=="string"?c(ie).fill(z,X):c(ie).fill(z):c(ie)}u.alloc=function(ie,z,X){return f(ie,z,X)};function g(ie){return h(ie),c(ie<0?0:E(ie)|0)}u.allocUnsafe=function(ie){return g(ie)},u.allocUnsafeSlow=function(ie){return g(ie)};function y(ie,z){if((typeof z!="string"||z==="")&&(z="utf8"),!u.isEncoding(z))throw new TypeError("Unknown encoding: "+z);const X=S(ie,z)|0;let pe=c(X);const Le=pe.write(ie,z);return Le!==X&&(pe=pe.slice(0,Le)),pe}function m(ie){const z=ie.length<0?0:E(ie.length)|0,X=c(z);for(let pe=0;pe<z;pe+=1)X[pe]=ie[pe]&255;return X}function b(ie){if(Be(ie,i)){const z=new i(ie);return v(z.buffer,z.byteOffset,z.byteLength)}return m(ie)}function v(ie,z,X){if(z<0||ie.byteLength<z)throw new RangeError('"offset" is outside of buffer bounds');if(ie.byteLength<z+(X||0))throw new RangeError('"length" is outside of buffer bounds');let pe;return z===void 0&&X===void 0?pe=new i(ie):X===void 0?pe=new i(ie,z):pe=new i(ie,z,X),Object.setPrototypeOf(pe,u.prototype),pe}function _(ie){if(u.isBuffer(ie)){const z=E(ie.length)|0,X=c(z);return X.length===0||ie.copy(X,0,0,z),X}if(ie.length!==void 0)return typeof ie.length!="number"||Ae(ie.length)?c(0):m(ie);if(ie.type==="Buffer"&&Array.isArray(ie.data))return m(ie.data)}function E(ie){if(ie>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return ie|0}function w(ie){return+ie!=ie&&(ie=0),u.alloc(+ie)}u.isBuffer=function(z){return z!=null&&z._isBuffer===!0&&z!==u.prototype},u.compare=function(z,X){if(Be(z,i)&&(z=u.from(z,z.offset,z.byteLength)),Be(X,i)&&(X=u.from(X,X.offset,X.byteLength)),!u.isBuffer(z)||!u.isBuffer(X))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(z===X)return 0;let pe=z.length,Le=X.length;for(let Ue=0,We=Math.min(pe,Le);Ue<We;++Ue)if(z[Ue]!==X[Ue]){pe=z[Ue],Le=X[Ue];break}return pe<Le?-1:Le<pe?1:0},u.isEncoding=function(z){switch(String(z).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(z,X){if(!Array.isArray(z))throw new TypeError('"list" argument must be an Array of Buffers');if(z.length===0)return u.alloc(0);let pe;if(X===void 0)for(X=0,pe=0;pe<z.length;++pe)X+=z[pe].length;const Le=u.allocUnsafe(X);let Ue=0;for(pe=0;pe<z.length;++pe){let We=z[pe];if(Be(We,i))Ue+We.length>Le.length?(u.isBuffer(We)||(We=u.from(We)),We.copy(Le,Ue)):i.prototype.set.call(Le,We,Ue);else if(u.isBuffer(We))We.copy(Le,Ue);else throw new TypeError('"list" argument must be an Array of Buffers');Ue+=We.length}return Le};function S(ie,z){if(u.isBuffer(ie))return ie.length;if(o.isView(ie)||Be(ie,o))return ie.byteLength;if(typeof ie!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ie);const X=ie.length,pe=arguments.length>2&&arguments[2]===!0;if(!pe&&X===0)return 0;let Le=!1;for(;;)switch(z){case"ascii":case"latin1":case"binary":return X;case"utf8":case"utf-8":return Ce(ie).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X*2;case"hex":return X>>>1;case"base64":return $e(ie).length;default:if(Le)return pe?-1:Ce(ie).length;z=(""+z).toLowerCase(),Le=!0}}u.byteLength=S;function k(ie,z,X){let pe=!1;if((z===void 0||z<0)&&(z=0),z>this.length||((X===void 0||X>this.length)&&(X=this.length),X<=0)||(X>>>=0,z>>>=0,X<=z))return"";for(ie||(ie="utf8");;)switch(ie){case"hex":return D(this,z,X);case"utf8":case"utf-8":return J(this,z,X);case"ascii":return F(this,z,X);case"latin1":case"binary":return G(this,z,X);case"base64":return ee(this,z,X);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,z,X);default:if(pe)throw new TypeError("Unknown encoding: "+ie);ie=(ie+"").toLowerCase(),pe=!0}}u.prototype._isBuffer=!0;function x(ie,z,X){const pe=ie[z];ie[z]=ie[X],ie[X]=pe}u.prototype.swap16=function(){const z=this.length;if(z%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let X=0;X<z;X+=2)x(this,X,X+1);return this},u.prototype.swap32=function(){const z=this.length;if(z%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let X=0;X<z;X+=4)x(this,X,X+3),x(this,X+1,X+2);return this},u.prototype.swap64=function(){const z=this.length;if(z%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let X=0;X<z;X+=8)x(this,X,X+7),x(this,X+1,X+6),x(this,X+2,X+5),x(this,X+3,X+4);return this},u.prototype.toString=function(){const z=this.length;return z===0?"":arguments.length===0?J(this,0,z):k.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(z){if(!u.isBuffer(z))throw new TypeError("Argument must be a Buffer");return this===z?!0:u.compare(this,z)===0},u.prototype.inspect=function(){let z="";const X=t.INSPECT_MAX_BYTES;return z=this.toString("hex",0,X).replace(/(.{2})/g,"$1 ").trim(),this.length>X&&(z+=" ... "),"<Buffer "+z+">"},r&&(u.prototype[r]=u.prototype.inspect),u.prototype.compare=function(z,X,pe,Le,Ue){if(Be(z,i)&&(z=u.from(z,z.offset,z.byteLength)),!u.isBuffer(z))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof z);if(X===void 0&&(X=0),pe===void 0&&(pe=z?z.length:0),Le===void 0&&(Le=0),Ue===void 0&&(Ue=this.length),X<0||pe>z.length||Le<0||Ue>this.length)throw new RangeError("out of range index");if(Le>=Ue&&X>=pe)return 0;if(Le>=Ue)return-1;if(X>=pe)return 1;if(X>>>=0,pe>>>=0,Le>>>=0,Ue>>>=0,this===z)return 0;let We=Ue-Le,Rt=pe-X;const At=Math.min(We,Rt),fn=this.slice(Le,Ue),Ht=z.slice(X,pe);for(let Kt=0;Kt<At;++Kt)if(fn[Kt]!==Ht[Kt]){We=fn[Kt],Rt=Ht[Kt];break}return We<Rt?-1:Rt<We?1:0};function I(ie,z,X,pe,Le){if(ie.length===0)return-1;if(typeof X=="string"?(pe=X,X=0):X>2147483647?X=2147483647:X<-2147483648&&(X=-2147483648),X=+X,Ae(X)&&(X=Le?0:ie.length-1),X<0&&(X=ie.length+X),X>=ie.length){if(Le)return-1;X=ie.length-1}else if(X<0)if(Le)X=0;else return-1;if(typeof z=="string"&&(z=u.from(z,pe)),u.isBuffer(z))return z.length===0?-1:R(ie,z,X,pe,Le);if(typeof z=="number")return z=z&255,typeof i.prototype.indexOf=="function"?Le?i.prototype.indexOf.call(ie,z,X):i.prototype.lastIndexOf.call(ie,z,X):R(ie,[z],X,pe,Le);throw new TypeError("val must be string, number or Buffer")}function R(ie,z,X,pe,Le){let Ue=1,We=ie.length,Rt=z.length;if(pe!==void 0&&(pe=String(pe).toLowerCase(),pe==="ucs2"||pe==="ucs-2"||pe==="utf16le"||pe==="utf-16le")){if(ie.length<2||z.length<2)return-1;Ue=2,We/=2,Rt/=2,X/=2}function At(Ht,Kt){return Ue===1?Ht[Kt]:Ht.readUInt16BE(Kt*Ue)}let fn;if(Le){let Ht=-1;for(fn=X;fn<We;fn++)if(At(ie,fn)===At(z,Ht===-1?0:fn-Ht)){if(Ht===-1&&(Ht=fn),fn-Ht+1===Rt)return Ht*Ue}else Ht!==-1&&(fn-=fn-Ht),Ht=-1}else for(X+Rt>We&&(X=We-Rt),fn=X;fn>=0;fn--){let Ht=!0;for(let Kt=0;Kt<Rt;Kt++)if(At(ie,fn+Kt)!==At(z,Kt)){Ht=!1;break}if(Ht)return fn}return-1}u.prototype.includes=function(z,X,pe){return this.indexOf(z,X,pe)!==-1},u.prototype.indexOf=function(z,X,pe){return I(this,z,X,pe,!0)},u.prototype.lastIndexOf=function(z,X,pe){return I(this,z,X,pe,!1)};function C(ie,z,X,pe){X=Number(X)||0;const Le=ie.length-X;pe?(pe=Number(pe),pe>Le&&(pe=Le)):pe=Le;const Ue=z.length;pe>Ue/2&&(pe=Ue/2);let We;for(We=0;We<pe;++We){const Rt=parseInt(z.substr(We*2,2),16);if(Ae(Rt))return We;ie[X+We]=Rt}return We}function N(ie,z,X,pe){return je(Ce(z,ie.length-X),ie,X,pe)}function O(ie,z,X,pe){return je(Ie(z),ie,X,pe)}function P(ie,z,X,pe){return je($e(z),ie,X,pe)}function $(ie,z,X,pe){return je(xe(z,ie.length-X),ie,X,pe)}u.prototype.write=function(z,X,pe,Le){if(X===void 0)Le="utf8",pe=this.length,X=0;else if(pe===void 0&&typeof X=="string")Le=X,pe=this.length,X=0;else if(isFinite(X))X=X>>>0,isFinite(pe)?(pe=pe>>>0,Le===void 0&&(Le="utf8")):(Le=pe,pe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Ue=this.length-X;if((pe===void 0||pe>Ue)&&(pe=Ue),z.length>0&&(pe<0||X<0)||X>this.length)throw new RangeError("Attempt to write outside buffer bounds");Le||(Le="utf8");let We=!1;for(;;)switch(Le){case"hex":return C(this,z,X,pe);case"utf8":case"utf-8":return N(this,z,X,pe);case"ascii":case"latin1":case"binary":return O(this,z,X,pe);case"base64":return P(this,z,X,pe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,z,X,pe);default:if(We)throw new TypeError("Unknown encoding: "+Le);Le=(""+Le).toLowerCase(),We=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ee(ie,z,X){return z===0&&X===ie.length?e.fromByteArray(ie):e.fromByteArray(ie.slice(z,X))}function J(ie,z,X){X=Math.min(ie.length,X);const pe=[];let Le=z;for(;Le<X;){const Ue=ie[Le];let We=null,Rt=Ue>239?4:Ue>223?3:Ue>191?2:1;if(Le+Rt<=X){let At,fn,Ht,Kt;switch(Rt){case 1:Ue<128&&(We=Ue);break;case 2:At=ie[Le+1],(At&192)===128&&(Kt=(Ue&31)<<6|At&63,Kt>127&&(We=Kt));break;case 3:At=ie[Le+1],fn=ie[Le+2],(At&192)===128&&(fn&192)===128&&(Kt=(Ue&15)<<12|(At&63)<<6|fn&63,Kt>2047&&(Kt<55296||Kt>57343)&&(We=Kt));break;case 4:At=ie[Le+1],fn=ie[Le+2],Ht=ie[Le+3],(At&192)===128&&(fn&192)===128&&(Ht&192)===128&&(Kt=(Ue&15)<<18|(At&63)<<12|(fn&63)<<6|Ht&63,Kt>65535&&Kt<1114112&&(We=Kt))}}We===null?(We=65533,Rt=1):We>65535&&(We-=65536,pe.push(We>>>10&1023|55296),We=56320|We&1023),pe.push(We),Le+=Rt}return M(pe)}const Z=4096;function M(ie){const z=ie.length;if(z<=Z)return String.fromCharCode.apply(String,ie);let X="",pe=0;for(;pe<z;)X+=String.fromCharCode.apply(String,ie.slice(pe,pe+=Z));return X}function F(ie,z,X){let pe="";X=Math.min(ie.length,X);for(let Le=z;Le<X;++Le)pe+=String.fromCharCode(ie[Le]&127);return pe}function G(ie,z,X){let pe="";X=Math.min(ie.length,X);for(let Le=z;Le<X;++Le)pe+=String.fromCharCode(ie[Le]);return pe}function D(ie,z,X){const pe=ie.length;(!z||z<0)&&(z=0),(!X||X<0||X>pe)&&(X=pe);let Le="";for(let Ue=z;Ue<X;++Ue)Le+=Ye[ie[Ue]];return Le}function j(ie,z,X){const pe=ie.slice(z,X);let Le="";for(let Ue=0;Ue<pe.length-1;Ue+=2)Le+=String.fromCharCode(pe[Ue]+pe[Ue+1]*256);return Le}u.prototype.slice=function(z,X){const pe=this.length;z=~~z,X=X===void 0?pe:~~X,z<0?(z+=pe,z<0&&(z=0)):z>pe&&(z=pe),X<0?(X+=pe,X<0&&(X=0)):X>pe&&(X=pe),X<z&&(X=z);const Le=this.subarray(z,X);return Object.setPrototypeOf(Le,u.prototype),Le};function V(ie,z,X){if(ie%1!==0||ie<0)throw new RangeError("offset is not uint");if(ie+z>X)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(z,X,pe){z=z>>>0,X=X>>>0,pe||V(z,X,this.length);let Le=this[z],Ue=1,We=0;for(;++We<X&&(Ue*=256);)Le+=this[z+We]*Ue;return Le},u.prototype.readUintBE=u.prototype.readUIntBE=function(z,X,pe){z=z>>>0,X=X>>>0,pe||V(z,X,this.length);let Le=this[z+--X],Ue=1;for(;X>0&&(Ue*=256);)Le+=this[z+--X]*Ue;return Le},u.prototype.readUint8=u.prototype.readUInt8=function(z,X){return z=z>>>0,X||V(z,1,this.length),this[z]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(z,X){return z=z>>>0,X||V(z,2,this.length),this[z]|this[z+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(z,X){return z=z>>>0,X||V(z,2,this.length),this[z]<<8|this[z+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(z,X){return z=z>>>0,X||V(z,4,this.length),(this[z]|this[z+1]<<8|this[z+2]<<16)+this[z+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(z,X){return z=z>>>0,X||V(z,4,this.length),this[z]*16777216+(this[z+1]<<16|this[z+2]<<8|this[z+3])},u.prototype.readBigUInt64LE=Xe(function(z){z=z>>>0,ne(z,"offset");const X=this[z],pe=this[z+7];(X===void 0||pe===void 0)&&le(z,this.length-8);const Le=X+this[++z]*2**8+this[++z]*2**16+this[++z]*2**24,Ue=this[++z]+this[++z]*2**8+this[++z]*2**16+pe*2**24;return BigInt(Le)+(BigInt(Ue)<<BigInt(32))}),u.prototype.readBigUInt64BE=Xe(function(z){z=z>>>0,ne(z,"offset");const X=this[z],pe=this[z+7];(X===void 0||pe===void 0)&&le(z,this.length-8);const Le=X*2**24+this[++z]*2**16+this[++z]*2**8+this[++z],Ue=this[++z]*2**24+this[++z]*2**16+this[++z]*2**8+pe;return(BigInt(Le)<<BigInt(32))+BigInt(Ue)}),u.prototype.readIntLE=function(z,X,pe){z=z>>>0,X=X>>>0,pe||V(z,X,this.length);let Le=this[z],Ue=1,We=0;for(;++We<X&&(Ue*=256);)Le+=this[z+We]*Ue;return Ue*=128,Le>=Ue&&(Le-=Math.pow(2,8*X)),Le},u.prototype.readIntBE=function(z,X,pe){z=z>>>0,X=X>>>0,pe||V(z,X,this.length);let Le=X,Ue=1,We=this[z+--Le];for(;Le>0&&(Ue*=256);)We+=this[z+--Le]*Ue;return Ue*=128,We>=Ue&&(We-=Math.pow(2,8*X)),We},u.prototype.readInt8=function(z,X){return z=z>>>0,X||V(z,1,this.length),this[z]&128?(255-this[z]+1)*-1:this[z]},u.prototype.readInt16LE=function(z,X){z=z>>>0,X||V(z,2,this.length);const pe=this[z]|this[z+1]<<8;return pe&32768?pe|4294901760:pe},u.prototype.readInt16BE=function(z,X){z=z>>>0,X||V(z,2,this.length);const pe=this[z+1]|this[z]<<8;return pe&32768?pe|4294901760:pe},u.prototype.readInt32LE=function(z,X){return z=z>>>0,X||V(z,4,this.length),this[z]|this[z+1]<<8|this[z+2]<<16|this[z+3]<<24},u.prototype.readInt32BE=function(z,X){return z=z>>>0,X||V(z,4,this.length),this[z]<<24|this[z+1]<<16|this[z+2]<<8|this[z+3]},u.prototype.readBigInt64LE=Xe(function(z){z=z>>>0,ne(z,"offset");const X=this[z],pe=this[z+7];(X===void 0||pe===void 0)&&le(z,this.length-8);const Le=this[z+4]+this[z+5]*2**8+this[z+6]*2**16+(pe<<24);return(BigInt(Le)<<BigInt(32))+BigInt(X+this[++z]*2**8+this[++z]*2**16+this[++z]*2**24)}),u.prototype.readBigInt64BE=Xe(function(z){z=z>>>0,ne(z,"offset");const X=this[z],pe=this[z+7];(X===void 0||pe===void 0)&&le(z,this.length-8);const Le=(X<<24)+this[++z]*2**16+this[++z]*2**8+this[++z];return(BigInt(Le)<<BigInt(32))+BigInt(this[++z]*2**24+this[++z]*2**16+this[++z]*2**8+pe)}),u.prototype.readFloatLE=function(z,X){return z=z>>>0,X||V(z,4,this.length),n.read(this,z,!0,23,4)},u.prototype.readFloatBE=function(z,X){return z=z>>>0,X||V(z,4,this.length),n.read(this,z,!1,23,4)},u.prototype.readDoubleLE=function(z,X){return z=z>>>0,X||V(z,8,this.length),n.read(this,z,!0,52,8)},u.prototype.readDoubleBE=function(z,X){return z=z>>>0,X||V(z,8,this.length),n.read(this,z,!1,52,8)};function W(ie,z,X,pe,Le,Ue){if(!u.isBuffer(ie))throw new TypeError('"buffer" argument must be a Buffer instance');if(z>Le||z<Ue)throw new RangeError('"value" argument is out of bounds');if(X+pe>ie.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(z,X,pe,Le){if(z=+z,X=X>>>0,pe=pe>>>0,!Le){const Rt=Math.pow(2,8*pe)-1;W(this,z,X,pe,Rt,0)}let Ue=1,We=0;for(this[X]=z&255;++We<pe&&(Ue*=256);)this[X+We]=z/Ue&255;return X+pe},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(z,X,pe,Le){if(z=+z,X=X>>>0,pe=pe>>>0,!Le){const Rt=Math.pow(2,8*pe)-1;W(this,z,X,pe,Rt,0)}let Ue=pe-1,We=1;for(this[X+Ue]=z&255;--Ue>=0&&(We*=256);)this[X+Ue]=z/We&255;return X+pe},u.prototype.writeUint8=u.prototype.writeUInt8=function(z,X,pe){return z=+z,X=X>>>0,pe||W(this,z,X,1,255,0),this[X]=z&255,X+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(z,X,pe){return z=+z,X=X>>>0,pe||W(this,z,X,2,65535,0),this[X]=z&255,this[X+1]=z>>>8,X+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(z,X,pe){return z=+z,X=X>>>0,pe||W(this,z,X,2,65535,0),this[X]=z>>>8,this[X+1]=z&255,X+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(z,X,pe){return z=+z,X=X>>>0,pe||W(this,z,X,4,4294967295,0),this[X+3]=z>>>24,this[X+2]=z>>>16,this[X+1]=z>>>8,this[X]=z&255,X+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(z,X,pe){return z=+z,X=X>>>0,pe||W(this,z,X,4,4294967295,0),this[X]=z>>>24,this[X+1]=z>>>16,this[X+2]=z>>>8,this[X+3]=z&255,X+4};function re(ie,z,X,pe,Le){ge(z,pe,Le,ie,X,7);let Ue=Number(z&BigInt(4294967295));ie[X++]=Ue,Ue=Ue>>8,ie[X++]=Ue,Ue=Ue>>8,ie[X++]=Ue,Ue=Ue>>8,ie[X++]=Ue;let We=Number(z>>BigInt(32)&BigInt(4294967295));return ie[X++]=We,We=We>>8,ie[X++]=We,We=We>>8,ie[X++]=We,We=We>>8,ie[X++]=We,X}function te(ie,z,X,pe,Le){ge(z,pe,Le,ie,X,7);let Ue=Number(z&BigInt(4294967295));ie[X+7]=Ue,Ue=Ue>>8,ie[X+6]=Ue,Ue=Ue>>8,ie[X+5]=Ue,Ue=Ue>>8,ie[X+4]=Ue;let We=Number(z>>BigInt(32)&BigInt(4294967295));return ie[X+3]=We,We=We>>8,ie[X+2]=We,We=We>>8,ie[X+1]=We,We=We>>8,ie[X]=We,X+8}u.prototype.writeBigUInt64LE=Xe(function(z,X=0){return re(this,z,X,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=Xe(function(z,X=0){return te(this,z,X,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(z,X,pe,Le){if(z=+z,X=X>>>0,!Le){const At=Math.pow(2,8*pe-1);W(this,z,X,pe,At-1,-At)}let Ue=0,We=1,Rt=0;for(this[X]=z&255;++Ue<pe&&(We*=256);)z<0&&Rt===0&&this[X+Ue-1]!==0&&(Rt=1),this[X+Ue]=(z/We>>0)-Rt&255;return X+pe},u.prototype.writeIntBE=function(z,X,pe,Le){if(z=+z,X=X>>>0,!Le){const At=Math.pow(2,8*pe-1);W(this,z,X,pe,At-1,-At)}let Ue=pe-1,We=1,Rt=0;for(this[X+Ue]=z&255;--Ue>=0&&(We*=256);)z<0&&Rt===0&&this[X+Ue+1]!==0&&(Rt=1),this[X+Ue]=(z/We>>0)-Rt&255;return X+pe},u.prototype.writeInt8=function(z,X,pe){return z=+z,X=X>>>0,pe||W(this,z,X,1,127,-128),z<0&&(z=255+z+1),this[X]=z&255,X+1},u.prototype.writeInt16LE=function(z,X,pe){return z=+z,X=X>>>0,pe||W(this,z,X,2,32767,-32768),this[X]=z&255,this[X+1]=z>>>8,X+2},u.prototype.writeInt16BE=function(z,X,pe){return z=+z,X=X>>>0,pe||W(this,z,X,2,32767,-32768),this[X]=z>>>8,this[X+1]=z&255,X+2},u.prototype.writeInt32LE=function(z,X,pe){return z=+z,X=X>>>0,pe||W(this,z,X,4,2147483647,-2147483648),this[X]=z&255,this[X+1]=z>>>8,this[X+2]=z>>>16,this[X+3]=z>>>24,X+4},u.prototype.writeInt32BE=function(z,X,pe){return z=+z,X=X>>>0,pe||W(this,z,X,4,2147483647,-2147483648),z<0&&(z=4294967295+z+1),this[X]=z>>>24,this[X+1]=z>>>16,this[X+2]=z>>>8,this[X+3]=z&255,X+4},u.prototype.writeBigInt64LE=Xe(function(z,X=0){return re(this,z,X,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=Xe(function(z,X=0){return te(this,z,X,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Y(ie,z,X,pe,Le,Ue){if(X+pe>ie.length)throw new RangeError("Index out of range");if(X<0)throw new RangeError("Index out of range")}function de(ie,z,X,pe,Le){return z=+z,X=X>>>0,Le||Y(ie,z,X,4),n.write(ie,z,X,pe,23,4),X+4}u.prototype.writeFloatLE=function(z,X,pe){return de(this,z,X,!0,pe)},u.prototype.writeFloatBE=function(z,X,pe){return de(this,z,X,!1,pe)};function ye(ie,z,X,pe,Le){return z=+z,X=X>>>0,Le||Y(ie,z,X,8),n.write(ie,z,X,pe,52,8),X+8}u.prototype.writeDoubleLE=function(z,X,pe){return ye(this,z,X,!0,pe)},u.prototype.writeDoubleBE=function(z,X,pe){return ye(this,z,X,!1,pe)},u.prototype.copy=function(z,X,pe,Le){if(!u.isBuffer(z))throw new TypeError("argument should be a Buffer");if(pe||(pe=0),!Le&&Le!==0&&(Le=this.length),X>=z.length&&(X=z.length),X||(X=0),Le>0&&Le<pe&&(Le=pe),Le===pe||z.length===0||this.length===0)return 0;if(X<0)throw new RangeError("targetStart out of bounds");if(pe<0||pe>=this.length)throw new RangeError("Index out of range");if(Le<0)throw new RangeError("sourceEnd out of bounds");Le>this.length&&(Le=this.length),z.length-X<Le-pe&&(Le=z.length-X+pe);const Ue=Le-pe;return this===z&&typeof i.prototype.copyWithin=="function"?this.copyWithin(X,pe,Le):i.prototype.set.call(z,this.subarray(pe,Le),X),Ue},u.prototype.fill=function(z,X,pe,Le){if(typeof z=="string"){if(typeof X=="string"?(Le=X,X=0,pe=this.length):typeof pe=="string"&&(Le=pe,pe=this.length),Le!==void 0&&typeof Le!="string")throw new TypeError("encoding must be a string");if(typeof Le=="string"&&!u.isEncoding(Le))throw new TypeError("Unknown encoding: "+Le);if(z.length===1){const We=z.charCodeAt(0);(Le==="utf8"&&We<128||Le==="latin1")&&(z=We)}}else typeof z=="number"?z=z&255:typeof z=="boolean"&&(z=Number(z));if(X<0||this.length<X||this.length<pe)throw new RangeError("Out of range index");if(pe<=X)return this;X=X>>>0,pe=pe===void 0?this.length:pe>>>0,z||(z=0);let Ue;if(typeof z=="number")for(Ue=X;Ue<pe;++Ue)this[Ue]=z;else{const We=u.isBuffer(z)?z:u.from(z,Le),Rt=We.length;if(Rt===0)throw new TypeError('The value "'+z+'" is invalid for argument "value"');for(Ue=0;Ue<pe-X;++Ue)this[Ue+X]=We[Ue%Rt]}return this};const Se={};function Te(ie,z,X){Se[ie]=class extends X{constructor(){super(),Object.defineProperty(this,"message",{value:z.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ie}]`,this.stack,delete this.name}get code(){return ie}set code(Le){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Le,writable:!0})}toString(){return`${this.name} [${ie}]: ${this.message}`}}}Te("ERR_BUFFER_OUT_OF_BOUNDS",function(ie){return ie?`${ie} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Te("ERR_INVALID_ARG_TYPE",function(ie,z){return`The "${ie}" argument must be of type number. Received type ${typeof z}`},TypeError),Te("ERR_OUT_OF_RANGE",function(ie,z,X){let pe=`The value of "${ie}" is out of range.`,Le=X;return Number.isInteger(X)&&Math.abs(X)>2**32?Le=ke(String(X)):typeof X=="bigint"&&(Le=String(X),(X>BigInt(2)**BigInt(32)||X<-(BigInt(2)**BigInt(32)))&&(Le=ke(Le)),Le+="n"),pe+=` It must be ${z}. Received ${Le}`,pe},RangeError);function ke(ie){let z="",X=ie.length;const pe=ie[0]==="-"?1:0;for(;X>=pe+4;X-=3)z=`_${ie.slice(X-3,X)}${z}`;return`${ie.slice(0,X)}${z}`}function K(ie,z,X){ne(z,"offset"),(ie[z]===void 0||ie[z+X]===void 0)&&le(z,ie.length-(X+1))}function ge(ie,z,X,pe,Le,Ue){if(ie>X||ie<z){const We=typeof z=="bigint"?"n":"";let Rt;throw z===0||z===BigInt(0)?Rt=`>= 0${We} and < 2${We} ** ${(Ue+1)*8}${We}`:Rt=`>= -(2${We} ** ${(Ue+1)*8-1}${We}) and < 2 ** ${(Ue+1)*8-1}${We}`,new Se.ERR_OUT_OF_RANGE("value",Rt,ie)}K(pe,Le,Ue)}function ne(ie,z){if(typeof ie!="number")throw new Se.ERR_INVALID_ARG_TYPE(z,"number",ie)}function le(ie,z,X){throw Math.floor(ie)!==ie?(ne(ie,X),new Se.ERR_OUT_OF_RANGE("offset","an integer",ie)):z<0?new Se.ERR_BUFFER_OUT_OF_BOUNDS:new Se.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${z}`,ie)}const se=/[^+/0-9A-Za-z-_]/g;function fe(ie){if(ie=ie.split("=")[0],ie=ie.trim().replace(se,""),ie.length<2)return"";for(;ie.length%4!==0;)ie=ie+"=";return ie}function Ce(ie,z){z=z||1/0;let X;const pe=ie.length;let Le=null;const Ue=[];for(let We=0;We<pe;++We){if(X=ie.charCodeAt(We),X>55295&&X<57344){if(!Le){if(X>56319){(z-=3)>-1&&Ue.push(239,191,189);continue}else if(We+1===pe){(z-=3)>-1&&Ue.push(239,191,189);continue}Le=X;continue}if(X<56320){(z-=3)>-1&&Ue.push(239,191,189),Le=X;continue}X=(Le-55296<<10|X-56320)+65536}else Le&&(z-=3)>-1&&Ue.push(239,191,189);if(Le=null,X<128){if((z-=1)<0)break;Ue.push(X)}else if(X<2048){if((z-=2)<0)break;Ue.push(X>>6|192,X&63|128)}else if(X<65536){if((z-=3)<0)break;Ue.push(X>>12|224,X>>6&63|128,X&63|128)}else if(X<1114112){if((z-=4)<0)break;Ue.push(X>>18|240,X>>12&63|128,X>>6&63|128,X&63|128)}else throw new Error("Invalid code point")}return Ue}function Ie(ie){const z=[];for(let X=0;X<ie.length;++X)z.push(ie.charCodeAt(X)&255);return z}function xe(ie,z){let X,pe,Le;const Ue=[];for(let We=0;We<ie.length&&!((z-=2)<0);++We)X=ie.charCodeAt(We),pe=X>>8,Le=X%256,Ue.push(Le),Ue.push(pe);return Ue}function $e(ie){return e.toByteArray(fe(ie))}function je(ie,z,X,pe){let Le;for(Le=0;Le<pe&&!(Le+X>=z.length||Le>=ie.length);++Le)z[Le+X]=ie[Le];return Le}function Be(ie,z){return ie instanceof z||ie!=null&&ie.constructor!=null&&ie.constructor.name!=null&&ie.constructor.name===z.name}function Ae(ie){return ie!==ie}const Ye=function(){const ie="0123456789abcdef",z=new Array(256);for(let X=0;X<16;++X){const pe=X*16;for(let Le=0;Le<16;++Le)z[pe+Le]=ie[X]+ie[Le]}return z}();function Xe(ie){return typeof BigInt>"u"?tt:ie}function tt(){throw new Error("BigInt not supported")}})(qr);const bt=qr.Buffer,Lbe=qr.Blob,Obe=qr.BlobOptions,IK=qr.Buffer,Dbe=qr.File,Mbe=qr.FileOptions,jbe=qr.INSPECT_MAX_BYTES,Fbe=qr.SlowBuffer,Bbe=qr.TranscodeEncoding,Ube=qr.atob,$be=qr.btoa,Hbe=qr.constants,zbe=qr.isAscii,Vbe=qr.isUtf8,Wbe=qr.kMaxLength,Gbe=qr.kStringMaxLength,qbe=qr.resolveObjectURL,Kbe=qr.transcode,Ybe=Object.freeze(Object.defineProperty({__proto__:null,Blob:Lbe,BlobOptions:Obe,Buffer:IK,File:Dbe,FileOptions:Mbe,INSPECT_MAX_BYTES:jbe,SlowBuffer:Fbe,TranscodeEncoding:Bbe,atob:Ube,btoa:$be,constants:Hbe,default:bt,isAscii:zbe,isUtf8:Vbe,kMaxLength:Wbe,kStringMaxLength:Gbe,resolveObjectURL:qbe,transcode:Kbe},Symbol.toStringTag,{value:"Module"}));var Pg={exports:{}};const Xbe=typeof bt<"u",cj=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,uj=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function RK(t,e,n){n==null&&e!==null&&typeof e=="object"&&(n=e,e=void 0),Xbe&&bt.isBuffer(t)&&(t=t.toString()),t&&t.charCodeAt(0)===65279&&(t=t.slice(1));const r=JSON.parse(t,e);if(r===null||typeof r!="object")return r;const s=n&&n.protoAction||"error",i=n&&n.constructorAction||"error";if(s==="ignore"&&i==="ignore")return r;if(s!=="ignore"&&i!=="ignore"){if(cj.test(t)===!1&&uj.test(t)===!1)return r}else if(s!=="ignore"&&i==="ignore"){if(cj.test(t)===!1)return r}else if(uj.test(t)===!1)return r;return LK(r,{protoAction:s,constructorAction:i,safe:n&&n.safe})}function LK(t,{protoAction:e="error",constructorAction:n="error",safe:r}={}){let s=[t];for(;s.length;){const i=s;s=[];for(const o of i){if(e!=="ignore"&&Object.prototype.hasOwnProperty.call(o,"__proto__")){if(r===!0)return null;if(e==="error")throw new SyntaxError("Object contains forbidden prototype property");delete o.__proto__}if(n!=="ignore"&&Object.prototype.hasOwnProperty.call(o,"constructor")&&Object.prototype.hasOwnProperty.call(o.constructor,"prototype")){if(r===!0)return null;if(n==="error")throw new SyntaxError("Object contains forbidden prototype property");delete o.constructor}for(const a in o){const l=o[a];l&&typeof l=="object"&&s.push(l)}}}return t}function JR(t,e,n){const r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return RK(t,e,n)}finally{Error.stackTraceLimit=r}}function Jbe(t,e){const n=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return RK(t,e,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=n}}Pg.exports=JR;Pg.exports.default=JR;Pg.exports.parse=JR;Pg.exports.safeParse=Jbe;Pg.exports.scan=LK;var Zbe=Pg.exports;const Xl=ao(Zbe);var Qbe=Object.defineProperty,eye=(t,e,n)=>e in t?Qbe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hx=(t,e,n)=>eye(t,typeof e!="symbol"?e+"":e,n);let dj=class extends Error{constructor(e,n){super(e),hx(this,"type"),hx(this,"field"),hx(this,"value"),hx(this,"line"),this.name="ParseError",this.type=n.type,this.field=n.field,this.value=n.value,this.line=n.line}};function mT(t){}function tye(t){const{onEvent:e=mT,onError:n=mT,onRetry:r=mT,onComment:s}=t;let i="",o=!0,a,l="",c="";function u(y){const m=o?y.replace(/^\xEF\xBB\xBF/,""):y,[b,v]=nye(`${i}${m}`);for(const _ of b)d(_);i=v,o=!1}function d(y){if(y===""){f();return}if(y.startsWith(":")){s&&s(y.slice(y.startsWith(": ")?2:1));return}const m=y.indexOf(":");if(m!==-1){const b=y.slice(0,m),v=y[m+1]===" "?2:1,_=y.slice(m+v);h(b,_,y);return}h(y,"",y)}function h(y,m,b){switch(y){case"event":c=m;break;case"data":l=`${l}${m}
`;break;case"id":a=m.includes("\0")?void 0:m;break;case"retry":/^\d+$/.test(m)?r(parseInt(m,10)):n(new dj(`Invalid \`retry\` value: "${m}"`,{type:"invalid-retry",value:m,line:b}));break;default:n(new dj(`Unknown field "${y.length>20?`${y.slice(0,20)}`:y}"`,{type:"unknown-field",field:y,value:m,line:b}));break}}function f(){l.length>0&&e({id:a,event:c||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),a=void 0,l="",c=""}function g(y={}){i&&y.consume&&d(i),a=void 0,l="",c="",i=""}return{feed:u,reset:g}}function nye(t){const e=[];let n="";const r=t.length;for(let s=0;s<r;s++){const i=t[s];i==="\r"&&t[s+1]===`
`?(e.push(n),n="",s++):i==="\r"||i===`
`?(e.push(n),n=""):n+=i}return[e,n]}let rye=class extends TransformStream{constructor({onError:e,onRetry:n,onComment:r}={}){let s;super({start(i){s=tye({onEvent:o=>{i.enqueue(o)},onError(o){e==="terminate"?i.error(o):typeof e=="function"&&e(o)},onRetry:n,onComment:r})},transform(i){s.feed(i)}})}};var sye={};function Aa(...t){return t.reduce((e,n)=>({...e,...n??{}}),{})}function Rht(t){return new ReadableStream({async pull(e){try{const{value:n,done:r}=await t.next();r?e.close():e.enqueue(n)}catch(n){e.error(n)}},cancel(){}})}function yk(t){const e={};return t.headers.forEach((n,r)=>{e[r]=n}),e}var iye=({prefix:t,size:e=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const s=NK(n,e);if(t==null)return s;if(n.includes(r))throw new fbe({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${t}${r}${s(i)}`},ba=iye();function oye(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>n!=null))}function gT(t){return t instanceof Error&&(t.name==="AbortError"||t.name==="TimeoutError")}function ZR({apiKey:t,environmentVariableName:e,apiKeyParameterName:n="apiKey",description:r}){if(typeof t=="string")return t;if(t!=null)throw new dx({message:`${r} API key must be a string.`});if(typeof An>"u")throw new dx({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(t=sye[e],t==null)throw new dx({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${e} environment variable.`});if(typeof t!="string")throw new dx({message:`${r} API key must be a string. The value of the ${e} environment variable is not a string.`});return t}var K2=Symbol.for("vercel.ai.validator");function aye(t){return{[K2]:!0,validate:t}}function lye(t){return typeof t=="object"&&t!==null&&K2 in t&&t[K2]===!0&&"validate"in t}function cye(t){return lye(t)?t:uye(t)}function uye(t){return aye(e=>{const n=t.safeParse(e);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function dye({value:t,schema:e}){const n=Y2({value:t,schema:e});if(!n.success)throw q2.wrap({value:t,cause:n.error});return n.value}function Y2({value:t,schema:e}){const n=cye(e);try{if(n.validate==null)return{success:!0,value:t};const r=n.validate(t);return r.success?r:{success:!1,error:q2.wrap({value:t,cause:r.error})}}catch(r){return{success:!1,error:q2.wrap({value:t,cause:r})}}}function hye({text:t,schema:e}){try{const n=Xl.parse(t);return e==null?n:dye({value:n,schema:e})}catch(n){throw G2.isInstance(n)||q2.isInstance(n)?n:new G2({text:t,cause:n})}}function X2({text:t,schema:e}){try{const n=Xl.parse(t);if(e==null)return{success:!0,value:n,rawValue:n};const r=Y2({value:n,schema:e});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:G2.isInstance(n)?n:new G2({text:t,cause:n})}}}function J2(t){try{return Xl.parse(t),!0}catch{return!1}}var fye=()=>globalThis.fetch,Ta=async({url:t,headers:e,body:n,failedResponseHandler:r,successfulResponseHandler:s,abortSignal:i,fetch:o})=>pye({url:t,headers:{"Content-Type":"application/json",...e},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:s,abortSignal:i,fetch:o}),pye=async({url:t,headers:e={},body:n,successfulResponseHandler:r,failedResponseHandler:s,abortSignal:i,fetch:o=fye()})=>{try{const a=await o(t,{method:"POST",headers:oye(e),body:n.content,signal:i}),l=yk(a);if(!a.ok){let c;try{c=await s({response:a,url:t,requestBodyValues:n.values})}catch(u){throw gT(u)||Nc.isInstance(u)?u:new Nc({message:"Failed to process error response",cause:u,statusCode:a.status,url:t,responseHeaders:l,requestBodyValues:n.values})}throw c.value}try{return await r({response:a,url:t,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(gT(c)||Nc.isInstance(c))?c:new Nc({message:"Failed to process successful response",cause:c,statusCode:a.status,url:t,responseHeaders:l,requestBodyValues:n.values})}}catch(a){if(gT(a))throw a;if(a instanceof TypeError&&a.message==="fetch failed"){const l=a.cause;if(l!=null)throw new Nc({message:`Cannot connect to API: ${l.message}`,cause:l,url:t,requestBodyValues:n.values,isRetryable:!0})}throw a}},QR=({errorSchema:t,errorToMessage:e,isRetryable:n})=>async({response:r,url:s,requestBodyValues:i})=>{const o=await r.text(),a=yk(r);if(o.trim()==="")return{responseHeaders:a,value:new Nc({message:r.statusText,url:s,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:o,isRetryable:n?.(r)})};try{const l=hye({text:o,schema:t});return{responseHeaders:a,value:new Nc({message:e(l),url:s,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:o,data:l,isRetryable:n?.(r,l)})}}catch{return{responseHeaders:a,value:new Nc({message:r.statusText,url:s,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:o,isRetryable:n?.(r)})}}},vk=t=>async({response:e})=>{const n=yk(e);if(e.body==null)throw new dbe({});return{responseHeaders:n,value:e.body.pipeThrough(new TextDecoderStream).pipeThrough(new rye).pipeThrough(new TransformStream({transform({data:r},s){r!=="[DONE]"&&s.enqueue(X2({text:r,schema:t}))}}))}},Uf=t=>async({response:e,url:n,requestBodyValues:r})=>{const s=await e.text(),i=X2({text:s,schema:t}),o=yk(e);if(!i.success)throw new Nc({message:"Invalid JSON response",cause:i.error,statusCode:e.status,responseHeaders:o,responseBody:s,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:mye}=globalThis;function OK(t){let e="";for(let n=0;n<t.length;n++)e+=String.fromCodePoint(t[n]);return mye(e)}function eL(t){return t?.replace(/\/$/,"")}var yn;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(yn||(yn={}));var kN;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(kN||(kN={}));const Et=yn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Sc=t=>{switch(typeof t){case"undefined":return Et.undefined;case"string":return Et.string;case"number":return isNaN(t)?Et.nan:Et.number;case"boolean":return Et.boolean;case"function":return Et.function;case"bigint":return Et.bigint;case"symbol":return Et.symbol;case"object":return Array.isArray(t)?Et.array:t===null?Et.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Et.promise:typeof Map<"u"&&t instanceof Map?Et.map:typeof Set<"u"&&t instanceof Set?Et.set:typeof Date<"u"&&t instanceof Date?Et.date:Et.object;default:return Et.unknown}},ht=yn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),gye=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class eo extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return s(this),r}static assert(e){if(!(e instanceof eo))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,yn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}eo.create=t=>new eo(t);const Km=(t,e)=>{let n;switch(t.code){case ht.invalid_type:t.received===Et.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ht.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,yn.jsonStringifyReplacer)}`;break;case ht.unrecognized_keys:n=`Unrecognized key(s) in object: ${yn.joinValues(t.keys,", ")}`;break;case ht.invalid_union:n="Invalid input";break;case ht.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${yn.joinValues(t.options)}`;break;case ht.invalid_enum_value:n=`Invalid enum value. Expected ${yn.joinValues(t.options)}, received '${t.received}'`;break;case ht.invalid_arguments:n="Invalid function arguments";break;case ht.invalid_return_type:n="Invalid function return type";break;case ht.invalid_date:n="Invalid date";break;case ht.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:yn.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ht.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ht.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ht.custom:n="Invalid input";break;case ht.invalid_intersection_types:n="Intersection results could not be merged";break;case ht.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ht.not_finite:n="Number must be finite";break;default:n=e.defaultError,yn.assertNever(t)}return{message:n}};let DK=Km;function bye(t){DK=t}function Z2(){return DK}const Q2=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let a="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...s,path:i,message:a}},yye=[];function vt(t,e){const n=Z2(),r=Q2({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Km?void 0:Km].filter(s=>!!s)});t.common.issues.push(r)}class Vs{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return $t;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const i=await s.key,o=await s.value;r.push({key:i,value:o})}return Vs.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return $t;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const $t=Object.freeze({status:"aborted"}),sm=t=>({status:"dirty",value:t}),di=t=>({status:"valid",value:t}),CN=t=>t.status==="aborted",AN=t=>t.status==="dirty",ff=t=>t.status==="valid",Hy=t=>typeof Promise<"u"&&t instanceof Promise;function eE(t,e,n,r){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function MK(t,e,n,r,s){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var Pt;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Pt||(Pt={}));var mb,gb;class Vl{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const hj=(t,e)=>{if(ff(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new eo(t.common.issues);return this._error=n,this._error}}};function Jt(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>{var l,c;const{message:u}=t;return o.code==="invalid_enum_value"?{message:u??a.defaultError}:typeof a.data>"u"?{message:(l=u??r)!==null&&l!==void 0?l:a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:(c=u??n)!==null&&c!==void 0?c:a.defaultError}},description:s}}class en{get description(){return this._def.description}_getType(e){return Sc(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Sc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Vs,ctx:{common:e.parent.common,data:e.data,parsedType:Sc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Hy(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n?.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Sc(e)},i=this._parseSync({data:e,path:s.path,parent:s});return hj(s,i)}"~validate"(e){var n,r;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Sc(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:s});return ff(i)?{value:i.value}:{issues:s.common.issues}}catch(i){!((r=(n=i?.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:s}).then(i=>ff(i)?{value:i.value}:{issues:s.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Sc(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(Hy(s)?s:Promise.resolve(s));return hj(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:ht.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Na({schema:this,typeName:pt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Ea.create(this,this._def)}nullable(){return bd.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return wa.create(this)}promise(){return Xm.create(this,this._def)}or(e){return Gy.create([this,e],this._def)}and(e){return qy.create(this,e,this._def)}transform(e){return new Na({...Jt(this._def),schema:this,typeName:pt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Zy({...Jt(this._def),innerType:this,defaultValue:n,typeName:pt.ZodDefault})}brand(){return new tL({typeName:pt.ZodBranded,type:this,...Jt(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Qy({...Jt(this._def),innerType:this,catchValue:n,typeName:pt.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return xv.create(this,e)}readonly(){return e1.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const vye=/^c[^\s-]{8,}$/i,_ye=/^[0-9a-z]+$/,xye=/^[0-9A-HJKMNP-TV-Z]{26}$/i,wye=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Eye=/^[a-z0-9_-]{21}$/i,Sye=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,kye=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Cye=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Aye="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let bT;const Tye=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Nye=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Pye=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Iye=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Rye=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Lye=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,jK="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Oye=new RegExp(`^${jK}$`);function FK(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function Dye(t){return new RegExp(`^${FK(t)}$`)}function BK(t){let e=`${jK}T${FK(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function Mye(t,e){return!!((e==="v4"||!e)&&Tye.test(t)||(e==="v6"||!e)&&Pye.test(t))}function jye(t,e){if(!Sye.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||!s.typ||!s.alg||e&&s.alg!==e)}catch{return!1}}function Fye(t,e){return!!((e==="v4"||!e)&&Nye.test(t)||(e==="v6"||!e)&&Iye.test(t))}class va extends en{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Et.string){const i=this._getOrReturnCtx(e);return vt(i,{code:ht.invalid_type,expected:Et.string,received:i.parsedType}),$t}const r=new Vs;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),vt(s,{code:ht.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),vt(s,{code:ht.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?vt(s,{code:ht.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&vt(s,{code:ht.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")Cye.test(e.data)||(s=this._getOrReturnCtx(e,s),vt(s,{validation:"email",code:ht.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")bT||(bT=new RegExp(Aye,"u")),bT.test(e.data)||(s=this._getOrReturnCtx(e,s),vt(s,{validation:"emoji",code:ht.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")wye.test(e.data)||(s=this._getOrReturnCtx(e,s),vt(s,{validation:"uuid",code:ht.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")Eye.test(e.data)||(s=this._getOrReturnCtx(e,s),vt(s,{validation:"nanoid",code:ht.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")vye.test(e.data)||(s=this._getOrReturnCtx(e,s),vt(s,{validation:"cuid",code:ht.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")_ye.test(e.data)||(s=this._getOrReturnCtx(e,s),vt(s,{validation:"cuid2",code:ht.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")xye.test(e.data)||(s=this._getOrReturnCtx(e,s),vt(s,{validation:"ulid",code:ht.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),vt(s,{validation:"url",code:ht.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),vt(s,{validation:"regex",code:ht.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),vt(s,{code:ht.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),vt(s,{code:ht.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),vt(s,{code:ht.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?BK(i).test(e.data)||(s=this._getOrReturnCtx(e,s),vt(s,{code:ht.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?Oye.test(e.data)||(s=this._getOrReturnCtx(e,s),vt(s,{code:ht.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?Dye(i).test(e.data)||(s=this._getOrReturnCtx(e,s),vt(s,{code:ht.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?kye.test(e.data)||(s=this._getOrReturnCtx(e,s),vt(s,{validation:"duration",code:ht.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?Mye(e.data,i.version)||(s=this._getOrReturnCtx(e,s),vt(s,{validation:"ip",code:ht.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?jye(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),vt(s,{validation:"jwt",code:ht.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?Fye(e.data,i.version)||(s=this._getOrReturnCtx(e,s),vt(s,{validation:"cidr",code:ht.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?Rye.test(e.data)||(s=this._getOrReturnCtx(e,s),vt(s,{validation:"base64",code:ht.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?Lye.test(e.data)||(s=this._getOrReturnCtx(e,s),vt(s,{validation:"base64url",code:ht.invalid_string,message:i.message}),r.dirty()):yn.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:ht.invalid_string,...Pt.errToObj(r)})}_addCheck(e){return new va({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Pt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Pt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Pt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Pt.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Pt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Pt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Pt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Pt.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Pt.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Pt.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Pt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Pt.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Pt.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(n=e?.offset)!==null&&n!==void 0?n:!1,local:(r=e?.local)!==null&&r!==void 0?r:!1,...Pt.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Pt.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Pt.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Pt.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,...Pt.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Pt.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Pt.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Pt.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Pt.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Pt.errToObj(n)})}nonempty(e){return this.min(1,Pt.errToObj(e))}trim(){return new va({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new va({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new va({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}va.create=t=>{var e;return new va({checks:[],typeName:pt.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Jt(t)})};function Bye(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class pd extends en{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Et.number){const i=this._getOrReturnCtx(e);return vt(i,{code:ht.invalid_type,expected:Et.number,received:i.parsedType}),$t}let r;const s=new Vs;for(const i of this._def.checks)i.kind==="int"?yn.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),vt(r,{code:ht.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),vt(r,{code:ht.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),vt(r,{code:ht.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?Bye(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),vt(r,{code:ht.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),vt(r,{code:ht.not_finite,message:i.message}),s.dirty()):yn.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Pt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Pt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Pt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Pt.toString(n))}setLimit(e,n,r,s){return new pd({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Pt.toString(s)}]})}_addCheck(e){return new pd({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Pt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Pt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Pt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Pt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Pt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Pt.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Pt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Pt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Pt.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&yn.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}pd.create=t=>new pd({checks:[],typeName:pt.ZodNumber,coerce:t?.coerce||!1,...Jt(t)});class md extends en{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Et.bigint)return this._getInvalidInput(e);let r;const s=new Vs;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),vt(r,{code:ht.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),vt(r,{code:ht.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),vt(r,{code:ht.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):yn.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return vt(n,{code:ht.invalid_type,expected:Et.bigint,received:n.parsedType}),$t}gte(e,n){return this.setLimit("min",e,!0,Pt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Pt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Pt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Pt.toString(n))}setLimit(e,n,r,s){return new md({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Pt.toString(s)}]})}_addCheck(e){return new md({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Pt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Pt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Pt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Pt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Pt.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}md.create=t=>{var e;return new md({checks:[],typeName:pt.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Jt(t)})};class zy extends en{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Et.boolean){const r=this._getOrReturnCtx(e);return vt(r,{code:ht.invalid_type,expected:Et.boolean,received:r.parsedType}),$t}return di(e.data)}}zy.create=t=>new zy({typeName:pt.ZodBoolean,coerce:t?.coerce||!1,...Jt(t)});class pf extends en{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Et.date){const i=this._getOrReturnCtx(e);return vt(i,{code:ht.invalid_type,expected:Et.date,received:i.parsedType}),$t}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return vt(i,{code:ht.invalid_date}),$t}const r=new Vs;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),vt(s,{code:ht.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),vt(s,{code:ht.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):yn.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new pf({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Pt.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Pt.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}pf.create=t=>new pf({checks:[],coerce:t?.coerce||!1,typeName:pt.ZodDate,...Jt(t)});class tE extends en{_parse(e){if(this._getType(e)!==Et.symbol){const r=this._getOrReturnCtx(e);return vt(r,{code:ht.invalid_type,expected:Et.symbol,received:r.parsedType}),$t}return di(e.data)}}tE.create=t=>new tE({typeName:pt.ZodSymbol,...Jt(t)});class Vy extends en{_parse(e){if(this._getType(e)!==Et.undefined){const r=this._getOrReturnCtx(e);return vt(r,{code:ht.invalid_type,expected:Et.undefined,received:r.parsedType}),$t}return di(e.data)}}Vy.create=t=>new Vy({typeName:pt.ZodUndefined,...Jt(t)});class Wy extends en{_parse(e){if(this._getType(e)!==Et.null){const r=this._getOrReturnCtx(e);return vt(r,{code:ht.invalid_type,expected:Et.null,received:r.parsedType}),$t}return di(e.data)}}Wy.create=t=>new Wy({typeName:pt.ZodNull,...Jt(t)});class Ym extends en{constructor(){super(...arguments),this._any=!0}_parse(e){return di(e.data)}}Ym.create=t=>new Ym({typeName:pt.ZodAny,...Jt(t)});class Xh extends en{constructor(){super(...arguments),this._unknown=!0}_parse(e){return di(e.data)}}Xh.create=t=>new Xh({typeName:pt.ZodUnknown,...Jt(t)});class Xc extends en{_parse(e){const n=this._getOrReturnCtx(e);return vt(n,{code:ht.invalid_type,expected:Et.never,received:n.parsedType}),$t}}Xc.create=t=>new Xc({typeName:pt.ZodNever,...Jt(t)});class nE extends en{_parse(e){if(this._getType(e)!==Et.undefined){const r=this._getOrReturnCtx(e);return vt(r,{code:ht.invalid_type,expected:Et.void,received:r.parsedType}),$t}return di(e.data)}}nE.create=t=>new nE({typeName:pt.ZodVoid,...Jt(t)});class wa extends en{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==Et.array)return vt(n,{code:ht.invalid_type,expected:Et.array,received:n.parsedType}),$t;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(vt(n,{code:o?ht.too_big:ht.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(vt(n,{code:ht.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(vt(n,{code:ht.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new Vl(n,o,n.path,a)))).then(o=>Vs.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new Vl(n,o,n.path,a)));return Vs.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new wa({...this._def,minLength:{value:e,message:Pt.toString(n)}})}max(e,n){return new wa({...this._def,maxLength:{value:e,message:Pt.toString(n)}})}length(e,n){return new wa({...this._def,exactLength:{value:e,message:Pt.toString(n)}})}nonempty(e){return this.min(1,e)}}wa.create=(t,e)=>new wa({type:t,minLength:null,maxLength:null,exactLength:null,typeName:pt.ZodArray,...Jt(e)});function Gp(t){if(t instanceof cr){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Ea.create(Gp(r))}return new cr({...t._def,shape:()=>e})}else return t instanceof wa?new wa({...t._def,type:Gp(t.element)}):t instanceof Ea?Ea.create(Gp(t.unwrap())):t instanceof bd?bd.create(Gp(t.unwrap())):t instanceof Wl?Wl.create(t.items.map(e=>Gp(e))):t}class cr extends en{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=yn.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Et.object){const c=this._getOrReturnCtx(e);return vt(c,{code:ht.invalid_type,expected:Et.object,received:c.parsedType}),$t}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Xc&&this._def.unknownKeys==="strip"))for(const c in s.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const u=i[c],d=s.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new Vl(s,d,s.path,c)),alwaysSet:c in s.data})}if(this._def.catchall instanceof Xc){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(c==="strict")a.length>0&&(vt(s,{code:ht.unrecognized_keys,keys:a}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const d=s.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new Vl(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const d=await u.key,h=await u.value;c.push({key:d,value:h,alwaysSet:u.alwaysSet})}return c}).then(c=>Vs.mergeObjectSync(r,c)):Vs.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return Pt.errToObj,new cr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const l=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=Pt.errToObj(e).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new cr({...this._def,unknownKeys:"strip"})}passthrough(){return new cr({...this._def,unknownKeys:"passthrough"})}extend(e){return new cr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new cr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:pt.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new cr({...this._def,catchall:e})}pick(e){const n={};return yn.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new cr({...this._def,shape:()=>n})}omit(e){const n={};return yn.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new cr({...this._def,shape:()=>n})}deepPartial(){return Gp(this)}partial(e){const n={};return yn.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new cr({...this._def,shape:()=>n})}required(e){const n={};return yn.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Ea;)i=i._def.innerType;n[r]=i}}),new cr({...this._def,shape:()=>n})}keyof(){return UK(yn.objectKeys(this.shape))}}cr.create=(t,e)=>new cr({shape:()=>t,unknownKeys:"strip",catchall:Xc.create(),typeName:pt.ZodObject,...Jt(e)});cr.strictCreate=(t,e)=>new cr({shape:()=>t,unknownKeys:"strict",catchall:Xc.create(),typeName:pt.ZodObject,...Jt(e)});cr.lazycreate=(t,e)=>new cr({shape:t,unknownKeys:"strip",catchall:Xc.create(),typeName:pt.ZodObject,...Jt(e)});class Gy extends en{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new eo(a.ctx.common.issues));return vt(n,{code:ht.invalid_union,unionErrors:o}),$t}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const l of r){const c={...n,common:{...n.common,issues:[]},parent:null},u=l._parseSync({data:n.data,path:n.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(l=>new eo(l));return vt(n,{code:ht.invalid_union,unionErrors:a}),$t}}get options(){return this._def.options}}Gy.create=(t,e)=>new Gy({options:t,typeName:pt.ZodUnion,...Jt(e)});const _c=t=>t instanceof Yy?_c(t.schema):t instanceof Na?_c(t.innerType()):t instanceof Xy?[t.value]:t instanceof gd?t.options:t instanceof Jy?yn.objectValues(t.enum):t instanceof Zy?_c(t._def.innerType):t instanceof Vy?[void 0]:t instanceof Wy?[null]:t instanceof Ea?[void 0,..._c(t.unwrap())]:t instanceof bd?[null,..._c(t.unwrap())]:t instanceof tL||t instanceof e1?_c(t.unwrap()):t instanceof Qy?_c(t._def.innerType):[];class _k extends en{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Et.object)return vt(n,{code:ht.invalid_type,expected:Et.object,received:n.parsedType}),$t;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(vt(n,{code:ht.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),$t)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=_c(i.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new _k({typeName:pt.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...Jt(r)})}}function TN(t,e){const n=Sc(t),r=Sc(e);if(t===e)return{valid:!0,data:t};if(n===Et.object&&r===Et.object){const s=yn.objectKeys(e),i=yn.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const l=TN(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===Et.array&&r===Et.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],l=TN(o,a);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}else return n===Et.date&&r===Et.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class qy extends en{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(CN(i)||CN(o))return $t;const a=TN(i.value,o.value);return a.valid?((AN(i)||AN(o))&&n.dirty(),{status:n.value,value:a.data}):(vt(r,{code:ht.invalid_intersection_types}),$t)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}qy.create=(t,e,n)=>new qy({left:t,right:e,typeName:pt.ZodIntersection,...Jt(n)});class Wl extends en{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Et.array)return vt(r,{code:ht.invalid_type,expected:Et.array,received:r.parsedType}),$t;if(r.data.length<this._def.items.length)return vt(r,{code:ht.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),$t;!this._def.rest&&r.data.length>this._def.items.length&&(vt(r,{code:ht.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new Vl(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>Vs.mergeArray(n,o)):Vs.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new Wl({...this._def,rest:e})}}Wl.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Wl({items:t,typeName:pt.ZodTuple,rest:null,...Jt(e)})};class Ky extends en{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Et.object)return vt(r,{code:ht.invalid_type,expected:Et.object,received:r.parsedType}),$t;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new Vl(r,a,r.path,a)),value:o._parse(new Vl(r,r.data[a],r.path,a)),alwaysSet:a in r.data});return r.common.async?Vs.mergeObjectAsync(n,s):Vs.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof en?new Ky({keyType:e,valueType:n,typeName:pt.ZodRecord,...Jt(r)}):new Ky({keyType:va.create(),valueType:e,typeName:pt.ZodRecord,...Jt(n)})}}class rE extends en{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Et.map)return vt(r,{code:ht.invalid_type,expected:Et.map,received:r.parsedType}),$t;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,l],c)=>({key:s._parse(new Vl(r,a,r.path,[c,"key"])),value:i._parse(new Vl(r,l,r.path,[c,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return $t;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return $t;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}}}}rE.create=(t,e,n)=>new rE({valueType:e,keyType:t,typeName:pt.ZodMap,...Jt(n)});class mf extends en{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Et.set)return vt(r,{code:ht.invalid_type,expected:Et.set,received:r.parsedType}),$t;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(vt(r,{code:ht.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(vt(r,{code:ht.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(l){const c=new Set;for(const u of l){if(u.status==="aborted")return $t;u.status==="dirty"&&n.dirty(),c.add(u.value)}return{status:n.value,value:c}}const a=[...r.data.values()].map((l,c)=>i._parse(new Vl(r,l,r.path,c)));return r.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new mf({...this._def,minSize:{value:e,message:Pt.toString(n)}})}max(e,n){return new mf({...this._def,maxSize:{value:e,message:Pt.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}mf.create=(t,e)=>new mf({valueType:t,minSize:null,maxSize:null,typeName:pt.ZodSet,...Jt(e)});class vm extends en{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Et.function)return vt(n,{code:ht.invalid_type,expected:Et.function,received:n.parsedType}),$t;function r(a,l){return Q2({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Z2(),Km].filter(c=>!!c),issueData:{code:ht.invalid_arguments,argumentsError:l}})}function s(a,l){return Q2({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Z2(),Km].filter(c=>!!c),issueData:{code:ht.invalid_return_type,returnTypeError:l}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Xm){const a=this;return di(async function(...l){const c=new eo([]),u=await a._def.args.parseAsync(l,i).catch(f=>{throw c.addIssue(r(l,f)),c}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(f=>{throw c.addIssue(s(d,f)),c})})}else{const a=this;return di(function(...l){const c=a._def.args.safeParse(l,i);if(!c.success)throw new eo([r(l,c.error)]);const u=Reflect.apply(o,this,c.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new eo([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new vm({...this._def,args:Wl.create(e).rest(Xh.create())})}returns(e){return new vm({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new vm({args:e||Wl.create([]).rest(Xh.create()),returns:n||Xh.create(),typeName:pt.ZodFunction,...Jt(r)})}}class Yy extends en{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Yy.create=(t,e)=>new Yy({getter:t,typeName:pt.ZodLazy,...Jt(e)});class Xy extends en{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return vt(n,{received:n.data,code:ht.invalid_literal,expected:this._def.value}),$t}return{status:"valid",value:e.data}}get value(){return this._def.value}}Xy.create=(t,e)=>new Xy({value:t,typeName:pt.ZodLiteral,...Jt(e)});function UK(t,e){return new gd({values:t,typeName:pt.ZodEnum,...Jt(e)})}class gd extends en{constructor(){super(...arguments),mb.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return vt(n,{expected:yn.joinValues(r),received:n.parsedType,code:ht.invalid_type}),$t}if(eE(this,mb)||MK(this,mb,new Set(this._def.values)),!eE(this,mb).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return vt(n,{received:n.data,code:ht.invalid_enum_value,options:r}),$t}return di(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return gd.create(e,{...this._def,...n})}exclude(e,n=this._def){return gd.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}mb=new WeakMap;gd.create=UK;class Jy extends en{constructor(){super(...arguments),gb.set(this,void 0)}_parse(e){const n=yn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Et.string&&r.parsedType!==Et.number){const s=yn.objectValues(n);return vt(r,{expected:yn.joinValues(s),received:r.parsedType,code:ht.invalid_type}),$t}if(eE(this,gb)||MK(this,gb,new Set(yn.getValidEnumValues(this._def.values))),!eE(this,gb).has(e.data)){const s=yn.objectValues(n);return vt(r,{received:r.data,code:ht.invalid_enum_value,options:s}),$t}return di(e.data)}get enum(){return this._def.values}}gb=new WeakMap;Jy.create=(t,e)=>new Jy({values:t,typeName:pt.ZodNativeEnum,...Jt(e)});class Xm extends en{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Et.promise&&n.common.async===!1)return vt(n,{code:ht.invalid_type,expected:Et.promise,received:n.parsedType}),$t;const r=n.parsedType===Et.promise?n.data:Promise.resolve(n.data);return di(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Xm.create=(t,e)=>new Xm({type:t,typeName:pt.ZodPromise,...Jt(e)});class Na extends en{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===pt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{vt(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return $t;const l=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return l.status==="aborted"?$t:l.status==="dirty"||n.value==="dirty"?sm(l.value):l});{if(n.value==="aborted")return $t;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?$t:a.status==="dirty"||n.value==="dirty"?sm(a.value):a}}if(s.type==="refinement"){const o=a=>{const l=s.refinement(a,i);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?$t:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?$t:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!ff(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>ff(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);yn.assertNever(s)}}Na.create=(t,e,n)=>new Na({schema:t,typeName:pt.ZodEffects,effect:e,...Jt(n)});Na.createWithPreprocess=(t,e,n)=>new Na({schema:e,effect:{type:"preprocess",transform:t},typeName:pt.ZodEffects,...Jt(n)});class Ea extends en{_parse(e){return this._getType(e)===Et.undefined?di(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ea.create=(t,e)=>new Ea({innerType:t,typeName:pt.ZodOptional,...Jt(e)});class bd extends en{_parse(e){return this._getType(e)===Et.null?di(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}bd.create=(t,e)=>new bd({innerType:t,typeName:pt.ZodNullable,...Jt(e)});class Zy extends en{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Et.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Zy.create=(t,e)=>new Zy({innerType:t,typeName:pt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Jt(e)});class Qy extends en{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Hy(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new eo(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new eo(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Qy.create=(t,e)=>new Qy({innerType:t,typeName:pt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Jt(e)});class sE extends en{_parse(e){if(this._getType(e)!==Et.nan){const r=this._getOrReturnCtx(e);return vt(r,{code:ht.invalid_type,expected:Et.nan,received:r.parsedType}),$t}return{status:"valid",value:e.data}}}sE.create=t=>new sE({typeName:pt.ZodNaN,...Jt(t)});const Uye=Symbol("zod_brand");class tL extends en{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class xv extends en{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?$t:i.status==="dirty"?(n.dirty(),sm(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?$t:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new xv({in:e,out:n,typeName:pt.ZodPipeline})}}class e1 extends en{_parse(e){const n=this._def.innerType._parse(e),r=s=>(ff(s)&&(s.value=Object.freeze(s.value)),s);return Hy(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}e1.create=(t,e)=>new e1({innerType:t,typeName:pt.ZodReadonly,...Jt(e)});function $K(t,e={},n){return t?Ym.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,l=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,c=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...c,fatal:l})}}):Ym.create()}const $ye={object:cr.lazycreate};var pt;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(pt||(pt={}));const Hye=(t,e={message:`Input not instance of ${t.name}`})=>$K(n=>n instanceof t,e),HK=va.create,zK=pd.create,zye=sE.create,Vye=md.create,VK=zy.create,Wye=pf.create,Gye=tE.create,qye=Vy.create,Kye=Wy.create,Yye=Ym.create,Xye=Xh.create,Jye=Xc.create,Zye=nE.create,Qye=wa.create,e1e=cr.create,t1e=cr.strictCreate,n1e=Gy.create,r1e=_k.create,s1e=qy.create,i1e=Wl.create,o1e=Ky.create,a1e=rE.create,l1e=mf.create,c1e=vm.create,u1e=Yy.create,d1e=Xy.create,h1e=gd.create,f1e=Jy.create,p1e=Xm.create,fj=Na.create,m1e=Ea.create,g1e=bd.create,b1e=Na.createWithPreprocess,y1e=xv.create,v1e=()=>HK().optional(),_1e=()=>zK().optional(),x1e=()=>VK().optional(),w1e={string:t=>va.create({...t,coerce:!0}),number:t=>pd.create({...t,coerce:!0}),boolean:t=>zy.create({...t,coerce:!0}),bigint:t=>md.create({...t,coerce:!0}),date:t=>pf.create({...t,coerce:!0})},E1e=$t;var q=Object.freeze({__proto__:null,defaultErrorMap:Km,setErrorMap:bye,getErrorMap:Z2,makeIssue:Q2,EMPTY_PATH:yye,addIssueToContext:vt,ParseStatus:Vs,INVALID:$t,DIRTY:sm,OK:di,isAborted:CN,isDirty:AN,isValid:ff,isAsync:Hy,get util(){return yn},get objectUtil(){return kN},ZodParsedType:Et,getParsedType:Sc,ZodType:en,datetimeRegex:BK,ZodString:va,ZodNumber:pd,ZodBigInt:md,ZodBoolean:zy,ZodDate:pf,ZodSymbol:tE,ZodUndefined:Vy,ZodNull:Wy,ZodAny:Ym,ZodUnknown:Xh,ZodNever:Xc,ZodVoid:nE,ZodArray:wa,ZodObject:cr,ZodUnion:Gy,ZodDiscriminatedUnion:_k,ZodIntersection:qy,ZodTuple:Wl,ZodRecord:Ky,ZodMap:rE,ZodSet:mf,ZodFunction:vm,ZodLazy:Yy,ZodLiteral:Xy,ZodEnum:gd,ZodNativeEnum:Jy,ZodPromise:Xm,ZodEffects:Na,ZodTransformer:Na,ZodOptional:Ea,ZodNullable:bd,ZodDefault:Zy,ZodCatch:Qy,ZodNaN:sE,BRAND:Uye,ZodBranded:tL,ZodPipeline:xv,ZodReadonly:e1,custom:$K,Schema:en,ZodSchema:en,late:$ye,get ZodFirstPartyTypeKind(){return pt},coerce:w1e,any:Yye,array:Qye,bigint:Vye,boolean:VK,date:Wye,discriminatedUnion:r1e,effect:fj,enum:h1e,function:c1e,instanceof:Hye,intersection:s1e,lazy:u1e,literal:d1e,map:a1e,nan:zye,nativeEnum:f1e,never:Jye,null:Kye,nullable:g1e,number:zK,object:e1e,oboolean:x1e,onumber:_1e,optional:m1e,ostring:v1e,pipeline:y1e,preprocess:b1e,promise:p1e,record:o1e,set:l1e,strictObject:t1e,string:HK,symbol:Gye,transformer:fj,tuple:i1e,undefined:qye,union:n1e,unknown:Xye,void:Zye,NEVER:E1e,ZodIssueCode:ht,quotelessJson:gye,ZodError:eo});function S1e({prompt:t,useLegacyFunctionCalling:e=!1,systemMessageMode:n="system"}){const r=[];for(const{role:s,content:i}of t)switch(s){case"system":{switch(n){case"system":{r.push({role:"system",content:i});break}case"developer":{r.push({role:"developer",content:i});break}case"remove":break;default:{const o=n;throw new Error(`Unsupported system message mode: ${o}`)}}break}case"user":{if(i.length===1&&i[0].type==="text"){r.push({role:"user",content:i[0].text});break}r.push({role:"user",content:i.map(o=>{var a,l,c;switch(o.type){case"text":return{type:"text",text:o.text};case"image":return{type:"image_url",image_url:{url:o.image instanceof URL?o.image.toString():`data:${(a=o.mimeType)!=null?a:"image/jpeg"};base64,${OK(o.image)}`,detail:(c=(l=o.providerMetadata)==null?void 0:l.openai)==null?void 0:c.imageDetail}};case"file":{if(o.data instanceof URL)throw new vr({functionality:"'File content parts with URL data' functionality not supported."});switch(o.mimeType){case"audio/wav":return{type:"input_audio",input_audio:{data:o.data,format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:o.data,format:"mp3"}};default:throw new vr({functionality:`File content part type ${o.mimeType} in user messages`})}}}})});break}case"assistant":{let o="";const a=[];for(const l of i)switch(l.type){case"text":{o+=l.text;break}case"tool-call":{a.push({id:l.toolCallId,type:"function",function:{name:l.toolName,arguments:JSON.stringify(l.args)}});break}default:{const c=l;throw new Error(`Unsupported part: ${c}`)}}if(e){if(a.length>1)throw new vr({functionality:"useLegacyFunctionCalling with multiple tool calls in one message"});r.push({role:"assistant",content:o,function_call:a.length>0?a[0].function:void 0})}else r.push({role:"assistant",content:o,tool_calls:a.length>0?a:void 0});break}case"tool":{for(const o of i)e?r.push({role:"function",name:o.toolName,content:JSON.stringify(o.result)}):r.push({role:"tool",tool_call_id:o.toolCallId,content:JSON.stringify(o.result)});break}default:{const o=s;throw new Error(`Unsupported role: ${o}`)}}return r}function pj(t){var e,n;return(n=(e=t?.content)==null?void 0:e.map(({token:r,logprob:s,top_logprobs:i})=>({token:r,logprob:s,topLogprobs:i?i.map(({token:o,logprob:a})=>({token:o,logprob:a})):[]})))!=null?n:void 0}function iE(t){switch(t){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var nL=q.object({error:q.object({message:q.string(),type:q.string().nullish(),param:q.any().nullish(),code:q.union([q.string(),q.number()]).nullish()})}),Jm=QR({errorSchema:nL,errorToMessage:t=>t.error.message});function oE({id:t,model:e,created:n}){return{id:t??void 0,modelId:e??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function k1e({mode:t,useLegacyFunctionCalling:e=!1,structuredOutputs:n}){var r;const s=(r=t.tools)!=null&&r.length?t.tools:void 0,i=[];if(s==null)return{tools:void 0,tool_choice:void 0,toolWarnings:i};const o=t.toolChoice;if(e){const c=[];for(const d of s)d.type==="provider-defined"?i.push({type:"unsupported-tool",tool:d}):c.push({name:d.name,description:d.description,parameters:d.parameters});if(o==null)return{functions:c,function_call:void 0,toolWarnings:i};switch(o.type){case"auto":case"none":case void 0:return{functions:c,function_call:void 0,toolWarnings:i};case"required":throw new vr({functionality:"useLegacyFunctionCalling and toolChoice: required"});default:return{functions:c,function_call:{name:o.toolName},toolWarnings:i}}}const a=[];for(const c of s)c.type==="provider-defined"?i.push({type:"unsupported-tool",tool:c}):a.push({type:"function",function:{name:c.name,description:c.description,parameters:c.parameters,strict:n?!0:void 0}});if(o==null)return{tools:a,tool_choice:void 0,toolWarnings:i};const l=o.type;switch(l){case"auto":case"none":case"required":return{tools:a,tool_choice:l,toolWarnings:i};case"tool":return{tools:a,tool_choice:{type:"function",function:{name:o.toolName}},toolWarnings:i};default:{const c=l;throw new vr({functionality:`Unsupported tool choice type: ${c}`})}}}var C1e=class{constructor(t,e,n){this.specificationVersion="v1",this.modelId=t,this.settings=e,this.config=n}get supportsStructuredOutputs(){var t;return(t=this.settings.structuredOutputs)!=null?t:aE(this.modelId)}get defaultObjectGenerationMode(){return N1e(this.modelId)?"tool":this.supportsStructuredOutputs?"json":"tool"}get provider(){return this.config.provider}get supportsImageUrls(){return!this.settings.downloadImages}getArgs({mode:t,prompt:e,maxTokens:n,temperature:r,topP:s,topK:i,frequencyPenalty:o,presencePenalty:a,stopSequences:l,responseFormat:c,seed:u,providerMetadata:d}){var h,f,g,y,m,b,v,_;const E=t.type,w=[];i!=null&&w.push({type:"unsupported-setting",setting:"topK"}),c?.type==="json"&&c.schema!=null&&!this.supportsStructuredOutputs&&w.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const S=this.settings.useLegacyFunctionCalling;if(S&&this.settings.parallelToolCalls===!0)throw new vr({functionality:"useLegacyFunctionCalling with parallelToolCalls"});if(S&&this.supportsStructuredOutputs)throw new vr({functionality:"structuredOutputs with useLegacyFunctionCalling"});mj(this.modelId)==="remove"&&e.some(x=>x.role==="system")&&w.push({type:"other",message:"system messages are removed for this model"});const k={model:this.modelId,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:s,frequency_penalty:o,presence_penalty:a,response_format:c?.type==="json"?this.supportsStructuredOutputs&&c.schema!=null?{type:"json_schema",json_schema:{schema:c.schema,strict:!0,name:(h=c.name)!=null?h:"response",description:c.description}}:{type:"json_object"}:void 0,stop:l,seed:u,max_completion_tokens:(f=d?.openai)==null?void 0:f.maxCompletionTokens,store:(g=d?.openai)==null?void 0:g.store,metadata:(y=d?.openai)==null?void 0:y.metadata,prediction:(m=d?.openai)==null?void 0:m.prediction,reasoning_effort:(v=(b=d?.openai)==null?void 0:b.reasoningEffort)!=null?v:this.settings.reasoningEffort,messages:S1e({prompt:e,useLegacyFunctionCalling:S,systemMessageMode:mj(this.modelId)})};switch(aE(this.modelId)&&(k.temperature!=null&&(k.temperature=void 0,w.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),k.top_p!=null&&(k.top_p=void 0,w.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),k.frequency_penalty!=null&&(k.frequency_penalty=void 0,w.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),k.presence_penalty!=null&&(k.presence_penalty=void 0,w.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),k.logit_bias!=null&&(k.logit_bias=void 0,w.push({type:"other",message:"logitBias is not supported for reasoning models"})),k.logprobs!=null&&(k.logprobs=void 0,w.push({type:"other",message:"logprobs is not supported for reasoning models"})),k.top_logprobs!=null&&(k.top_logprobs=void 0,w.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),k.max_tokens!=null&&(k.max_completion_tokens==null&&(k.max_completion_tokens=k.max_tokens),k.max_tokens=void 0)),E){case"regular":{const{tools:x,tool_choice:I,functions:R,function_call:C,toolWarnings:N}=k1e({mode:t,useLegacyFunctionCalling:S,structuredOutputs:this.supportsStructuredOutputs});return{args:{...k,tools:x,tool_choice:I,functions:R,function_call:C},warnings:[...w,...N]}}case"object-json":return{args:{...k,response_format:this.supportsStructuredOutputs&&t.schema!=null?{type:"json_schema",json_schema:{schema:t.schema,strict:!0,name:(_=t.name)!=null?_:"response",description:t.description}}:{type:"json_object"}},warnings:w};case"object-tool":return{args:S?{...k,function_call:{name:t.tool.name},functions:[{name:t.tool.name,description:t.tool.description,parameters:t.tool.parameters}]}:{...k,tool_choice:{type:"function",function:{name:t.tool.name}},tools:[{type:"function",function:{name:t.tool.name,description:t.tool.description,parameters:t.tool.parameters,strict:this.supportsStructuredOutputs?!0:void 0}}]},warnings:w};default:{const x=E;throw new Error(`Unsupported type: ${x}`)}}}async doGenerate(t){var e,n,r,s,i,o,a,l;const{args:c,warnings:u}=this.getArgs(t),{responseHeaders:d,value:h}=await Ta({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Aa(this.config.headers(),t.headers),body:c,failedResponseHandler:Jm,successfulResponseHandler:Uf(A1e),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:f,...g}=c,y=h.choices[0],m=(e=h.usage)==null?void 0:e.completion_tokens_details,b=(n=h.usage)==null?void 0:n.prompt_tokens_details,v={openai:{}};return m?.reasoning_tokens!=null&&(v.openai.reasoningTokens=m?.reasoning_tokens),m?.accepted_prediction_tokens!=null&&(v.openai.acceptedPredictionTokens=m?.accepted_prediction_tokens),m?.rejected_prediction_tokens!=null&&(v.openai.rejectedPredictionTokens=m?.rejected_prediction_tokens),b?.cached_tokens!=null&&(v.openai.cachedPromptTokens=b?.cached_tokens),{text:(r=y.message.content)!=null?r:void 0,toolCalls:this.settings.useLegacyFunctionCalling&&y.message.function_call?[{toolCallType:"function",toolCallId:ba(),toolName:y.message.function_call.name,args:y.message.function_call.arguments}]:(s=y.message.tool_calls)==null?void 0:s.map(_=>{var E;return{toolCallType:"function",toolCallId:(E=_.id)!=null?E:ba(),toolName:_.function.name,args:_.function.arguments}}),finishReason:iE(y.finish_reason),usage:{promptTokens:(o=(i=h.usage)==null?void 0:i.prompt_tokens)!=null?o:NaN,completionTokens:(l=(a=h.usage)==null?void 0:a.completion_tokens)!=null?l:NaN},rawCall:{rawPrompt:f,rawSettings:g},rawResponse:{headers:d},request:{body:JSON.stringify(c)},response:oE(h),warnings:u,logprobs:pj(y.logprobs),providerMetadata:v}}async doStream(t){var e;if((e=this.settings.simulateStreaming)!=null?e:P1e(this.modelId)){const m=await this.doGenerate(t);return{stream:new ReadableStream({start(v){if(v.enqueue({type:"response-metadata",...m.response}),m.text&&v.enqueue({type:"text-delta",textDelta:m.text}),m.toolCalls)for(const _ of m.toolCalls)v.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:_.toolCallId,toolName:_.toolName,argsTextDelta:_.args}),v.enqueue({type:"tool-call",..._});v.enqueue({type:"finish",finishReason:m.finishReason,usage:m.usage,logprobs:m.logprobs,providerMetadata:m.providerMetadata}),v.close()}}),rawCall:m.rawCall,rawResponse:m.rawResponse,warnings:m.warnings}}const{args:n,warnings:r}=this.getArgs(t),s={...n,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:i,value:o}=await Ta({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Aa(this.config.headers(),t.headers),body:s,failedResponseHandler:Jm,successfulResponseHandler:vk(T1e),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:a,...l}=n,c=[];let u="unknown",d={promptTokens:void 0,completionTokens:void 0},h,f=!0;const{useLegacyFunctionCalling:g}=this.settings,y={openai:{}};return{stream:o.pipeThrough(new TransformStream({transform(m,b){var v,_,E,w,S,k,x,I,R,C,N,O;if(!m.success){u="error",b.enqueue({type:"error",error:m.error});return}const P=m.value;if("error"in P){u="error",b.enqueue({type:"error",error:P.error});return}if(f&&(f=!1,b.enqueue({type:"response-metadata",...oE(P)})),P.usage!=null){const{prompt_tokens:M,completion_tokens:F,prompt_tokens_details:G,completion_tokens_details:D}=P.usage;d={promptTokens:M??void 0,completionTokens:F??void 0},D?.reasoning_tokens!=null&&(y.openai.reasoningTokens=D?.reasoning_tokens),D?.accepted_prediction_tokens!=null&&(y.openai.acceptedPredictionTokens=D?.accepted_prediction_tokens),D?.rejected_prediction_tokens!=null&&(y.openai.rejectedPredictionTokens=D?.rejected_prediction_tokens),G?.cached_tokens!=null&&(y.openai.cachedPromptTokens=G?.cached_tokens)}const $=P.choices[0];if($?.finish_reason!=null&&(u=iE($.finish_reason)),$?.delta==null)return;const ee=$.delta;ee.content!=null&&b.enqueue({type:"text-delta",textDelta:ee.content});const J=pj($?.logprobs);J?.length&&(h===void 0&&(h=[]),h.push(...J));const Z=g&&ee.function_call!=null?[{type:"function",id:ba(),function:ee.function_call,index:0}]:ee.tool_calls;if(Z!=null)for(const M of Z){const F=M.index;if(c[F]==null){if(M.type!=="function")throw new ym({data:M,message:"Expected 'function' type."});if(M.id==null)throw new ym({data:M,message:"Expected 'id' to be a string."});if(((v=M.function)==null?void 0:v.name)==null)throw new ym({data:M,message:"Expected 'function.name' to be a string."});c[F]={id:M.id,type:"function",function:{name:M.function.name,arguments:(_=M.function.arguments)!=null?_:""},hasFinished:!1};const D=c[F];((E=D.function)==null?void 0:E.name)!=null&&((w=D.function)==null?void 0:w.arguments)!=null&&(D.function.arguments.length>0&&b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:D.id,toolName:D.function.name,argsTextDelta:D.function.arguments}),J2(D.function.arguments)&&(b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(S=D.id)!=null?S:ba(),toolName:D.function.name,args:D.function.arguments}),D.hasFinished=!0));continue}const G=c[F];G.hasFinished||(((k=M.function)==null?void 0:k.arguments)!=null&&(G.function.arguments+=(I=(x=M.function)==null?void 0:x.arguments)!=null?I:""),b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:G.id,toolName:G.function.name,argsTextDelta:(R=M.function.arguments)!=null?R:""}),((C=G.function)==null?void 0:C.name)!=null&&((N=G.function)==null?void 0:N.arguments)!=null&&J2(G.function.arguments)&&(b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(O=G.id)!=null?O:ba(),toolName:G.function.name,args:G.function.arguments}),G.hasFinished=!0))}},flush(m){var b,v;m.enqueue({type:"finish",finishReason:u,logprobs:h,usage:{promptTokens:(b=d.promptTokens)!=null?b:NaN,completionTokens:(v=d.completionTokens)!=null?v:NaN},...y!=null?{providerMetadata:y}:{}})}})),rawCall:{rawPrompt:a,rawSettings:l},rawResponse:{headers:i},request:{body:JSON.stringify(s)},warnings:r}}},WK=q.object({prompt_tokens:q.number().nullish(),completion_tokens:q.number().nullish(),prompt_tokens_details:q.object({cached_tokens:q.number().nullish()}).nullish(),completion_tokens_details:q.object({reasoning_tokens:q.number().nullish(),accepted_prediction_tokens:q.number().nullish(),rejected_prediction_tokens:q.number().nullish()}).nullish()}).nullish(),A1e=q.object({id:q.string().nullish(),created:q.number().nullish(),model:q.string().nullish(),choices:q.array(q.object({message:q.object({role:q.literal("assistant").nullish(),content:q.string().nullish(),function_call:q.object({arguments:q.string(),name:q.string()}).nullish(),tool_calls:q.array(q.object({id:q.string().nullish(),type:q.literal("function"),function:q.object({name:q.string(),arguments:q.string()})})).nullish()}),index:q.number(),logprobs:q.object({content:q.array(q.object({token:q.string(),logprob:q.number(),top_logprobs:q.array(q.object({token:q.string(),logprob:q.number()}))})).nullable()}).nullish(),finish_reason:q.string().nullish()})),usage:WK}),T1e=q.union([q.object({id:q.string().nullish(),created:q.number().nullish(),model:q.string().nullish(),choices:q.array(q.object({delta:q.object({role:q.enum(["assistant"]).nullish(),content:q.string().nullish(),function_call:q.object({name:q.string().optional(),arguments:q.string().optional()}).nullish(),tool_calls:q.array(q.object({index:q.number(),id:q.string().nullish(),type:q.literal("function").optional(),function:q.object({name:q.string().nullish(),arguments:q.string().nullish()})})).nullish()}).nullish(),logprobs:q.object({content:q.array(q.object({token:q.string(),logprob:q.number(),top_logprobs:q.array(q.object({token:q.string(),logprob:q.number()}))})).nullable()}).nullish(),finish_reason:q.string().nullable().optional(),index:q.number()})),usage:WK}),nL]);function aE(t){return t==="o1"||t.startsWith("o1-")||t==="o3"||t.startsWith("o3-")}function N1e(t){return t.startsWith("gpt-4o-audio-preview")}function mj(t){var e,n;return aE(t)?(n=(e=GK[t])==null?void 0:e.systemMessageMode)!=null?n:"developer":"system"}function P1e(t){var e,n;return aE(t)?(n=(e=GK[t])==null?void 0:e.simulateStreamingByDefault)!=null?n:!0:!1}var GK={"o1-mini":{systemMessageMode:"remove",simulateStreamingByDefault:!1},"o1-mini-2024-09-12":{systemMessageMode:"remove",simulateStreamingByDefault:!1},"o1-preview":{systemMessageMode:"remove",simulateStreamingByDefault:!1},"o1-preview-2024-09-12":{systemMessageMode:"remove",simulateStreamingByDefault:!1},"o3-mini":{systemMessageMode:"developer",simulateStreamingByDefault:!1},"o3-mini-2025-01-31":{systemMessageMode:"developer",simulateStreamingByDefault:!1}};function I1e({prompt:t,inputFormat:e,user:n="user",assistant:r="assistant"}){if(e==="prompt"&&t.length===1&&t[0].role==="user"&&t[0].content.length===1&&t[0].content[0].type==="text")return{prompt:t[0].content[0].text};let s="";t[0].role==="system"&&(s+=`${t[0].content}

`,t=t.slice(1));for(const{role:i,content:o}of t)switch(i){case"system":throw new mbe({message:"Unexpected system message in prompt: ${content}",prompt:t});case"user":{const a=o.map(l=>{switch(l.type){case"text":return l.text;case"image":throw new vr({functionality:"images"})}}).join("");s+=`${n}:
${a}

`;break}case"assistant":{const a=o.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new vr({functionality:"tool-call messages"})}}).join("");s+=`${r}:
${a}

`;break}case"tool":throw new vr({functionality:"tool messages"});default:{const a=i;throw new Error(`Unsupported role: ${a}`)}}return s+=`${r}:
`,{prompt:s,stopSequences:[`
${n}:`]}}function gj(t){return t?.tokens.map((e,n)=>({token:e,logprob:t.token_logprobs[n],topLogprobs:t.top_logprobs?Object.entries(t.top_logprobs[n]).map(([r,s])=>({token:r,logprob:s})):[]}))}var R1e=class{constructor(t,e,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=t,this.settings=e,this.config=n}get provider(){return this.config.provider}getArgs({mode:t,inputFormat:e,prompt:n,maxTokens:r,temperature:s,topP:i,topK:o,frequencyPenalty:a,presencePenalty:l,stopSequences:c,responseFormat:u,seed:d}){var h;const f=t.type,g=[];o!=null&&g.push({type:"unsupported-setting",setting:"topK"}),u!=null&&u.type!=="text"&&g.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:y,stopSequences:m}=I1e({prompt:n,inputFormat:e}),b=[...m??[],...c??[]],v={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:s,top_p:i,frequency_penalty:a,presence_penalty:l,seed:d,prompt:y,stop:b.length>0?b:void 0};switch(f){case"regular":{if((h=t.tools)!=null&&h.length)throw new vr({functionality:"tools"});if(t.toolChoice)throw new vr({functionality:"toolChoice"});return{args:v,warnings:g}}case"object-json":throw new vr({functionality:"object-json mode"});case"object-tool":throw new vr({functionality:"object-tool mode"});default:{const _=f;throw new Error(`Unsupported type: ${_}`)}}}async doGenerate(t){const{args:e,warnings:n}=this.getArgs(t),{responseHeaders:r,value:s}=await Ta({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Aa(this.config.headers(),t.headers),body:e,failedResponseHandler:Jm,successfulResponseHandler:Uf(L1e),abortSignal:t.abortSignal,fetch:this.config.fetch}),{prompt:i,...o}=e,a=s.choices[0];return{text:a.text,usage:{promptTokens:s.usage.prompt_tokens,completionTokens:s.usage.completion_tokens},finishReason:iE(a.finish_reason),logprobs:gj(a.logprobs),rawCall:{rawPrompt:i,rawSettings:o},rawResponse:{headers:r},response:oE(s),warnings:n,request:{body:JSON.stringify(e)}}}async doStream(t){const{args:e,warnings:n}=this.getArgs(t),r={...e,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:s,value:i}=await Ta({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Aa(this.config.headers(),t.headers),body:r,failedResponseHandler:Jm,successfulResponseHandler:vk(O1e),abortSignal:t.abortSignal,fetch:this.config.fetch}),{prompt:o,...a}=e;let l="unknown",c={promptTokens:Number.NaN,completionTokens:Number.NaN},u,d=!0;return{stream:i.pipeThrough(new TransformStream({transform(h,f){if(!h.success){l="error",f.enqueue({type:"error",error:h.error});return}const g=h.value;if("error"in g){l="error",f.enqueue({type:"error",error:g.error});return}d&&(d=!1,f.enqueue({type:"response-metadata",...oE(g)})),g.usage!=null&&(c={promptTokens:g.usage.prompt_tokens,completionTokens:g.usage.completion_tokens});const y=g.choices[0];y?.finish_reason!=null&&(l=iE(y.finish_reason)),y?.text!=null&&f.enqueue({type:"text-delta",textDelta:y.text});const m=gj(y?.logprobs);m?.length&&(u===void 0&&(u=[]),u.push(...m))},flush(h){h.enqueue({type:"finish",finishReason:l,logprobs:u,usage:c})}})),rawCall:{rawPrompt:o,rawSettings:a},rawResponse:{headers:s},warnings:n,request:{body:JSON.stringify(r)}}}},L1e=q.object({id:q.string().nullish(),created:q.number().nullish(),model:q.string().nullish(),choices:q.array(q.object({text:q.string(),finish_reason:q.string(),logprobs:q.object({tokens:q.array(q.string()),token_logprobs:q.array(q.number()),top_logprobs:q.array(q.record(q.string(),q.number())).nullable()}).nullish()})),usage:q.object({prompt_tokens:q.number(),completion_tokens:q.number()})}),O1e=q.union([q.object({id:q.string().nullish(),created:q.number().nullish(),model:q.string().nullish(),choices:q.array(q.object({text:q.string(),finish_reason:q.string().nullish(),index:q.number(),logprobs:q.object({tokens:q.array(q.string()),token_logprobs:q.array(q.number()),top_logprobs:q.array(q.record(q.string(),q.number())).nullable()}).nullish()})),usage:q.object({prompt_tokens:q.number(),completion_tokens:q.number()}).nullish()}),nL]),D1e=class{constructor(t,e,n){this.specificationVersion="v1",this.modelId=t,this.settings=e,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var t;return(t=this.settings.maxEmbeddingsPerCall)!=null?t:2048}get supportsParallelCalls(){var t;return(t=this.settings.supportsParallelCalls)!=null?t:!0}async doEmbed({values:t,headers:e,abortSignal:n}){if(t.length>this.maxEmbeddingsPerCall)throw new wK({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:t});const{responseHeaders:r,value:s}=await Ta({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:Aa(this.config.headers(),e),body:{model:this.modelId,input:t,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:Jm,successfulResponseHandler:Uf(M1e),abortSignal:n,fetch:this.config.fetch});return{embeddings:s.data.map(i=>i.embedding),usage:s.usage?{tokens:s.usage.prompt_tokens}:void 0,rawResponse:{headers:r}}}},M1e=q.object({data:q.array(q.object({embedding:q.array(q.number())})),usage:q.object({prompt_tokens:q.number()}).nullish()}),j1e={"dall-e-3":1,"dall-e-2":10},F1e=class{constructor(t,e,n){this.modelId=t,this.settings=e,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var t,e;return(e=(t=this.settings.maxImagesPerCall)!=null?t:j1e[this.modelId])!=null?e:1}get provider(){return this.config.provider}async doGenerate({prompt:t,n:e,size:n,aspectRatio:r,seed:s,providerOptions:i,headers:o,abortSignal:a}){var l,c,u,d;const h=[];r!=null&&h.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),s!=null&&h.push({type:"unsupported-setting",setting:"seed"});const f=(u=(c=(l=this.config._internal)==null?void 0:l.currentDate)==null?void 0:c.call(l))!=null?u:new Date,{value:g,responseHeaders:y}=await Ta({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:Aa(this.config.headers(),o),body:{model:this.modelId,prompt:t,n:e,size:n,...(d=i.openai)!=null?d:{},response_format:"b64_json"},failedResponseHandler:Jm,successfulResponseHandler:Uf(B1e),abortSignal:a,fetch:this.config.fetch});return{images:g.data.map(m=>m.b64_json),warnings:h,response:{timestamp:f,modelId:this.modelId,headers:y}}}},B1e=q.object({data:q.array(q.object({b64_json:q.string()}))});function Jl(t={}){var e,n,r;const s=(e=eL(t.baseURL))!=null?e:"https://api.openai.com/v1",i=(n=t.compatibility)!=null?n:"compatible",o=(r=t.name)!=null?r:"openai",a=()=>({Authorization:`Bearer ${ZR({apiKey:t.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":t.organization,"OpenAI-Project":t.project,...t.headers}),l=(g,y={})=>new C1e(g,y,{provider:`${o}.chat`,url:({path:m})=>`${s}${m}`,headers:a,compatibility:i,fetch:t.fetch}),c=(g,y={})=>new R1e(g,y,{provider:`${o}.completion`,url:({path:m})=>`${s}${m}`,headers:a,compatibility:i,fetch:t.fetch}),u=(g,y={})=>new D1e(g,y,{provider:`${o}.embedding`,url:({path:m})=>`${s}${m}`,headers:a,fetch:t.fetch}),d=(g,y={})=>new F1e(g,y,{provider:`${o}.image`,url:({path:m})=>`${s}${m}`,headers:a,fetch:t.fetch}),h=(g,y)=>{if(new.target)throw new Error("The OpenAI model function cannot be called with the new keyword.");return g==="gpt-3.5-turbo-instruct"?c(g,y):l(g,y)},f=function(g,y){return h(g,y)};return f.languageModel=h,f.chat=l,f.completion=c,f.embedding=u,f.textEmbedding=u,f.textEmbeddingModel=u,f.image=d,f.imageModel=d,f}Jl({compatibility:"strict"});class Kr{cachedDynamicModels;getApiKeyLink;labelForGetApiKey;icon;getProviderBaseUrlAndKey(e){const{apiKeys:n,providerSettings:r,serverEnv:s,defaultBaseUrlKey:i,defaultApiTokenKey:o}=e;let a=r?.baseUrl;const l=Ah.getInstance();a&&a.length==0&&(a=void 0);const c=this.config.baseUrlKey||i;let u=a||s?.[c]||An?.env?.[c]||l.env?.[c]||this.config.baseUrl;u&&u.endsWith("/")&&(u=u.slice(0,-1));const d=this.config.apiTokenKey||o,h=n?.[this.name]||s?.[d]||An?.env?.[d]||l.env?.[d];return{baseUrl:u,apiKey:h}}getModelsFromCache(e){if(!this.cachedDynamicModels)return null;const n=this.cachedDynamicModels.cacheId,r=this.getDynamicModelsCacheKey(e);return n!==r?(this.cachedDynamicModels=void 0,null):this.cachedDynamicModels.models}getDynamicModelsCacheKey(e){return JSON.stringify({apiKeys:e.apiKeys?.[this.name],providerSettings:e.providerSettings?.[this.name],serverEnv:e.serverEnv})}storeDynamicModels(e,n){const r=this.getDynamicModelsCacheKey(e);this.cachedDynamicModels={cacheId:r,models:n}}}function qK(t,e,n){return Jl({baseURL:t,apiKey:e})(n)}let KK=(t,e=21)=>(n=e)=>{let r="",s=n;for(;s--;)r+=t[Math.random()*t.length|0];return r};var YK="vercel.ai.error",U1e=Symbol.for(YK),XK,$1e=class JK extends Error{constructor({name:e,message:n,cause:r}){super(n),this[XK]=!0,this.name=e,this.cause=r}static isInstance(e){return JK.hasMarker(e,YK)}static hasMarker(e,n){const r=Symbol.for(n);return e!=null&&typeof e=="object"&&r in e&&typeof e[r]=="boolean"&&e[r]===!0}toJSON(){return{name:this.name,message:this.message}}};XK=U1e;var Vo=$1e,NN="AI_APICallError",ZK=`vercel.ai.error.${NN}`,H1e=Symbol.for(ZK),QK,Pc=class extends Vo{constructor({message:e,url:n,requestBodyValues:r,statusCode:s,responseHeaders:i,responseBody:o,cause:a,isRetryable:l=s!=null&&(s===408||s===409||s===429||s>=500),data:c}){super({name:NN,message:e,cause:a}),this[QK]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=s,this.responseHeaders=i,this.responseBody=o,this.isRetryable=l,this.data=c}static isInstance(e){return Vo.hasMarker(e,ZK)}static isAPICallError(e){return e instanceof Error&&e.name===NN&&typeof e.url=="string"&&typeof e.requestBodyValues=="object"&&(e.statusCode==null||typeof e.statusCode=="number")&&(e.responseHeaders==null||typeof e.responseHeaders=="object")&&(e.responseBody==null||typeof e.responseBody=="string")&&(e.cause==null||typeof e.cause=="object")&&typeof e.isRetryable=="boolean"&&(e.data==null||typeof e.data=="object")}toJSON(){return{name:this.name,message:this.message,url:this.url,requestBodyValues:this.requestBodyValues,statusCode:this.statusCode,responseHeaders:this.responseHeaders,responseBody:this.responseBody,cause:this.cause,isRetryable:this.isRetryable,data:this.data}}};QK=H1e;var PN="AI_EmptyResponseBodyError",eY=`vercel.ai.error.${PN}`,z1e=Symbol.for(eY),tY,V1e=class extends Vo{constructor({message:e="Empty response body"}={}){super({name:PN,message:e}),this[tY]=!0}static isInstance(e){return Vo.hasMarker(e,eY)}static isEmptyResponseBodyError(e){return e instanceof Error&&e.name===PN}};tY=z1e;function nY(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}var IN="AI_JSONParseError",rY=`vercel.ai.error.${IN}`,W1e=Symbol.for(rY),sY,lE=class extends Vo{constructor({text:e,cause:n}){super({name:IN,message:`JSON parsing failed: Text: ${e}.
Error message: ${nY(n)}`,cause:n}),this[sY]=!0,this.text=e}static isInstance(e){return Vo.hasMarker(e,rY)}static isJSONParseError(e){return e instanceof Error&&e.name===IN&&typeof e.text=="string"&&typeof e.cause=="string"}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,valueText:this.text}}};sY=W1e;var RN="AI_LoadAPIKeyError",iY=`vercel.ai.error.${RN}`,G1e=Symbol.for(iY),oY,fx=class extends Vo{constructor({message:e}){super({name:RN,message:e}),this[oY]=!0}static isInstance(e){return Vo.hasMarker(e,iY)}static isLoadAPIKeyError(e){return e instanceof Error&&e.name===RN}};oY=G1e;var LN="AI_TypeValidationError",aY=`vercel.ai.error.${LN}`,q1e=Symbol.for(aY),lY,zb=class extends Vo{constructor({value:e,cause:n}){super({name:LN,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${nY(n)}`,cause:n}),this[lY]=!0,this.value=e}static isInstance(e){return Vo.hasMarker(e,aY)}static isTypeValidationError(e){return e instanceof Error&&e.name===LN}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,value:this.value}}};lY=q1e;var ON="AI_UnsupportedFunctionalityError",cY=`vercel.ai.error.${ON}`,K1e=Symbol.for(cY),uY,DN=class extends Vo{constructor({functionality:e}){super({name:ON,message:`'${e}' functionality not supported.`}),this[uY]=!0,this.functionality=e}static isInstance(e){return Vo.hasMarker(e,cY)}static isUnsupportedFunctionalityError(e){return e instanceof Error&&e.name===ON&&typeof e.functionality=="string"}toJSON(){return{name:this.name,message:this.message,stack:this.stack,functionality:this.functionality}}};uY=K1e;function Y1e(t){let e,n,r,s,i,o,a;return l(),{feed:c,reset:l};function l(){e=!0,n="",r=0,s=-1,i=void 0,o=void 0,a=""}function c(d){n=n?n+d:d,e&&X1e(n)&&(n=n.slice(dY.length)),e=!1;const h=n.length;let f=0,g=!1;for(;f<h;){g&&(n[f]===`
`&&++f,g=!1);let y=-1,m=s,b;for(let v=r;y<0&&v<h;++v)b=n[v],b===":"&&m<0?m=v-f:b==="\r"?(g=!0,y=v-f):b===`
`&&(y=v-f);if(y<0){r=h-f,s=m;break}else r=0,s=-1;u(n,f,m,y),f+=y+1}f===h?n="":f>0&&(n=n.slice(f))}function u(d,h,f,g){if(g===0){a.length>0&&(t({type:"event",id:i,event:o||void 0,data:a.slice(0,-1)}),a="",i=void 0),o=void 0;return}const y=f<0,m=d.slice(h,h+(y?g:f));let b=0;y?b=g:d[h+f+1]===" "?b=f+2:b=f+1;const v=h+b,_=g-b,E=d.slice(v,v+_).toString();if(m==="data")a+=E?"".concat(E,`
`):`
`;else if(m==="event")o=E;else if(m==="id"&&!E.includes("\0"))i=E;else if(m==="retry"){const w=parseInt(E,10);Number.isNaN(w)||t({type:"reconnect-interval",value:w})}}}const dY=[239,187,191];function X1e(t){return dY.every((e,n)=>t.charCodeAt(n)===e)}class rL extends TransformStream{constructor(){let e;super({start(n){e=Y1e(r=>{r.type==="event"&&n.enqueue(r)})},transform(n){e.feed(n)}})}}var J1e={};function bj(...t){return t.reduce((e,n)=>({...e,...n??{}}),{})}function xk(t){const e={};return t.headers.forEach((n,r)=>{e[r]=n}),e}function yT(t){return t instanceof Error&&(t.name==="AbortError"||t.name==="TimeoutError")}function Z1e({apiKey:t,environmentVariableName:e,apiKeyParameterName:n="apiKey",description:r}){if(typeof t=="string")return t;if(t!=null)throw new fx({message:`${r} API key must be a string.`});if(typeof An>"u")throw new fx({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(t=J1e[e],t==null)throw new fx({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${e} environment variable.`});if(typeof t!="string")throw new fx({message:`${r} API key must be a string. The value of the ${e} environment variable is not a string.`});return t}var MN=Symbol.for("vercel.ai.validator");function Q1e(t){return{[MN]:!0,validate:t}}function eve(t){return typeof t=="object"&&t!==null&&MN in t&&t[MN]===!0&&"validate"in t}function tve(t){return Q1e(e=>{const n=t.safeParse(e);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function nve({value:t,schema:e}){const n=hY({value:t,schema:e});if(!n.success)throw new zb({value:t,cause:n.error});return n.value}function hY({value:t,schema:e}){const n=eve(e)?e:tve(e);try{if(n.validate==null)return{success:!0,value:t};const r=n.validate(t);return r.success?r:{success:!1,error:new zb({value:t,cause:r.error})}}catch(r){return{success:!1,error:zb.isTypeValidationError(r)?r:new zb({value:t,cause:r})}}}function rve({text:t,schema:e}){try{const n=Xl.parse(t);return e==null?n:nve({value:n,schema:e})}catch(n){throw lE.isJSONParseError(n)||zb.isTypeValidationError(n)?n:new lE({text:t,cause:n})}}function fY({text:t,schema:e}){try{const n=Xl.parse(t);return e==null?{success:!0,value:n}:hY({value:n,schema:e})}catch(n){return{success:!1,error:lE.isJSONParseError(n)?n:new lE({text:t,cause:n})}}}function sve(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>n!=null))}var ive=()=>fetch,yj=async({url:t,headers:e,body:n,failedResponseHandler:r,successfulResponseHandler:s,abortSignal:i,fetch:o})=>ove({url:t,headers:{"Content-Type":"application/json",...e},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:s,abortSignal:i,fetch:o}),ove=async({url:t,headers:e={},body:n,successfulResponseHandler:r,failedResponseHandler:s,abortSignal:i,fetch:o=ive()})=>{try{const a=await o(t,{method:"POST",headers:sve(e),body:n.content,signal:i}),l=xk(a);if(!a.ok){let c;try{c=await s({response:a,url:t,requestBodyValues:n.values})}catch(u){throw yT(u)||Pc.isAPICallError(u)?u:new Pc({message:"Failed to process error response",cause:u,statusCode:a.status,url:t,responseHeaders:l,requestBodyValues:n.values})}throw c.value}try{return await r({response:a,url:t,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(yT(c)||Pc.isAPICallError(c))?c:new Pc({message:"Failed to process successful response",cause:c,statusCode:a.status,url:t,responseHeaders:l,requestBodyValues:n.values})}}catch(a){if(yT(a))throw a;if(a instanceof TypeError&&a.message==="fetch failed"){const l=a.cause;if(l!=null)throw new Pc({message:`Cannot connect to API: ${l.message}`,cause:l,url:t,requestBodyValues:n.values,isRetryable:!0})}throw a}},ave=({errorSchema:t,errorToMessage:e,isRetryable:n})=>async({response:r,url:s,requestBodyValues:i})=>{const o=await r.text(),a=xk(r);if(o.trim()==="")return{responseHeaders:a,value:new Pc({message:r.statusText,url:s,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:o,isRetryable:n?.(r)})};try{const l=rve({text:o,schema:t});return{responseHeaders:a,value:new Pc({message:e(l),url:s,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:o,data:l,isRetryable:n?.(r,l)})}}catch{return{responseHeaders:a,value:new Pc({message:r.statusText,url:s,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:o,isRetryable:n?.(r)})}}},lve=t=>async({response:e})=>{const n=xk(e);if(e.body==null)throw new V1e({});return{responseHeaders:n,value:e.body.pipeThrough(new TextDecoderStream).pipeThrough(new rL).pipeThrough(new TransformStream({transform({data:r},s){r!=="[DONE]"&&s.enqueue(fY({text:r,schema:t}))}}))}},cve=t=>async({response:e,url:n,requestBodyValues:r})=>{const s=await e.text(),i=fY({text:s,schema:t}),o=xk(e);if(!i.success)throw new Pc({message:"Invalid JSON response",cause:i.error,statusCode:e.status,responseHeaders:o,responseBody:s,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value}};function uve(t){let e="";for(let n=0;n<t.length;n++)e+=String.fromCodePoint(t[n]);return globalThis.btoa(e)}function dve(t){return t?.replace(/\/$/,"")}var hve=q.object({type:q.literal("error"),error:q.object({type:q.string(),message:q.string()})}),vj=ave({errorSchema:hve,errorToMessage:t=>t.error.message});function fve(t){var e;const n=pve(t);let r;const s=[];for(let i=0;i<n.length;i++){const o=n[i],a=o.type;switch(a){case"system":{if(r!=null)throw new DN({functionality:"Multiple system messages that are separated by user/assistant messages"});r=o.messages.map(({content:l})=>l).join(`
`);break}case"user":{const l=[];for(const{role:c,content:u}of o.messages)switch(c){case"user":{for(const d of u)switch(d.type){case"text":{l.push({type:"text",text:d.text});break}case"image":{if(d.image instanceof URL)throw new DN({functionality:"Image URLs in user messages"});l.push({type:"image",source:{type:"base64",media_type:(e=d.mimeType)!=null?e:"image/jpeg",data:uve(d.image)}});break}}break}case"tool":{for(const d of u)l.push({type:"tool_result",tool_use_id:d.toolCallId,content:JSON.stringify(d.result),is_error:d.isError});break}default:{const d=c;throw new Error(`Unsupported role: ${d}`)}}s.push({role:"user",content:l});break}case"assistant":{const l=[];for(const{content:c}of o.messages)for(let u=0;u<c.length;u++){const d=c[u];switch(d.type){case"text":{l.push({type:"text",text:i===n.length-1&&u===o.messages.length-1?d.text.trim():d.text});break}case"tool-call":{l.push({type:"tool_use",id:d.toolCallId,name:d.toolName,input:d.args});break}}}s.push({role:"assistant",content:l});break}default:{const l=a;throw new Error(`Unsupported type: ${l}`)}}}return{system:r,messages:s}}function pve(t){const e=[];let n;for(const{role:r,content:s}of t)switch(r){case"system":{n?.type!=="system"&&(n={type:"system",messages:[]},e.push(n)),n.messages.push({role:r,content:s});break}case"assistant":{n?.type!=="assistant"&&(n={type:"assistant",messages:[]},e.push(n)),n.messages.push({role:r,content:s});break}case"user":{n?.type!=="user"&&(n={type:"user",messages:[]},e.push(n)),n.messages.push({role:r,content:s});break}case"tool":{n?.type!=="user"&&(n={type:"user",messages:[]},e.push(n)),n.messages.push({role:r,content:s});break}default:{const i=r;throw new Error(`Unsupported role: ${i}`)}}return e}function _j(t){switch(t){case"end_turn":case"stop_sequence":return"stop";case"tool_use":return"tool-calls";case"max_tokens":return"length";default:return"other"}}var mve=class{constructor(t,e,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="tool",this.supportsImageUrls=!1,this.modelId=t,this.settings=e,this.config=n}get provider(){return this.config.provider}async getArgs({mode:t,prompt:e,maxTokens:n,temperature:r,topP:s,topK:i,frequencyPenalty:o,presencePenalty:a,stopSequences:l,responseFormat:c,seed:u}){const d=t.type,h=[];o!=null&&h.push({type:"unsupported-setting",setting:"frequencyPenalty"}),a!=null&&h.push({type:"unsupported-setting",setting:"presencePenalty"}),u!=null&&h.push({type:"unsupported-setting",setting:"seed"}),c!=null&&c.type!=="text"&&h.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const f=fve(e),g={model:this.modelId,top_k:i??this.settings.topK,max_tokens:n??4096,temperature:r,top_p:s,stop_sequences:l,system:f.system,messages:f.messages};switch(d){case"regular":return{args:{...g,...yve(t)},warnings:h};case"object-json":throw new DN({functionality:"json-mode object generation"});case"object-tool":{const{name:y,description:m,parameters:b}=t.tool;return{args:{...g,tools:[{name:y,description:m,input_schema:b}],tool_choice:{type:"tool",name:y}},warnings:h}}default:{const y=d;throw new Error(`Unsupported type: ${y}`)}}}async doGenerate(t){const{args:e,warnings:n}=await this.getArgs(t),{responseHeaders:r,value:s}=await yj({url:`${this.config.baseURL}/messages`,headers:bj(this.config.headers(),t.headers),body:e,failedResponseHandler:vj,successfulResponseHandler:cve(gve),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:i,...o}=e;let a="";for(const c of s.content)c.type==="text"&&(a+=c.text);let l;if(s.content.some(c=>c.type==="tool_use")){l=[];for(const c of s.content)c.type==="tool_use"&&l.push({toolCallType:"function",toolCallId:c.id,toolName:c.name,args:JSON.stringify(c.input)})}return{text:a,toolCalls:l,finishReason:_j(s.stop_reason),usage:{promptTokens:s.usage.input_tokens,completionTokens:s.usage.output_tokens},rawCall:{rawPrompt:i,rawSettings:o},rawResponse:{headers:r},warnings:n}}async doStream(t){const{args:e,warnings:n}=await this.getArgs(t),{responseHeaders:r,value:s}=await yj({url:`${this.config.baseURL}/messages`,headers:bj(this.config.headers(),t.headers),body:{...e,stream:!0},failedResponseHandler:vj,successfulResponseHandler:lve(bve),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:i,...o}=e;let a="other";const l={promptTokens:Number.NaN,completionTokens:Number.NaN},c={};return{stream:s.pipeThrough(new TransformStream({transform(u,d){if(!u.success){d.enqueue({type:"error",error:u.error});return}const h=u.value;switch(h.type){case"ping":return;case"content_block_start":{const f=h.content_block.type;switch(f){case"text":return;case"tool_use":{c[h.index]={toolCallId:h.content_block.id,toolName:h.content_block.name,jsonText:""};return}default:{const g=f;throw new Error(`Unsupported content block type: ${g}`)}}}case"content_block_stop":{if(c[h.index]!=null){const f=c[h.index];d.enqueue({type:"tool-call",toolCallType:"function",toolCallId:f.toolCallId,toolName:f.toolName,args:f.jsonText}),delete c[h.index]}return}case"content_block_delta":{const f=h.delta.type;switch(f){case"text_delta":{d.enqueue({type:"text-delta",textDelta:h.delta.text});return}case"input_json_delta":{const g=c[h.index];d.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:g.toolCallId,toolName:g.toolName,argsTextDelta:h.delta.partial_json}),g.jsonText+=h.delta.partial_json;return}default:{const g=f;throw new Error(`Unsupported delta type: ${g}`)}}}case"message_start":{l.promptTokens=h.message.usage.input_tokens,l.completionTokens=h.message.usage.output_tokens;return}case"message_delta":{l.completionTokens=h.usage.output_tokens,a=_j(h.delta.stop_reason);return}case"message_stop":{d.enqueue({type:"finish",finishReason:a,usage:l});return}case"error":{d.enqueue({type:"error",error:h.error});return}default:{const f=h;throw new Error(`Unsupported chunk type: ${f}`)}}}})),rawCall:{rawPrompt:i,rawSettings:o},rawResponse:{headers:r},warnings:n}}},gve=q.object({type:q.literal("message"),content:q.array(q.discriminatedUnion("type",[q.object({type:q.literal("text"),text:q.string()}),q.object({type:q.literal("tool_use"),id:q.string(),name:q.string(),input:q.unknown()})])),stop_reason:q.string().optional().nullable(),usage:q.object({input_tokens:q.number(),output_tokens:q.number()})}),bve=q.discriminatedUnion("type",[q.object({type:q.literal("message_start"),message:q.object({usage:q.object({input_tokens:q.number(),output_tokens:q.number()})})}),q.object({type:q.literal("content_block_start"),index:q.number(),content_block:q.discriminatedUnion("type",[q.object({type:q.literal("text"),text:q.string()}),q.object({type:q.literal("tool_use"),id:q.string(),name:q.string()})])}),q.object({type:q.literal("content_block_delta"),index:q.number(),delta:q.discriminatedUnion("type",[q.object({type:q.literal("input_json_delta"),partial_json:q.string()}),q.object({type:q.literal("text_delta"),text:q.string()})])}),q.object({type:q.literal("content_block_stop"),index:q.number()}),q.object({type:q.literal("error"),error:q.object({type:q.string(),message:q.string()})}),q.object({type:q.literal("message_delta"),delta:q.object({stop_reason:q.string().optional().nullable()}),usage:q.object({output_tokens:q.number()})}),q.object({type:q.literal("message_stop")}),q.object({type:q.literal("ping")})]);function yve(t){var e;const n=(e=t.tools)!=null&&e.length?t.tools:void 0;if(n==null)return{tools:void 0,tool_choice:void 0};const r=n.map(o=>({name:o.name,description:o.description,input_schema:o.parameters})),s=t.toolChoice;if(s==null)return{tools:r,tool_choice:void 0};const i=s.type;switch(i){case"auto":return{tools:r,tool_choice:{type:"auto"}};case"required":return{tools:r,tool_choice:{type:"any"}};case"none":return{tools:void 0,tool_choice:void 0};case"tool":return{tools:r,tool_choice:{type:"tool",name:s.toolName}};default:{const o=i;throw new Error(`Unsupported tool choice type: ${o}`)}}}function pY(t={}){var e,n;const r=(n=dve((e=t.baseURL)!=null?e:t.baseUrl))!=null?n:"https://api.anthropic.com/v1",s=()=>({"anthropic-version":"2023-06-01","x-api-key":Z1e({apiKey:t.apiKey,environmentVariableName:"ANTHROPIC_API_KEY",description:"Anthropic"}),...t.headers}),i=(a,l={})=>new mve(a,l,{provider:"anthropic.messages",baseURL:r,headers:s,fetch:t.fetch}),o=function(a,l){if(new.target)throw new Error("The Anthropic model function cannot be called with the new keyword.");return i(a,l)};return o.languageModel=i,o.chat=i,o.messages=i,o}pY();class vve extends Kr{name="Anthropic";getApiKeyLink="https://console.anthropic.com/settings/keys";config={apiTokenKey:"ANTHROPIC_API_KEY"};staticModels=[{name:"claude-3-5-sonnet-latest",label:"Claude 3.5 Sonnet (new)",provider:"Anthropic",maxTokenAllowed:8e3},{name:"claude-3-5-sonnet-20240620",label:"Claude 3.5 Sonnet (old)",provider:"Anthropic",maxTokenAllowed:8e3},{name:"claude-3-5-haiku-latest",label:"Claude 3.5 Haiku (new)",provider:"Anthropic",maxTokenAllowed:8e3},{name:"claude-3-opus-latest",label:"Claude 3 Opus",provider:"Anthropic",maxTokenAllowed:8e3},{name:"claude-3-sonnet-20240229",label:"Claude 3 Sonnet",provider:"Anthropic",maxTokenAllowed:8e3},{name:"claude-3-haiku-20240307",label:"Claude 3 Haiku",provider:"Anthropic",maxTokenAllowed:8e3}];async getDynamicModels(e,n,r){const{apiKey:s}=this.getProviderBaseUrlAndKey({apiKeys:e,providerSettings:n,serverEnv:r,defaultBaseUrlKey:"",defaultApiTokenKey:"OPENAI_API_KEY"});if(!s)throw`Missing Api Key configuration for ${this.name} provider`;const o=await(await fetch("https://api.anthropic.com/v1/models",{headers:{"x-api-key":`${s}`,"anthropic-version":"2023-06-01"}})).json(),a=this.staticModels.map(c=>c.name);return o.data.filter(c=>c.type==="model"&&!a.includes(c.id)).map(c=>({name:c.id,label:`${c.display_name}`,provider:this.name,maxTokenAllowed:32e3}))}getModelInstance=e=>{const{apiKeys:n,providerSettings:r,serverEnv:s,model:i}=e,{apiKey:o}=this.getProviderBaseUrlAndKey({apiKeys:n,providerSettings:r,serverEnv:s,defaultBaseUrlKey:"",defaultApiTokenKey:"ANTHROPIC_API_KEY"});return pY({apiKey:o})(i)}}var _ve=q.object({message:q.string()}),jN=QR({errorSchema:_ve,errorToMessage:t=>t.message});function xve(t){const e=[];for(const{role:n,content:r}of t)switch(n){case"system":{e.push({role:"system",content:r});break}case"user":{e.push({role:"user",content:r.map(s=>{switch(s.type){case"text":return s.text;case"image":throw new vr({functionality:"image-part"})}}).join("")});break}case"assistant":{let s="";const i=[];for(const o of r)switch(o.type){case"text":{s+=o.text;break}case"tool-call":{i.push({id:o.toolCallId,type:"function",function:{name:o.toolName,arguments:JSON.stringify(o.args)}});break}default:{const a=o;throw new Error(`Unsupported part: ${a}`)}}e.push({role:"assistant",content:s!==""?s:"call tool",tool_calls:i.length>0?i:void 0,tool_plan:void 0});break}case"tool":{e.push(...r.map(s=>({role:"tool",content:JSON.stringify(s.result),tool_call_id:s.toolCallId})));break}default:{const s=n;throw new Error(`Unsupported role: ${s}`)}}return e}function xj(t){switch(t){case"COMPLETE":case"STOP_SEQUENCE":return"stop";case"MAX_TOKENS":return"length";case"ERROR":case"ERROR_LIMIT":return"error";case"ERROR_TOXIC":return"content-filter";case"USER_CANCEL":return"other";default:return"unknown"}}function wve(t){var e;const n=(e=t.tools)!=null&&e.length?t.tools:void 0,r=[];if(n==null)return{tools:void 0,tool_choice:void 0,toolWarnings:r};const s=[];for(const a of n)a.type==="provider-defined"?r.push({type:"unsupported-tool",tool:a}):s.push({type:"function",function:{name:a.name,description:a.description,parameters:a.parameters}});const i=t.toolChoice;if(i==null)return{tools:s,tool_choice:void 0,toolWarnings:r};const o=i.type;switch(o){case"auto":return{tools:s,tool_choice:o,toolWarnings:r};case"none":return{tools:void 0,tool_choice:"any",toolWarnings:r};case"required":case"tool":throw new vr({functionality:`Unsupported tool choice type: ${o}`});default:{const a=o;throw new vr({functionality:`Unsupported tool choice type: ${a}`})}}}var Eve=class{constructor(t,e,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=t,this.settings=e,this.config=n}get provider(){return this.config.provider}getArgs({mode:t,prompt:e,maxTokens:n,temperature:r,topP:s,topK:i,frequencyPenalty:o,presencePenalty:a,stopSequences:l,responseFormat:c,seed:u}){const d=t.type,h=xve(e),f={model:this.modelId,frequency_penalty:o,presence_penalty:a,max_tokens:n,temperature:r,p:s,k:i,seed:u,stop_sequences:l,response_format:c?.type==="json"?{type:"json_object",schema:c.schema}:void 0,messages:h};switch(d){case"regular":{const{tools:g,tool_choice:y,toolWarnings:m}=wve(t);return{...f,tools:g,warnings:m}}case"object-json":throw new vr({functionality:"object-json mode"});case"object-tool":throw new vr({functionality:"object-tool mode"});default:{const g=d;throw new vr({functionality:`Unsupported mode: ${g}`})}}}concatenateMessageText(t){return t.filter(e=>"content"in e).map(e=>e.content).join("")}removeJsonSchemaExtras(t){return t.map(e=>{if(e.type==="function"&&e.function.parameters&&typeof e.function.parameters=="object"){const{additionalProperties:n,$schema:r,...s}=e.function.parameters;return{...e,function:{...e.function,parameters:s}}}return e})}async doGenerate(t){var e,n,r,s;const{warnings:i,...o}=this.getArgs(t);o.tools=o.tools&&this.removeJsonSchemaExtras(o.tools);const{responseHeaders:a,value:l}=await Ta({url:`${this.config.baseURL}/chat`,headers:Aa(this.config.headers(),t.headers),body:o,failedResponseHandler:jN,successfulResponseHandler:Uf(Sve),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:c,...u}=o;return{text:(r=(n=(e=l.message.content)==null?void 0:e[0])==null?void 0:n.text)!=null?r:"",toolCalls:l.message.tool_calls?l.message.tool_calls.map(h=>({toolCallId:h.id,toolName:h.function.name,args:h.function.arguments.replace(/^null$/,"{}"),toolCallType:"function"})):[],finishReason:xj(l.finish_reason),usage:{promptTokens:l.usage.tokens.input_tokens,completionTokens:l.usage.tokens.output_tokens},rawCall:{rawPrompt:{messages:c},rawSettings:u},response:{id:(s=l.generation_id)!=null?s:void 0},rawResponse:{headers:a},warnings:i,request:{body:JSON.stringify(o)}}}async doStream(t){const{warnings:e,...n}=this.getArgs(t);n.tools=n.tools&&this.removeJsonSchemaExtras(n.tools);const r={...n,stream:!0},{responseHeaders:s,value:i}=await Ta({url:`${this.config.baseURL}/chat`,headers:Aa(this.config.headers(),t.headers),body:r,failedResponseHandler:jN,successfulResponseHandler:vk(kve),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:o,...a}=n;let l="unknown",c={promptTokens:Number.NaN,completionTokens:Number.NaN},u={toolCallId:"",toolName:"",argsTextDelta:""};return{stream:i.pipeThrough(new TransformStream({transform(d,h){var f,g;if(!d.success){l="error",h.enqueue({type:"error",error:d.error});return}const y=d.value;switch(y.type){case"content-delta":{h.enqueue({type:"text-delta",textDelta:y.delta.message.content.text});return}case"tool-call-start":{u={toolCallId:y.delta.message.tool_calls.id,toolName:y.delta.message.tool_calls.function.name,argsTextDelta:y.delta.message.tool_calls.function.arguments},h.enqueue({type:"tool-call-delta",toolCallId:u.toolCallId,toolName:u.toolName,toolCallType:"function",argsTextDelta:u.argsTextDelta});return}case"tool-call-delta":{u.argsTextDelta+=y.delta.message.tool_calls.function.arguments,h.enqueue({type:"tool-call-delta",toolCallId:u.toolCallId,toolName:u.toolName,toolCallType:"function",argsTextDelta:y.delta.message.tool_calls.function.arguments});return}case"tool-call-end":{h.enqueue({type:"tool-call",toolCallId:u.toolCallId,toolName:u.toolName,toolCallType:"function",args:JSON.stringify(JSON.parse(((f=u.argsTextDelta)==null?void 0:f.trim())||"{}"))}),u={toolCallId:"",toolName:"",argsTextDelta:""};return}case"message-start":{h.enqueue({type:"response-metadata",id:(g=y.id)!=null?g:void 0});return}case"message-end":{l=xj(y.delta.finish_reason);const b=y.delta.usage.tokens;c={promptTokens:b.input_tokens,completionTokens:b.output_tokens}}default:return}},flush(d){d.enqueue({type:"finish",finishReason:l,usage:c})}})),rawCall:{rawPrompt:{messages:o},rawSettings:a},rawResponse:{headers:s},warnings:e,request:{body:JSON.stringify(r)}}}},Sve=q.object({generation_id:q.string().nullish(),message:q.object({role:q.string(),content:q.array(q.object({type:q.string(),text:q.string()})).nullish(),tool_plan:q.string().nullish(),tool_calls:q.array(q.object({id:q.string(),type:q.literal("function"),function:q.object({name:q.string(),arguments:q.string()})})).nullish()}),finish_reason:q.string(),usage:q.object({billed_units:q.object({input_tokens:q.number(),output_tokens:q.number()}),tokens:q.object({input_tokens:q.number(),output_tokens:q.number()})})}),kve=q.discriminatedUnion("type",[q.object({type:q.literal("citation-start")}),q.object({type:q.literal("citation-end")}),q.object({type:q.literal("content-start")}),q.object({type:q.literal("content-delta"),delta:q.object({message:q.object({content:q.object({text:q.string()})})})}),q.object({type:q.literal("content-end")}),q.object({type:q.literal("message-start"),id:q.string().nullish()}),q.object({type:q.literal("message-end"),delta:q.object({finish_reason:q.string(),usage:q.object({tokens:q.object({input_tokens:q.number(),output_tokens:q.number()})})})}),q.object({type:q.literal("tool-plan-delta"),delta:q.object({message:q.object({tool_plan:q.string()})})}),q.object({type:q.literal("tool-call-start"),delta:q.object({message:q.object({tool_calls:q.object({id:q.string(),type:q.literal("function"),function:q.object({name:q.string(),arguments:q.string()})})})})}),q.object({type:q.literal("tool-call-delta"),delta:q.object({message:q.object({tool_calls:q.object({function:q.object({arguments:q.string()})})})})}),q.object({type:q.literal("tool-call-end")})]),Cve=class{constructor(t,e,n){this.specificationVersion="v1",this.maxEmbeddingsPerCall=96,this.supportsParallelCalls=!0,this.modelId=t,this.settings=e,this.config=n}get provider(){return this.config.provider}async doEmbed({values:t,headers:e,abortSignal:n}){var r;if(t.length>this.maxEmbeddingsPerCall)throw new wK({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:t});const{responseHeaders:s,value:i}=await Ta({url:`${this.config.baseURL}/embed`,headers:Aa(this.config.headers(),e),body:{model:this.modelId,embedding_types:["float"],texts:t,input_type:(r=this.settings.inputType)!=null?r:"search_query",truncate:this.settings.truncate},failedResponseHandler:jN,successfulResponseHandler:Uf(Ave),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.embeddings.float,usage:{tokens:i.meta.billed_units.input_tokens},rawResponse:{headers:s}}}},Ave=q.object({embeddings:q.object({float:q.array(q.array(q.number()))}),meta:q.object({billed_units:q.object({input_tokens:q.number()})})});function mY(t={}){var e;const n=(e=eL(t.baseURL))!=null?e:"https://api.cohere.com/v2",r=()=>({Authorization:`Bearer ${ZR({apiKey:t.apiKey,environmentVariableName:"COHERE_API_KEY",description:"Cohere"})}`,...t.headers}),s=(a,l={})=>new Eve(a,l,{provider:"cohere.chat",baseURL:n,headers:r,fetch:t.fetch}),i=(a,l={})=>new Cve(a,l,{provider:"cohere.textEmbedding",baseURL:n,headers:r,fetch:t.fetch}),o=function(a,l){if(new.target)throw new Error("The Cohere model function cannot be called with the new keyword.");return s(a,l)};return o.languageModel=s,o.embedding=i,o.textEmbeddingModel=i,o}mY();class Tve extends Kr{name="Cohere";getApiKeyLink="https://dashboard.cohere.com/api-keys";config={apiTokenKey:"COHERE_API_KEY"};staticModels=[{name:"command-r-plus-08-2024",label:"Command R plus Latest",provider:"Cohere",maxTokenAllowed:4096},{name:"command-r-08-2024",label:"Command R Latest",provider:"Cohere",maxTokenAllowed:4096},{name:"command-r-plus",label:"Command R plus",provider:"Cohere",maxTokenAllowed:4096},{name:"command-r",label:"Command R",provider:"Cohere",maxTokenAllowed:4096},{name:"command",label:"Command",provider:"Cohere",maxTokenAllowed:4096},{name:"command-nightly",label:"Command Nightly",provider:"Cohere",maxTokenAllowed:4096},{name:"command-light",label:"Command Light",provider:"Cohere",maxTokenAllowed:4096},{name:"command-light-nightly",label:"Command Light Nightly",provider:"Cohere",maxTokenAllowed:4096},{name:"c4ai-aya-expanse-8b",label:"c4AI Aya Expanse 8b",provider:"Cohere",maxTokenAllowed:4096},{name:"c4ai-aya-expanse-32b",label:"c4AI Aya Expanse 32b",provider:"Cohere",maxTokenAllowed:4096}];getModelInstance(e){const{model:n,serverEnv:r,apiKeys:s,providerSettings:i}=e,{apiKey:o}=this.getProviderBaseUrlAndKey({apiKeys:s,providerSettings:i?.[this.name],serverEnv:r,defaultBaseUrlKey:"",defaultApiTokenKey:"COHERE_API_KEY"});if(!o)throw new Error(`Missing API key for ${this.name} provider`);return mY({apiKey:o})(n)}}function O0(t){var e,n;return(n=(e=t?.providerMetadata)==null?void 0:e.openaiCompatible)!=null?n:{}}function Nve(t){const e=[];for(const{role:n,content:r,...s}of t){const i=O0({...s});switch(n){case"system":{e.push({role:"system",content:r,...i});break}case"user":{if(r.length===1&&r[0].type==="text"){e.push({role:"user",content:r[0].text,...O0(r[0])});break}e.push({role:"user",content:r.map(o=>{var a;const l=O0(o);switch(o.type){case"text":return{type:"text",text:o.text,...l};case"image":return{type:"image_url",image_url:{url:o.image instanceof URL?o.image.toString():`data:${(a=o.mimeType)!=null?a:"image/jpeg"};base64,${OK(o.image)}`},...l};case"file":throw new vr({functionality:"File content parts in user messages"})}}),...i});break}case"assistant":{let o="";const a=[];for(const l of r){const c=O0(l);switch(l.type){case"text":{o+=l.text;break}case"tool-call":{a.push({id:l.toolCallId,type:"function",function:{name:l.toolName,arguments:JSON.stringify(l.args)},...c});break}default:{const u=l;throw new Error(`Unsupported part: ${u}`)}}}e.push({role:"assistant",content:o,tool_calls:a.length>0?a:void 0,...i});break}case"tool":{for(const o of r){const a=O0(o);e.push({role:"tool",tool_call_id:o.toolCallId,content:JSON.stringify(o.result),...a})}break}default:{const o=n;throw new Error(`Unsupported role: ${o}`)}}}return e}function wj({id:t,model:e,created:n}){return{id:t??void 0,modelId:e??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function Ej(t){switch(t){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var Pve=q.object({error:q.object({message:q.string(),type:q.string().nullish(),param:q.any().nullish(),code:q.union([q.string(),q.number()]).nullish()})}),Ive={errorSchema:Pve};function Rve({mode:t,structuredOutputs:e}){var n;const r=(n=t.tools)!=null&&n.length?t.tools:void 0,s=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:s};const i=t.toolChoice,o=[];for(const l of r)l.type==="provider-defined"?s.push({type:"unsupported-tool",tool:l}):o.push({type:"function",function:{name:l.name,description:l.description,parameters:l.parameters}});if(i==null)return{tools:o,tool_choice:void 0,toolWarnings:s};const a=i.type;switch(a){case"auto":case"none":case"required":return{tools:o,tool_choice:a,toolWarnings:s};case"tool":return{tools:o,tool_choice:{type:"function",function:{name:i.toolName}},toolWarnings:s};default:{const l=a;throw new vr({functionality:`Unsupported tool choice type: ${l}`})}}}var Lve=class{constructor(t,e,n){this.specificationVersion="v1";var r,s;this.modelId=t,this.settings=e,this.config=n;const i=(r=n.errorStructure)!=null?r:Ive;this.chunkSchema=Dve(i.errorSchema),this.failedResponseHandler=QR(i),this.supportsStructuredOutputs=(s=n.supportsStructuredOutputs)!=null?s:!1}get defaultObjectGenerationMode(){return this.config.defaultObjectGenerationMode}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:t,prompt:e,maxTokens:n,temperature:r,topP:s,topK:i,frequencyPenalty:o,presencePenalty:a,providerMetadata:l,stopSequences:c,responseFormat:u,seed:d}){var h,f;const g=t.type,y=[];i!=null&&y.push({type:"unsupported-setting",setting:"topK"}),u?.type==="json"&&u.schema!=null&&!this.supportsStructuredOutputs&&y.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const m={model:this.modelId,user:this.settings.user,max_tokens:n,temperature:r,top_p:s,frequency_penalty:o,presence_penalty:a,response_format:u?.type==="json"?this.supportsStructuredOutputs===!0&&u.schema!=null?{type:"json_schema",json_schema:{schema:u.schema,name:(h=u.name)!=null?h:"response",description:u.description}}:{type:"json_object"}:void 0,stop:c,seed:d,...l?.[this.providerOptionsName],messages:Nve(e)};switch(g){case"regular":{const{tools:b,tool_choice:v,toolWarnings:_}=Rve({mode:t,structuredOutputs:this.supportsStructuredOutputs});return{args:{...m,tools:b,tool_choice:v},warnings:[...y,..._]}}case"object-json":return{args:{...m,response_format:this.supportsStructuredOutputs===!0&&t.schema!=null?{type:"json_schema",json_schema:{schema:t.schema,name:(f=t.name)!=null?f:"response",description:t.description}}:{type:"json_object"}},warnings:y};case"object-tool":return{args:{...m,tool_choice:{type:"function",function:{name:t.tool.name}},tools:[{type:"function",function:{name:t.tool.name,description:t.tool.description,parameters:t.tool.parameters}}]},warnings:y};default:{const b=g;throw new Error(`Unsupported type: ${b}`)}}}async doGenerate(t){var e,n,r,s,i,o,a,l,c;const{args:u,warnings:d}=this.getArgs({...t}),h=JSON.stringify(u),{responseHeaders:f,value:g,rawValue:y}=await Ta({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Aa(this.config.headers(),t.headers),body:u,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:Uf(Ove),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:m,...b}=u,v=g.choices[0],_=(n=(e=this.config.metadataExtractor)==null?void 0:e.extractMetadata)==null?void 0:n.call(e,{parsedBody:y});return{text:(r=v.message.content)!=null?r:void 0,reasoning:(s=v.message.reasoning_content)!=null?s:void 0,toolCalls:(i=v.message.tool_calls)==null?void 0:i.map(E=>{var w;return{toolCallType:"function",toolCallId:(w=E.id)!=null?w:ba(),toolName:E.function.name,args:E.function.arguments}}),finishReason:Ej(v.finish_reason),usage:{promptTokens:(a=(o=g.usage)==null?void 0:o.prompt_tokens)!=null?a:NaN,completionTokens:(c=(l=g.usage)==null?void 0:l.completion_tokens)!=null?c:NaN},..._&&{providerMetadata:_},rawCall:{rawPrompt:m,rawSettings:b},rawResponse:{headers:f},response:wj(g),warnings:d,request:{body:h}}}async doStream(t){var e;if(this.settings.simulateStreaming){const g=await this.doGenerate(t);return{stream:new ReadableStream({start(m){if(m.enqueue({type:"response-metadata",...g.response}),g.reasoning&&m.enqueue({type:"reasoning",textDelta:g.reasoning}),g.text&&m.enqueue({type:"text-delta",textDelta:g.text}),g.toolCalls)for(const b of g.toolCalls)m.enqueue({type:"tool-call",...b});m.enqueue({type:"finish",finishReason:g.finishReason,usage:g.usage,logprobs:g.logprobs,providerMetadata:g.providerMetadata}),m.close()}}),rawCall:g.rawCall,rawResponse:g.rawResponse,warnings:g.warnings}}const{args:n,warnings:r}=this.getArgs({...t}),s=JSON.stringify({...n,stream:!0}),i=(e=this.config.metadataExtractor)==null?void 0:e.createStreamExtractor(),{responseHeaders:o,value:a}=await Ta({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Aa(this.config.headers(),t.headers),body:{...n,stream:!0},failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:vk(this.chunkSchema),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:l,...c}=n,u=[];let d="unknown",h={promptTokens:void 0,completionTokens:void 0},f=!0;return{stream:a.pipeThrough(new TransformStream({transform(g,y){var m,b,v,_,E,w,S,k,x,I,R,C,N,O;if(!g.success){d="error",y.enqueue({type:"error",error:g.error});return}const P=g.value;if(i?.processChunk(g.rawValue),"error"in P){d="error",y.enqueue({type:"error",error:P.error.message});return}f&&(f=!1,y.enqueue({type:"response-metadata",...wj(P)})),P.usage!=null&&(h={promptTokens:(m=P.usage.prompt_tokens)!=null?m:void 0,completionTokens:(b=P.usage.completion_tokens)!=null?b:void 0});const $=P.choices[0];if($?.finish_reason!=null&&(d=Ej($.finish_reason)),$?.delta==null)return;const ee=$.delta;if(ee.reasoning_content!=null&&y.enqueue({type:"reasoning",textDelta:ee.reasoning_content}),ee.content!=null&&y.enqueue({type:"text-delta",textDelta:ee.content}),ee.tool_calls!=null)for(const J of ee.tool_calls){const Z=J.index;if(u[Z]==null){if(J.type!=="function")throw new ym({data:J,message:"Expected 'function' type."});if(J.id==null)throw new ym({data:J,message:"Expected 'id' to be a string."});if(((v=J.function)==null?void 0:v.name)==null)throw new ym({data:J,message:"Expected 'function.name' to be a string."});u[Z]={id:J.id,type:"function",function:{name:J.function.name,arguments:(_=J.function.arguments)!=null?_:""},hasFinished:!1};const F=u[Z];((E=F.function)==null?void 0:E.name)!=null&&((w=F.function)==null?void 0:w.arguments)!=null&&(F.function.arguments.length>0&&y.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:F.id,toolName:F.function.name,argsTextDelta:F.function.arguments}),J2(F.function.arguments)&&(y.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(S=F.id)!=null?S:ba(),toolName:F.function.name,args:F.function.arguments}),F.hasFinished=!0));continue}const M=u[Z];M.hasFinished||(((k=J.function)==null?void 0:k.arguments)!=null&&(M.function.arguments+=(I=(x=J.function)==null?void 0:x.arguments)!=null?I:""),y.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:M.id,toolName:M.function.name,argsTextDelta:(R=J.function.arguments)!=null?R:""}),((C=M.function)==null?void 0:C.name)!=null&&((N=M.function)==null?void 0:N.arguments)!=null&&J2(M.function.arguments)&&(y.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(O=M.id)!=null?O:ba(),toolName:M.function.name,args:M.function.arguments}),M.hasFinished=!0))}},flush(g){var y,m;const b=i?.buildMetadata();g.enqueue({type:"finish",finishReason:d,usage:{promptTokens:(y=h.promptTokens)!=null?y:NaN,completionTokens:(m=h.completionTokens)!=null?m:NaN},...b&&{providerMetadata:b}})}})),rawCall:{rawPrompt:l,rawSettings:c},rawResponse:{headers:o},warnings:r,request:{body:s}}}},Ove=q.object({id:q.string().nullish(),created:q.number().nullish(),model:q.string().nullish(),choices:q.array(q.object({message:q.object({role:q.literal("assistant").nullish(),content:q.string().nullish(),reasoning_content:q.string().nullish(),tool_calls:q.array(q.object({id:q.string().nullish(),type:q.literal("function"),function:q.object({name:q.string(),arguments:q.string()})})).nullish()}),finish_reason:q.string().nullish()})),usage:q.object({prompt_tokens:q.number().nullish(),completion_tokens:q.number().nullish()}).nullish()}),Dve=t=>q.union([q.object({id:q.string().nullish(),created:q.number().nullish(),model:q.string().nullish(),choices:q.array(q.object({delta:q.object({role:q.enum(["assistant"]).nullish(),content:q.string().nullish(),reasoning_content:q.string().nullish(),tool_calls:q.array(q.object({index:q.number(),id:q.string().nullish(),type:q.literal("function").optional(),function:q.object({name:q.string().nullish(),arguments:q.string().nullish()})})).nullish()}).nullish(),finish_reason:q.string().nullish()})),usage:q.object({prompt_tokens:q.number().nullish(),completion_tokens:q.number().nullish()}).nullish()}),t]);q.object({id:q.string().nullish(),created:q.number().nullish(),model:q.string().nullish(),choices:q.array(q.object({text:q.string(),finish_reason:q.string()})),usage:q.object({prompt_tokens:q.number(),completion_tokens:q.number()}).nullish()});q.object({data:q.array(q.object({embedding:q.array(q.number())})),usage:q.object({prompt_tokens:q.number()}).nullish()});var Sj=t=>{var e,n;return t==null?void 0:{deepseek:{promptCacheHitTokens:(e=t.prompt_cache_hit_tokens)!=null?e:NaN,promptCacheMissTokens:(n=t.prompt_cache_miss_tokens)!=null?n:NaN}}},Mve={extractMetadata:({parsedBody:t})=>{const e=Y2({value:t,schema:jve});return!e.success||e.value.usage==null?void 0:Sj(e.value.usage)},createStreamExtractor:()=>{let t;return{processChunk:e=>{var n,r;const s=Y2({value:e,schema:Fve});s.success&&((r=(n=s.value.choices)==null?void 0:n[0])==null?void 0:r.finish_reason)==="stop"&&s.value.usage&&(t=s.value.usage)},buildMetadata:()=>Sj(t)}}},gY=q.object({prompt_cache_hit_tokens:q.number().nullish(),prompt_cache_miss_tokens:q.number().nullish()}),jve=q.object({usage:gY.nullish()}),Fve=q.object({choices:q.array(q.object({finish_reason:q.string().nullish()})).nullish(),usage:gY.nullish()});function bY(t={}){var e;const n=eL((e=t.baseURL)!=null?e:"https://api.deepseek.com/v1"),r=()=>({Authorization:`Bearer ${ZR({apiKey:t.apiKey,environmentVariableName:"DEEPSEEK_API_KEY",description:"DeepSeek API key"})}`,...t.headers}),s=(o,a={})=>new Lve(o,a,{provider:"deepseek.chat",url:({path:l})=>`${n}${l}`,headers:r,fetch:t.fetch,defaultObjectGenerationMode:"json",metadataExtractor:Mve}),i=(o,a)=>s(o,a);return i.languageModel=s,i.chat=s,i.textEmbeddingModel=o=>{throw new _be({modelId:o,modelType:"textEmbeddingModel"})},i}bY();class Bve extends Kr{name="Deepseek";getApiKeyLink="https://platform.deepseek.com/apiKeys";config={apiTokenKey:"DEEPSEEK_API_KEY"};staticModels=[{name:"deepseek-coder",label:"Deepseek-Coder",provider:"Deepseek",maxTokenAllowed:8e3},{name:"deepseek-chat",label:"Deepseek-Chat",provider:"Deepseek",maxTokenAllowed:8e3},{name:"deepseek-reasoner",label:"Deepseek-Reasoner",provider:"Deepseek",maxTokenAllowed:8e3}];getModelInstance(e){const{model:n,serverEnv:r,apiKeys:s,providerSettings:i}=e,{apiKey:o}=this.getProviderBaseUrlAndKey({apiKeys:s,providerSettings:i?.[this.name],serverEnv:r,defaultBaseUrlKey:"",defaultApiTokenKey:"DEEPSEEK_API_KEY"});if(!o)throw new Error(`Missing API key for ${this.name} provider`);return bY({apiKey:o})(n,{})}}var yY="vercel.ai.error",Uve=Symbol.for(yY),vY,$ve=class _Y extends Error{constructor({name:e,message:n,cause:r}){super(n),this[vY]=!0,this.name=e,this.cause=r}static isInstance(e){return _Y.hasMarker(e,yY)}static hasMarker(e,n){const r=Symbol.for(n);return e!=null&&typeof e=="object"&&r in e&&typeof e[r]=="boolean"&&e[r]===!0}toJSON(){return{name:this.name,message:this.message}}};vY=Uve;var Li=$ve,FN="AI_APICallError",xY=`vercel.ai.error.${FN}`,Hve=Symbol.for(xY),wY,Ic=class extends Li{constructor({message:e,url:n,requestBodyValues:r,statusCode:s,responseHeaders:i,responseBody:o,cause:a,isRetryable:l=s!=null&&(s===408||s===409||s===429||s>=500),data:c}){super({name:FN,message:e,cause:a}),this[wY]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=s,this.responseHeaders=i,this.responseBody=o,this.isRetryable=l,this.data=c}static isInstance(e){return Li.hasMarker(e,xY)}static isAPICallError(e){return e instanceof Error&&e.name===FN&&typeof e.url=="string"&&typeof e.requestBodyValues=="object"&&(e.statusCode==null||typeof e.statusCode=="number")&&(e.responseHeaders==null||typeof e.responseHeaders=="object")&&(e.responseBody==null||typeof e.responseBody=="string")&&(e.cause==null||typeof e.cause=="object")&&typeof e.isRetryable=="boolean"&&(e.data==null||typeof e.data=="object")}toJSON(){return{name:this.name,message:this.message,url:this.url,requestBodyValues:this.requestBodyValues,statusCode:this.statusCode,responseHeaders:this.responseHeaders,responseBody:this.responseBody,cause:this.cause,isRetryable:this.isRetryable,data:this.data}}};wY=Hve;var BN="AI_EmptyResponseBodyError",EY=`vercel.ai.error.${BN}`,zve=Symbol.for(EY),SY,kY=class extends Li{constructor({message:e="Empty response body"}={}){super({name:BN,message:e}),this[SY]=!0}static isInstance(e){return Li.hasMarker(e,EY)}static isEmptyResponseBodyError(e){return e instanceof Error&&e.name===BN}};SY=zve;function CY(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}var UN="AI_JSONParseError",AY=`vercel.ai.error.${UN}`,Vve=Symbol.for(AY),TY,cE=class extends Li{constructor({text:e,cause:n}){super({name:UN,message:`JSON parsing failed: Text: ${e}.
Error message: ${CY(n)}`,cause:n}),this[TY]=!0,this.text=e}static isInstance(e){return Li.hasMarker(e,AY)}static isJSONParseError(e){return e instanceof Error&&e.name===UN&&"text"in e&&typeof e.text=="string"}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,valueText:this.text}}};TY=Vve;var $N="AI_LoadAPIKeyError",NY=`vercel.ai.error.${$N}`,Wve=Symbol.for(NY),PY,px=class extends Li{constructor({message:e}){super({name:$N,message:e}),this[PY]=!0}static isInstance(e){return Li.hasMarker(e,NY)}static isLoadAPIKeyError(e){return e instanceof Error&&e.name===$N}};PY=Wve;var HN="AI_TooManyEmbeddingValuesForCallError",IY=`vercel.ai.error.${HN}`,Gve=Symbol.for(IY),RY,sL=class extends Li{constructor(t){super({name:HN,message:`Too many values for a single embedding call. The ${t.provider} model "${t.modelId}" can only embed up to ${t.maxEmbeddingsPerCall} values per call, but ${t.values.length} values were provided.`}),this[RY]=!0,this.provider=t.provider,this.modelId=t.modelId,this.maxEmbeddingsPerCall=t.maxEmbeddingsPerCall,this.values=t.values}static isInstance(t){return Li.hasMarker(t,IY)}static isTooManyEmbeddingValuesForCallError(t){return t instanceof Error&&t.name===HN&&"provider"in t&&typeof t.provider=="string"&&"modelId"in t&&typeof t.modelId=="string"&&"maxEmbeddingsPerCall"in t&&typeof t.maxEmbeddingsPerCall=="number"&&"values"in t&&Array.isArray(t.values)}toJSON(){return{name:this.name,message:this.message,stack:this.stack,provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:this.values}}};RY=Gve;var zN="AI_TypeValidationError",LY=`vercel.ai.error.${zN}`,qve=Symbol.for(LY),OY,Kve=class VN extends Li{constructor({value:e,cause:n}){super({name:zN,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${CY(n)}`,cause:n}),this[OY]=!0,this.value=e}static isInstance(e){return Li.hasMarker(e,LY)}static wrap({value:e,cause:n}){return VN.isInstance(n)&&n.value===e?n:new VN({value:e,cause:n})}static isTypeValidationError(e){return e instanceof Error&&e.name===zN}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,value:this.value}}};OY=qve;var uE=Kve,WN="AI_UnsupportedFunctionalityError",DY=`vercel.ai.error.${WN}`,Yve=Symbol.for(DY),MY,Vb=class extends Li{constructor({functionality:e}){super({name:WN,message:`'${e}' functionality not supported.`}),this[MY]=!0,this.functionality=e}static isInstance(e){return Li.hasMarker(e,DY)}static isUnsupportedFunctionalityError(e){return e instanceof Error&&e.name===WN&&typeof e.functionality=="string"}toJSON(){return{name:this.name,message:this.message,stack:this.stack,functionality:this.functionality}}};MY=Yve;var Xve={};function yd(...t){return t.reduce((e,n)=>({...e,...n??{}}),{})}function wv(t){const e={};return t.headers.forEach((n,r)=>{e[r]=n}),e}var Jve=({prefix:t="",size:e=7,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"}={})=>{const r=KK(n,e);return s=>`${t}${r(s)}`},iL=Jve();function vT(t){return t instanceof Error&&(t.name==="AbortError"||t.name==="TimeoutError")}function jY({apiKey:t,environmentVariableName:e,apiKeyParameterName:n="apiKey",description:r}){if(typeof t=="string")return t;if(t!=null)throw new px({message:`${r} API key must be a string.`});if(typeof An>"u")throw new px({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(t=Xve[e],t==null)throw new px({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${e} environment variable.`});if(typeof t!="string")throw new px({message:`${r} API key must be a string. The value of the ${e} environment variable is not a string.`});return t}var GN=Symbol.for("vercel.ai.validator");function Zve(t){return{[GN]:!0,validate:t}}function Qve(t){return typeof t=="object"&&t!==null&&GN in t&&t[GN]===!0&&"validate"in t}function e_e(t){return Qve(t)?t:t_e(t)}function t_e(t){return Zve(e=>{const n=t.safeParse(e);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function n_e({value:t,schema:e}){const n=FY({value:t,schema:e});if(!n.success)throw uE.wrap({value:t,cause:n.error});return n.value}function FY({value:t,schema:e}){const n=e_e(e);try{if(n.validate==null)return{success:!0,value:t};const r=n.validate(t);return r.success?r:{success:!1,error:uE.wrap({value:t,cause:r.error})}}catch(r){return{success:!1,error:uE.wrap({value:t,cause:r})}}}function r_e({text:t,schema:e}){try{const n=Xl.parse(t);return e==null?n:n_e({value:n,schema:e})}catch(n){throw cE.isJSONParseError(n)||uE.isTypeValidationError(n)?n:new cE({text:t,cause:n})}}function oL({text:t,schema:e}){try{const n=Xl.parse(t);return e==null?{success:!0,value:n}:FY({value:n,schema:e})}catch(n){return{success:!1,error:cE.isJSONParseError(n)?n:new cE({text:t,cause:n})}}}function s_e(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>n!=null))}var i_e=()=>globalThis.fetch,Jc=async({url:t,headers:e,body:n,failedResponseHandler:r,successfulResponseHandler:s,abortSignal:i,fetch:o})=>o_e({url:t,headers:{"Content-Type":"application/json",...e},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:s,abortSignal:i,fetch:o}),o_e=async({url:t,headers:e={},body:n,successfulResponseHandler:r,failedResponseHandler:s,abortSignal:i,fetch:o=i_e()})=>{try{const a=await o(t,{method:"POST",headers:s_e(e),body:n.content,signal:i}),l=wv(a);if(!a.ok){let c;try{c=await s({response:a,url:t,requestBodyValues:n.values})}catch(u){throw vT(u)||Ic.isAPICallError(u)?u:new Ic({message:"Failed to process error response",cause:u,statusCode:a.status,url:t,responseHeaders:l,requestBodyValues:n.values})}throw c.value}try{return await r({response:a,url:t,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(vT(c)||Ic.isAPICallError(c))?c:new Ic({message:"Failed to process successful response",cause:c,statusCode:a.status,url:t,responseHeaders:l,requestBodyValues:n.values})}}catch(a){if(vT(a))throw a;if(a instanceof TypeError&&a.message==="fetch failed"){const l=a.cause;if(l!=null)throw new Ic({message:`Cannot connect to API: ${l.message}`,cause:l,url:t,requestBodyValues:n.values,isRetryable:!0})}throw a}},aL=({errorSchema:t,errorToMessage:e,isRetryable:n})=>async({response:r,url:s,requestBodyValues:i})=>{const o=await r.text(),a=wv(r);if(o.trim()==="")return{responseHeaders:a,value:new Ic({message:r.statusText,url:s,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:o,isRetryable:n?.(r)})};try{const l=r_e({text:o,schema:t});return{responseHeaders:a,value:new Ic({message:e(l),url:s,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:o,data:l,isRetryable:n?.(r,l)})}}catch{return{responseHeaders:a,value:new Ic({message:r.statusText,url:s,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:o,isRetryable:n?.(r)})}}},BY=t=>async({response:e})=>{const n=wv(e);if(e.body==null)throw new kY({});return{responseHeaders:n,value:e.body.pipeThrough(new TextDecoderStream).pipeThrough(new rL).pipeThrough(new TransformStream({transform({data:r},s){r!=="[DONE]"&&s.enqueue(oL({text:r,schema:t}))}}))}},Ig=t=>async({response:e,url:n,requestBodyValues:r})=>{const s=await e.text(),i=oL({text:s,schema:t}),o=wv(e);if(!i.success)throw new Ic({message:"Invalid JSON response",cause:i.error,statusCode:e.status,responseHeaders:o,responseBody:s,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value}},{btoa:a_e}=globalThis;function lL(t){let e="";for(let n=0;n<t.length;n++)e+=String.fromCodePoint(t[n]);return a_e(e)}function cL(t){return t?.replace(/\/$/,"")}function bl(t){if(typeof t=="boolean")return{type:"boolean",properties:{}};const{type:e,description:n,required:r,properties:s,items:i,allOf:o,anyOf:a,oneOf:l,format:c,const:u,minLength:d}=t,h={};return n&&(h.description=n),r&&(h.required=r),c&&(h.format=c),u!==void 0&&(h.enum=[u]),e&&(Array.isArray(e)?e.includes("null")?(h.type=e.filter(f=>f!=="null")[0],h.nullable=!0):h.type=e:e==="null"?h.type="null":h.type=e),s&&(h.properties=Object.entries(s).reduce((f,[g,y])=>(f[g]=bl(y),f),{})),i&&(h.items=Array.isArray(i)?i.map(bl):bl(i)),o&&(h.allOf=o.map(bl)),a&&(h.anyOf=a.map(bl)),l&&(h.oneOf=l.map(bl)),d!==void 0&&(h.minLength=d),h}function l_e(t){var e;const n=[],r=[];let s=!0;for(const{role:i,content:o}of t)switch(i){case"system":{if(!s)throw new Vb({functionality:"system messages are only supported at the beginning of the conversation"});n.push({text:o});break}case"user":{s=!1;const a=[];for(const l of o)switch(l.type){case"text":{a.push({text:l.text});break}case"image":{if(l.image instanceof URL)throw new Vb({functionality:"Image URLs in user messages"});a.push({inlineData:{mimeType:(e=l.mimeType)!=null?e:"image/jpeg",data:lL(l.image)}});break}case"file":{if(l.data instanceof URL)throw new Vb({functionality:"File URLs in user messages"});a.push({inlineData:{mimeType:l.mimeType,data:l.data}});break}}r.push({role:"user",parts:a});break}case"assistant":{s=!1,r.push({role:"model",parts:o.map(a=>{switch(a.type){case"text":return a.text.length===0?void 0:{text:a.text};case"tool-call":return{functionCall:{name:a.toolName,args:a.args}}}}).filter(a=>a!==void 0)});break}case"tool":{s=!1,r.push({role:"user",parts:o.map(a=>({functionResponse:{name:a.toolName,response:a.result}}))});break}default:{const a=i;throw new Error(`Unsupported role: ${a}`)}}return{systemInstruction:n.length>0?{parts:n}:void 0,contents:r}}function kj(t){return t.includes("/")?t:`models/${t}`}var c_e=q.object({error:q.object({code:q.number().nullable(),message:q.string(),status:q.string()})}),qN=aL({errorSchema:c_e,errorToMessage:t=>t.error.message});function Cj({finishReason:t,hasToolCalls:e}){switch(t){case"STOP":return e?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"RECITATION":case"SAFETY":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";default:return"unknown"}}var u_e=class{constructor(t,e,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1,this.modelId=t,this.settings=e,this.config=n}get supportsObjectGeneration(){return this.settings.structuredOutputs!==!1}get provider(){return this.config.provider}async getArgs({mode:t,prompt:e,maxTokens:n,temperature:r,topP:s,topK:i,frequencyPenalty:o,presencePenalty:a,stopSequences:l,responseFormat:c,seed:u}){var d;const h=t.type,f=[];u!=null&&f.push({type:"unsupported-setting",setting:"seed"});const g={maxOutputTokens:n,temperature:r,topK:i??this.settings.topK,topP:s,frequencyPenalty:o,presencePenalty:a,stopSequences:l,responseMimeType:c?.type==="json"?"application/json":void 0,responseSchema:c?.type==="json"&&c.schema!=null&&this.supportsObjectGeneration?bl(c.schema):void 0},{contents:y,systemInstruction:m}=l_e(e);switch(h){case"regular":return{args:{generationConfig:g,contents:y,systemInstruction:m,safetySettings:this.settings.safetySettings,...f_e(t),cachedContent:this.settings.cachedContent},warnings:f};case"object-json":return{args:{generationConfig:{...g,responseMimeType:"application/json",responseSchema:t.schema!=null&&this.supportsObjectGeneration?bl(t.schema):void 0},contents:y,systemInstruction:m,safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:f};case"object-tool":return{args:{generationConfig:g,contents:y,tools:{functionDeclarations:[{name:t.tool.name,description:(d=t.tool.description)!=null?d:"",parameters:bl(t.tool.parameters)}]},toolConfig:{functionCallingConfig:{mode:"ANY"}},safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:f};default:{const b=h;throw new Error(`Unsupported type: ${b}`)}}}async doGenerate(t){var e,n;const{args:r,warnings:s}=await this.getArgs(t),{responseHeaders:i,value:o}=await Jc({url:`${this.config.baseURL}/${kj(this.modelId)}:generateContent`,headers:yd(this.config.headers(),t.headers),body:r,failedResponseHandler:qN,successfulResponseHandler:Ig(d_e),abortSignal:t.abortSignal,fetch:this.config.fetch}),{contents:a,...l}=r,c=o.candidates[0],u=Aj({parts:c.content.parts,generateId:this.config.generateId}),d=o.usageMetadata;return{text:Tj(c.content.parts),toolCalls:u,finishReason:Cj({finishReason:c.finishReason,hasToolCalls:u!=null&&u.length>0}),usage:{promptTokens:(e=d?.promptTokenCount)!=null?e:NaN,completionTokens:(n=d?.candidatesTokenCount)!=null?n:NaN},rawCall:{rawPrompt:a,rawSettings:l},rawResponse:{headers:i},warnings:s}}async doStream(t){const{args:e,warnings:n}=await this.getArgs(t),{responseHeaders:r,value:s}=await Jc({url:`${this.config.baseURL}/${kj(this.modelId)}:streamGenerateContent?alt=sse`,headers:yd(this.config.headers(),t.headers),body:e,failedResponseHandler:qN,successfulResponseHandler:BY(h_e),abortSignal:t.abortSignal,fetch:this.config.fetch}),{contents:i,...o}=e;let a="unknown",l={promptTokens:Number.NaN,completionTokens:Number.NaN};const c=this.config.generateId;let u=!1;return{stream:s.pipeThrough(new TransformStream({transform(d,h){var f,g;if(!d.success){h.enqueue({type:"error",error:d.error});return}const y=d.value,m=y.candidates[0];m?.finishReason!=null&&(a=Cj({finishReason:m.finishReason,hasToolCalls:u}));const b=y.usageMetadata;b!=null&&(l={promptTokens:(f=b.promptTokenCount)!=null?f:NaN,completionTokens:(g=b.candidatesTokenCount)!=null?g:NaN});const v=m.content;if(v==null)return;const _=Tj(v.parts);_!=null&&h.enqueue({type:"text-delta",textDelta:_});const E=Aj({parts:v.parts,generateId:c});if(E!=null)for(const w of E)h.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:w.toolCallId,toolName:w.toolName,argsTextDelta:w.args}),h.enqueue({type:"tool-call",toolCallType:"function",toolCallId:w.toolCallId,toolName:w.toolName,args:w.args}),u=!0},flush(d){d.enqueue({type:"finish",finishReason:a,usage:l})}})),rawCall:{rawPrompt:i,rawSettings:o},rawResponse:{headers:r},warnings:n}}};function Aj({parts:t,generateId:e}){const n=t.filter(r=>"functionCall"in r);return n.length===0?void 0:n.map(r=>({toolCallType:"function",toolCallId:e(),toolName:r.functionCall.name,args:JSON.stringify(r.functionCall.args)}))}function Tj(t){const e=t.filter(n=>"text"in n);return e.length===0?void 0:e.map(n=>n.text).join("")}var UY=q.object({role:q.string(),parts:q.array(q.union([q.object({text:q.string()}),q.object({functionCall:q.object({name:q.string(),args:q.unknown()})})]))}),d_e=q.object({candidates:q.array(q.object({content:UY,finishReason:q.string().optional()})),usageMetadata:q.object({promptTokenCount:q.number(),candidatesTokenCount:q.number().nullish(),totalTokenCount:q.number()}).optional()}),h_e=q.object({candidates:q.array(q.object({content:UY.optional(),finishReason:q.string().optional()})),usageMetadata:q.object({promptTokenCount:q.number(),candidatesTokenCount:q.number().nullish(),totalTokenCount:q.number()}).optional()});function f_e(t){var e;const n=(e=t.tools)!=null&&e.length?t.tools:void 0;if(n==null)return{tools:void 0,toolConfig:void 0};const r={functionDeclarations:n.map(o=>{var a;return{name:o.name,description:(a=o.description)!=null?a:"",parameters:bl(o.parameters)}})},s=t.toolChoice;if(s==null)return{tools:r,toolConfig:void 0};const i=s.type;switch(i){case"auto":return{tools:r,toolConfig:{functionCallingConfig:{mode:"AUTO"}}};case"none":return{tools:r,toolConfig:{functionCallingConfig:{mode:"NONE"}}};case"required":return{tools:r,toolConfig:{functionCallingConfig:{mode:"ANY"}}};case"tool":return{tools:r,toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[s.toolName]}}};default:{const o=i;throw new Error(`Unsupported tool choice type: ${o}`)}}}var p_e=class{constructor(t,e,n){this.specificationVersion="v1",this.modelId=t,this.settings=e,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){return 2048}get supportsParallelCalls(){return!0}async doEmbed({values:t,headers:e,abortSignal:n}){if(t.length>this.maxEmbeddingsPerCall)throw new sL({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:t});const{responseHeaders:r,value:s}=await Jc({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:yd(this.config.headers(),e),body:{requests:t.map(i=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:i}]},outputDimensionality:this.settings.outputDimensionality}))},failedResponseHandler:qN,successfulResponseHandler:Ig(m_e),abortSignal:n,fetch:this.config.fetch});return{embeddings:s.embeddings.map(i=>i.values),usage:void 0,rawResponse:{headers:r}}}},m_e=q.object({embeddings:q.array(q.object({values:q.array(q.number())}))});function $Y(t={}){var e,n;const r=(n=cL((e=t.baseURL)!=null?e:t.baseUrl))!=null?n:"https://generativelanguage.googleapis.com/v1beta",s=()=>({"x-goog-api-key":jY({apiKey:t.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...t.headers}),i=(l,c={})=>{var u;return new u_e(l,c,{provider:"google.generative-ai",baseURL:r,headers:s,generateId:(u=t.generateId)!=null?u:iL,fetch:t.fetch})},o=(l,c={})=>new p_e(l,c,{provider:"google.generative-ai",baseURL:r,headers:s,fetch:t.fetch}),a=function(l,c){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return i(l,c)};return a.languageModel=i,a.chat=i,a.generativeAI=i,a.embedding=o,a.textEmbedding=o,a.textEmbeddingModel=o,a}$Y();class g_e extends Kr{name="Google";getApiKeyLink="https://aistudio.google.com/app/apikey";config={apiTokenKey:"GOOGLE_GENERATIVE_AI_API_KEY"};staticModels=[{name:"gemini-1.5-flash-latest",label:"Gemini 1.5 Flash",provider:"Google",maxTokenAllowed:8192},{name:"gemini-2.0-flash-thinking-exp-01-21",label:"Gemini 2.0 Flash-thinking-exp-01-21",provider:"Google",maxTokenAllowed:65536},{name:"gemini-2.0-flash-exp",label:"Gemini 2.0 Flash",provider:"Google",maxTokenAllowed:8192},{name:"gemini-1.5-flash-002",label:"Gemini 1.5 Flash-002",provider:"Google",maxTokenAllowed:8192},{name:"gemini-1.5-flash-8b",label:"Gemini 1.5 Flash-8b",provider:"Google",maxTokenAllowed:8192},{name:"gemini-1.5-pro-latest",label:"Gemini 1.5 Pro",provider:"Google",maxTokenAllowed:8192},{name:"gemini-1.5-pro-002",label:"Gemini 1.5 Pro-002",provider:"Google",maxTokenAllowed:8192},{name:"gemini-exp-1206",label:"Gemini exp-1206",provider:"Google",maxTokenAllowed:8192}];async getDynamicModels(e,n,r){const{apiKey:s}=this.getProviderBaseUrlAndKey({apiKeys:e,providerSettings:n,serverEnv:r,defaultBaseUrlKey:"",defaultApiTokenKey:"GOOGLE_GENERATIVE_AI_API_KEY"});if(!s)throw`Missing Api Key configuration for ${this.name} provider`;return(await(await fetch(`https://generativelanguage.googleapis.com/v1beta/models?key=${s}`,{headers:{"Content-Type":"application/json"}})).json()).models.filter(l=>l.outputTokenLimit>8e3).map(l=>({name:l.name.replace("models/",""),label:`${l.displayName} - context ${Math.floor((l.inputTokenLimit+l.outputTokenLimit)/1e3)+"k"}`,provider:this.name,maxTokenAllowed:l.inputTokenLimit+l.outputTokenLimit||8e3}))}getModelInstance(e){const{model:n,serverEnv:r,apiKeys:s,providerSettings:i}=e,{apiKey:o}=this.getProviderBaseUrlAndKey({apiKeys:s,providerSettings:i?.[this.name],serverEnv:r,defaultBaseUrlKey:"",defaultApiTokenKey:"GOOGLE_GENERATIVE_AI_API_KEY"});if(!o)throw new Error(`Missing API key for ${this.name} provider`);return $Y({apiKey:o})(n)}}class b_e extends Kr{name="Groq";getApiKeyLink="https://console.groq.com/keys";config={apiTokenKey:"GROQ_API_KEY"};staticModels=[{name:"llama-3.1-8b-instant",label:"Llama 3.1 8b (Groq)",provider:"Groq",maxTokenAllowed:8e3},{name:"llama-3.2-11b-vision-preview",label:"Llama 3.2 11b (Groq)",provider:"Groq",maxTokenAllowed:8e3},{name:"llama-3.2-90b-vision-preview",label:"Llama 3.2 90b (Groq)",provider:"Groq",maxTokenAllowed:8e3},{name:"llama-3.2-3b-preview",label:"Llama 3.2 3b (Groq)",provider:"Groq",maxTokenAllowed:8e3},{name:"llama-3.2-1b-preview",label:"Llama 3.2 1b (Groq)",provider:"Groq",maxTokenAllowed:8e3},{name:"llama-3.3-70b-versatile",label:"Llama 3.3 70b (Groq)",provider:"Groq",maxTokenAllowed:8e3},{name:"deepseek-r1-distill-llama-70b",label:"Deepseek R1 Distill Llama 70b (Groq)",provider:"Groq",maxTokenAllowed:131072}];async getDynamicModels(e,n,r){const{apiKey:s}=this.getProviderBaseUrlAndKey({apiKeys:e,providerSettings:n,serverEnv:r,defaultBaseUrlKey:"",defaultApiTokenKey:"GROQ_API_KEY"});if(!s)throw`Missing Api Key configuration for ${this.name} provider`;return(await(await fetch("https://api.groq.com/openai/v1/models",{headers:{Authorization:`Bearer ${s}`}})).json()).data.filter(l=>l.object==="model"&&l.active&&l.context_window>8e3).map(l=>({name:l.id,label:`${l.id} - context ${l.context_window?Math.floor(l.context_window/1e3)+"k":"N/A"} [ by ${l.owned_by}]`,provider:this.name,maxTokenAllowed:l.context_window||8e3}))}getModelInstance(e){const{model:n,serverEnv:r,apiKeys:s,providerSettings:i}=e,{apiKey:o}=this.getProviderBaseUrlAndKey({apiKeys:s,providerSettings:i?.[this.name],serverEnv:r,defaultBaseUrlKey:"",defaultApiTokenKey:"GROQ_API_KEY"});if(!o)throw new Error(`Missing API key for ${this.name} provider`);return Jl({baseURL:"https://api.groq.com/openai/v1",apiKey:o})(n)}}class y_e extends Kr{name="HuggingFace";getApiKeyLink="https://huggingface.co/settings/tokens";config={apiTokenKey:"HuggingFace_API_KEY"};staticModels=[{name:"Qwen/Qwen2.5-Coder-32B-Instruct",label:"Qwen2.5-Coder-32B-Instruct (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3},{name:"01-ai/Yi-1.5-34B-Chat",label:"Yi-1.5-34B-Chat (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3},{name:"codellama/CodeLlama-34b-Instruct-hf",label:"CodeLlama-34b-Instruct (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3},{name:"NousResearch/Hermes-3-Llama-3.1-8B",label:"Hermes-3-Llama-3.1-8B (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3},{name:"Qwen/Qwen2.5-Coder-32B-Instruct",label:"Qwen2.5-Coder-32B-Instruct (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3},{name:"Qwen/Qwen2.5-72B-Instruct",label:"Qwen2.5-72B-Instruct (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3},{name:"meta-llama/Llama-3.1-70B-Instruct",label:"Llama-3.1-70B-Instruct (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3},{name:"meta-llama/Llama-3.1-405B",label:"Llama-3.1-405B (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3},{name:"01-ai/Yi-1.5-34B-Chat",label:"Yi-1.5-34B-Chat (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3},{name:"codellama/CodeLlama-34b-Instruct-hf",label:"CodeLlama-34b-Instruct (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3},{name:"NousResearch/Hermes-3-Llama-3.1-8B",label:"Hermes-3-Llama-3.1-8B (HuggingFace)",provider:"HuggingFace",maxTokenAllowed:8e3}];getModelInstance(e){const{model:n,serverEnv:r,apiKeys:s,providerSettings:i}=e,{apiKey:o}=this.getProviderBaseUrlAndKey({apiKeys:s,providerSettings:i?.[this.name],serverEnv:r,defaultBaseUrlKey:"",defaultApiTokenKey:"HuggingFace_API_KEY"});if(!o)throw new Error(`Missing API key for ${this.name} provider`);return Jl({baseURL:"https://api-inference.huggingface.co/v1/",apiKey:o})(n)}}var Nj={};class v_e extends Kr{name="LMStudio";getApiKeyLink="https://lmstudio.ai/";labelForGetApiKey="Get LMStudio";icon="i-ph:cloud-arrow-down";config={baseUrlKey:"LMSTUDIO_API_BASE_URL",baseUrl:"http://localhost:1234/"};staticModels=[];async getDynamicModels(e,n,r={}){let{baseUrl:s}=this.getProviderBaseUrlAndKey({apiKeys:e,providerSettings:n,serverEnv:r,defaultBaseUrlKey:"LMSTUDIO_API_BASE_URL",defaultApiTokenKey:""});if(!s)throw new Error("No baseUrl found for LMStudio provider");if(typeof window>"u"){const a=Nj?.RUNNING_IN_DOCKER==="true"||r?.RUNNING_IN_DOCKER==="true";s=a?s.replace("localhost","host.docker.internal"):s,s=a?s.replace("127.0.0.1","host.docker.internal"):s}return(await(await fetch(`${s}/v1/models`)).json()).data.map(a=>({name:a.id,label:a.id,provider:this.name,maxTokenAllowed:8e3}))}getModelInstance=e=>{const{apiKeys:n,providerSettings:r,serverEnv:s,model:i}=e;let{baseUrl:o}=this.getProviderBaseUrlAndKey({apiKeys:n,providerSettings:r?.[this.name],serverEnv:s,defaultBaseUrlKey:"LMSTUDIO_API_BASE_URL",defaultApiTokenKey:""});if(!o)throw new Error("No baseUrl found for LMStudio provider");const a=Nj.RUNNING_IN_DOCKER==="true"||s?.RUNNING_IN_DOCKER==="true";return typeof window>"u"&&(o=a?o.replace("localhost","host.docker.internal"):o,o=a?o.replace("127.0.0.1","host.docker.internal"):o),sR.debug("LMStudio Base Url used: ",o),Jl({baseURL:`${o}/v1`,apiKey:""})(i)}}function __e(t){const e=[];for(let n=0;n<t.length;n++){const{role:r,content:s}=t[n],i=n===t.length-1;switch(r){case"system":{e.push({role:"system",content:s});break}case"user":{e.push({role:"user",content:s.map(o=>{var a;switch(o.type){case"text":return{type:"text",text:o.text};case"image":return{type:"image_url",image_url:o.image instanceof URL?o.image.toString():`data:${(a=o.mimeType)!=null?a:"image/jpeg"};base64,${lL(o.image)}`};case"file":throw new Vb({functionality:"File content parts in user messages"})}})});break}case"assistant":{let o="";const a=[];for(const l of s)switch(l.type){case"text":{o+=l.text;break}case"tool-call":{a.push({id:l.toolCallId,type:"function",function:{name:l.toolName,arguments:JSON.stringify(l.args)}});break}default:{const c=l;throw new Error(`Unsupported part: ${c}`)}}e.push({role:"assistant",content:o,prefix:i?!0:void 0,tool_calls:a.length>0?a:void 0});break}case"tool":{for(const o of s)e.push({role:"tool",name:o.toolName,content:JSON.stringify(o.result),tool_call_id:o.toolCallId});break}default:{const o=r;throw new Error(`Unsupported role: ${o}`)}}}return e}function Pj(t){switch(t){case"stop":return"stop";case"length":case"model_length":return"length";case"tool_calls":return"tool-calls";default:return"unknown"}}var x_e=q.object({object:q.literal("error"),message:q.string(),type:q.string(),param:q.string().nullable(),code:q.string().nullable()}),KN=aL({errorSchema:x_e,errorToMessage:t=>t.message});function Ij({id:t,model:e,created:n}){return{id:t??void 0,modelId:e??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}var w_e=class{constructor(t,e,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1,this.modelId=t,this.settings=e,this.config=n}get provider(){return this.config.provider}getArgs({mode:t,prompt:e,maxTokens:n,temperature:r,topP:s,topK:i,frequencyPenalty:o,presencePenalty:a,stopSequences:l,responseFormat:c,seed:u}){const d=t.type,h=[];i!=null&&h.push({type:"unsupported-setting",setting:"topK"}),o!=null&&h.push({type:"unsupported-setting",setting:"frequencyPenalty"}),a!=null&&h.push({type:"unsupported-setting",setting:"presencePenalty"}),l!=null&&h.push({type:"unsupported-setting",setting:"stopSequences"}),c!=null&&c.type==="json"&&c.schema!=null&&h.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is not supported"});const f={model:this.modelId,safe_prompt:this.settings.safePrompt,max_tokens:n,temperature:r,top_p:s,random_seed:u,response_format:c?.type==="json"?{type:"json_object"}:void 0,messages:__e(e)};switch(d){case"regular":return{args:{...f,...k_e(t)},warnings:h};case"object-json":return{args:{...f,response_format:{type:"json_object"}},warnings:h};case"object-tool":return{args:{...f,tool_choice:"any",tools:[{type:"function",function:t.tool}]},warnings:h};default:{const g=d;throw new Error(`Unsupported type: ${g}`)}}}async doGenerate(t){var e,n;const{args:r,warnings:s}=this.getArgs(t),{responseHeaders:i,value:o}=await Jc({url:`${this.config.baseURL}/chat/completions`,headers:yd(this.config.headers(),t.headers),body:r,failedResponseHandler:KN,successfulResponseHandler:Ig(E_e),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:a,...l}=r,c=o.choices[0];let u=(e=c.message.content)!=null?e:void 0;const d=a[a.length-1];return d.role==="assistant"&&u?.startsWith(d.content)&&(u=u.slice(d.content.length)),{text:u,toolCalls:(n=c.message.tool_calls)==null?void 0:n.map(h=>({toolCallType:"function",toolCallId:h.id,toolName:h.function.name,args:h.function.arguments})),finishReason:Pj(c.finish_reason),usage:{promptTokens:o.usage.prompt_tokens,completionTokens:o.usage.completion_tokens},rawCall:{rawPrompt:a,rawSettings:l},rawResponse:{headers:i},response:Ij(o),warnings:s}}async doStream(t){const{args:e,warnings:n}=this.getArgs(t),{responseHeaders:r,value:s}=await Jc({url:`${this.config.baseURL}/chat/completions`,headers:yd(this.config.headers(),t.headers),body:{...e,stream:!0},failedResponseHandler:KN,successfulResponseHandler:BY(S_e),abortSignal:t.abortSignal,fetch:this.config.fetch}),{messages:i,...o}=e;let a="unknown",l={promptTokens:Number.NaN,completionTokens:Number.NaN},c=0,u=!1;return{stream:s.pipeThrough(new TransformStream({transform(d,h){if(!d.success){h.enqueue({type:"error",error:d.error});return}c++;const f=d.value;c===1&&h.enqueue({type:"response-metadata",...Ij(f)}),f.usage!=null&&(l={promptTokens:f.usage.prompt_tokens,completionTokens:f.usage.completion_tokens});const g=f.choices[0];if(g?.finish_reason!=null&&(a=Pj(g.finish_reason)),g?.delta==null)return;const y=g.delta;if(c<=2){const m=i[i.length-1];if(m.role==="assistant"&&y.content===m.content.trimEnd()){y.content.length<m.content.length&&(u=!0);return}}if(y.content!=null&&(h.enqueue({type:"text-delta",textDelta:u?y.content.trimStart():y.content}),u=!1),y.tool_calls!=null)for(const m of y.tool_calls)h.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:m.id,toolName:m.function.name,argsTextDelta:m.function.arguments}),h.enqueue({type:"tool-call",toolCallType:"function",toolCallId:m.id,toolName:m.function.name,args:m.function.arguments})},flush(d){d.enqueue({type:"finish",finishReason:a,usage:l})}})),rawCall:{rawPrompt:i,rawSettings:o},rawResponse:{headers:r},warnings:n}}},E_e=q.object({id:q.string().nullish(),created:q.number().nullish(),model:q.string().nullish(),choices:q.array(q.object({message:q.object({role:q.literal("assistant"),content:q.string().nullable(),tool_calls:q.array(q.object({id:q.string(),function:q.object({name:q.string(),arguments:q.string()})})).nullish()}),index:q.number(),finish_reason:q.string().nullish()})),object:q.literal("chat.completion"),usage:q.object({prompt_tokens:q.number(),completion_tokens:q.number()})}),S_e=q.object({id:q.string().nullish(),created:q.number().nullish(),model:q.string().nullish(),choices:q.array(q.object({delta:q.object({role:q.enum(["assistant"]).optional(),content:q.string().nullish(),tool_calls:q.array(q.object({id:q.string(),function:q.object({name:q.string(),arguments:q.string()})})).nullish()}),finish_reason:q.string().nullish(),index:q.number()})),usage:q.object({prompt_tokens:q.number(),completion_tokens:q.number()}).nullish()});function k_e(t){var e;const n=(e=t.tools)!=null&&e.length?t.tools:void 0;if(n==null)return{tools:void 0,tool_choice:void 0};const r=n.map(o=>({type:"function",function:{name:o.name,description:o.description,parameters:o.parameters}})),s=t.toolChoice;if(s==null)return{tools:r,tool_choice:void 0};const i=s.type;switch(i){case"auto":case"none":return{tools:r,tool_choice:i};case"required":return{tools:r,tool_choice:"any"};case"tool":return{tools:r.filter(o=>o.function.name===s.toolName),tool_choice:"any"};default:{const o=i;throw new Error(`Unsupported tool choice type: ${o}`)}}}var C_e=class{constructor(t,e,n){this.specificationVersion="v1",this.modelId=t,this.settings=e,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var t;return(t=this.settings.maxEmbeddingsPerCall)!=null?t:32}get supportsParallelCalls(){var t;return(t=this.settings.supportsParallelCalls)!=null?t:!1}async doEmbed({values:t,abortSignal:e,headers:n}){if(t.length>this.maxEmbeddingsPerCall)throw new sL({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:t});const{responseHeaders:r,value:s}=await Jc({url:`${this.config.baseURL}/embeddings`,headers:yd(this.config.headers(),n),body:{model:this.modelId,input:t,encoding_format:"float"},failedResponseHandler:KN,successfulResponseHandler:Ig(A_e),abortSignal:e,fetch:this.config.fetch});return{embeddings:s.data.map(i=>i.embedding),usage:s.usage?{tokens:s.usage.prompt_tokens}:void 0,rawResponse:{headers:r}}}},A_e=q.object({data:q.array(q.object({embedding:q.array(q.number())})),usage:q.object({prompt_tokens:q.number()}).nullish()});function HY(t={}){var e,n;const r=(n=cL((e=t.baseURL)!=null?e:t.baseUrl))!=null?n:"https://api.mistral.ai/v1",s=()=>({Authorization:`Bearer ${jY({apiKey:t.apiKey,environmentVariableName:"MISTRAL_API_KEY",description:"Mistral"})}`,...t.headers}),i=(l,c={})=>new w_e(l,c,{provider:"mistral.chat",baseURL:r,headers:s,fetch:t.fetch}),o=(l,c={})=>new C_e(l,c,{provider:"mistral.embedding",baseURL:r,headers:s,fetch:t.fetch}),a=function(l,c){if(new.target)throw new Error("The Mistral model function cannot be called with the new keyword.");return i(l,c)};return a.languageModel=i,a.chat=i,a.embedding=o,a.textEmbedding=o,a.textEmbeddingModel=o,a}HY();class T_e extends Kr{name="Mistral";getApiKeyLink="https://console.mistral.ai/api-keys/";config={apiTokenKey:"MISTRAL_API_KEY"};staticModels=[{name:"open-mistral-7b",label:"Mistral 7B",provider:"Mistral",maxTokenAllowed:8e3},{name:"open-mixtral-8x7b",label:"Mistral 8x7B",provider:"Mistral",maxTokenAllowed:8e3},{name:"open-mixtral-8x22b",label:"Mistral 8x22B",provider:"Mistral",maxTokenAllowed:8e3},{name:"open-codestral-mamba",label:"Codestral Mamba",provider:"Mistral",maxTokenAllowed:8e3},{name:"open-mistral-nemo",label:"Mistral Nemo",provider:"Mistral",maxTokenAllowed:8e3},{name:"ministral-8b-latest",label:"Mistral 8B",provider:"Mistral",maxTokenAllowed:8e3},{name:"mistral-small-latest",label:"Mistral Small",provider:"Mistral",maxTokenAllowed:8e3},{name:"codestral-latest",label:"Codestral",provider:"Mistral",maxTokenAllowed:8e3},{name:"mistral-large-latest",label:"Mistral Large Latest",provider:"Mistral",maxTokenAllowed:8e3}];getModelInstance(e){const{model:n,serverEnv:r,apiKeys:s,providerSettings:i}=e,{apiKey:o}=this.getProviderBaseUrlAndKey({apiKeys:s,providerSettings:i?.[this.name],serverEnv:r,defaultBaseUrlKey:"",defaultApiTokenKey:"MISTRAL_API_KEY"});if(!o)throw new Error(`Missing API key for ${this.name} provider`);return HY({apiKey:o})(n)}}var zY={},YN={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Allow=t.ALL=t.COLLECTION=t.ATOM=t.SPECIAL=t.INF=t._INFINITY=t.INFINITY=t.NAN=t.BOOL=t.NULL=t.OBJ=t.ARR=t.NUM=t.STR=void 0,t.STR=1,t.NUM=2,t.ARR=4,t.OBJ=8,t.NULL=16,t.BOOL=32,t.NAN=64,t.INFINITY=128,t._INFINITY=256,t.INF=t.INFINITY|t._INFINITY,t.SPECIAL=t.NULL|t.BOOL|t.INF|t.NAN,t.ATOM=t.STR|t.NUM|t.SPECIAL,t.COLLECTION=t.ARR|t.OBJ,t.ALL=t.ATOM|t.COLLECTION,t.Allow={STR:t.STR,NUM:t.NUM,ARR:t.ARR,OBJ:t.OBJ,NULL:t.NULL,BOOL:t.BOOL,NAN:t.NAN,INFINITY:t.INFINITY,_INFINITY:t._INFINITY,INF:t.INF,SPECIAL:t.SPECIAL,ATOM:t.ATOM,COLLECTION:t.COLLECTION,ALL:t.ALL},t.default=t.Allow})(YN);(function(t){var e=ii&&ii.__createBinding||(Object.create?function(c,u,d,h){h===void 0&&(h=d);var f=Object.getOwnPropertyDescriptor(u,d);(!f||("get"in f?!u.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return u[d]}}),Object.defineProperty(c,h,f)}:function(c,u,d,h){h===void 0&&(h=d),c[h]=u[d]}),n=ii&&ii.__exportStar||function(c,u){for(var d in c)d!=="default"&&!Object.prototype.hasOwnProperty.call(u,d)&&e(u,c,d)};Object.defineProperty(t,"__esModule",{value:!0}),t.Allow=t.MalformedJSON=t.PartialJSON=t.parseJSON=t.parse=void 0;const r=YN;Object.defineProperty(t,"Allow",{enumerable:!0,get:function(){return r.Allow}}),n(YN,t);class s extends Error{}t.PartialJSON=s;class i extends Error{}t.MalformedJSON=i;function o(c,u=r.Allow.ALL){if(typeof c!="string")throw new TypeError(`expecting str, got ${typeof c}`);if(!c.trim())throw new Error(`${c} is empty`);return a(c.trim(),u)}t.parseJSON=o;const a=(c,u)=>{const d=c.length;let h=0;const f=w=>{throw new s(`${w} at position ${h}`)},g=w=>{throw new i(`${w} at position ${h}`)},y=()=>(E(),h>=d&&f("Unexpected end of input"),c[h]==='"'?m():c[h]==="{"?b():c[h]==="["?v():c.substring(h,h+4)==="null"||r.Allow.NULL&u&&d-h<4&&"null".startsWith(c.substring(h))?(h+=4,null):c.substring(h,h+4)==="true"||r.Allow.BOOL&u&&d-h<4&&"true".startsWith(c.substring(h))?(h+=4,!0):c.substring(h,h+5)==="false"||r.Allow.BOOL&u&&d-h<5&&"false".startsWith(c.substring(h))?(h+=5,!1):c.substring(h,h+8)==="Infinity"||r.Allow.INFINITY&u&&d-h<8&&"Infinity".startsWith(c.substring(h))?(h+=8,1/0):c.substring(h,h+9)==="-Infinity"||r.Allow._INFINITY&u&&1<d-h&&d-h<9&&"-Infinity".startsWith(c.substring(h))?(h+=9,-1/0):c.substring(h,h+3)==="NaN"||r.Allow.NAN&u&&d-h<3&&"NaN".startsWith(c.substring(h))?(h+=3,NaN):_()),m=()=>{const w=h;let S=!1;for(h++;h<d&&(c[h]!=='"'||S&&c[h-1]==="\\");)S=c[h]==="\\"?!S:!1,h++;if(c.charAt(h)=='"')try{return JSON.parse(c.substring(w,++h-Number(S)))}catch(k){g(String(k))}else if(r.Allow.STR&u)try{return JSON.parse(c.substring(w,h-Number(S))+'"')}catch{return JSON.parse(c.substring(w,c.lastIndexOf("\\"))+'"')}f("Unterminated string literal")},b=()=>{h++,E();const w={};try{for(;c[h]!=="}";){if(E(),h>=d&&r.Allow.OBJ&u)return w;const S=m();E(),h++;try{const k=y();w[S]=k}catch(k){if(r.Allow.OBJ&u)return w;throw k}E(),c[h]===","&&h++}}catch{if(r.Allow.OBJ&u)return w;f("Expected '}' at end of object")}return h++,w},v=()=>{h++;const w=[];try{for(;c[h]!=="]";)w.push(y()),E(),c[h]===","&&h++}catch{if(r.Allow.ARR&u)return w;f("Expected ']' at end of array")}return h++,w},_=()=>{if(h===0){c==="-"&&g("Not sure what '-' is");try{return JSON.parse(c)}catch(S){if(r.Allow.NUM&u)try{return JSON.parse(c.substring(0,c.lastIndexOf("e")))}catch{}g(String(S))}}const w=h;for(c[h]==="-"&&h++;c[h]&&",]}".indexOf(c[h])===-1;)h++;h==d&&!(r.Allow.NUM&u)&&f("Unterminated number literal");try{return JSON.parse(c.substring(w,h))}catch{c.substring(w,h)==="-"&&f("Not sure what '-' is");try{return JSON.parse(c.substring(w,c.lastIndexOf("e")))}catch(k){g(String(k))}}},E=()=>{for(;h<d&&` 
\r	`.includes(c[h]);)h++};return y()},l=o;t.parse=l})(zY);function _T(t){const e=[];for(const{content:n,role:r}of t)switch(r){case"system":{e.push({content:n,role:"system"});break}case"user":{e.push({...n.reduce((s,i)=>{if(i.type==="text")s.content+=i.text;else{if(i.type==="image"&&i.image instanceof URL)throw new Vb({functionality:"Image URLs in user messages"});i.type==="image"&&i.image instanceof Uint8Array&&(s.images=s.images||[],s.images.push(lL(i.image)))}return s},{content:""}),role:"user"});break}case"assistant":{const s=[],i=[];for(const o of n)switch(o.type){case"text":{s.push(o.text);break}case"tool-call":{i.push({function:{arguments:o.args,name:o.toolName},id:o.toolCallId,type:"function"});break}default:{const a=o;throw new Error(`Unsupported part: ${a}`)}}e.push({content:s.join(","),role:"assistant",tool_calls:i.length>0?i:void 0});break}case"tool":{e.push(...n.map(s=>({content:typeof s.result=="object"?JSON.stringify(s.result):`${s.result}`,role:"tool",tool_call_id:s.toolCallId})));break}default:{const s=r;throw new Error(`Unsupported role: ${s}`)}}return e}var N_e=class{constructor({tools:t,type:e}){this._firstMessage=!0,this._tools=t,this._toolPartial="",this._toolCalls=[],this._type=e,this._detectedToolCall=!1}get toolCalls(){return this._toolCalls}get detectedToolCall(){return this._detectedToolCall}parse({controller:t,delta:e}){var n;if(this.detectToolCall(e),!this._detectedToolCall)return!1;this._toolPartial+=e;let r=zY.parse(this._toolPartial);Array.isArray(r)||(r=[r]);for(const[s,i]of r.entries()){const o=(n=JSON.stringify(i?.parameters))!=null?n:"";if(o==="")continue;this._toolCalls[s]||(this._toolCalls[s]={function:{arguments:"",name:i.name},id:iL(),type:"function"});const a=this._toolCalls[s];a.function.arguments=o,t.enqueue({argsTextDelta:e,toolCallId:a.id,toolCallType:"function",toolName:a.function.name,type:"tool-call-delta"})}return!0}finish({controller:t}){for(const e of this.toolCalls)t.enqueue({args:e.function.arguments,toolCallId:e.id,toolCallType:"function",toolName:e.function.name,type:"tool-call"});return this.finishReason()}detectToolCall(t){!this._tools||this._tools.length===0||this._firstMessage&&(this._type==="object-tool"?this._detectedToolCall=!0:this._type==="regular"&&(t.trim().startsWith("{")||t.trim().startsWith("["))&&(this._detectedToolCall=!0),this._firstMessage=!1)}finishReason(){return this.detectedToolCall?this._type==="object-tool"?"stop":"tool-calls":"stop"}};function P_e({finishReason:t,hasToolCalls:e}){switch(t){case"stop":return e?"tool-calls":"stop";default:return"other"}}var I_e=q.object({error:q.object({code:q.string().nullable(),message:q.string(),param:q.any().nullable(),type:q.string()})}),XN=aL({errorSchema:I_e,errorToMessage:t=>t.error.message});function R_e(t){return Object.fromEntries(Object.entries(t).filter(([,e])=>e!==void 0))}var L_e=class extends TransformStream{constructor(){super({flush:t=>{this.buffer.length!==0&&t.enqueue(this.buffer)},transform:(t,e)=>{for(t=this.buffer+t;;){const n=t.indexOf(`
`);if(n===-1)break;e.enqueue(t.slice(0,n)),t=t.slice(n+1)}this.buffer=t}}),this.buffer=""}},O_e=t=>async({response:e})=>{const n=wv(e);if(e.body===null)throw new kY({});return{responseHeaders:n,value:e.body.pipeThrough(new TextDecoderStream).pipeThrough(new L_e).pipeThrough(new TransformStream({transform(r,s){s.enqueue(oL({schema:t,text:r}))}}))}},D_e=class{constructor(t,e,n){this.modelId=t,this.settings=e,this.config=n,this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1}get provider(){return this.config.provider}getArguments({frequencyPenalty:t,maxTokens:e,mode:n,presencePenalty:r,prompt:s,responseFormat:i,seed:o,stopSequences:a,temperature:l,topK:c,topP:u}){var d,h,f;const g=n.type,y=[];i!==void 0&&i.type==="json"&&i.schema!==void 0&&y.push({details:"JSON response format schema is not supported",setting:"responseFormat",type:"unsupported-setting"});const m={format:i?.type,model:this.modelId,options:R_e({f16_kv:this.settings.f16Kv,frequency_penalty:t,low_vram:this.settings.lowVram,main_gpu:this.settings.mainGpu,min_p:this.settings.minP,mirostat:this.settings.mirostat,mirostat_eta:this.settings.mirostatEta,mirostat_tau:this.settings.mirostatTau,num_batch:this.settings.numBatch,num_ctx:this.settings.numCtx,num_gpu:this.settings.numGpu,num_keep:this.settings.numKeep,num_predict:e,num_thread:this.settings.numThread,numa:this.settings.numa,penalize_newline:this.settings.penalizeNewline,presence_penalty:r,repeat_last_n:this.settings.repeatLastN,repeat_penalty:this.settings.repeatPenalty,seed:o,stop:(d=this.settings.stop)!=null?d:a,temperature:l,tfs_z:this.settings.tfsZ,top_k:(h=this.settings.topK)!=null?h:c,top_p:u,typical_p:this.settings.typicalP,use_mlock:this.settings.useMlock,use_mmap:this.settings.useMmap,vocab_only:this.settings.vocabOnly})};switch(g){case"regular":{const b=(f=n.tools)!=null&&f.length?n.tools:void 0;return{args:{...m,messages:_T(s),tools:b?.map(v=>({function:{description:v.description,name:v.name,parameters:v.parameters},type:"function"}))},type:g,warnings:y}}case"object-json":return{args:{...m,format:"json",messages:_T(s)},type:g,warnings:y};case"object-tool":return{args:{...m,messages:_T(s),tool_choice:{function:{name:n.tool.name},type:"function"},tools:[{function:{description:n.tool.description,name:n.tool.name,parameters:n.tool.parameters},type:"function"}]},type:g,warnings:y};default:{const b=g;throw new Error(`Unsupported type: ${b}`)}}}async doGenerate(t){var e,n;const{args:r,warnings:s}=this.getArguments(t),{responseHeaders:i,value:o}=await Jc({abortSignal:t.abortSignal,body:{...r,stream:!1},failedResponseHandler:XN,fetch:this.config.fetch,headers:yd(this.config.headers(),t.headers),successfulResponseHandler:Ig(M_e),url:`${this.config.baseURL}/chat`}),{messages:a,...l}=r,c=(e=o.message.tool_calls)==null?void 0:e.map(u=>{var d;return{args:JSON.stringify(u.function.arguments),toolCallId:(d=u.id)!=null?d:iL(),toolCallType:"function",toolName:u.function.name}});return{finishReason:P_e({finishReason:o.done_reason,hasToolCalls:c!==void 0&&c.length>0}),rawCall:{rawPrompt:a,rawSettings:l},rawResponse:{headers:i},text:(n=o.message.content)!=null?n:void 0,toolCalls:c,usage:{completionTokens:o.eval_count||0,promptTokens:o.prompt_eval_count||0},warnings:s}}async doStream(t){const{args:e,type:n,warnings:r}=this.getArguments(t),{responseHeaders:s,value:i}=await Jc({abortSignal:t.abortSignal,body:e,failedResponseHandler:XN,fetch:this.config.fetch,headers:yd(this.config.headers(),t.headers),successfulResponseHandler:O_e(j_e),url:`${this.config.baseURL}/chat`}),{messages:o,...a}=e,l=t.mode.type==="regular"?t.mode.tools:t.mode.type==="object-tool"?[t.mode.tool]:void 0,c=new N_e({tools:l,type:n});let u="other",d={completionTokens:Number.NaN,promptTokens:Number.NaN};const{experimentalStreamTools:h=!0}=this.settings;return{rawCall:{rawPrompt:o,rawSettings:a},rawResponse:{headers:s},stream:i.pipeThrough(new TransformStream({async flush(f){f.enqueue({finishReason:u,type:"finish",usage:d})},async transform(f,g){if(!f.success){g.enqueue({error:f.error,type:"error"});return}const y=f.value;if(y.done){u=c.finish({controller:g}),d={completionTokens:y.eval_count,promptTokens:y.prompt_eval_count||0};return}h&&c.parse({controller:g,delta:y.message.content})||y.message.content!==null&&g.enqueue({textDelta:y.message.content,type:"text-delta"})}})),warnings:r}}},M_e=q.object({created_at:q.string(),done:q.literal(!0),done_reason:q.string().optional().nullable(),eval_count:q.number(),eval_duration:q.number(),load_duration:q.number().optional(),message:q.object({content:q.string(),role:q.string(),tool_calls:q.array(q.object({function:q.object({arguments:q.record(q.any()),name:q.string()}),id:q.string().optional()})).optional().nullable()}),model:q.string(),prompt_eval_count:q.number().optional(),prompt_eval_duration:q.number().optional(),total_duration:q.number()}),j_e=q.discriminatedUnion("done",[q.object({created_at:q.string(),done:q.literal(!1),message:q.object({content:q.string(),role:q.string()}),model:q.string()}),q.object({created_at:q.string(),done:q.literal(!0),eval_count:q.number(),eval_duration:q.number(),load_duration:q.number().optional(),model:q.string(),prompt_eval_count:q.number().optional(),prompt_eval_duration:q.number().optional(),total_duration:q.number()})]),F_e=class{constructor(t,e,n){this.specificationVersion="v1",this.modelId=t,this.settings=e,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var t;return(t=this.settings.maxEmbeddingsPerCall)!=null?t:2048}get supportsParallelCalls(){return!1}async doEmbed({abortSignal:t,values:e}){if(e.length>this.maxEmbeddingsPerCall)throw new sL({maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,modelId:this.modelId,provider:this.provider,values:e});const{responseHeaders:n,value:r}=await Jc({abortSignal:t,body:{input:e,model:this.modelId},failedResponseHandler:XN,fetch:this.config.fetch,headers:this.config.headers(),successfulResponseHandler:Ig(B_e),url:`${this.config.baseURL}/embed`});return{embeddings:r.embeddings,rawResponse:{headers:n},usage:r.prompt_eval_count?{tokens:r.prompt_eval_count}:void 0}}},B_e=q.object({embeddings:q.array(q.array(q.number())),prompt_eval_count:q.number().nullable()});function U_e(t={}){var e;const n=(e=cL(t.baseURL))!=null?e:"http://127.0.0.1:11434/api",r=()=>({...t.headers}),s=(a,l={})=>new D_e(a,l,{baseURL:n,fetch:t.fetch,headers:r,provider:"ollama.chat"}),i=(a,l={})=>new F_e(a,l,{baseURL:n,fetch:t.fetch,headers:r,provider:"ollama.embedding"}),o=function(a,l){if(new.target)throw new Error("The Ollama model function cannot be called with the new keyword.");return s(a,l)};return o.chat=s,o.embedding=i,o.languageModel=s,o.textEmbedding=i,o.textEmbeddingModel=i,o}var $_e=U_e(),dE={};const H_e=dE?.DEFAULT_NUM_CTX?parseInt(dE.DEFAULT_NUM_CTX,10):32768;class z_e extends Kr{name="Ollama";getApiKeyLink="https://ollama.com/download";labelForGetApiKey="Download Ollama";icon="i-ph:cloud-arrow-down";config={baseUrlKey:"OLLAMA_API_BASE_URL"};staticModels=[];async getDynamicModels(e,n,r={}){let{baseUrl:s}=this.getProviderBaseUrlAndKey({apiKeys:e,providerSettings:n,serverEnv:r,defaultBaseUrlKey:"OLLAMA_API_BASE_URL",defaultApiTokenKey:""});if(!s)throw new Error("No baseUrl found for OLLAMA provider");if(typeof window>"u"){const a=dE?.RUNNING_IN_DOCKER==="true"||r?.RUNNING_IN_DOCKER==="true";s=a?s.replace("localhost","host.docker.internal"):s,s=a?s.replace("127.0.0.1","host.docker.internal"):s}return(await(await fetch(`${s}/api/tags`)).json()).models.map(a=>({name:a.name,label:`${a.name} (${a.details.parameter_size})`,provider:this.name,maxTokenAllowed:8e3}))}getModelInstance=e=>{const{apiKeys:n,providerSettings:r,serverEnv:s,model:i}=e;let{baseUrl:o}=this.getProviderBaseUrlAndKey({apiKeys:n,providerSettings:r?.[this.name],serverEnv:s,defaultBaseUrlKey:"OLLAMA_API_BASE_URL",defaultApiTokenKey:""});if(!o)throw new Error("No baseUrl found for OLLAMA provider");const a=dE?.RUNNING_IN_DOCKER==="true"||s?.RUNNING_IN_DOCKER==="true";o=a?o.replace("localhost","host.docker.internal"):o,o=a?o.replace("127.0.0.1","host.docker.internal"):o,sR.debug("Ollama Base Url used: ",o);const l=$_e(i,{numCtx:H_e});return l.config.baseURL=`${o}/api`,l}}var Rc=class extends Error{constructor({message:t,url:e,requestBodyValues:n,statusCode:r,responseHeaders:s,responseBody:i,cause:o,isRetryable:a=r!=null&&(r===408||r===409||r===429||r>=500),data:l}){super(t),this.name="AI_APICallError",this.url=e,this.requestBodyValues=n,this.statusCode=r,this.responseHeaders=s,this.responseBody=i,this.cause=o,this.isRetryable=a,this.data=l}static isAPICallError(t){return t instanceof Error&&t.name==="AI_APICallError"&&typeof t.url=="string"&&typeof t.requestBodyValues=="object"&&(t.statusCode==null||typeof t.statusCode=="number")&&(t.responseHeaders==null||typeof t.responseHeaders=="object")&&(t.responseBody==null||typeof t.responseBody=="string")&&(t.cause==null||typeof t.cause=="object")&&typeof t.isRetryable=="boolean"&&(t.data==null||typeof t.data=="object")}toJSON(){return{name:this.name,message:this.message,url:this.url,requestBodyValues:this.requestBodyValues,statusCode:this.statusCode,responseHeaders:this.responseHeaders,responseBody:this.responseBody,cause:this.cause,isRetryable:this.isRetryable,data:this.data}}},V_e=class extends Error{constructor({message:t="Empty response body"}={}){super(t),this.name="AI_EmptyResponseBodyError"}static isEmptyResponseBodyError(t){return t instanceof Error&&t.name==="AI_EmptyResponseBodyError"}toJSON(){return{name:this.name,message:this.message,stack:this.stack}}},W_e=class extends Error{constructor({prompt:t,message:e}){super(`Invalid prompt: ${e}`),this.name="AI_InvalidPromptError",this.prompt=t}static isInvalidPromptError(t){return t instanceof Error&&t.name==="AI_InvalidPromptError"&&prompt!=null}toJSON(){return{name:this.name,message:this.message,stack:this.stack,prompt:this.prompt}}},xT=class extends Error{constructor({data:t,message:e=`Invalid response data: ${JSON.stringify(t)}.`}){super(e),this.name="AI_InvalidResponseDataError",this.data=t}static isInvalidResponseDataError(t){return t instanceof Error&&t.name==="AI_InvalidResponseDataError"&&t.data!=null}toJSON(){return{name:this.name,message:this.message,stack:this.stack,data:this.data}}};function VY(t){return t==null?"unknown error":typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}var hE=class extends Error{constructor({text:t,cause:e}){super(`JSON parsing failed: Text: ${t}.
Error message: ${VY(e)}`),this.name="AI_JSONParseError",this.cause=e,this.text=t}static isJSONParseError(t){return t instanceof Error&&t.name==="AI_JSONParseError"&&typeof t.text=="string"&&typeof t.cause=="string"}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,valueText:this.text}}},mx=class extends Error{constructor({message:t}){super(t),this.name="AI_LoadAPIKeyError"}static isLoadAPIKeyError(t){return t instanceof Error&&t.name==="AI_LoadAPIKeyError"}toJSON(){return{name:this.name,message:this.message}}},Wb=class extends Error{constructor({value:t,cause:e}){super(`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${VY(e)}`),this.name="AI_TypeValidationError",this.cause=e,this.value=t}static isTypeValidationError(t){return t instanceof Error&&t.name==="AI_TypeValidationError"}toJSON(){return{name:this.name,message:this.message,cause:this.cause,stack:this.stack,value:this.value}}},Lc=class extends Error{constructor({functionality:e}){super(`'${e}' functionality not supported.`),this.name="AI_UnsupportedFunctionalityError",this.functionality=e}static isUnsupportedFunctionalityError(e){return e instanceof Error&&e.name==="AI_UnsupportedFunctionalityError"&&typeof e.functionality=="string"}toJSON(){return{name:this.name,message:this.message,stack:this.stack,functionality:this.functionality}}},G_e={};function fE(...t){return t.reduce((e,n)=>({...e,...n??{}}),{})}function wk(t){const e={};return t.headers.forEach((n,r)=>{e[r]=n}),e}var wT=KK("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",7);function ET(t){return t instanceof Error&&(t.name==="AbortError"||t.name==="TimeoutError")}function q_e({apiKey:t,environmentVariableName:e,apiKeyParameterName:n="apiKey",description:r}){if(typeof t=="string")return t;if(t!=null)throw new mx({message:`${r} API key must be a string.`});if(typeof An>"u")throw new mx({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(t=G_e[e],t==null)throw new mx({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${e} environment variable.`});if(typeof t!="string")throw new mx({message:`${r} API key must be a string. The value of the ${e} environment variable is not a string.`});return t}function K_e({value:t,schema:e}){try{return e.parse(t)}catch(n){throw new Wb({value:t,cause:n})}}function Y_e({value:t,schema:e}){try{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:new Wb({value:t,cause:n.error})}}catch(n){return{success:!1,error:Wb.isTypeValidationError(n)?n:new Wb({value:t,cause:n})}}}function X_e({text:t,schema:e}){try{const n=Xl.parse(t);return e==null?n:K_e({value:n,schema:e})}catch(n){throw hE.isJSONParseError(n)||Wb.isTypeValidationError(n)?n:new hE({text:t,cause:n})}}function WY({text:t,schema:e}){try{const n=Xl.parse(t);return e==null?{success:!0,value:n}:Y_e({value:n,schema:e})}catch(n){return{success:!1,error:hE.isJSONParseError(n)?n:new hE({text:t,cause:n})}}}function Rj(t){try{return Xl.parse(t),!0}catch{return!1}}function J_e(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>n!=null))}var Z_e=()=>fetch,pE=async({url:t,headers:e,body:n,failedResponseHandler:r,successfulResponseHandler:s,abortSignal:i,fetch:o})=>Q_e({url:t,headers:{"Content-Type":"application/json",...e},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:s,abortSignal:i,fetch:o}),Q_e=async({url:t,headers:e={},body:n,successfulResponseHandler:r,failedResponseHandler:s,abortSignal:i,fetch:o=Z_e()})=>{try{const a=await o(t,{method:"POST",headers:J_e(e),body:n.content,signal:i}),l=wk(a);if(!a.ok){let c;try{c=await s({response:a,url:t,requestBodyValues:n.values})}catch(u){throw ET(u)||Rc.isAPICallError(u)?u:new Rc({message:"Failed to process error response",cause:u,statusCode:a.status,url:t,responseHeaders:l,requestBodyValues:n.values})}throw c.value}try{return await r({response:a,url:t,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(ET(c)||Rc.isAPICallError(c))?c:new Rc({message:"Failed to process successful response",cause:c,statusCode:a.status,url:t,responseHeaders:l,requestBodyValues:n.values})}}catch(a){if(ET(a))throw a;if(a instanceof TypeError&&a.message==="fetch failed"){const l=a.cause;if(l!=null)throw new Rc({message:`Cannot connect to API: ${l.message}`,cause:l,url:t,requestBodyValues:n.values,isRetryable:!0})}throw a}},exe=({errorSchema:t,errorToMessage:e,isRetryable:n})=>async({response:r,url:s,requestBodyValues:i})=>{const o=await r.text(),a=wk(r);if(o.trim()==="")return{responseHeaders:a,value:new Rc({message:r.statusText,url:s,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:o,isRetryable:n?.(r)})};try{const l=X_e({text:o,schema:t});return{responseHeaders:a,value:new Rc({message:e(l),url:s,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:o,data:l,isRetryable:n?.(r,l)})}}catch{return{responseHeaders:a,value:new Rc({message:r.statusText,url:s,requestBodyValues:i,statusCode:r.status,responseHeaders:a,responseBody:o,isRetryable:n?.(r)})}}},GY=t=>async({response:e})=>{const n=wk(e);if(e.body==null)throw new V_e({});return{responseHeaders:n,value:e.body.pipeThrough(new TextDecoderStream).pipeThrough(new rL).pipeThrough(new TransformStream({transform({data:r},s){r!=="[DONE]"&&s.enqueue(WY({text:r,schema:t}))}}))}},qY=t=>async({response:e,url:n,requestBodyValues:r})=>{const s=await e.text(),i=WY({text:s,schema:t}),o=wk(e);if(!i.success)throw new Rc({message:"Invalid JSON response",cause:i.error,statusCode:e.status,responseHeaders:o,responseBody:s,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value}};function txe(t){let e="";for(let n=0;n<t.length;n++)e+=String.fromCodePoint(t[n]);return globalThis.btoa(e)}function nxe(t){return t?.replace(/\/$/,"")}var rxe=Object.defineProperty,sxe=Object.defineProperties,ixe=Object.getOwnPropertyDescriptors,mE=Object.getOwnPropertySymbols,KY=Object.prototype.hasOwnProperty,YY=Object.prototype.propertyIsEnumerable,Lj=(t,e,n)=>e in t?rxe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,kc=(t,e)=>{for(var n in e||(e={}))KY.call(e,n)&&Lj(t,n,e[n]);if(mE)for(var n of mE(e))YY.call(e,n)&&Lj(t,n,e[n]);return t},Xw=(t,e)=>sxe(t,ixe(e)),gE=(t,e)=>{var n={};for(var r in t)KY.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&mE)for(var r of mE(t))e.indexOf(r)<0&&YY.call(t,r)&&(n[r]=t[r]);return n};function oxe(t){var e;const n=[];for(const{role:r,content:s}of t)switch(r){case"system":{n.push({role:"system",content:s});break}case"user":{if(s.length===1&&((e=s[0])==null?void 0:e.type)==="text"){n.push({role:"user",content:s[0].text});break}n.push({role:"user",content:s.map(i=>{var o;switch(i.type){case"text":return{type:"text",text:i.text};case"image":return{type:"image_url",image_url:{url:i.image instanceof URL?i.image.toString():`data:${(o=i.mimeType)!=null?o:"image/jpeg"};base64,${txe(i.image)}`}}}})});break}case"assistant":{let i="";const o=[];for(const a of s)switch(a.type){case"text":{i+=a.text;break}case"tool-call":{o.push({id:a.toolCallId,type:"function",function:{name:a.toolName,arguments:JSON.stringify(a.args)}});break}default:{const l=a;throw new Error(`Unsupported part: ${l}`)}}n.push({role:"assistant",content:i,tool_calls:o.length>0?o:void 0});break}case"tool":{for(const i of s)n.push({role:"tool",tool_call_id:i.toolCallId,content:JSON.stringify(i.result)});break}default:{const i=r;throw new Error(`Unsupported role: ${i}`)}}return n}function Oj(t){var e,n;return(n=(e=t?.content)==null?void 0:e.map(({token:r,logprob:s,top_logprobs:i})=>({token:r,logprob:s,topLogprobs:i?i.map(({token:o,logprob:a})=>({token:o,logprob:a})):[]})))!=null?n:void 0}function bE(t){switch(t){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var uL=q.object({error:q.object({message:q.string(),type:q.string(),param:q.any().nullable(),code:q.string().nullable()})}),yE=exe({errorSchema:uL,errorToMessage:t=>t.error.message}),axe=class{constructor(t,e,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="tool",this.modelId=t,this.settings=e,this.config=n}get provider(){return this.config.provider}getArgs({mode:t,prompt:e,maxTokens:n,temperature:r,topP:s,frequencyPenalty:i,presencePenalty:o,seed:a}){const l=t.type,c=kc({model:this.modelId,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:s,frequency_penalty:i,presence_penalty:o,seed:a,messages:oxe(e)},this.config.extraBody);switch(l){case"regular":return kc(kc({},c),uxe(t));case"object-json":return Xw(kc({},c),{response_format:{type:"json_object"}});case"object-tool":return Xw(kc({},c),{tool_choice:{type:"function",function:{name:t.tool.name}},tools:[{type:"function",function:{name:t.tool.name,description:t.tool.description,parameters:t.tool.parameters}}]});case"object-grammar":throw new Lc({functionality:"object-grammar mode"});default:{const u=l;throw new Error(`Unsupported type: ${u}`)}}}async doGenerate(t){var e,n;const r=this.getArgs(t),{responseHeaders:s,value:i}=await pE({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:fE(this.config.headers(),t.headers),body:r,failedResponseHandler:yE,successfulResponseHandler:qY(lxe),abortSignal:t.abortSignal,fetch:this.config.fetch}),o=r,{messages:a}=o,l=gE(o,["messages"]),c=i.choices[0];if(c==null)throw new Error("No choice in response");return{text:(e=c.message.content)!=null?e:void 0,toolCalls:(n=c.message.tool_calls)==null?void 0:n.map(u=>{var d;return{toolCallType:"function",toolCallId:(d=u.id)!=null?d:wT(),toolName:u.function.name,args:u.function.arguments}}),finishReason:bE(c.finish_reason),usage:{promptTokens:i.usage.prompt_tokens,completionTokens:i.usage.completion_tokens},rawCall:{rawPrompt:a,rawSettings:l},rawResponse:{headers:s},warnings:[],logprobs:Oj(c.logprobs)}}async doStream(t){const e=this.getArgs(t),{responseHeaders:n,value:r}=await pE({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:fE(this.config.headers(),t.headers),body:Xw(kc({},e),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:yE,successfulResponseHandler:GY(cxe),abortSignal:t.abortSignal,fetch:this.config.fetch}),s=e,{messages:i}=s,o=gE(s,["messages"]),a=[];let l="other",c={promptTokens:Number.NaN,completionTokens:Number.NaN},u;return{stream:r.pipeThrough(new TransformStream({transform(d,h){var f,g,y,m,b,v,_,E,w,S,k,x;if(!d.success){l="error",h.enqueue({type:"error",error:d.error});return}const I=d.value;if("error"in I){l="error",h.enqueue({type:"error",error:I.error});return}I.usage!=null&&(c={promptTokens:I.usage.prompt_tokens,completionTokens:I.usage.completion_tokens});const R=I.choices[0];if(R?.finish_reason!=null&&(l=bE(R.finish_reason)),R?.delta==null)return;const C=R.delta;C.content!=null&&h.enqueue({type:"text-delta",textDelta:C.content});const N=Oj(R?.logprobs);if(N?.length&&(u===void 0&&(u=[]),u.push(...N)),C.tool_calls!=null)for(const O of C.tool_calls){const P=O.index;if(a[P]==null){if(O.type!=="function")throw new xT({data:O,message:"Expected 'function' type."});if(O.id==null)throw new xT({data:O,message:"Expected 'id' to be a string."});if(((f=O.function)==null?void 0:f.name)==null)throw new xT({data:O,message:"Expected 'function.name' to be a string."});a[P]={id:O.id,type:"function",function:{name:O.function.name,arguments:(g=O.function.arguments)!=null?g:""}};const ee=a[P];if(ee==null)throw new Error("Tool call is missing");((y=ee.function)==null?void 0:y.name)!=null&&((m=ee.function)==null?void 0:m.arguments)!=null&&Rj(ee.function.arguments)&&(h.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ee.id,toolName:ee.function.name,argsTextDelta:ee.function.arguments}),h.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(b=ee.id)!=null?b:wT(),toolName:ee.function.name,args:ee.function.arguments}));continue}const $=a[P];if($==null)throw new Error("Tool call is missing");((v=O.function)==null?void 0:v.arguments)!=null&&($.function.arguments+=(E=(_=O.function)==null?void 0:_.arguments)!=null?E:""),h.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:$.id,toolName:$.function.name,argsTextDelta:(w=O.function.arguments)!=null?w:""}),((S=$.function)==null?void 0:S.name)!=null&&((k=$.function)==null?void 0:k.arguments)!=null&&Rj($.function.arguments)&&h.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(x=$.id)!=null?x:wT(),toolName:$.function.name,args:$.function.arguments})}},flush(d){d.enqueue({type:"finish",finishReason:l,logprobs:u,usage:c})}})),rawCall:{rawPrompt:i,rawSettings:o},rawResponse:{headers:n},warnings:[]}}},lxe=q.object({choices:q.array(q.object({message:q.object({role:q.literal("assistant"),content:q.string().nullable().optional(),tool_calls:q.array(q.object({id:q.string().optional().nullable(),type:q.literal("function"),function:q.object({name:q.string(),arguments:q.string()})})).optional()}),index:q.number(),logprobs:q.object({content:q.array(q.object({token:q.string(),logprob:q.number(),top_logprobs:q.array(q.object({token:q.string(),logprob:q.number()}))})).nullable()}).nullable().optional(),finish_reason:q.string().optional().nullable()})),usage:q.object({prompt_tokens:q.number(),completion_tokens:q.number()})}),cxe=q.union([q.object({choices:q.array(q.object({delta:q.object({role:q.enum(["assistant"]).optional(),content:q.string().nullish(),tool_calls:q.array(q.object({index:q.number(),id:q.string().nullish(),type:q.literal("function").optional(),function:q.object({name:q.string().nullish(),arguments:q.string().nullish()})})).nullish()}).nullish(),logprobs:q.object({content:q.array(q.object({token:q.string(),logprob:q.number(),top_logprobs:q.array(q.object({token:q.string(),logprob:q.number()}))})).nullable()}).nullish(),finish_reason:q.string().nullable().optional(),index:q.number()})),usage:q.object({prompt_tokens:q.number(),completion_tokens:q.number()}).nullish()}),uL]);function uxe(t){var e;const n=(e=t.tools)!=null&&e.length?t.tools:void 0;if(n==null)return{tools:void 0,tool_choice:void 0};const r=n.map(o=>({type:"function",function:{name:o.name,description:o.description,parameters:o.parameters}})),s=t.toolChoice;if(s==null)return{tools:r,tool_choice:void 0};const i=s.type;switch(i){case"auto":case"none":case"required":return{tools:r,tool_choice:i};case"tool":return{tools:r,tool_choice:{type:"function",function:{name:s.toolName}}};default:{const o=i;throw new Error(`Unsupported tool choice type: ${o}`)}}}function dxe({prompt:t,inputFormat:e,user:n="user",assistant:r="assistant"}){if(e==="prompt"&&t.length===1&&t[0]&&t[0].role==="user"&&t[0].content.length===1&&t[0].content[0]&&t[0].content[0].type==="text")return{prompt:t[0].content[0].text};let s="";t[0]&&t[0].role==="system"&&(s+=`${t[0].content}

`,t=t.slice(1));for(const{role:i,content:o}of t)switch(i){case"system":throw new W_e({message:"Unexpected system message in prompt: ${content}",prompt:t});case"user":{const a=o.map(l=>{switch(l.type){case"text":return l.text;case"image":throw new Lc({functionality:"images"})}}).join("");s+=`${n}:
${a}

`;break}case"assistant":{const a=o.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new Lc({functionality:"tool-call messages"})}}).join("");s+=`${r}:
${a}

`;break}case"tool":throw new Lc({functionality:"tool messages"});default:{const a=i;throw new Error(`Unsupported role: ${a}`)}}return s+=`${r}:
`,{prompt:s,stopSequences:[`
${n}:`]}}function Dj(t){return t?.tokens.map((e,n)=>{var r,s;return{token:e,logprob:(r=t.token_logprobs[n])!=null?r:0,topLogprobs:t.top_logprobs?Object.entries((s=t.top_logprobs[n])!=null?s:{}).map(([i,o])=>({token:i,logprob:o})):[]}})}var hxe=class{constructor(t,e,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=t,this.settings=e,this.config=n}get provider(){return this.config.provider}getArgs({mode:t,inputFormat:e,prompt:n,maxTokens:r,temperature:s,topP:i,frequencyPenalty:o,presencePenalty:a,seed:l}){var c;const u=t.type,{prompt:d,stopSequences:h}=dxe({prompt:n,inputFormat:e}),f=kc({model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:s,top_p:i,frequency_penalty:o,presence_penalty:a,seed:l,prompt:d,stop:h},this.config.extraBody);switch(u){case"regular":{if((c=t.tools)!=null&&c.length)throw new Lc({functionality:"tools"});if(t.toolChoice)throw new Lc({functionality:"toolChoice"});return f}case"object-json":throw new Lc({functionality:"object-json mode"});case"object-tool":throw new Lc({functionality:"object-tool mode"});case"object-grammar":throw new Lc({functionality:"object-grammar mode"});default:{const g=u;throw new Error(`Unsupported type: ${g}`)}}}async doGenerate(t){const e=this.getArgs(t),{responseHeaders:n,value:r}=await pE({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:fE(this.config.headers(),t.headers),body:e,failedResponseHandler:yE,successfulResponseHandler:qY(fxe),abortSignal:t.abortSignal,fetch:this.config.fetch}),s=e,{prompt:i}=s,o=gE(s,["prompt"]),a=r.choices[0];if(!a)throw new Error("No choice in OpenRouter completion response");return{text:a.text,usage:{promptTokens:r.usage.prompt_tokens,completionTokens:r.usage.completion_tokens},finishReason:bE(a.finish_reason),logprobs:Dj(a.logprobs),rawCall:{rawPrompt:i,rawSettings:o},rawResponse:{headers:n},warnings:[]}}async doStream(t){const e=this.getArgs(t),{responseHeaders:n,value:r}=await pE({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:fE(this.config.headers(),t.headers),body:Xw(kc({},this.getArgs(t)),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:yE,successfulResponseHandler:GY(pxe),abortSignal:t.abortSignal,fetch:this.config.fetch}),s=e,{prompt:i}=s,o=gE(s,["prompt"]);let a="other",l={promptTokens:Number.NaN,completionTokens:Number.NaN},c;return{stream:r.pipeThrough(new TransformStream({transform(u,d){if(!u.success){a="error",d.enqueue({type:"error",error:u.error});return}const h=u.value;if("error"in h){a="error",d.enqueue({type:"error",error:h.error});return}h.usage!=null&&(l={promptTokens:h.usage.prompt_tokens,completionTokens:h.usage.completion_tokens});const f=h.choices[0];f?.finish_reason!=null&&(a=bE(f.finish_reason)),f?.text!=null&&d.enqueue({type:"text-delta",textDelta:f.text});const g=Dj(f?.logprobs);g?.length&&(c===void 0&&(c=[]),c.push(...g))},flush(u){u.enqueue({type:"finish",finishReason:a,logprobs:c,usage:l})}})),rawCall:{rawPrompt:i,rawSettings:o},rawResponse:{headers:n},warnings:[]}}},fxe=q.object({choices:q.array(q.object({text:q.string(),finish_reason:q.string(),logprobs:q.object({tokens:q.array(q.string()),token_logprobs:q.array(q.number()),top_logprobs:q.array(q.record(q.string(),q.number())).nullable()}).nullable().optional()})),usage:q.object({prompt_tokens:q.number(),completion_tokens:q.number()})}),pxe=q.union([q.object({choices:q.array(q.object({text:q.string(),finish_reason:q.string().nullish(),index:q.number(),logprobs:q.object({tokens:q.array(q.string()),token_logprobs:q.array(q.number()),top_logprobs:q.array(q.record(q.string(),q.number())).nullable()}).nullable().optional()})),usage:q.object({prompt_tokens:q.number(),completion_tokens:q.number()}).optional().nullable()}),uL]);function XY(t={}){var e,n,r;const s=(n=nxe((e=t.baseURL)!=null?e:t.baseUrl))!=null?n:"https://openrouter.ai/api/v1",i=(r=t.compatibility)!=null?r:"compatible",o=()=>kc({Authorization:`Bearer ${q_e({apiKey:t.apiKey,environmentVariableName:"OPENROUTER_API_KEY",description:"OpenRouter"})}`},t.headers),a=(d,h={})=>new axe(d,h,{provider:"openrouter.chat",url:({path:f})=>`${s}${f}`,headers:o,compatibility:i,fetch:t.fetch,extraBody:t.extraBody}),l=(d,h={})=>new hxe(d,h,{provider:"openrouter.completion",url:({path:f})=>`${s}${f}`,headers:o,compatibility:i,fetch:t.fetch,extraBody:t.extraBody}),c=(d,h)=>{if(new.target)throw new Error("The OpenRouter model function cannot be called with the new keyword.");return d==="openai/gpt-3.5-turbo-instruct"?l(d,h):a(d,h)},u=function(d,h){return c(d,h)};return u.languageModel=c,u.chat=a,u.completion=l,u}XY({compatibility:"strict"});class mxe extends Kr{name="OpenRouter";getApiKeyLink="https://openrouter.ai/settings/keys";config={apiTokenKey:"OPEN_ROUTER_API_KEY"};staticModels=[{name:"anthropic/claude-3.5-sonnet",label:"Anthropic: Claude 3.5 Sonnet (OpenRouter)",provider:"OpenRouter",maxTokenAllowed:8e3},{name:"anthropic/claude-3-haiku",label:"Anthropic: Claude 3 Haiku (OpenRouter)",provider:"OpenRouter",maxTokenAllowed:8e3},{name:"deepseek/deepseek-coder",label:"Deepseek-Coder V2 236B (OpenRouter)",provider:"OpenRouter",maxTokenAllowed:8e3},{name:"google/gemini-flash-1.5",label:"Google Gemini Flash 1.5 (OpenRouter)",provider:"OpenRouter",maxTokenAllowed:8e3},{name:"google/gemini-pro-1.5",label:"Google Gemini Pro 1.5 (OpenRouter)",provider:"OpenRouter",maxTokenAllowed:8e3},{name:"x-ai/grok-beta",label:"xAI Grok Beta (OpenRouter)",provider:"OpenRouter",maxTokenAllowed:8e3},{name:"mistralai/mistral-nemo",label:"OpenRouter Mistral Nemo (OpenRouter)",provider:"OpenRouter",maxTokenAllowed:8e3},{name:"qwen/qwen-110b-chat",label:"OpenRouter Qwen 110b Chat (OpenRouter)",provider:"OpenRouter",maxTokenAllowed:8e3},{name:"cohere/command",label:"Cohere Command (OpenRouter)",provider:"OpenRouter",maxTokenAllowed:4096}];async getDynamicModels(e,n,r={}){try{return(await(await fetch("https://openrouter.ai/api/v1/models",{headers:{"Content-Type":"application/json"}})).json()).data.sort((o,a)=>o.name.localeCompare(a.name)).map(o=>({name:o.id,label:`${o.name} - in:$${(o.pricing.prompt*1e6).toFixed(2)} out:$${(o.pricing.completion*1e6).toFixed(2)} - context ${Math.floor(o.context_length/1e3)}k`,provider:this.name,maxTokenAllowed:8e3}))}catch(s){return console.error("Error getting OpenRouter models:",s),[]}}getModelInstance(e){const{model:n,serverEnv:r,apiKeys:s,providerSettings:i}=e,{apiKey:o}=this.getProviderBaseUrlAndKey({apiKeys:s,providerSettings:i?.[this.name],serverEnv:r,defaultBaseUrlKey:"",defaultApiTokenKey:"OPEN_ROUTER_API_KEY"});if(!o)throw new Error(`Missing API key for ${this.name} provider`);return XY({apiKey:o}).chat(n)}}class gxe extends Kr{name="OpenAILike";getApiKeyLink=void 0;config={baseUrlKey:"OPENAI_LIKE_API_BASE_URL",apiTokenKey:"OPENAI_LIKE_API_KEY"};staticModels=[];async getDynamicModels(e,n,r={}){const{baseUrl:s,apiKey:i}=this.getProviderBaseUrlAndKey({apiKeys:e,providerSettings:n,serverEnv:r,defaultBaseUrlKey:"OPENAI_LIKE_API_BASE_URL",defaultApiTokenKey:"OPENAI_LIKE_API_KEY"});return!s||!i?[]:(await(await fetch(`${s}/models`,{headers:{Authorization:`Bearer ${i}`}})).json()).data.map(l=>({name:l.id,label:l.id,provider:this.name,maxTokenAllowed:8e3}))}getModelInstance(e){const{model:n,serverEnv:r,apiKeys:s,providerSettings:i}=e,{baseUrl:o,apiKey:a}=this.getProviderBaseUrlAndKey({apiKeys:s,providerSettings:i?.[this.name],serverEnv:r,defaultBaseUrlKey:"OPENAI_LIKE_API_BASE_URL",defaultApiTokenKey:"OPENAI_LIKE_API_KEY"});if(!o||!a)throw new Error(`Missing configuration for ${this.name} provider`);return qK(o,a,n)}}class bxe extends Kr{name="OpenAI";getApiKeyLink="https://platform.openai.com/api-keys";config={apiTokenKey:"OPENAI_API_KEY"};staticModels=[{name:"gpt-4o",label:"GPT-4o",provider:"OpenAI",maxTokenAllowed:8e3},{name:"gpt-4o-mini",label:"GPT-4o Mini",provider:"OpenAI",maxTokenAllowed:8e3},{name:"gpt-4-turbo",label:"GPT-4 Turbo",provider:"OpenAI",maxTokenAllowed:8e3},{name:"gpt-4",label:"GPT-4",provider:"OpenAI",maxTokenAllowed:8e3},{name:"gpt-3.5-turbo",label:"GPT-3.5 Turbo",provider:"OpenAI",maxTokenAllowed:8e3}];async getDynamicModels(e,n,r){const{apiKey:s}=this.getProviderBaseUrlAndKey({apiKeys:e,providerSettings:n,serverEnv:r,defaultBaseUrlKey:"",defaultApiTokenKey:"OPENAI_API_KEY"});if(!s)throw`Missing Api Key configuration for ${this.name} provider`;const o=await(await fetch("https://api.openai.com/v1/models",{headers:{Authorization:`Bearer ${s}`}})).json(),a=this.staticModels.map(c=>c.name);return o.data.filter(c=>c.object==="model"&&(c.id.startsWith("gpt-")||c.id.startsWith("o")||c.id.startsWith("chatgpt-"))&&!a.includes(c.id)).map(c=>({name:c.id,label:`${c.id}`,provider:this.name,maxTokenAllowed:c.context_window||32e3}))}getModelInstance(e){const{model:n,serverEnv:r,apiKeys:s,providerSettings:i}=e,{apiKey:o}=this.getProviderBaseUrlAndKey({apiKeys:s,providerSettings:i?.[this.name],serverEnv:r,defaultBaseUrlKey:"",defaultApiTokenKey:"OPENAI_API_KEY"});if(!o)throw new Error(`Missing API key for ${this.name} provider`);return Jl({apiKey:o})(n)}}class yxe extends Kr{name="Perplexity";getApiKeyLink="https://www.perplexity.ai/settings/api";config={apiTokenKey:"PERPLEXITY_API_KEY"};staticModels=[{name:"llama-3.1-sonar-small-128k-online",label:"Sonar Small Online",provider:"Perplexity",maxTokenAllowed:8192},{name:"llama-3.1-sonar-large-128k-online",label:"Sonar Large Online",provider:"Perplexity",maxTokenAllowed:8192},{name:"llama-3.1-sonar-huge-128k-online",label:"Sonar Huge Online",provider:"Perplexity",maxTokenAllowed:8192}];getModelInstance(e){const{model:n,serverEnv:r,apiKeys:s,providerSettings:i}=e,{apiKey:o}=this.getProviderBaseUrlAndKey({apiKeys:s,providerSettings:i?.[this.name],serverEnv:r,defaultBaseUrlKey:"",defaultApiTokenKey:"PERPLEXITY_API_KEY"});if(!o)throw new Error(`Missing API key for ${this.name} provider`);return Jl({baseURL:"https://api.perplexity.ai/",apiKey:o})(n)}}class vxe extends Kr{name="Together";getApiKeyLink="https://api.together.xyz/settings/api-keys";config={baseUrlKey:"TOGETHER_API_BASE_URL",apiTokenKey:"TOGETHER_API_KEY"};staticModels=[{name:"Qwen/Qwen2.5-Coder-32B-Instruct",label:"Qwen/Qwen2.5-Coder-32B-Instruct",provider:"Together",maxTokenAllowed:8e3},{name:"meta-llama/Llama-3.2-90B-Vision-Instruct-Turbo",label:"meta-llama/Llama-3.2-90B-Vision-Instruct-Turbo",provider:"Together",maxTokenAllowed:8e3},{name:"mistralai/Mixtral-8x7B-Instruct-v0.1",label:"Mixtral 8x7B Instruct",provider:"Together",maxTokenAllowed:8192}];async getDynamicModels(e,n,r={}){const{baseUrl:s,apiKey:i}=this.getProviderBaseUrlAndKey({apiKeys:e,providerSettings:n,serverEnv:r,defaultBaseUrlKey:"TOGETHER_API_BASE_URL",defaultApiTokenKey:"TOGETHER_API_KEY"}),o=s||"https://api.together.xyz/v1";return i?(await(await fetch(`${o}/models`,{headers:{Authorization:`Bearer ${i}`}})).json()||[]).filter(u=>u.type==="chat").map(u=>({name:u.id,label:`${u.display_name} - in:$${u.pricing.input.toFixed(2)} out:$${u.pricing.output.toFixed(2)} - context ${Math.floor(u.context_length/1e3)}k`,provider:this.name,maxTokenAllowed:8e3})):[]}getModelInstance(e){const{model:n,serverEnv:r,apiKeys:s,providerSettings:i}=e,{baseUrl:o,apiKey:a}=this.getProviderBaseUrlAndKey({apiKeys:s,providerSettings:i?.[this.name],serverEnv:r,defaultBaseUrlKey:"TOGETHER_API_BASE_URL",defaultApiTokenKey:"TOGETHER_API_KEY"});if(!o||!a)throw new Error(`Missing configuration for ${this.name} provider`);return qK(o,a,n)}}class _xe extends Kr{name="xAI";getApiKeyLink="https://docs.x.ai/docs/quickstart#creating-an-api-key";config={apiTokenKey:"XAI_API_KEY"};staticModels=[{name:"grok-beta",label:"xAI Grok Beta",provider:"xAI",maxTokenAllowed:8e3},{name:"grok-2-1212",label:"xAI Grok2 1212",provider:"xAI",maxTokenAllowed:8e3}];getModelInstance(e){const{model:n,serverEnv:r,apiKeys:s,providerSettings:i}=e,{apiKey:o}=this.getProviderBaseUrlAndKey({apiKeys:s,providerSettings:i?.[this.name],serverEnv:r,defaultBaseUrlKey:"",defaultApiTokenKey:"XAI_API_KEY"});if(!o)throw new Error(`Missing API key for ${this.name} provider`);return Jl({baseURL:"https://api.x.ai/v1",apiKey:o})(n)}}class xxe extends Kr{name="Hyperbolic";getApiKeyLink="https://app.hyperbolic.xyz/settings";config={apiTokenKey:"HYPERBOLIC_API_KEY"};staticModels=[{name:"Qwen/Qwen2.5-Coder-32B-Instruct",label:"Qwen 2.5 Coder 32B Instruct",provider:"Hyperbolic",maxTokenAllowed:8192},{name:"Qwen/Qwen2.5-72B-Instruct",label:"Qwen2.5-72B-Instruct",provider:"Hyperbolic",maxTokenAllowed:8192},{name:"deepseek-ai/DeepSeek-V2.5",label:"DeepSeek-V2.5",provider:"Hyperbolic",maxTokenAllowed:8192},{name:"Qwen/QwQ-32B-Preview",label:"QwQ-32B-Preview",provider:"Hyperbolic",maxTokenAllowed:8192},{name:"Qwen/Qwen2-VL-72B-Instruct",label:"Qwen2-VL-72B-Instruct",provider:"Hyperbolic",maxTokenAllowed:8192}];async getDynamicModels(e,n,r={}){const{baseUrl:s,apiKey:i}=this.getProviderBaseUrlAndKey({apiKeys:e,providerSettings:n,serverEnv:r,defaultBaseUrlKey:"",defaultApiTokenKey:"HYPERBOLIC_API_KEY"}),o=s||"https://api.hyperbolic.xyz/v1";if(!i)throw`Missing Api Key configuration for ${this.name} provider`;return(await(await fetch(`${o}/models`,{headers:{Authorization:`Bearer ${i}`}})).json()).data.filter(u=>u.object==="model"&&u.supports_chat).map(u=>({name:u.id,label:`${u.id} - context ${u.context_length?Math.floor(u.context_length/1e3)+"k":"N/A"}`,provider:this.name,maxTokenAllowed:u.context_length||8e3}))}getModelInstance(e){const{model:n,serverEnv:r,apiKeys:s,providerSettings:i}=e,{apiKey:o}=this.getProviderBaseUrlAndKey({apiKeys:s,providerSettings:i?.[this.name],serverEnv:r,defaultBaseUrlKey:"",defaultApiTokenKey:"HYPERBOLIC_API_KEY"});if(!o)throw`Missing Api Key configuration for ${this.name} provider`;return Jl({baseURL:"https://api.hyperbolic.xyz/v1/",apiKey:o})(n)}}var JY="vercel.ai.error",wxe=Symbol.for(JY),ZY,Exe=class QY extends Error{constructor({name:e,message:n,cause:r}){super(n),this[ZY]=!0,this.name=e,this.cause=r}static isInstance(e){return QY.hasMarker(e,JY)}static hasMarker(e,n){const r=Symbol.for(n);return e!=null&&typeof e=="object"&&r in e&&typeof e[r]=="boolean"&&e[r]===!0}};ZY=wxe;var Zm=Exe,eX="AI_InvalidArgumentError",tX=`vercel.ai.error.${eX}`,Sxe=Symbol.for(tX),nX,kxe=class extends Zm{constructor({message:t,cause:e,argument:n}){super({name:eX,message:t,cause:e}),this[nX]=!0,this.argument=n}static isInstance(t){return Zm.hasMarker(t,tX)}};nX=Sxe;var rX="AI_LoadSettingError",sX=`vercel.ai.error.${rX}`,Cxe=Symbol.for(sX),iX,gx=class extends Zm{constructor({message:t}){super({name:rX,message:t}),this[iX]=!0}static isInstance(t){return Zm.hasMarker(t,sX)}};iX=Cxe;var oX="AI_UnsupportedFunctionalityError",aX=`vercel.ai.error.${oX}`,Axe=Symbol.for(aX),lX,Gb=class extends Zm{constructor({functionality:t}){super({name:oX,message:`'${t}' functionality not supported.`}),this[lX]=!0,this.functionality=t}static isInstance(t){return Zm.hasMarker(t,aX)}};lX=Axe;var cX={},uX=({prefix:t,size:e=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const s=NK(n,e);if(t==null)return s;if(n.includes(r))throw new kxe({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${t}${r}${s(i)}`},Txe=uX();function Nxe({settingValue:t,environmentVariableName:e}){if(typeof t=="string")return t;if(!(t!=null||typeof An>"u")&&(t=cX[e],!(t==null||typeof t!="string")))return t}function ST({settingValue:t,environmentVariableName:e,settingName:n,description:r}){if(typeof t=="string")return t;if(t!=null)throw new gx({message:`${r} setting must be a string.`});if(typeof An>"u")throw new gx({message:`${r} setting is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(t=cX[e],t==null)throw new gx({message:`${r} setting is missing. Pass it using the '${n}' parameter or the ${e} environment variable.`});if(typeof t!="string")throw new gx({message:`${r} setting must be a string. The value of the ${e} environment variable is not a string.`});return t}const Pxe=t=>{let e=t.httpHandler;return{setHttpHandler(n){e=n},httpHandler(){return e},updateHttpClientConfig(n,r){e.updateHttpClientConfig(n,r)},httpHandlerConfigs(){return e.httpHandlerConfigs()}}},Ixe=t=>({httpHandler:t.httpHandler()});var Mj;(function(t){t.HEADER="header",t.QUERY="query"})(Mj||(Mj={}));var jj;(function(t){t.HEADER="header",t.QUERY="query"})(jj||(jj={}));var t1;(function(t){t.HTTP="http",t.HTTPS="https"})(t1||(t1={}));var vE;(function(t){t.MD5="md5",t.CRC32="crc32",t.CRC32C="crc32c",t.SHA1="sha1",t.SHA256="sha256"})(vE||(vE={}));var Fj;(function(t){t[t.HEADER=0]="HEADER",t[t.TRAILER=1]="TRAILER"})(Fj||(Fj={}));const JN="__smithy_context";var Bj;(function(t){t.PROFILE="profile",t.SSO_SESSION="sso-session",t.SERVICES="services"})(Bj||(Bj={}));var Uj;(function(t){t.HTTP_0_9="http/0.9",t.HTTP_1_0="http/1.0",t.TDS_8_0="tds/8.0"})(Uj||(Uj={}));class io{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){const n=new io({...e,headers:{...e.headers}});return n.query&&(n.query=Rxe(n.query)),n}static isInstance(e){if(!e)return!1;const n=e;return"method"in n&&"protocol"in n&&"hostname"in n&&"path"in n&&typeof n.query=="object"&&typeof n.headers=="object"}clone(){return io.clone(this)}}function Rxe(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return{...e,[n]:Array.isArray(r)?[...r]:r}},{})}class _E{constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;const n=e;return typeof n.statusCode=="number"&&typeof n.headers=="object"}}const Lxe=t=>e=>async n=>{if(!io.isInstance(n.request))return e(n);const{request:r}=n,{handlerProtocol:s=""}=t.requestHandler.metadata||{};if(s.indexOf("h2")>=0&&!r.headers[":authority"])delete r.headers.host,r.headers[":authority"]=r.hostname+(r.port?":"+r.port:"");else if(!r.headers.host){let i=r.hostname;r.port!=null&&(i+=`:${r.port}`),r.headers.host=i}return e(n)},Oxe={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},Dxe=t=>({applyToStack:e=>{e.add(Lxe(t),Oxe)}}),Mxe=()=>(t,e)=>async n=>{try{const r=await t(n),{clientName:s,commandName:i,logger:o,dynamoDbDocumentClientOptions:a={}}=e,{overrideInputFilterSensitiveLog:l,overrideOutputFilterSensitiveLog:c}=a,u=l??e.inputFilterSensitiveLog,d=c??e.outputFilterSensitiveLog,{$metadata:h,...f}=r.output;return o?.info?.({clientName:s,commandName:i,input:u(n.input),output:d(f),metadata:h}),r}catch(r){const{clientName:s,commandName:i,logger:o,dynamoDbDocumentClientOptions:a={}}=e,{overrideInputFilterSensitiveLog:l}=a,c=l??e.inputFilterSensitiveLog;throw o?.error?.({clientName:s,commandName:i,input:c(n.input),error:r,metadata:r.$metadata}),r}},jxe={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},Fxe=t=>({applyToStack:e=>{e.add(Mxe(),jxe)}});var $j={};const Hj="X-Amzn-Trace-Id",Bxe="AWS_LAMBDA_FUNCTION_NAME",Uxe="_X_AMZN_TRACE_ID",$xe=t=>e=>async n=>{const{request:r}=n;if(!io.isInstance(r)||t.runtime!=="node"||r.headers.hasOwnProperty(Hj))return e(n);const s=$j[Bxe],i=$j[Uxe],o=a=>typeof a=="string"&&a.length>0;return o(s)&&o(i)&&(r.headers[Hj]=i),e({...n,request:r})},Hxe={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},zxe=t=>({applyToStack:e=>{e.add($xe(t),Hxe)}}),Ek=t=>t[JN]||(t[JN]={}),od=t=>{if(typeof t=="function")return t;const e=Promise.resolve(t);return()=>e};function Vxe(t){const e=new Map;for(const n of t)e.set(n.schemeId,n);return e}const Wxe=(t,e)=>(n,r)=>async s=>{const i=t.httpAuthSchemeProvider(await e.httpAuthSchemeParametersProvider(t,r,s.input)),o=Vxe(t.httpAuthSchemes),a=Ek(r),l=[];for(const c of i){const u=o.get(c.schemeId);if(!u){l.push(`HttpAuthScheme \`${c.schemeId}\` was not enabled for this service.`);continue}const d=u.identityProvider(await e.identityProviderConfigProvider(t));if(!d){l.push(`HttpAuthScheme \`${c.schemeId}\` did not have an IdentityProvider configured.`);continue}const{identityProperties:h={},signingProperties:f={}}=c.propertiesExtractor?.(t,r)||{};c.identityProperties=Object.assign(c.identityProperties||{},h),c.signingProperties=Object.assign(c.signingProperties||{},f),a.selectedHttpAuthScheme={httpAuthOption:c,identity:await d(c.identityProperties),signer:u.signer};break}if(!a.selectedHttpAuthScheme)throw new Error(l.join(`
`));return n(s)},Gxe={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},qxe=(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:n})=>({applyToStack:r=>{r.addRelativeTo(Wxe(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:n}),Gxe)}}),Kxe=(t,e)=>(n,r)=>async s=>{const{response:i}=await n(s);try{const o=await e(i,t);return{response:i,output:o}}catch(o){if(Object.defineProperty(o,"$response",{value:i}),!("$metadata"in o)){const a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{o.message+=`
  `+a}catch{!r.logger||r.logger?.constructor?.name==="NoOpLogger"?console.warn(a):r.logger?.warn?.(a)}typeof o.$responseBodyText<"u"&&o.$response&&(o.$response.body=o.$responseBodyText)}throw o}},Yxe=(t,e)=>(n,r)=>async s=>{const i=r.endpointV2?.url&&t.urlParser?async()=>t.urlParser(r.endpointV2.url):t.endpoint;if(!i)throw new Error("No valid endpoint provider available.");const o=await e(s.input,{...t,endpoint:i});return n({...s,request:o})},Xxe={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},dL={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function hL(t,e,n){return{applyToStack:r=>{r.add(Kxe(t,n),Xxe),r.add(Yxe(t,e),dL)}}}dL.name;const Jxe=t=>e=>{throw e},Zxe=(t,e)=>{},Qxe=t=>(e,n)=>async r=>{if(!io.isInstance(r.request))return e(r);const i=Ek(n).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:o={}},identity:a,signer:l}=i,c=await e({...r,request:await l.sign(r.request,a,o)}).catch((l.errorHandler||Jxe)(o));return(l.successHandler||Zxe)(c.response,o),c},ewe={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},twe=t=>({applyToStack:e=>{e.addRelativeTo(Qxe(),ewe)}}),bb=t=>{if(typeof t=="function")return t;const e=Promise.resolve(t);return()=>e},vd={},Rg=new Array(64);for(let t=0,e=65,n=90;t+e<=n;t++){const r=String.fromCharCode(t+e);vd[r]=t,Rg[t]=r}for(let t=0,e=97,n=122;t+e<=n;t++){const r=String.fromCharCode(t+e),s=t+26;vd[r]=s,Rg[s]=r}for(let t=0;t<10;t++){vd[t.toString(10)]=t+52;const e=t.toString(10),n=t+52;vd[e]=n,Rg[n]=e}vd["+"]=62;Rg[62]="+";vd["/"]=63;Rg[63]="/";const _m=6,qb=8,nwe=63,fL=t=>{let e=t.length/4*3;t.slice(-2)==="=="?e-=2:t.slice(-1)==="="&&e--;const n=new ArrayBuffer(e),r=new DataView(n);for(let s=0;s<t.length;s+=4){let i=0,o=0;for(let c=s,u=s+3;c<=u;c++)if(t[c]!=="="){if(!(t[c]in vd))throw new TypeError(`Invalid character ${t[c]} in base64 string.`);i|=vd[t[c]]<<(u-c)*_m,o+=_m}else i>>=_m;const a=s/4*3;i>>=o%qb;const l=Math.floor(o/qb);for(let c=0;c<l;c++){const u=(l-c-1)*qb;r.setUint8(a+c,(i&255<<u)>>u)}}return new Uint8Array(n)},Qm=t=>new TextEncoder().encode(t),Kb=t=>typeof t=="string"?Qm(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t),dX=t=>{if(typeof t=="string")return t;if(typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(t)};function hX(t){let e;typeof t=="string"?e=Qm(t):e=t;const n=typeof e=="object"&&typeof e.length=="number",r=typeof e=="object"&&typeof e.byteOffset=="number"&&typeof e.byteLength=="number";if(!n&&!r)throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");let s="";for(let i=0;i<e.length;i+=3){let o=0,a=0;for(let c=i,u=Math.min(i+3,e.length);c<u;c++)o|=e[c]<<(u-c-1)*qb,a+=qb;const l=Math.ceil(a/_m);o<<=l*_m-a;for(let c=1;c<=l;c++){const u=(l-c)*_m;s+=Rg[(o&nwe<<u)>>u]}s+="==".slice(0,4-l)}return s}function rwe(t,e="utf-8"){return e==="base64"?hX(t):dX(t)}function swe(t,e){return e==="base64"?Jh.mutate(fL(t)):Jh.mutate(Qm(t))}class Jh extends Uint8Array{static fromString(e,n="utf-8"){switch(typeof e){case"string":return swe(e,n);default:throw new Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}}static mutate(e){return Object.setPrototypeOf(e,Jh.prototype),e}transformToString(e="utf-8"){return rwe(this,e)}}const Zh=t=>encodeURIComponent(t).replace(/[!'()*]/g,iwe),iwe=t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`;function owe(t){const e=[];for(let n of Object.keys(t).sort()){const r=t[n];if(n=Zh(n),Array.isArray(r))for(let s=0,i=r.length;s<i;s++)e.push(`${n}=${Zh(r[s])}`);else{let s=n;(r||typeof r=="string")&&(s+=`=${Zh(r)}`),e.push(s)}}return e.join("&")}function zj(t,e){return new Request(t,e)}function awe(t=0){return new Promise((e,n)=>{t&&setTimeout(()=>{const r=new Error(`Request did not complete within ${t} ms`);r.name="TimeoutError",n(r)},t)})}const kT={supported:void 0};class pL{static create(e){return typeof e?.handle=="function"?e:new pL(e)}constructor(e){typeof e=="function"?this.configProvider=e().then(n=>n||{}):(this.config=e??{},this.configProvider=Promise.resolve(this.config)),kT.supported===void 0&&(kT.supported=typeof Request<"u"&&"keepalive"in zj("https://[::1]"))}destroy(){}async handle(e,{abortSignal:n}={}){this.config||(this.config=await this.configProvider);const r=this.config.requestTimeout,s=this.config.keepAlive===!0,i=this.config.credentials;if(n?.aborted){const b=new Error("Request aborted");return b.name="AbortError",Promise.reject(b)}let o=e.path;const a=owe(e.query||{});a&&(o+=`?${a}`),e.fragment&&(o+=`#${e.fragment}`);let l="";if(e.username!=null||e.password!=null){const b=e.username??"",v=e.password??"";l=`${b}:${v}@`}const{port:c,method:u}=e,d=`${e.protocol}//${l}${e.hostname}${c?`:${c}`:""}${o}`,h=u==="GET"||u==="HEAD"?void 0:e.body,f={body:h,headers:new Headers(e.headers),method:u,credentials:i};this.config?.cache&&(f.cache=this.config.cache),h&&(f.duplex="half"),typeof AbortController<"u"&&(f.signal=n),kT.supported&&(f.keepalive=s),typeof this.config.requestInit=="function"&&Object.assign(f,this.config.requestInit(e));let g=()=>{};const y=zj(d,f),m=[fetch(y).then(b=>{const v=b.headers,_={};for(const w of v.entries())_[w[0]]=w[1];return b.body!=null?{response:new _E({headers:_,reason:b.statusText,statusCode:b.status,body:b.body})}:b.blob().then(w=>({response:new _E({headers:_,reason:b.statusText,statusCode:b.status,body:w})}))}),awe(r)];return n&&m.push(new Promise((b,v)=>{const _=()=>{const E=new Error("Request aborted");E.name="AbortError",v(E)};if(typeof n.addEventListener=="function"){const E=n;E.addEventListener("abort",_,{once:!0}),g=()=>E.removeEventListener("abort",_)}else n.onabort=_})),Promise.race(m).finally(g)}updateHttpClientConfig(e,n){this.config=void 0,this.configProvider=this.configProvider.then(r=>(r[e]=n,r))}httpHandlerConfigs(){return this.config??{}}}const lwe=async t=>typeof Blob=="function"&&t instanceof Blob||t.constructor?.name==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await t.arrayBuffer()):cwe(t):uwe(t);async function cwe(t){const e=await dwe(t),n=fL(e);return new Uint8Array(n)}async function uwe(t){const e=[],n=t.getReader();let r=!1,s=0;for(;!r;){const{done:a,value:l}=await n.read();l&&(e.push(l),s+=l.length),r=a}const i=new Uint8Array(s);let o=0;for(const a of e)i.set(a,o),o+=a.length;return i}function dwe(t){return new Promise((e,n)=>{const r=new FileReader;r.onloadend=()=>{if(r.readyState!==2)return n(new Error("Reader aborted too early"));const s=r.result??"",i=s.indexOf(","),o=i>-1?i+1:s.length;e(s.substring(o))},r.onabort=()=>n(new Error("Read aborted")),r.onerror=()=>n(r.error),r.readAsDataURL(t)})}const fX={},ZN={};for(let t=0;t<256;t++){let e=t.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),fX[t]=e,ZN[e]=t}function pX(t){if(t.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const e=new Uint8Array(t.length/2);for(let n=0;n<t.length;n+=2){const r=t.slice(n,n+2).toLowerCase();if(r in ZN)e[n/2]=ZN[r];else throw new Error(`Cannot decode unrecognized sequence ${r} as hexadecimal`)}return e}function Gi(t){let e="";for(let n=0;n<t.byteLength;n++)e+=fX[t[n]];return e}const mX=async(t=new Uint8Array,e)=>{if(t instanceof Uint8Array)return Jh.mutate(t);if(!t)return Jh.mutate(new Uint8Array);const n=e.streamCollector(t);return Jh.mutate(await n)};function Vj(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}const hwe=(t,e,n,r,s,i)=>{if(e!=null&&e[n]!==void 0){const o=r();if(o.length<=0)throw new Error("Empty value provided for input HTTP label: "+n+".");t=t.replace(s,i?o.split("/").map(a=>Vj(a)).join("/"):Vj(o))}else throw new Error("No value provided for input HTTP label: "+n+".");return t};function mL(t,e){return new fwe(t,e)}class fwe{constructor(e,n){this.input=e,this.context=n,this.query={},this.method="",this.headers={},this.path="",this.body=null,this.hostname="",this.resolvePathStack=[]}async build(){const{hostname:e,protocol:n="https",port:r,path:s}=await this.context.endpoint();this.path=s;for(const i of this.resolvePathStack)i(this.path);return new io({protocol:n,hostname:this.hostname||e,port:r,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(e){return this.hostname=e,this}bp(e){return this.resolvePathStack.push(n=>{this.path=`${n?.endsWith("/")?n.slice(0,-1):n||""}`+e}),this}p(e,n,r,s){return this.resolvePathStack.push(i=>{this.path=hwe(i,this.input,e,n,r,s)}),this}h(e){return this.headers=e,this}q(e){return this.query=e,this}b(e){return this.body=e,this}m(e){return this.method=e,this}}function pwe(t,e,n){t.__smithy_context?t.__smithy_context.features||(t.__smithy_context.features={}):t.__smithy_context={features:{}},t.__smithy_context.features[e]=n}class mwe{constructor(e){this.authSchemes=new Map;for(const[n,r]of Object.entries(e))r!==void 0&&this.authSchemes.set(n,r)}getIdentityProvider(e){return this.authSchemes.get(e)}}const gwe=t=>e=>gX(e)&&e.expiration.getTime()-Date.now()<t,bwe=3e5,ywe=gwe(bwe),gX=t=>t.expiration!==void 0,vwe=(t,e,n)=>{if(t===void 0)return;const r=typeof t!="function"?async()=>Promise.resolve(t):t;let s,i,o,a=!1;const l=async c=>{i||(i=r(c));try{s=await i,o=!0,a=!1}finally{i=void 0}return s};return e===void 0?async c=>((!o||c?.forceRefresh)&&(s=await l(c)),s):async c=>((!o||c?.forceRefresh)&&(s=await l(c)),a?s:n(s)?(e(s)&&await l(c),s):(a=!0,s))},_we=void 0;function xwe(t){return t===void 0?!0:typeof t=="string"&&t.length<=50}function wwe(t){const e=bb(t.userAgentAppId??_we);return{...t,customUserAgent:typeof t.customUserAgent=="string"?[[t.customUserAgent]]:t.customUserAgent,userAgentAppId:async()=>{const n=await e();if(!xwe(n)){const r=t.logger?.constructor?.name==="NoOpLogger"||!t.logger?console:t.logger;typeof n!="string"?r?.warn("userAgentAppId must be a string or undefined."):n.length>50&&r?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return n}}}class Ewe{constructor({size:e,params:n}){this.data=new Map,this.parameters=[],this.capacity=e??50,n&&(this.parameters=n)}get(e,n){const r=this.hash(e);if(r===!1)return n();if(!this.data.has(r)){if(this.data.size>this.capacity+10){const s=this.data.keys();let i=0;for(;;){const{value:o,done:a}=s.next();if(this.data.delete(o),a||++i>10)break}}this.data.set(r,n())}return this.data.get(r)}size(){return this.data.size}hash(e){let n="";const{parameters:r}=this;if(r.length===0)return!1;for(const s of r){const i=String(e[s]??"");if(i.includes("|;"))return!1;n+=i+"|;"}return n}}const Swe=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),bX=t=>Swe.test(t)||t.startsWith("[")&&t.endsWith("]"),kwe=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),gL=(t,e=!1)=>{if(!e)return kwe.test(t);const n=t.split(".");for(const r of n)if(!gL(r))return!1;return!0},xE={},n1="endpoints";function _d(t){return typeof t!="object"||t==null?t:"ref"in t?`$${_d(t.ref)}`:"fn"in t?`${t.fn}(${(t.argv||[]).map(_d).join(", ")})`:JSON.stringify(t,null,2)}class oo extends Error{constructor(e){super(e),this.name="EndpointError"}}const Cwe=(t,e)=>t===e,Awe=t=>{const e=t.split("."),n=[];for(const r of e){const s=r.indexOf("[");if(s!==-1){if(r.indexOf("]")!==r.length-1)throw new oo(`Path: '${t}' does not end with ']'`);const i=r.slice(s+1,-1);if(Number.isNaN(parseInt(i)))throw new oo(`Invalid array index: '${i}' in path: '${t}'`);s!==0&&n.push(r.slice(0,s)),n.push(i)}else n.push(r)}return n},yX=(t,e)=>Awe(e).reduce((n,r)=>{if(typeof n!="object")throw new oo(`Index '${r}' in '${e}' not found in '${JSON.stringify(t)}'`);return Array.isArray(n)?n[parseInt(r)]:n[r]},t),Twe=t=>t!=null,Nwe=t=>!t,CT={[t1.HTTP]:80,[t1.HTTPS]:443},Pwe=t=>{const e=(()=>{try{if(t instanceof URL)return t;if(typeof t=="object"&&"hostname"in t){const{hostname:h,port:f,protocol:g="",path:y="",query:m={}}=t,b=new URL(`${g}//${h}${f?`:${f}`:""}${y}`);return b.search=Object.entries(m).map(([v,_])=>`${v}=${_}`).join("&"),b}return new URL(t)}catch{return null}})();if(!e)return console.error(`Unable to parse ${JSON.stringify(t)} as a whatwg URL.`),null;const n=e.href,{host:r,hostname:s,pathname:i,protocol:o,search:a}=e;if(a)return null;const l=o.slice(0,-1);if(!Object.values(t1).includes(l))return null;const c=bX(s),u=n.includes(`${r}:${CT[l]}`)||typeof t=="string"&&t.includes(`${r}:${CT[l]}`),d=`${r}${u?`:${CT[l]}`:""}`;return{scheme:l,authority:d,path:i,normalizedPath:i.endsWith("/")?i:`${i}/`,isIp:c}},Iwe=(t,e)=>t===e,Rwe=(t,e,n,r)=>e>=n||t.length<n?null:r?t.substring(t.length-n,t.length-e):t.substring(e,n),Lwe=t=>encodeURIComponent(t).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Owe={booleanEquals:Cwe,getAttr:yX,isSet:Twe,isValidHostLabel:gL,not:Nwe,parseURL:Pwe,stringEquals:Iwe,substring:Rwe,uriEncode:Lwe},vX=(t,e)=>{const n=[],r={...e.endpointParams,...e.referenceRecord};let s=0;for(;s<t.length;){const i=t.indexOf("{",s);if(i===-1){n.push(t.slice(s));break}n.push(t.slice(s,i));const o=t.indexOf("}",i);if(o===-1){n.push(t.slice(i));break}t[i+1]==="{"&&t[o+1]==="}"&&(n.push(t.slice(i+1,o)),s=o+2);const a=t.substring(i+1,o);if(a.includes("#")){const[l,c]=a.split("#");n.push(yX(r[l],c))}else n.push(r[a]);s=o+1}return n.join("")},Dwe=({ref:t},e)=>({...e.endpointParams,...e.referenceRecord})[t],Sk=(t,e,n)=>{if(typeof t=="string")return vX(t,n);if(t.fn)return _X(t,n);if(t.ref)return Dwe(t,n);throw new oo(`'${e}': ${String(t)} is not a string, function or reference.`)},_X=({fn:t,argv:e},n)=>{const r=e.map(i=>["boolean","number"].includes(typeof i)?i:Sk(i,"arg",n)),s=t.split(".");return s[0]in xE&&s[1]!=null?xE[s[0]][s[1]](...r):Owe[t](...r)},Mwe=({assign:t,...e},n)=>{if(t&&t in n.referenceRecord)throw new oo(`'${t}' is already defined in Reference Record.`);const r=_X(e,n);return n.logger?.debug?.(`${n1} evaluateCondition: ${_d(e)} = ${_d(r)}`),{result:r===""?!0:!!r,...t!=null&&{toAssign:{name:t,value:r}}}},bL=(t=[],e)=>{const n={};for(const r of t){const{result:s,toAssign:i}=Mwe(r,{...e,referenceRecord:{...e.referenceRecord,...n}});if(!s)return{result:s};i&&(n[i.name]=i.value,e.logger?.debug?.(`${n1} assign: ${i.name} := ${_d(i.value)}`))}return{result:!0,referenceRecord:n}},jwe=(t,e)=>Object.entries(t).reduce((n,[r,s])=>({...n,[r]:s.map(i=>{const o=Sk(i,"Header value entry",e);if(typeof o!="string")throw new oo(`Header '${r}' value '${o}' is not a string`);return o})}),{}),xX=(t,e)=>{if(Array.isArray(t))return t.map(n=>xX(n,e));switch(typeof t){case"string":return vX(t,e);case"object":if(t===null)throw new oo(`Unexpected endpoint property: ${t}`);return wX(t,e);case"boolean":return t;default:throw new oo(`Unexpected endpoint property type: ${typeof t}`)}},wX=(t,e)=>Object.entries(t).reduce((n,[r,s])=>({...n,[r]:xX(s,e)}),{}),Fwe=(t,e)=>{const n=Sk(t,"Endpoint URL",e);if(typeof n=="string")try{return new URL(n)}catch(r){throw console.error(`Failed to construct URL with ${n}`,r),r}throw new oo(`Endpoint URL must be a string, got ${typeof n}`)},Bwe=(t,e)=>{const{conditions:n,endpoint:r}=t,{result:s,referenceRecord:i}=bL(n,e);if(!s)return;const o={...e,referenceRecord:{...e.referenceRecord,...i}},{url:a,properties:l,headers:c}=r;return e.logger?.debug?.(`${n1} Resolving endpoint from template: ${_d(r)}`),{...c!=null&&{headers:jwe(c,o)},...l!=null&&{properties:wX(l,o)},url:Fwe(a,o)}},Uwe=(t,e)=>{const{conditions:n,error:r}=t,{result:s,referenceRecord:i}=bL(n,e);if(s)throw new oo(Sk(r,"Error",{...e,referenceRecord:{...e.referenceRecord,...i}}))},$we=(t,e)=>{const{conditions:n,rules:r}=t,{result:s,referenceRecord:i}=bL(n,e);if(s)return EX(r,{...e,referenceRecord:{...e.referenceRecord,...i}})},EX=(t,e)=>{for(const n of t)if(n.type==="endpoint"){const r=Bwe(n,e);if(r)return r}else if(n.type==="error")Uwe(n,e);else if(n.type==="tree"){const r=$we(n,e);if(r)return r}else throw new oo(`Unknown endpoint rule: ${n}`);throw new oo("Rules evaluation failed")},Hwe=(t,e)=>{const{endpointParams:n,logger:r}=e,{parameters:s,rules:i}=t;e.logger?.debug?.(`${n1} Initial EndpointParams: ${_d(n)}`);const o=Object.entries(s).filter(([,c])=>c.default!=null).map(([c,u])=>[c,u.default]);if(o.length>0)for(const[c,u]of o)n[c]=n[c]??u;const a=Object.entries(s).filter(([,c])=>c.required).map(([c])=>c);for(const c of a)if(n[c]==null)throw new oo(`Missing required parameter: '${c}'`);const l=EX(i,{endpointParams:n,logger:r,referenceRecord:{}});return e.logger?.debug?.(`${n1} Resolved endpoint: ${_d(l)}`),l},SX=(t,e=!1)=>{if(e){for(const n of t.split("."))if(!SX(n))return!1;return!0}return!(!gL(t)||t.length<3||t.length>63||t!==t.toLowerCase()||bX(t))},Wj=":",zwe="/",Vwe=t=>{const e=t.split(Wj);if(e.length<6)return null;const[n,r,s,i,o,...a]=e;if(n!=="arn"||r===""||s===""||a.join(Wj)==="")return null;const l=a.map(c=>c.split(zwe)).flat();return{partition:r,service:s,region:i,accountId:o,resourceId:l}},Wwe=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"AWS ISOF global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}}],Gwe={partitions:Wwe};let qwe=Gwe;const Kwe=t=>{const{partitions:e}=qwe;for(const r of e){const{regions:s,outputs:i}=r;for(const[o,a]of Object.entries(s))if(o===t)return{...i,...a}}for(const r of e){const{regionRegex:s,outputs:i}=r;if(new RegExp(s).test(t))return{...i}}const n=e.find(r=>r.id==="aws");if(!n)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...n.outputs}},kX={isVirtualHostableS3Bucket:SX,parseArn:Vwe,partition:Kwe};xE.aws=kX;function Ywe(t,e,n){return t.$source||(t.$source={}),t.$source[e]=n,t}function Xa(t,e,n){t.__aws_sdk_context?t.__aws_sdk_context.features||(t.__aws_sdk_context.features={}):t.__aws_sdk_context={features:{}},t.__aws_sdk_context.features[e]=n}const Gj=t=>_E.isInstance(t)?t.headers?.date??t.headers?.Date:void 0,CX=t=>new Date(Date.now()+t),Xwe=(t,e)=>Math.abs(CX(e).getTime()-t)>=3e5,qj=(t,e)=>{const n=Date.parse(t);return Xwe(n,e)?n-Date.now():e},Yb=(t,e)=>{if(!e)throw new Error(`Property \`${t}\` is not resolved for AWS SDK SigV4Auth`);return e},Jwe=async t=>{const e=Yb("context",t.context),n=Yb("config",t.config),r=e.endpointV2?.properties?.authSchemes?.[0],i=await Yb("signer",n.signer)(r),o=t?.signingRegion,a=t?.signingRegionSet,l=t?.signingName;return{config:n,signer:i,signingRegion:o,signingRegionSet:a,signingName:l}};class Zwe{async sign(e,n,r){if(!io.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const s=await Jwe(r),{config:i,signer:o}=s;let{signingRegion:a,signingName:l}=s;const c=r.context;if(c?.authSchemes?.length??!1){const[d,h]=c.authSchemes;d?.name==="sigv4a"&&h?.name==="sigv4"&&(a=h?.signingRegion??a,l=h?.signingName??l)}return await o.sign(e,{signingDate:CX(i.systemClockOffset),signingRegion:a,signingService:l})}errorHandler(e){return n=>{const r=n.ServerTime??Gj(n.$response);if(r){const s=Yb("config",e.config),i=s.systemClockOffset;s.systemClockOffset=qj(r,s.systemClockOffset),s.systemClockOffset!==i&&n.$metadata&&(n.$metadata.clockSkewCorrected=!0)}throw n}}successHandler(e,n){const r=Gj(e);if(r){const s=Yb("config",n.config);s.systemClockOffset=qj(r,s.systemClockOffset)}}}const Qwe=(t,e,n)=>{let r,s,i,o=!1;const a=async()=>{s||(s=t());try{r=await s,i=!0,o=!1}finally{s=void 0}return r};return async l=>((!i||l?.forceRefresh)&&(r=await a()),r)},e2e="X-Amz-Algorithm",t2e="X-Amz-Credential",AX="X-Amz-Date",n2e="X-Amz-SignedHeaders",r2e="X-Amz-Expires",TX="X-Amz-Signature",NX="X-Amz-Security-Token",PX="authorization",IX=AX.toLowerCase(),s2e="date",i2e=[PX,IX,s2e],o2e=TX.toLowerCase(),QN="x-amz-content-sha256",a2e=NX.toLowerCase(),l2e={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},c2e=/^proxy-/,u2e=/^sec-/,AT="AWS4-HMAC-SHA256",d2e="AWS4-HMAC-SHA256-PAYLOAD",h2e="UNSIGNED-PAYLOAD",f2e=50,RX="aws4_request",p2e=60*60*24*7,bx={},TT=[],NT=(t,e,n)=>`${t}/${e}/${n}/${RX}`,m2e=async(t,e,n,r,s)=>{const i=await Kj(t,e.secretAccessKey,e.accessKeyId),o=`${n}:${r}:${s}:${Gi(i)}:${e.sessionToken}`;if(o in bx)return bx[o];for(TT.push(o);TT.length>f2e;)delete bx[TT.shift()];let a=`AWS4${e.secretAccessKey}`;for(const l of[n,r,s,RX])a=await Kj(t,a,l);return bx[o]=a},Kj=(t,e,n)=>{const r=new t(e);return r.update(Kb(n)),r.digest()},Yj=({headers:t},e,n)=>{const r={};for(const s of Object.keys(t).sort()){if(t[s]==null)continue;const i=s.toLowerCase();(i in l2e||e?.has(i)||c2e.test(i)||u2e.test(i))&&(!n||n&&!n.has(i))||(r[i]=t[s].trim().replace(/\s+/g," "))}return r},g2e=({query:t={}})=>{const e=[],n={};for(const r of Object.keys(t)){if(r.toLowerCase()===o2e)continue;const s=Zh(r);e.push(s);const i=t[r];typeof i=="string"?n[s]=`${s}=${Zh(i)}`:Array.isArray(i)&&(n[s]=i.slice(0).reduce((o,a)=>o.concat([`${s}=${Zh(a)}`]),[]).sort().join("&"))}return e.sort().map(r=>n[r]).filter(r=>r).join("&")},b2e=t=>typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]",PT=async({headers:t,body:e},n)=>{for(const r of Object.keys(t))if(r.toLowerCase()===QN)return t[r];if(e==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof e=="string"||ArrayBuffer.isView(e)||b2e(e)){const r=new n;return r.update(Kb(e)),Gi(await r.digest())}return h2e};class y2e{format(e){const n=[];for(const i of Object.keys(e)){const o=Qm(i);n.push(Uint8Array.from([o.byteLength]),o,this.formatHeaderValue(e[i]))}const r=new Uint8Array(n.reduce((i,o)=>i+o.byteLength,0));let s=0;for(const i of n)r.set(i,s),s+=i.byteLength;return r}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":const n=new DataView(new ArrayBuffer(3));return n.setUint8(0,3),n.setInt16(1,e.value,!1),new Uint8Array(n.buffer);case"integer":const r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,e.value,!1),new Uint8Array(r.buffer);case"long":const s=new Uint8Array(9);return s[0]=5,s.set(e.value.bytes,1),s;case"binary":const i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);const o=new Uint8Array(i.buffer);return o.set(e.value,3),o;case"string":const a=Qm(e.value),l=new DataView(new ArrayBuffer(3+a.byteLength));l.setUint8(0,7),l.setUint16(1,a.byteLength,!1);const c=new Uint8Array(l.buffer);return c.set(a,3),c;case"timestamp":const u=new Uint8Array(9);return u[0]=8,u.set(_2e.fromNumber(e.value.valueOf()).bytes,1),u;case"uuid":if(!v2e.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);const d=new Uint8Array(17);return d[0]=9,d.set(pX(e.value.replace(/\-/g,"")),1),d}}}var Xj;(function(t){t[t.boolTrue=0]="boolTrue",t[t.boolFalse=1]="boolFalse",t[t.byte=2]="byte",t[t.short=3]="short",t[t.integer=4]="integer",t[t.long=5]="long",t[t.byteArray=6]="byteArray",t[t.string=7]="string",t[t.timestamp=8]="timestamp",t[t.uuid=9]="uuid"})(Xj||(Xj={}));const v2e=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;let _2e=class LX{constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);const n=new Uint8Array(8);for(let r=7,s=Math.abs(Math.round(e));r>-1&&s>0;r--,s/=256)n[r]=s;return e<0&&Jj(n),new LX(n)}valueOf(){const e=this.bytes.slice(0),n=e[0]&128;return n&&Jj(e),parseInt(Gi(e),16)*(n?-1:1)}toString(){return String(this.valueOf())}};function Jj(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}const x2e=(t,e)=>{t=t.toLowerCase();for(const n of Object.keys(e))if(t===n.toLowerCase())return!0;return!1},w2e=(t,e={})=>{const{headers:n,query:r={}}=io.clone(t);for(const s of Object.keys(n)){const i=s.toLowerCase();(i.slice(0,6)==="x-amz-"&&!e.unhoistableHeaders?.has(i)||e.hoistableHeaders?.has(i))&&(r[s]=n[s],delete n[s])}return{...t,headers:n,query:r}},Zj=t=>{t=io.clone(t);for(const e of Object.keys(t.headers))i2e.indexOf(e.toLowerCase())>-1&&delete t.headers[e];return t},E2e=t=>S2e(t).toISOString().replace(/\.\d{3}Z$/,"Z"),S2e=t=>typeof t=="number"?new Date(t*1e3):typeof t=="string"?Number(t)?new Date(Number(t)*1e3):new Date(t):t;class Qj{constructor({applyChecksum:e,credentials:n,region:r,service:s,sha256:i,uriEscapePath:o=!0}){this.headerFormatter=new y2e,this.service=s,this.sha256=i,this.uriEscapePath=o,this.applyChecksum=typeof e=="boolean"?e:!0,this.regionProvider=od(r),this.credentialProvider=od(n)}async presign(e,n={}){const{signingDate:r=new Date,expiresIn:s=3600,unsignableHeaders:i,unhoistableHeaders:o,signableHeaders:a,hoistableHeaders:l,signingRegion:c,signingService:u}=n,d=await this.credentialProvider();this.validateResolvedCredentials(d);const h=c??await this.regionProvider(),{longDate:f,shortDate:g}=yx(r);if(s>p2e)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const y=NT(g,h,u??this.service),m=w2e(Zj(e),{unhoistableHeaders:o,hoistableHeaders:l});d.sessionToken&&(m.query[NX]=d.sessionToken),m.query[e2e]=AT,m.query[t2e]=`${d.accessKeyId}/${y}`,m.query[AX]=f,m.query[r2e]=s.toString(10);const b=Yj(m,i,a);return m.query[n2e]=eF(b),m.query[TX]=await this.getSignature(f,y,this.getSigningKey(d,h,g,u),this.createCanonicalRequest(m,b,await PT(e,this.sha256))),m}async sign(e,n){return typeof e=="string"?this.signString(e,n):e.headers&&e.payload?this.signEvent(e,n):e.message?this.signMessage(e,n):this.signRequest(e,n)}async signEvent({headers:e,payload:n},{signingDate:r=new Date,priorSignature:s,signingRegion:i,signingService:o}){const a=i??await this.regionProvider(),{shortDate:l,longDate:c}=yx(r),u=NT(l,a,o??this.service),d=await PT({headers:{},body:n},this.sha256),h=new this.sha256;h.update(e);const f=Gi(await h.digest()),g=[d2e,c,u,s,f,d].join(`
`);return this.signString(g,{signingDate:r,signingRegion:a,signingService:o})}async signMessage(e,{signingDate:n=new Date,signingRegion:r,signingService:s}){return this.signEvent({headers:this.headerFormatter.format(e.message.headers),payload:e.message.body},{signingDate:n,signingRegion:r,signingService:s,priorSignature:e.priorSignature}).then(o=>({message:e.message,signature:o}))}async signString(e,{signingDate:n=new Date,signingRegion:r,signingService:s}={}){const i=await this.credentialProvider();this.validateResolvedCredentials(i);const o=r??await this.regionProvider(),{shortDate:a}=yx(n),l=new this.sha256(await this.getSigningKey(i,o,a,s));return l.update(Kb(e)),Gi(await l.digest())}async signRequest(e,{signingDate:n=new Date,signableHeaders:r,unsignableHeaders:s,signingRegion:i,signingService:o}={}){const a=await this.credentialProvider();this.validateResolvedCredentials(a);const l=i??await this.regionProvider(),c=Zj(e),{longDate:u,shortDate:d}=yx(n),h=NT(d,l,o??this.service);c.headers[IX]=u,a.sessionToken&&(c.headers[a2e]=a.sessionToken);const f=await PT(c,this.sha256);!x2e(QN,c.headers)&&this.applyChecksum&&(c.headers[QN]=f);const g=Yj(c,s,r),y=await this.getSignature(u,h,this.getSigningKey(a,l,d,o),this.createCanonicalRequest(c,g,f));return c.headers[PX]=`${AT} Credential=${a.accessKeyId}/${h}, SignedHeaders=${eF(g)}, Signature=${y}`,c}createCanonicalRequest(e,n,r){const s=Object.keys(n).sort();return`${e.method}
${this.getCanonicalPath(e)}
${g2e(e)}
${s.map(i=>`${i}:${n[i]}`).join(`
`)}

${s.join(";")}
${r}`}async createStringToSign(e,n,r){const s=new this.sha256;s.update(Kb(r));const i=await s.digest();return`${AT}
${e}
${n}
${Gi(i)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){const n=[];for(const i of e.split("/"))i?.length!==0&&i!=="."&&(i===".."?n.pop():n.push(i));const r=`${e?.startsWith("/")?"/":""}${n.join("/")}${n.length>0&&e?.endsWith("/")?"/":""}`;return Zh(r).replace(/%2F/g,"/")}return e}async getSignature(e,n,r,s){const i=await this.createStringToSign(e,n,s),o=new this.sha256(await r);return o.update(Kb(i)),Gi(await o.digest())}getSigningKey(e,n,r,s){return m2e(this.sha256,e,r,n,s||this.service)}validateResolvedCredentials(e){if(typeof e!="object"||typeof e.accessKeyId!="string"||typeof e.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}}const yx=t=>{const e=E2e(t).replace(/[\-:]/g,"");return{longDate:e,shortDate:e.slice(0,8)}},eF=t=>Object.keys(t).sort().join(";"),k2e=t=>{let e=!1,n;t.credentials&&(e=!0,n=vwe(t.credentials,ywe,gX)),n||(t.credentialDefaultProvider?n=bb(t.credentialDefaultProvider(Object.assign({},t,{parentClientConfig:t}))):n=async()=>{throw new Error("`credentials` is missing")});const r=async()=>n({callerClientConfig:t}),{signingEscapePath:s=!0,systemClockOffset:i=t.systemClockOffset||0,sha256:o}=t;let a;return t.signer?a=bb(t.signer):t.regionInfoProvider?a=()=>bb(t.region)().then(async l=>[await t.regionInfoProvider(l,{useFipsEndpoint:await t.useFipsEndpoint(),useDualstackEndpoint:await t.useDualstackEndpoint()})||{},l]).then(([l,c])=>{const{signingRegion:u,signingService:d}=l;t.signingRegion=t.signingRegion||u||c,t.signingName=t.signingName||d||t.serviceId;const h={...t,credentials:r,region:t.signingRegion,service:t.signingName,sha256:o,uriEscapePath:s},f=t.signerConstructor||Qj;return new f(h)}):a=async l=>{l=Object.assign({},{name:"sigv4",signingName:t.signingName||t.defaultSigningName,signingRegion:await bb(t.region)(),properties:{}},l);const c=l.signingRegion,u=l.signingName;t.signingRegion=t.signingRegion||c,t.signingName=t.signingName||u||t.serviceId;const d={...t,credentials:r,region:t.signingRegion,service:t.signingName,sha256:o,uriEscapePath:s},h=t.signerConstructor||Qj;return new h(d)},{...t,systemClockOffset:i,signingEscapePath:s,credentials:e?async()=>r().then(l=>Ywe(l,"CREDENTIALS_CODE","e")):r,signer:a}},th=(t,e)=>{const n=[];if(t&&n.push(t),e)for(const r of e)n.push(r);return n},Su=(t,e)=>`${t||"anonymous"}${e&&e.length>0?` (a.k.a. ${e.join(",")})`:""}`,wE=()=>{let t=[],e=[],n=!1;const r=new Set,s=d=>d.sort((h,f)=>tF[f.step]-tF[h.step]||nF[f.priority||"normal"]-nF[h.priority||"normal"]),i=d=>{let h=!1;const f=g=>{const y=th(g.name,g.aliases);if(y.includes(d)){h=!0;for(const m of y)r.delete(m);return!1}return!0};return t=t.filter(f),e=e.filter(f),h},o=d=>{let h=!1;const f=g=>{if(g.middleware===d){h=!0;for(const y of th(g.name,g.aliases))r.delete(y);return!1}return!0};return t=t.filter(f),e=e.filter(f),h},a=d=>(t.forEach(h=>{d.add(h.middleware,{...h})}),e.forEach(h=>{d.addRelativeTo(h.middleware,{...h})}),d.identifyOnResolve?.(u.identifyOnResolve()),d),l=d=>{const h=[];return d.before.forEach(f=>{f.before.length===0&&f.after.length===0?h.push(f):h.push(...l(f))}),h.push(d),d.after.reverse().forEach(f=>{f.before.length===0&&f.after.length===0?h.push(f):h.push(...l(f))}),h},c=(d=!1)=>{const h=[],f=[],g={};return t.forEach(m=>{const b={...m,before:[],after:[]};for(const v of th(b.name,b.aliases))g[v]=b;h.push(b)}),e.forEach(m=>{const b={...m,before:[],after:[]};for(const v of th(b.name,b.aliases))g[v]=b;f.push(b)}),f.forEach(m=>{if(m.toMiddleware){const b=g[m.toMiddleware];if(b===void 0){if(d)return;throw new Error(`${m.toMiddleware} is not found when adding ${Su(m.name,m.aliases)} middleware ${m.relation} ${m.toMiddleware}`)}m.relation==="after"&&b.after.push(m),m.relation==="before"&&b.before.push(m)}}),s(h).map(l).reduce((m,b)=>(m.push(...b),m),[])},u={add:(d,h={})=>{const{name:f,override:g,aliases:y}=h,m={step:"initialize",priority:"normal",middleware:d,...h},b=th(f,y);if(b.length>0){if(b.some(v=>r.has(v))){if(!g)throw new Error(`Duplicate middleware name '${Su(f,y)}'`);for(const v of b){const _=t.findIndex(w=>w.name===v||w.aliases?.some(S=>S===v));if(_===-1)continue;const E=t[_];if(E.step!==m.step||m.priority!==E.priority)throw new Error(`"${Su(E.name,E.aliases)}" middleware with ${E.priority} priority in ${E.step} step cannot be overridden by "${Su(f,y)}" middleware with ${m.priority} priority in ${m.step} step.`);t.splice(_,1)}}for(const v of b)r.add(v)}t.push(m)},addRelativeTo:(d,h)=>{const{name:f,override:g,aliases:y}=h,m={middleware:d,...h},b=th(f,y);if(b.length>0){if(b.some(v=>r.has(v))){if(!g)throw new Error(`Duplicate middleware name '${Su(f,y)}'`);for(const v of b){const _=e.findIndex(w=>w.name===v||w.aliases?.some(S=>S===v));if(_===-1)continue;const E=e[_];if(E.toMiddleware!==m.toMiddleware||E.relation!==m.relation)throw new Error(`"${Su(E.name,E.aliases)}" middleware ${E.relation} "${E.toMiddleware}" middleware cannot be overridden by "${Su(f,y)}" middleware ${m.relation} "${m.toMiddleware}" middleware.`);e.splice(_,1)}}for(const v of b)r.add(v)}e.push(m)},clone:()=>a(wE()),use:d=>{d.applyToStack(u)},remove:d=>typeof d=="string"?i(d):o(d),removeByTag:d=>{let h=!1;const f=g=>{const{tags:y,name:m,aliases:b}=g;if(y&&y.includes(d)){const v=th(m,b);for(const _ of v)r.delete(_);return h=!0,!1}return!0};return t=t.filter(f),e=e.filter(f),h},concat:d=>{const h=a(wE());return h.use(d),h.identifyOnResolve(n||h.identifyOnResolve()||(d.identifyOnResolve?.()??!1)),h},applyToStack:a,identify:()=>c(!0).map(d=>{const h=d.step??d.relation+" "+d.toMiddleware;return Su(d.name,d.aliases)+" - "+h}),identifyOnResolve(d){return typeof d=="boolean"&&(n=d),n},resolve:(d,h)=>{for(const f of c().map(g=>g.middleware).reverse())d=f(d,h);return n&&console.log(u.identify()),d}};return u},tF={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},nF={high:3,normal:2,low:1};class C2e{constructor(e){this.config=e,this.middlewareStack=wE()}send(e,n,r){const s=typeof n!="function"?n:void 0,i=typeof n=="function"?n:r,o=s===void 0&&this.config.cacheMiddleware===!0;let a;if(o){this.handlers||(this.handlers=new WeakMap);const l=this.handlers;l.has(e.constructor)?a=l.get(e.constructor):(a=e.resolveMiddleware(this.middlewareStack,this.config,s),l.set(e.constructor,a))}else delete this.handlers,a=e.resolveMiddleware(this.middlewareStack,this.config,s);if(i)a(e).then(l=>i(null,l.output),l=>i(l)).catch(()=>{});else return a(e).then(l=>l.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}}class kk{constructor(){this.middlewareStack=wE()}static classBuilder(){return new A2e}resolveMiddlewareWithContext(e,n,r,{middlewareFn:s,clientName:i,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:l,smithyContext:c,additionalContext:u,CommandCtor:d}){for(const m of s.bind(this)(d,e,n,r))this.middlewareStack.use(m);const h=e.concat(this.middlewareStack),{logger:f}=n,g={logger:f,clientName:i,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:l,[JN]:{commandInstance:this,...c},...u},{requestHandler:y}=n;return h.resolve(m=>y.handle(m.request,r||{}),g)}}class A2e{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=e=>e,this._outputFilterSensitiveLog=e=>e,this._serializer=null,this._deserializer=null}init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,n,r={}){return this._smithyContext={service:e,operation:n,...r},this}c(e={}){return this._additionalContext=e,this}n(e,n){return this._clientName=e,this._commandName=n,this}f(e=r=>r,n=r=>r){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=n,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}build(){const e=this;let n;return n=class extends kk{static getEndpointParameterInstructions(){return e._ep}constructor(...[r]){super(),this.serialize=e._serializer,this.deserialize=e._deserializer,this.input=r??{},e._init(this)}resolveMiddleware(r,s,i){return this.resolveMiddlewareWithContext(r,s,i,{CommandCtor:n,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog,outputFilterSensitiveLog:e._outputFilterSensitiveLog,smithyContext:e._smithyContext,additionalContext:e._additionalContext})}}}}const gf="***SensitiveInformation***",T2e=t=>{if(t!=null){if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return String(e)!==String(t)&&jX.warn(MX(`Expected number but observed string: ${t}`)),e}if(typeof t=="number")return t;throw new TypeError(`Expected number, got ${typeof t}: ${t}`)}},N2e=t=>{if(t!=null){if(Number.isInteger(t)&&!Number.isNaN(t))return t;throw new TypeError(`Expected integer, got ${typeof t}: ${t}`)}},OX=t=>P2e(t,32),P2e=(t,e)=>{const n=N2e(t);if(n!==void 0&&I2e(n,e)!==n)throw new TypeError(`Expected ${e}-bit integer, got ${t}`);return n},I2e=(t,e)=>{switch(e){case 32:return Int32Array.of(t)[0];case 16:return Int16Array.of(t)[0];case 8:return Int8Array.of(t)[0]}},R2e=(t,e)=>{if(t==null)throw new TypeError(`Expected a non-null value for ${e}`);return t},DX=t=>{if(t==null)return;if(typeof t=="object"&&!Array.isArray(t))return t;const e=Array.isArray(t)?"array":typeof t;throw new TypeError(`Expected object, got ${e}: ${t}`)},Pn=t=>{if(t!=null){if(typeof t=="string")return t;if(["boolean","number","bigint"].includes(typeof t))return jX.warn(MX(`Expected string, got ${typeof t}: ${t}`)),String(t);throw new TypeError(`Expected string, got ${typeof t}: ${t}`)}},L2e=t=>{if(t==null)return;const e=DX(t),n=Object.entries(e).filter(([,r])=>r!=null).map(([r])=>r);if(n.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(n.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${n} were not null.`);return e},rF=t=>typeof t=="string"?O2e(t):T2e(t),O2e=t=>{switch(t){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${t}`)}},MX=t=>String(new TypeError(t).stack||t).split(`
`).slice(0,5).filter(e=>!e.includes("stackTraceWarning")).join(`
`),jX={warn:console.warn};class im extends Error{constructor(e){super(e.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}static isInstance(e){if(!e)return!1;const n=e;return im.prototype.isPrototypeOf(n)||!!n.$fault&&!!n.$metadata&&(n.$fault==="client"||n.$fault==="server")}static[Symbol.hasInstance](e){if(!e)return!1;const n=e;return this===im?im.isInstance(e):im.isInstance(e)?n.name&&this.name?this.prototype.isPrototypeOf(e)||n.name===this.name:this.prototype.isPrototypeOf(e):!1}}const lo=(t,e={})=>{Object.entries(e).filter(([,r])=>r!==void 0).forEach(([r,s])=>{(t[r]==null||t[r]==="")&&(t[r]=s)});const n=t.message||t.Message||"UnknownError";return t.message=n,delete t.Message,t},D2e=({output:t,parsedBody:e,exceptionCtor:n,errorCode:r})=>{const s=j2e(t),i=s.httpStatusCode?s.httpStatusCode+"":void 0,o=new n({name:e?.code||e?.Code||r||i||"UnknownError",$fault:"client",$metadata:s});throw lo(o,e)},M2e=t=>({output:e,parsedBody:n,errorCode:r})=>{D2e({output:e,parsedBody:n,exceptionCtor:t,errorCode:r})},j2e=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),F2e=t=>{switch(t){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},B2e=t=>{const e=[];for(const n in vE){const r=vE[n];t[r]!==void 0&&e.push({algorithmId:()=>r,checksumConstructor:()=>t[r]})}return{_checksumAlgorithms:e,addChecksumAlgorithm(n){this._checksumAlgorithms.push(n)},checksumAlgorithms(){return this._checksumAlgorithms}}},U2e=t=>{const e={};return t.checksumAlgorithms().forEach(n=>{e[n.algorithmId()]=n.checksumConstructor()}),e},$2e=t=>{let e=t.retryStrategy;return{setRetryStrategy(n){e=n},retryStrategy(){return e}}},H2e=t=>{const e={};return e.retryStrategy=t.retryStrategy(),e},z2e=t=>({...B2e(t),...$2e(t)}),V2e=t=>({...U2e(t),...H2e(t)}),W2e=t=>t!=null;class FX{trace(){}debug(){}info(){}warn(){}error(){}}function ks(t,e,n){let r,s,i;if(typeof e>"u"&&typeof n>"u")r={},i=t;else{if(r=t,typeof e=="function")return s=e,i=n,G2e(r,s,i);i=e}for(const o of Object.keys(i)){if(!Array.isArray(i[o])){r[o]=i[o];continue}BX(r,null,i,o)}return r}const tn=(t,e)=>{const n={};for(const r in e)BX(n,t,e,r);return n},G2e=(t,e,n)=>ks(t,Object.entries(n).reduce((r,[s,i])=>(Array.isArray(i)?r[s]=i:typeof i=="function"?r[s]=[e,i()]:r[s]=[e,i],r),{})),BX=(t,e,n,r)=>{if(e!==null){let o=n[r];typeof o=="function"&&(o=[,o]);const[a=q2e,l=K2e,c=r]=o;(typeof a=="function"&&a(e[c])||typeof a!="function"&&a)&&(t[r]=l(e[c]));return}let[s,i]=n[r];if(typeof i=="function"){let o;const a=s===void 0&&(o=i())!=null,l=typeof s=="function"&&!!s(void 0)||typeof s!="function"&&!!s;a?t[r]=o:l&&(t[r]=i())}else{const o=s===void 0&&i!=null,a=typeof s=="function"&&!!s(i)||typeof s!="function"&&!!s;(o||a)&&(t[r]=i)}},q2e=t=>t!=null,K2e=t=>t,sF=t=>{if(t!==t)return"NaN";switch(t){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return t}},ln=t=>{if(t==null)return{};if(Array.isArray(t))return t.filter(e=>e!=null).map(ln);if(typeof t=="object"){const e={};for(const n of Object.keys(t))t[n]!=null&&(e[n]=ln(t[n]));return e}return t},Dd=t=>{if(t!=null)return typeof t=="object"&&"__type"in t&&delete t.__type,L2e(t)},Y2e=(t,e)=>mX(t,e).then(n=>e.utf8Encoder(n)),co=(t,e)=>Y2e(t,e).then(n=>{if(n.length)try{return JSON.parse(n)}catch(r){throw r?.name==="SyntaxError"&&Object.defineProperty(r,"$responseBodyText",{value:n}),r}return{}}),X2e=async(t,e)=>{const n=await co(t,e);return n.message=n.message??n.Message,n},J2e=(t,e)=>{const n=(i,o)=>Object.keys(i).find(a=>a.toLowerCase()===o.toLowerCase()),r=i=>{let o=i;return typeof o=="number"&&(o=o.toString()),o.indexOf(",")>=0&&(o=o.split(",")[0]),o.indexOf(":")>=0&&(o=o.split(":")[0]),o.indexOf("#")>=0&&(o=o.split("#")[1]),o},s=n(t.headers,"x-amzn-errortype");if(s!==void 0)return r(t.headers[s]);if(e.code!==void 0)return r(e.code);if(e.__type!==void 0)return r(e.__type)},Z2e=/\d{12}\.ddb/;async function Q2e(t,e,n){if(n.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&Xa(t,"PROTOCOL_RPC_V2_CBOR","M"),typeof e.retryStrategy=="function"){const i=await e.retryStrategy();typeof i.acquireInitialRetryToken=="function"?i.constructor?.name?.includes("Adaptive")?Xa(t,"RETRY_MODE_ADAPTIVE","F"):Xa(t,"RETRY_MODE_STANDARD","E"):Xa(t,"RETRY_MODE_LEGACY","D")}if(typeof e.accountIdEndpointMode=="function"){const i=t.endpointV2;switch(String(i?.url?.hostname).match(Z2e)&&Xa(t,"ACCOUNT_ID_ENDPOINT","O"),await e.accountIdEndpointMode?.()){case"disabled":Xa(t,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":Xa(t,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":Xa(t,"ACCOUNT_ID_MODE_REQUIRED","R");break}}const s=t.__smithy_context?.selectedHttpAuthScheme?.identity;if(s?.$source){const i=s;i.accountId&&Xa(t,"RESOLVED_ACCOUNT_ID","T");for(const[o,a]of Object.entries(i.$source??{}))Xa(t,o,a)}}const iF="user-agent",IT="x-amz-user-agent",oF=" ",RT="/",eEe=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,tEe=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,aF="-",nEe=1024;function rEe(t){let e="";for(const n in t){const r=t[n];if(e.length+r.length+1<=nEe){e.length?e+=","+r:e+=r;continue}break}return e}const sEe=t=>(e,n)=>async r=>{const{request:s}=r;if(!io.isInstance(s))return e(r);const{headers:i}=s,o=n?.userAgent?.map(vx)||[],a=(await t.defaultUserAgentProvider()).map(vx);await Q2e(n,t,r);const l=n;a.push(`m/${rEe(Object.assign({},n.__smithy_context?.features,l.__aws_sdk_context?.features))}`);const c=t?.customUserAgent?.map(vx)||[],u=await t.userAgentAppId();u&&a.push(vx([`app/${u}`]));const d=[].concat([...a,...o,...c]).join(oF),h=[...a.filter(f=>f.startsWith("aws-sdk-")),...c].join(oF);return t.runtime!=="browser"?(h&&(i[IT]=i[IT]?`${i[iF]} ${h}`:h),i[iF]=d):i[IT]=d,e({...r,request:s})},vx=t=>{const e=t[0].split(RT).map(o=>o.replace(eEe,aF)).join(RT),n=t[1]?.replace(tEe,aF),r=e.indexOf(RT),s=e.substring(0,r);let i=e.substring(r+1);return s==="api"&&(i=i.toLowerCase()),[s,i,n].filter(o=>o&&o.length>0).reduce((o,a,l)=>{switch(l){case 0:return a;case 1:return`${o}/${a}`;default:return`${o}#${a}`}},"")},iEe={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},oEe=t=>({applyToStack:e=>{e.add(sEe(t),iEe)}});var lF;(function(t){t.ENV="env",t.CONFIG="shared config entry"})(lF||(lF={}));const aEe=!1,lEe=!1,UX=t=>typeof t=="string"&&(t.startsWith("fips-")||t.endsWith("-fips")),cF=t=>UX(t)?["fips-aws-global","aws-fips"].includes(t)?"us-east-1":t.replace(/fips-(dkr-|prod-)?|-fips/,""):t,cEe=t=>{const{region:e,useFipsEndpoint:n}=t;if(!e)throw new Error("Region is missing");return{...t,region:async()=>{if(typeof e=="string")return cF(e);const r=await e();return cF(r)},useFipsEndpoint:async()=>{const r=typeof e=="string"?e:await e();return UX(r)?!0:typeof n!="function"?Promise.resolve(!!n):n()}}},uEe=t=>({...t,eventStreamMarshaller:t.eventStreamSerdeProvider(t)}),uF="content-length";function dEe(t){return e=>async n=>{const r=n.request;if(io.isInstance(r)){const{body:s,headers:i}=r;if(s&&Object.keys(i).map(o=>o.toLowerCase()).indexOf(uF)===-1)try{const o=t(s);r.headers={...r.headers,[uF]:String(o)}}catch{}}return e({...n,request:r})}}const hEe={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},fEe=t=>({applyToStack:e=>{e.add(dEe(t.bodyLengthChecker),hEe)}}),pEe=async t=>{const e=t?.Bucket||"";if(typeof t.Bucket=="string"&&(t.Bucket=e.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),vEe(e)){if(t.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!yEe(e)||e.indexOf(".")!==-1&&!String(t.Endpoint).startsWith("http:")||e.toLowerCase()!==e||e.length<3)&&(t.ForcePathStyle=!0);return t.DisableMultiRegionAccessPoints&&(t.disableMultiRegionAccessPoints=!0,t.DisableMRAP=!0),t},mEe=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,gEe=/(\d+\.){3}\d+/,bEe=/\.\./,yEe=t=>mEe.test(t)&&!gEe.test(t)&&!bEe.test(t),vEe=t=>{const[e,n,r,,,s]=t.split(":"),i=e==="arn"&&t.split(":").length>=6,o=!!(i&&n&&r&&s);if(i&&!o)throw new Error(`Invalid ARN: ${t} was an invalid ARN.`);return o},_Ee=(t,e,n)=>{const r=async()=>{const s=n[t]??n[e];return typeof s=="function"?s():s};return t==="credentialScope"||e==="CredentialScope"?async()=>{const s=typeof n.credentials=="function"?await n.credentials():n.credentials;return s?.credentialScope??s?.CredentialScope}:t==="accountId"||e==="AccountId"?async()=>{const s=typeof n.credentials=="function"?await n.credentials():n.credentials;return s?.accountId??s?.AccountId}:t==="endpoint"||e==="endpoint"?async()=>{const s=await r();if(s&&typeof s=="object"){if("url"in s)return s.url.href;if("hostname"in s){const{protocol:i,hostname:o,port:a,path:l}=s;return`${i}//${o}${a?":"+a:""}${l}`}}return s}:r},$X=async t=>{};function xEe(t){const e={};if(t=t.replace(/^\?/,""),t)for(const n of t.split("&")){let[r,s=null]=n.split("=");r=decodeURIComponent(r),s&&(s=decodeURIComponent(s)),r in e?Array.isArray(e[r])?e[r].push(s):e[r]=[e[r],s]:e[r]=s}return e}const EE=t=>{if(typeof t=="string")return EE(new URL(t));const{hostname:e,pathname:n,port:r,protocol:s,search:i}=t;let o;return i&&(o=xEe(i)),{hostname:e,port:r?parseInt(r):void 0,protocol:s,path:n,query:o}},HX=t=>typeof t=="object"?"url"in t?EE(t.url):t:EE(t),wEe=async(t,e,n,r)=>{if(!n.endpoint){let o;n.serviceConfiguredEndpoint?o=await n.serviceConfiguredEndpoint():o=await $X(n.serviceId),o&&(n.endpoint=()=>Promise.resolve(HX(o)))}const s=await EEe(t,e,n);if(typeof n.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return n.endpointProvider(s,r)},EEe=async(t,e,n)=>{const r={},s=e?.getEndpointParameterInstructions?.()||{};for(const[i,o]of Object.entries(s))switch(o.type){case"staticContextParams":r[i]=o.value;break;case"contextParams":r[i]=t[o.name];break;case"clientContextParams":case"builtInParams":r[i]=await _Ee(o.name,i,n)();break;case"operationContextParams":r[i]=o.get(t);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(o))}return Object.keys(s).length===0&&Object.assign(r,n),String(n.serviceId).toLowerCase()==="s3"&&await pEe(r),r},SEe=({config:t,instructions:e})=>(n,r)=>async s=>{t.endpoint&&pwe(r,"ENDPOINT_OVERRIDE","N");const i=await wEe(s.input,{getEndpointParameterInstructions(){return e}},{...t},r);r.endpointV2=i,r.authSchemes=i.properties?.authSchemes;const o=r.authSchemes?.[0];if(o){r.signing_region=o.signingRegion,r.signing_service=o.signingName;const l=Ek(r)?.selectedHttpAuthScheme?.httpAuthOption;l&&(l.signingProperties=Object.assign(l.signingProperties||{},{signing_region:o.signingRegion,signingRegion:o.signingRegion,signing_service:o.signingName,signingName:o.signingName,signingRegionSet:o.signingRegionSet},o.properties))}return n({...s})},kEe={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:dL.name},yL=(t,e)=>({applyToStack:n=>{n.addRelativeTo(SEe({config:t,instructions:e}),kEe)}}),CEe=t=>{const e=t.tls??!0,{endpoint:n}=t,r=n!=null?async()=>HX(await od(n)()):void 0,i={...t,endpoint:r,tls:e,isCustomEndpoint:!!n,useDualstackEndpoint:od(t.useDualstackEndpoint??!1),useFipsEndpoint:od(t.useFipsEndpoint??!1)};let o;return i.serviceConfiguredEndpoint=async()=>(t.serviceId&&!o&&(o=$X(t.serviceId)),o),i};var eg;(function(t){t.STANDARD="standard",t.ADAPTIVE="adaptive"})(eg||(eg={}));const SE=3,AEe=eg.STANDARD,TEe=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],NEe=["TimeoutError","RequestTimeout","RequestTimeoutException"],PEe=[500,502,503,504],IEe=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],REe=t=>t.$metadata?.clockSkewCorrected,zX=t=>t.$metadata?.httpStatusCode===429||TEe.includes(t.name)||t.$retryable?.throttling==!0,vL=(t,e=0)=>REe(t)||NEe.includes(t.name)||IEe.includes(t?.code||"")||PEe.includes(t.$metadata?.httpStatusCode||0)||t.cause!==void 0&&e<=10&&vL(t.cause,e+1),LEe=t=>{if(t.$metadata?.httpStatusCode!==void 0){const e=t.$metadata.httpStatusCode;return 500<=e&&e<=599&&!vL(t)}return!1};class Ck{constructor(e){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=e?.beta??.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??.5,this.scaleConstant=e?.scaleConstant??.4,this.smooth=e?.smooth??.8;const n=this.getCurrentTimeInSeconds();this.lastThrottleTime=n,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){const n=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise(r=>Ck.setTimeoutFn(r,n))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){const e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}const n=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+n),this.lastTimestamp=e}updateClientSendingRate(e){let n;if(this.updateMeasuredRate(),zX(e)){const s=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=s,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),n=this.cubicThrottle(s),this.enableTokenBucket()}else this.calculateTimeWindow(),n=this.cubicSuccess(this.getCurrentTimeInSeconds());const r=Math.min(n,2*this.measuredTxRate);this.updateTokenBucketRate(r)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const e=this.getCurrentTimeInSeconds(),n=Math.floor(e*2)/2;if(this.requestCount++,n>this.lastTxRateBucket){const r=this.requestCount/(n-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(r*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=n}}getPrecise(e){return parseFloat(e.toFixed(8))}}Ck.setTimeoutFn=setTimeout;const eP=100,VX=20*1e3,OEe=500,dF=500,DEe=5,MEe=10,jEe=1,FEe="amz-sdk-invocation-id",BEe="amz-sdk-request",UEe=()=>{let t=eP;return{computeNextBackoffDelay:r=>Math.floor(Math.min(VX,Math.random()*2**r*t)),setDelayBase:r=>{t=r}}},hF=({retryDelay:t,retryCount:e,retryCost:n})=>({getRetryCount:()=>e,getRetryDelay:()=>Math.min(VX,t),getRetryCost:()=>n});class WX{constructor(e){this.maxAttempts=e,this.mode=eg.STANDARD,this.capacity=dF,this.retryBackoffStrategy=UEe(),this.maxAttemptsProvider=typeof e=="function"?e:async()=>e}async acquireInitialRetryToken(e){return hF({retryDelay:eP,retryCount:0})}async refreshRetryTokenForRetry(e,n){const r=await this.getMaxAttempts();if(this.shouldRetry(e,n,r)){const s=n.errorType;this.retryBackoffStrategy.setDelayBase(s==="THROTTLING"?OEe:eP);const i=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),o=n.retryAfterHint?Math.max(n.retryAfterHint.getTime()-Date.now()||0,i):i,a=this.getCapacityCost(s);return this.capacity-=a,hF({retryDelay:o,retryCount:e.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(e){this.capacity=Math.max(dF,this.capacity+(e.getRetryCost()??jEe))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${SE}`),SE}}shouldRetry(e,n,r){return e.getRetryCount()+1<r&&this.capacity>=this.getCapacityCost(n.errorType)&&this.isRetryableError(n.errorType)}getCapacityCost(e){return e==="TRANSIENT"?MEe:DEe}isRetryableError(e){return e==="THROTTLING"||e==="TRANSIENT"}}class $Ee{constructor(e,n){this.maxAttemptsProvider=e,this.mode=eg.ADAPTIVE;const{rateLimiter:r}=n??{};this.rateLimiter=r??new Ck,this.standardRetryStrategy=new WX(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,n){return this.rateLimiter.updateClientSendingRate(n),this.standardRetryStrategy.refreshRetryTokenForRetry(e,n)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}}let _x;const HEe=new Uint8Array(16);function zEe(){if(!_x&&(_x=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!_x))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _x(HEe)}const ps=[];for(let t=0;t<256;++t)ps.push((t+256).toString(16).slice(1));function VEe(t,e=0){return ps[t[e+0]]+ps[t[e+1]]+ps[t[e+2]]+ps[t[e+3]]+"-"+ps[t[e+4]]+ps[t[e+5]]+"-"+ps[t[e+6]]+ps[t[e+7]]+"-"+ps[t[e+8]]+ps[t[e+9]]+"-"+ps[t[e+10]]+ps[t[e+11]]+ps[t[e+12]]+ps[t[e+13]]+ps[t[e+14]]+ps[t[e+15]]}const WEe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),fF={randomUUID:WEe};function GEe(t,e,n){if(fF.randomUUID&&!t)return fF.randomUUID();t=t||{};const r=t.random||(t.rng||zEe)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,VEe(r)}const qEe=t=>t instanceof Error?t:t instanceof Object?Object.assign(new Error,t):typeof t=="string"?new Error(t):new Error(`AWS SDK error wrapper for ${t}`),KEe=t=>{const{retryStrategy:e}=t,n=od(t.maxAttempts??SE);return{...t,maxAttempts:n,retryStrategy:async()=>e||(await od(t.retryMode)()===eg.ADAPTIVE?new $Ee(n):new WX(n))}},YEe=t=>t?.body instanceof ReadableStream,XEe=t=>(e,n)=>async r=>{let s=await t.retryStrategy();const i=await t.maxAttempts();if(JEe(s)){s=s;let o=await s.acquireInitialRetryToken(n.partition_id),a=new Error,l=0,c=0;const{request:u}=r,d=io.isInstance(u);for(d&&(u.headers[FEe]=GEe());;)try{d&&(u.headers[BEe]=`attempt=${l+1}; max=${i}`);const{response:h,output:f}=await e(r);return s.recordSuccess(o),f.$metadata.attempts=l+1,f.$metadata.totalRetryDelay=c,{response:h,output:f}}catch(h){const f=ZEe(h);if(a=qEe(h),d&&YEe(u))throw(n.logger instanceof FX?console:n.logger)?.warn("An error was encountered in a non-retryable streaming request."),a;try{o=await s.refreshRetryTokenForRetry(o,f)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=l+1,a.$metadata.totalRetryDelay=c,a}l=o.getRetryCount();const g=o.getRetryDelay();c+=g,await new Promise(y=>setTimeout(y,g))}}else return s=s,s?.mode&&(n.userAgent=[...n.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(e,r)},JEe=t=>typeof t.acquireInitialRetryToken<"u"&&typeof t.refreshRetryTokenForRetry<"u"&&typeof t.recordSuccess<"u",ZEe=t=>{const e={error:t,errorType:QEe(t)},n=nSe(t.$response);return n&&(e.retryAfterHint=n),e},QEe=t=>zX(t)?"THROTTLING":vL(t)?"TRANSIENT":LEe(t)?"SERVER_ERROR":"CLIENT_ERROR",eSe={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},tSe=t=>({applyToStack:e=>{e.add(XEe(t),eSe)}}),nSe=t=>{if(!_E.isInstance(t))return;const e=Object.keys(t.headers).find(i=>i.toLowerCase()==="retry-after");if(!e)return;const n=t.headers[e],r=Number(n);return Number.isNaN(r)?new Date(n):new Date(r*1e3)},rSe=async(t,e,n)=>({operation:Ek(e).operation,region:await od(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function sSe(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"bedrock",region:t.region},propertiesExtractor:(e,n)=>({signingProperties:{config:e,context:n}})}}const iSe=t=>{const e=[];switch(t.operation){default:e.push(sSe(t))}return e},oSe=t=>({...k2e(t)}),aSe=t=>({...t,useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"bedrock"}),_L={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},lSe="3.744.0",cSe={version:lSe},uSe=t=>new TextEncoder().encode(t);var dSe=typeof bt<"u"&&bt.from?function(t){return bt.from(t,"utf8")}:uSe;function r1(t){return t instanceof Uint8Array?t:typeof t=="string"?dSe(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)}function tP(t){return typeof t=="string"?t.length===0:t.byteLength===0}function hSe(t){if(!Uint32Array.from){for(var e=new Uint32Array(t.length),n=0;n<t.length;)e[n]=t[n],n+=1;return e}return Uint32Array.from(t)}var GX={name:"SHA-256"},pF={name:"HMAC",hash:GX},fSe=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85]);const pSe={};function Jw(){return typeof window<"u"?window:typeof self<"u"?self:pSe}var mSe=function(){function t(e){this.toHash=new Uint8Array(0),this.secret=e,this.reset()}return t.prototype.update=function(e){if(!tP(e)){var n=r1(e),r=new Uint8Array(this.toHash.byteLength+n.byteLength);r.set(this.toHash,0),r.set(n,this.toHash.byteLength),this.toHash=r}},t.prototype.digest=function(){var e=this;return this.key?this.key.then(function(n){return Jw().crypto.subtle.sign(pF,n,e.toHash).then(function(r){return new Uint8Array(r)})}):tP(this.toHash)?Promise.resolve(fSe):Promise.resolve().then(function(){return Jw().crypto.subtle.digest(GX,e.toHash)}).then(function(n){return Promise.resolve(new Uint8Array(n))})},t.prototype.reset=function(){var e=this;this.toHash=new Uint8Array(0),this.secret&&this.secret!==void 0&&(this.key=new Promise(function(n,r){Jw().crypto.subtle.importKey("raw",r1(e.secret),pF,!1,["sign"]).then(n,r)}),this.key.catch(function(){}))},t}(),ko=64,gSe=32,bSe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ySe=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],vSe=Math.pow(2,53)-1,Zw=function(){function t(){this.state=Int32Array.from(ySe),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return t.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var n=0,r=e.byteLength;if(this.bytesHashed+=r,this.bytesHashed*8>vSe)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;r>0;)this.buffer[this.bufferLength++]=e[n++],r--,this.bufferLength===ko&&(this.hashBuffer(),this.bufferLength=0)},t.prototype.digest=function(){if(!this.finished){var e=this.bytesHashed*8,n=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),r=this.bufferLength;if(n.setUint8(this.bufferLength++,128),r%ko>=ko-8){for(var s=this.bufferLength;s<ko;s++)n.setUint8(s,0);this.hashBuffer(),this.bufferLength=0}for(var s=this.bufferLength;s<ko-8;s++)n.setUint8(s,0);n.setUint32(ko-8,Math.floor(e/4294967296),!0),n.setUint32(ko-4,e),this.hashBuffer(),this.finished=!0}for(var i=new Uint8Array(gSe),s=0;s<8;s++)i[s*4]=this.state[s]>>>24&255,i[s*4+1]=this.state[s]>>>16&255,i[s*4+2]=this.state[s]>>>8&255,i[s*4+3]=this.state[s]>>>0&255;return i},t.prototype.hashBuffer=function(){for(var e=this,n=e.buffer,r=e.state,s=r[0],i=r[1],o=r[2],a=r[3],l=r[4],c=r[5],u=r[6],d=r[7],h=0;h<ko;h++){if(h<16)this.temp[h]=(n[h*4]&255)<<24|(n[h*4+1]&255)<<16|(n[h*4+2]&255)<<8|n[h*4+3]&255;else{var f=this.temp[h-2],g=(f>>>17|f<<15)^(f>>>19|f<<13)^f>>>10;f=this.temp[h-15];var y=(f>>>7|f<<25)^(f>>>18|f<<14)^f>>>3;this.temp[h]=(g+this.temp[h-7]|0)+(y+this.temp[h-16]|0)}var m=(((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))+(l&c^~l&u)|0)+(d+(bSe[h]+this.temp[h]|0)|0)|0,b=((s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10))+(s&i^s&o^i&o)|0;d=u,u=c,c=l,l=a+m|0,a=o,o=i,i=s,s=m+b|0}r[0]+=s,r[1]+=i,r[2]+=o,r[3]+=a,r[4]+=l,r[5]+=c,r[6]+=u,r[7]+=d},t}(),_Se=function(){function t(e){this.secret=e,this.hash=new Zw,this.reset()}return t.prototype.update=function(e){if(!(tP(e)||this.error))try{this.hash.update(r1(e))}catch(n){this.error=n}},t.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},t.prototype.digest=function(){return Jge(this,void 0,void 0,function(){return Zge(this,function(e){return[2,this.digestSync()]})})},t.prototype.reset=function(){if(this.hash=new Zw,this.secret){this.outer=new Zw;var e=xSe(this.secret),n=new Uint8Array(ko);n.set(e);for(var r=0;r<ko;r++)e[r]^=54,n[r]^=92;this.hash.update(e),this.outer.update(n);for(var r=0;r<e.byteLength;r++)e[r]=0}},t}();function xSe(t){var e=r1(t);if(e.byteLength>ko){var n=new Zw;n.update(e),e=n.digest()}var r=new Uint8Array(ko);return r.set(e),r}var wSe=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function ESe(t){if(SSe(t)&&typeof t.crypto.subtle=="object"){var e=t.crypto.subtle;return kSe(e)}return!1}function SSe(t){if(typeof t=="object"&&typeof t.crypto=="object"){var e=t.crypto.getRandomValues;return typeof e=="function"}return!1}function kSe(t){return t&&wSe.every(function(e){return typeof t[e]=="function"})}var CSe=function(){function t(e){ESe(Jw())?this.hash=new mSe(e):this.hash=new _Se(e)}return t.prototype.update=function(e,n){this.hash.update(r1(e))},t.prototype.digest=function(){return this.hash.digest()},t.prototype.reset=function(){this.hash.reset()},t}();const ASe={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},qX={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},Sr={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},ti={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},Lu={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class it{static getFirstMatch(e,n){const r=n.match(e);return r&&r.length>0&&r[1]||""}static getSecondMatch(e,n){const r=n.match(e);return r&&r.length>1&&r[2]||""}static matchAndReturnConst(e,n,r){if(e.test(n))return r}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const n=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(n.push(0),n[0]===10)switch(n[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const n=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(n.push(0),!(n[0]===1&&n[1]<5)){if(n[0]===1&&n[1]<6)return"Cupcake";if(n[0]===1&&n[1]>=6)return"Donut";if(n[0]===2&&n[1]<2)return"Eclair";if(n[0]===2&&n[1]===2)return"Froyo";if(n[0]===2&&n[1]>2)return"Gingerbread";if(n[0]===3)return"Honeycomb";if(n[0]===4&&n[1]<1)return"Ice Cream Sandwich";if(n[0]===4&&n[1]<4)return"Jelly Bean";if(n[0]===4&&n[1]>=4)return"KitKat";if(n[0]===5)return"Lollipop";if(n[0]===6)return"Marshmallow";if(n[0]===7)return"Nougat";if(n[0]===8)return"Oreo";if(n[0]===9)return"Pie"}}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,n,r=!1){const s=it.getVersionPrecision(e),i=it.getVersionPrecision(n);let o=Math.max(s,i),a=0;const l=it.map([e,n],c=>{const u=o-it.getVersionPrecision(c),d=c+new Array(u+1).join(".0");return it.map(d.split("."),h=>new Array(20-h.length).join("0")+h).reverse()});for(r&&(a=o-Math.min(s,i)),o-=1;o>=a;){if(l[0][o]>l[1][o])return 1;if(l[0][o]===l[1][o]){if(o===a)return 0;o-=1}else if(l[0][o]<l[1][o])return-1}}static map(e,n){const r=[];let s;if(Array.prototype.map)return Array.prototype.map.call(e,n);for(s=0;s<e.length;s+=1)r.push(n(e[s]));return r}static find(e,n){let r,s;if(Array.prototype.find)return Array.prototype.find.call(e,n);for(r=0,s=e.length;r<s;r+=1){const i=e[r];if(n(i,r))return i}}static assign(e,...n){const r=e;let s,i;if(Object.assign)return Object.assign(e,...n);for(s=0,i=n.length;s<i;s+=1){const o=n[s];typeof o=="object"&&o!==null&&Object.keys(o).forEach(l=>{r[l]=o[l]})}return e}static getBrowserAlias(e){return ASe[e]}static getBrowserTypeByAlias(e){return qX[e]||""}}const Vn=/version\/(\d+(\.?_?\d+)+)/i,TSe=[{test:[/googlebot/i],describe(t){const e={name:"Googlebot"},n=it.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||it.getFirstMatch(Vn,t);return n&&(e.version=n),e}},{test:[/opera/i],describe(t){const e={name:"Opera"},n=it.getFirstMatch(Vn,t)||it.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opr\/|opios/i],describe(t){const e={name:"Opera"},n=it.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||it.getFirstMatch(Vn,t);return n&&(e.version=n),e}},{test:[/SamsungBrowser/i],describe(t){const e={name:"Samsung Internet for Android"},n=it.getFirstMatch(Vn,t)||it.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Whale/i],describe(t){const e={name:"NAVER Whale Browser"},n=it.getFirstMatch(Vn,t)||it.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MZBrowser/i],describe(t){const e={name:"MZ Browser"},n=it.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||it.getFirstMatch(Vn,t);return n&&(e.version=n),e}},{test:[/focus/i],describe(t){const e={name:"Focus"},n=it.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||it.getFirstMatch(Vn,t);return n&&(e.version=n),e}},{test:[/swing/i],describe(t){const e={name:"Swing"},n=it.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||it.getFirstMatch(Vn,t);return n&&(e.version=n),e}},{test:[/coast/i],describe(t){const e={name:"Opera Coast"},n=it.getFirstMatch(Vn,t)||it.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(t){const e={name:"Opera Touch"},n=it.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||it.getFirstMatch(Vn,t);return n&&(e.version=n),e}},{test:[/yabrowser/i],describe(t){const e={name:"Yandex Browser"},n=it.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||it.getFirstMatch(Vn,t);return n&&(e.version=n),e}},{test:[/ucbrowser/i],describe(t){const e={name:"UC Browser"},n=it.getFirstMatch(Vn,t)||it.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Maxthon|mxios/i],describe(t){const e={name:"Maxthon"},n=it.getFirstMatch(Vn,t)||it.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/epiphany/i],describe(t){const e={name:"Epiphany"},n=it.getFirstMatch(Vn,t)||it.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/puffin/i],describe(t){const e={name:"Puffin"},n=it.getFirstMatch(Vn,t)||it.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sleipnir/i],describe(t){const e={name:"Sleipnir"},n=it.getFirstMatch(Vn,t)||it.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/k-meleon/i],describe(t){const e={name:"K-Meleon"},n=it.getFirstMatch(Vn,t)||it.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/micromessenger/i],describe(t){const e={name:"WeChat"},n=it.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||it.getFirstMatch(Vn,t);return n&&(e.version=n),e}},{test:[/qqbrowser/i],describe(t){const e={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},n=it.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||it.getFirstMatch(Vn,t);return n&&(e.version=n),e}},{test:[/msie|trident/i],describe(t){const e={name:"Internet Explorer"},n=it.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/\sedg\//i],describe(t){const e={name:"Microsoft Edge"},n=it.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/edg([ea]|ios)/i],describe(t){const e={name:"Microsoft Edge"},n=it.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/vivaldi/i],describe(t){const e={name:"Vivaldi"},n=it.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/seamonkey/i],describe(t){const e={name:"SeaMonkey"},n=it.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sailfish/i],describe(t){const e={name:"Sailfish"},n=it.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return n&&(e.version=n),e}},{test:[/silk/i],describe(t){const e={name:"Amazon Silk"},n=it.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/phantom/i],describe(t){const e={name:"PhantomJS"},n=it.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/slimerjs/i],describe(t){const e={name:"SlimerJS"},n=it.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e={name:"BlackBerry"},n=it.getFirstMatch(Vn,t)||it.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(web|hpw)[o0]s/i],describe(t){const e={name:"WebOS Browser"},n=it.getFirstMatch(Vn,t)||it.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/bada/i],describe(t){const e={name:"Bada"},n=it.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/tizen/i],describe(t){const e={name:"Tizen"},n=it.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||it.getFirstMatch(Vn,t);return n&&(e.version=n),e}},{test:[/qupzilla/i],describe(t){const e={name:"QupZilla"},n=it.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||it.getFirstMatch(Vn,t);return n&&(e.version=n),e}},{test:[/firefox|iceweasel|fxios/i],describe(t){const e={name:"Firefox"},n=it.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/electron/i],describe(t){const e={name:"Electron"},n=it.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MiuiBrowser/i],describe(t){const e={name:"Miui"},n=it.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/chromium/i],describe(t){const e={name:"Chromium"},n=it.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||it.getFirstMatch(Vn,t);return n&&(e.version=n),e}},{test:[/chrome|crios|crmo/i],describe(t){const e={name:"Chrome"},n=it.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/GSA/i],describe(t){const e={name:"Google Search"},n=it.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){const e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe(t){const e={name:"Android Browser"},n=it.getFirstMatch(Vn,t);return n&&(e.version=n),e}},{test:[/playstation 4/i],describe(t){const e={name:"PlayStation 4"},n=it.getFirstMatch(Vn,t);return n&&(e.version=n),e}},{test:[/safari|applewebkit/i],describe(t){const e={name:"Safari"},n=it.getFirstMatch(Vn,t);return n&&(e.version=n),e}},{test:[/.*/i],describe(t){const e=/^(.*)\/(.*) /,n=/^(.*)\/(.*)[ \t]\((.*)/,s=t.search("\\(")!==-1?n:e;return{name:it.getFirstMatch(s,t),version:it.getSecondMatch(s,t)}}}],NSe=[{test:[/Roku\/DVP/],describe(t){const e=it.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:ti.Roku,version:e}}},{test:[/windows phone/i],describe(t){const e=it.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:ti.WindowsPhone,version:e}}},{test:[/windows /i],describe(t){const e=it.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),n=it.getWindowsVersionName(e);return{name:ti.Windows,version:e,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(t){const e={name:ti.iOS},n=it.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return n&&(e.version=n),e}},{test:[/macintosh/i],describe(t){const e=it.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),n=it.getMacOSVersionName(e),r={name:ti.MacOS,version:e};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe(t){const e=it.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:ti.iOS,version:e}}},{test(t){const e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe(t){const e=it.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),n=it.getAndroidVersionName(e),r={name:ti.Android,version:e};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe(t){const e=it.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),n={name:ti.WebOS};return e&&e.length&&(n.version=e),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e=it.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||it.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||it.getFirstMatch(/\bbb(\d+)/i,t);return{name:ti.BlackBerry,version:e}}},{test:[/bada/i],describe(t){const e=it.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:ti.Bada,version:e}}},{test:[/tizen/i],describe(t){const e=it.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:ti.Tizen,version:e}}},{test:[/linux/i],describe(){return{name:ti.Linux}}},{test:[/CrOS/],describe(){return{name:ti.ChromeOS}}},{test:[/PlayStation 4/],describe(t){const e=it.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:ti.PlayStation4,version:e}}}],PSe=[{test:[/googlebot/i],describe(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe(t){const e=it.getFirstMatch(/(can-l01)/i,t)&&"Nova",n={type:Sr.mobile,vendor:"Huawei"};return e&&(n.model=e),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:Sr.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:Sr.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:Sr.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:Sr.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:Sr.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:Sr.tablet}}},{test(t){const e=t.test(/ipod|iphone/i),n=t.test(/like (ipod|iphone)/i);return e&&!n},describe(t){const e=it.getFirstMatch(/(ipod|iphone)/i,t);return{type:Sr.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:Sr.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe(){return{type:Sr.mobile}}},{test(t){return t.getBrowserName(!0)==="blackberry"},describe(){return{type:Sr.mobile,vendor:"BlackBerry"}}},{test(t){return t.getBrowserName(!0)==="bada"},describe(){return{type:Sr.mobile}}},{test(t){return t.getBrowserName()==="windows phone"},describe(){return{type:Sr.mobile,vendor:"Microsoft"}}},{test(t){const e=Number(String(t.getOSVersion()).split(".")[0]);return t.getOSName(!0)==="android"&&e>=3},describe(){return{type:Sr.tablet}}},{test(t){return t.getOSName(!0)==="android"},describe(){return{type:Sr.mobile}}},{test(t){return t.getOSName(!0)==="macos"},describe(){return{type:Sr.desktop,vendor:"Apple"}}},{test(t){return t.getOSName(!0)==="windows"},describe(){return{type:Sr.desktop}}},{test(t){return t.getOSName(!0)==="linux"},describe(){return{type:Sr.desktop}}},{test(t){return t.getOSName(!0)==="playstation 4"},describe(){return{type:Sr.tv}}},{test(t){return t.getOSName(!0)==="roku"},describe(){return{type:Sr.tv}}}],ISe=[{test(t){return t.getBrowserName(!0)==="microsoft edge"},describe(t){if(/\sedg\//i.test(t))return{name:Lu.Blink};const n=it.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:Lu.EdgeHTML,version:n}}},{test:[/trident/i],describe(t){const e={name:Lu.Trident},n=it.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){return t.test(/presto/i)},describe(t){const e={name:Lu.Presto},n=it.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){const e=t.test(/gecko/i),n=t.test(/like gecko/i);return e&&!n},describe(t){const e={name:Lu.Gecko},n=it.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:Lu.Blink}}},{test:[/(apple)?webkit/i],describe(t){const e={name:Lu.WebKit},n=it.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}}];let mF=class{constructor(e,n=!1){if(e==null||e==="")throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},n!==!0&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=it.find(TSe,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=it.find(NSe,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:n}=this.getOS();return e?String(n).toLowerCase()||"":n||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:n}=this.getPlatform();return e?String(n).toLowerCase()||"":n||""}parsePlatform(){this.parsedResult.platform={};const e=it.find(PSe,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=it.find(ISe,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return it.assign({},this.parsedResult)}satisfies(e){const n={};let r=0;const s={};let i=0;if(Object.keys(e).forEach(a=>{const l=e[a];typeof l=="string"?(s[a]=l,i+=1):typeof l=="object"&&(n[a]=l,r+=1)}),r>0){const a=Object.keys(n),l=it.find(a,u=>this.isOS(u));if(l){const u=this.satisfies(n[l]);if(u!==void 0)return u}const c=it.find(a,u=>this.isPlatform(u));if(c){const u=this.satisfies(n[c]);if(u!==void 0)return u}}if(i>0){const a=Object.keys(s),l=it.find(a,c=>this.isBrowser(c,!0));if(l!==void 0)return this.compareVersion(s[l])}}isBrowser(e,n=!1){const r=this.getBrowserName().toLowerCase();let s=e.toLowerCase();const i=it.getBrowserTypeByAlias(s);return n&&i&&(s=i.toLowerCase()),s===r}compareVersion(e){let n=[0],r=e,s=!1;const i=this.getBrowserVersion();if(typeof i=="string")return e[0]===">"||e[0]==="<"?(r=e.substr(1),e[1]==="="?(s=!0,r=e.substr(2)):n=[],e[0]===">"?n.push(1):n.push(-1)):e[0]==="="?r=e.substr(1):e[0]==="~"&&(s=!0,r=e.substr(1)),n.indexOf(it.compareVersions(i,r,s))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,n=!1){return this.isBrowser(e,n)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some(n=>this.is(n))}};/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class KX{static getParser(e,n=!1){if(typeof e!="string")throw new Error("UserAgent should be a string");return new mF(e,n)}static parse(e){return new mF(e).getResult()}static get BROWSER_MAP(){return qX}static get ENGINE_MAP(){return Lu}static get OS_MAP(){return ti}static get PLATFORMS_MAP(){return Sr}}const RSe=({serviceId:t,clientVersion:e})=>async n=>{const r=typeof window<"u"&&window?.navigator?.userAgent?KX.parse(window.navigator.userAgent):void 0,s=[["aws-sdk-js",e],["ua","2.1"],[`os/${r?.os?.name||"other"}`,r?.os?.version],["lang/js"],["md/browser",`${r?.browser?.name??"unknown"}_${r?.browser?.version??"unknown"}`]];t&&s.push([`api/${t}`,e]);const i=await n?.userAgentAppId?.();return i&&s.push([`app/${i}`]),s};var YX=function(){function t(){this.checksum=4294967295}return t.prototype.update=function(e){var n,r;try{for(var s=Qge(e),i=s.next();!i.done;i=s.next()){var o=i.value;this.checksum=this.checksum>>>8^OSe[(this.checksum^o)&255]}}catch(a){n={error:a}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return this},t.prototype.digest=function(){return(this.checksum^4294967295)>>>0},t}(),LSe=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],OSe=hSe(LSe);class Xb{constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);const n=new Uint8Array(8);for(let r=7,s=Math.abs(Math.round(e));r>-1&&s>0;r--,s/=256)n[r]=s;return e<0&&gF(n),new Xb(n)}valueOf(){const e=this.bytes.slice(0),n=e[0]&128;return n&&gF(e),parseInt(Gi(e),16)*(n?-1:1)}toString(){return String(this.valueOf())}}function gF(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}class DSe{constructor(e,n){this.toUtf8=e,this.fromUtf8=n}format(e){const n=[];for(const i of Object.keys(e)){const o=this.fromUtf8(i);n.push(Uint8Array.from([o.byteLength]),o,this.formatHeaderValue(e[i]))}const r=new Uint8Array(n.reduce((i,o)=>i+o.byteLength,0));let s=0;for(const i of n)r.set(i,s),s+=i.byteLength;return r}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":const n=new DataView(new ArrayBuffer(3));return n.setUint8(0,3),n.setInt16(1,e.value,!1),new Uint8Array(n.buffer);case"integer":const r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,e.value,!1),new Uint8Array(r.buffer);case"long":const s=new Uint8Array(9);return s[0]=5,s.set(e.value.bytes,1),s;case"binary":const i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);const o=new Uint8Array(i.buffer);return o.set(e.value,3),o;case"string":const a=this.fromUtf8(e.value),l=new DataView(new ArrayBuffer(3+a.byteLength));l.setUint8(0,7),l.setUint16(1,a.byteLength,!1);const c=new Uint8Array(l.buffer);return c.set(a,3),c;case"timestamp":const u=new Uint8Array(9);return u[0]=8,u.set(Xb.fromNumber(e.value.valueOf()).bytes,1),u;case"uuid":if(!VSe.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);const d=new Uint8Array(17);return d[0]=9,d.set(pX(e.value.replace(/\-/g,"")),1),d}}parse(e){const n={};let r=0;for(;r<e.byteLength;){const s=e.getUint8(r++),i=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+r,s));switch(r+=s,e.getUint8(r++)){case 0:n[i]={type:yF,value:!0};break;case 1:n[i]={type:yF,value:!1};break;case 2:n[i]={type:MSe,value:e.getInt8(r++)};break;case 3:n[i]={type:jSe,value:e.getInt16(r,!1)},r+=2;break;case 4:n[i]={type:FSe,value:e.getInt32(r,!1)},r+=4;break;case 5:n[i]={type:BSe,value:new Xb(new Uint8Array(e.buffer,e.byteOffset+r,8))},r+=8;break;case 6:const o=e.getUint16(r,!1);r+=2,n[i]={type:USe,value:new Uint8Array(e.buffer,e.byteOffset+r,o)},r+=o;break;case 7:const a=e.getUint16(r,!1);r+=2,n[i]={type:$Se,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+r,a))},r+=a;break;case 8:n[i]={type:HSe,value:new Date(new Xb(new Uint8Array(e.buffer,e.byteOffset+r,8)).valueOf())},r+=8;break;case 9:const l=new Uint8Array(e.buffer,e.byteOffset+r,16);r+=16,n[i]={type:zSe,value:`${Gi(l.subarray(0,4))}-${Gi(l.subarray(4,6))}-${Gi(l.subarray(6,8))}-${Gi(l.subarray(8,10))}-${Gi(l.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return n}}var bF;(function(t){t[t.boolTrue=0]="boolTrue",t[t.boolFalse=1]="boolFalse",t[t.byte=2]="byte",t[t.short=3]="short",t[t.integer=4]="integer",t[t.long=5]="long",t[t.byteArray=6]="byteArray",t[t.string=7]="string",t[t.timestamp=8]="timestamp",t[t.uuid=9]="uuid"})(bF||(bF={}));const yF="boolean",MSe="byte",jSe="short",FSe="integer",BSe="long",USe="binary",$Se="string",HSe="timestamp",zSe="uuid",VSe=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,XX=4,Ou=XX*2,fh=4,WSe=Ou+fh*2;function GSe({byteLength:t,byteOffset:e,buffer:n}){if(t<WSe)throw new Error("Provided message too short to accommodate event stream message overhead");const r=new DataView(n,e,t),s=r.getUint32(0,!1);if(t!==s)throw new Error("Reported message length does not match received message length");const i=r.getUint32(XX,!1),o=r.getUint32(Ou,!1),a=r.getUint32(t-fh,!1),l=new YX().update(new Uint8Array(n,e,Ou));if(o!==l.digest())throw new Error(`The prelude checksum specified in the message (${o}) does not match the calculated CRC32 checksum (${l.digest()})`);if(l.update(new Uint8Array(n,e+Ou,t-(Ou+fh))),a!==l.digest())throw new Error(`The message checksum (${l.digest()}) did not match the expected value of ${a}`);return{headers:new DataView(n,e+Ou+fh,i),body:new Uint8Array(n,e+Ou+fh+i,s-i-(Ou+fh+fh))}}class qSe{constructor(e,n){this.headerMarshaller=new DSe(e,n),this.messageBuffer=[],this.isEndOfStream=!1}feed(e){this.messageBuffer.push(this.decode(e))}endOfStream(){this.isEndOfStream=!0}getMessage(){const e=this.messageBuffer.pop(),n=this.isEndOfStream;return{getMessage(){return e},isEndOfStream(){return n}}}getAvailableMessages(){const e=this.messageBuffer;this.messageBuffer=[];const n=this.isEndOfStream;return{getMessages(){return e},isEndOfStream(){return n}}}encode({headers:e,body:n}){const r=this.headerMarshaller.format(e),s=r.byteLength+n.byteLength+16,i=new Uint8Array(s),o=new DataView(i.buffer,i.byteOffset,i.byteLength),a=new YX;return o.setUint32(0,s,!1),o.setUint32(4,r.byteLength,!1),o.setUint32(8,a.update(i.subarray(0,8)).digest(),!1),i.set(r,12),i.set(n,r.byteLength+12),o.setUint32(s-4,a.update(i.subarray(8,s-4)).digest(),!1),i}decode(e){const{headers:n,body:r}=GSe(e);return{headers:this.headerMarshaller.parse(n),body:r}}formatHeaders(e){return this.headerMarshaller.format(e)}}class KSe{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.inputStream)yield this.options.decoder.decode(e)}}class YSe{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.messageStream)yield this.options.encoder.encode(e);this.options.includeEndFrame&&(yield new Uint8Array(0))}}class XSe{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.messageStream){const n=await this.options.deserializer(e);n!==void 0&&(yield n)}}}class JSe{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.inputStream)yield this.options.serializer(e)}}function ZSe(t){let e=0,n=0,r=null,s=null;const i=a=>{if(typeof a!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+a);e=a,n=4,r=new Uint8Array(a),new DataView(r.buffer).setUint32(0,a,!1)},o=async function*(){const a=t[Symbol.asyncIterator]();for(;;){const{value:l,done:c}=await a.next();if(c){if(e)if(e===n)yield r;else throw new Error("Truncated event message received.");else return;return}const u=l.length;let d=0;for(;d<u;){if(!r){const f=u-d;s||(s=new Uint8Array(4));const g=Math.min(4-n,f);if(s.set(l.slice(d,d+g),n),n+=g,d+=g,n<4)break;i(new DataView(s.buffer).getUint32(0,!1)),s=null}const h=Math.min(e-n,u-d);r.set(l.slice(d,d+h),n),n+=h,d+=h,e&&e===n&&(yield r,r=null,e=0,n=0)}}};return{[Symbol.asyncIterator]:o}}function QSe(t,e){return async function(n){const{value:r}=n.headers[":message-type"];if(r==="error"){const s=new Error(n.headers[":error-message"].value||"UnknownError");throw s.name=n.headers[":error-code"].value,s}else if(r==="exception"){const s=n.headers[":exception-type"].value,i={[s]:n},o=await t(i);if(o.$unknown){const a=new Error(e(n.body));throw a.name=s,a}throw o[s]}else if(r==="event"){const s={[n.headers[":event-type"].value]:n},i=await t(s);return i.$unknown?void 0:i}else throw Error(`Unrecognizable event type: ${n.headers[":event-type"].value}`)}}let eke=class{constructor({utf8Encoder:e,utf8Decoder:n}){this.eventStreamCodec=new qSe(e,n),this.utfEncoder=e}deserialize(e,n){const r=ZSe(e);return new XSe({messageStream:new KSe({inputStream:r,decoder:this.eventStreamCodec}),deserializer:QSe(n,this.utfEncoder)})}serialize(e,n){return new YSe({messageStream:new JSe({inputStream:e,serializer:n}),encoder:this.eventStreamCodec,includeEndFrame:!0})}};const tke=t=>({[Symbol.asyncIterator]:async function*(){const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)return;yield r}}finally{e.releaseLock()}}}),nke=t=>{const e=t[Symbol.asyncIterator]();return new ReadableStream({async pull(n){const{done:r,value:s}=await e.next();if(r)return n.close();n.enqueue(s)}})};class rke{constructor({utf8Encoder:e,utf8Decoder:n}){this.universalMarshaller=new eke({utf8Decoder:n,utf8Encoder:e})}deserialize(e,n){const r=ske(e)?tke(e):e;return this.universalMarshaller.deserialize(r,n)}serialize(e,n){const r=this.universalMarshaller.serialize(e,n);return typeof ReadableStream=="function"?nke(r):r}}const ske=t=>typeof ReadableStream=="function"&&t instanceof ReadableStream,ike=t=>new rke(t),oke=t=>()=>Promise.reject(t),vF=typeof TextEncoder=="function"?new TextEncoder:null,ake=t=>{if(typeof t=="string"){if(vF)return vF.encode(t).byteLength;let e=t.length;for(let n=e-1;n>=0;n--){const r=t.charCodeAt(n);r>127&&r<=2047?e++:r>2047&&r<=65535&&(e+=2),r>=56320&&r<=57343&&n--}return e}else{if(typeof t.byteLength=="number")return t.byteLength;if(typeof t.size=="number")return t.size}throw new Error(`Body Length computation failed for ${t}`)},JX="required",xl="fn",wl="argv",Lg="ref",_F=!0,xF="isSet",s1="booleanEquals",Ip="error",D0="endpoint",Zs="tree",xL="PartitionResult",wF={[JX]:!1,type:"String"},EF={[JX]:!0,default:!1,type:"Boolean"},SF={[Lg]:"Endpoint"},ZX={[xl]:s1,[wl]:[{[Lg]:"UseFIPS"},!0]},QX={[xl]:s1,[wl]:[{[Lg]:"UseDualStack"},!0]},Ja={},kF={[xl]:"getAttr",[wl]:[{[Lg]:xL},"supportsFIPS"]},CF={[xl]:s1,[wl]:[!0,{[xl]:"getAttr",[wl]:[{[Lg]:xL},"supportsDualStack"]}]},AF=[ZX],TF=[QX],NF=[{[Lg]:"Region"}],lke={parameters:{Region:wF,UseDualStack:EF,UseFIPS:EF,Endpoint:wF},rules:[{conditions:[{[xl]:xF,[wl]:[SF]}],rules:[{conditions:AF,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Ip},{rules:[{conditions:TF,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Ip},{endpoint:{url:SF,properties:Ja,headers:Ja},type:D0}],type:Zs}],type:Zs},{rules:[{conditions:[{[xl]:xF,[wl]:NF}],rules:[{conditions:[{[xl]:"aws.partition",[wl]:NF,assign:xL}],rules:[{conditions:[ZX,QX],rules:[{conditions:[{[xl]:s1,[wl]:[_F,kF]},CF],rules:[{rules:[{endpoint:{url:"https://bedrock-runtime-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ja,headers:Ja},type:D0}],type:Zs}],type:Zs},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Ip}],type:Zs},{conditions:AF,rules:[{conditions:[{[xl]:s1,[wl]:[kF,_F]}],rules:[{rules:[{endpoint:{url:"https://bedrock-runtime-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Ja,headers:Ja},type:D0}],type:Zs}],type:Zs},{error:"FIPS is enabled but this partition does not support FIPS",type:Ip}],type:Zs},{conditions:TF,rules:[{conditions:[CF],rules:[{rules:[{endpoint:{url:"https://bedrock-runtime.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ja,headers:Ja},type:D0}],type:Zs}],type:Zs},{error:"DualStack is enabled but this partition does not support DualStack",type:Ip}],type:Zs},{rules:[{endpoint:{url:"https://bedrock-runtime.{Region}.{PartitionResult#dnsSuffix}",properties:Ja,headers:Ja},type:D0}],type:Zs}],type:Zs}],type:Zs},{error:"Invalid Configuration: Missing Region",type:Ip}],type:Zs}]},cke=lke,uke=new Ewe({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),dke=(t,e={})=>uke.get(t,()=>Hwe(cke,{endpointParams:t,logger:e.logger}));xE.aws=kX;const hke=t=>({apiVersion:"2023-09-30",base64Decoder:t?.base64Decoder??fL,base64Encoder:t?.base64Encoder??hX,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??dke,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??iSe,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new Zwe}],logger:t?.logger??new FX,serviceId:t?.serviceId??"Bedrock Runtime",urlParser:t?.urlParser??EE,utf8Decoder:t?.utf8Decoder??Qm,utf8Encoder:t?.utf8Encoder??dX}),fke=["in-region","cross-region","mobile","standard","legacy"],pke=({defaultsMode:t}={})=>Qwe(async()=>{const e=typeof t=="function"?await t():t;switch(e?.toLowerCase()){case"auto":return Promise.resolve(mke()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(e?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${fke.join(", ")}, got ${e}`)}}),mke=()=>{const e=(typeof window<"u"&&window?.navigator?.userAgent?KX.parse(window.navigator.userAgent):void 0)?.platform?.type;return e==="tablet"||e==="mobile"},gke=t=>{const e=pke(t),n=()=>e().then(F2e),r=hke(t);return{...r,...t,runtime:"browser",defaultsMode:e,bodyLengthChecker:t?.bodyLengthChecker??ake,credentialDefaultProvider:t?.credentialDefaultProvider??(s=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:t?.defaultUserAgentProvider??RSe({serviceId:r.serviceId,clientVersion:cSe.version}),eventStreamSerdeProvider:t?.eventStreamSerdeProvider??ike,maxAttempts:t?.maxAttempts??SE,region:t?.region??oke("Region is missing"),requestHandler:pL.create(t?.requestHandler??n),retryMode:t?.retryMode??(async()=>(await n()).retryMode||AEe),sha256:t?.sha256??CSe,streamCollector:t?.streamCollector??lwe,useDualstackEndpoint:t?.useDualstackEndpoint??(()=>Promise.resolve(aEe)),useFipsEndpoint:t?.useFipsEndpoint??(()=>Promise.resolve(lEe))}},bke=t=>{let e=async()=>{if(t.region===void 0)throw new Error("Region is missing from runtimeConfig");const n=t.region;return typeof n=="string"?n:n()};return{setRegion(n){e=n},region(){return e}}},yke=t=>({region:t.region()}),vke=t=>{const e=t.httpAuthSchemes;let n=t.httpAuthSchemeProvider,r=t.credentials;return{setHttpAuthScheme(s){const i=e.findIndex(o=>o.schemeId===s.schemeId);i===-1?e.push(s):e.splice(i,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){n=s},httpAuthSchemeProvider(){return n},setCredentials(s){r=s},credentials(){return r}}},_ke=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()}),xx=t=>t,xke=(t,e)=>{const n={...xx(bke(t)),...xx(z2e(t)),...xx(Pxe(t)),...xx(vke(t))};return e.forEach(r=>r.configure(n)),{...t,...yke(n),...V2e(n),...Ixe(n),..._ke(n)}};class wke extends C2e{config;constructor(...[e]){const n=gke(e||{}),r=aSe(n),s=wwe(r),i=KEe(s),o=cEe(i),a=o,l=CEe(a),c=uEe(l),u=oSe(c),d=xke(u,e?.extensions||[]);super(d),this.config=d,this.middlewareStack.use(oEe(this.config)),this.middlewareStack.use(tSe(this.config)),this.middlewareStack.use(fEe(this.config)),this.middlewareStack.use(Dxe(this.config)),this.middlewareStack.use(Fxe(this.config)),this.middlewareStack.use(zxe(this.config)),this.middlewareStack.use(qxe(this.config,{httpAuthSchemeParametersProvider:rSe,identityProviderConfigProvider:async h=>new mwe({"aws.auth#sigv4":h.credentials})})),this.middlewareStack.use(twe(this.config))}destroy(){super.destroy()}}class hi extends im{constructor(e){super(e),Object.setPrototypeOf(this,hi.prototype)}}class wL extends hi{name="AccessDeniedException";$fault="client";constructor(e){super({name:"AccessDeniedException",$fault:"client",...e}),Object.setPrototypeOf(this,wL.prototype)}}var PF;(function(t){t.visit=(e,n)=>e.s3OutputDataConfig!==void 0?n.s3OutputDataConfig(e.s3OutputDataConfig):n._(e.$unknown[0],e.$unknown[1])})(PF||(PF={}));class EL extends hi{name="InternalServerException";$fault="server";constructor(e){super({name:"InternalServerException",$fault:"server",...e}),Object.setPrototypeOf(this,EL.prototype)}}class SL extends hi{name="ThrottlingException";$fault="client";constructor(e){super({name:"ThrottlingException",$fault:"client",...e}),Object.setPrototypeOf(this,SL.prototype)}}class kL extends hi{name="ValidationException";$fault="client";constructor(e){super({name:"ValidationException",$fault:"client",...e}),Object.setPrototypeOf(this,kL.prototype)}}class CL extends hi{name="ConflictException";$fault="client";constructor(e){super({name:"ConflictException",$fault:"client",...e}),Object.setPrototypeOf(this,CL.prototype)}}class AL extends hi{name="ResourceNotFoundException";$fault="client";constructor(e){super({name:"ResourceNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,AL.prototype)}}class TL extends hi{name="ServiceQuotaExceededException";$fault="client";constructor(e){super({name:"ServiceQuotaExceededException",$fault:"client",...e}),Object.setPrototypeOf(this,TL.prototype)}}class NL extends hi{name="ServiceUnavailableException";$fault="server";constructor(e){super({name:"ServiceUnavailableException",$fault:"server",...e}),Object.setPrototypeOf(this,NL.prototype)}}var IF;(function(t){t.visit=(e,n)=>e.bytes!==void 0?n.bytes(e.bytes):n._(e.$unknown[0],e.$unknown[1])})(IF||(IF={}));var RF;(function(t){t.visit=(e,n)=>e.text!==void 0?n.text(e.text):e.image!==void 0?n.image(e.image):n._(e.$unknown[0],e.$unknown[1])})(RF||(RF={}));var nP;(function(t){t.visit=(e,n)=>e.bytes!==void 0?n.bytes(e.bytes):n._(e.$unknown[0],e.$unknown[1])})(nP||(nP={}));var rP;(function(t){t.visit=(e,n)=>e.bytes!==void 0?n.bytes(e.bytes):n._(e.$unknown[0],e.$unknown[1])})(rP||(rP={}));var sP;(function(t){t.visit=(e,n)=>e.text!==void 0?n.text(e.text):e.image!==void 0?n.image(e.image):n._(e.$unknown[0],e.$unknown[1])})(sP||(sP={}));var iP;(function(t){t.visit=(e,n)=>e.bytes!==void 0?n.bytes(e.bytes):n._(e.$unknown[0],e.$unknown[1])})(iP||(iP={}));var oP;(function(t){t.visit=(e,n)=>e.bytes!==void 0?n.bytes(e.bytes):e.s3Location!==void 0?n.s3Location(e.s3Location):n._(e.$unknown[0],e.$unknown[1])})(oP||(oP={}));var aP;(function(t){t.visit=(e,n)=>e.json!==void 0?n.json(e.json):e.text!==void 0?n.text(e.text):e.image!==void 0?n.image(e.image):e.document!==void 0?n.document(e.document):e.video!==void 0?n.video(e.video):n._(e.$unknown[0],e.$unknown[1])})(aP||(aP={}));var lP;(function(t){t.visit=(e,n)=>e.text!==void 0?n.text(e.text):e.image!==void 0?n.image(e.image):e.document!==void 0?n.document(e.document):e.video!==void 0?n.video(e.video):e.toolUse!==void 0?n.toolUse(e.toolUse):e.toolResult!==void 0?n.toolResult(e.toolResult):e.guardContent!==void 0?n.guardContent(e.guardContent):n._(e.$unknown[0],e.$unknown[1])})(lP||(lP={}));var LF;(function(t){t.visit=(e,n)=>e.text!==void 0?n.text(e.text):n._(e.$unknown[0],e.$unknown[1])})(LF||(LF={}));var cP;(function(t){t.visit=(e,n)=>e.text!==void 0?n.text(e.text):e.guardContent!==void 0?n.guardContent(e.guardContent):n._(e.$unknown[0],e.$unknown[1])})(cP||(cP={}));var OF;(function(t){t.visit=(e,n)=>e.auto!==void 0?n.auto(e.auto):e.any!==void 0?n.any(e.any):e.tool!==void 0?n.tool(e.tool):n._(e.$unknown[0],e.$unknown[1])})(OF||(OF={}));var uP;(function(t){t.visit=(e,n)=>e.json!==void 0?n.json(e.json):n._(e.$unknown[0],e.$unknown[1])})(uP||(uP={}));var dP;(function(t){t.visit=(e,n)=>e.toolSpec!==void 0?n.toolSpec(e.toolSpec):n._(e.$unknown[0],e.$unknown[1])})(dP||(dP={}));var DF;(function(t){t.visit=(e,n)=>e.message!==void 0?n.message(e.message):n._(e.$unknown[0],e.$unknown[1])})(DF||(DF={}));class PL extends hi{name="ModelErrorException";$fault="client";originalStatusCode;resourceName;constructor(e){super({name:"ModelErrorException",$fault:"client",...e}),Object.setPrototypeOf(this,PL.prototype),this.originalStatusCode=e.originalStatusCode,this.resourceName=e.resourceName}}class IL extends hi{name="ModelNotReadyException";$fault="client";$retryable={};constructor(e){super({name:"ModelNotReadyException",$fault:"client",...e}),Object.setPrototypeOf(this,IL.prototype)}}class RL extends hi{name="ModelTimeoutException";$fault="client";constructor(e){super({name:"ModelTimeoutException",$fault:"client",...e}),Object.setPrototypeOf(this,RL.prototype)}}var MF;(function(t){t.visit=(e,n)=>e.text!==void 0?n.text(e.text):e.toolUse!==void 0?n.toolUse(e.toolUse):n._(e.$unknown[0],e.$unknown[1])})(MF||(MF={}));var jF;(function(t){t.visit=(e,n)=>e.toolUse!==void 0?n.toolUse(e.toolUse):n._(e.$unknown[0],e.$unknown[1])})(jF||(jF={}));class LL extends hi{name="ModelStreamErrorException";$fault="client";originalStatusCode;originalMessage;constructor(e){super({name:"ModelStreamErrorException",$fault:"client",...e}),Object.setPrototypeOf(this,LL.prototype),this.originalStatusCode=e.originalStatusCode,this.originalMessage=e.originalMessage}}var FF;(function(t){t.visit=(e,n)=>e.messageStart!==void 0?n.messageStart(e.messageStart):e.contentBlockStart!==void 0?n.contentBlockStart(e.contentBlockStart):e.contentBlockDelta!==void 0?n.contentBlockDelta(e.contentBlockDelta):e.contentBlockStop!==void 0?n.contentBlockStop(e.contentBlockStop):e.messageStop!==void 0?n.messageStop(e.messageStop):e.metadata!==void 0?n.metadata(e.metadata):e.internalServerException!==void 0?n.internalServerException(e.internalServerException):e.modelStreamErrorException!==void 0?n.modelStreamErrorException(e.modelStreamErrorException):e.validationException!==void 0?n.validationException(e.validationException):e.throttlingException!==void 0?n.throttlingException(e.throttlingException):e.serviceUnavailableException!==void 0?n.serviceUnavailableException(e.serviceUnavailableException):n._(e.$unknown[0],e.$unknown[1])})(FF||(FF={}));var BF;(function(t){t.visit=(e,n)=>e.chunk!==void 0?n.chunk(e.chunk):e.internalServerException!==void 0?n.internalServerException(e.internalServerException):e.modelStreamErrorException!==void 0?n.modelStreamErrorException(e.modelStreamErrorException):e.validationException!==void 0?n.validationException(e.validationException):e.throttlingException!==void 0?n.throttlingException(e.throttlingException):e.modelTimeoutException!==void 0?n.modelTimeoutException(e.modelTimeoutException):e.serviceUnavailableException!==void 0?n.serviceUnavailableException(e.serviceUnavailableException):n._(e.$unknown[0],e.$unknown[1])})(BF||(BF={}));const eJ=t=>{if(t.text!==void 0)return{text:t.text};if(t.image!==void 0)return{image:gf};if(t.$unknown!==void 0)return{[t.$unknown[0]]:"UNKNOWN"}},Eke=t=>{if(t.text!==void 0)return{text:t.text};if(t.image!==void 0)return{image:t.image};if(t.document!==void 0)return{document:t.document};if(t.video!==void 0)return{video:t.video};if(t.toolUse!==void 0)return{toolUse:t.toolUse};if(t.toolResult!==void 0)return{toolResult:t.toolResult};if(t.guardContent!==void 0)return{guardContent:eJ(t.guardContent)};if(t.$unknown!==void 0)return{[t.$unknown[0]]:"UNKNOWN"}},OL=t=>({...t,...t.content&&{content:t.content.map(e=>Eke(e))}}),tJ=t=>{if(t.text!==void 0)return{text:t.text};if(t.guardContent!==void 0)return{guardContent:eJ(t.guardContent)};if(t.$unknown!==void 0)return{[t.$unknown[0]]:"UNKNOWN"}},Ske=t=>({...t,...t.messages&&{messages:t.messages.map(e=>OL(e))},...t.system&&{system:t.system.map(e=>tJ(e))},...t.toolConfig&&{toolConfig:t.toolConfig},...t.promptVariables&&{promptVariables:gf},...t.requestMetadata&&{requestMetadata:gf}}),kke=t=>{if(t.message!==void 0)return{message:OL(t.message)};if(t.$unknown!==void 0)return{[t.$unknown[0]]:"UNKNOWN"}},Cke=t=>({...t,...t.output&&{output:kke(t.output)}}),Ake=t=>({...t,...t.messages&&{messages:t.messages.map(e=>OL(e))},...t.system&&{system:t.system.map(e=>tJ(e))},...t.toolConfig&&{toolConfig:t.toolConfig},...t.promptVariables&&{promptVariables:gf},...t.requestMetadata&&{requestMetadata:gf}}),Tke=t=>({...t,...t.stream&&{stream:"STREAMING_CONTENT"}}),Nke=t=>({...t,...t.body&&{body:gf}}),Pke=t=>({...t,...t.body&&{body:gf}}),Ike=async(t,e)=>{const n=mL(t,e),r={"content-type":"application/json"};n.bp("/model/{modelId}/converse"),n.p("modelId",()=>t.modelId,"{modelId}",!1);let s;return s=JSON.stringify(tn(t,{additionalModelRequestFields:i=>Ev(i),additionalModelResponseFieldPaths:i=>ln(i),guardrailConfig:i=>ln(i),inferenceConfig:i=>uJ(i),messages:i=>dJ(i,e),performanceConfig:i=>ln(i),promptVariables:i=>ln(i),requestMetadata:i=>ln(i),system:i=>hJ(i,e),toolConfig:i=>fJ(i)})),n.m("POST").h(r).b(s),n.build()},Rke=async(t,e)=>{const n=mL(t,e),r={"content-type":"application/json"};n.bp("/model/{modelId}/converse-stream"),n.p("modelId",()=>t.modelId,"{modelId}",!1);let s;return s=JSON.stringify(tn(t,{additionalModelRequestFields:i=>Ev(i),additionalModelResponseFieldPaths:i=>ln(i),guardrailConfig:i=>ln(i),inferenceConfig:i=>uJ(i),messages:i=>dJ(i,e),performanceConfig:i=>ln(i),promptVariables:i=>ln(i),requestMetadata:i=>ln(i),system:i=>hJ(i,e),toolConfig:i=>fJ(i)})),n.m("POST").h(r).b(s),n.build()},Lke=async(t,e)=>{const n=mL(t,e),r=ks({},W2e,{[xJ]:t[_J]||"application/octet-stream",[UF]:t[UF],[YCe]:t[GCe],[qCe]:t[VCe],[KCe]:t[WCe],[EJ]:t[wJ]});n.bp("/model/{modelId}/invoke"),n.p("modelId",()=>t.modelId,"{modelId}",!1);let s;return t.body!==void 0&&(s=t.body),n.m("POST").h(r).b(s),n.build()},Oke=async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return DL(t,e);const n=ks({$metadata:fi(t)}),r=R2e(DX(await co(t.body,e)),"body"),s=tn(r,{additionalModelResponseFields:i=>Ak(i),metrics:ln,output:i=>wCe(Dd(i),e),performanceConfig:ln,stopReason:Pn,trace:i=>kCe(i),usage:ln});return Object.assign(n,s),n},Dke=async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return DL(t,e);const n=ks({$metadata:fi(t)}),r=t.body;return n.stream=Wke(r,e),n},Mke=async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return DL(t,e);const n=ks({$metadata:fi(t),[_J]:[,t.headers[xJ]],[wJ]:[,t.headers[EJ]]}),r=await mX(t.body,e);return n.body=r,n},DL=async(t,e)=>{const n={...t,body:await X2e(t.body,e)},r=J2e(t,n.body);switch(r){case"AccessDeniedException":case"com.amazonaws.bedrockruntime#AccessDeniedException":throw await Fke(n);case"InternalServerException":case"com.amazonaws.bedrockruntime#InternalServerException":throw await nJ(n);case"ResourceNotFoundException":case"com.amazonaws.bedrockruntime#ResourceNotFoundException":throw await zke(n);case"ServiceQuotaExceededException":case"com.amazonaws.bedrockruntime#ServiceQuotaExceededException":throw await Vke(n);case"ThrottlingException":case"com.amazonaws.bedrockruntime#ThrottlingException":throw await iJ(n);case"ValidationException":case"com.amazonaws.bedrockruntime#ValidationException":throw await oJ(n);case"ModelErrorException":case"com.amazonaws.bedrockruntime#ModelErrorException":throw await Uke(n);case"ModelNotReadyException":case"com.amazonaws.bedrockruntime#ModelNotReadyException":throw await $ke(n);case"ModelTimeoutException":case"com.amazonaws.bedrockruntime#ModelTimeoutException":throw await Hke(n);case"ServiceUnavailableException":case"com.amazonaws.bedrockruntime#ServiceUnavailableException":throw await sJ(n);case"ModelStreamErrorException":case"com.amazonaws.bedrockruntime#ModelStreamErrorException":throw await rJ(n);case"ConflictException":case"com.amazonaws.bedrockruntime#ConflictException":throw await Bke(n);default:const s=n.body;return jke({output:t,parsedBody:s,errorCode:r})}},jke=M2e(hi),Fke=async(t,e)=>{const n=ks({}),r=t.body,s=tn(r,{message:Pn});Object.assign(n,s);const i=new wL({$metadata:fi(t),...n});return lo(i,t.body)},Bke=async(t,e)=>{const n=ks({}),r=t.body,s=tn(r,{message:Pn});Object.assign(n,s);const i=new CL({$metadata:fi(t),...n});return lo(i,t.body)},nJ=async(t,e)=>{const n=ks({}),r=t.body,s=tn(r,{message:Pn});Object.assign(n,s);const i=new EL({$metadata:fi(t),...n});return lo(i,t.body)},Uke=async(t,e)=>{const n=ks({}),r=t.body,s=tn(r,{message:Pn,originalStatusCode:OX,resourceName:Pn});Object.assign(n,s);const i=new PL({$metadata:fi(t),...n});return lo(i,t.body)},$ke=async(t,e)=>{const n=ks({}),r=t.body,s=tn(r,{message:Pn});Object.assign(n,s);const i=new IL({$metadata:fi(t),...n});return lo(i,t.body)},rJ=async(t,e)=>{const n=ks({}),r=t.body,s=tn(r,{message:Pn,originalMessage:Pn,originalStatusCode:OX});Object.assign(n,s);const i=new LL({$metadata:fi(t),...n});return lo(i,t.body)},Hke=async(t,e)=>{const n=ks({}),r=t.body,s=tn(r,{message:Pn});Object.assign(n,s);const i=new RL({$metadata:fi(t),...n});return lo(i,t.body)},zke=async(t,e)=>{const n=ks({}),r=t.body,s=tn(r,{message:Pn});Object.assign(n,s);const i=new AL({$metadata:fi(t),...n});return lo(i,t.body)},Vke=async(t,e)=>{const n=ks({}),r=t.body,s=tn(r,{message:Pn});Object.assign(n,s);const i=new TL({$metadata:fi(t),...n});return lo(i,t.body)},sJ=async(t,e)=>{const n=ks({}),r=t.body,s=tn(r,{message:Pn});Object.assign(n,s);const i=new NL({$metadata:fi(t),...n});return lo(i,t.body)},iJ=async(t,e)=>{const n=ks({}),r=t.body,s=tn(r,{message:Pn});Object.assign(n,s);const i=new SL({$metadata:fi(t),...n});return lo(i,t.body)},oJ=async(t,e)=>{const n=ks({}),r=t.body,s=tn(r,{message:Pn});Object.assign(n,s);const i=new kL({$metadata:fi(t),...n});return lo(i,t.body)},Wke=(t,e)=>e.eventStreamMarshaller.deserialize(t,async n=>n.messageStart!=null?{messageStart:await Jke(n.messageStart,e)}:n.contentBlockStart!=null?{contentBlockStart:await qke(n.contentBlockStart,e)}:n.contentBlockDelta!=null?{contentBlockDelta:await Gke(n.contentBlockDelta,e)}:n.contentBlockStop!=null?{contentBlockStop:await Kke(n.contentBlockStop,e)}:n.messageStop!=null?{messageStop:await Zke(n.messageStop,e)}:n.metadata!=null?{metadata:await Yke(n.metadata,e)}:n.internalServerException!=null?{internalServerException:await Xke(n.internalServerException,e)}:n.modelStreamErrorException!=null?{modelStreamErrorException:await Qke(n.modelStreamErrorException,e)}:n.validationException!=null?{validationException:await nCe(n.validationException,e)}:n.throttlingException!=null?{throttlingException:await tCe(n.throttlingException,e)}:n.serviceUnavailableException!=null?{serviceUnavailableException:await eCe(n.serviceUnavailableException,e)}:{$unknown:t}),Gke=async(t,e)=>{const n={},r=await co(t.body,e);return Object.assign(n,ln(r)),n},qke=async(t,e)=>{const n={},r=await co(t.body,e);return Object.assign(n,ln(r)),n},Kke=async(t,e)=>{const n={},r=await co(t.body,e);return Object.assign(n,ln(r)),n},Yke=async(t,e)=>{const n={},r=await co(t.body,e);return Object.assign(n,ECe(r)),n},Xke=async(t,e)=>{const n={...t,body:await co(t.body,e)};return nJ(n)},Jke=async(t,e)=>{const n={},r=await co(t.body,e);return Object.assign(n,ln(r)),n},Zke=async(t,e)=>{const n={},r=await co(t.body,e);return Object.assign(n,FCe(r)),n},Qke=async(t,e)=>{const n={...t,body:await co(t.body,e)};return rJ(n)},eCe=async(t,e)=>{const n={...t,body:await co(t.body,e)};return sJ(n)},tCe=async(t,e)=>{const n={...t,body:await co(t.body,e)};return iJ(n)},nCe=async(t,e)=>{const n={...t,body:await co(t.body,e)};return oJ(n)},rCe=(t,e)=>lP.visit(t,{document:n=>({document:aJ(n,e)}),guardContent:n=>({guardContent:lJ(n,e)}),image:n=>({image:cJ(n,e)}),text:n=>({text:n}),toolResult:n=>({toolResult:fCe(n,e)}),toolUse:n=>({toolUse:yCe(n)}),video:n=>({video:pJ(n,e)}),_:(n,r)=>({name:r})}),sCe=(t,e)=>t.filter(n=>n!=null).map(n=>rCe(n,e)),aJ=(t,e)=>tn(t,{format:[],name:[],source:n=>iCe(n,e)}),iCe=(t,e)=>nP.visit(t,{bytes:n=>({bytes:e.base64Encoder(n)}),_:(n,r)=>({name:r})}),lJ=(t,e)=>sP.visit(t,{image:n=>({image:oCe(n,e)}),text:n=>({text:ln(n)}),_:(n,r)=>({name:r})}),oCe=(t,e)=>tn(t,{format:[],source:n=>aCe(n,e)}),aCe=(t,e)=>rP.visit(t,{bytes:n=>({bytes:e.base64Encoder(n)}),_:(n,r)=>({name:r})}),cJ=(t,e)=>tn(t,{format:[],source:n=>lCe(n,e)}),lCe=(t,e)=>iP.visit(t,{bytes:n=>({bytes:e.base64Encoder(n)}),_:(n,r)=>({name:r})}),uJ=(t,e)=>tn(t,{maxTokens:[],stopSequences:ln,temperature:sF,topP:sF}),cCe=(t,e)=>tn(t,{content:n=>sCe(n,e),role:[]}),dJ=(t,e)=>t.filter(n=>n!=null).map(n=>cCe(n,e)),uCe=(t,e)=>cP.visit(t,{guardContent:n=>({guardContent:lJ(n,e)}),text:n=>({text:n}),_:(n,r)=>({name:r})}),hJ=(t,e)=>t.filter(n=>n!=null).map(n=>uCe(n,e)),dCe=(t,e)=>dP.visit(t,{toolSpec:n=>({toolSpec:bCe(n)}),_:(n,r)=>({name:r})}),fJ=(t,e)=>tn(t,{toolChoice:ln,tools:n=>gCe(n)}),hCe=(t,e)=>uP.visit(t,{json:n=>({json:Ev(n)}),_:(n,r)=>({name:r})}),fCe=(t,e)=>tn(t,{content:n=>mCe(n,e),status:[],toolUseId:[]}),pCe=(t,e)=>aP.visit(t,{document:n=>({document:aJ(n,e)}),image:n=>({image:cJ(n,e)}),json:n=>({json:Ev(n)}),text:n=>({text:n}),video:n=>({video:pJ(n,e)}),_:(n,r)=>({name:r})}),mCe=(t,e)=>t.filter(n=>n!=null).map(n=>pCe(n,e)),gCe=(t,e)=>t.filter(n=>n!=null).map(n=>dCe(n)),bCe=(t,e)=>tn(t,{description:[],inputSchema:n=>hCe(n),name:[]}),yCe=(t,e)=>tn(t,{input:n=>Ev(n),name:[],toolUseId:[]}),pJ=(t,e)=>tn(t,{format:[],source:n=>vCe(n,e)}),vCe=(t,e)=>oP.visit(t,{bytes:n=>({bytes:e.base64Encoder(n)}),s3Location:n=>({s3Location:ln(n)}),_:(n,r)=>({name:r})}),Ev=(t,e)=>t,_Ce=(t,e)=>t.document!=null?{document:mJ(t.document,e)}:t.guardContent!=null?{guardContent:LCe(Dd(t.guardContent),e)}:t.image!=null?{image:yJ(t.image,e)}:Pn(t.text)!==void 0?{text:Pn(t.text)}:t.toolResult!=null?{toolResult:BCe(t.toolResult,e)}:t.toolUse!=null?{toolUse:HCe(t.toolUse)}:t.video!=null?{video:vJ(t.video,e)}:{$unknown:Object.entries(t)[0]},xCe=(t,e)=>(t||[]).filter(r=>r!=null).map(r=>_Ce(Dd(r),e)),wCe=(t,e)=>t.message!=null?{message:jCe(t.message,e)}:{$unknown:Object.entries(t)[0]},ECe=(t,e)=>tn(t,{metrics:ln,performanceConfig:ln,trace:n=>SCe(n),usage:ln}),SCe=(t,e)=>tn(t,{guardrail:n=>bJ(n),promptRouter:ln}),kCe=(t,e)=>tn(t,{guardrail:n=>bJ(n),promptRouter:ln}),mJ=(t,e)=>tn(t,{format:Pn,name:Pn,source:n=>CCe(Dd(n),e)}),CCe=(t,e)=>t.bytes!=null?{bytes:e.base64Decoder(t.bytes)}:{$unknown:Object.entries(t)[0]},gJ=(t,e)=>tn(t,{contentPolicy:ln,contextualGroundingPolicy:n=>RCe(n),invocationMetrics:ln,sensitiveInformationPolicy:ln,topicPolicy:ln,wordPolicy:ln}),ACe=(t,e)=>(t||[]).filter(r=>r!=null).map(r=>gJ(r)),TCe=(t,e)=>Object.entries(t).reduce((n,[r,s])=>(s===null||(n[r]=ACe(s)),n),{}),NCe=(t,e)=>Object.entries(t).reduce((n,[r,s])=>(s===null||(n[r]=gJ(s)),n),{}),PCe=(t,e)=>tn(t,{action:Pn,score:rF,threshold:rF,type:Pn}),ICe=(t,e)=>(t||[]).filter(r=>r!=null).map(r=>PCe(r)),RCe=(t,e)=>tn(t,{filters:n=>ICe(n)}),LCe=(t,e)=>t.image!=null?{image:OCe(t.image,e)}:t.text!=null?{text:ln(t.text)}:{$unknown:Object.entries(t)[0]},OCe=(t,e)=>tn(t,{format:Pn,source:n=>DCe(Dd(n),e)}),DCe=(t,e)=>t.bytes!=null?{bytes:e.base64Decoder(t.bytes)}:{$unknown:Object.entries(t)[0]},bJ=(t,e)=>tn(t,{inputAssessment:n=>NCe(n),modelOutput:ln,outputAssessments:n=>TCe(n)}),yJ=(t,e)=>tn(t,{format:Pn,source:n=>MCe(Dd(n),e)}),MCe=(t,e)=>t.bytes!=null?{bytes:e.base64Decoder(t.bytes)}:{$unknown:Object.entries(t)[0]},jCe=(t,e)=>tn(t,{content:n=>xCe(n,e),role:Pn}),FCe=(t,e)=>tn(t,{additionalModelResponseFields:n=>Ak(n),stopReason:Pn}),BCe=(t,e)=>tn(t,{content:n=>$Ce(n,e),status:Pn,toolUseId:Pn}),UCe=(t,e)=>t.document!=null?{document:mJ(t.document,e)}:t.image!=null?{image:yJ(t.image,e)}:t.json!=null?{json:Ak(t.json)}:Pn(t.text)!==void 0?{text:Pn(t.text)}:t.video!=null?{video:vJ(t.video,e)}:{$unknown:Object.entries(t)[0]},$Ce=(t,e)=>(t||[]).filter(r=>r!=null).map(r=>UCe(Dd(r),e)),HCe=(t,e)=>tn(t,{input:n=>Ak(n),name:Pn,toolUseId:Pn}),vJ=(t,e)=>tn(t,{format:Pn,source:n=>zCe(Dd(n),e)}),zCe=(t,e)=>t.bytes!=null?{bytes:e.base64Decoder(t.bytes)}:t.s3Location!=null?{s3Location:ln(t.s3Location)}:{$unknown:Object.entries(t)[0]},Ak=(t,e)=>t,fi=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),UF="accept",_J="contentType",xJ="content-type",VCe="guardrailIdentifier",WCe="guardrailVersion",wJ="performanceConfigLatency",GCe="trace",qCe="x-amzn-bedrock-guardrailidentifier",KCe="x-amzn-bedrock-guardrailversion",EJ="x-amzn-bedrock-performanceconfig-latency",YCe="x-amzn-bedrock-trace";class XCe extends kk.classBuilder().ep(_L).m(function(e,n,r,s){return[hL(r,this.serialize,this.deserialize),yL(r,e.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","Converse",{}).n("BedrockRuntimeClient","ConverseCommand").f(Ske,Cke).ser(Ike).de(Oke).build(){}class JCe extends kk.classBuilder().ep(_L).m(function(e,n,r,s){return[hL(r,this.serialize,this.deserialize),yL(r,e.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","ConverseStream",{eventStream:{output:!0}}).n("BedrockRuntimeClient","ConverseStreamCommand").f(Ake,Tke).ser(Rke).de(Dke).build(){}class ZCe extends kk.classBuilder().ep(_L).m(function(e,n,r,s){return[hL(r,this.serialize,this.deserialize),yL(r,e.getEndpointParameterInstructions())]}).s("AmazonBedrockFrontendService","InvokeModel",{}).n("BedrockRuntimeClient","InvokeModelCommand").f(Nke,Pke).ser(Lke).de(Mke).build(){}function QCe(t){var e;const n=(e=t.tools)!=null&&e.length?t.tools:void 0;if(n==null)return{toolConfig:{tools:void 0,toolChoice:void 0},toolWarnings:[]};const r=[],s=[];for(const a of n)a.type==="provider-defined"?r.push({type:"unsupported-tool",tool:a}):s.push({toolSpec:{name:a.name,description:a.description,inputSchema:{json:a.parameters}}});const i=t.toolChoice;if(i==null)return{toolConfig:{tools:s,toolChoice:void 0},toolWarnings:r};const o=i.type;switch(o){case"auto":return{toolConfig:{tools:s,toolChoice:{auto:{}}},toolWarnings:r};case"required":return{toolConfig:{tools:s,toolChoice:{any:{}}},toolWarnings:r};case"none":return{toolConfig:{tools:void 0,toolChoice:void 0},toolWarnings:r};case"tool":return{toolConfig:{tools:s,toolChoice:{tool:{name:i.toolName}}},toolWarnings:r};default:{const a=o;throw new Gb({functionality:`Unsupported tool choice type: ${a}`})}}}var eAe=uX({prefix:"file",size:16});function tAe(t){var e,n,r,s,i;const o=nAe(t);let a;const l=[];for(let c=0;c<o.length;c++){const u=o[c],d=c===o.length-1,h=u.type;switch(h){case"system":{if(l.length>0)throw new Gb({functionality:"Multiple system messages that are separated by user/assistant messages"});a=u.messages.map(({content:f})=>f).join(`
`);break}case"user":{const f=[];for(const g of u.messages){const{role:y,content:m}=g;switch(y){case"user":{for(let b=0;b<m.length;b++){const v=m[b];switch(v.type){case"text":{f.push({text:v.text});break}case"image":{if(v.image instanceof URL)throw new Gb({functionality:"Image URLs in user messages"});f.push({image:{format:(n=(e=v.mimeType)==null?void 0:e.split("/"))==null?void 0:n[1],source:{bytes:(r=v.image)!=null?r:v.image}}});break}case"file":{if(v.data instanceof URL)throw new Gb({functionality:"File URLs in user messages"});f.push({document:{format:(i=(s=v.mimeType)==null?void 0:s.split("/"))==null?void 0:i[1],name:eAe(),source:{bytes:bt.from(v.data,"base64")}}});break}}}break}case"tool":{for(let b=0;b<m.length;b++){const v=m[b];f.push({toolResult:{toolUseId:v.toolCallId,content:[{text:JSON.stringify(v.result)}]}})}break}default:{const b=y;throw new Error(`Unsupported role: ${b}`)}}}l.push({role:"user",content:f});break}case"assistant":{const f=[];for(let g=0;g<u.messages.length;g++){const y=u.messages[g],m=g===u.messages.length-1,{content:b}=y;for(let v=0;v<b.length;v++){const _=b[v],E=v===b.length-1;switch(_.type){case"text":{f.push({text:d&&m&&E?_.text.trim():_.text});break}case"tool-call":{f.push({toolUse:{toolUseId:_.toolCallId,name:_.toolName,input:_.args}});break}}}}l.push({role:"assistant",content:f});break}default:{const f=h;throw new Error(`Unsupported type: ${f}`)}}}return{system:a,messages:l}}function nAe(t){const e=[];let n;for(const r of t){const{role:s}=r;switch(s){case"system":{n?.type!=="system"&&(n={type:"system",messages:[]},e.push(n)),n.messages.push(r);break}case"assistant":{n?.type!=="assistant"&&(n={type:"assistant",messages:[]},e.push(n)),n.messages.push(r);break}case"user":{n?.type!=="user"&&(n={type:"user",messages:[]},e.push(n)),n.messages.push(r);break}case"tool":{n?.type!=="user"&&(n={type:"user",messages:[]},e.push(n)),n.messages.push(r);break}default:{const i=s;throw new Error(`Unsupported role: ${i}`)}}}return e}function $F(t){switch(t){case"stop_sequence":case"end_turn":return"stop";case"max_tokens":return"length";case"content_filtered":case"guardrail_intervened":return"content-filter";case"tool_use":return"tool-calls";default:return"unknown"}}var rAe=class{constructor(t,e,n){this.specificationVersion="v1",this.provider="amazon-bedrock",this.defaultObjectGenerationMode="tool",this.supportsImageUrls=!1,this.modelId=t,this.settings=e,this.config=n}getArgs({mode:t,prompt:e,maxTokens:n,temperature:r,topP:s,topK:i,frequencyPenalty:o,presencePenalty:a,stopSequences:l,responseFormat:c,seed:u,providerMetadata:d,headers:h}){var f,g;const y=t.type,m=[];o!=null&&m.push({type:"unsupported-setting",setting:"frequencyPenalty"}),a!=null&&m.push({type:"unsupported-setting",setting:"presencePenalty"}),u!=null&&m.push({type:"unsupported-setting",setting:"seed"}),h!=null&&m.push({type:"unsupported-setting",setting:"headers"}),i!=null&&m.push({type:"unsupported-setting",setting:"topK"}),c!=null&&c.type!=="text"&&m.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{system:b,messages:v}=tAe(e),_={modelId:this.modelId,system:b?[{text:b}]:void 0,additionalModelRequestFields:this.settings.additionalModelRequestFields,inferenceConfig:{maxTokens:n,temperature:r,topP:s,stopSequences:l},messages:v,guardrailConfig:(f=d?.bedrock)==null?void 0:f.guardrailConfig};switch(y){case"regular":{const{toolConfig:E,toolWarnings:w}=QCe(t);return{command:{..._,...(g=E.tools)!=null&&g.length?{toolConfig:E}:{}},warnings:[...m,...w]}}case"object-json":throw new Gb({functionality:"json-mode object generation"});case"object-tool":return{command:{..._,toolConfig:{tools:[{toolSpec:{name:t.tool.name,description:t.tool.description,inputSchema:{json:t.tool.parameters}}}],toolChoice:{tool:{name:t.tool.name}}}},warnings:m};default:{const E=y;throw new Error(`Unsupported type: ${E}`)}}}async doGenerate(t){var e,n,r,s,i,o,a,l,c,u,d,h;const{command:f,warnings:g}=this.getArgs(t),y=await this.config.client.send(new XCe(f)),{messages:m,...b}=f,v=y.trace?{bedrock:{trace:y.trace}}:void 0;return{text:(s=(r=(n=(e=y.output)==null?void 0:e.message)==null?void 0:n.content)==null?void 0:r.map(_=>{var E;return(E=_.text)!=null?E:""}).join(""))!=null?s:void 0,toolCalls:(l=(a=(o=(i=y.output)==null?void 0:i.message)==null?void 0:o.content)==null?void 0:a.filter(_=>!!_.toolUse))==null?void 0:l.map(_=>{var E,w,S,k,x,I;return{toolCallType:"function",toolCallId:(w=(E=_.toolUse)==null?void 0:E.toolUseId)!=null?w:this.config.generateId(),toolName:(k=(S=_.toolUse)==null?void 0:S.name)!=null?k:`tool-${this.config.generateId()}`,args:JSON.stringify((I=(x=_.toolUse)==null?void 0:x.input)!=null?I:"")}}),finishReason:$F(y.stopReason),usage:{promptTokens:(u=(c=y.usage)==null?void 0:c.inputTokens)!=null?u:Number.NaN,completionTokens:(h=(d=y.usage)==null?void 0:d.outputTokens)!=null?h:Number.NaN},rawCall:{rawPrompt:m,rawSettings:b},warnings:g,providerMetadata:v}}async doStream(t){const{command:e,warnings:n}=this.getArgs(t),r=await this.config.client.send(new JCe(e)),{messages:s,...i}=e;let o="unknown",a={promptTokens:Number.NaN,completionTokens:Number.NaN},l;if(!r.stream)throw new Error("No stream found");const c=new ReadableStream({async start(d){for await(const h of r.stream)d.enqueue({success:!0,value:h});d.close()}}),u={};return{stream:c.pipeThrough(new TransformStream({transform(d,h){var f,g,y,m,b,v,_,E,w;function S(C){o="error",h.enqueue({type:"error",error:C})}if(!d.success){S(d.error);return}const k=d.value;if(k.internalServerException){S(k.internalServerException);return}if(k.modelStreamErrorException){S(k.modelStreamErrorException);return}if(k.throttlingException){S(k.throttlingException);return}if(k.validationException){S(k.validationException);return}k.messageStop&&(o=$F(k.messageStop.stopReason)),k.metadata&&(a={promptTokens:(g=(f=k.metadata.usage)==null?void 0:f.inputTokens)!=null?g:Number.NaN,completionTokens:(m=(y=k.metadata.usage)==null?void 0:y.outputTokens)!=null?m:Number.NaN},k.metadata.trace&&(l={bedrock:{trace:k.metadata.trace}})),(v=(b=k.contentBlockDelta)==null?void 0:b.delta)!=null&&v.text&&h.enqueue({type:"text-delta",textDelta:k.contentBlockDelta.delta.text});const x=k.contentBlockStart;if(((_=x?.start)==null?void 0:_.toolUse)!=null){const C=x.start.toolUse;u[x.contentBlockIndex]={toolCallId:C.toolUseId,toolName:C.name,jsonText:""}}const I=k.contentBlockDelta;if((E=I?.delta)!=null&&E.toolUse){const C=u[I.contentBlockIndex],N=(w=I.delta.toolUse.input)!=null?w:"";h.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:C.toolCallId,toolName:C.toolName,argsTextDelta:N}),C.jsonText+=N}const R=k.contentBlockStop;if(R!=null){const C=R.contentBlockIndex,N=u[C];N!=null&&(h.enqueue({type:"tool-call",toolCallType:"function",toolCallId:N.toolCallId,toolName:N.toolName,args:N.jsonText}),delete u[C])}},flush(d){d.enqueue({type:"finish",finishReason:o,usage:a,providerMetadata:l})}})),rawCall:{rawPrompt:s,rawSettings:i},warnings:n}}},sAe=class{constructor(t,e,n){this.specificationVersion="v1",this.provider="amazon-bedrock",this.maxEmbeddingsPerCall=void 0,this.supportsParallelCalls=!0,this.modelId=t,this.config=n,this.settings=e}async doEmbed({values:t}){const e=async s=>{const i={inputText:s,dimensions:this.settings.dimensions,normalize:this.settings.normalize},o=new ZCe({contentType:"application/json",body:JSON.stringify(i),modelId:this.modelId}),a=await this.config.client.send(o);return JSON.parse(new TextDecoder().decode(a.body))};return(await Promise.all(t.map(e))).reduce((s,i)=>(s.embeddings.push(i.embedding),s.usage.tokens+=i.inputTextTokenCount,s),{embeddings:[],usage:{tokens:0}})}};function SJ(t={}){const e=()=>{var i;return new wke((i=t.bedrockOptions)!=null?i:{region:ST({settingValue:t.region,settingName:"region",environmentVariableName:"AWS_REGION",description:"AWS region"}),credentials:{accessKeyId:ST({settingValue:t.accessKeyId,settingName:"accessKeyId",environmentVariableName:"AWS_ACCESS_KEY_ID",description:"AWS access key ID"}),secretAccessKey:ST({settingValue:t.secretAccessKey,settingName:"secretAccessKey",environmentVariableName:"AWS_SECRET_ACCESS_KEY",description:"AWS secret access key"}),sessionToken:Nxe({settingValue:t.sessionToken,environmentVariableName:"AWS_SESSION_TOKEN"})}})},n=(i,o={})=>new rAe(i,o,{client:e(),generateId:Txe}),r=function(i,o){if(new.target)throw new Error("The Amazon Bedrock model function cannot be called with the new keyword.");return n(i,o)},s=(i,o={})=>new sAe(i,o,{client:e()});return r.languageModel=n,r.embedding=s,r.textEmbedding=s,r.textEmbeddingModel=s,r}SJ();class iAe extends Kr{name="AmazonBedrock";getApiKeyLink="https://console.aws.amazon.com/iam/home";config={apiTokenKey:"AWS_BEDROCK_CONFIG"};staticModels=[{name:"anthropic.claude-3-5-sonnet-20241022-v2:0",label:"Claude 3.5 Sonnet v2 (Bedrock)",provider:"AmazonBedrock",maxTokenAllowed:2e5},{name:"anthropic.claude-3-5-sonnet-20240620-v1:0",label:"Claude 3.5 Sonnet (Bedrock)",provider:"AmazonBedrock",maxTokenAllowed:4096},{name:"anthropic.claude-3-sonnet-20240229-v1:0",label:"Claude 3 Sonnet (Bedrock)",provider:"AmazonBedrock",maxTokenAllowed:4096},{name:"anthropic.claude-3-haiku-20240307-v1:0",label:"Claude 3 Haiku (Bedrock)",provider:"AmazonBedrock",maxTokenAllowed:4096},{name:"amazon.nova-pro-v1:0",label:"Amazon Nova Pro (Bedrock)",provider:"AmazonBedrock",maxTokenAllowed:5120},{name:"amazon.nova-lite-v1:0",label:"Amazon Nova Lite (Bedrock)",provider:"AmazonBedrock",maxTokenAllowed:5120},{name:"mistral.mistral-large-2402-v1:0",label:"Mistral Large 24.02 (Bedrock)",provider:"AmazonBedrock",maxTokenAllowed:8192}];_parseAndValidateConfig(e){let n;try{n=JSON.parse(e)}catch{throw new Error("Invalid AWS Bedrock configuration format. Please provide a valid JSON string containing region, accessKeyId, and secretAccessKey.")}const{region:r,accessKeyId:s,secretAccessKey:i,sessionToken:o}=n;if(!r||!s||!i)throw new Error("Missing required AWS credentials. Configuration must include region, accessKeyId, and secretAccessKey.");return{region:r,accessKeyId:s,secretAccessKey:i,...o&&{sessionToken:o}}}getModelInstance(e){const{model:n,serverEnv:r,apiKeys:s,providerSettings:i}=e,{apiKey:o}=this.getProviderBaseUrlAndKey({apiKeys:s,providerSettings:i?.[this.name],serverEnv:r,defaultBaseUrlKey:"",defaultApiTokenKey:"AWS_BEDROCK_CONFIG"});if(!o)throw new Error(`Missing API key for ${this.name} provider`);const a=this._parseAndValidateConfig(o);return SJ(a)(n)}}class oAe extends Kr{name="Github";getApiKeyLink="https://github.com/settings/personal-access-tokens";config={apiTokenKey:"GITHUB_API_KEY"};staticModels=[{name:"gpt-4o",label:"GPT-4o",provider:"Github",maxTokenAllowed:8e3},{name:"o1",label:"o1-preview",provider:"Github",maxTokenAllowed:1e5},{name:"o1-mini",label:"o1-mini",provider:"Github",maxTokenAllowed:8e3},{name:"gpt-4o-mini",label:"GPT-4o Mini",provider:"Github",maxTokenAllowed:8e3},{name:"gpt-4-turbo",label:"GPT-4 Turbo",provider:"Github",maxTokenAllowed:8e3},{name:"gpt-4",label:"GPT-4",provider:"Github",maxTokenAllowed:8e3},{name:"gpt-3.5-turbo",label:"GPT-3.5 Turbo",provider:"Github",maxTokenAllowed:8e3}];getModelInstance(e){const{model:n,serverEnv:r,apiKeys:s,providerSettings:i}=e,{apiKey:o}=this.getProviderBaseUrlAndKey({apiKeys:s,providerSettings:i?.[this.name],serverEnv:r,defaultBaseUrlKey:"",defaultApiTokenKey:"GITHUB_API_KEY"});if(!o)throw new Error(`Missing API key for ${this.name} provider`);return Jl({baseURL:"https://models.inference.ai.azure.com",apiKey:o})(n)}}const aAe=Object.freeze(Object.defineProperty({__proto__:null,AmazonBedrockProvider:iAe,AnthropicProvider:vve,CohereProvider:Tve,DeepseekProvider:Bve,GithubProvider:oAe,GoogleProvider:g_e,GroqProvider:b_e,HuggingFaceProvider:y_e,HyperbolicProvider:xxe,LMStudioProvider:v_e,MistralProvider:T_e,OllamaProvider:z_e,OpenAILikeProvider:gxe,OpenAIProvider:bxe,OpenRouterProvider:mxe,PerplexityProvider:yxe,TogetherProvider:vxe,XAIProvider:_xe},Symbol.toStringTag,{value:"Module"})),Za=Di("LLMManager");class Ah{static _instance;_providers=new Map;_modelList=[];_env={};constructor(e){this._registerProvidersFromDirectory(),this._env=e}static getInstance(e={}){return Ah._instance||(Ah._instance=new Ah(e)),Ah._instance}get env(){return this._env}async _registerProvidersFromDirectory(){try{for(const e of Object.values(aAe))if(typeof e=="function"&&e.prototype instanceof Kr){const n=new e;try{this.registerProvider(n)}catch(r){Za.warn("Failed To Register Provider: ",n.name,"error:",r.message)}}}catch(e){Za.error("Error registering providers:",e)}}registerProvider(e){if(this._providers.has(e.name)){Za.warn(`Provider ${e.name} is already registered. Skipping.`);return}Za.info("Registering Provider: ",e.name),this._providers.set(e.name,e),this._modelList=[...this._modelList,...e.staticModels]}getProvider(e){return this._providers.get(e)}getAllProviders(){return Array.from(this._providers.values())}getModelList(){return this._modelList}async updateModelList(e){const{apiKeys:n,providerSettings:r,serverEnv:s}=e;let i=Array.from(this._providers.values()).map(h=>h.name);r&&Object.keys(r).length>0&&(i=i.filter(h=>r[h].enabled));const o=await Promise.all(Array.from(this._providers.values()).filter(h=>i.includes(h.name)).filter(h=>!!h.getDynamicModels).map(async h=>{const f=h.getModelsFromCache(e);return f||await h.getDynamicModels(n,r?.[h.name],s).then(y=>(Za.info(`Caching ${y.length} dynamic models for ${h.name}`),h.storeDynamicModels(e,y),y)).catch(y=>(Za.error(`Error getting dynamic models ${h.name} :`,y),[]))})),a=Array.from(this._providers.values()).flatMap(h=>h.staticModels||[]),l=o.flat(),c=l.map(h=>`${h.name}-${h.provider}`),u=a.filter(h=>!c.includes(`${h.name}-${h.provider}`)),d=[...l,...u];return d.sort((h,f)=>h.name.localeCompare(f.name)),this._modelList=d,d}getStaticModelList(){return[...this._providers.values()].flatMap(e=>e.staticModels||[])}async getModelListFromProvider(e,n){const r=this._providers.get(e.name);if(!r)throw new Error(`Provider ${e.name} not found`);const s=r.staticModels||[];if(!r.getDynamicModels)return s;const{apiKeys:i,providerSettings:o,serverEnv:a}=n,l=r.getModelsFromCache({apiKeys:i,providerSettings:o,serverEnv:a});if(l)return Za.info(`Found ${l.length} cached models for ${r.name}`),[...l,...s];Za.info(`Getting dynamic models for ${r.name}`);const c=await r.getDynamicModels?.(i,o?.[r.name],a).then(f=>(Za.info(`Got ${f.length} dynamic models for ${r.name}`),r.storeDynamicModels(n,f),f)).catch(f=>(Za.error(`Error getting dynamic models ${r.name} :`,f),[])),u=c.map(f=>f.name),d=s.filter(f=>!u.includes(f.name)),h=[...c,...d];return h.sort((f,g)=>f.name.localeCompare(g.name)),h}getStaticModelListFromProvider(e){const n=this._providers.get(e.name);if(!n)throw new Error(`Provider ${e.name} not found`);return[...n.staticModels||[]]}getDefaultProvider(){const e=this._providers.values().next().value;if(!e)throw new Error("No providers registered");return e}}const lAe={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},kJ="project",Zc=`/home/${kJ}`,cAe=/^\[Model: (.*?)\]\n\n/,uAe=/\[Provider: (.*?)\]\n\n/,dAe="claude-3-5-sonnet-latest",LT="cachedPrompt",CJ=Ah.getInstance(lAe),Tk=CJ.getAllProviders(),hAe=CJ.getDefaultProvider(),ML={};Tk.forEach(t=>{ML[t.name]={baseUrlKey:t.config.baseUrlKey,apiTokenKey:t.config.apiTokenKey}});const kE=[{name:"bolt-astro-basic",label:"Astro Basic",description:"Lightweight Astro starter template for building fast static websites",githubRepo:"thecodacus/bolt-astro-basic-template",tags:["astro","blog","performance"],icon:"i-bolt:astro"},{name:"bolt-nextjs-shadcn",label:"Next.js with shadcn/ui",description:"Next.js starter fullstack template integrated with shadcn/ui components and styling system",githubRepo:"thecodacus/bolt-nextjs-shadcn-template",tags:["nextjs","react","typescript","shadcn","tailwind"],icon:"i-bolt:nextjs"},{name:"bolt-qwik-ts",label:"Qwik TypeScript",description:"Qwik framework starter with TypeScript for building resumable applications",githubRepo:"thecodacus/bolt-qwik-ts-template",tags:["qwik","typescript","performance","resumable"],icon:"i-bolt:qwik"},{name:"bolt-remix-ts",label:"Remix TypeScript",description:"Remix framework starter with TypeScript for full-stack web applications",githubRepo:"thecodacus/bolt-remix-ts-template",tags:["remix","typescript","fullstack","react"],icon:"i-bolt:remix"},{name:"bolt-slidev",label:"Slidev Presentation",description:"Slidev starter template for creating developer-friendly presentations using Markdown",githubRepo:"thecodacus/bolt-slidev-template",tags:["slidev","presentation","markdown"],icon:"i-bolt:slidev"},{name:"bolt-sveltekit",label:"SvelteKit",description:"SvelteKit starter template for building fast, efficient web applications",githubRepo:"bolt-sveltekit-template",tags:["svelte","sveltekit","typescript"],icon:"i-bolt:svelte"},{name:"vanilla-vite",label:"Vanilla + Vite",description:"Minimal Vite starter template for vanilla JavaScript projects",githubRepo:"thecodacus/vanilla-vite-template",tags:["vite","vanilla-js","minimal"],icon:"i-bolt:vite"},{name:"bolt-vite-react",label:"React + Vite + typescript",description:"React starter template powered by Vite for fast development experience",githubRepo:"thecodacus/bolt-vite-react-ts-template",tags:["react","vite","frontend"],icon:"i-bolt:react"},{name:"bolt-vite-ts",label:"Vite + TypeScript",description:"Vite starter template with TypeScript configuration for type-safe development",githubRepo:"thecodacus/bolt-vite-ts-template",tags:["vite","typescript","minimal"],icon:"i-bolt:typescript"},{name:"bolt-vue",label:"Vue.js",description:"Vue.js starter template with modern tooling and best practices",githubRepo:"thecodacus/bolt-vue-template",tags:["vue","typescript","frontend"],icon:"i-bolt:vue"},{name:"bolt-angular",label:"Angular Starter",description:"A modern Angular starter template with TypeScript support and best practices configuration",githubRepo:"thecodacus/bolt-angular-template",tags:["angular","typescript","frontend","spa"],icon:"i-bolt:angular"}],fAe={profile:"i-ph:user-circle-fill",settings:"i-ph:gear-six-fill",notifications:"i-ph:bell-fill",features:"i-ph:star-fill",data:"i-ph:database-fill","cloud-providers":"i-ph:cloud-fill","local-providers":"i-ph:desktop-fill","service-status":"i-ph:activity-bold",connection:"i-ph:wifi-high-fill",debug:"i-ph:bug-fill","event-logs":"i-ph:list-bullets-fill",update:"i-ph:arrow-clockwise-fill","task-manager":"i-ph:chart-line-fill","tab-management":"i-ph:squares-four-fill"},Jb={profile:"Profile",settings:"Settings",notifications:"Notifications",features:"Features",data:"Data Management","cloud-providers":"Cloud Providers","local-providers":"Local Providers","service-status":"Service Status",connection:"Connection",debug:"Debug","event-logs":"Event Logs",update:"Updates","task-manager":"Task Manager","tab-management":"Tab Management"},tg=[{id:"features",visible:!0,window:"user",order:0},{id:"data",visible:!0,window:"user",order:1},{id:"cloud-providers",visible:!0,window:"user",order:2},{id:"local-providers",visible:!0,window:"user",order:3},{id:"connection",visible:!0,window:"user",order:4},{id:"notifications",visible:!0,window:"user",order:5},{id:"event-logs",visible:!0,window:"user",order:6},{id:"profile",visible:!1,window:"user",order:7},{id:"settings",visible:!1,window:"user",order:8},{id:"task-manager",visible:!1,window:"user",order:9},{id:"service-status",visible:!1,window:"user",order:10},{id:"debug",visible:!1,window:"user",order:11},{id:"update",visible:!1,window:"user",order:12},{id:"features",visible:!0,window:"developer",order:0},{id:"data",visible:!0,window:"developer",order:1},{id:"cloud-providers",visible:!0,window:"developer",order:2},{id:"local-providers",visible:!0,window:"developer",order:3},{id:"connection",visible:!0,window:"developer",order:4},{id:"notifications",visible:!0,window:"developer",order:5},{id:"event-logs",visible:!0,window:"developer",order:6},{id:"profile",visible:!0,window:"developer",order:7},{id:"settings",visible:!0,window:"developer",order:8},{id:"task-manager",visible:!0,window:"developer",order:9},{id:"service-status",visible:!0,window:"developer",order:10},{id:"debug",visible:!0,window:"developer",order:11},{id:"update",visible:!0,window:"developer",order:12}],HF=t=>{let e;const n=new Set,r=(c,u)=>{const d=typeof c=="function"?c(e):c;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>l,subscribe:c=>(n.add(c),()=>n.delete(c))},l=e=t(r,s,a);return a},pAe=t=>t?HF(t):HF,mAe=t=>t;function AJ(t,e=mAe){const n=ut.useSyncExternalStore(t.subscribe,()=>e(t.getState()),()=>e(t.getInitialState()));return ut.useDebugValue(n),n}const zF=t=>{const e=pAe(t),n=r=>AJ(e,r);return Object.assign(n,e),n},TJ=t=>t?zF(t):zF,Zb=["Ollama","LMStudio","OpenAILike"],jL=["OpenAILike","LMStudio","Ollama"],gAe=Ld({toggleTheme:{key:"d",metaKey:!0,altKey:!0,shiftKey:!0,action:()=>vW(),description:"Toggle theme",isPreventDefault:!0},toggleTerminal:{key:"`",ctrlOrMetaKey:!0,action:()=>{},description:"Toggle terminal",isPreventDefault:!0}}),NJ="provider_settings",i1=typeof window<"u",bAe=()=>{const t={};if(Tk.forEach(e=>{t[e.name]={...e,settings:{enabled:!jL.includes(e.name)}}}),i1){const e=localStorage.getItem(NJ);if(e)try{const n=JSON.parse(e);Object.entries(n).forEach(([r,s])=>{t[r]&&(t[r].settings=s.settings)})}catch(n){console.error("Error parsing saved provider settings:",n)}}return t},Qb=Ld(bAe()),yAe=(t,e)=>{const n=Qb.get(),r={...n[t],settings:{...n[t].settings,...e}};Qb.setKey(t,r);const s=Qb.get();localStorage.setItem(NJ,JSON.stringify(s))},VF=tr(!1),Ao={LATEST_BRANCH:"isLatestBranch",AUTO_SELECT_TEMPLATE:"autoSelectTemplate",CONTEXT_OPTIMIZATION:"contextOptimizationEnabled",EVENT_LOGS:"isEventLogsEnabled",PROMPT_ID:"promptId",DEVELOPER_MODE:"isDeveloperMode"},vAe=()=>{const t=(e,n)=>{if(!i1)return n;const r=localStorage.getItem(e);if(r===null)return n;try{return JSON.parse(r)}catch{return n}};return{latestBranch:t(Ao.LATEST_BRANCH,!1),autoSelectTemplate:t(Ao.AUTO_SELECT_TEMPLATE,!0),contextOptimization:t(Ao.CONTEXT_OPTIMIZATION,!0),eventLogs:t(Ao.EVENT_LOGS,!0),promptId:i1&&localStorage.getItem(Ao.PROMPT_ID)||"default",developerMode:t(Ao.DEVELOPER_MODE,!1)}},Og=vAe(),PJ=tr(Og.latestBranch),IJ=tr(Og.autoSelectTemplate),RJ=tr(Og.contextOptimization),LJ=tr(Og.eventLogs),OJ=tr(Og.promptId),_Ae=t=>{PJ.set(t),localStorage.setItem(Ao.LATEST_BRANCH,JSON.stringify(t))},xAe=t=>{IJ.set(t),localStorage.setItem(Ao.AUTO_SELECT_TEMPLATE,JSON.stringify(t))},wAe=t=>{RJ.set(t),localStorage.setItem(Ao.CONTEXT_OPTIMIZATION,JSON.stringify(t))},EAe=t=>{LJ.set(t),localStorage.setItem(Ao.EVENT_LOGS,JSON.stringify(t))},SAe=t=>{OJ.set(t),localStorage.setItem(Ao.PROMPT_ID,t)},kAe=()=>{const t={userTabs:tg.filter(e=>e.window==="user"),developerTabs:tg.filter(e=>e.window==="developer")};if(!i1)return t;try{const e=localStorage.getItem("bolt_tab_configuration");if(!e)return t;const n=JSON.parse(e);return!n?.userTabs||!n?.developerTabs?t:{userTabs:n.userTabs.filter(r=>r.window==="user"),developerTabs:n.developerTabs.filter(r=>r.window==="developer")}}catch(e){return console.warn("Failed to parse tab configuration:",e),t}},ad=Ld(kAe()),CAe=t=>{const e=ad.get();console.log("Current tab configuration before update:",e);const r=t.window==="user"?"userTabs":"developerTabs",s=e[r].map(o=>o.id===t.id?{...t}:o);s.find(o=>o.id===t.id)||s.push(t);const i={...e,[r]:s};console.log("New tab configuration after update:",i),ad.set(i),ur.set("tabConfiguration",JSON.stringify(i),{expires:365,path:"/",sameSite:"strict"})},DJ=()=>{const t={userTabs:tg.filter(e=>e.window==="user"),developerTabs:tg.filter(e=>e.window==="developer")};ad.set(t),localStorage.setItem("bolt_tab_configuration",JSON.stringify(t))},MJ=tr(Og.developerMode),AAe=t=>{MJ.set(t),i1&&localStorage.setItem(Ao.DEVELOPER_MODE,JSON.stringify(t))},TAe=TJ(t=>({isOpen:!1,selectedTab:"user",openSettings:()=>{t({isOpen:!0,selectedTab:"user"})},closeSettings:()=>{t({isOpen:!1,selectedTab:"user"})},setSelectedTab:e=>{t({selectedTab:e})}}));var jJ={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},WF=ut.createContext&&ut.createContext(jJ),NAe=["attr","size","title"];function PAe(t,e){if(t==null)return{};var n=IAe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function IAe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function CE(){return CE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CE.apply(this,arguments)}function GF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function AE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GF(Object(n),!0).forEach(function(r){RAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function RAe(t,e,n){return e=LAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LAe(t){var e=OAe(t,"string");return typeof e=="symbol"?e:e+""}function OAe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function FJ(t){return t&&t.map((e,n)=>ut.createElement(e.tag,AE({key:n},e.attr),FJ(e.child)))}function Yr(t){return e=>ut.createElement(DAe,CE({attr:AE({},t.attr)},e),FJ(t.child))}function DAe(t){var e=n=>{var{attr:r,size:s,title:i}=t,o=PAe(t,NAe),a=s||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),ut.createElement("svg",CE({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:AE(AE({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&ut.createElement("title",null,i),t.children)};return WF!==void 0?ut.createElement(WF.Consumer,null,n=>e(n)):e(jJ)}function MAe(t){return Yr({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 12h4.5l1.5 -6l4 12l2 -9l1.5 3h4.5"},child:[]}]})(t)}function BJ(t){return Yr({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8"},child:[]},{tag:"path",attr:{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8"},child:[]},{tag:"path",attr:{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5"},child:[]},{tag:"path",attr:{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0"},child:[]},{tag:"path",attr:{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5"},child:[]},{tag:"path",attr:{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10"},child:[]}]})(t)}function jAe(t){return Yr({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11.217 19.384a3.501 3.501 0 0 0 6.783 -1.217v-5.167l-6 -3.35"},child:[]},{tag:"path",attr:{d:"M5.214 15.014a3.501 3.501 0 0 0 4.446 5.266l4.34 -2.534v-6.946"},child:[]},{tag:"path",attr:{d:"M6 7.63c-1.391 -.236 -2.787 .395 -3.534 1.689a3.474 3.474 0 0 0 1.271 4.745l4.263 2.514l6 -3.348"},child:[]},{tag:"path",attr:{d:"M12.783 4.616a3.501 3.501 0 0 0 -6.783 1.217v5.067l6 3.45"},child:[]},{tag:"path",attr:{d:"M18.786 8.986a3.501 3.501 0 0 0 -4.446 -5.266l-4.34 2.534v6.946"},child:[]},{tag:"path",attr:{d:"M18 16.302c1.391 .236 2.787 -.395 3.534 -1.689a3.474 3.474 0 0 0 -1.271 -4.745l-4.308 -2.514l-5.955 3.42"},child:[]}]})(t)}function UJ(t){return Yr({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M6.657 16c-2.572 0 -4.657 -2.007 -4.657 -4.483c0 -2.475 2.085 -4.482 4.657 -4.482c.393 -1.762 1.794 -3.2 3.675 -3.773c1.88 -.572 3.956 -.193 5.444 1c1.488 1.19 2.162 3.007 1.77 4.769h.99c1.913 0 3.464 1.56 3.464 3.486c0 1.927 -1.551 3.487 -3.465 3.487h-11.878"},child:[]},{tag:"path",attr:{d:"M12 16v5"},child:[]},{tag:"path",attr:{d:"M16 16v4a1 1 0 0 0 1 1h4"},child:[]},{tag:"path",attr:{d:"M8 16v4a1 1 0 0 1 -1 1h-4"},child:[]}]})(t)}function FAe(t){return Yr({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"},child:[]},{tag:"path",attr:{d:"M14 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"},child:[]},{tag:"path",attr:{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"},child:[]},{tag:"path",attr:{d:"M14 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"},child:[]}]})(t)}const qF={profile:"i-ph:user-circle-fill",settings:"i-ph:gear-six-fill",notifications:"i-ph:bell-fill",features:"i-ph:star-fill",data:"i-ph:database-fill","cloud-providers":"i-ph:cloud-fill","local-providers":"i-ph:desktop-fill","service-status":"i-ph:activity-fill",connection:"i-ph:wifi-high-fill",debug:"i-ph:bug-fill","event-logs":"i-ph:list-bullets-fill",update:"i-ph:arrow-clockwise-fill","task-manager":"i-ph:chart-line-fill","tab-management":"i-ph:squares-four-fill"},Du=["features","data","cloud-providers","local-providers","connection","notifications","event-logs"],Mu=["profile","settings","task-manager","service-status","debug","update"],BAe=[...Du,...Mu],KF=new Set(["task-manager","service-status","update","local-providers"]),YF=()=>p.jsx("span",{className:"px-1.5 py-0.5 text-[10px] rounded-full bg-purple-500/10 text-purple-500 font-medium",children:"BETA"}),XF=()=>{const[t,e]=T.useState(""),n=It(ad),{setSelectedTab:r}=TAe(),s=(l,c)=>{if(!n.userTabs.find(f=>f.id===l)){const f={id:l,visible:c,window:"user",order:n.userTabs.length},g=[...n.userTabs,f];ad.set({...n,userTabs:g}),ze.success(`Tab ${c?"enabled":"disabled"} successfully`);return}if(!(Du.includes(l)||Mu.includes(l))&&c){ze.error("This tab cannot be enabled in user mode");return}const h=n.userTabs.map(f=>f.id===l?{...f,visible:c}:f);ad.set({...n,userTabs:h}),ze.success(`Tab ${c?"enabled":"disabled"} successfully`)},i=new Map(n.userTabs.map(l=>[l.id,l])),a=BAe.map(l=>i.get(l)||{id:l,visible:!1,window:"user",order:-1}).filter(l=>Jb[l.id].toLowerCase().includes(t.toLowerCase()));return T.useEffect(()=>()=>{r("user")},[r]),p.jsx("div",{className:"space-y-6",children:p.jsxs(ot.div,{className:"space-y-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[p.jsxs("div",{className:"flex items-center justify-between gap-4 mt-8 mb-4",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:Pe("w-8 h-8 flex items-center justify-center rounded-lg","bg-bolt-elements-background-depth-3","text-purple-500"),children:p.jsx(FAe,{className:"w-5 h-5"})}),p.jsxs("div",{children:[p.jsx("h4",{className:"text-md font-medium text-bolt-elements-textPrimary",children:"Tab Management"}),p.jsx("p",{className:"text-sm text-bolt-elements-textSecondary",children:"Configure visible tabs and their order"})]})]}),p.jsxs("div",{className:"relative w-64",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:p.jsx("div",{className:"i-ph:magnifying-glass w-4 h-4 text-gray-400"})}),p.jsx("input",{type:"text",value:t,onChange:l=>e(l.target.value),placeholder:"Search tabs...",className:Pe("w-full pl-10 pr-4 py-2 rounded-lg","bg-bolt-elements-background-depth-2","border border-bolt-elements-borderColor","text-bolt-elements-textPrimary","placeholder-bolt-elements-textTertiary","focus:outline-none focus:ring-2 focus:ring-purple-500/30","transition-all duration-200")})]})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.some(l=>Du.includes(l.id))&&p.jsxs("div",{className:"col-span-full flex items-center gap-2 mt-4 mb-2",children:[p.jsx("div",{className:"i-ph:star-fill w-4 h-4 text-purple-500"}),p.jsx("span",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:"Default Tabs"})]}),a.filter(l=>Du.includes(l.id)).map((l,c)=>p.jsxs(ot.div,{className:Pe("rounded-lg border bg-bolt-elements-background text-bolt-elements-textPrimary","bg-bolt-elements-background-depth-2","hover:bg-bolt-elements-background-depth-3","transition-all duration-200","relative overflow-hidden group"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:c*.1},whileHover:{scale:1.02},children:[p.jsx("div",{className:"absolute top-1 right-1.5 flex gap-1",children:p.jsx("span",{className:"px-1.5 py-0.25 text-xs rounded-full bg-purple-500/10 text-purple-500 font-medium mr-2",children:"Default"})}),p.jsxs("div",{className:"flex items-start gap-4 p-4",children:[p.jsx(ot.div,{className:Pe("w-10 h-10 flex items-center justify-center rounded-xl","bg-bolt-elements-background-depth-3 group-hover:bg-bolt-elements-background-depth-4","transition-all duration-200",l.visible?"text-purple-500":"text-bolt-elements-textSecondary"),whileHover:{scale:1.1},whileTap:{scale:.9},children:p.jsx("div",{className:Pe("w-6 h-6","transition-transform duration-200","group-hover:rotate-12"),children:p.jsx("div",{className:Pe(qF[l.id],"w-full h-full")})})}),p.jsx("div",{className:"flex-1 min-w-0",children:p.jsxs("div",{className:"flex items-center justify-between gap-4",children:[p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary group-hover:text-purple-500 transition-colors",children:Jb[l.id]}),KF.has(l.id)&&p.jsx(YF,{})]}),p.jsx("p",{className:"text-xs text-bolt-elements-textSecondary mt-0.5",children:l.visible?"Visible in user mode":"Hidden in user mode"})]}),p.jsx(Fo,{checked:l.visible,onCheckedChange:u=>{!Du.includes(l.id)&&!Mu.includes(l.id)||s(l.id,u)},className:Pe("data-[state=checked]:bg-purple-500 ml-4",{"opacity-50 pointer-events-none":!Du.includes(l.id)&&!Mu.includes(l.id)})})]})})]}),p.jsx(ot.div,{className:"absolute inset-0 border-2 border-purple-500/0 rounded-lg pointer-events-none",animate:{borderColor:l.visible?"rgba(168, 85, 247, 0.2)":"rgba(168, 85, 247, 0)",scale:l.visible?1:.98},transition:{duration:.2}})]},l.id)),a.some(l=>Mu.includes(l.id))&&p.jsxs("div",{className:"col-span-full flex items-center gap-2 mt-8 mb-2",children:[p.jsx("div",{className:"i-ph:plus-circle-fill w-4 h-4 text-blue-500"}),p.jsx("span",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:"Optional Tabs"})]}),a.filter(l=>Mu.includes(l.id)).map((l,c)=>p.jsxs(ot.div,{className:Pe("rounded-lg border bg-bolt-elements-background text-bolt-elements-textPrimary","bg-bolt-elements-background-depth-2","hover:bg-bolt-elements-background-depth-3","transition-all duration-200","relative overflow-hidden group"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:c*.1},whileHover:{scale:1.02},children:[p.jsx("div",{className:"absolute top-1 right-1.5 flex gap-1",children:p.jsx("span",{className:"px-1.5 py-0.25 text-xs rounded-full bg-blue-500/10 text-blue-500 font-medium mr-2",children:"Optional"})}),p.jsxs("div",{className:"flex items-start gap-4 p-4",children:[p.jsx(ot.div,{className:Pe("w-10 h-10 flex items-center justify-center rounded-xl","bg-bolt-elements-background-depth-3 group-hover:bg-bolt-elements-background-depth-4","transition-all duration-200",l.visible?"text-purple-500":"text-bolt-elements-textSecondary"),whileHover:{scale:1.1},whileTap:{scale:.9},children:p.jsx("div",{className:Pe("w-6 h-6","transition-transform duration-200","group-hover:rotate-12"),children:p.jsx("div",{className:Pe(qF[l.id],"w-full h-full")})})}),p.jsx("div",{className:"flex-1 min-w-0",children:p.jsxs("div",{className:"flex items-center justify-between gap-4",children:[p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary group-hover:text-purple-500 transition-colors",children:Jb[l.id]}),KF.has(l.id)&&p.jsx(YF,{})]}),p.jsx("p",{className:"text-xs text-bolt-elements-textSecondary mt-0.5",children:l.visible?"Visible in user mode":"Hidden in user mode"})]}),p.jsx(Fo,{checked:l.visible,onCheckedChange:u=>{!Du.includes(l.id)&&!Mu.includes(l.id)||s(l.id,u)},className:Pe("data-[state=checked]:bg-purple-500 ml-4",{"opacity-50 pointer-events-none":!Du.includes(l.id)&&!Mu.includes(l.id)})})]})})]}),p.jsx(ot.div,{className:"absolute inset-0 border-2 border-purple-500/0 rounded-lg pointer-events-none",animate:{borderColor:l.visible?"rgba(168, 85, 247, 0.2)":"rgba(168, 85, 247, 0)",scale:l.visible?1:.98},transition:{duration:.2}})]},l.id))]})]})})},UAe=["top","right","bottom","left"],Qc=Math.min,js=Math.max,o1=Math.round,wx=Math.floor,Bl=t=>({x:t,y:t}),$Ae={left:"right",right:"left",bottom:"top",top:"bottom"},HAe={start:"end",end:"start"};function hP(t,e,n){return js(t,Qc(e,n))}function Gl(t,e){return typeof t=="function"?t(e):t}function eu(t){return t.split("-")[0]}function Dg(t){return t.split("-")[1]}function FL(t){return t==="x"?"y":"x"}function BL(t){return t==="y"?"height":"width"}function xd(t){return["top","bottom"].includes(eu(t))?"y":"x"}function UL(t){return FL(xd(t))}function zAe(t,e,n){n===void 0&&(n=!1);const r=Dg(t),s=UL(t),i=BL(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=TE(o)),[o,TE(o)]}function VAe(t){const e=TE(t);return[fP(t),e,fP(e)]}function fP(t){return t.replace(/start|end/g,e=>HAe[e])}function WAe(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function GAe(t,e,n,r){const s=Dg(t);let i=WAe(eu(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(fP)))),i}function TE(t){return t.replace(/left|right|bottom|top/g,e=>$Ae[e])}function qAe(t){return{top:0,right:0,bottom:0,left:0,...t}}function $J(t){return typeof t!="number"?qAe(t):{top:t,right:t,bottom:t,left:t}}function NE(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function JF(t,e,n){let{reference:r,floating:s}=t;const i=xd(e),o=UL(e),a=BL(o),l=eu(e),c=i==="y",u=r.x+r.width/2-s.width/2,d=r.y+r.height/2-s.height/2,h=r[a]/2-s[a]/2;let f;switch(l){case"top":f={x:u,y:r.y-s.height};break;case"bottom":f={x:u,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:d};break;case"left":f={x:r.x-s.width,y:d};break;default:f={x:r.x,y:r.y}}switch(Dg(e)){case"start":f[o]-=h*(n&&c?-1:1);break;case"end":f[o]+=h*(n&&c?-1:1);break}return f}const KAe=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:u,y:d}=JF(c,r,l),h=r,f={},g=0;for(let y=0;y<a.length;y++){const{name:m,fn:b}=a[y],{x:v,y:_,data:E,reset:w}=await b({x:u,y:d,initialPlacement:r,placement:h,strategy:s,middlewareData:f,rects:c,platform:o,elements:{reference:t,floating:e}});u=v??u,d=_??d,f={...f,[m]:{...f[m],...E}},w&&g<=50&&(g++,typeof w=="object"&&(w.placement&&(h=w.placement),w.rects&&(c=w.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):w.rects),{x:u,y:d}=JF(c,h,l)),y=-1)}return{x:u,y:d,placement:h,strategy:s,middlewareData:f}};async function ng(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=Gl(e,t),g=$J(f),m=a[h?d==="floating"?"reference":"floating":d],b=NE(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(m)))==null||n?m:m.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),v=d==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,_=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),E=await(i.isElement==null?void 0:i.isElement(_))?await(i.getScale==null?void 0:i.getScale(_))||{x:1,y:1}:{x:1,y:1},w=NE(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:_,strategy:l}):v);return{top:(b.top-w.top+g.top)/E.y,bottom:(w.bottom-b.bottom+g.bottom)/E.y,left:(b.left-w.left+g.left)/E.x,right:(w.right-b.right+g.right)/E.x}}const YAe=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Gl(t,e)||{};if(c==null)return{};const d=$J(u),h={x:n,y:r},f=UL(s),g=BL(f),y=await o.getDimensions(c),m=f==="y",b=m?"top":"left",v=m?"bottom":"right",_=m?"clientHeight":"clientWidth",E=i.reference[g]+i.reference[f]-h[f]-i.floating[g],w=h[f]-i.reference[f],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let k=S?S[_]:0;(!k||!await(o.isElement==null?void 0:o.isElement(S)))&&(k=a.floating[_]||i.floating[g]);const x=E/2-w/2,I=k/2-y[g]/2-1,R=Qc(d[b],I),C=Qc(d[v],I),N=R,O=k-y[g]-C,P=k/2-y[g]/2+x,$=hP(N,P,O),ee=!l.arrow&&Dg(s)!=null&&P!==$&&i.reference[g]/2-(P<N?R:C)-y[g]/2<0,J=ee?P<N?P-N:P-O:0;return{[f]:h[f]+J,data:{[f]:$,centerOffset:P-$-J,...ee&&{alignmentOffset:J}},reset:ee}}}),XAe=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:y=!0,...m}=Gl(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const b=eu(s),v=xd(a),_=eu(a)===a,E=await(l.isRTL==null?void 0:l.isRTL(c.floating)),w=h||(_||!y?[TE(a)]:VAe(a)),S=g!=="none";!h&&S&&w.push(...GAe(a,y,g,E));const k=[a,...w],x=await ng(e,m),I=[];let R=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&I.push(x[b]),d){const P=zAe(s,o,E);I.push(x[P[0]],x[P[1]])}if(R=[...R,{placement:s,overflows:I}],!I.every(P=>P<=0)){var C,N;const P=(((C=i.flip)==null?void 0:C.index)||0)+1,$=k[P];if($)return{data:{index:P,overflows:R},reset:{placement:$}};let ee=(N=R.filter(J=>J.overflows[0]<=0).sort((J,Z)=>J.overflows[1]-Z.overflows[1])[0])==null?void 0:N.placement;if(!ee)switch(f){case"bestFit":{var O;const J=(O=R.filter(Z=>{if(S){const M=xd(Z.placement);return M===v||M==="y"}return!0}).map(Z=>[Z.placement,Z.overflows.filter(M=>M>0).reduce((M,F)=>M+F,0)]).sort((Z,M)=>Z[1]-M[1])[0])==null?void 0:O[0];J&&(ee=J);break}case"initialPlacement":ee=a;break}if(s!==ee)return{reset:{placement:ee}}}return{}}}};function ZF(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function QF(t){return UAe.some(e=>t[e]>=0)}const JAe=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Gl(t,e);switch(r){case"referenceHidden":{const i=await ng(e,{...s,elementContext:"reference"}),o=ZF(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:QF(o)}}}case"escaped":{const i=await ng(e,{...s,altBoundary:!0}),o=ZF(i,n.floating);return{data:{escapedOffsets:o,escaped:QF(o)}}}default:return{}}}}};async function ZAe(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=eu(n),a=Dg(n),l=xd(n)==="y",c=["left","top"].includes(o)?-1:1,u=i&&l?-1:1,d=Gl(e,t);let{mainAxis:h,crossAxis:f,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof g=="number"&&(f=a==="end"?g*-1:g),l?{x:f*u,y:h*c}:{x:h*c,y:f*u}}const QAe=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await ZAe(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},eTe=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:m=>{let{x:b,y:v}=m;return{x:b,y:v}}},...l}=Gl(t,e),c={x:n,y:r},u=await ng(e,l),d=xd(eu(s)),h=FL(d);let f=c[h],g=c[d];if(i){const m=h==="y"?"top":"left",b=h==="y"?"bottom":"right",v=f+u[m],_=f-u[b];f=hP(v,f,_)}if(o){const m=d==="y"?"top":"left",b=d==="y"?"bottom":"right",v=g+u[m],_=g-u[b];g=hP(v,g,_)}const y=a.fn({...e,[h]:f,[d]:g});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[h]:i,[d]:o}}}}}},tTe=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Gl(t,e),u={x:n,y:r},d=xd(s),h=FL(d);let f=u[h],g=u[d];const y=Gl(a,e),m=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(l){const _=h==="y"?"height":"width",E=i.reference[h]-i.floating[_]+m.mainAxis,w=i.reference[h]+i.reference[_]-m.mainAxis;f<E?f=E:f>w&&(f=w)}if(c){var b,v;const _=h==="y"?"width":"height",E=["top","left"].includes(eu(s)),w=i.reference[d]-i.floating[_]+(E&&((b=o.offset)==null?void 0:b[d])||0)+(E?0:m.crossAxis),S=i.reference[d]+i.reference[_]+(E?0:((v=o.offset)==null?void 0:v[d])||0)-(E?m.crossAxis:0);g<w?g=w:g>S&&(g=S)}return{[h]:f,[d]:g}}}},nTe=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Gl(t,e),u=await ng(e,c),d=eu(s),h=Dg(s),f=xd(s)==="y",{width:g,height:y}=i.floating;let m,b;d==="top"||d==="bottom"?(m=d,b=h===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(b=d,m=h==="end"?"top":"bottom");const v=y-u.top-u.bottom,_=g-u.left-u.right,E=Qc(y-u[m],v),w=Qc(g-u[b],_),S=!e.middlewareData.shift;let k=E,x=w;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(x=_),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(k=v),S&&!h){const R=js(u.left,0),C=js(u.right,0),N=js(u.top,0),O=js(u.bottom,0);f?x=g-2*(R!==0||C!==0?R+C:js(u.left,u.right)):k=y-2*(N!==0||O!==0?N+O:js(u.top,u.bottom))}await l({...e,availableWidth:x,availableHeight:k});const I=await o.getDimensions(a.floating);return g!==I.width||y!==I.height?{reset:{rects:!0}}:{}}}};function Nk(){return typeof window<"u"}function Mg(t){return HJ(t)?(t.nodeName||"").toLowerCase():"#document"}function to(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Zl(t){var e;return(e=(HJ(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function HJ(t){return Nk()?t instanceof Node||t instanceof to(t).Node:!1}function li(t){return Nk()?t instanceof Element||t instanceof to(t).Element:!1}function ql(t){return Nk()?t instanceof HTMLElement||t instanceof to(t).HTMLElement:!1}function eB(t){return!Nk()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof to(t).ShadowRoot}function Sv(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Pa(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function rTe(t){return["table","td","th"].includes(Mg(t))}function Pk(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function $L(t){const e=HL(),n=li(t)?Pa(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function sTe(t){let e=wd(t);for(;ql(e)&&!rg(e);){if($L(e))return e;if(Pk(e))return null;e=wd(e)}return null}function HL(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function rg(t){return["html","body","#document"].includes(Mg(t))}function Pa(t){return to(t).getComputedStyle(t)}function Ik(t){return li(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function wd(t){if(Mg(t)==="html")return t;const e=t.assignedSlot||t.parentNode||eB(t)&&t.host||Zl(t);return eB(e)?e.host:e}function zJ(t){const e=wd(t);return rg(e)?t.ownerDocument?t.ownerDocument.body:t.body:ql(e)&&Sv(e)?e:zJ(e)}function a1(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=zJ(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=to(s);if(i){const a=pP(o);return e.concat(o,o.visualViewport||[],Sv(s)?s:[],a&&n?a1(a):[])}return e.concat(s,a1(s,[],n))}function pP(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function VJ(t){const e=Pa(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=ql(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=o1(n)!==i||o1(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function zL(t){return li(t)?t:t.contextElement}function xm(t){const e=zL(t);if(!ql(e))return Bl(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=VJ(e);let o=(i?o1(n.width):n.width)/r,a=(i?o1(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const iTe=Bl(0);function WJ(t){const e=to(t);return!HL()||!e.visualViewport?iTe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function oTe(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==to(t)?!1:e}function bf(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=zL(t);let o=Bl(1);e&&(r?li(r)&&(o=xm(r)):o=xm(t));const a=oTe(i,n,r)?WJ(i):Bl(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,u=s.width/o.x,d=s.height/o.y;if(i){const h=to(i),f=r&&li(r)?to(r):r;let g=h,y=pP(g);for(;y&&r&&f!==g;){const m=xm(y),b=y.getBoundingClientRect(),v=Pa(y),_=b.left+(y.clientLeft+parseFloat(v.paddingLeft))*m.x,E=b.top+(y.clientTop+parseFloat(v.paddingTop))*m.y;l*=m.x,c*=m.y,u*=m.x,d*=m.y,l+=_,c+=E,g=to(y),y=pP(g)}}return NE({width:u,height:d,x:l,y:c})}function VL(t,e){const n=Ik(t).scrollLeft;return e?e.left+n:bf(Zl(t)).left+n}function GJ(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:VL(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function aTe(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=Zl(r),a=e?Pk(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=Bl(1);const u=Bl(0),d=ql(r);if((d||!d&&!i)&&((Mg(r)!=="body"||Sv(o))&&(l=Ik(r)),ql(r))){const f=bf(r);c=xm(r),u.x=f.x+r.clientLeft,u.y=f.y+r.clientTop}const h=o&&!d&&!i?GJ(o,l,!0):Bl(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:n.y*c.y-l.scrollTop*c.y+u.y+h.y}}function lTe(t){return Array.from(t.getClientRects())}function cTe(t){const e=Zl(t),n=Ik(t),r=t.ownerDocument.body,s=js(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=js(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+VL(t);const a=-n.scrollTop;return Pa(r).direction==="rtl"&&(o+=js(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function uTe(t,e){const n=to(t),r=Zl(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=HL();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}function dTe(t,e){const n=bf(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=ql(t)?xm(t):Bl(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:o,height:a,x:l,y:c}}function tB(t,e,n){let r;if(e==="viewport")r=uTe(t,n);else if(e==="document")r=cTe(Zl(t));else if(li(e))r=dTe(e,n);else{const s=WJ(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return NE(r)}function qJ(t,e){const n=wd(t);return n===e||!li(n)||rg(n)?!1:Pa(n).position==="fixed"||qJ(n,e)}function hTe(t,e){const n=e.get(t);if(n)return n;let r=a1(t,[],!1).filter(a=>li(a)&&Mg(a)!=="body"),s=null;const i=Pa(t).position==="fixed";let o=i?wd(t):t;for(;li(o)&&!rg(o);){const a=Pa(o),l=$L(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Sv(o)&&!l&&qJ(t,o))?r=r.filter(u=>u!==o):s=a,o=wd(o)}return e.set(t,r),r}function fTe(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Pk(e)?[]:hTe(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const d=tB(e,u,s);return c.top=js(d.top,c.top),c.right=Qc(d.right,c.right),c.bottom=Qc(d.bottom,c.bottom),c.left=js(d.left,c.left),c},tB(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function pTe(t){const{width:e,height:n}=VJ(t);return{width:e,height:n}}function mTe(t,e,n){const r=ql(e),s=Zl(e),i=n==="fixed",o=bf(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Bl(0);if(r||!r&&!i)if((Mg(e)!=="body"||Sv(s))&&(a=Ik(e)),r){const h=bf(e,!0,i,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else s&&(l.x=VL(s));const c=s&&!r&&!i?GJ(s,a):Bl(0),u=o.left+a.scrollLeft-l.x-c.x,d=o.top+a.scrollTop-l.y-c.y;return{x:u,y:d,width:o.width,height:o.height}}function OT(t){return Pa(t).position==="static"}function nB(t,e){if(!ql(t)||Pa(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Zl(t)===n&&(n=n.ownerDocument.body),n}function KJ(t,e){const n=to(t);if(Pk(t))return n;if(!ql(t)){let s=wd(t);for(;s&&!rg(s);){if(li(s)&&!OT(s))return s;s=wd(s)}return n}let r=nB(t,e);for(;r&&rTe(r)&&OT(r);)r=nB(r,e);return r&&rg(r)&&OT(r)&&!$L(r)?n:r||sTe(t)||n}const gTe=async function(t){const e=this.getOffsetParent||KJ,n=this.getDimensions,r=await n(t.floating);return{reference:mTe(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function bTe(t){return Pa(t).direction==="rtl"}const yTe={convertOffsetParentRelativeRectToViewportRelativeRect:aTe,getDocumentElement:Zl,getClippingRect:fTe,getOffsetParent:KJ,getElementRects:gTe,getClientRects:lTe,getDimensions:pTe,getScale:xm,isElement:li,isRTL:bTe};function YJ(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function vTe(t,e){let n=null,r;const s=Zl(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:u,top:d,width:h,height:f}=c;if(a||e(),!h||!f)return;const g=wx(d),y=wx(s.clientWidth-(u+h)),m=wx(s.clientHeight-(d+f)),b=wx(u),_={rootMargin:-g+"px "+-y+"px "+-m+"px "+-b+"px",threshold:js(0,Qc(1,l))||1};let E=!0;function w(S){const k=S[0].intersectionRatio;if(k!==l){if(!E)return o();k?o(!1,k):r=setTimeout(()=>{o(!1,1e-7)},1e3)}k===1&&!YJ(c,t.getBoundingClientRect())&&o(),E=!1}try{n=new IntersectionObserver(w,{..._,root:s.ownerDocument})}catch{n=new IntersectionObserver(w,_)}n.observe(t)}return o(!0),i}function XJ(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=zL(t),u=s||i?[...c?a1(c):[],...a1(e)]:[];u.forEach(b=>{s&&b.addEventListener("scroll",n,{passive:!0}),i&&b.addEventListener("resize",n)});const d=c&&a?vTe(c,n):null;let h=-1,f=null;o&&(f=new ResizeObserver(b=>{let[v]=b;v&&v.target===c&&f&&(f.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var _;(_=f)==null||_.observe(e)})),n()}),c&&!l&&f.observe(c),f.observe(e));let g,y=l?bf(t):null;l&&m();function m(){const b=bf(t);y&&!YJ(y,b)&&n(),y=b,g=requestAnimationFrame(m)}return n(),()=>{var b;u.forEach(v=>{s&&v.removeEventListener("scroll",n),i&&v.removeEventListener("resize",n)}),d?.(),(b=f)==null||b.disconnect(),f=null,l&&cancelAnimationFrame(g)}}const DT=ng,_Te=QAe,xTe=eTe,wTe=XAe,ETe=nTe,STe=JAe,rB=YAe,kTe=tTe,CTe=(t,e,n)=>{const r=new Map,s={platform:yTe,...n},i={...s.platform,_c:r};return KAe(t,e,{...s,platform:i})};var Qw=typeof document<"u"?T.useLayoutEffect:T.useEffect;function PE(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!PE(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!PE(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function JJ(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function sB(t,e){const n=JJ(t);return Math.round(e*n)/n}function MT(t){const e=T.useRef(t);return Qw(()=>{e.current=t}),e}function ZJ(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=T.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,f]=T.useState(r);PE(h,r)||f(r);const[g,y]=T.useState(null),[m,b]=T.useState(null),v=T.useCallback(Z=>{Z!==S.current&&(S.current=Z,y(Z))},[]),_=T.useCallback(Z=>{Z!==k.current&&(k.current=Z,b(Z))},[]),E=i||g,w=o||m,S=T.useRef(null),k=T.useRef(null),x=T.useRef(u),I=l!=null,R=MT(l),C=MT(s),N=MT(c),O=T.useCallback(()=>{if(!S.current||!k.current)return;const Z={placement:e,strategy:n,middleware:h};C.current&&(Z.platform=C.current),CTe(S.current,k.current,Z).then(M=>{const F={...M,isPositioned:N.current!==!1};P.current&&!PE(x.current,F)&&(x.current=F,Hm.flushSync(()=>{d(F)}))})},[h,e,n,C,N]);Qw(()=>{c===!1&&x.current.isPositioned&&(x.current.isPositioned=!1,d(Z=>({...Z,isPositioned:!1})))},[c]);const P=T.useRef(!1);Qw(()=>(P.current=!0,()=>{P.current=!1}),[]),Qw(()=>{if(E&&(S.current=E),w&&(k.current=w),E&&w){if(R.current)return R.current(E,w,O);O()}},[E,w,O,R,I]);const $=T.useMemo(()=>({reference:S,floating:k,setReference:v,setFloating:_}),[v,_]),ee=T.useMemo(()=>({reference:E,floating:w}),[E,w]),J=T.useMemo(()=>{const Z={position:n,left:0,top:0};if(!ee.floating)return Z;const M=sB(ee.floating,u.x),F=sB(ee.floating,u.y);return a?{...Z,transform:"translate("+M+"px, "+F+"px)",...JJ(ee.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:M,top:F}},[n,a,ee.floating,u.x,u.y]);return T.useMemo(()=>({...u,update:O,refs:$,elements:ee,floatingStyles:J}),[u,O,$,ee,J])}const ATe=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?rB({element:r.current,padding:s}).fn(n):{}:r?rB({element:r,padding:s}).fn(n):{}}}},WL=(t,e)=>({..._Te(t),options:[t,e]}),QJ=(t,e)=>({...xTe(t),options:[t,e]}),TTe=(t,e)=>({...kTe(t),options:[t,e]}),eZ=(t,e)=>({...wTe(t),options:[t,e]}),tZ=(t,e)=>({...ETe(t),options:[t,e]}),NTe=(t,e)=>({...STe(t),options:[t,e]}),PTe=(t,e)=>({...ATe(t),options:[t,e]});var ITe="Arrow",nZ=T.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return p.jsx(hn.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:p.jsx("polygon",{points:"0,0 30,0 15,10"})})});nZ.displayName=ITe;var RTe=nZ,GL="Popper",[rZ,jg]=Xo(GL),[LTe,sZ]=rZ(GL),iZ=t=>{const{__scopePopper:e,children:n}=t,[r,s]=T.useState(null);return p.jsx(LTe,{scope:e,anchor:r,onAnchorChange:s,children:n})};iZ.displayName=GL;var oZ="PopperAnchor",aZ=T.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=sZ(oZ,n),o=T.useRef(null),a=Un(e,o);return T.useEffect(()=>{i.onAnchorChange(r?.current||o.current)}),r?null:p.jsx(hn.div,{...s,ref:a})});aZ.displayName=oZ;var qL="PopperContent",[OTe,DTe]=rZ(qL),lZ=T.forwardRef((t,e)=>{const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:f="optimized",onPlaced:g,...y}=t,m=sZ(qL,n),[b,v]=T.useState(null),_=Un(e,te=>v(te)),[E,w]=T.useState(null),S=$q(E),k=S?.width??0,x=S?.height??0,I=r+(i!=="center"?"-"+i:""),R=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},C=Array.isArray(c)?c:[c],N=C.length>0,O={padding:R,boundary:C.filter(jTe),altBoundary:N},{refs:P,floatingStyles:$,placement:ee,isPositioned:J,middlewareData:Z}=ZJ({strategy:"fixed",placement:I,whileElementsMounted:(...te)=>XJ(...te,{animationFrame:f==="always"}),elements:{reference:m.anchor},middleware:[WL({mainAxis:s+x,alignmentAxis:o}),l&&QJ({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?TTe():void 0,...O}),l&&eZ({...O}),tZ({...O,apply:({elements:te,rects:Y,availableWidth:de,availableHeight:ye})=>{const{width:Se,height:Te}=Y.reference,ke=te.floating.style;ke.setProperty("--radix-popper-available-width",`${de}px`),ke.setProperty("--radix-popper-available-height",`${ye}px`),ke.setProperty("--radix-popper-anchor-width",`${Se}px`),ke.setProperty("--radix-popper-anchor-height",`${Te}px`)}}),E&&PTe({element:E,padding:a}),FTe({arrowWidth:k,arrowHeight:x}),h&&NTe({strategy:"referenceHidden",...O})]}),[M,F]=dZ(ee),G=Vr(g);Yc(()=>{J&&G?.()},[J,G]);const D=Z.arrow?.x,j=Z.arrow?.y,V=Z.arrow?.centerOffset!==0,[W,re]=T.useState();return Yc(()=>{b&&re(window.getComputedStyle(b).zIndex)},[b]),p.jsx("div",{ref:P.setFloating,"data-radix-popper-content-wrapper":"",style:{...$,transform:J?$.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:W,"--radix-popper-transform-origin":[Z.transformOrigin?.x,Z.transformOrigin?.y].join(" "),...Z.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:p.jsx(OTe,{scope:n,placedSide:M,onArrowChange:w,arrowX:D,arrowY:j,shouldHideArrow:V,children:p.jsx(hn.div,{"data-side":M,"data-align":F,...y,ref:_,style:{...y.style,animation:J?void 0:"none"}})})})});lZ.displayName=qL;var cZ="PopperArrow",MTe={top:"bottom",right:"left",bottom:"top",left:"right"},uZ=T.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=DTe(cZ,r),o=MTe[i.placedSide];return p.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:p.jsx(RTe,{...s,ref:n,style:{...s.style,display:"block"}})})});uZ.displayName=cZ;function jTe(t){return t!==null}var FTe=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:r,middlewareData:s}=e,o=s.arrow?.centerOffset!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=dZ(n),d={start:"0%",center:"50%",end:"100%"}[u],h=(s.arrow?.x??0)+a/2,f=(s.arrow?.y??0)+l/2;let g="",y="";return c==="bottom"?(g=o?d:`${h}px`,y=`${-l}px`):c==="top"?(g=o?d:`${h}px`,y=`${r.floating.height+l}px`):c==="right"?(g=`${-l}px`,y=o?d:`${f}px`):c==="left"&&(g=`${r.floating.width+l}px`,y=o?d:`${f}px`),{data:{x:g,y}}}});function dZ(t){const[e,n="center"]=t.split("-");return[e,n]}var KL=iZ,Rk=aZ,YL=lZ,XL=uZ,BTe="VisuallyHidden",hZ=T.forwardRef((t,e)=>p.jsx(hn.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));hZ.displayName=BTe;var UTe=hZ,[Lk,qht]=Xo("Tooltip",[jg]),Ok=jg(),fZ="TooltipProvider",$Te=700,mP="tooltip.open",[HTe,JL]=Lk(fZ),IE=t=>{const{__scopeTooltip:e,delayDuration:n=$Te,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,[o,a]=T.useState(!0),l=T.useRef(!1),c=T.useRef(0);return T.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),p.jsx(HTe,{scope:e,isOpenDelayed:o,delayDuration:n,onOpen:T.useCallback(()=>{window.clearTimeout(c.current),a(!1)},[]),onClose:T.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a(!0),r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:T.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:i})};IE.displayName=fZ;var Dk="Tooltip",[zTe,kv]=Lk(Dk),pZ=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s=!1,onOpenChange:i,disableHoverableContent:o,delayDuration:a}=t,l=JL(Dk,t.__scopeTooltip),c=Ok(e),[u,d]=T.useState(null),h=Vc(),f=T.useRef(0),g=o??l.disableHoverableContent,y=a??l.delayDuration,m=T.useRef(!1),[b=!1,v]=Bf({prop:r,defaultProp:s,onChange:k=>{k?(l.onOpen(),document.dispatchEvent(new CustomEvent(mP))):l.onClose(),i?.(k)}}),_=T.useMemo(()=>b?m.current?"delayed-open":"instant-open":"closed",[b]),E=T.useCallback(()=>{window.clearTimeout(f.current),f.current=0,m.current=!1,v(!0)},[v]),w=T.useCallback(()=>{window.clearTimeout(f.current),f.current=0,v(!1)},[v]),S=T.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>{m.current=!0,v(!0),f.current=0},y)},[y,v]);return T.useEffect(()=>()=>{f.current&&(window.clearTimeout(f.current),f.current=0)},[]),p.jsx(KL,{...c,children:p.jsx(zTe,{scope:e,contentId:h,open:b,stateAttribute:_,trigger:u,onTriggerChange:d,onTriggerEnter:T.useCallback(()=>{l.isOpenDelayed?S():E()},[l.isOpenDelayed,S,E]),onTriggerLeave:T.useCallback(()=>{g?w():(window.clearTimeout(f.current),f.current=0)},[w,g]),onOpen:E,onClose:w,disableHoverableContent:g,children:n})})};pZ.displayName=Dk;var gP="TooltipTrigger",mZ=T.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=kv(gP,n),i=JL(gP,n),o=Ok(n),a=T.useRef(null),l=Un(e,a,s.onTriggerChange),c=T.useRef(!1),u=T.useRef(!1),d=T.useCallback(()=>c.current=!1,[]);return T.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),p.jsx(Rk,{asChild:!0,...o,children:p.jsx(hn.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:Nt(t.onPointerMove,h=>{h.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),u.current=!0)}),onPointerLeave:Nt(t.onPointerLeave,()=>{s.onTriggerLeave(),u.current=!1}),onPointerDown:Nt(t.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:Nt(t.onFocus,()=>{c.current||s.onOpen()}),onBlur:Nt(t.onBlur,s.onClose),onClick:Nt(t.onClick,s.onClose)})})});mZ.displayName=gP;var ZL="TooltipPortal",[VTe,WTe]=Lk(ZL,{forceMount:void 0}),gZ=t=>{const{__scopeTooltip:e,forceMount:n,children:r,container:s}=t,i=kv(ZL,e);return p.jsx(VTe,{scope:e,forceMount:n,children:p.jsx(Ss,{present:n||i.open,children:p.jsx(_v,{asChild:!0,container:s,children:r})})})};gZ.displayName=ZL;var sg="TooltipContent",bZ=T.forwardRef((t,e)=>{const n=WTe(sg,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=kv(sg,t.__scopeTooltip);return p.jsx(Ss,{present:r||o.open,children:o.disableHoverableContent?p.jsx(yZ,{side:s,...i,ref:e}):p.jsx(GTe,{side:s,...i,ref:e})})}),GTe=T.forwardRef((t,e)=>{const n=kv(sg,t.__scopeTooltip),r=JL(sg,t.__scopeTooltip),s=T.useRef(null),i=Un(e,s),[o,a]=T.useState(null),{trigger:l,onClose:c}=n,u=s.current,{onPointerInTransitChange:d}=r,h=T.useCallback(()=>{a(null),d(!1)},[d]),f=T.useCallback((g,y)=>{const m=g.currentTarget,b={x:g.clientX,y:g.clientY},v=YTe(b,m.getBoundingClientRect()),_=XTe(b,v),E=JTe(y.getBoundingClientRect()),w=QTe([..._,...E]);a(w),d(!0)},[d]);return T.useEffect(()=>()=>h(),[h]),T.useEffect(()=>{if(l&&u){const g=m=>f(m,u),y=m=>f(m,l);return l.addEventListener("pointerleave",g),u.addEventListener("pointerleave",y),()=>{l.removeEventListener("pointerleave",g),u.removeEventListener("pointerleave",y)}}},[l,u,f,h]),T.useEffect(()=>{if(o){const g=y=>{const m=y.target,b={x:y.clientX,y:y.clientY},v=l?.contains(m)||u?.contains(m),_=!ZTe(b,o);v?h():_&&(h(),c())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[l,u,o,c,h]),p.jsx(yZ,{...t,ref:i})}),[qTe,KTe]=Lk(Dk,{isInside:!1}),yZ=T.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,l=kv(sg,n),c=Ok(n),{onClose:u}=l;return T.useEffect(()=>(document.addEventListener(mP,u),()=>document.removeEventListener(mP,u)),[u]),T.useEffect(()=>{if(l.trigger){const d=h=>{h.target?.contains(l.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,u]),p.jsx(vv,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:p.jsxs(YL,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[p.jsx(uq,{children:r}),p.jsx(qTe,{scope:n,isInside:!0,children:p.jsx(UTe,{id:l.contentId,role:"tooltip",children:s||r})})]})})});bZ.displayName=sg;var vZ="TooltipArrow",_Z=T.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Ok(n);return KTe(vZ,n).isInside?null:p.jsx(XL,{...s,...r,ref:e})});_Z.displayName=vZ;function YTe(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function XTe(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function JTe(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function ZTe(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,l=e[i].y,c=e[o].x,u=e[o].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(s=!s)}return s}function QTe(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),e5e(e)}function e5e(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var QL=IE,eO=pZ,tO=mZ,nO=gZ,rO=bZ,sO=_Z;const t5e=({tab:t,onClick:e,isActive:n,hasUpdate:r,statusMessage:s,description:i,isLoading:o,className:a,children:l})=>p.jsx(QL,{delayDuration:200,children:p.jsx(eO,{children:p.jsx(tO,{asChild:!0,children:p.jsxs(ot.div,{onClick:e,className:Pe("relative flex flex-col items-center p-6 rounded-xl","w-full h-full min-h-[160px]","bg-white dark:bg-[#141414]","border border-[#E5E5E5] dark:border-[#333333]","group","hover:bg-purple-50 dark:hover:bg-[#1a1a1a]","hover:border-purple-200 dark:hover:border-purple-900/30",n?"border-purple-500 dark:border-purple-500/50 bg-purple-500/5 dark:bg-purple-500/10":"",o?"cursor-wait opacity-70":"",a||""),children:[p.jsxs("div",{className:"flex flex-col items-center justify-center flex-1 w-full",children:[p.jsx(ot.div,{className:Pe("relative","w-14 h-14","flex items-center justify-center","rounded-xl","bg-gray-100 dark:bg-gray-800","ring-1 ring-gray-200 dark:ring-gray-700","group-hover:bg-purple-100 dark:group-hover:bg-gray-700/80","group-hover:ring-purple-200 dark:group-hover:ring-purple-800/30",n?"bg-purple-500/10 dark:bg-purple-500/10 ring-purple-500/30 dark:ring-purple-500/20":""),children:p.jsx(ot.div,{className:Pe(fAe[t.id],"w-8 h-8","text-gray-600 dark:text-gray-300","group-hover:text-purple-500 dark:group-hover:text-purple-400/80",n?"text-purple-500 dark:text-purple-400/90":"")})}),p.jsxs("div",{className:"flex flex-col items-center mt-5 w-full",children:[p.jsx("h3",{className:Pe("text-[15px] font-medium leading-snug mb-2","text-gray-700 dark:text-gray-200","group-hover:text-purple-600 dark:group-hover:text-purple-300/90",n?"text-purple-500 dark:text-purple-400/90":""),children:Jb[t.id]}),i&&p.jsx("p",{className:Pe("text-[13px] leading-relaxed","text-gray-500 dark:text-gray-400","max-w-[85%]","text-center","group-hover:text-purple-500 dark:group-hover:text-purple-400/70",n?"text-purple-400 dark:text-purple-400/80":""),children:i})]})]}),r&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"absolute top-4 right-4 w-2 h-2 rounded-full bg-purple-500 dark:bg-purple-400 animate-pulse"}),p.jsx(nO,{children:p.jsxs(rO,{className:Pe("px-3 py-1.5 rounded-lg","bg-[#18181B] text-white","text-sm font-medium","select-none","z-[100]"),side:"top",sideOffset:5,children:[s,p.jsx(sO,{className:"fill-[#18181B]"})]})})]}),l]})})})});function n5e(t,e){const n=t.replace(/^v/,""),r=e.replace(/^v/,""),s=n.split(".").map(Number),i=r.split(".").map(Number);for(let o=0;o<Math.max(s.length,i.length);o++){const a=s[o]||0,l=i[o]||0;if(a!==l)return a-l}return 0}const iB=async()=>{try{const t=await fetch("/package.json");if(!t.ok)throw new Error("Failed to fetch local package.json");const e=await t.json();if(!e.version||typeof e.version!="string")throw new Error("Invalid package.json format: missing or invalid version");const n=e.version,r=await fetch("https://raw.githubusercontent.com/stackblitz-labs/bolt.diy/main/package.json");if(!r.ok)throw new Error(`Failed to fetch latest package.json: ${r.status}`);const s=await r.json();if(!s.version||typeof s.version!="string")throw new Error("Invalid remote package.json format: missing or invalid version");const i=s.version,o=n5e(i,n)>0;return{available:o,version:i,releaseNotes:o?"Update available. Check GitHub for release notes.":void 0}}catch(t){console.error("Error checking for updates:",t);const e=t instanceof Error?t.message:"Unknown error occurred";return{available:!1,version:"unknown",error:{type:e.toLowerCase().includes("network")||e.toLowerCase().includes("fetch")?"network":"unknown",message:`Failed to check for updates: ${e}`}}}},r5e=async t=>{try{localStorage.setItem("last_acknowledged_update",t)}catch(e){console.error("Failed to store acknowledged version:",e)}},oB="bolt_last_acknowledged_version",xZ=()=>{const[t,e]=T.useState(!1),[n,r]=T.useState(""),[s,i]=T.useState(()=>{try{return localStorage.getItem(oB)}catch{return null}});return T.useEffect(()=>{const a=async()=>{try{const{available:c,version:u}=await iB();r(u),e(c&&u!==s)}catch(c){console.error("Failed to check for updates:",c)}};a();const l=setInterval(a,30*60*1e3);return()=>clearInterval(l)},[s]),{hasUpdate:t,currentVersion:n,acknowledgeUpdate:async()=>{try{const{version:a}=await iB();await r5e(a);try{localStorage.setItem(oB,a)}catch(l){console.error("Failed to persist acknowledged version:",l)}i(a),e(!1)}catch(a){console.error("Failed to acknowledge update:",a)}}}},s5e=async()=>[{id:"feature-1",name:"Dark Mode",description:"Enable dark mode for better night viewing",viewed:!0,releaseDate:"2024-03-15"},{id:"feature-2",name:"Tab Management",description:"Customize your tab layout",viewed:!1,releaseDate:"2024-03-20"}],aB=async t=>{console.log(`Marking feature ${t} as viewed`)},wZ="bolt_viewed_features",i5e=()=>{try{const t=localStorage.getItem(wZ);return t?JSON.parse(t):[]}catch{return[]}},lB=t=>{try{localStorage.setItem(wZ,JSON.stringify(t))}catch(e){console.error("Failed to persist viewed features:",e)}},o5e=()=>{const[t,e]=T.useState(!1),[n,r]=T.useState([]),[s,i]=T.useState(()=>i5e());return T.useEffect(()=>{(async()=>{try{const u=(await s5e()).filter(d=>!s.includes(d.id));r(u),e(u.length>0)}catch(c){console.error("Failed to check for new features:",c)}})()},[s]),{hasNewFeatures:t,unviewedFeatures:n,acknowledgeFeature:async l=>{try{await aB(l);const c=[...s,l];i(c),lB(c),r(u=>u.filter(d=>d.id!==l)),e(n.length>1)}catch(c){console.error("Failed to acknowledge feature:",c)}},acknowledgeAllFeatures:async()=>{try{await Promise.all(n.map(c=>aB(c.id)));const l=[...s,...n.map(c=>c.id)];i(l),lB(l),r([]),e(!1)}catch(l){console.error("Failed to acknowledge all features:",l)}}}},cB=async()=>Object.values(Lt.logs.get()).filter(e=>e.category!=="system").map(e=>({id:e.id,title:e.details?.title||e.message.split(`
`)[0],message:e.message,type:e.level,timestamp:e.timestamp,read:Lt.isRead(e.id),details:e.details})).sort((e,n)=>new Date(n.timestamp).getTime()-new Date(e.timestamp).getTime()),uB=async t=>{Lt.markAsRead(t)},a5e=()=>{const[t,e]=T.useState(!1),[n,r]=T.useState([]),s=It(Lt.logs),i=async()=>{try{const c=(await cB()).filter(u=>!Lt.isRead(u.id));r(c),e(c.length>0)}catch(l){console.error("Failed to check notifications:",l)}};return T.useEffect(()=>{i();const l=setInterval(i,60*1e3);return()=>clearInterval(l)},[s]),{hasUnreadNotifications:t,unreadNotifications:n,markAsRead:async l=>{try{await uB(l),await i()}catch(c){console.error("Failed to mark notification as read:",c)}},markAllAsRead:async()=>{try{const l=await cB();await Promise.all(l.map(c=>uB(c.id))),await i()}catch(l){console.error("Failed to mark all notifications as read:",l)}}}},l5e=async()=>{try{if(!navigator.onLine)return{connected:!1,latency:0,lastChecked:new Date().toISOString()};const e=["/api/health","/","/favicon.ico"];let n=0,r=!1;for(const s of e)try{const i=performance.now(),o=await fetch(s,{method:"HEAD",cache:"no-cache"}),a=performance.now();if(o.ok){n=Math.round(a-i),r=!0;break}}catch(i){console.debug(`Failed to connect to ${s}:`,i);continue}return{connected:r,latency:n,lastChecked:new Date().toISOString()}}catch(t){return console.error("Connection check failed:",t),{connected:!1,latency:0,lastChecked:new Date().toISOString()}}},c5e="bolt_acknowledged_connection_issue",u5e=()=>{try{return localStorage.getItem(c5e)}catch{return null}},d5e=()=>{const[t,e]=T.useState(!1),[n,r]=T.useState(null),[s,i]=T.useState(()=>u5e()),o=async()=>{try{const c=await l5e(),u=c.connected?c.latency>1e3?"high-latency":null:"disconnected";r(u),e(u!==null&&u!==s)}catch(c){console.error("Failed to check connection:",c),r("disconnected"),e(!0)}};return T.useEffect(()=>{o();const c=setInterval(o,10*1e3);return()=>clearInterval(c)},[s]),{hasConnectionIssues:t,currentIssue:n,acknowledgeIssue:()=>{i(n),i(n),e(!1)},resetAcknowledgment:()=>{i(null),i(null),o()}}},RE=new Set,h5e=async()=>{const t={warnings:[],errors:[]};try{if(performance&&"memory"in performance){const n=performance.memory;n.usedJSHeapSize>n.jsHeapSizeLimit*.8&&t.warnings.push({id:"high-memory-usage",message:"High memory usage detected",type:"warning",timestamp:new Date().toISOString(),details:{used:n.usedJSHeapSize,total:n.jsHeapSizeLimit}})}if(navigator.storage&&navigator.storage.estimate){const n=await navigator.storage.estimate();(n.usage||0)/(n.quota||1)>.9&&t.warnings.push({id:"storage-quota-warning",message:"Storage quota nearly reached",type:"warning",timestamp:new Date().toISOString(),details:{used:n.usage,quota:n.quota}})}const e=localStorage.getItem("error_logs");return e&&JSON.parse(e).forEach(r=>{t.errors.push({id:`error-${r.timestamp}`,message:r.message,type:"error",timestamp:r.timestamp,details:r.details})}),t.warnings=t.warnings.filter(n=>!RE.has(n.id)),t.errors=t.errors.filter(n=>!RE.has(n.id)),t}catch(e){return console.error("Error getting debug status:",e),t}},dB=async t=>{RE.add(t)},hB=async t=>{RE.add(t);try{const e=localStorage.getItem("error_logs");if(e){const r=JSON.parse(e).filter(s=>`error-${s.timestamp}`!==t);localStorage.setItem("error_logs",JSON.stringify(r))}}catch(e){console.error("Error acknowledging error:",e)}},EZ="bolt_acknowledged_debug_issues",f5e=()=>{try{const t=localStorage.getItem(EZ);return t?JSON.parse(t):[]}catch{return[]}},fB=t=>{try{localStorage.setItem(EZ,JSON.stringify(t))}catch(e){console.error("Failed to persist acknowledged debug issues:",e)}},p5e=()=>{const[t,e]=T.useState(!1),[n,r]=T.useState([]),[s,i]=T.useState(()=>f5e()),o=async()=>{try{const c=await h5e(),u=[...c.warnings.map(d=>({...d,type:"warning"})),...c.errors.map(d=>({...d,type:"error"}))].filter(d=>!s.includes(d.id));r(u),e(u.length>0)}catch(c){console.error("Failed to check debug status:",c)}};return T.useEffect(()=>{o();const c=setInterval(o,5*1e3);return()=>clearInterval(c)},[s]),{hasActiveWarnings:t,activeIssues:n,acknowledgeIssue:async c=>{try{c.type==="warning"?await dB(c.id):await hB(c.id);const u=[...s,c.id];i(u),fB(u),r(d=>d.filter(h=>h.id!==c.id)),e(n.length>1)}catch(u){console.error("Failed to acknowledge issue:",u)}},acknowledgeAllIssues:async()=>{try{await Promise.all(n.map(u=>u.type==="warning"?dB(u.id):hB(u.id)));const c=[...s,...n.map(u=>u.id)];i(c),fB(c),r([]),e(!1)}catch(c){console.error("Failed to acknowledge all issues:",c)}}}},pB=typeof window<"u"?localStorage.getItem("bolt_profile"):null,m5e=pB?JSON.parse(pB):{username:"",bio:"",avatar:""},ld=tr(m5e),jT=t=>{ld.set({...ld.get(),...t}),typeof window<"u"&&localStorage.setItem("bolt_profile",JSON.stringify(ld.get()))};function SZ(t){const e=t+"CollectionProvider",[n,r]=Xo(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=f=>{const{scope:g,children:y}=f,m=ut.useRef(null),b=ut.useRef(new Map).current;return p.jsx(s,{scope:g,itemMap:b,collectionRef:m,children:y})};o.displayName=e;const a=t+"CollectionSlot",l=ut.forwardRef((f,g)=>{const{scope:y,children:m}=f,b=i(a,y),v=Un(g,b.collectionRef);return p.jsx(uf,{ref:v,children:m})});l.displayName=a;const c=t+"CollectionItemSlot",u="data-radix-collection-item",d=ut.forwardRef((f,g)=>{const{scope:y,children:m,...b}=f,v=ut.useRef(null),_=Un(g,v),E=i(c,y);return ut.useEffect(()=>(E.itemMap.set(v,{ref:v,...b}),()=>void E.itemMap.delete(v))),p.jsx(uf,{[u]:"",ref:_,children:m})});d.displayName=c;function h(f){const g=i(t+"CollectionConsumer",f);return ut.useCallback(()=>{const m=g.collectionRef.current;if(!m)return[];const b=Array.from(m.querySelectorAll(`[${u}]`));return Array.from(g.itemMap.values()).sort((E,w)=>b.indexOf(E.ref.current)-b.indexOf(w.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},h,r]}var g5e=T.createContext(void 0);function iO(t){const e=T.useContext(g5e);return t||e||"ltr"}var FT="rovingFocusGroup.onEntryFocus",b5e={bubbles:!1,cancelable:!0},Mk="RovingFocusGroup",[bP,kZ,y5e]=SZ(Mk),[v5e,CZ]=Xo(Mk,[y5e]),[_5e,x5e]=v5e(Mk),AZ=T.forwardRef((t,e)=>p.jsx(bP.Provider,{scope:t.__scopeRovingFocusGroup,children:p.jsx(bP.Slot,{scope:t.__scopeRovingFocusGroup,children:p.jsx(w5e,{...t,ref:e})})}));AZ.displayName=Mk;var w5e=T.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=t,h=T.useRef(null),f=Un(e,h),g=iO(i),[y=null,m]=Bf({prop:o,defaultProp:a,onChange:l}),[b,v]=T.useState(!1),_=Vr(c),E=kZ(n),w=T.useRef(!1),[S,k]=T.useState(0);return T.useEffect(()=>{const x=h.current;if(x)return x.addEventListener(FT,_),()=>x.removeEventListener(FT,_)},[_]),p.jsx(_5e,{scope:n,orientation:r,dir:g,loop:s,currentTabStopId:y,onItemFocus:T.useCallback(x=>m(x),[m]),onItemShiftTab:T.useCallback(()=>v(!0),[]),onFocusableItemAdd:T.useCallback(()=>k(x=>x+1),[]),onFocusableItemRemove:T.useCallback(()=>k(x=>x-1),[]),children:p.jsx(hn.div,{tabIndex:b||S===0?-1:0,"data-orientation":r,...d,ref:f,style:{outline:"none",...t.style},onMouseDown:Nt(t.onMouseDown,()=>{w.current=!0}),onFocus:Nt(t.onFocus,x=>{const I=!w.current;if(x.target===x.currentTarget&&I&&!b){const R=new CustomEvent(FT,b5e);if(x.currentTarget.dispatchEvent(R),!R.defaultPrevented){const C=E().filter(ee=>ee.focusable),N=C.find(ee=>ee.active),O=C.find(ee=>ee.id===y),$=[N,O,...C].filter(Boolean).map(ee=>ee.ref.current);PZ($,u)}}w.current=!1}),onBlur:Nt(t.onBlur,()=>v(!1))})})}),TZ="RovingFocusGroupItem",NZ=T.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,...o}=t,a=Vc(),l=i||a,c=x5e(TZ,n),u=c.currentTabStopId===l,d=kZ(n),{onFocusableItemAdd:h,onFocusableItemRemove:f}=c;return T.useEffect(()=>{if(r)return h(),()=>f()},[r,h,f]),p.jsx(bP.ItemSlot,{scope:n,id:l,focusable:r,active:s,children:p.jsx(hn.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...o,ref:e,onMouseDown:Nt(t.onMouseDown,g=>{r?c.onItemFocus(l):g.preventDefault()}),onFocus:Nt(t.onFocus,()=>c.onItemFocus(l)),onKeyDown:Nt(t.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){c.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const y=k5e(g,c.orientation,c.dir);if(y!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let b=d().filter(v=>v.focusable).map(v=>v.ref.current);if(y==="last")b.reverse();else if(y==="prev"||y==="next"){y==="prev"&&b.reverse();const v=b.indexOf(g.currentTarget);b=c.loop?C5e(b,v+1):b.slice(v+1)}setTimeout(()=>PZ(b))}})})})});NZ.displayName=TZ;var E5e={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function S5e(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function k5e(t,e,n){const r=S5e(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return E5e[r]}function PZ(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function C5e(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var A5e=AZ,T5e=NZ,yP=["Enter"," "],N5e=["ArrowDown","PageUp","Home"],IZ=["ArrowUp","PageDown","End"],P5e=[...N5e,...IZ],I5e={ltr:[...yP,"ArrowRight"],rtl:[...yP,"ArrowLeft"]},R5e={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Cv="Menu",[l1,L5e,O5e]=SZ(Cv),[$f,jk]=Xo(Cv,[O5e,jg,CZ]),Fk=jg(),RZ=CZ(),[D5e,Hf]=$f(Cv),[M5e,Av]=$f(Cv),LZ=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:i,modal:o=!0}=t,a=Fk(e),[l,c]=T.useState(null),u=T.useRef(!1),d=Vr(i),h=iO(s);return T.useEffect(()=>{const f=()=>{u.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>u.current=!1;return document.addEventListener("keydown",f,{capture:!0}),()=>{document.removeEventListener("keydown",f,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),p.jsx(KL,{...a,children:p.jsx(D5e,{scope:e,open:n,onOpenChange:d,content:l,onContentChange:c,children:p.jsx(M5e,{scope:e,onClose:T.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:h,modal:o,children:r})})})};LZ.displayName=Cv;var j5e="MenuAnchor",oO=T.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=Fk(n);return p.jsx(Rk,{...s,...r,ref:e})});oO.displayName=j5e;var aO="MenuPortal",[F5e,OZ]=$f(aO,{forceMount:void 0}),DZ=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,i=Hf(aO,e);return p.jsx(F5e,{scope:e,forceMount:n,children:p.jsx(Ss,{present:n||i.open,children:p.jsx(_v,{asChild:!0,container:s,children:r})})})};DZ.displayName=aO;var Bo="MenuContent",[B5e,lO]=$f(Bo),MZ=T.forwardRef((t,e)=>{const n=OZ(Bo,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=Hf(Bo,t.__scopeMenu),o=Av(Bo,t.__scopeMenu);return p.jsx(l1.Provider,{scope:t.__scopeMenu,children:p.jsx(Ss,{present:r||i.open,children:p.jsx(l1.Slot,{scope:t.__scopeMenu,children:o.modal?p.jsx(U5e,{...s,ref:e}):p.jsx($5e,{...s,ref:e})})})})}),U5e=T.forwardRef((t,e)=>{const n=Hf(Bo,t.__scopeMenu),r=T.useRef(null),s=Un(e,r);return T.useEffect(()=>{const i=r.current;if(i)return HR(i)},[]),p.jsx(cO,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Nt(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),$5e=T.forwardRef((t,e)=>{const n=Hf(Bo,t.__scopeMenu);return p.jsx(cO,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),cO=T.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:f,disableOutsideScroll:g,...y}=t,m=Hf(Bo,n),b=Av(Bo,n),v=Fk(n),_=RZ(n),E=L5e(n),[w,S]=T.useState(null),k=T.useRef(null),x=Un(e,k,m.onContentChange),I=T.useRef(0),R=T.useRef(""),C=T.useRef(0),N=T.useRef(null),O=T.useRef("right"),P=T.useRef(0),$=g?gk:T.Fragment,ee=g?{as:uf,allowPinchZoom:!0}:void 0,J=M=>{const F=R.current+M,G=E().filter(te=>!te.disabled),D=document.activeElement,j=G.find(te=>te.ref.current===D)?.textValue,V=G.map(te=>te.textValue),W=Q5e(V,F,j),re=G.find(te=>te.textValue===W)?.ref.current;(function te(Y){R.current=Y,window.clearTimeout(I.current),Y!==""&&(I.current=window.setTimeout(()=>te(""),1e3))})(F),re&&setTimeout(()=>re.focus())};T.useEffect(()=>()=>window.clearTimeout(I.current),[]),$R();const Z=T.useCallback(M=>O.current===N.current?.side&&t3e(M,N.current?.area),[]);return p.jsx(B5e,{scope:n,searchRef:R,onItemEnter:T.useCallback(M=>{Z(M)&&M.preventDefault()},[Z]),onItemLeave:T.useCallback(M=>{Z(M)||(k.current?.focus(),S(null))},[Z]),onTriggerLeave:T.useCallback(M=>{Z(M)&&M.preventDefault()},[Z]),pointerGraceTimerRef:C,onPointerGraceIntentChange:T.useCallback(M=>{N.current=M},[]),children:p.jsx($,{...ee,children:p.jsx(pk,{asChild:!0,trapped:s,onMountAutoFocus:Nt(i,M=>{M.preventDefault(),k.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:p.jsx(vv,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:f,children:p.jsx(A5e,{asChild:!0,..._,dir:b.dir,orientation:"vertical",loop:r,currentTabStopId:w,onCurrentTabStopIdChange:S,onEntryFocus:Nt(l,M=>{b.isUsingKeyboardRef.current||M.preventDefault()}),preventScrollOnEntryFocus:!0,children:p.jsx(YL,{role:"menu","aria-orientation":"vertical","data-state":ZZ(m.open),"data-radix-menu-content":"",dir:b.dir,...v,...y,ref:x,style:{outline:"none",...y.style},onKeyDown:Nt(y.onKeyDown,M=>{const G=M.target.closest("[data-radix-menu-content]")===M.currentTarget,D=M.ctrlKey||M.altKey||M.metaKey,j=M.key.length===1;G&&(M.key==="Tab"&&M.preventDefault(),!D&&j&&J(M.key));const V=k.current;if(M.target!==V||!P5e.includes(M.key))return;M.preventDefault();const re=E().filter(te=>!te.disabled).map(te=>te.ref.current);IZ.includes(M.key)&&re.reverse(),J5e(re)}),onBlur:Nt(t.onBlur,M=>{M.currentTarget.contains(M.target)||(window.clearTimeout(I.current),R.current="")}),onPointerMove:Nt(t.onPointerMove,c1(M=>{const F=M.target,G=P.current!==M.clientX;if(M.currentTarget.contains(F)&&G){const D=M.clientX>P.current?"right":"left";O.current=D,P.current=M.clientX}}))})})})})})})});MZ.displayName=Bo;var H5e="MenuGroup",uO=T.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return p.jsx(hn.div,{role:"group",...r,ref:e})});uO.displayName=H5e;var z5e="MenuLabel",jZ=T.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return p.jsx(hn.div,{...r,ref:e})});jZ.displayName=z5e;var LE="MenuItem",mB="menu.itemSelect",Bk=T.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,i=T.useRef(null),o=Av(LE,t.__scopeMenu),a=lO(LE,t.__scopeMenu),l=Un(e,i),c=T.useRef(!1),u=()=>{const d=i.current;if(!n&&d){const h=new CustomEvent(mB,{bubbles:!0,cancelable:!0});d.addEventListener(mB,f=>r?.(f),{once:!0}),dq(d,h),h.defaultPrevented?c.current=!1:o.onClose()}};return p.jsx(FZ,{...s,ref:l,disabled:n,onClick:Nt(t.onClick,u),onPointerDown:d=>{t.onPointerDown?.(d),c.current=!0},onPointerUp:Nt(t.onPointerUp,d=>{c.current||d.currentTarget?.click()}),onKeyDown:Nt(t.onKeyDown,d=>{const h=a.searchRef.current!=="";n||h&&d.key===" "||yP.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});Bk.displayName=LE;var FZ=T.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...i}=t,o=lO(LE,n),a=RZ(n),l=T.useRef(null),c=Un(e,l),[u,d]=T.useState(!1),[h,f]=T.useState("");return T.useEffect(()=>{const g=l.current;g&&f((g.textContent??"").trim())},[i.children]),p.jsx(l1.ItemSlot,{scope:n,disabled:r,textValue:s??h,children:p.jsx(T5e,{asChild:!0,...a,focusable:!r,children:p.jsx(hn.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:c,onPointerMove:Nt(t.onPointerMove,c1(g=>{r?o.onItemLeave(g):(o.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Nt(t.onPointerLeave,c1(g=>o.onItemLeave(g))),onFocus:Nt(t.onFocus,()=>d(!0)),onBlur:Nt(t.onBlur,()=>d(!1))})})})}),V5e="MenuCheckboxItem",BZ=T.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return p.jsx(VZ,{scope:t.__scopeMenu,checked:n,children:p.jsx(Bk,{role:"menuitemcheckbox","aria-checked":OE(n)?"mixed":n,...s,ref:e,"data-state":hO(n),onSelect:Nt(s.onSelect,()=>r?.(OE(n)?!0:!n),{checkForDefaultPrevented:!1})})})});BZ.displayName=V5e;var UZ="MenuRadioGroup",[W5e,G5e]=$f(UZ,{value:void 0,onValueChange:()=>{}}),$Z=T.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,i=Vr(r);return p.jsx(W5e,{scope:t.__scopeMenu,value:n,onValueChange:i,children:p.jsx(uO,{...s,ref:e})})});$Z.displayName=UZ;var HZ="MenuRadioItem",zZ=T.forwardRef((t,e)=>{const{value:n,...r}=t,s=G5e(HZ,t.__scopeMenu),i=n===s.value;return p.jsx(VZ,{scope:t.__scopeMenu,checked:i,children:p.jsx(Bk,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":hO(i),onSelect:Nt(r.onSelect,()=>s.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});zZ.displayName=HZ;var dO="MenuItemIndicator",[VZ,q5e]=$f(dO,{checked:!1}),WZ=T.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,i=q5e(dO,n);return p.jsx(Ss,{present:r||OE(i.checked)||i.checked===!0,children:p.jsx(hn.span,{...s,ref:e,"data-state":hO(i.checked)})})});WZ.displayName=dO;var K5e="MenuSeparator",GZ=T.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return p.jsx(hn.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});GZ.displayName=K5e;var Y5e="MenuArrow",qZ=T.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=Fk(n);return p.jsx(XL,{...s,...r,ref:e})});qZ.displayName=Y5e;var X5e="MenuSub",[Kht,KZ]=$f(X5e),yb="MenuSubTrigger",YZ=T.forwardRef((t,e)=>{const n=Hf(yb,t.__scopeMenu),r=Av(yb,t.__scopeMenu),s=KZ(yb,t.__scopeMenu),i=lO(yb,t.__scopeMenu),o=T.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=i,c={__scopeMenu:t.__scopeMenu},u=T.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return T.useEffect(()=>u,[u]),T.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),p.jsx(oO,{asChild:!0,...c,children:p.jsx(FZ,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":ZZ(n.open),...t,ref:fk(e,s.onTriggerChange),onClick:d=>{t.onClick?.(d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Nt(t.onPointerMove,c1(d=>{i.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:Nt(t.onPointerLeave,c1(d=>{u();const h=n.content?.getBoundingClientRect();if(h){const f=n.content?.dataset.side,g=f==="right",y=g?-5:5,m=h[g?"left":"right"],b=h[g?"right":"left"];i.onPointerGraceIntentChange({area:[{x:d.clientX+y,y:d.clientY},{x:m,y:h.top},{x:b,y:h.top},{x:b,y:h.bottom},{x:m,y:h.bottom}],side:f}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(d),d.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Nt(t.onKeyDown,d=>{const h=i.searchRef.current!=="";t.disabled||h&&d.key===" "||I5e[r.dir].includes(d.key)&&(n.onOpenChange(!0),n.content?.focus(),d.preventDefault())})})})});YZ.displayName=yb;var XZ="MenuSubContent",JZ=T.forwardRef((t,e)=>{const n=OZ(Bo,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=Hf(Bo,t.__scopeMenu),o=Av(Bo,t.__scopeMenu),a=KZ(XZ,t.__scopeMenu),l=T.useRef(null),c=Un(e,l);return p.jsx(l1.Provider,{scope:t.__scopeMenu,children:p.jsx(Ss,{present:r||i.open,children:p.jsx(l1.Slot,{scope:t.__scopeMenu,children:p.jsx(cO,{id:a.contentId,"aria-labelledby":a.triggerId,...s,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{o.isUsingKeyboardRef.current&&l.current?.focus(),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:Nt(t.onFocusOutside,u=>{u.target!==a.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Nt(t.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:Nt(t.onKeyDown,u=>{const d=u.currentTarget.contains(u.target),h=R5e[o.dir].includes(u.key);d&&h&&(i.onOpenChange(!1),a.trigger?.focus(),u.preventDefault())})})})})})});JZ.displayName=XZ;function ZZ(t){return t?"open":"closed"}function OE(t){return t==="indeterminate"}function hO(t){return OE(t)?"indeterminate":t?"checked":"unchecked"}function J5e(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function Z5e(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function Q5e(t,e,n){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=Z5e(t,Math.max(i,0));s.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function e3e(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,l=e[i].y,c=e[o].x,u=e[o].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(s=!s)}return s}function t3e(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return e3e(n,e)}function c1(t){return e=>e.pointerType==="mouse"?t(e):void 0}var QZ=LZ,eQ=oO,tQ=DZ,nQ=MZ,rQ=uO,sQ=jZ,iQ=Bk,oQ=BZ,aQ=$Z,lQ=zZ,cQ=WZ,uQ=GZ,dQ=qZ,hQ=YZ,fQ=JZ,fO="DropdownMenu",[n3e,Yht]=Xo(fO,[jk]),pi=jk(),[r3e,pQ]=n3e(fO),mQ=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:i,onOpenChange:o,modal:a=!0}=t,l=pi(e),c=T.useRef(null),[u=!1,d]=Bf({prop:s,defaultProp:i,onChange:o});return p.jsx(r3e,{scope:e,triggerId:Vc(),triggerRef:c,contentId:Vc(),open:u,onOpenChange:d,onOpenToggle:T.useCallback(()=>d(h=>!h),[d]),modal:a,children:p.jsx(QZ,{...l,open:u,onOpenChange:d,dir:r,modal:a,children:n})})};mQ.displayName=fO;var gQ="DropdownMenuTrigger",bQ=T.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,i=pQ(gQ,n),o=pi(n);return p.jsx(eQ,{asChild:!0,...o,children:p.jsx(hn.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:fk(e,i.triggerRef),onPointerDown:Nt(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(i.onOpenToggle(),i.open||a.preventDefault())}),onKeyDown:Nt(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&i.onOpenToggle(),a.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});bQ.displayName=gQ;var s3e="DropdownMenuPortal",yQ=t=>{const{__scopeDropdownMenu:e,...n}=t,r=pi(e);return p.jsx(tQ,{...r,...n})};yQ.displayName=s3e;var vQ="DropdownMenuContent",_Q=T.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=pQ(vQ,n),i=pi(n),o=T.useRef(!1);return p.jsx(nQ,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:e,onCloseAutoFocus:Nt(t.onCloseAutoFocus,a=>{o.current||s.triggerRef.current?.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:Nt(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!s.modal||u)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});_Q.displayName=vQ;var i3e="DropdownMenuGroup",o3e=T.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=pi(n);return p.jsx(rQ,{...s,...r,ref:e})});o3e.displayName=i3e;var a3e="DropdownMenuLabel",l3e=T.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=pi(n);return p.jsx(sQ,{...s,...r,ref:e})});l3e.displayName=a3e;var c3e="DropdownMenuItem",xQ=T.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=pi(n);return p.jsx(iQ,{...s,...r,ref:e})});xQ.displayName=c3e;var u3e="DropdownMenuCheckboxItem",d3e=T.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=pi(n);return p.jsx(oQ,{...s,...r,ref:e})});d3e.displayName=u3e;var h3e="DropdownMenuRadioGroup",f3e=T.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=pi(n);return p.jsx(aQ,{...s,...r,ref:e})});f3e.displayName=h3e;var p3e="DropdownMenuRadioItem",m3e=T.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=pi(n);return p.jsx(lQ,{...s,...r,ref:e})});m3e.displayName=p3e;var g3e="DropdownMenuItemIndicator",b3e=T.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=pi(n);return p.jsx(cQ,{...s,...r,ref:e})});b3e.displayName=g3e;var y3e="DropdownMenuSeparator",v3e=T.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=pi(n);return p.jsx(uQ,{...s,...r,ref:e})});v3e.displayName=y3e;var _3e="DropdownMenuArrow",wQ=T.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=pi(n);return p.jsx(dQ,{...s,...r,ref:e})});wQ.displayName=_3e;var x3e="DropdownMenuSubTrigger",w3e=T.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=pi(n);return p.jsx(hQ,{...s,...r,ref:e})});w3e.displayName=x3e;var E3e="DropdownMenuSubContent",S3e=T.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=pi(n);return p.jsx(fQ,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});S3e.displayName=E3e;var Uk=mQ,$k=bQ,Hk=yQ,zk=_Q,om=xQ,k3e=wQ;const gB=()=>p.jsx("span",{className:"px-1.5 py-0.5 rounded-full bg-blue-500/10 dark:bg-blue-900/10 text-[10px] font-medium text-blue-600 dark:text-blue-300 ml-2",children:"BETA"}),C3e=({onSelectTab:t})=>{const e=It(ld);return p.jsxs(Uk,{children:[p.jsx($k,{asChild:!0,children:p.jsx(ot.button,{className:"w-10 h-10 rounded-full bg-transparent flex items-center justify-center focus:outline-none",whileHover:{scale:1.02},whileTap:{scale:.98},children:e?.avatar?p.jsx("img",{src:e.avatar,alt:e?.username||"Profile",className:"w-full h-full rounded-full object-cover",loading:"eager",decoding:"sync"}):p.jsx("div",{className:"w-full h-full rounded-full flex items-center justify-center bg-white dark:bg-gray-800 text-gray-400 dark:text-gray-500",children:p.jsx("div",{className:"i-ph:question w-6 h-6"})})})}),p.jsx(Hk,{children:p.jsxs(zk,{className:Pe("min-w-[240px] z-[250]","bg-white dark:bg-[#141414]","rounded-lg shadow-lg","border border-gray-200/50 dark:border-gray-800/50","animate-in fade-in-0 zoom-in-95","py-1"),sideOffset:5,align:"end",children:[p.jsxs("div",{className:Pe("px-4 py-3 flex items-center gap-3","border-b border-gray-200/50 dark:border-gray-800/50"),children:[p.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden flex-shrink-0 bg-white dark:bg-gray-800 shadow-sm",children:e?.avatar?p.jsx("img",{src:e.avatar,alt:e?.username||"Profile",className:Pe("w-full h-full","object-cover","transform-gpu","image-rendering-crisp"),loading:"eager",decoding:"sync"}):p.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 dark:text-gray-500 font-medium text-lg",children:p.jsx("span",{className:"relative -top-0.5",children:"?"})})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("div",{className:"font-medium text-sm text-gray-900 dark:text-white truncate",children:e?.username||"Guest User"}),e?.bio&&p.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:e.bio})]})]}),p.jsxs(om,{className:Pe("flex items-center gap-2 px-4 py-2.5","text-sm text-gray-700 dark:text-gray-200","hover:bg-blue-50 dark:hover:bg-blue-900/10","hover:text-blue-500 dark:hover:text-blue-400","cursor-pointer transition-all duration-200","outline-none","group"),onClick:()=>t("profile"),children:[p.jsx("div",{className:"i-ph:user-circle w-4 h-4 text-gray-400 group-hover:text-blue-500 dark:group-hover:text-blue-400 transition-colors"})," ","Edit Profile"]}),p.jsxs(om,{className:Pe("flex items-center gap-2 px-4 py-2.5","text-sm text-gray-700 dark:text-gray-200","hover:bg-blue-50 dark:hover:bg-blue-900/10","hover:text-blue-500 dark:hover:text-blue-400","cursor-pointer transition-all duration-200","outline-none","group"),onClick:()=>t("settings"),children:[p.jsx("div",{className:"i-ph:gear-six w-4 h-4 text-gray-400 group-hover:text-blue-500 dark:group-hover:text-blue-400 transition-colors"})," ","Settings"]}),p.jsx("div",{className:"my-1 border-t border-gray-200/50 dark:border-gray-800/50"}),p.jsxs(om,{className:Pe("flex items-center gap-2 px-4 py-2.5","text-sm text-gray-700 dark:text-gray-200","hover:bg-blue-50 dark:hover:bg-blue-900/10","hover:text-blue-500 dark:hover:text-blue-400","cursor-pointer transition-all duration-200","outline-none","group"),onClick:()=>t("task-manager"),children:[p.jsx("div",{className:"i-ph:activity w-4 h-4 text-gray-400 group-hover:text-blue-500 dark:group-hover:text-blue-400 transition-colors"})," ","Task Manager",p.jsx(gB,{})]}),p.jsxs(om,{className:Pe("flex items-center gap-2 px-4 py-2.5","text-sm text-gray-700 dark:text-gray-200","hover:bg-blue-50 dark:hover:bg-blue-900/10","hover:text-blue-500 dark:hover:text-blue-400","cursor-pointer transition-all duration-200","outline-none","group"),onClick:()=>t("service-status"),children:[p.jsx("div",{className:"i-ph:heartbeat w-4 h-4 text-gray-400 group-hover:text-blue-500 dark:group-hover:text-blue-400 transition-colors"})," ","Service Status",p.jsx(gB,{})]})]})})]})},A3e="_",T3e="b",N3e="c",P3e="e",I3e="g",R3e="i",L3e="k",O3e="m",D3e="o",M3e="q",fs={rayContainer:A3e,lightRay:T3e,ray1:N3e,ray2:P3e,ray3:I3e,ray4:R3e,ray5:L3e,ray6:O3e,ray7:D3e,ray8:M3e},j3e=()=>p.jsxs("div",{className:`${fs.rayContainer} `,children:[p.jsx("div",{className:`${fs.lightRay} ${fs.ray1}`}),p.jsx("div",{className:`${fs.lightRay} ${fs.ray2}`}),p.jsx("div",{className:`${fs.lightRay} ${fs.ray3}`}),p.jsx("div",{className:`${fs.lightRay} ${fs.ray4}`}),p.jsx("div",{className:`${fs.lightRay} ${fs.ray5}`}),p.jsx("div",{className:`${fs.lightRay} ${fs.ray6}`}),p.jsx("div",{className:`${fs.lightRay} ${fs.ray7}`}),p.jsx("div",{className:`${fs.lightRay} ${fs.ray8}`})]});function Tv(t,e){let n;return function(...s){const i=()=>{clearTimeout(n),t(...s)};clearTimeout(n),n=setTimeout(i,e)}}function F3e(){const t=It(ld),[e,n]=T.useState(!1),r=T.useCallback(Tv((o,a)=>{jT({[o]:a}),ze.success(`${o.charAt(0).toUpperCase()+o.slice(1)} updated`)},1e3),[]),s=async o=>{const a=o.target.files?.[0];if(a)try{n(!0);const l=new FileReader;l.onloadend=()=>{const c=l.result;jT({avatar:c}),n(!1),ze.success("Profile picture updated")},l.onerror=()=>{console.error("Error reading file:",l.error),n(!1),ze.error("Failed to update profile picture")},l.readAsDataURL(a)}catch(l){console.error("Error uploading avatar:",l),n(!1),ze.error("Failed to update profile picture")}},i=(o,a)=>{jT({[o]:a}),r(o,a)};return p.jsx("div",{className:"max-w-2xl mx-auto",children:p.jsx("div",{className:"space-y-6",children:p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-start gap-6 mb-8",children:[p.jsxs("div",{className:Pe("w-24 h-24 rounded-full overflow-hidden","bg-gray-100 dark:bg-gray-800/50","flex items-center justify-center","ring-1 ring-gray-200 dark:ring-gray-700","relative group","transition-all duration-300 ease-out","hover:ring-blue-500/30 dark:hover:ring-blue-500/30","hover:shadow-lg hover:shadow-blue-500/10"),children:[t.avatar?p.jsx("img",{src:t.avatar,alt:"Profile",className:Pe("w-full h-full object-cover","transition-all duration-300 ease-out","group-hover:scale-105 group-hover:brightness-90")}):p.jsx("div",{className:"i-ph:robot-fill w-16 h-16 text-gray-400 dark:text-gray-500 transition-colors group-hover:text-blue-500/70 transform -translate-y-1"}),p.jsxs("label",{className:Pe("absolute inset-0","flex items-center justify-center","bg-black/0 group-hover:bg-black/40","cursor-pointer transition-all duration-300 ease-out",e?"cursor-wait":""),children:[p.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:s,disabled:e}),e?p.jsx("div",{className:"i-ph:spinner-gap w-6 h-6 text-white animate-spin"}):p.jsx("div",{className:"i-ph:camera-plus w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-all duration-300 ease-out transform group-hover:scale-110"})]})]}),p.jsxs("div",{className:"flex-1 pt-1",children:[p.jsx("label",{className:"block text-base font-medium text-gray-900 dark:text-gray-100 mb-1",children:"Profile Picture"}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Upload a profile picture or avatar"})]})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Username"}),p.jsxs("div",{className:"relative group",children:[p.jsx("div",{className:"absolute left-3.5 top-1/2 -translate-y-1/2",children:p.jsx("div",{className:"i-ph:user-circle-fill w-5 h-5 text-gray-400 dark:text-gray-500 transition-colors group-focus-within:text-blue-500"})}),p.jsx("input",{type:"text",value:t.username,onChange:o=>i("username",o.target.value),className:Pe("w-full pl-11 pr-4 py-2.5 rounded-xl","bg-white dark:bg-gray-800/50","border border-gray-200 dark:border-gray-700/50","text-gray-900 dark:text-white","placeholder-gray-400 dark:placeholder-gray-500","focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50","transition-all duration-300 ease-out"),placeholder:"Enter your username"})]})]}),p.jsxs("div",{className:"mb-8",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Bio"}),p.jsxs("div",{className:"relative group",children:[p.jsx("div",{className:"absolute left-3.5 top-3",children:p.jsx("div",{className:"i-ph:text-aa w-5 h-5 text-gray-400 dark:text-gray-500 transition-colors group-focus-within:text-blue-500"})}),p.jsx("textarea",{value:t.bio,onChange:o=>i("bio",o.target.value),className:Pe("w-full pl-11 pr-4 py-2.5 rounded-xl","bg-white dark:bg-gray-800/50","border border-gray-200 dark:border-gray-700/50","text-gray-900 dark:text-white","placeholder-gray-400 dark:placeholder-gray-500","focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50","transition-all duration-300 ease-out","resize-none","h-32"),placeholder:"Tell us about yourself"})]})]})]})})})}const DE=typeof navigator<"u"?navigator.platform.toLowerCase().includes("mac"):!1;typeof navigator<"u"&&navigator.platform.toLowerCase().includes("win");typeof navigator<"u"&&navigator.platform.toLowerCase().includes("linux");const BT=t=>{switch(t){case"meta":return DE?"":"Win";case"alt":return DE?"":"Alt";case"shift":return"";default:return t}};function B3e(){const[t,e]=T.useState(""),[n,r]=T.useState(()=>{const s=localStorage.getItem("bolt_user_profile");return s?JSON.parse(s):{notifications:!0,language:"en",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone}});return T.useEffect(()=>{e(Intl.DateTimeFormat().resolvedOptions().timeZone)},[]),T.useEffect(()=>{try{const i={...JSON.parse(localStorage.getItem("bolt_user_profile")||"{}"),notifications:n.notifications,language:n.language,timezone:n.timezone};localStorage.setItem("bolt_user_profile",JSON.stringify(i)),ze.success("Settings updated")}catch(s){console.error("Error saving settings:",s),ze.error("Failed to update settings")}},[n]),p.jsxs("div",{className:"space-y-4",children:[p.jsxs(ot.div,{className:"bg-white dark:bg-[#0A0A0A] rounded-lg shadow-sm dark:shadow-none p-4 space-y-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[p.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[p.jsx("div",{className:"i-ph:palette-fill w-4 h-4 text-blue-500"})," ",p.jsx("span",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:"Preferences"})]}),p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx("div",{className:"i-ph:translate-fill w-4 h-4 text-bolt-elements-textSecondary"}),p.jsx("label",{className:"block text-sm text-bolt-elements-textSecondary",children:"Language"})]}),p.jsxs("select",{value:n.language,onChange:s=>r(i=>({...i,language:s.target.value})),className:Pe("w-full px-3 py-2 rounded-lg text-sm","bg-[#FAFAFA] dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","text-bolt-elements-textPrimary","focus:outline-none focus:ring-2 focus:ring-blue-500/30","transition-all duration-200"),children:[p.jsx("option",{value:"en",children:"English"}),p.jsx("option",{value:"es",children:"Espaol"}),p.jsx("option",{value:"fr",children:"Franais"}),p.jsx("option",{value:"de",children:"Deutsch"}),p.jsx("option",{value:"it",children:"Italiano"}),p.jsx("option",{value:"pt",children:"Portugus"}),p.jsx("option",{value:"ru",children:""}),p.jsx("option",{value:"zh",children:""}),p.jsx("option",{value:"ja",children:""}),p.jsx("option",{value:"ko",children:""})]})]}),p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx("div",{className:"i-ph:bell-fill w-4 h-4 text-bolt-elements-textSecondary"}),p.jsx("label",{className:"block text-sm text-bolt-elements-textSecondary",children:"Notifications"})]}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:n.notifications?"Notifications are enabled":"Notifications are disabled"}),p.jsx(Fo,{checked:n.notifications,onCheckedChange:s=>{r(a=>({...a,notifications:s}));const o={...JSON.parse(localStorage.getItem("bolt_user_profile")||"{}"),notifications:s};localStorage.setItem("bolt_user_profile",JSON.stringify(o)),window.dispatchEvent(new StorageEvent("storage",{key:"bolt_user_profile",newValue:JSON.stringify(o)})),ze.success(`Notifications ${s?"enabled":"disabled"}`)}})]})]})]}),p.jsxs(ot.div,{className:"bg-white dark:bg-[#0A0A0A] rounded-lg shadow-sm dark:shadow-none p-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[p.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[p.jsx("div",{className:"i-ph:clock-fill w-4 h-4 text-blue-500"})," ",p.jsx("span",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:"Time Settings"})]}),p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx("div",{className:"i-ph:globe-fill w-4 h-4 text-bolt-elements-textSecondary"}),p.jsx("label",{className:"block text-sm text-bolt-elements-textSecondary",children:"Timezone"})]}),p.jsx("select",{value:n.timezone,onChange:s=>r(i=>({...i,timezone:s.target.value})),className:Pe("w-full px-3 py-2 rounded-lg text-sm","bg-[#FAFAFA] dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","text-bolt-elements-textPrimary","focus:outline-none focus:ring-2 focus:ring-blue-500/30","transition-all duration-200"),children:p.jsx("option",{value:t,children:t})})]})]}),p.jsxs(ot.div,{className:"bg-white dark:bg-[#0A0A0A] rounded-lg shadow-sm dark:shadow-none p-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[p.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[p.jsx("div",{className:"i-ph:keyboard-fill w-4 h-4 text-blue-500"})," ",p.jsx("span",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:"Keyboard Shortcuts"})]}),p.jsx("div",{className:"space-y-2",children:p.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-[#FAFAFA] dark:bg-[#1A1A1A]",children:[p.jsxs("div",{className:"flex flex-col",children:[p.jsx("span",{className:"text-sm text-bolt-elements-textPrimary",children:"Toggle Theme"}),p.jsx("span",{className:"text-xs text-bolt-elements-textSecondary",children:"Switch between light and dark mode"})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("kbd",{className:"px-2 py-1 text-xs font-semibold text-bolt-elements-textSecondary bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A] rounded shadow-sm",children:BT("meta")}),p.jsx("kbd",{className:"px-2 py-1 text-xs font-semibold text-bolt-elements-textSecondary bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A] rounded shadow-sm",children:BT("alt")}),p.jsx("kbd",{className:"px-2 py-1 text-xs font-semibold text-bolt-elements-textSecondary bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A] rounded shadow-sm",children:BT("shift")}),p.jsx("kbd",{className:"px-2 py-1 text-xs font-semibold text-bolt-elements-textSecondary bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A] rounded shadow-sm",children:"D"})]})]})})]})]})}function Tn(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function tu(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function U3e(t,e){const n=Tn(t);return isNaN(e)?tu(t,NaN):(e&&n.setDate(n.getDate()+e),n)}const EQ=6048e5,$3e=864e5,Ex=43200,bB=1440;let H3e={};function Nv(){return H3e}function yf(t,e){const n=Nv(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,s=Tn(t),i=s.getDay(),o=(i<r?7:0)+i-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function ME(t){return yf(t,{weekStartsOn:1})}function SQ(t){const e=Tn(t),n=e.getFullYear(),r=tu(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=ME(r),i=tu(t,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const o=ME(i);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function jE(t){const e=Tn(t);return e.setHours(0,0,0,0),e}function FE(t){const e=Tn(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function z3e(t,e){const n=jE(t),r=jE(e),s=+n-FE(n),i=+r-FE(r);return Math.round((s-i)/$3e)}function V3e(t){const e=SQ(t),n=tu(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),ME(n)}function e2(t,e){const n=Tn(t),r=Tn(e),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}function Pv(t){return tu(t,Date.now())}function kQ(t,e){const n=jE(t),r=jE(e);return+n==+r}function W3e(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function G3e(t){if(!W3e(t)&&typeof t!="number")return!1;const e=Tn(t);return!isNaN(Number(e))}function q3e(t,e){const n=Tn(t),r=Tn(e),s=n.getFullYear()-r.getFullYear(),i=n.getMonth()-r.getMonth();return s*12+i}function K3e(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function Y3e(t,e){return+Tn(t)-+Tn(e)}function X3e(t){const e=Tn(t);return e.setHours(23,59,59,999),e}function J3e(t){const e=Tn(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function Z3e(t){const e=Tn(t);return+X3e(e)==+J3e(e)}function Q3e(t,e){const n=Tn(t),r=Tn(e),s=e2(n,r),i=Math.abs(q3e(n,r));let o;if(i<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*i);let a=e2(n,r)===-s;Z3e(Tn(t))&&i===1&&e2(t,r)===1&&(a=!1),o=s*(i-Number(a))}return o===0?0:o}function eNe(t,e,n){const r=Y3e(t,e)/1e3;return K3e(n?.roundingMethod)(r)}function tNe(t){const e=Tn(t),n=tu(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const nNe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},rNe=(t,e,n)=>{let r;const s=nNe[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function UT(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const sNe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},iNe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},oNe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},aNe={date:UT({formats:sNe,defaultWidth:"full"}),time:UT({formats:iNe,defaultWidth:"full"}),dateTime:UT({formats:oNe,defaultWidth:"full"})},lNe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},cNe=(t,e,n,r)=>lNe[t];function M0(t){return(e,n)=>{const r=n?.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n?.width?String(n.width):o;s=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n?.width?String(n.width):t.defaultWidth;s=t.values[a]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const uNe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},dNe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},hNe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},fNe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},pNe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},mNe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},gNe=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},bNe={ordinalNumber:gNe,era:M0({values:uNe,defaultWidth:"wide"}),quarter:M0({values:dNe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:M0({values:hNe,defaultWidth:"wide"}),day:M0({values:fNe,defaultWidth:"wide"}),dayPeriod:M0({values:pNe,defaultWidth:"wide",formattingValues:mNe,defaultFormattingWidth:"wide"})};function j0(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const o=i[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?vNe(a,d=>d.test(o)):yNe(a,d=>d.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=e.slice(o.length);return{value:c,rest:u}}}function yNe(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function vNe(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function _Ne(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(s.length);return{value:o,rest:a}}}const xNe=/^(\d+)(th|st|nd|rd)?/i,wNe=/\d+/i,ENe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},SNe={any:[/^b/i,/^(a|c)/i]},kNe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},CNe={any:[/1/i,/2/i,/3/i,/4/i]},ANe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},TNe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},NNe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},PNe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},INe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},RNe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},LNe={ordinalNumber:_Ne({matchPattern:xNe,parsePattern:wNe,valueCallback:t=>parseInt(t,10)}),era:j0({matchPatterns:ENe,defaultMatchWidth:"wide",parsePatterns:SNe,defaultParseWidth:"any"}),quarter:j0({matchPatterns:kNe,defaultMatchWidth:"wide",parsePatterns:CNe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:j0({matchPatterns:ANe,defaultMatchWidth:"wide",parsePatterns:TNe,defaultParseWidth:"any"}),day:j0({matchPatterns:NNe,defaultMatchWidth:"wide",parsePatterns:PNe,defaultParseWidth:"any"}),dayPeriod:j0({matchPatterns:INe,defaultMatchWidth:"any",parsePatterns:RNe,defaultParseWidth:"any"})},CQ={code:"en-US",formatDistance:rNe,formatLong:aNe,formatRelative:cNe,localize:bNe,match:LNe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ONe(t){const e=Tn(t);return z3e(e,tNe(e))+1}function DNe(t){const e=Tn(t),n=+ME(e)-+V3e(e);return Math.round(n/EQ)+1}function AQ(t,e){const n=Tn(t),r=n.getFullYear(),s=Nv(),i=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,o=tu(t,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const a=yf(o,e),l=tu(t,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const c=yf(l,e);return n.getTime()>=a.getTime()?r+1:n.getTime()>=c.getTime()?r:r-1}function MNe(t,e){const n=Nv(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,s=AQ(t,e),i=tu(t,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),yf(i,e)}function jNe(t,e){const n=Tn(t),r=+yf(n,e)-+MNe(n,e);return Math.round(r/EQ)+1}function Mn(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const ku={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Mn(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Mn(n+1,2)},d(t,e){return Mn(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Mn(t.getHours()%12||12,e.length)},H(t,e){return Mn(t.getHours(),e.length)},m(t,e){return Mn(t.getMinutes(),e.length)},s(t,e){return Mn(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return Mn(s,e.length)}},Rp={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},yB={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return ku.y(t,e)},Y:function(t,e,n,r){const s=AQ(t,r),i=s>0?s:1-s;if(e==="YY"){const o=i%100;return Mn(o,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):Mn(i,e.length)},R:function(t,e){const n=SQ(t);return Mn(n,e.length)},u:function(t,e){const n=t.getFullYear();return Mn(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Mn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Mn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return ku.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Mn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=jNe(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):Mn(s,e.length)},I:function(t,e,n){const r=DNe(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Mn(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):ku.d(t,e)},D:function(t,e,n){const r=ONe(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Mn(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return Mn(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return Mn(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return Mn(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=Rp.noon:r===0?s=Rp.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=Rp.evening:r>=12?s=Rp.afternoon:r>=4?s=Rp.morning:s=Rp.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ku.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):ku.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Mn(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Mn(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):ku.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):ku.s(t,e)},S:function(t,e){return ku.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return _B(r);case"XXXX":case"XX":return ph(r);case"XXXXX":case"XXX":default:return ph(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return _B(r);case"xxxx":case"xx":return ph(r);case"xxxxx":case"xxx":default:return ph(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+vB(r,":");case"OOOO":default:return"GMT"+ph(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+vB(r,":");case"zzzz":default:return"GMT"+ph(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return Mn(r,e.length)},T:function(t,e,n){const r=t.getTime();return Mn(r,e.length)}};function vB(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+e+Mn(i,2)}function _B(t,e){return t%60===0?(t>0?"-":"+")+Mn(Math.abs(t)/60,2):ph(t,e)}function ph(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Mn(Math.trunc(r/60),2),i=Mn(r%60,2);return n+s+e+i}const xB=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},TQ=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},FNe=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return xB(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",xB(r,e)).replace("{{time}}",TQ(s,e))},BNe={p:TQ,P:FNe},UNe=/^D+$/,$Ne=/^Y+$/,HNe=["D","DD","YY","YYYY"];function zNe(t){return UNe.test(t)}function VNe(t){return $Ne.test(t)}function WNe(t,e,n){const r=GNe(t,e,n);if(console.warn(r),HNe.includes(t))throw new RangeError(r)}function GNe(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const qNe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,KNe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,YNe=/^'([^]*?)'?$/,XNe=/''/g,JNe=/[a-zA-Z]/;function $T(t,e,n){const r=Nv(),s=r.locale??CQ,i=r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,o=r.weekStartsOn??r.locale?.options?.weekStartsOn??0,a=Tn(t);if(!G3e(a))throw new RangeError("Invalid time value");let l=e.match(KNe).map(u=>{const d=u[0];if(d==="p"||d==="P"){const h=BNe[d];return h(u,s.formatLong)}return u}).join("").match(qNe).map(u=>{if(u==="''")return{isToken:!1,value:"'"};const d=u[0];if(d==="'")return{isToken:!1,value:ZNe(u)};if(yB[d])return{isToken:!0,value:u};if(d.match(JNe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+d+"`");return{isToken:!1,value:u}});s.localize.preprocessor&&(l=s.localize.preprocessor(a,l));const c={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return l.map(u=>{if(!u.isToken)return u.value;const d=u.value;(VNe(d)||zNe(d))&&WNe(d,e,String(t));const h=yB[d[0]];return h(a,d,s.localize,c)}).join("")}function ZNe(t){const e=t.match(YNe);return e?e[1].replace(XNe,"'"):t}function QNe(t,e,n){const r=Nv(),s=n?.locale??r.locale??CQ,i=2520,o=e2(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const a=Object.assign({},n,{addSuffix:n?.addSuffix,comparison:o});let l,c;o>0?(l=Tn(e),c=Tn(t)):(l=Tn(t),c=Tn(e));const u=eNe(c,l),d=(FE(c)-FE(l))/1e3,h=Math.round((u-d)/60);let f;if(h<2)return n?.includeSeconds?u<5?s.formatDistance("lessThanXSeconds",5,a):u<10?s.formatDistance("lessThanXSeconds",10,a):u<20?s.formatDistance("lessThanXSeconds",20,a):u<40?s.formatDistance("halfAMinute",0,a):u<60?s.formatDistance("lessThanXMinutes",1,a):s.formatDistance("xMinutes",1,a):h===0?s.formatDistance("lessThanXMinutes",1,a):s.formatDistance("xMinutes",h,a);if(h<45)return s.formatDistance("xMinutes",h,a);if(h<90)return s.formatDistance("aboutXHours",1,a);if(h<bB){const g=Math.round(h/60);return s.formatDistance("aboutXHours",g,a)}else{if(h<i)return s.formatDistance("xDays",1,a);if(h<Ex){const g=Math.round(h/bB);return s.formatDistance("xDays",g,a)}else if(h<Ex*2)return f=Math.round(h/Ex),s.formatDistance("aboutXMonths",f,a)}if(f=Q3e(c,l),f<12){const g=Math.round(h/Ex);return s.formatDistance("xMonths",g,a)}else{const g=f%12,y=Math.trunc(f/12);return g<3?s.formatDistance("aboutXYears",y,a):g<9?s.formatDistance("overXYears",y,a):s.formatDistance("almostXYears",y+1,a)}}function ePe(t,e){return QNe(t,Pv(t),e)}function tPe(t,e){const n=Tn(t),r=Tn(e);return n.getTime()>r.getTime()}function nPe(t,e,n){const r=yf(t,n),s=yf(e,n);return+r==+s}function rPe(t,e){const n=Tn(t),r=Tn(e);return n.getFullYear()===r.getFullYear()}function sPe(t,e){return nPe(t,Pv(t),e)}function iPe(t){return rPe(t,Pv(t))}function oPe(t){return kQ(t,Pv(t))}function NQ(t,e){return U3e(t,-e)}function aPe(t){return kQ(t,NQ(Pv(t),1))}const lPe=()=>{const[t,e]=T.useState("all"),n=It(Lt.logs);T.useEffect(()=>{const u=performance.now();return()=>{const d=performance.now()-u;Lt.logPerformanceMetric("NotificationsTab","mount-duration",d)}},[]);const r=()=>{const u=Object.keys(n).length;Lt.logInfo("Cleared notifications",{type:"notification_clear",message:`Cleared ${u} notifications`,clearedCount:u,component:"notifications"}),Lt.clearLogs()},s=u=>{Lt.logInfo("Update link clicked",{type:"update_click",message:"User clicked update link",updateUrl:u,component:"notifications"}),window.open(u,"_blank")},i=u=>{Lt.logInfo("Notification filter changed",{type:"filter_change",message:`Filter changed to ${u}`,previousFilter:t,newFilter:u,component:"notifications"}),e(u)},o=Object.values(n).filter(u=>t==="all"?!0:t==="update"?u.details?.type==="update":t==="system"?u.category==="system":t==="provider"?u.category==="provider":t==="network"?u.category==="network":u.level===t).sort((u,d)=>new Date(d.timestamp).getTime()-new Date(u.timestamp).getTime()),a=(u,d)=>{if(d==="update")return{icon:"i-ph:arrow-circle-up",color:"text-purple-500 dark:text-purple-400",bg:"hover:bg-purple-500/10 dark:hover:bg-purple-500/20"};switch(u){case"error":return{icon:"i-ph:warning-circle",color:"text-red-500 dark:text-red-400",bg:"hover:bg-red-500/10 dark:hover:bg-red-500/20"};case"warning":return{icon:"i-ph:warning",color:"text-yellow-500 dark:text-yellow-400",bg:"hover:bg-yellow-500/10 dark:hover:bg-yellow-500/20"};case"info":return{icon:"i-ph:info",color:"text-blue-500 dark:text-blue-400",bg:"hover:bg-blue-500/10 dark:hover:bg-blue-500/20"};default:return{icon:"i-ph:bell",color:"text-gray-500 dark:text-gray-400",bg:"hover:bg-gray-500/10 dark:hover:bg-gray-500/20"}}},l=u=>u.type==="update"?p.jsxs("div",{className:"flex flex-col gap-2",children:[p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:u.message}),p.jsxs("div",{className:"flex flex-col gap-1 text-xs text-gray-500 dark:text-gray-500",children:[p.jsxs("p",{children:["Current Version: ",u.currentVersion]}),p.jsxs("p",{children:["Latest Version: ",u.latestVersion]}),p.jsxs("p",{children:["Branch: ",u.branch]})]}),p.jsxs("button",{onClick:()=>u.updateUrl&&s(u.updateUrl),className:Pe("mt-2 inline-flex items-center gap-2","rounded-lg px-3 py-1.5","text-sm font-medium","bg-[#FAFAFA] dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","text-gray-900 dark:text-white","hover:bg-purple-500/10 dark:hover:bg-purple-500/20","transition-all duration-200"),children:[p.jsx("span",{className:"i-ph:git-branch text-lg"}),"View Changes"]})]}):u.message?p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:u.message}):null,c=[{id:"all",label:"All Notifications",icon:"i-ph:bell",color:"#9333ea"},{id:"system",label:"System",icon:"i-ph:gear",color:"#6b7280"},{id:"update",label:"Updates",icon:"i-ph:arrow-circle-up",color:"#9333ea"},{id:"error",label:"Errors",icon:"i-ph:warning-circle",color:"#ef4444"},{id:"warning",label:"Warnings",icon:"i-ph:warning",color:"#f59e0b"},{id:"info",label:"Information",icon:"i-ph:info",color:"#3b82f6"},{id:"provider",label:"Providers",icon:"i-ph:robot",color:"#10b981"},{id:"network",label:"Network",icon:"i-ph:wifi-high",color:"#6366f1"}];return p.jsxs("div",{className:"flex h-full flex-col gap-6",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs(Uk,{children:[p.jsx($k,{asChild:!0,children:p.jsxs("button",{className:Pe("flex items-center gap-2","rounded-lg px-3 py-1.5","text-sm text-gray-900 dark:text-white","bg-[#FAFAFA] dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","hover:bg-purple-500/10 dark:hover:bg-purple-500/20","transition-all duration-200"),children:[p.jsx("span",{className:Pe("text-lg",c.find(u=>u.id===t)?.icon||"i-ph:funnel"),style:{color:c.find(u=>u.id===t)?.color}}),c.find(u=>u.id===t)?.label||"Filter Notifications",p.jsx("span",{className:"i-ph:caret-down text-lg text-gray-500 dark:text-gray-400"})]})}),p.jsx(Hk,{children:p.jsx(zk,{className:"min-w-[200px] bg-white dark:bg-[#0A0A0A] rounded-lg shadow-lg py-1 z-[250] animate-in fade-in-0 zoom-in-95 border border-[#E5E5E5] dark:border-[#1A1A1A]",sideOffset:5,align:"start",side:"bottom",children:c.map(u=>p.jsxs(om,{className:"group flex items-center px-4 py-2.5 text-sm text-gray-700 dark:text-gray-200 hover:bg-purple-500/10 dark:hover:bg-purple-500/20 cursor-pointer transition-colors",onClick:()=>i(u.id),children:[p.jsx("div",{className:"mr-3 flex h-5 w-5 items-center justify-center",children:p.jsx("div",{className:Pe(u.icon,"text-lg group-hover:text-purple-500 transition-colors"),style:{color:u.color}})}),p.jsx("span",{className:"group-hover:text-purple-500 transition-colors",children:u.label})]},u.id))})})]}),p.jsxs("button",{onClick:r,className:Pe("group flex items-center gap-2","rounded-lg px-3 py-1.5","text-sm text-gray-900 dark:text-white","bg-[#FAFAFA] dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","hover:bg-purple-500/10 dark:hover:bg-purple-500/20","transition-all duration-200"),children:[p.jsx("span",{className:"i-ph:trash text-lg text-gray-500 dark:text-gray-400 group-hover:text-purple-500 transition-colors"}),"Clear All"]})]}),p.jsx("div",{className:"flex flex-col gap-4",children:o.length===0?p.jsxs(ot.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:Pe("flex flex-col items-center justify-center gap-4","rounded-lg p-8 text-center","bg-[#FAFAFA] dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]"),children:[p.jsx("span",{className:"i-ph:bell-slash text-4xl text-gray-400 dark:text-gray-600"}),p.jsxs("div",{className:"flex flex-col gap-1",children:[p.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"No Notifications"}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"You're all caught up!"})]})]}):o.map(u=>{const d=a(u.level,u.details?.type);return p.jsx(ot.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:Pe("flex flex-col gap-2","rounded-lg p-4","bg-[#FAFAFA] dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]",d.bg,"transition-all duration-200"),children:p.jsxs("div",{className:"flex items-start justify-between gap-4",children:[p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx("span",{className:Pe("text-lg",d.icon,d.color)}),p.jsxs("div",{className:"flex flex-col gap-1",children:[p.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:u.message}),u.details&&l(u.details),p.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Category: ",u.category,u.subCategory?` > ${u.subCategory}`:""]})]})]}),p.jsx("time",{className:"shrink-0 text-xs text-gray-500 dark:text-gray-400",children:ePe(new Date(u.timestamp),{addSuffix:!0})})]})},u.id)})})]})},PQ=typeof window<"u"&&typeof localStorage<"u";function Qh(t){if(!PQ)return null;try{const e=localStorage.getItem(t);return e?JSON.parse(e):null}catch(e){return console.error(`Error reading from localStorage key "${t}":`,e),null}}function cPe(t,e){if(PQ)try{localStorage.setItem(t,JSON.stringify(e))}catch(n){console.error(`Error writing to localStorage key "${t}":`,n)}}const uPe=Di("ChatHistory");async function dPe(){if(typeof indexedDB>"u"){console.error("indexedDB is not available in this environment.");return}return new Promise(t=>{const e=indexedDB.open("boltHistory",1);e.onupgradeneeded=n=>{const r=n.target.result;if(!r.objectStoreNames.contains("chats")){const s=r.createObjectStore("chats",{keyPath:"id"});s.createIndex("id","id",{unique:!0}),s.createIndex("urlId","urlId",{unique:!0})}},e.onsuccess=n=>{t(n.target.result)},e.onerror=n=>{t(void 0),uPe.error(n.target.error)}})}async function t2(t){return new Promise((e,n)=>{const i=t.transaction("chats","readonly").objectStore("chats").getAll();i.onsuccess=()=>e(i.result),i.onerror=()=>n(i.error)})}async function BE(t,e,n,r,s,i,o){return new Promise((a,l)=>{const u=t.transaction("chats","readwrite").objectStore("chats");if(i&&isNaN(Date.parse(i))){l(new Error("Invalid timestamp"));return}const d=u.put({id:e,messages:n,urlId:r,description:s,timestamp:i??new Date().toISOString(),metadata:o});d.onsuccess=()=>a(),d.onerror=()=>l(d.error)})}async function ig(t,e){return await fPe(t,e)||await hPe(t,e)}async function hPe(t,e){return new Promise((n,r)=>{const a=t.transaction("chats","readonly").objectStore("chats").index("urlId").get(e);a.onsuccess=()=>n(a.result),a.onerror=()=>r(a.error)})}async function fPe(t,e){return new Promise((n,r)=>{const o=t.transaction("chats","readonly").objectStore("chats").get(e);o.onsuccess=()=>n(o.result),o.onerror=()=>r(o.error)})}async function vP(t,e){return new Promise((n,r)=>{const o=t.transaction("chats","readwrite").objectStore("chats").delete(e);o.onsuccess=()=>n(void 0),o.onerror=()=>r(o.error)})}async function IQ(t){return new Promise((e,n)=>{const i=t.transaction("chats","readonly").objectStore("chats").getAllKeys();i.onsuccess=()=>{const o=i.result.reduce((a,l)=>Math.max(+a,+l),0);e(String(+o+1))},i.onerror=()=>n(i.error)})}async function RQ(t,e){const n=await pPe(t);if(n.includes(e)){let r=2;for(;n.includes(`${e}-${r}`);)r++;return`${e}-${r}`}else return e}async function pPe(t){return new Promise((e,n)=>{const s=t.transaction("chats","readonly").objectStore("chats"),i=[],o=s.openCursor();o.onsuccess=a=>{const l=a.target.result;l?(i.push(l.value.urlId),l.continue()):e(i)},o.onerror=()=>{n(o.error)}})}async function mPe(t,e,n){const r=await ig(t,e);if(!r)throw new Error("Chat not found");const s=r.messages.findIndex(o=>o.id===n);if(s===-1)throw new Error("Message not found");const i=r.messages.slice(0,s+1);return pO(t,r.description?`${r.description} (fork)`:"Forked chat",i)}async function gPe(t,e){const n=await ig(t,e);if(!n)throw new Error("Chat not found");return pO(t,`${n.description||"Chat"} (copy)`,n.messages)}async function pO(t,e,n,r){const s=await IQ(t),i=await RQ(t,s);return await BE(t,s,n,i,e,void 0,r),i}async function bPe(t,e,n){const r=await ig(t,e);if(!r)throw new Error("Chat not found");if(!n.trim())throw new Error("Description cannot be empty");await BE(t,e,r.messages,r.urlId,n,r.timestamp,r.metadata)}function Qa(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function wB(t,e){for(var n="",r=0,s=-1,i=0,o,a=0;a<=t.length;++a){if(a<t.length)o=t.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(s===a-1||i===1))if(s!==a-1&&i===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){var l=n.lastIndexOf("/");if(l!==n.length-1){l===-1?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),s=a,i=0;continue}}else if(n.length===2||n.length===1){n="",r=0,s=a,i=0;continue}}e&&(n.length>0?n+="/..":n="..",r=2)}else n.length>0?n+="/"+t.slice(s+1,a):n=t.slice(s+1,a),r=a-s-1;s=a,i=0}else o===46&&i!==-1?++i:i=-1}return n}function yPe(t,e){var n=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||"");return n?n===e.root?n+r:n+t+r:r}var wm={resolve:function(){for(var e="",n=!1,r,s=arguments.length-1;s>=-1&&!n;s--){var i;s>=0?i=arguments[s]:(r===void 0&&(r=An.cwd()),i=r),Qa(i),i.length!==0&&(e=i+"/"+e,n=i.charCodeAt(0)===47)}return e=wB(e,!n),n?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(Qa(e),e.length===0)return".";var n=e.charCodeAt(0)===47,r=e.charCodeAt(e.length-1)===47;return e=wB(e,!n),e.length===0&&!n&&(e="."),e.length>0&&r&&(e+="/"),n?"/"+e:e},isAbsolute:function(e){return Qa(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,n=0;n<arguments.length;++n){var r=arguments[n];Qa(r),r.length>0&&(e===void 0?e=r:e+="/"+r)}return e===void 0?".":wm.normalize(e)},relative:function(e,n){if(Qa(e),Qa(n),e===n||(e=wm.resolve(e),n=wm.resolve(n),e===n))return"";for(var r=1;r<e.length&&e.charCodeAt(r)===47;++r);for(var s=e.length,i=s-r,o=1;o<n.length&&n.charCodeAt(o)===47;++o);for(var a=n.length,l=a-o,c=i<l?i:l,u=-1,d=0;d<=c;++d){if(d===c){if(l>c){if(n.charCodeAt(o+d)===47)return n.slice(o+d+1);if(d===0)return n.slice(o+d)}else i>c&&(e.charCodeAt(r+d)===47?u=d:d===0&&(u=0));break}var h=e.charCodeAt(r+d),f=n.charCodeAt(o+d);if(h!==f)break;h===47&&(u=d)}var g="";for(d=r+u+1;d<=s;++d)(d===s||e.charCodeAt(d)===47)&&(g.length===0?g+="..":g+="/..");return g.length>0?g+n.slice(o+u):(o+=u,n.charCodeAt(o)===47&&++o,n.slice(o))},_makeLong:function(e){return e},dirname:function(e){if(Qa(e),e.length===0)return".";for(var n=e.charCodeAt(0),r=n===47,s=-1,i=!0,o=e.length-1;o>=1;--o)if(n=e.charCodeAt(o),n===47){if(!i){s=o;break}}else i=!1;return s===-1?r?"/":".":r&&s===1?"//":e.slice(0,s)},basename:function(e,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');Qa(e);var r=0,s=-1,i=!0,o;if(n!==void 0&&n.length>0&&n.length<=e.length){if(n.length===e.length&&n===e)return"";var a=n.length-1,l=-1;for(o=e.length-1;o>=0;--o){var c=e.charCodeAt(o);if(c===47){if(!i){r=o+1;break}}else l===-1&&(i=!1,l=o+1),a>=0&&(c===n.charCodeAt(a)?--a===-1&&(s=o):(a=-1,s=l))}return r===s?s=l:s===-1&&(s=e.length),e.slice(r,s)}else{for(o=e.length-1;o>=0;--o)if(e.charCodeAt(o)===47){if(!i){r=o+1;break}}else s===-1&&(i=!1,s=o+1);return s===-1?"":e.slice(r,s)}},extname:function(e){Qa(e);for(var n=-1,r=0,s=-1,i=!0,o=0,a=e.length-1;a>=0;--a){var l=e.charCodeAt(a);if(l===47){if(!i){r=a+1;break}continue}s===-1&&(i=!1,s=a+1),l===46?n===-1?n=a:o!==1&&(o=1):n!==-1&&(o=-1)}return n===-1||s===-1||o===0||o===1&&n===s-1&&n===r+1?"":e.slice(n,s)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return yPe("/",e)},parse:function(e){Qa(e);var n={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return n;var r=e.charCodeAt(0),s=r===47,i;s?(n.root="/",i=1):i=0;for(var o=-1,a=0,l=-1,c=!0,u=e.length-1,d=0;u>=i;--u){if(r=e.charCodeAt(u),r===47){if(!c){a=u+1;break}continue}l===-1&&(c=!1,l=u+1),r===46?o===-1?o=u:d!==1&&(d=1):o!==-1&&(d=-1)}return o===-1||l===-1||d===0||d===1&&o===l-1&&o===a+1?l!==-1&&(a===0&&s?n.base=n.name=e.slice(1,l):n.base=n.name=e.slice(a,l)):(a===0&&s?(n.name=e.slice(1,o),n.base=e.slice(1,l)):(n.name=e.slice(a,o),n.base=e.slice(a,l)),n.ext=e.slice(o,l)),a>0?n.dir=e.slice(0,a-1):s&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};wm.posix=wm;var vs=wm;const gc=ao(vs),Th={join:(...t)=>gc.join(...t),dirname:t=>gc.dirname(t),basename:(t,e)=>gc.basename(t,e),extname:t=>gc.extname(t),relative:(t,e)=>gc.relative(t,e),isAbsolute:t=>gc.isAbsolute(t),normalize:t=>gc.normalize(t),parse:t=>gc.parse(t),format:t=>gc.format(t)};function Co(t){throw new Error(`Unreachable: ${t}`)}const ca=Di("ActionRunner");class _h extends Error{_output;_header;constructor(e,n){const r=`Failed To Execute Shell Command: ${e}

Output:
${n}`;super(r),this._header=e,this._output=n,Object.setPrototypeOf(this,_h.prototype),this.name="ActionCommandError"}get output(){return this._output}get header(){return this._header}}class vPe{#t;#n=Promise.resolve();#e;runnerId=tr(`${Date.now()}`);actions=Ld({});onAlert;buildOutput;constructor(e,n,r){this.#t=e,this.#e=n,this.onAlert=r}addAction(e){const{actionId:n}=e;if(this.actions.get()[n])return;const i=new AbortController;this.actions.setKey(n,{...e.action,status:"pending",executed:!1,abort:()=>{i.abort(),this.#o(n,{status:"aborted"})},abortSignal:i.signal}),this.#n.then(()=>{this.#o(n,{status:"running"})})}async runAction(e,n=!1){const{actionId:r}=e,s=this.actions.get()[r];s||Co(`Action ${r} not found`),!s.executed&&(n&&s.type!=="file"||(this.#o(r,{...s,...e.action,executed:!n}),this.#n=this.#n.then(()=>this.#r(r,n)).catch(i=>{console.error("Action failed:",i)}),await this.#n))}async#r(e,n=!1){const r=this.actions.get()[e];this.#o(e,{status:"running"});try{switch(r.type){case"shell":{await this.#a(r);break}case"file":{await this.#i(r);break}case"build":{const s=await this.#c(r);this.buildOutput=s;break}case"start":{this.#s(r).then(()=>this.#o(e,{status:"complete"})).catch(s=>{r.abortSignal.aborted||(this.#o(e,{status:"failed",error:"Action failed"}),ca.error(`[${r.type}]:Action failed

`,s),s instanceof _h&&this.onAlert?.({type:"error",title:"Dev Server Failed",description:s.header,content:s.output}))}),await new Promise(s=>setTimeout(s,2e3));return}}this.#o(e,{status:n?"running":r.abortSignal.aborted?"aborted":"complete"})}catch(s){if(r.abortSignal.aborted||(this.#o(e,{status:"failed",error:"Action failed"}),ca.error(`[${r.type}]:Action failed

`,s),!(s instanceof _h)))return;throw this.onAlert?.({type:"error",title:"Dev Server Failed",description:s.header,content:s.output}),s}}async#a(e){e.type!=="shell"&&Co("Expected shell action");const n=this.#e();await n.ready(),(!n||!n.terminal||!n.process)&&Co("Shell terminal not found");const r=await n.executeCommand(this.runnerId.get(),e.content,()=>{ca.debug(`[${e.type}]:Aborting Action

`,e),e.abort()});if(ca.debug(`${e.type} Shell Response: [exit code:${r?.exitCode}]`),r?.exitCode!=0)throw new _h("Failed To Execute Shell Command",r?.output||"No Output Available")}async#s(e){e.type!=="start"&&Co("Expected shell action"),this.#e||Co("Shell terminal not found");const n=this.#e();await n.ready(),(!n||!n.terminal||!n.process)&&Co("Shell terminal not found");const r=await n.executeCommand(this.runnerId.get(),e.content,()=>{ca.debug(`[${e.type}]:Aborting Action

`,e),e.abort()});if(ca.debug(`${e.type} Shell Response: [exit code:${r?.exitCode}]`),r?.exitCode!=0)throw new _h("Failed To Start Application",r?.output||"No Output Available");return r}async#i(e){e.type!=="file"&&Co("Expected file action");const n=await this.#t,r=Th.relative(n.workdir,e.filePath);let s=Th.dirname(r);if(s=s.replace(/\/+$/g,""),s!==".")try{await n.fs.mkdir(s,{recursive:!0}),ca.debug("Created folder",s)}catch(i){ca.error(`Failed to create folder

`,i)}try{await n.fs.writeFile(r,e.content),ca.debug(`File written ${r}`)}catch(i){ca.error(`Failed to write file

`,i)}}#o(e,n){const r=this.actions.get();this.actions.setKey(e,{...r[e],...n})}async getFileHistory(e){try{const n=await this.#t,r=this.#l(e),s=await n.fs.readFile(r,"utf-8");return JSON.parse(s)}catch(n){return ca.error("Failed to get file history:",n),null}}async saveFileHistory(e,n){const r=this.#l(e);await this.#i({type:"file",filePath:r,content:JSON.stringify(n),changeSource:"auto-save"})}#l(e){return Th.join(".history",e)}async#c(e){e.type!=="build"&&Co("Expected build action");const n=await this.#t,r=await n.spawn("npm",["run","build"]);let s="";r.output.pipeTo(new WritableStream({write(a){s+=a}}));const i=await r.exit;if(i!==0)throw new _h("Build Failed",s||"No Output Available");return{path:Th.join(n.workdir,"dist"),exitCode:i,output:s}}}const _Pe="modulepreload",xPe=function(t){return"/"+t},EB={},ve=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");s=Promise.allSettled(n.map(l=>{if(l=xPe(l),l in EB)return;EB[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":_Pe,c||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},wPe="https://stackblitz.com",EPe=new Error;EPe.stack="";function SPe(){let t,e;function n(){e=new Promise(r=>t=r)}return n(),{get promise(){return e},resolve(r){return t(r)},reset:n}}let Sx;const kPe={authComplete:SPe(),get editorOrigin(){return Sx==null&&(Sx=new URL(globalThis.WEBCONTAINER_API_IFRAME_URL??wPe).origin),Sx},set editorOrigin(t){Sx=t}};function LQ(t){const e={d:{}};for(const n of Object.keys(t)){const r=t[n];if("file"in r){const i=r.file.contents,o=typeof i=="string"?i:CPe(i),a=typeof i=="string"?{}:{b:!0};e.d[n]={f:{c:o,...a}};continue}const s=LQ(r.directory);e.d[n]=s}return e}function CPe(t){let e="";for(const n of t)e+=String.fromCharCode(n);return e}var ey;(function(t){t.UncaughtException="PREVIEW_UNCAUGHT_EXCEPTION",t.UnhandledRejection="PREVIEW_UNHANDLED_REJECTION",t.ConsoleError="PREVIEW_CONSOLE_ERROR"})(ey||(ey={}));var APe=Object.defineProperty,TPe=(t,e)=>{for(var n in e)APe(t,n,{get:e[n],enumerable:!0})},Uo={};TPe(Uo,{createEndpoint:()=>OQ,expose:()=>bO,proxy:()=>$Q,proxyMarker:()=>mO,releaseProxy:()=>DQ,transfer:()=>UQ,transferHandlers:()=>gO,windowEndpoint:()=>LPe,wrap:()=>FQ});var mO=Symbol("Comlink.proxy"),OQ=Symbol("Comlink.endpoint"),DQ=Symbol("Comlink.releaseProxy"),_P=Symbol("Comlink.thrown"),MQ=t=>typeof t=="object"&&t!==null||typeof t=="function",NPe={canHandle:t=>MQ(t)&&t[mO],serialize(t){const{port1:e,port2:n}=new MessageChannel;return bO(t,e),[n,[n]]},deserialize(t){return t.start(),FQ(t)}},PPe={canHandle:t=>MQ(t)&&_P in t,serialize({value:t}){let e;return t instanceof Error?e={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:e={isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},gO=new Map([["proxy",NPe],["throw",PPe]]);function bO(t,e=self){e.addEventListener("message",function n(r){if(!r||!r.data)return;const{id:s,type:i,path:o}=Object.assign({path:[]},r.data),a=(r.data.argumentList||[]).map(xh);let l;try{const c=o.slice(0,-1).reduce((d,h)=>d[h],t),u=o.reduce((d,h)=>d[h],t);switch(i){case 0:l=u;break;case 1:c[o.slice(-1)[0]]=xh(r.data.value),l=!0;break;case 2:l=u.apply(c,a);break;case 3:{const d=new u(...a);l=$Q(d)}break;case 4:{const{port1:d,port2:h}=new MessageChannel;bO(t,h),l=UQ(d,[d])}break;case 5:l=void 0;break}}catch(c){l={value:c,[_P]:0}}Promise.resolve(l).catch(c=>({value:c,[_P]:0})).then(c=>{const[u,d]=yO(c);e.postMessage(Object.assign(Object.assign({},u),{id:s}),d),i===5&&(e.removeEventListener("message",n),jQ(e))})}),e.start&&e.start()}function IPe(t){return t.constructor.name==="MessagePort"}function jQ(t){IPe(t)&&t.close()}function FQ(t,e){return xP(t,[],e)}function kx(t){if(t)throw new Error("Proxy has been released and is not useable")}function xP(t,e=[],n=function(){}){let r=!1;const s=new Proxy(n,{get(i,o){if(kx(r),o===DQ)return()=>Lp(t,{type:5,path:e.map(a=>a.toString())}).then(()=>{jQ(t),r=!0});if(o==="then"){if(e.length===0)return{then:()=>s};const a=Lp(t,{type:0,path:e.map(l=>l.toString())}).then(xh);return a.then.bind(a)}return xP(t,[...e,o])},set(i,o,a){kx(r);const[l,c]=yO(a);return Lp(t,{type:1,path:[...e,o].map(u=>u.toString()),value:l},c).then(xh)},apply(i,o,a){kx(r);const l=e[e.length-1];if(l===OQ)return Lp(t,{type:4}).then(xh);if(l==="bind")return xP(t,e.slice(0,-1));const[c,u]=SB(a);return Lp(t,{type:2,path:e.map(d=>d.toString()),argumentList:c},u).then(xh)},construct(i,o){kx(r);const[a,l]=SB(o);return Lp(t,{type:3,path:e.map(c=>c.toString()),argumentList:a},l).then(xh)}});return s}function RPe(t){return Array.prototype.concat.apply([],t)}function SB(t){const e=t.map(yO);return[e.map(n=>n[0]),RPe(e.map(n=>n[1]))]}var BQ=new WeakMap;function UQ(t,e){return BQ.set(t,e),t}function $Q(t){return Object.assign(t,{[mO]:!0})}function LPe(t,e=self,n="*"){return{postMessage:(r,s)=>t.postMessage(r,n,s),addEventListener:e.addEventListener.bind(e),removeEventListener:e.removeEventListener.bind(e)}}function yO(t){for(const[e,n]of gO)if(n.canHandle(t)){const[r,s]=n.serialize(t);return[{type:3,name:e,value:r},s]}return[{type:0,value:t},BQ.get(t)||[]]}function xh(t){switch(t.type){case 3:return gO.get(t.name).deserialize(t.value);case 0:return t.value}}function Lp(t,e,n){return new Promise(r=>{const s=OPe();t.addEventListener("message",function i(o){!o.data||!o.data.id||o.data.id!==s||(t.removeEventListener("message",i),r(o.data))}),t.start&&t.start(),t.postMessage(Object.assign({id:s},e),n)})}function OPe(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}const DPe=[ey.ConsoleError,ey.UncaughtException,ey.UnhandledRejection];function MPe(t){return!(t==null||typeof t!="object"||!("type"in t)||!DPe.includes(t.type))}let Cx=null,Ax=null,HT={};const jPe=new TextDecoder,FPe=new TextEncoder;class Nh{_instance;_runtimeInfo;fs;internal;static _instance=null;_tornDown=!1;_unsubscribeFromTokenChangedListener=()=>{};constructor(e,n,r){this._instance=e,this._runtimeInfo=r,this.fs=new WPe(n),this.internal=new BPe(e)}async spawn(e,n,r){let s=[];Array.isArray(n)?s=n:r=n;let i,o=new ReadableStream;if(r?.output!==!1){const y=VT();i=y.push,o=y.stream}let a,l,c,u;if(l=new ReadableStream,u=new ReadableStream,r?.stdout){const y=VT();a=y.push,l=y.stream}if(r?.stderr){const y=VT();c=y.push,u=y.stream}const d=n2(zT(i)),h=n2(zT(a)),f=n2(zT(c)),g=await this._instance.run({command:e,args:s,cwd:r?.cwd,env:r?.env,terminal:r?.terminal},h,f,d);return new VPe(g,o,l,u)}on(e,n){if(e==="preview-message"){const i=n;n=o=>{MPe(o)&&i(o)}}const{listener:r,subscribe:s}=wP(n);return s(this._instance.on(e,Uo.proxy(r)))}mount(e,n){const r=e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):FPe.encode(JSON.stringify(LQ(e)));return this._instance.loadFiles(Uo.transfer(r,[r.buffer]),{mountPoints:n?.mountPoint})}get path(){return this._runtimeInfo.path}get workdir(){return this._runtimeInfo.cwd}teardown(){if(this._tornDown)throw new Error("WebContainer already torn down");this._tornDown=!0,this._unsubscribeFromTokenChangedListener(),this.fs._teardown(),this._instance.teardown(),this._instance[Uo.releaseProxy](),Nh._instance===this&&(Nh._instance=null)}static async boot(e={}){const{workdirName:n}=e;if(window.crossOriginIsolated&&e.coep==="none"&&console.warn(`A Cross-Origin-Embedder-Policy header is required in cross origin isolated environments.
Set the 'coep' option to 'require-corp'.`),n?.includes("/")||n===".."||n===".")throw new Error("workdirName should be a valid folder name");for(;Cx;)await Cx;if(Nh._instance)throw new Error("Only a single WebContainer instance can be booted");const r=GPe(e);Cx=r.catch(()=>{});try{const s=await r;return Nh._instance=s,s}finally{Cx=null}}}class BPe{_instance;constructor(e){this._instance=e}watchPaths(e,n){const{listener:r,subscribe:s}=wP(n);return s(this._instance.watchPaths(e,Uo.proxy(r)))}getProcesses(){return this._instance.getProcesses()}onProcessesRemove(e){const{listener:n,subscribe:r}=wP(e);return r(this._instance.onProcessesRemove(Uo.proxy(n)))}serialize(e,n){return this._instance.serialize(e,n)}}const UPe=1,$Pe=2;class HPe{name;_type;constructor(e,n){this.name=e,this._type=n}isFile(){return this._type===UPe}isDirectory(){return this._type===$Pe}}class zPe{_apiClient;_path;_options;_listener;_wrappedListener;_watcher;_closed=!1;constructor(e,n,r,s){this._apiClient=e,this._path=n,this._options=r,this._listener=s,this._apiClient._watchers.add(this),this._wrappedListener=(i,o)=>{this._listener&&!this._closed&&this._listener(i,o)},this._apiClient._fs.watch(this._path,this._options,n2(this._wrappedListener)).then(i=>{this._watcher=i,this._closed&&this._teardown()}).catch(console.error)}close(){this._closed||(this._closed=!0,this._apiClient._watchers.delete(this),this._teardown())}_teardown(){this._watcher?.close().finally(()=>{this._watcher?.[Uo.releaseProxy]()})}}class VPe{output;input;exit;_process;stdout;stderr;constructor(e,n,r,s){this.output=n,this._process=e,this.input=new WritableStream({write:i=>{this._getProcess()?.write(i).catch(()=>{})}}),this.exit=this._onExit(),this.stdout=r,this.stderr=s}kill(){this._getProcess()?.kill()}resize(e){this._getProcess()?.resize(e)}async _onExit(){try{return await this._process.onExit}finally{this._process?.[Uo.releaseProxy](),this._process=null}}_getProcess(){return this._process==null&&console.warn("This process already exited"),this._process}}class WPe{_fs;_watchers=new Set([]);constructor(e){this._fs=e}rm(...e){return this._fs.rm(...e)}async readFile(e,n){return await this._fs.readFile(e,n)}async rename(e,n){return await this._fs.rename(e,n)}async writeFile(e,n,r){if(n instanceof Uint8Array){const s=n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength);n=Uo.transfer(new Uint8Array(s),[s])}await this._fs.writeFile(e,n,r)}async readdir(e,n){const r=await this._fs.readdir(e,n);return KPe(r)||YPe(r)?r:r.map(i=>new HPe(i.name,i["Symbol(type)"]))}async mkdir(e,n){return await this._fs.mkdir(e,n)}watch(e,n,r){return typeof n=="function"&&(r=n,n=null),new zPe(this,e,n,r)}_teardown(){this._fs[Uo.releaseProxy]();for(const e of this._watchers)e.close()}}async function GPe(t){const{serverPromise:e}=qPe(t),r=await(await e).build({host:window.location.host,version:"1.3.0-internal.10",workdirName:t.workdirName,forwardPreviewErrors:t.forwardPreviewErrors}),s=await r.fs(),i=await r.runtimeInfo();return new Nh(r,s,i)}function zT(t){if(t!=null)return e=>{e instanceof Uint8Array?t(jPe.decode(e)):e==null&&t(null)}}function n2(t){if(t!=null)return Uo.proxy(t)}function qPe(t){if(Ax!=null)return t.coep!==HT.coep&&(console.warn(`Attempting to boot WebContainer with 'coep: ${t.coep}'`),console.warn(`First boot had 'coep: ${HT.coep}', new settings will not take effect!`)),{serverPromise:Ax};const e=document.createElement("iframe");e.style.display="none",e.setAttribute("allow","cross-origin-isolated");const n=XPe();t.coep&&n.searchParams.set("coep",t.coep),e.src=n.toString();const{origin:r}=n;return HT={...t},Ax=new Promise(s=>{const i=o=>{if(o.origin!==r)return;const{data:a}=o;if(a.type==="init"){s(Uo.wrap(o.ports[0]));return}if(a.type==="warning"){console[a.level].call(console,a.message);return}};window.addEventListener("message",i)}),document.body.insertBefore(e,null),{serverPromise:Ax}}function KPe(t){return typeof t[0]=="string"}function YPe(t){return t[0]instanceof Uint8Array}function XPe(){const t=new URL(kPe.editorOrigin);return t.pathname="/headless",t.searchParams.set("version","1.3.0-internal.10"),t}function VT(){let t=null;return{stream:new ReadableStream({start(r){t=r}}),push:r=>{r!=null?t?.enqueue(r):(t?.close(),t=null)}}}function wP(t){let e=!1,n=()=>{};return{subscribe(s){return s.then(i=>{n=i,e&&n()}),()=>{e=!0,n()}},listener:(...s)=>{e||t(...s)}}}function JPe(t){const e=n=>{if(!/^https?:\/\/[^\/]+\.webcontainer-api\.io(\/.*)?$/.test(n))return n;const s=/^https?:\/\/[^\/]+\.webcontainer-api\.io\/(.*?)$/;return n.match(s)?.[1]||""};return t.split(`
`).map(n=>n.replace(/(https?:\/\/[^\/]+\.webcontainer-api\.io\/[^\s\)]+)/g,r=>e(r))).join(`
`)}let qu=new Promise(()=>{});qu=Promise.resolve().then(()=>Nh.boot({coep:"credentialless",workdirName:kJ,forwardPreviewErrors:!0})).then(async t=>{const{workbenchStore:e}=await ve(async()=>{const{workbenchStore:n}=await Promise.resolve().then(()=>IIe);return{workbenchStore:n}},void 0);return t.on("preview-message",n=>{if(console.log("WebContainer preview message:",n),n.type==="PREVIEW_UNCAUGHT_EXCEPTION"||n.type==="PREVIEW_UNHANDLED_REJECTION"){const r=n.type==="PREVIEW_UNHANDLED_REJECTION";e.actionAlert.set({type:"preview",title:r?"Unhandled Promise Rejection":"Uncaught Exception",description:n.message,content:`Error occurred at ${n.pathname}${n.search}${n.hash}
Port: ${n.port}

Stack trace:
${JPe(n.stack||"")}`,source:"preview"})}}),t});class ZPe{#t;selectedFile=tr();documents=Ld({});currentDocument=iR([this.documents,this.selectedFile],(e,n)=>{if(n)return e[n]});constructor(e){this.#t=e}setDocuments(e){const n=this.documents.value;this.documents.set(Object.fromEntries(Object.entries(e).map(([r,s])=>{if(s===void 0||s.type==="folder")return;const i=n?.[r];return[r,{value:s.content,filePath:r,scroll:i?.scroll}]}).filter(Boolean)))}setSelectedFile(e){this.selectedFile.set(e)}updateScrollPosition(e,n){const s=this.documents.get()[e];s&&this.documents.setKey(e,{...s,scroll:n})}updateFile(e,n){const s=this.documents.get()[e];if(!s)return;s.value!==n&&this.documents.setKey(e,{...s,value:n})}}function r2(t,e){if(!t)return null;const n="utf8",r="binary",s=e?.chunkLength??24;let i=e?.chunkBegin??0;if(e?.chunkBegin==null){let o=r2(t,{chunkLength:s,chunkBegin:i});return o===n&&(i=Math.max(0,Math.floor(t.length/2)-s),o=r2(t,{chunkLength:s,chunkBegin:i}),o===n&&(i=Math.max(0,t.length-s),o=r2(t,{chunkLength:s,chunkBegin:i}))),o}else{if(i=QPe(t,i),i===-1)return r;const o=e4e(t,Math.min(t.length,i+s));if(o>t.length)return r;const a=t.toString(n,i,o);for(let l=0;l<a.length;++l){const c=a.charCodeAt(l);if(c===65533||c<=8)return r}return n}}function QPe(t,e){if(e===0)return 0;if(!t4e(t[e]))return e;let n=e-3;return n>=0&&Em(t[n])||(n=e-2,n>=0&&(Em(t[n])||UE(t[n])))||(n=e-1,n>=0&&(Em(t[n])||UE(t[n])||HQ(t[n])))?n:-1}function e4e(t,e){if(e===t.length)return e;let n=e-3;if(n>=0&&Em(t[n]))return e+1;if(n=e-2,n>=0){if(Em(t[n]))return e+2;if(UE(t[n]))return e+1}if(n=e-1,n>=0){if(Em(t[n]))return e+3;if(UE(t[n]))return e+2;if(HQ(t[n]))return e+1}return e}function Em(t){return t>>3===30}function UE(t){return t>>4===14}function HQ(t){return t>>5===6}function t4e(t){return t>>6===2}function n4e(t,e){let n,r=[],s=Promise.resolve();const i=()=>{n=self.setTimeout(async()=>{await s,r.length>0&&(s=Promise.resolve(e(r))),n=void 0,r=[]},t)};return(...o)=>{r.push(o),n||i()}}function Md(){}Md.prototype={diff:function(e,n){var r,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=s.callback;typeof s=="function"&&(i=s,s={}),this.options=s;var o=this;function a(E){return i?(setTimeout(function(){i(void 0,E)},0),!0):E}e=this.castInput(e),n=this.castInput(n),e=this.removeEmpty(this.tokenize(e)),n=this.removeEmpty(this.tokenize(n));var l=n.length,c=e.length,u=1,d=l+c;s.maxEditLength&&(d=Math.min(d,s.maxEditLength));var h=(r=s.timeout)!==null&&r!==void 0?r:1/0,f=Date.now()+h,g=[{oldPos:-1,lastComponent:void 0}],y=this.extractCommon(g[0],n,e,0);if(g[0].oldPos+1>=c&&y+1>=l)return a([{value:this.join(n),count:n.length}]);var m=-1/0,b=1/0;function v(){for(var E=Math.max(m,-u);E<=Math.min(b,u);E+=2){var w=void 0,S=g[E-1],k=g[E+1];S&&(g[E-1]=void 0);var x=!1;if(k){var I=k.oldPos-E;x=k&&0<=I&&I<l}var R=S&&S.oldPos+1<c;if(!x&&!R){g[E]=void 0;continue}if(!R||x&&S.oldPos+1<k.oldPos?w=o.addToPath(k,!0,void 0,0):w=o.addToPath(S,void 0,!0,1),y=o.extractCommon(w,n,e,E),w.oldPos+1>=c&&y+1>=l)return a(r4e(o,w.lastComponent,n,e,o.useLongestToken));g[E]=w,w.oldPos+1>=c&&(b=Math.min(b,E-1)),y+1>=l&&(m=Math.max(m,E+1))}u++}if(i)(function E(){setTimeout(function(){if(u>d||Date.now()>f)return i();v()||E()},0)})();else for(;u<=d&&Date.now()<=f;){var _=v();if(_)return _}},addToPath:function(e,n,r,s){var i=e.lastComponent;return i&&i.added===n&&i.removed===r?{oldPos:e.oldPos+s,lastComponent:{count:i.count+1,added:n,removed:r,previousComponent:i.previousComponent}}:{oldPos:e.oldPos+s,lastComponent:{count:1,added:n,removed:r,previousComponent:i}}},extractCommon:function(e,n,r,s){for(var i=n.length,o=r.length,a=e.oldPos,l=a-s,c=0;l+1<i&&a+1<o&&this.equals(n[l+1],r[a+1]);)l++,a++,c++;return c&&(e.lastComponent={count:c,previousComponent:e.lastComponent}),e.oldPos=a,l},equals:function(e,n){return this.options.comparator?this.options.comparator(e,n):e===n||this.options.ignoreCase&&e.toLowerCase()===n.toLowerCase()},removeEmpty:function(e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(e[r]);return n},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}};function r4e(t,e,n,r,s){for(var i=[],o;e;)i.push(e),o=e.previousComponent,delete e.previousComponent,e=o;i.reverse();for(var a=0,l=i.length,c=0,u=0;a<l;a++){var d=i[a];if(d.removed){if(d.value=t.join(r.slice(u,u+d.count)),u+=d.count,a&&i[a-1].added){var f=i[a-1];i[a-1]=i[a],i[a]=f}}else{if(!d.added&&s){var h=n.slice(c,c+d.count);h=h.map(function(y,m){var b=r[u+m];return b.length>y.length?b:y}),d.value=t.join(h)}else d.value=t.join(n.slice(c,c+d.count));c+=d.count,d.added||(u+=d.count)}}var g=i[l-1];return l>1&&typeof g.value=="string"&&(g.added||g.removed)&&t.equals("",g.value)&&(i[l-2].value+=g.value,i.pop()),i}var kB=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,CB=/\S/,zQ=new Md;zQ.equals=function(t,e){return this.options.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t===e||this.options.ignoreWhitespace&&!CB.test(t)&&!CB.test(e)};zQ.tokenize=function(t){for(var e=t.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<e.length-1;n++)!e[n+1]&&e[n+2]&&kB.test(e[n])&&kB.test(e[n+2])&&(e[n]+=e[n+2],e.splice(n+1,2),n--);return e};var vO=new Md;vO.tokenize=function(t){this.options.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));var e=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var r=0;r<n.length;r++){var s=n[r];r%2&&!this.options.newlineIsToken?e[e.length-1]+=s:(this.options.ignoreWhitespace&&(s=s.trim()),e.push(s))}return e};function og(t,e,n){return vO.diff(t,e,n)}var s4e=new Md;s4e.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};var i4e=new Md;i4e.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function s2(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?s2=function(e){return typeof e}:s2=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s2(t)}function WT(t){return o4e(t)||a4e(t)||l4e(t)||c4e()}function o4e(t){if(Array.isArray(t))return EP(t)}function a4e(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function l4e(t,e){if(t){if(typeof t=="string")return EP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return EP(t,e)}}function EP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u4e=Object.prototype.toString,u1=new Md;u1.useLongestToken=!0;u1.tokenize=vO.tokenize;u1.castInput=function(t){var e=this.options,n=e.undefinedReplacement,r=e.stringifyReplacer,s=r===void 0?function(i,o){return typeof o>"u"?n:o}:r;return typeof t=="string"?t:JSON.stringify(SP(t,null,null,s),s,"  ")};u1.equals=function(t,e){return Md.prototype.equals.call(u1,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"))};function SP(t,e,n,r,s){e=e||[],n=n||[],r&&(t=r(s,t));var i;for(i=0;i<e.length;i+=1)if(e[i]===t)return n[i];var o;if(u4e.call(t)==="[object Array]"){for(e.push(t),o=new Array(t.length),n.push(o),i=0;i<t.length;i+=1)o[i]=SP(t[i],e,n,r,s);return e.pop(),n.pop(),o}if(t&&t.toJSON&&(t=t.toJSON()),s2(t)==="object"&&t!==null){e.push(t),o={},n.push(o);var a=[],l;for(l in t)t.hasOwnProperty(l)&&a.push(l);for(a.sort(),i=0;i<a.length;i+=1)l=a[i],o[l]=SP(t[l],e,n,r,l);e.pop(),n.pop()}else o=t;return o}var kP=new Md;kP.tokenize=function(t){return t.slice()};kP.join=kP.removeEmpty=function(t){return t};function d4e(t,e,n,r,s,i,o){o||(o={}),typeof o.context>"u"&&(o.context=4);var a=og(n,r,o);if(!a)return;a.push({value:"",lines:[]});function l(b){return b.map(function(v){return" "+v})}for(var c=[],u=0,d=0,h=[],f=1,g=1,y=function(v){var _=a[v],E=_.lines||_.value.replace(/\n$/,"").split(`
`);if(_.lines=E,_.added||_.removed){var w;if(!u){var S=a[v-1];u=f,d=g,S&&(h=o.context>0?l(S.lines.slice(-o.context)):[],u-=h.length,d-=h.length)}(w=h).push.apply(w,WT(E.map(function(P){return(_.added?"+":"-")+P}))),_.added?g+=E.length:f+=E.length}else{if(u)if(E.length<=o.context*2&&v<a.length-2){var k;(k=h).push.apply(k,WT(l(E)))}else{var x,I=Math.min(E.length,o.context);(x=h).push.apply(x,WT(l(E.slice(0,I))));var R={oldStart:u,oldLines:f-u+I,newStart:d,newLines:g-d+I,lines:h};if(v>=a.length-2&&E.length<=o.context){var C=/\n$/.test(n),N=/\n$/.test(r),O=E.length==0&&h.length>R.oldLines;!C&&O&&n.length>0&&h.splice(R.oldLines,0,"\\ No newline at end of file"),(!C&&!O||!N)&&h.push("\\ No newline at end of file")}c.push(R),u=0,d=0,h=[]}f+=E.length,g+=E.length}},m=0;m<a.length;m++)y(m);return{oldFileName:t,newFileName:e,oldHeader:s,newHeader:i,hunks:c}}function VQ(t){if(Array.isArray(t))return t.map(VQ).join(`
`);var e=[];t.oldFileName==t.newFileName&&e.push("Index: "+t.oldFileName),e.push("==================================================================="),e.push("--- "+t.oldFileName+(typeof t.oldHeader>"u"?"":"	"+t.oldHeader)),e.push("+++ "+t.newFileName+(typeof t.newHeader>"u"?"":"	"+t.newHeader));for(var n=0;n<t.hunks.length;n++){var r=t.hunks[n];r.oldLines===0&&(r.oldStart-=1),r.newLines===0&&(r.newStart-=1),e.push("@@ -"+r.oldStart+","+r.oldLines+" +"+r.newStart+","+r.newLines+" @@"),e.push.apply(e,r.lines)}return e.join(`
`)+`
`}function h4e(t,e,n,r,s,i,o){return VQ(d4e(t,e,n,r,s,i,o))}function f4e(t,e){const n={};let r=!1;for(const[s,i]of e){const o=t[s];if(o?.type!=="file")continue;const a=WQ(s,i,o.content);a&&(r=!0,a.length>o.content.length?n[s]={type:"file",content:o.content}:n[s]={type:"diff",content:a})}if(r)return n}function WQ(t,e,n){let r=h4e(t,t,e,n);const s=`--- ${t}
+++ ${t}
`,i=r.indexOf(s);if(i>=0&&(r=r.slice(i+s.length)),r!=="")return r}const p4e=new RegExp(`^${Zc}/`);function ty(t){return t.replace(p4e,"")}const AB=Di("FilesStore"),m4e=new TextDecoder("utf8",{fatal:!0});class g4e{#t;#n=0;#e=new Map;files=Ld({});get filesCount(){return this.#n}constructor(e){this.#t=e,this.#r()}getFile(e){const n=this.files.get()[e];if(n?.type==="file")return n}getFileModifications(){return f4e(this.files.get(),this.#e)}getModifiedFiles(){let e;for(const[n,r]of this.#e){const s=this.files.get()[n];s?.type==="file"&&s.content!==r&&(e||(e={}),e[n]=s)}return e}resetFileModifications(){this.#e.clear()}async saveFile(e,n){const r=await this.#t;try{const s=Th.relative(r.workdir,e);if(!s)throw new Error(`EINVAL: invalid file path, write '${s}'`);const i=this.getFile(e)?.content;!i&&i!==""&&Co("Expected content to be defined"),await r.fs.writeFile(s,n),this.#e.has(e)||this.#e.set(e,i),this.files.setKey(e,{type:"file",content:n,isBinary:!1}),AB.info("File updated")}catch(s){throw AB.error(`Failed to update file content

`,s),s}}async#r(){(await this.#t).internal.watchPaths({include:[`${Zc}/**`],exclude:["**/node_modules",".git"],includeContent:!0},n4e(100,this.#a.bind(this)))}#a(e){const n=e.flat(2);for(const{type:r,path:s,buffer:i}of n){const o=s.replace(/\/+$/g,"");switch(r){case"add_dir":{this.files.setKey(o,{type:"folder"});break}case"remove_dir":{this.files.setKey(o,void 0);for(const[a]of Object.entries(this.files))a.startsWith(o)&&this.files.setKey(a,void 0);break}case"add_file":case"change":{r==="add_file"&&this.#n++;let a="";const l=b4e(i);l||(a=this.#s(i)),this.files.setKey(o,{type:"file",content:a,isBinary:l});break}case"remove_file":{this.#n--,this.files.setKey(o,void 0);break}}}}#s(e){if(!e||e.byteLength===0)return"";try{return m4e.decode(e)}catch(n){return console.log(n),""}}}function b4e(t){return t===void 0?!1:r2(y4e(t),{chunkLength:100})==="binary"}function y4e(t){return IK.from(t.buffer,t.byteOffset,t.byteLength)}const v4e="preview-updates";class _4e{#t=new Map;#n;#e;#r=new Map;#a=new Set;#s=new Map;#i=300;#o;previews=tr([]);constructor(e){if(this.#n=e,this.#e=new BroadcastChannel(v4e),this.#o=new BroadcastChannel("storage-sync-channel"),this.#e.onmessage=n=>{const{type:r,previewId:s}=n.data;if(r==="file-change"){const i=n.data.timestamp,o=this.#r.get(s)||0;i>o&&(this.#r.set(s,i),this.refreshPreview(s))}},this.#o.onmessage=n=>{const{storage:r,source:s}=n.data;r&&s!==this._getTabId()&&this._syncStorage(r)},typeof window<"u"){const n=localStorage.setItem;localStorage.setItem=(...r)=>{n.apply(localStorage,r),this._broadcastStorageSync()}}this.#l()}_getTabId(){return typeof window<"u"?(window._tabId||(window._tabId=Math.random().toString(36).substring(2,15)),window._tabId):""}_syncStorage(e){if(typeof window<"u"&&(Object.entries(e).forEach(([r,s])=>{try{Object.getPrototypeOf(localStorage).setItem.call(localStorage,r,s)}catch(i){console.error("[Preview] Error syncing storage:",i)}}),this.previews.get().forEach(r=>{const s=this.getPreviewId(r.baseUrl);s&&this.refreshPreview(s)}),typeof window<"u"&&window.location)){const r=document.querySelector("iframe");r&&(r.src=r.src)}}_broadcastStorageSync(){if(typeof window<"u"){const e={};for(let n=0;n<localStorage.length;n++){const r=localStorage.key(n);r&&(e[r]=localStorage.getItem(r)||"")}this.#o.postMessage({type:"storage-sync",storage:e,source:this._getTabId(),timestamp:Date.now()})}}async#l(){const e=await this.#n;e.on("server-ready",(n,r)=>{console.log("[Preview] Server ready on port:",n,r),this.broadcastUpdate(r),this._broadcastStorageSync()});try{(await e.fs.watch("**/*",{persistent:!0})).addEventListener("change",async()=>{const r=this.previews.get();for(const s of r){const i=this.getPreviewId(s.baseUrl);i&&this.broadcastFileChange(i)}}),typeof window<"u"&&new MutationObserver(s=>{this._broadcastStorageSync()}).observe(document.body,{childList:!0,subtree:!0,characterData:!0,attributes:!0})}catch(n){console.error("[Preview] Error setting up watchers:",n)}e.on("port",(n,r,s)=>{let i=this.#t.get(n);if(r==="close"&&i){this.#t.delete(n),this.previews.set(this.previews.get().filter(a=>a.port!==n));return}const o=this.previews.get();i||(i={port:n,ready:r==="open",baseUrl:s},this.#t.set(n,i),o.push(i)),i.ready=r==="open",i.baseUrl=s,this.previews.set([...o]),r==="open"&&this.broadcastUpdate(s)})}getPreviewId(e){const n=e.match(/^https?:\/\/([^.]+)\.local-credentialless\.webcontainer-api\.io/);return n?n[1]:null}broadcastStateChange(e){const n=Date.now();this.#r.set(e,n),this.#e.postMessage({type:"state-change",previewId:e,timestamp:n})}broadcastFileChange(e){const n=Date.now();this.#r.set(e,n),this.#e.postMessage({type:"file-change",previewId:e,timestamp:n})}broadcastUpdate(e){const n=this.getPreviewId(e);if(n){const r=Date.now();this.#r.set(n,r),this.#e.postMessage({type:"file-change",previewId:n,timestamp:r})}}refreshPreview(e){const n=this.#s.get(e);n&&clearTimeout(n);const r=setTimeout(()=>{const s=this.previews.get(),i=s.find(o=>this.getPreviewId(o.baseUrl)===e);i&&(i.ready=!1,this.previews.set([...s]),requestAnimationFrame(()=>{i.ready=!0,this.previews.set([...s])})),this.#s.delete(e)},this.#i);this.#s.set(e,r)}}function GQ(){if(typeof Promise.withResolvers=="function")return Promise.withResolvers();let t,e;const n=new Promise((r,s)=>{t=r,e=s});return{resolve:t,reject:e,promise:n}}async function x4e(t,e){const n=[],r=await t.spawn("/bin/jsh",["--osc",...n],{terminal:{cols:e.cols??80,rows:e.rows??15}}),s=r.input.getWriter(),i=r.output,o=GQ();let a=!1;return i.pipeTo(new WritableStream({write(l){if(!a){const[,c]=l.match(/\x1b\]654;([^\x07]+)\x07/)||[];c==="interactive"&&(a=!0,o.resolve())}e.write(l)}})),e.onData(l=>{a&&s.write(l)}),await o.promise,r}class w4e{#t;#n;#e;#r;#a;executionState=tr();#s;#i;constructor(){this.#n=new Promise(e=>{this.#t=e})}ready(){return this.#n}async init(e,n){this.#e=e,this.#r=n;const{process:r,output:s}=await this.newBoltShellProcess(e,n);this.#a=r,this.#s=s.getReader(),await this.waitTillOscCode("interactive"),this.#t?.()}get terminal(){return this.#r}get process(){return this.#a}async executeCommand(e,n,r){if(!this.process||!this.terminal)return;const s=this.executionState.get();s?.active&&s.abort&&s.abort(),this.terminal.input(""),await this.waitTillOscCode("prompt"),s&&s.executionPrms&&await s.executionPrms,this.terminal.input(n.trim()+`
`);const i=this.getCurrentExecutionResult();this.executionState.set({sessionId:e,active:!0,executionPrms:i,abort:r});const o=await i;if(this.executionState.set({sessionId:e,active:!1}),o)try{o.output=E4e(o.output)}catch(a){console.log("failed to format terminal output",a)}return o}async newBoltShellProcess(e,n){const r=[],s=await e.spawn("/bin/jsh",["--osc",...r],{terminal:{cols:n.cols??80,rows:n.rows??15}}),i=s.input.getWriter();this.#i=i;const[o,a]=s.output.tee(),l=GQ();let c=!1;return a.pipeTo(new WritableStream({write(u){if(!c){const[,d]=u.match(/\x1b\]654;([^\x07]+)\x07/)||[];d==="interactive"&&(c=!0,l.resolve())}n.write(u)}})),n.onData(u=>{c&&i.write(u)}),await l.promise,{process:s,output:o}}async getCurrentExecutionResult(){const{output:e,exitCode:n}=await this.waitTillOscCode("exit");return{output:e,exitCode:n}}async waitTillOscCode(e){let n="",r=0;if(!this.#s)return{output:n,exitCode:r};const s=this.#s;for(;;){const{value:i,done:o}=await s.read();if(o)break;const a=i||"";n+=a;const[,l,,,c]=a.match(/\x1b\]654;([^\x07=]+)=?((-?\d+):(\d+))?\x07/)||[];if(l==="exit"&&(r=parseInt(c,10)),l===e)break}return{output:n,exitCode:r}}}function E4e(t){return t.replace(/\x1b\](\d+;[^\x07\x1b]*|\d+[^\x07\x1b]*)\x07/g,"").replace(/\](\d+;[^\n]*|\d+[^\n]*)/g,"").replace(/\u001b\[[\?]?[0-9;]*[a-zA-Z]/g,"").replace(/\x1b\[[\?]?[0-9;]*[a-zA-Z]/g,"").replace(/\u001b\[[0-9;]*m/g,"").replace(/\x1b\[[0-9;]*m/g,"").replace(/\u001b/g,"").replace(/\x1b/g,"").replace(/\r\n/g,`
`).replace(/\r/g,`
`).replace(/\n{3,}/g,`

`).replace(/^([~\/][^\n]+)/m,`$1
`).replace(/(?<!^|\n)>/g,`
>`).replace(/(?<!^|\n|\w)(error|failed|warning|Error|Failed|Warning):/g,`
$1:`).replace(/(?<!^|\n|\/)(at\s+(?!async|sync))/g,`
at `).replace(/\bat\s+async/g,"at async").replace(/(?<!^|\n)(npm ERR!)/g,`
$1`).split(`
`).map(o=>o.trim()).filter(o=>o.length>0).join(`
`).replace(/\n{3,}/g,`

`).replace(/:\s+/g,": ").replace(/\s{2,}/g," ").replace(/^\s+|\s+$/g,"").replace(/\u0000/g,"")}function S4e(){return new w4e}const k4e="\x1B[0m",C4e={red:"\x1B[1;31m"},TB={red:t=>`${C4e.red}${t}${k4e}`};class A4e{#t;#n=[];#e=S4e();showTerminal=tr(!0);constructor(e){this.#t=e}get boltTerminal(){return this.#e}toggleTerminal(e){this.showTerminal.set(e!==void 0?e:!this.showTerminal.get())}async attachBoltTerminal(e){try{const n=await this.#t;await this.#e.init(n,e)}catch(n){e.write(TB.red(`Failed to spawn bolt shell

`)+n.message);return}}async attachTerminal(e){try{const n=await x4e(await this.#t,e);this.#n.push({terminal:e,process:n})}catch(n){e.write(TB.red(`Failed to spawn shell

`)+n.message);return}}onTerminalResize(e,n){for(const{process:r}of this.#n)r.resize({cols:e,rows:n})}}function Tx(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var qQ={exports:{}};(function(t,e){(function(n){t.exports=n()})(function(){return function n(r,s,i){function o(c,u){if(!s[c]){if(!r[c]){var d=typeof Tx=="function"&&Tx;if(!u&&d)return d(c,!0);if(a)return a(c,!0);var h=new Error("Cannot find module '"+c+"'");throw h.code="MODULE_NOT_FOUND",h}var f=s[c]={exports:{}};r[c][0].call(f.exports,function(g){var y=r[c][1][g];return o(y||g)},f,f.exports,n,r,s,i)}return s[c].exports}for(var a=typeof Tx=="function"&&Tx,l=0;l<i.length;l++)o(i[l]);return o}({1:[function(n,r,s){var i=n("./utils"),o=n("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(l){for(var c,u,d,h,f,g,y,m=[],b=0,v=l.length,_=v,E=i.getTypeOf(l)!=="string";b<l.length;)_=v-b,d=E?(c=l[b++],u=b<v?l[b++]:0,b<v?l[b++]:0):(c=l.charCodeAt(b++),u=b<v?l.charCodeAt(b++):0,b<v?l.charCodeAt(b++):0),h=c>>2,f=(3&c)<<4|u>>4,g=1<_?(15&u)<<2|d>>6:64,y=2<_?63&d:64,m.push(a.charAt(h)+a.charAt(f)+a.charAt(g)+a.charAt(y));return m.join("")},s.decode=function(l){var c,u,d,h,f,g,y=0,m=0,b="data:";if(l.substr(0,b.length)===b)throw new Error("Invalid base64 input, it looks like a data url.");var v,_=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&_--,l.charAt(l.length-2)===a.charAt(64)&&_--,_%1!=0)throw new Error("Invalid base64 input, bad content length.");for(v=o.uint8array?new Uint8Array(0|_):new Array(0|_);y<l.length;)c=a.indexOf(l.charAt(y++))<<2|(h=a.indexOf(l.charAt(y++)))>>4,u=(15&h)<<4|(f=a.indexOf(l.charAt(y++)))>>2,d=(3&f)<<6|(g=a.indexOf(l.charAt(y++))),v[m++]=c,f!==64&&(v[m++]=u),g!==64&&(v[m++]=d);return v}},{"./support":30,"./utils":32}],2:[function(n,r,s){var i=n("./external"),o=n("./stream/DataWorker"),a=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function c(u,d,h,f,g){this.compressedSize=u,this.uncompressedSize=d,this.crc32=h,this.compression=f,this.compressedContent=g}c.prototype={getContentWorker:function(){var u=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),d=this;return u.on("end",function(){if(this.streamInfo.data_length!==d.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),u},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(u,d,h){return u.pipe(new a).pipe(new l("uncompressedSize")).pipe(d.compressWorker(h)).pipe(new l("compressedSize")).withStreamInfo("compression",d)},r.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,s){var i=n("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},s.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,s){var i=n("./utils"),o=function(){for(var a,l=[],c=0;c<256;c++){a=c;for(var u=0;u<8;u++)a=1&a?3988292384^a>>>1:a>>>1;l[c]=a}return l}();r.exports=function(a,l){return a!==void 0&&a.length?i.getTypeOf(a)!=="string"?function(c,u,d,h){var f=o,g=h+d;c^=-1;for(var y=h;y<g;y++)c=c>>>8^f[255&(c^u[y])];return-1^c}(0|l,a,a.length,0):function(c,u,d,h){var f=o,g=h+d;c^=-1;for(var y=h;y<g;y++)c=c>>>8^f[255&(c^u.charCodeAt(y))];return-1^c}(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(n,r,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(n,r,s){var i=null;i=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:i}},{lie:37}],7:[function(n,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),a=n("./utils"),l=n("./stream/GenericWorker"),c=i?"uint8array":"array";function u(d,h){l.call(this,"FlateWorker/"+d),this._pako=null,this._pakoAction=d,this._pakoOptions=h,this.meta={}}s.magic="\b\0",a.inherits(u,l),u.prototype.processChunk=function(d){this.meta=d.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(c,d.data),!1)},u.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var d=this;this._pako.onData=function(h){d.push({data:h,meta:d.meta})}},s.compressWorker=function(d){return new u("Deflate",d)},s.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,s){function i(f,g){var y,m="";for(y=0;y<g;y++)m+=String.fromCharCode(255&f),f>>>=8;return m}function o(f,g,y,m,b,v){var _,E,w=f.file,S=f.compression,k=v!==c.utf8encode,x=a.transformTo("string",v(w.name)),I=a.transformTo("string",c.utf8encode(w.name)),R=w.comment,C=a.transformTo("string",v(R)),N=a.transformTo("string",c.utf8encode(R)),O=I.length!==w.name.length,P=N.length!==R.length,$="",ee="",J="",Z=w.dir,M=w.date,F={crc32:0,compressedSize:0,uncompressedSize:0};g&&!y||(F.crc32=f.crc32,F.compressedSize=f.compressedSize,F.uncompressedSize=f.uncompressedSize);var G=0;g&&(G|=8),k||!O&&!P||(G|=2048);var D=0,j=0;Z&&(D|=16),b==="UNIX"?(j=798,D|=function(W,re){var te=W;return W||(te=re?16893:33204),(65535&te)<<16}(w.unixPermissions,Z)):(j=20,D|=function(W){return 63&(W||0)}(w.dosPermissions)),_=M.getUTCHours(),_<<=6,_|=M.getUTCMinutes(),_<<=5,_|=M.getUTCSeconds()/2,E=M.getUTCFullYear()-1980,E<<=4,E|=M.getUTCMonth()+1,E<<=5,E|=M.getUTCDate(),O&&(ee=i(1,1)+i(u(x),4)+I,$+="up"+i(ee.length,2)+ee),P&&(J=i(1,1)+i(u(C),4)+N,$+="uc"+i(J.length,2)+J);var V="";return V+=`
\0`,V+=i(G,2),V+=S.magic,V+=i(_,2),V+=i(E,2),V+=i(F.crc32,4),V+=i(F.compressedSize,4),V+=i(F.uncompressedSize,4),V+=i(x.length,2),V+=i($.length,2),{fileRecord:d.LOCAL_FILE_HEADER+V+x+$,dirRecord:d.CENTRAL_FILE_HEADER+i(j,2)+V+i(C.length,2)+"\0\0\0\0"+i(D,4)+i(m,4)+x+$+C}}var a=n("../utils"),l=n("../stream/GenericWorker"),c=n("../utf8"),u=n("../crc32"),d=n("../signature");function h(f,g,y,m){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=g,this.zipPlatform=y,this.encodeFileName=m,this.streamFiles=f,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(h,l),h.prototype.push=function(f){var g=f.meta.percent||0,y=this.entriesCount,m=this._sources.length;this.accumulate?this.contentBuffer.push(f):(this.bytesWritten+=f.data.length,l.prototype.push.call(this,{data:f.data,meta:{currentFile:this.currentFile,percent:y?(g+100*(y-m-1))/y:100}}))},h.prototype.openedSource=function(f){this.currentSourceOffset=this.bytesWritten,this.currentFile=f.file.name;var g=this.streamFiles&&!f.file.dir;if(g){var y=o(f,g,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:y.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(f){this.accumulate=!1;var g=this.streamFiles&&!f.file.dir,y=o(f,g,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(y.dirRecord),g)this.push({data:function(m){return d.DATA_DESCRIPTOR+i(m.crc32,4)+i(m.compressedSize,4)+i(m.uncompressedSize,4)}(f),meta:{percent:100}});else for(this.push({data:y.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var f=this.bytesWritten,g=0;g<this.dirRecords.length;g++)this.push({data:this.dirRecords[g],meta:{percent:100}});var y=this.bytesWritten-f,m=function(b,v,_,E,w){var S=a.transformTo("string",w(E));return d.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(b,2)+i(b,2)+i(v,4)+i(_,4)+i(S.length,2)+S}(this.dirRecords.length,y,f,this.zipComment,this.encodeFileName);this.push({data:m,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(f){this._sources.push(f);var g=this;return f.on("data",function(y){g.processChunk(y)}),f.on("end",function(){g.closedSource(g.previous.streamInfo),g._sources.length?g.prepareNextSource():g.end()}),f.on("error",function(y){g.error(y)}),this},h.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(f){var g=this._sources;if(!l.prototype.error.call(this,f))return!1;for(var y=0;y<g.length;y++)try{g[y].error(f)}catch{}return!0},h.prototype.lock=function(){l.prototype.lock.call(this);for(var f=this._sources,g=0;g<f.length;g++)f[g].lock()},r.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,s){var i=n("../compressions"),o=n("./ZipFileWorker");s.generateWorker=function(a,l,c){var u=new o(l.streamFiles,c,l.platform,l.encodeFileName),d=0;try{a.forEach(function(h,f){d++;var g=function(v,_){var E=v||_,w=i[E];if(!w)throw new Error(E+" is not a valid compression method !");return w}(f.options.compression,l.compression),y=f.options.compressionOptions||l.compressionOptions||{},m=f.dir,b=f.date;f._compressWorker(g,y).withStreamInfo("file",{name:h,dir:m,date:b,comment:f.comment||"",unixPermissions:f.unixPermissions,dosPermissions:f.dosPermissions}).pipe(u)}),u.entriesCount=d}catch(h){u.error(h)}return u}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,s){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(o,a){return new i().loadAsync(o,a)},i.external=n("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,s){var i=n("./utils"),o=n("./external"),a=n("./utf8"),l=n("./zipEntries"),c=n("./stream/Crc32Probe"),u=n("./nodejsUtils");function d(h){return new o.Promise(function(f,g){var y=h.decompressed.getContentWorker().pipe(new c);y.on("error",function(m){g(m)}).on("end",function(){y.streamInfo.crc32!==h.decompressed.crc32?g(new Error("Corrupted zip : CRC32 mismatch")):f()}).resume()})}r.exports=function(h,f){var g=this;return f=i.extend(f||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),u.isNode&&u.isStream(h)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",h,!0,f.optimizedBinaryString,f.base64).then(function(y){var m=new l(f);return m.load(y),m}).then(function(y){var m=[o.Promise.resolve(y)],b=y.files;if(f.checkCRC32)for(var v=0;v<b.length;v++)m.push(d(b[v]));return o.Promise.all(m)}).then(function(y){for(var m=y.shift(),b=m.files,v=0;v<b.length;v++){var _=b[v],E=_.fileNameStr,w=i.resolve(_.fileNameStr);g.file(w,_.decompressed,{binary:!0,optimizedBinaryString:!0,date:_.date,dir:_.dir,comment:_.fileCommentStr.length?_.fileCommentStr:null,unixPermissions:_.unixPermissions,dosPermissions:_.dosPermissions,createFolders:f.createFolders}),_.dir||(g.file(w).unsafeOriginalName=E)}return m.zipComment.length&&(g.comment=m.zipComment),g})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,s){var i=n("../utils"),o=n("../stream/GenericWorker");function a(l,c){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(c)}i.inherits(a,o),a.prototype._bindStream=function(l){var c=this;(this._stream=l).pause(),l.on("data",function(u){c.push({data:u,meta:{percent:0}})}).on("error",function(u){c.isPaused?this.generatedError=u:c.error(u)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,s){var i=n("readable-stream").Readable;function o(a,l,c){i.call(this,l),this._helper=a;var u=this;a.on("data",function(d,h){u.push(d)||u._helper.pause(),c&&c(h)}).on("error",function(d){u.emit("error",d)}).on("end",function(){u.push(null)})}n("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,s){r.exports={isNode:typeof bt<"u",newBufferFrom:function(i,o){if(bt.from&&bt.from!==Uint8Array.from)return bt.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new bt(i,o)},allocBuffer:function(i){if(bt.alloc)return bt.alloc(i);var o=new bt(i);return o.fill(0),o},isBuffer:function(i){return bt.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,r,s){function i(w,S,k){var x,I=a.getTypeOf(S),R=a.extend(k||{},u);R.date=R.date||new Date,R.compression!==null&&(R.compression=R.compression.toUpperCase()),typeof R.unixPermissions=="string"&&(R.unixPermissions=parseInt(R.unixPermissions,8)),R.unixPermissions&&16384&R.unixPermissions&&(R.dir=!0),R.dosPermissions&&16&R.dosPermissions&&(R.dir=!0),R.dir&&(w=b(w)),R.createFolders&&(x=m(w))&&v.call(this,x,!0);var C=I==="string"&&R.binary===!1&&R.base64===!1;k&&k.binary!==void 0||(R.binary=!C),(S instanceof d&&S.uncompressedSize===0||R.dir||!S||S.length===0)&&(R.base64=!1,R.binary=!0,S="",R.compression="STORE",I="string");var N=null;N=S instanceof d||S instanceof l?S:g.isNode&&g.isStream(S)?new y(w,S):a.prepareContent(w,S,R.binary,R.optimizedBinaryString,R.base64);var O=new h(w,N,R);this.files[w]=O}var o=n("./utf8"),a=n("./utils"),l=n("./stream/GenericWorker"),c=n("./stream/StreamHelper"),u=n("./defaults"),d=n("./compressedObject"),h=n("./zipObject"),f=n("./generate"),g=n("./nodejsUtils"),y=n("./nodejs/NodejsStreamInputAdapter"),m=function(w){w.slice(-1)==="/"&&(w=w.substring(0,w.length-1));var S=w.lastIndexOf("/");return 0<S?w.substring(0,S):""},b=function(w){return w.slice(-1)!=="/"&&(w+="/"),w},v=function(w,S){return S=S!==void 0?S:u.createFolders,w=b(w),this.files[w]||i.call(this,w,null,{dir:!0,createFolders:S}),this.files[w]};function _(w){return Object.prototype.toString.call(w)==="[object RegExp]"}var E={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(w){var S,k,x;for(S in this.files)x=this.files[S],(k=S.slice(this.root.length,S.length))&&S.slice(0,this.root.length)===this.root&&w(k,x)},filter:function(w){var S=[];return this.forEach(function(k,x){w(k,x)&&S.push(x)}),S},file:function(w,S,k){if(arguments.length!==1)return w=this.root+w,i.call(this,w,S,k),this;if(_(w)){var x=w;return this.filter(function(R,C){return!C.dir&&x.test(R)})}var I=this.files[this.root+w];return I&&!I.dir?I:null},folder:function(w){if(!w)return this;if(_(w))return this.filter(function(I,R){return R.dir&&w.test(I)});var S=this.root+w,k=v.call(this,S),x=this.clone();return x.root=k.name,x},remove:function(w){w=this.root+w;var S=this.files[w];if(S||(w.slice(-1)!=="/"&&(w+="/"),S=this.files[w]),S&&!S.dir)delete this.files[w];else for(var k=this.filter(function(I,R){return R.name.slice(0,w.length)===w}),x=0;x<k.length;x++)delete this.files[k[x].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(w){var S,k={};try{if((k=a.extend(w||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=k.type.toLowerCase(),k.compression=k.compression.toUpperCase(),k.type==="binarystring"&&(k.type="string"),!k.type)throw new Error("No output type specified.");a.checkSupport(k.type),k.platform!=="darwin"&&k.platform!=="freebsd"&&k.platform!=="linux"&&k.platform!=="sunos"||(k.platform="UNIX"),k.platform==="win32"&&(k.platform="DOS");var x=k.comment||this.comment||"";S=f.generateWorker(this,k,x)}catch(I){(S=new l("error")).error(I)}return new c(S,k.type||"string",k.mimeType)},generateAsync:function(w,S){return this.generateInternalStream(w).accumulate(S)},generateNodeStream:function(w,S){return(w=w||{}).type||(w.type="nodebuffer"),this.generateInternalStream(w).toNodejsStream(S)}};r.exports=E},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,s){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,s){var i=n("./DataReader");function o(a){i.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}n("../utils").inherits(o,i),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),c=a.charCodeAt(1),u=a.charCodeAt(2),d=a.charCodeAt(3),h=this.length-4;0<=h;--h)if(this.data[h]===l&&this.data[h+1]===c&&this.data[h+2]===u&&this.data[h+3]===d)return h-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),c=a.charCodeAt(1),u=a.charCodeAt(2),d=a.charCodeAt(3),h=this.readData(4);return l===h[0]&&c===h[1]&&u===h[2]&&d===h[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,s){var i=n("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,c=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)c=(c<<8)+this.byteAt(l);return this.index+=a,c},readString:function(a){return i.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,s){var i=n("./Uint8ArrayReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,s){var i=n("./DataReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,s){var i=n("./ArrayReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,s){var i=n("../utils"),o=n("../support"),a=n("./ArrayReader"),l=n("./StringReader"),c=n("./NodeBufferReader"),u=n("./Uint8ArrayReader");r.exports=function(d){var h=i.getTypeOf(d);return i.checkSupport(h),h!=="string"||o.uint8array?h==="nodebuffer"?new c(d):o.uint8array?new u(i.transformTo("uint8array",d)):new a(i.transformTo("array",d)):new l(d)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,s){var i=n("./GenericWorker"),o=n("../utils");function a(l){i.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(a,i),a.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,s){var i=n("./GenericWorker"),o=n("../crc32");function a(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(a,i),a.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,s){var i=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}i.inherits(a,o),a.prototype.processChunk=function(l){if(l){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+l.data.length}o.prototype.processChunk.call(this,l)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,s){var i=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(u){c.dataIsReady=!0,c.data=u,c.max=u&&u.length||0,c.type=i.getTypeOf(u),c.isPaused||c._tickAndRepeat()},function(u){c.error(u)})}i.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,c);break;case"uint8array":l=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":l=this.data.slice(this.index,c)}return this.index=c,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,s){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(l){a.processChunk(l)}),o.on("end",function(){a.end()}),o.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=i},{}],29:[function(n,r,s){var i=n("../utils"),o=n("./ConvertWorker"),a=n("./GenericWorker"),l=n("../base64"),c=n("../support"),u=n("../external"),d=null;if(c.nodestream)try{d=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function h(g,y){return new u.Promise(function(m,b){var v=[],_=g._internalType,E=g._outputType,w=g._mimeType;g.on("data",function(S,k){v.push(S),y&&y(k)}).on("error",function(S){v=[],b(S)}).on("end",function(){try{var S=function(k,x,I){switch(k){case"blob":return i.newBlob(i.transformTo("arraybuffer",x),I);case"base64":return l.encode(x);default:return i.transformTo(k,x)}}(E,function(k,x){var I,R=0,C=null,N=0;for(I=0;I<x.length;I++)N+=x[I].length;switch(k){case"string":return x.join("");case"array":return Array.prototype.concat.apply([],x);case"uint8array":for(C=new Uint8Array(N),I=0;I<x.length;I++)C.set(x[I],R),R+=x[I].length;return C;case"nodebuffer":return bt.concat(x);default:throw new Error("concat : unsupported type '"+k+"'")}}(_,v),w);m(S)}catch(k){b(k)}v=[]}).resume()})}function f(g,y,m){var b=y;switch(y){case"blob":case"arraybuffer":b="uint8array";break;case"base64":b="string"}try{this._internalType=b,this._outputType=y,this._mimeType=m,i.checkSupport(b),this._worker=g.pipe(new o(b)),g.lock()}catch(v){this._worker=new a("error"),this._worker.error(v)}}f.prototype={accumulate:function(g){return h(this,g)},on:function(g,y){var m=this;return g==="data"?this._worker.on(g,function(b){y.call(m,b.data,b.meta)}):this._worker.on(g,function(){i.delay(y,arguments,m)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(g){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new d(this,{objectMode:this._outputType!=="nodebuffer"},g)}},r.exports=f},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof bt<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var i=new ArrayBuffer(0);try{s.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),s.blob=o.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!n("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,s){for(var i=n("./utils"),o=n("./support"),a=n("./nodejsUtils"),l=n("./stream/GenericWorker"),c=new Array(256),u=0;u<256;u++)c[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;c[254]=c[254]=1;function d(){l.call(this,"utf-8 decode"),this.leftOver=null}function h(){l.call(this,"utf-8 encode")}s.utf8encode=function(f){return o.nodebuffer?a.newBufferFrom(f,"utf-8"):function(g){var y,m,b,v,_,E=g.length,w=0;for(v=0;v<E;v++)(64512&(m=g.charCodeAt(v)))==55296&&v+1<E&&(64512&(b=g.charCodeAt(v+1)))==56320&&(m=65536+(m-55296<<10)+(b-56320),v++),w+=m<128?1:m<2048?2:m<65536?3:4;for(y=o.uint8array?new Uint8Array(w):new Array(w),v=_=0;_<w;v++)(64512&(m=g.charCodeAt(v)))==55296&&v+1<E&&(64512&(b=g.charCodeAt(v+1)))==56320&&(m=65536+(m-55296<<10)+(b-56320),v++),m<128?y[_++]=m:(m<2048?y[_++]=192|m>>>6:(m<65536?y[_++]=224|m>>>12:(y[_++]=240|m>>>18,y[_++]=128|m>>>12&63),y[_++]=128|m>>>6&63),y[_++]=128|63&m);return y}(f)},s.utf8decode=function(f){return o.nodebuffer?i.transformTo("nodebuffer",f).toString("utf-8"):function(g){var y,m,b,v,_=g.length,E=new Array(2*_);for(y=m=0;y<_;)if((b=g[y++])<128)E[m++]=b;else if(4<(v=c[b]))E[m++]=65533,y+=v-1;else{for(b&=v===2?31:v===3?15:7;1<v&&y<_;)b=b<<6|63&g[y++],v--;1<v?E[m++]=65533:b<65536?E[m++]=b:(b-=65536,E[m++]=55296|b>>10&1023,E[m++]=56320|1023&b)}return E.length!==m&&(E.subarray?E=E.subarray(0,m):E.length=m),i.applyFromCharCode(E)}(f=i.transformTo(o.uint8array?"uint8array":"array",f))},i.inherits(d,l),d.prototype.processChunk=function(f){var g=i.transformTo(o.uint8array?"uint8array":"array",f.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var y=g;(g=new Uint8Array(y.length+this.leftOver.length)).set(this.leftOver,0),g.set(y,this.leftOver.length)}else g=this.leftOver.concat(g);this.leftOver=null}var m=function(v,_){var E;for((_=_||v.length)>v.length&&(_=v.length),E=_-1;0<=E&&(192&v[E])==128;)E--;return E<0||E===0?_:E+c[v[E]]>_?E:_}(g),b=g;m!==g.length&&(o.uint8array?(b=g.subarray(0,m),this.leftOver=g.subarray(m,g.length)):(b=g.slice(0,m),this.leftOver=g.slice(m,g.length))),this.push({data:s.utf8decode(b),meta:f.meta})},d.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=d,i.inherits(h,l),h.prototype.processChunk=function(f){this.push({data:s.utf8encode(f.data),meta:f.meta})},s.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,s){var i=n("./support"),o=n("./base64"),a=n("./nodejsUtils"),l=n("./external");function c(y){return y}function u(y,m){for(var b=0;b<y.length;++b)m[b]=255&y.charCodeAt(b);return m}n("setimmediate"),s.newBlob=function(y,m){s.checkSupport("blob");try{return new Blob([y],{type:m})}catch{try{var b=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return b.append(y),b.getBlob(m)}catch{throw new Error("Bug : can't construct the Blob.")}}};var d={stringifyByChunk:function(y,m,b){var v=[],_=0,E=y.length;if(E<=b)return String.fromCharCode.apply(null,y);for(;_<E;)m==="array"||m==="nodebuffer"?v.push(String.fromCharCode.apply(null,y.slice(_,Math.min(_+b,E)))):v.push(String.fromCharCode.apply(null,y.subarray(_,Math.min(_+b,E)))),_+=b;return v.join("")},stringifyByChar:function(y){for(var m="",b=0;b<y.length;b++)m+=String.fromCharCode(y[b]);return m},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function h(y){var m=65536,b=s.getTypeOf(y),v=!0;if(b==="uint8array"?v=d.applyCanBeUsed.uint8array:b==="nodebuffer"&&(v=d.applyCanBeUsed.nodebuffer),v)for(;1<m;)try{return d.stringifyByChunk(y,b,m)}catch{m=Math.floor(m/2)}return d.stringifyByChar(y)}function f(y,m){for(var b=0;b<y.length;b++)m[b]=y[b];return m}s.applyFromCharCode=h;var g={};g.string={string:c,array:function(y){return u(y,new Array(y.length))},arraybuffer:function(y){return g.string.uint8array(y).buffer},uint8array:function(y){return u(y,new Uint8Array(y.length))},nodebuffer:function(y){return u(y,a.allocBuffer(y.length))}},g.array={string:h,array:c,arraybuffer:function(y){return new Uint8Array(y).buffer},uint8array:function(y){return new Uint8Array(y)},nodebuffer:function(y){return a.newBufferFrom(y)}},g.arraybuffer={string:function(y){return h(new Uint8Array(y))},array:function(y){return f(new Uint8Array(y),new Array(y.byteLength))},arraybuffer:c,uint8array:function(y){return new Uint8Array(y)},nodebuffer:function(y){return a.newBufferFrom(new Uint8Array(y))}},g.uint8array={string:h,array:function(y){return f(y,new Array(y.length))},arraybuffer:function(y){return y.buffer},uint8array:c,nodebuffer:function(y){return a.newBufferFrom(y)}},g.nodebuffer={string:h,array:function(y){return f(y,new Array(y.length))},arraybuffer:function(y){return g.nodebuffer.uint8array(y).buffer},uint8array:function(y){return f(y,new Uint8Array(y.length))},nodebuffer:c},s.transformTo=function(y,m){if(m=m||"",!y)return m;s.checkSupport(y);var b=s.getTypeOf(m);return g[b][y](m)},s.resolve=function(y){for(var m=y.split("/"),b=[],v=0;v<m.length;v++){var _=m[v];_==="."||_===""&&v!==0&&v!==m.length-1||(_===".."?b.pop():b.push(_))}return b.join("/")},s.getTypeOf=function(y){return typeof y=="string"?"string":Object.prototype.toString.call(y)==="[object Array]"?"array":i.nodebuffer&&a.isBuffer(y)?"nodebuffer":i.uint8array&&y instanceof Uint8Array?"uint8array":i.arraybuffer&&y instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(y){if(!i[y.toLowerCase()])throw new Error(y+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(y){var m,b,v="";for(b=0;b<(y||"").length;b++)v+="\\x"+((m=y.charCodeAt(b))<16?"0":"")+m.toString(16).toUpperCase();return v},s.delay=function(y,m,b){setImmediate(function(){y.apply(b||null,m||[])})},s.inherits=function(y,m){function b(){}b.prototype=m.prototype,y.prototype=new b},s.extend=function(){var y,m,b={};for(y=0;y<arguments.length;y++)for(m in arguments[y])Object.prototype.hasOwnProperty.call(arguments[y],m)&&b[m]===void 0&&(b[m]=arguments[y][m]);return b},s.prepareContent=function(y,m,b,v,_){return l.Promise.resolve(m).then(function(E){return i.blob&&(E instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(E))!==-1)&&typeof FileReader<"u"?new l.Promise(function(w,S){var k=new FileReader;k.onload=function(x){w(x.target.result)},k.onerror=function(x){S(x.target.error)},k.readAsArrayBuffer(E)}):E}).then(function(E){var w=s.getTypeOf(E);return w?(w==="arraybuffer"?E=s.transformTo("uint8array",E):w==="string"&&(_?E=o.decode(E):b&&v!==!0&&(E=function(S){return u(S,i.uint8array?new Uint8Array(S.length):new Array(S.length))}(E))),E):l.Promise.reject(new Error("Can't read the data of '"+y+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,s){var i=n("./reader/readerFor"),o=n("./utils"),a=n("./signature"),l=n("./zipEntry"),c=n("./support");function u(d){this.files=[],this.loadOptions=d}u.prototype={checkSignature:function(d){if(!this.reader.readAndCheckSignature(d)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(h)+", expected "+o.pretty(d)+")")}},isSignature:function(d,h){var f=this.reader.index;this.reader.setIndex(d);var g=this.reader.readString(4)===h;return this.reader.setIndex(f),g},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var d=this.reader.readData(this.zipCommentLength),h=c.uint8array?"uint8array":"array",f=o.transformTo(h,d);this.zipComment=this.loadOptions.decodeFileName(f)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var d,h,f,g=this.zip64EndOfCentralSize-44;0<g;)d=this.reader.readInt(2),h=this.reader.readInt(4),f=this.reader.readData(h),this.zip64ExtensibleData[d]={id:d,length:h,value:f}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var d,h;for(d=0;d<this.files.length;d++)h=this.files[d],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var d;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(d=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(d);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var d=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(d<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(d);var h=d;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(d=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(d),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var f=this.centralDirOffset+this.centralDirSize;this.zip64&&(f+=20,f+=12+this.zip64EndOfCentralSize);var g=h-f;if(0<g)this.isSignature(h,a.CENTRAL_FILE_HEADER)||(this.reader.zero=g);else if(g<0)throw new Error("Corrupted zip: missing "+Math.abs(g)+" bytes.")},prepareReader:function(d){this.reader=i(d)},load:function(d){this.prepareReader(d),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,s){var i=n("./reader/readerFor"),o=n("./utils"),a=n("./compressedObject"),l=n("./crc32"),c=n("./utf8"),u=n("./compressions"),d=n("./support");function h(f,g){this.options=f,this.loadOptions=g}h.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(f){var g,y;if(f.skip(22),this.fileNameLength=f.readInt(2),y=f.readInt(2),this.fileName=f.readData(this.fileNameLength),f.skip(y),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((g=function(m){for(var b in u)if(Object.prototype.hasOwnProperty.call(u,b)&&u[b].magic===m)return u[b];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,g,f.readData(this.compressedSize))},readCentralPart:function(f){this.versionMadeBy=f.readInt(2),f.skip(2),this.bitFlag=f.readInt(2),this.compressionMethod=f.readString(2),this.date=f.readDate(),this.crc32=f.readInt(4),this.compressedSize=f.readInt(4),this.uncompressedSize=f.readInt(4);var g=f.readInt(2);if(this.extraFieldsLength=f.readInt(2),this.fileCommentLength=f.readInt(2),this.diskNumberStart=f.readInt(2),this.internalFileAttributes=f.readInt(2),this.externalFileAttributes=f.readInt(4),this.localHeaderOffset=f.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");f.skip(g),this.readExtraFields(f),this.parseZIP64ExtraField(f),this.fileComment=f.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var f=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),f==0&&(this.dosPermissions=63&this.externalFileAttributes),f==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var f=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=f.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=f.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=f.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=f.readInt(4))}},readExtraFields:function(f){var g,y,m,b=f.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});f.index+4<b;)g=f.readInt(2),y=f.readInt(2),m=f.readData(y),this.extraFields[g]={id:g,length:y,value:m};f.setIndex(b)},handleUTF8:function(){var f=d.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var g=this.findExtraFieldUnicodePath();if(g!==null)this.fileNameStr=g;else{var y=o.transformTo(f,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(y)}var m=this.findExtraFieldUnicodeComment();if(m!==null)this.fileCommentStr=m;else{var b=o.transformTo(f,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(b)}}},findExtraFieldUnicodePath:function(){var f=this.extraFields[28789];if(f){var g=i(f.value);return g.readInt(1)!==1||l(this.fileName)!==g.readInt(4)?null:c.utf8decode(g.readData(f.length-5))}return null},findExtraFieldUnicodeComment:function(){var f=this.extraFields[25461];if(f){var g=i(f.value);return g.readInt(1)!==1||l(this.fileComment)!==g.readInt(4)?null:c.utf8decode(g.readData(f.length-5))}return null}},r.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,s){function i(g,y,m){this.name=g,this.dir=m.dir,this.date=m.date,this.comment=m.comment,this.unixPermissions=m.unixPermissions,this.dosPermissions=m.dosPermissions,this._data=y,this._dataBinary=m.binary,this.options={compression:m.compression,compressionOptions:m.compressionOptions}}var o=n("./stream/StreamHelper"),a=n("./stream/DataWorker"),l=n("./utf8"),c=n("./compressedObject"),u=n("./stream/GenericWorker");i.prototype={internalStream:function(g){var y=null,m="string";try{if(!g)throw new Error("No output type specified.");var b=(m=g.toLowerCase())==="string"||m==="text";m!=="binarystring"&&m!=="text"||(m="string"),y=this._decompressWorker();var v=!this._dataBinary;v&&!b&&(y=y.pipe(new l.Utf8EncodeWorker)),!v&&b&&(y=y.pipe(new l.Utf8DecodeWorker))}catch(_){(y=new u("error")).error(_)}return new o(y,m,"")},async:function(g,y){return this.internalStream(g).accumulate(y)},nodeStream:function(g,y){return this.internalStream(g||"nodebuffer").toNodejsStream(y)},_compressWorker:function(g,y){if(this._data instanceof c&&this._data.compression.magic===g.magic)return this._data.getCompressedWorker();var m=this._decompressWorker();return this._dataBinary||(m=m.pipe(new l.Utf8EncodeWorker)),c.createWorkerFrom(m,g,y)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof u?this._data:new a(this._data)}};for(var d=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f=0;f<d.length;f++)i.prototype[d[f]]=h;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,s){(function(i){var o,a,l=i.MutationObserver||i.WebKitMutationObserver;if(l){var c=0,u=new l(g),d=i.document.createTextNode("");u.observe(d,{characterData:!0}),o=function(){d.data=c=++c%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var y=i.document.createElement("script");y.onreadystatechange=function(){g(),y.onreadystatechange=null,y.parentNode.removeChild(y),y=null},i.document.documentElement.appendChild(y)}:function(){setTimeout(g,0)};else{var h=new i.MessageChannel;h.port1.onmessage=g,o=function(){h.port2.postMessage(0)}}var f=[];function g(){var y,m;a=!0;for(var b=f.length;b;){for(m=f,f=[],y=-1;++y<b;)m[y]();b=f.length}a=!1}r.exports=function(y){f.push(y)!==1||a||o()}}).call(this,typeof ii<"u"?ii:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,s){var i=n("immediate");function o(){}var a={},l=["REJECTED"],c=["FULFILLED"],u=["PENDING"];function d(b){if(typeof b!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,b!==o&&y(this,b)}function h(b,v,_){this.promise=b,typeof v=="function"&&(this.onFulfilled=v,this.callFulfilled=this.otherCallFulfilled),typeof _=="function"&&(this.onRejected=_,this.callRejected=this.otherCallRejected)}function f(b,v,_){i(function(){var E;try{E=v(_)}catch(w){return a.reject(b,w)}E===b?a.reject(b,new TypeError("Cannot resolve promise with itself")):a.resolve(b,E)})}function g(b){var v=b&&b.then;if(b&&(typeof b=="object"||typeof b=="function")&&typeof v=="function")return function(){v.apply(b,arguments)}}function y(b,v){var _=!1;function E(k){_||(_=!0,a.reject(b,k))}function w(k){_||(_=!0,a.resolve(b,k))}var S=m(function(){v(w,E)});S.status==="error"&&E(S.value)}function m(b,v){var _={};try{_.value=b(v),_.status="success"}catch(E){_.status="error",_.value=E}return _}(r.exports=d).prototype.finally=function(b){if(typeof b!="function")return this;var v=this.constructor;return this.then(function(_){return v.resolve(b()).then(function(){return _})},function(_){return v.resolve(b()).then(function(){throw _})})},d.prototype.catch=function(b){return this.then(null,b)},d.prototype.then=function(b,v){if(typeof b!="function"&&this.state===c||typeof v!="function"&&this.state===l)return this;var _=new this.constructor(o);return this.state!==u?f(_,this.state===c?b:v,this.outcome):this.queue.push(new h(_,b,v)),_},h.prototype.callFulfilled=function(b){a.resolve(this.promise,b)},h.prototype.otherCallFulfilled=function(b){f(this.promise,this.onFulfilled,b)},h.prototype.callRejected=function(b){a.reject(this.promise,b)},h.prototype.otherCallRejected=function(b){f(this.promise,this.onRejected,b)},a.resolve=function(b,v){var _=m(g,v);if(_.status==="error")return a.reject(b,_.value);var E=_.value;if(E)y(b,E);else{b.state=c,b.outcome=v;for(var w=-1,S=b.queue.length;++w<S;)b.queue[w].callFulfilled(v)}return b},a.reject=function(b,v){b.state=l,b.outcome=v;for(var _=-1,E=b.queue.length;++_<E;)b.queue[_].callRejected(v);return b},d.resolve=function(b){return b instanceof this?b:a.resolve(new this(o),b)},d.reject=function(b){var v=new this(o);return a.reject(v,b)},d.all=function(b){var v=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=b.length,E=!1;if(!_)return this.resolve([]);for(var w=new Array(_),S=0,k=-1,x=new this(o);++k<_;)I(b[k],k);return x;function I(R,C){v.resolve(R).then(function(N){w[C]=N,++S!==_||E||(E=!0,a.resolve(x,w))},function(N){E||(E=!0,a.reject(x,N))})}},d.race=function(b){var v=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=b.length,E=!1;if(!_)return this.resolve([]);for(var w=-1,S=new this(o);++w<_;)k=b[w],v.resolve(k).then(function(x){E||(E=!0,a.resolve(S,x))},function(x){E||(E=!0,a.reject(S,x))});var k;return S}},{immediate:36}],38:[function(n,r,s){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,s){var i=n("./zlib/deflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/messages"),c=n("./zlib/zstream"),u=Object.prototype.toString,d=0,h=-1,f=0,g=8;function y(b){if(!(this instanceof y))return new y(b);this.options=o.assign({level:h,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},b||{});var v=this.options;v.raw&&0<v.windowBits?v.windowBits=-v.windowBits:v.gzip&&0<v.windowBits&&v.windowBits<16&&(v.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var _=i.deflateInit2(this.strm,v.level,v.method,v.windowBits,v.memLevel,v.strategy);if(_!==d)throw new Error(l[_]);if(v.header&&i.deflateSetHeader(this.strm,v.header),v.dictionary){var E;if(E=typeof v.dictionary=="string"?a.string2buf(v.dictionary):u.call(v.dictionary)==="[object ArrayBuffer]"?new Uint8Array(v.dictionary):v.dictionary,(_=i.deflateSetDictionary(this.strm,E))!==d)throw new Error(l[_]);this._dict_set=!0}}function m(b,v){var _=new y(v);if(_.push(b,!0),_.err)throw _.msg||l[_.err];return _.result}y.prototype.push=function(b,v){var _,E,w=this.strm,S=this.options.chunkSize;if(this.ended)return!1;E=v===~~v?v:v===!0?4:0,typeof b=="string"?w.input=a.string2buf(b):u.call(b)==="[object ArrayBuffer]"?w.input=new Uint8Array(b):w.input=b,w.next_in=0,w.avail_in=w.input.length;do{if(w.avail_out===0&&(w.output=new o.Buf8(S),w.next_out=0,w.avail_out=S),(_=i.deflate(w,E))!==1&&_!==d)return this.onEnd(_),!(this.ended=!0);w.avail_out!==0&&(w.avail_in!==0||E!==4&&E!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(w.output,w.next_out))):this.onData(o.shrinkBuf(w.output,w.next_out)))}while((0<w.avail_in||w.avail_out===0)&&_!==1);return E===4?(_=i.deflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===d):E!==2||(this.onEnd(d),!(w.avail_out=0))},y.prototype.onData=function(b){this.chunks.push(b)},y.prototype.onEnd=function(b){b===d&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},s.Deflate=y,s.deflate=m,s.deflateRaw=function(b,v){return(v=v||{}).raw=!0,m(b,v)},s.gzip=function(b,v){return(v=v||{}).gzip=!0,m(b,v)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,s){var i=n("./zlib/inflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/constants"),c=n("./zlib/messages"),u=n("./zlib/zstream"),d=n("./zlib/gzheader"),h=Object.prototype.toString;function f(y){if(!(this instanceof f))return new f(y);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},y||{});var m=this.options;m.raw&&0<=m.windowBits&&m.windowBits<16&&(m.windowBits=-m.windowBits,m.windowBits===0&&(m.windowBits=-15)),!(0<=m.windowBits&&m.windowBits<16)||y&&y.windowBits||(m.windowBits+=32),15<m.windowBits&&m.windowBits<48&&!(15&m.windowBits)&&(m.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var b=i.inflateInit2(this.strm,m.windowBits);if(b!==l.Z_OK)throw new Error(c[b]);this.header=new d,i.inflateGetHeader(this.strm,this.header)}function g(y,m){var b=new f(m);if(b.push(y,!0),b.err)throw b.msg||c[b.err];return b.result}f.prototype.push=function(y,m){var b,v,_,E,w,S,k=this.strm,x=this.options.chunkSize,I=this.options.dictionary,R=!1;if(this.ended)return!1;v=m===~~m?m:m===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof y=="string"?k.input=a.binstring2buf(y):h.call(y)==="[object ArrayBuffer]"?k.input=new Uint8Array(y):k.input=y,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new o.Buf8(x),k.next_out=0,k.avail_out=x),(b=i.inflate(k,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&I&&(S=typeof I=="string"?a.string2buf(I):h.call(I)==="[object ArrayBuffer]"?new Uint8Array(I):I,b=i.inflateSetDictionary(this.strm,S)),b===l.Z_BUF_ERROR&&R===!0&&(b=l.Z_OK,R=!1),b!==l.Z_STREAM_END&&b!==l.Z_OK)return this.onEnd(b),!(this.ended=!0);k.next_out&&(k.avail_out!==0&&b!==l.Z_STREAM_END&&(k.avail_in!==0||v!==l.Z_FINISH&&v!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(_=a.utf8border(k.output,k.next_out),E=k.next_out-_,w=a.buf2string(k.output,_),k.next_out=E,k.avail_out=x-E,E&&o.arraySet(k.output,k.output,_,E,0),this.onData(w)):this.onData(o.shrinkBuf(k.output,k.next_out)))),k.avail_in===0&&k.avail_out===0&&(R=!0)}while((0<k.avail_in||k.avail_out===0)&&b!==l.Z_STREAM_END);return b===l.Z_STREAM_END&&(v=l.Z_FINISH),v===l.Z_FINISH?(b=i.inflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===l.Z_OK):v!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(k.avail_out=0))},f.prototype.onData=function(y){this.chunks.push(y)},f.prototype.onEnd=function(y){y===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},s.Inflate=f,s.inflate=g,s.inflateRaw=function(y,m){return(m=m||{}).raw=!0,g(y,m)},s.ungzip=g},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(l){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var u=c.shift();if(u){if(typeof u!="object")throw new TypeError(u+"must be non-object");for(var d in u)u.hasOwnProperty(d)&&(l[d]=u[d])}}return l},s.shrinkBuf=function(l,c){return l.length===c?l:l.subarray?l.subarray(0,c):(l.length=c,l)};var o={arraySet:function(l,c,u,d,h){if(c.subarray&&l.subarray)l.set(c.subarray(u,u+d),h);else for(var f=0;f<d;f++)l[h+f]=c[u+f]},flattenChunks:function(l){var c,u,d,h,f,g;for(c=d=0,u=l.length;c<u;c++)d+=l[c].length;for(g=new Uint8Array(d),c=h=0,u=l.length;c<u;c++)f=l[c],g.set(f,h),h+=f.length;return g}},a={arraySet:function(l,c,u,d,h){for(var f=0;f<d;f++)l[h+f]=c[u+f]},flattenChunks:function(l){return[].concat.apply([],l)}};s.setTyped=function(l){l?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,o)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,a))},s.setTyped(i)},{}],42:[function(n,r,s){var i=n("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new i.Buf8(256),c=0;c<256;c++)l[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function u(d,h){if(h<65537&&(d.subarray&&a||!d.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(d,h));for(var f="",g=0;g<h;g++)f+=String.fromCharCode(d[g]);return f}l[254]=l[254]=1,s.string2buf=function(d){var h,f,g,y,m,b=d.length,v=0;for(y=0;y<b;y++)(64512&(f=d.charCodeAt(y)))==55296&&y+1<b&&(64512&(g=d.charCodeAt(y+1)))==56320&&(f=65536+(f-55296<<10)+(g-56320),y++),v+=f<128?1:f<2048?2:f<65536?3:4;for(h=new i.Buf8(v),y=m=0;m<v;y++)(64512&(f=d.charCodeAt(y)))==55296&&y+1<b&&(64512&(g=d.charCodeAt(y+1)))==56320&&(f=65536+(f-55296<<10)+(g-56320),y++),f<128?h[m++]=f:(f<2048?h[m++]=192|f>>>6:(f<65536?h[m++]=224|f>>>12:(h[m++]=240|f>>>18,h[m++]=128|f>>>12&63),h[m++]=128|f>>>6&63),h[m++]=128|63&f);return h},s.buf2binstring=function(d){return u(d,d.length)},s.binstring2buf=function(d){for(var h=new i.Buf8(d.length),f=0,g=h.length;f<g;f++)h[f]=d.charCodeAt(f);return h},s.buf2string=function(d,h){var f,g,y,m,b=h||d.length,v=new Array(2*b);for(f=g=0;f<b;)if((y=d[f++])<128)v[g++]=y;else if(4<(m=l[y]))v[g++]=65533,f+=m-1;else{for(y&=m===2?31:m===3?15:7;1<m&&f<b;)y=y<<6|63&d[f++],m--;1<m?v[g++]=65533:y<65536?v[g++]=y:(y-=65536,v[g++]=55296|y>>10&1023,v[g++]=56320|1023&y)}return u(v,g)},s.utf8border=function(d,h){var f;for((h=h||d.length)>d.length&&(h=d.length),f=h-1;0<=f&&(192&d[f])==128;)f--;return f<0||f===0?h:f+l[d[f]]>h?f:h}},{"./common":41}],43:[function(n,r,s){r.exports=function(i,o,a,l){for(var c=65535&i|0,u=i>>>16&65535|0,d=0;a!==0;){for(a-=d=2e3<a?2e3:a;u=u+(c=c+o[l++]|0)|0,--d;);c%=65521,u%=65521}return c|u<<16|0}},{}],44:[function(n,r,s){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,s){var i=function(){for(var o,a=[],l=0;l<256;l++){o=l;for(var c=0;c<8;c++)o=1&o?3988292384^o>>>1:o>>>1;a[l]=o}return a}();r.exports=function(o,a,l,c){var u=i,d=c+l;o^=-1;for(var h=c;h<d;h++)o=o>>>8^u[255&(o^a[h])];return-1^o}},{}],46:[function(n,r,s){var i,o=n("../utils/common"),a=n("./trees"),l=n("./adler32"),c=n("./crc32"),u=n("./messages"),d=0,h=4,f=0,g=-2,y=-1,m=4,b=2,v=8,_=9,E=286,w=30,S=19,k=2*E+1,x=15,I=3,R=258,C=R+I+1,N=42,O=113,P=1,$=2,ee=3,J=4;function Z(K,ge){return K.msg=u[ge],ge}function M(K){return(K<<1)-(4<K?9:0)}function F(K){for(var ge=K.length;0<=--ge;)K[ge]=0}function G(K){var ge=K.state,ne=ge.pending;ne>K.avail_out&&(ne=K.avail_out),ne!==0&&(o.arraySet(K.output,ge.pending_buf,ge.pending_out,ne,K.next_out),K.next_out+=ne,ge.pending_out+=ne,K.total_out+=ne,K.avail_out-=ne,ge.pending-=ne,ge.pending===0&&(ge.pending_out=0))}function D(K,ge){a._tr_flush_block(K,0<=K.block_start?K.block_start:-1,K.strstart-K.block_start,ge),K.block_start=K.strstart,G(K.strm)}function j(K,ge){K.pending_buf[K.pending++]=ge}function V(K,ge){K.pending_buf[K.pending++]=ge>>>8&255,K.pending_buf[K.pending++]=255&ge}function W(K,ge){var ne,le,se=K.max_chain_length,fe=K.strstart,Ce=K.prev_length,Ie=K.nice_match,xe=K.strstart>K.w_size-C?K.strstart-(K.w_size-C):0,$e=K.window,je=K.w_mask,Be=K.prev,Ae=K.strstart+R,Ye=$e[fe+Ce-1],Xe=$e[fe+Ce];K.prev_length>=K.good_match&&(se>>=2),Ie>K.lookahead&&(Ie=K.lookahead);do if($e[(ne=ge)+Ce]===Xe&&$e[ne+Ce-1]===Ye&&$e[ne]===$e[fe]&&$e[++ne]===$e[fe+1]){fe+=2,ne++;do;while($e[++fe]===$e[++ne]&&$e[++fe]===$e[++ne]&&$e[++fe]===$e[++ne]&&$e[++fe]===$e[++ne]&&$e[++fe]===$e[++ne]&&$e[++fe]===$e[++ne]&&$e[++fe]===$e[++ne]&&$e[++fe]===$e[++ne]&&fe<Ae);if(le=R-(Ae-fe),fe=Ae-R,Ce<le){if(K.match_start=ge,Ie<=(Ce=le))break;Ye=$e[fe+Ce-1],Xe=$e[fe+Ce]}}while((ge=Be[ge&je])>xe&&--se!=0);return Ce<=K.lookahead?Ce:K.lookahead}function re(K){var ge,ne,le,se,fe,Ce,Ie,xe,$e,je,Be=K.w_size;do{if(se=K.window_size-K.lookahead-K.strstart,K.strstart>=Be+(Be-C)){for(o.arraySet(K.window,K.window,Be,Be,0),K.match_start-=Be,K.strstart-=Be,K.block_start-=Be,ge=ne=K.hash_size;le=K.head[--ge],K.head[ge]=Be<=le?le-Be:0,--ne;);for(ge=ne=Be;le=K.prev[--ge],K.prev[ge]=Be<=le?le-Be:0,--ne;);se+=Be}if(K.strm.avail_in===0)break;if(Ce=K.strm,Ie=K.window,xe=K.strstart+K.lookahead,$e=se,je=void 0,je=Ce.avail_in,$e<je&&(je=$e),ne=je===0?0:(Ce.avail_in-=je,o.arraySet(Ie,Ce.input,Ce.next_in,je,xe),Ce.state.wrap===1?Ce.adler=l(Ce.adler,Ie,je,xe):Ce.state.wrap===2&&(Ce.adler=c(Ce.adler,Ie,je,xe)),Ce.next_in+=je,Ce.total_in+=je,je),K.lookahead+=ne,K.lookahead+K.insert>=I)for(fe=K.strstart-K.insert,K.ins_h=K.window[fe],K.ins_h=(K.ins_h<<K.hash_shift^K.window[fe+1])&K.hash_mask;K.insert&&(K.ins_h=(K.ins_h<<K.hash_shift^K.window[fe+I-1])&K.hash_mask,K.prev[fe&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=fe,fe++,K.insert--,!(K.lookahead+K.insert<I)););}while(K.lookahead<C&&K.strm.avail_in!==0)}function te(K,ge){for(var ne,le;;){if(K.lookahead<C){if(re(K),K.lookahead<C&&ge===d)return P;if(K.lookahead===0)break}if(ne=0,K.lookahead>=I&&(K.ins_h=(K.ins_h<<K.hash_shift^K.window[K.strstart+I-1])&K.hash_mask,ne=K.prev[K.strstart&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=K.strstart),ne!==0&&K.strstart-ne<=K.w_size-C&&(K.match_length=W(K,ne)),K.match_length>=I)if(le=a._tr_tally(K,K.strstart-K.match_start,K.match_length-I),K.lookahead-=K.match_length,K.match_length<=K.max_lazy_match&&K.lookahead>=I){for(K.match_length--;K.strstart++,K.ins_h=(K.ins_h<<K.hash_shift^K.window[K.strstart+I-1])&K.hash_mask,ne=K.prev[K.strstart&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=K.strstart,--K.match_length!=0;);K.strstart++}else K.strstart+=K.match_length,K.match_length=0,K.ins_h=K.window[K.strstart],K.ins_h=(K.ins_h<<K.hash_shift^K.window[K.strstart+1])&K.hash_mask;else le=a._tr_tally(K,0,K.window[K.strstart]),K.lookahead--,K.strstart++;if(le&&(D(K,!1),K.strm.avail_out===0))return P}return K.insert=K.strstart<I-1?K.strstart:I-1,ge===h?(D(K,!0),K.strm.avail_out===0?ee:J):K.last_lit&&(D(K,!1),K.strm.avail_out===0)?P:$}function Y(K,ge){for(var ne,le,se;;){if(K.lookahead<C){if(re(K),K.lookahead<C&&ge===d)return P;if(K.lookahead===0)break}if(ne=0,K.lookahead>=I&&(K.ins_h=(K.ins_h<<K.hash_shift^K.window[K.strstart+I-1])&K.hash_mask,ne=K.prev[K.strstart&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=K.strstart),K.prev_length=K.match_length,K.prev_match=K.match_start,K.match_length=I-1,ne!==0&&K.prev_length<K.max_lazy_match&&K.strstart-ne<=K.w_size-C&&(K.match_length=W(K,ne),K.match_length<=5&&(K.strategy===1||K.match_length===I&&4096<K.strstart-K.match_start)&&(K.match_length=I-1)),K.prev_length>=I&&K.match_length<=K.prev_length){for(se=K.strstart+K.lookahead-I,le=a._tr_tally(K,K.strstart-1-K.prev_match,K.prev_length-I),K.lookahead-=K.prev_length-1,K.prev_length-=2;++K.strstart<=se&&(K.ins_h=(K.ins_h<<K.hash_shift^K.window[K.strstart+I-1])&K.hash_mask,ne=K.prev[K.strstart&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=K.strstart),--K.prev_length!=0;);if(K.match_available=0,K.match_length=I-1,K.strstart++,le&&(D(K,!1),K.strm.avail_out===0))return P}else if(K.match_available){if((le=a._tr_tally(K,0,K.window[K.strstart-1]))&&D(K,!1),K.strstart++,K.lookahead--,K.strm.avail_out===0)return P}else K.match_available=1,K.strstart++,K.lookahead--}return K.match_available&&(le=a._tr_tally(K,0,K.window[K.strstart-1]),K.match_available=0),K.insert=K.strstart<I-1?K.strstart:I-1,ge===h?(D(K,!0),K.strm.avail_out===0?ee:J):K.last_lit&&(D(K,!1),K.strm.avail_out===0)?P:$}function de(K,ge,ne,le,se){this.good_length=K,this.max_lazy=ge,this.nice_length=ne,this.max_chain=le,this.func=se}function ye(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*k),this.dyn_dtree=new o.Buf16(2*(2*w+1)),this.bl_tree=new o.Buf16(2*(2*S+1)),F(this.dyn_ltree),F(this.dyn_dtree),F(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(x+1),this.heap=new o.Buf16(2*E+1),F(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*E+1),F(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Se(K){var ge;return K&&K.state?(K.total_in=K.total_out=0,K.data_type=b,(ge=K.state).pending=0,ge.pending_out=0,ge.wrap<0&&(ge.wrap=-ge.wrap),ge.status=ge.wrap?N:O,K.adler=ge.wrap===2?0:1,ge.last_flush=d,a._tr_init(ge),f):Z(K,g)}function Te(K){var ge=Se(K);return ge===f&&function(ne){ne.window_size=2*ne.w_size,F(ne.head),ne.max_lazy_match=i[ne.level].max_lazy,ne.good_match=i[ne.level].good_length,ne.nice_match=i[ne.level].nice_length,ne.max_chain_length=i[ne.level].max_chain,ne.strstart=0,ne.block_start=0,ne.lookahead=0,ne.insert=0,ne.match_length=ne.prev_length=I-1,ne.match_available=0,ne.ins_h=0}(K.state),ge}function ke(K,ge,ne,le,se,fe){if(!K)return g;var Ce=1;if(ge===y&&(ge=6),le<0?(Ce=0,le=-le):15<le&&(Ce=2,le-=16),se<1||_<se||ne!==v||le<8||15<le||ge<0||9<ge||fe<0||m<fe)return Z(K,g);le===8&&(le=9);var Ie=new ye;return(K.state=Ie).strm=K,Ie.wrap=Ce,Ie.gzhead=null,Ie.w_bits=le,Ie.w_size=1<<Ie.w_bits,Ie.w_mask=Ie.w_size-1,Ie.hash_bits=se+7,Ie.hash_size=1<<Ie.hash_bits,Ie.hash_mask=Ie.hash_size-1,Ie.hash_shift=~~((Ie.hash_bits+I-1)/I),Ie.window=new o.Buf8(2*Ie.w_size),Ie.head=new o.Buf16(Ie.hash_size),Ie.prev=new o.Buf16(Ie.w_size),Ie.lit_bufsize=1<<se+6,Ie.pending_buf_size=4*Ie.lit_bufsize,Ie.pending_buf=new o.Buf8(Ie.pending_buf_size),Ie.d_buf=1*Ie.lit_bufsize,Ie.l_buf=3*Ie.lit_bufsize,Ie.level=ge,Ie.strategy=fe,Ie.method=ne,Te(K)}i=[new de(0,0,0,0,function(K,ge){var ne=65535;for(ne>K.pending_buf_size-5&&(ne=K.pending_buf_size-5);;){if(K.lookahead<=1){if(re(K),K.lookahead===0&&ge===d)return P;if(K.lookahead===0)break}K.strstart+=K.lookahead,K.lookahead=0;var le=K.block_start+ne;if((K.strstart===0||K.strstart>=le)&&(K.lookahead=K.strstart-le,K.strstart=le,D(K,!1),K.strm.avail_out===0)||K.strstart-K.block_start>=K.w_size-C&&(D(K,!1),K.strm.avail_out===0))return P}return K.insert=0,ge===h?(D(K,!0),K.strm.avail_out===0?ee:J):(K.strstart>K.block_start&&(D(K,!1),K.strm.avail_out),P)}),new de(4,4,8,4,te),new de(4,5,16,8,te),new de(4,6,32,32,te),new de(4,4,16,16,Y),new de(8,16,32,32,Y),new de(8,16,128,128,Y),new de(8,32,128,256,Y),new de(32,128,258,1024,Y),new de(32,258,258,4096,Y)],s.deflateInit=function(K,ge){return ke(K,ge,v,15,8,0)},s.deflateInit2=ke,s.deflateReset=Te,s.deflateResetKeep=Se,s.deflateSetHeader=function(K,ge){return K&&K.state?K.state.wrap!==2?g:(K.state.gzhead=ge,f):g},s.deflate=function(K,ge){var ne,le,se,fe;if(!K||!K.state||5<ge||ge<0)return K?Z(K,g):g;if(le=K.state,!K.output||!K.input&&K.avail_in!==0||le.status===666&&ge!==h)return Z(K,K.avail_out===0?-5:g);if(le.strm=K,ne=le.last_flush,le.last_flush=ge,le.status===N)if(le.wrap===2)K.adler=0,j(le,31),j(le,139),j(le,8),le.gzhead?(j(le,(le.gzhead.text?1:0)+(le.gzhead.hcrc?2:0)+(le.gzhead.extra?4:0)+(le.gzhead.name?8:0)+(le.gzhead.comment?16:0)),j(le,255&le.gzhead.time),j(le,le.gzhead.time>>8&255),j(le,le.gzhead.time>>16&255),j(le,le.gzhead.time>>24&255),j(le,le.level===9?2:2<=le.strategy||le.level<2?4:0),j(le,255&le.gzhead.os),le.gzhead.extra&&le.gzhead.extra.length&&(j(le,255&le.gzhead.extra.length),j(le,le.gzhead.extra.length>>8&255)),le.gzhead.hcrc&&(K.adler=c(K.adler,le.pending_buf,le.pending,0)),le.gzindex=0,le.status=69):(j(le,0),j(le,0),j(le,0),j(le,0),j(le,0),j(le,le.level===9?2:2<=le.strategy||le.level<2?4:0),j(le,3),le.status=O);else{var Ce=v+(le.w_bits-8<<4)<<8;Ce|=(2<=le.strategy||le.level<2?0:le.level<6?1:le.level===6?2:3)<<6,le.strstart!==0&&(Ce|=32),Ce+=31-Ce%31,le.status=O,V(le,Ce),le.strstart!==0&&(V(le,K.adler>>>16),V(le,65535&K.adler)),K.adler=1}if(le.status===69)if(le.gzhead.extra){for(se=le.pending;le.gzindex<(65535&le.gzhead.extra.length)&&(le.pending!==le.pending_buf_size||(le.gzhead.hcrc&&le.pending>se&&(K.adler=c(K.adler,le.pending_buf,le.pending-se,se)),G(K),se=le.pending,le.pending!==le.pending_buf_size));)j(le,255&le.gzhead.extra[le.gzindex]),le.gzindex++;le.gzhead.hcrc&&le.pending>se&&(K.adler=c(K.adler,le.pending_buf,le.pending-se,se)),le.gzindex===le.gzhead.extra.length&&(le.gzindex=0,le.status=73)}else le.status=73;if(le.status===73)if(le.gzhead.name){se=le.pending;do{if(le.pending===le.pending_buf_size&&(le.gzhead.hcrc&&le.pending>se&&(K.adler=c(K.adler,le.pending_buf,le.pending-se,se)),G(K),se=le.pending,le.pending===le.pending_buf_size)){fe=1;break}fe=le.gzindex<le.gzhead.name.length?255&le.gzhead.name.charCodeAt(le.gzindex++):0,j(le,fe)}while(fe!==0);le.gzhead.hcrc&&le.pending>se&&(K.adler=c(K.adler,le.pending_buf,le.pending-se,se)),fe===0&&(le.gzindex=0,le.status=91)}else le.status=91;if(le.status===91)if(le.gzhead.comment){se=le.pending;do{if(le.pending===le.pending_buf_size&&(le.gzhead.hcrc&&le.pending>se&&(K.adler=c(K.adler,le.pending_buf,le.pending-se,se)),G(K),se=le.pending,le.pending===le.pending_buf_size)){fe=1;break}fe=le.gzindex<le.gzhead.comment.length?255&le.gzhead.comment.charCodeAt(le.gzindex++):0,j(le,fe)}while(fe!==0);le.gzhead.hcrc&&le.pending>se&&(K.adler=c(K.adler,le.pending_buf,le.pending-se,se)),fe===0&&(le.status=103)}else le.status=103;if(le.status===103&&(le.gzhead.hcrc?(le.pending+2>le.pending_buf_size&&G(K),le.pending+2<=le.pending_buf_size&&(j(le,255&K.adler),j(le,K.adler>>8&255),K.adler=0,le.status=O)):le.status=O),le.pending!==0){if(G(K),K.avail_out===0)return le.last_flush=-1,f}else if(K.avail_in===0&&M(ge)<=M(ne)&&ge!==h)return Z(K,-5);if(le.status===666&&K.avail_in!==0)return Z(K,-5);if(K.avail_in!==0||le.lookahead!==0||ge!==d&&le.status!==666){var Ie=le.strategy===2?function(xe,$e){for(var je;;){if(xe.lookahead===0&&(re(xe),xe.lookahead===0)){if($e===d)return P;break}if(xe.match_length=0,je=a._tr_tally(xe,0,xe.window[xe.strstart]),xe.lookahead--,xe.strstart++,je&&(D(xe,!1),xe.strm.avail_out===0))return P}return xe.insert=0,$e===h?(D(xe,!0),xe.strm.avail_out===0?ee:J):xe.last_lit&&(D(xe,!1),xe.strm.avail_out===0)?P:$}(le,ge):le.strategy===3?function(xe,$e){for(var je,Be,Ae,Ye,Xe=xe.window;;){if(xe.lookahead<=R){if(re(xe),xe.lookahead<=R&&$e===d)return P;if(xe.lookahead===0)break}if(xe.match_length=0,xe.lookahead>=I&&0<xe.strstart&&(Be=Xe[Ae=xe.strstart-1])===Xe[++Ae]&&Be===Xe[++Ae]&&Be===Xe[++Ae]){Ye=xe.strstart+R;do;while(Be===Xe[++Ae]&&Be===Xe[++Ae]&&Be===Xe[++Ae]&&Be===Xe[++Ae]&&Be===Xe[++Ae]&&Be===Xe[++Ae]&&Be===Xe[++Ae]&&Be===Xe[++Ae]&&Ae<Ye);xe.match_length=R-(Ye-Ae),xe.match_length>xe.lookahead&&(xe.match_length=xe.lookahead)}if(xe.match_length>=I?(je=a._tr_tally(xe,1,xe.match_length-I),xe.lookahead-=xe.match_length,xe.strstart+=xe.match_length,xe.match_length=0):(je=a._tr_tally(xe,0,xe.window[xe.strstart]),xe.lookahead--,xe.strstart++),je&&(D(xe,!1),xe.strm.avail_out===0))return P}return xe.insert=0,$e===h?(D(xe,!0),xe.strm.avail_out===0?ee:J):xe.last_lit&&(D(xe,!1),xe.strm.avail_out===0)?P:$}(le,ge):i[le.level].func(le,ge);if(Ie!==ee&&Ie!==J||(le.status=666),Ie===P||Ie===ee)return K.avail_out===0&&(le.last_flush=-1),f;if(Ie===$&&(ge===1?a._tr_align(le):ge!==5&&(a._tr_stored_block(le,0,0,!1),ge===3&&(F(le.head),le.lookahead===0&&(le.strstart=0,le.block_start=0,le.insert=0))),G(K),K.avail_out===0))return le.last_flush=-1,f}return ge!==h?f:le.wrap<=0?1:(le.wrap===2?(j(le,255&K.adler),j(le,K.adler>>8&255),j(le,K.adler>>16&255),j(le,K.adler>>24&255),j(le,255&K.total_in),j(le,K.total_in>>8&255),j(le,K.total_in>>16&255),j(le,K.total_in>>24&255)):(V(le,K.adler>>>16),V(le,65535&K.adler)),G(K),0<le.wrap&&(le.wrap=-le.wrap),le.pending!==0?f:1)},s.deflateEnd=function(K){var ge;return K&&K.state?(ge=K.state.status)!==N&&ge!==69&&ge!==73&&ge!==91&&ge!==103&&ge!==O&&ge!==666?Z(K,g):(K.state=null,ge===O?Z(K,-3):f):g},s.deflateSetDictionary=function(K,ge){var ne,le,se,fe,Ce,Ie,xe,$e,je=ge.length;if(!K||!K.state||(fe=(ne=K.state).wrap)===2||fe===1&&ne.status!==N||ne.lookahead)return g;for(fe===1&&(K.adler=l(K.adler,ge,je,0)),ne.wrap=0,je>=ne.w_size&&(fe===0&&(F(ne.head),ne.strstart=0,ne.block_start=0,ne.insert=0),$e=new o.Buf8(ne.w_size),o.arraySet($e,ge,je-ne.w_size,ne.w_size,0),ge=$e,je=ne.w_size),Ce=K.avail_in,Ie=K.next_in,xe=K.input,K.avail_in=je,K.next_in=0,K.input=ge,re(ne);ne.lookahead>=I;){for(le=ne.strstart,se=ne.lookahead-(I-1);ne.ins_h=(ne.ins_h<<ne.hash_shift^ne.window[le+I-1])&ne.hash_mask,ne.prev[le&ne.w_mask]=ne.head[ne.ins_h],ne.head[ne.ins_h]=le,le++,--se;);ne.strstart=le,ne.lookahead=I-1,re(ne)}return ne.strstart+=ne.lookahead,ne.block_start=ne.strstart,ne.insert=ne.lookahead,ne.lookahead=0,ne.match_length=ne.prev_length=I-1,ne.match_available=0,K.next_in=Ie,K.input=xe,K.avail_in=Ce,ne.wrap=fe,f},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,s){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,s){r.exports=function(i,o){var a,l,c,u,d,h,f,g,y,m,b,v,_,E,w,S,k,x,I,R,C,N,O,P,$;a=i.state,l=i.next_in,P=i.input,c=l+(i.avail_in-5),u=i.next_out,$=i.output,d=u-(o-i.avail_out),h=u+(i.avail_out-257),f=a.dmax,g=a.wsize,y=a.whave,m=a.wnext,b=a.window,v=a.hold,_=a.bits,E=a.lencode,w=a.distcode,S=(1<<a.lenbits)-1,k=(1<<a.distbits)-1;e:do{_<15&&(v+=P[l++]<<_,_+=8,v+=P[l++]<<_,_+=8),x=E[v&S];t:for(;;){if(v>>>=I=x>>>24,_-=I,(I=x>>>16&255)===0)$[u++]=65535&x;else{if(!(16&I)){if(!(64&I)){x=E[(65535&x)+(v&(1<<I)-1)];continue t}if(32&I){a.mode=12;break e}i.msg="invalid literal/length code",a.mode=30;break e}R=65535&x,(I&=15)&&(_<I&&(v+=P[l++]<<_,_+=8),R+=v&(1<<I)-1,v>>>=I,_-=I),_<15&&(v+=P[l++]<<_,_+=8,v+=P[l++]<<_,_+=8),x=w[v&k];n:for(;;){if(v>>>=I=x>>>24,_-=I,!(16&(I=x>>>16&255))){if(!(64&I)){x=w[(65535&x)+(v&(1<<I)-1)];continue n}i.msg="invalid distance code",a.mode=30;break e}if(C=65535&x,_<(I&=15)&&(v+=P[l++]<<_,(_+=8)<I&&(v+=P[l++]<<_,_+=8)),f<(C+=v&(1<<I)-1)){i.msg="invalid distance too far back",a.mode=30;break e}if(v>>>=I,_-=I,(I=u-d)<C){if(y<(I=C-I)&&a.sane){i.msg="invalid distance too far back",a.mode=30;break e}if(O=b,(N=0)===m){if(N+=g-I,I<R){for(R-=I;$[u++]=b[N++],--I;);N=u-C,O=$}}else if(m<I){if(N+=g+m-I,(I-=m)<R){for(R-=I;$[u++]=b[N++],--I;);if(N=0,m<R){for(R-=I=m;$[u++]=b[N++],--I;);N=u-C,O=$}}}else if(N+=m-I,I<R){for(R-=I;$[u++]=b[N++],--I;);N=u-C,O=$}for(;2<R;)$[u++]=O[N++],$[u++]=O[N++],$[u++]=O[N++],R-=3;R&&($[u++]=O[N++],1<R&&($[u++]=O[N++]))}else{for(N=u-C;$[u++]=$[N++],$[u++]=$[N++],$[u++]=$[N++],2<(R-=3););R&&($[u++]=$[N++],1<R&&($[u++]=$[N++]))}break}}break}}while(l<c&&u<h);l-=R=_>>3,v&=(1<<(_-=R<<3))-1,i.next_in=l,i.next_out=u,i.avail_in=l<c?c-l+5:5-(l-c),i.avail_out=u<h?h-u+257:257-(u-h),a.hold=v,a.bits=_}},{}],49:[function(n,r,s){var i=n("../utils/common"),o=n("./adler32"),a=n("./crc32"),l=n("./inffast"),c=n("./inftrees"),u=1,d=2,h=0,f=-2,g=1,y=852,m=592;function b(N){return(N>>>24&255)+(N>>>8&65280)+((65280&N)<<8)+((255&N)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function _(N){var O;return N&&N.state?(O=N.state,N.total_in=N.total_out=O.total=0,N.msg="",O.wrap&&(N.adler=1&O.wrap),O.mode=g,O.last=0,O.havedict=0,O.dmax=32768,O.head=null,O.hold=0,O.bits=0,O.lencode=O.lendyn=new i.Buf32(y),O.distcode=O.distdyn=new i.Buf32(m),O.sane=1,O.back=-1,h):f}function E(N){var O;return N&&N.state?((O=N.state).wsize=0,O.whave=0,O.wnext=0,_(N)):f}function w(N,O){var P,$;return N&&N.state?($=N.state,O<0?(P=0,O=-O):(P=1+(O>>4),O<48&&(O&=15)),O&&(O<8||15<O)?f:($.window!==null&&$.wbits!==O&&($.window=null),$.wrap=P,$.wbits=O,E(N))):f}function S(N,O){var P,$;return N?($=new v,(N.state=$).window=null,(P=w(N,O))!==h&&(N.state=null),P):f}var k,x,I=!0;function R(N){if(I){var O;for(k=new i.Buf32(512),x=new i.Buf32(32),O=0;O<144;)N.lens[O++]=8;for(;O<256;)N.lens[O++]=9;for(;O<280;)N.lens[O++]=7;for(;O<288;)N.lens[O++]=8;for(c(u,N.lens,0,288,k,0,N.work,{bits:9}),O=0;O<32;)N.lens[O++]=5;c(d,N.lens,0,32,x,0,N.work,{bits:5}),I=!1}N.lencode=k,N.lenbits=9,N.distcode=x,N.distbits=5}function C(N,O,P,$){var ee,J=N.state;return J.window===null&&(J.wsize=1<<J.wbits,J.wnext=0,J.whave=0,J.window=new i.Buf8(J.wsize)),$>=J.wsize?(i.arraySet(J.window,O,P-J.wsize,J.wsize,0),J.wnext=0,J.whave=J.wsize):($<(ee=J.wsize-J.wnext)&&(ee=$),i.arraySet(J.window,O,P-$,ee,J.wnext),($-=ee)?(i.arraySet(J.window,O,P-$,$,0),J.wnext=$,J.whave=J.wsize):(J.wnext+=ee,J.wnext===J.wsize&&(J.wnext=0),J.whave<J.wsize&&(J.whave+=ee))),0}s.inflateReset=E,s.inflateReset2=w,s.inflateResetKeep=_,s.inflateInit=function(N){return S(N,15)},s.inflateInit2=S,s.inflate=function(N,O){var P,$,ee,J,Z,M,F,G,D,j,V,W,re,te,Y,de,ye,Se,Te,ke,K,ge,ne,le,se=0,fe=new i.Buf8(4),Ce=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!N||!N.state||!N.output||!N.input&&N.avail_in!==0)return f;(P=N.state).mode===12&&(P.mode=13),Z=N.next_out,ee=N.output,F=N.avail_out,J=N.next_in,$=N.input,M=N.avail_in,G=P.hold,D=P.bits,j=M,V=F,ge=h;e:for(;;)switch(P.mode){case g:if(P.wrap===0){P.mode=13;break}for(;D<16;){if(M===0)break e;M--,G+=$[J++]<<D,D+=8}if(2&P.wrap&&G===35615){fe[P.check=0]=255&G,fe[1]=G>>>8&255,P.check=a(P.check,fe,2,0),D=G=0,P.mode=2;break}if(P.flags=0,P.head&&(P.head.done=!1),!(1&P.wrap)||(((255&G)<<8)+(G>>8))%31){N.msg="incorrect header check",P.mode=30;break}if((15&G)!=8){N.msg="unknown compression method",P.mode=30;break}if(D-=4,K=8+(15&(G>>>=4)),P.wbits===0)P.wbits=K;else if(K>P.wbits){N.msg="invalid window size",P.mode=30;break}P.dmax=1<<K,N.adler=P.check=1,P.mode=512&G?10:12,D=G=0;break;case 2:for(;D<16;){if(M===0)break e;M--,G+=$[J++]<<D,D+=8}if(P.flags=G,(255&P.flags)!=8){N.msg="unknown compression method",P.mode=30;break}if(57344&P.flags){N.msg="unknown header flags set",P.mode=30;break}P.head&&(P.head.text=G>>8&1),512&P.flags&&(fe[0]=255&G,fe[1]=G>>>8&255,P.check=a(P.check,fe,2,0)),D=G=0,P.mode=3;case 3:for(;D<32;){if(M===0)break e;M--,G+=$[J++]<<D,D+=8}P.head&&(P.head.time=G),512&P.flags&&(fe[0]=255&G,fe[1]=G>>>8&255,fe[2]=G>>>16&255,fe[3]=G>>>24&255,P.check=a(P.check,fe,4,0)),D=G=0,P.mode=4;case 4:for(;D<16;){if(M===0)break e;M--,G+=$[J++]<<D,D+=8}P.head&&(P.head.xflags=255&G,P.head.os=G>>8),512&P.flags&&(fe[0]=255&G,fe[1]=G>>>8&255,P.check=a(P.check,fe,2,0)),D=G=0,P.mode=5;case 5:if(1024&P.flags){for(;D<16;){if(M===0)break e;M--,G+=$[J++]<<D,D+=8}P.length=G,P.head&&(P.head.extra_len=G),512&P.flags&&(fe[0]=255&G,fe[1]=G>>>8&255,P.check=a(P.check,fe,2,0)),D=G=0}else P.head&&(P.head.extra=null);P.mode=6;case 6:if(1024&P.flags&&(M<(W=P.length)&&(W=M),W&&(P.head&&(K=P.head.extra_len-P.length,P.head.extra||(P.head.extra=new Array(P.head.extra_len)),i.arraySet(P.head.extra,$,J,W,K)),512&P.flags&&(P.check=a(P.check,$,W,J)),M-=W,J+=W,P.length-=W),P.length))break e;P.length=0,P.mode=7;case 7:if(2048&P.flags){if(M===0)break e;for(W=0;K=$[J+W++],P.head&&K&&P.length<65536&&(P.head.name+=String.fromCharCode(K)),K&&W<M;);if(512&P.flags&&(P.check=a(P.check,$,W,J)),M-=W,J+=W,K)break e}else P.head&&(P.head.name=null);P.length=0,P.mode=8;case 8:if(4096&P.flags){if(M===0)break e;for(W=0;K=$[J+W++],P.head&&K&&P.length<65536&&(P.head.comment+=String.fromCharCode(K)),K&&W<M;);if(512&P.flags&&(P.check=a(P.check,$,W,J)),M-=W,J+=W,K)break e}else P.head&&(P.head.comment=null);P.mode=9;case 9:if(512&P.flags){for(;D<16;){if(M===0)break e;M--,G+=$[J++]<<D,D+=8}if(G!==(65535&P.check)){N.msg="header crc mismatch",P.mode=30;break}D=G=0}P.head&&(P.head.hcrc=P.flags>>9&1,P.head.done=!0),N.adler=P.check=0,P.mode=12;break;case 10:for(;D<32;){if(M===0)break e;M--,G+=$[J++]<<D,D+=8}N.adler=P.check=b(G),D=G=0,P.mode=11;case 11:if(P.havedict===0)return N.next_out=Z,N.avail_out=F,N.next_in=J,N.avail_in=M,P.hold=G,P.bits=D,2;N.adler=P.check=1,P.mode=12;case 12:if(O===5||O===6)break e;case 13:if(P.last){G>>>=7&D,D-=7&D,P.mode=27;break}for(;D<3;){if(M===0)break e;M--,G+=$[J++]<<D,D+=8}switch(P.last=1&G,D-=1,3&(G>>>=1)){case 0:P.mode=14;break;case 1:if(R(P),P.mode=20,O!==6)break;G>>>=2,D-=2;break e;case 2:P.mode=17;break;case 3:N.msg="invalid block type",P.mode=30}G>>>=2,D-=2;break;case 14:for(G>>>=7&D,D-=7&D;D<32;){if(M===0)break e;M--,G+=$[J++]<<D,D+=8}if((65535&G)!=(G>>>16^65535)){N.msg="invalid stored block lengths",P.mode=30;break}if(P.length=65535&G,D=G=0,P.mode=15,O===6)break e;case 15:P.mode=16;case 16:if(W=P.length){if(M<W&&(W=M),F<W&&(W=F),W===0)break e;i.arraySet(ee,$,J,W,Z),M-=W,J+=W,F-=W,Z+=W,P.length-=W;break}P.mode=12;break;case 17:for(;D<14;){if(M===0)break e;M--,G+=$[J++]<<D,D+=8}if(P.nlen=257+(31&G),G>>>=5,D-=5,P.ndist=1+(31&G),G>>>=5,D-=5,P.ncode=4+(15&G),G>>>=4,D-=4,286<P.nlen||30<P.ndist){N.msg="too many length or distance symbols",P.mode=30;break}P.have=0,P.mode=18;case 18:for(;P.have<P.ncode;){for(;D<3;){if(M===0)break e;M--,G+=$[J++]<<D,D+=8}P.lens[Ce[P.have++]]=7&G,G>>>=3,D-=3}for(;P.have<19;)P.lens[Ce[P.have++]]=0;if(P.lencode=P.lendyn,P.lenbits=7,ne={bits:P.lenbits},ge=c(0,P.lens,0,19,P.lencode,0,P.work,ne),P.lenbits=ne.bits,ge){N.msg="invalid code lengths set",P.mode=30;break}P.have=0,P.mode=19;case 19:for(;P.have<P.nlen+P.ndist;){for(;de=(se=P.lencode[G&(1<<P.lenbits)-1])>>>16&255,ye=65535&se,!((Y=se>>>24)<=D);){if(M===0)break e;M--,G+=$[J++]<<D,D+=8}if(ye<16)G>>>=Y,D-=Y,P.lens[P.have++]=ye;else{if(ye===16){for(le=Y+2;D<le;){if(M===0)break e;M--,G+=$[J++]<<D,D+=8}if(G>>>=Y,D-=Y,P.have===0){N.msg="invalid bit length repeat",P.mode=30;break}K=P.lens[P.have-1],W=3+(3&G),G>>>=2,D-=2}else if(ye===17){for(le=Y+3;D<le;){if(M===0)break e;M--,G+=$[J++]<<D,D+=8}D-=Y,K=0,W=3+(7&(G>>>=Y)),G>>>=3,D-=3}else{for(le=Y+7;D<le;){if(M===0)break e;M--,G+=$[J++]<<D,D+=8}D-=Y,K=0,W=11+(127&(G>>>=Y)),G>>>=7,D-=7}if(P.have+W>P.nlen+P.ndist){N.msg="invalid bit length repeat",P.mode=30;break}for(;W--;)P.lens[P.have++]=K}}if(P.mode===30)break;if(P.lens[256]===0){N.msg="invalid code -- missing end-of-block",P.mode=30;break}if(P.lenbits=9,ne={bits:P.lenbits},ge=c(u,P.lens,0,P.nlen,P.lencode,0,P.work,ne),P.lenbits=ne.bits,ge){N.msg="invalid literal/lengths set",P.mode=30;break}if(P.distbits=6,P.distcode=P.distdyn,ne={bits:P.distbits},ge=c(d,P.lens,P.nlen,P.ndist,P.distcode,0,P.work,ne),P.distbits=ne.bits,ge){N.msg="invalid distances set",P.mode=30;break}if(P.mode=20,O===6)break e;case 20:P.mode=21;case 21:if(6<=M&&258<=F){N.next_out=Z,N.avail_out=F,N.next_in=J,N.avail_in=M,P.hold=G,P.bits=D,l(N,V),Z=N.next_out,ee=N.output,F=N.avail_out,J=N.next_in,$=N.input,M=N.avail_in,G=P.hold,D=P.bits,P.mode===12&&(P.back=-1);break}for(P.back=0;de=(se=P.lencode[G&(1<<P.lenbits)-1])>>>16&255,ye=65535&se,!((Y=se>>>24)<=D);){if(M===0)break e;M--,G+=$[J++]<<D,D+=8}if(de&&!(240&de)){for(Se=Y,Te=de,ke=ye;de=(se=P.lencode[ke+((G&(1<<Se+Te)-1)>>Se)])>>>16&255,ye=65535&se,!(Se+(Y=se>>>24)<=D);){if(M===0)break e;M--,G+=$[J++]<<D,D+=8}G>>>=Se,D-=Se,P.back+=Se}if(G>>>=Y,D-=Y,P.back+=Y,P.length=ye,de===0){P.mode=26;break}if(32&de){P.back=-1,P.mode=12;break}if(64&de){N.msg="invalid literal/length code",P.mode=30;break}P.extra=15&de,P.mode=22;case 22:if(P.extra){for(le=P.extra;D<le;){if(M===0)break e;M--,G+=$[J++]<<D,D+=8}P.length+=G&(1<<P.extra)-1,G>>>=P.extra,D-=P.extra,P.back+=P.extra}P.was=P.length,P.mode=23;case 23:for(;de=(se=P.distcode[G&(1<<P.distbits)-1])>>>16&255,ye=65535&se,!((Y=se>>>24)<=D);){if(M===0)break e;M--,G+=$[J++]<<D,D+=8}if(!(240&de)){for(Se=Y,Te=de,ke=ye;de=(se=P.distcode[ke+((G&(1<<Se+Te)-1)>>Se)])>>>16&255,ye=65535&se,!(Se+(Y=se>>>24)<=D);){if(M===0)break e;M--,G+=$[J++]<<D,D+=8}G>>>=Se,D-=Se,P.back+=Se}if(G>>>=Y,D-=Y,P.back+=Y,64&de){N.msg="invalid distance code",P.mode=30;break}P.offset=ye,P.extra=15&de,P.mode=24;case 24:if(P.extra){for(le=P.extra;D<le;){if(M===0)break e;M--,G+=$[J++]<<D,D+=8}P.offset+=G&(1<<P.extra)-1,G>>>=P.extra,D-=P.extra,P.back+=P.extra}if(P.offset>P.dmax){N.msg="invalid distance too far back",P.mode=30;break}P.mode=25;case 25:if(F===0)break e;if(W=V-F,P.offset>W){if((W=P.offset-W)>P.whave&&P.sane){N.msg="invalid distance too far back",P.mode=30;break}re=W>P.wnext?(W-=P.wnext,P.wsize-W):P.wnext-W,W>P.length&&(W=P.length),te=P.window}else te=ee,re=Z-P.offset,W=P.length;for(F<W&&(W=F),F-=W,P.length-=W;ee[Z++]=te[re++],--W;);P.length===0&&(P.mode=21);break;case 26:if(F===0)break e;ee[Z++]=P.length,F--,P.mode=21;break;case 27:if(P.wrap){for(;D<32;){if(M===0)break e;M--,G|=$[J++]<<D,D+=8}if(V-=F,N.total_out+=V,P.total+=V,V&&(N.adler=P.check=P.flags?a(P.check,ee,V,Z-V):o(P.check,ee,V,Z-V)),V=F,(P.flags?G:b(G))!==P.check){N.msg="incorrect data check",P.mode=30;break}D=G=0}P.mode=28;case 28:if(P.wrap&&P.flags){for(;D<32;){if(M===0)break e;M--,G+=$[J++]<<D,D+=8}if(G!==(4294967295&P.total)){N.msg="incorrect length check",P.mode=30;break}D=G=0}P.mode=29;case 29:ge=1;break e;case 30:ge=-3;break e;case 31:return-4;case 32:default:return f}return N.next_out=Z,N.avail_out=F,N.next_in=J,N.avail_in=M,P.hold=G,P.bits=D,(P.wsize||V!==N.avail_out&&P.mode<30&&(P.mode<27||O!==4))&&C(N,N.output,N.next_out,V-N.avail_out)?(P.mode=31,-4):(j-=N.avail_in,V-=N.avail_out,N.total_in+=j,N.total_out+=V,P.total+=V,P.wrap&&V&&(N.adler=P.check=P.flags?a(P.check,ee,V,N.next_out-V):o(P.check,ee,V,N.next_out-V)),N.data_type=P.bits+(P.last?64:0)+(P.mode===12?128:0)+(P.mode===20||P.mode===15?256:0),(j==0&&V===0||O===4)&&ge===h&&(ge=-5),ge)},s.inflateEnd=function(N){if(!N||!N.state)return f;var O=N.state;return O.window&&(O.window=null),N.state=null,h},s.inflateGetHeader=function(N,O){var P;return N&&N.state&&2&(P=N.state).wrap?((P.head=O).done=!1,h):f},s.inflateSetDictionary=function(N,O){var P,$=O.length;return N&&N.state?(P=N.state).wrap!==0&&P.mode!==11?f:P.mode===11&&o(1,O,$,0)!==P.check?-3:C(N,O,$,$)?(P.mode=31,-4):(P.havedict=1,h):f},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,s){var i=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(u,d,h,f,g,y,m,b){var v,_,E,w,S,k,x,I,R,C=b.bits,N=0,O=0,P=0,$=0,ee=0,J=0,Z=0,M=0,F=0,G=0,D=null,j=0,V=new i.Buf16(16),W=new i.Buf16(16),re=null,te=0;for(N=0;N<=15;N++)V[N]=0;for(O=0;O<f;O++)V[d[h+O]]++;for(ee=C,$=15;1<=$&&V[$]===0;$--);if($<ee&&(ee=$),$===0)return g[y++]=20971520,g[y++]=20971520,b.bits=1,0;for(P=1;P<$&&V[P]===0;P++);for(ee<P&&(ee=P),N=M=1;N<=15;N++)if(M<<=1,(M-=V[N])<0)return-1;if(0<M&&(u===0||$!==1))return-1;for(W[1]=0,N=1;N<15;N++)W[N+1]=W[N]+V[N];for(O=0;O<f;O++)d[h+O]!==0&&(m[W[d[h+O]]++]=O);if(k=u===0?(D=re=m,19):u===1?(D=o,j-=257,re=a,te-=257,256):(D=l,re=c,-1),N=P,S=y,Z=O=G=0,E=-1,w=(F=1<<(J=ee))-1,u===1&&852<F||u===2&&592<F)return 1;for(;;){for(x=N-Z,R=m[O]<k?(I=0,m[O]):m[O]>k?(I=re[te+m[O]],D[j+m[O]]):(I=96,0),v=1<<N-Z,P=_=1<<J;g[S+(G>>Z)+(_-=v)]=x<<24|I<<16|R|0,_!==0;);for(v=1<<N-1;G&v;)v>>=1;if(v!==0?(G&=v-1,G+=v):G=0,O++,--V[N]==0){if(N===$)break;N=d[h+m[O]]}if(ee<N&&(G&w)!==E){for(Z===0&&(Z=ee),S+=P,M=1<<(J=N-Z);J+Z<$&&!((M-=V[J+Z])<=0);)J++,M<<=1;if(F+=1<<J,u===1&&852<F||u===2&&592<F)return 1;g[E=G&w]=ee<<24|J<<16|S-y|0}}return G!==0&&(g[S+G]=N-Z<<24|64<<16|0),b.bits=ee,0}},{"../utils/common":41}],51:[function(n,r,s){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,s){var i=n("../utils/common"),o=0,a=1;function l(se){for(var fe=se.length;0<=--fe;)se[fe]=0}var c=0,u=29,d=256,h=d+1+u,f=30,g=19,y=2*h+1,m=15,b=16,v=7,_=256,E=16,w=17,S=18,k=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],x=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],C=new Array(2*(h+2));l(C);var N=new Array(2*f);l(N);var O=new Array(512);l(O);var P=new Array(256);l(P);var $=new Array(u);l($);var ee,J,Z,M=new Array(f);function F(se,fe,Ce,Ie,xe){this.static_tree=se,this.extra_bits=fe,this.extra_base=Ce,this.elems=Ie,this.max_length=xe,this.has_stree=se&&se.length}function G(se,fe){this.dyn_tree=se,this.max_code=0,this.stat_desc=fe}function D(se){return se<256?O[se]:O[256+(se>>>7)]}function j(se,fe){se.pending_buf[se.pending++]=255&fe,se.pending_buf[se.pending++]=fe>>>8&255}function V(se,fe,Ce){se.bi_valid>b-Ce?(se.bi_buf|=fe<<se.bi_valid&65535,j(se,se.bi_buf),se.bi_buf=fe>>b-se.bi_valid,se.bi_valid+=Ce-b):(se.bi_buf|=fe<<se.bi_valid&65535,se.bi_valid+=Ce)}function W(se,fe,Ce){V(se,Ce[2*fe],Ce[2*fe+1])}function re(se,fe){for(var Ce=0;Ce|=1&se,se>>>=1,Ce<<=1,0<--fe;);return Ce>>>1}function te(se,fe,Ce){var Ie,xe,$e=new Array(m+1),je=0;for(Ie=1;Ie<=m;Ie++)$e[Ie]=je=je+Ce[Ie-1]<<1;for(xe=0;xe<=fe;xe++){var Be=se[2*xe+1];Be!==0&&(se[2*xe]=re($e[Be]++,Be))}}function Y(se){var fe;for(fe=0;fe<h;fe++)se.dyn_ltree[2*fe]=0;for(fe=0;fe<f;fe++)se.dyn_dtree[2*fe]=0;for(fe=0;fe<g;fe++)se.bl_tree[2*fe]=0;se.dyn_ltree[2*_]=1,se.opt_len=se.static_len=0,se.last_lit=se.matches=0}function de(se){8<se.bi_valid?j(se,se.bi_buf):0<se.bi_valid&&(se.pending_buf[se.pending++]=se.bi_buf),se.bi_buf=0,se.bi_valid=0}function ye(se,fe,Ce,Ie){var xe=2*fe,$e=2*Ce;return se[xe]<se[$e]||se[xe]===se[$e]&&Ie[fe]<=Ie[Ce]}function Se(se,fe,Ce){for(var Ie=se.heap[Ce],xe=Ce<<1;xe<=se.heap_len&&(xe<se.heap_len&&ye(fe,se.heap[xe+1],se.heap[xe],se.depth)&&xe++,!ye(fe,Ie,se.heap[xe],se.depth));)se.heap[Ce]=se.heap[xe],Ce=xe,xe<<=1;se.heap[Ce]=Ie}function Te(se,fe,Ce){var Ie,xe,$e,je,Be=0;if(se.last_lit!==0)for(;Ie=se.pending_buf[se.d_buf+2*Be]<<8|se.pending_buf[se.d_buf+2*Be+1],xe=se.pending_buf[se.l_buf+Be],Be++,Ie===0?W(se,xe,fe):(W(se,($e=P[xe])+d+1,fe),(je=k[$e])!==0&&V(se,xe-=$[$e],je),W(se,$e=D(--Ie),Ce),(je=x[$e])!==0&&V(se,Ie-=M[$e],je)),Be<se.last_lit;);W(se,_,fe)}function ke(se,fe){var Ce,Ie,xe,$e=fe.dyn_tree,je=fe.stat_desc.static_tree,Be=fe.stat_desc.has_stree,Ae=fe.stat_desc.elems,Ye=-1;for(se.heap_len=0,se.heap_max=y,Ce=0;Ce<Ae;Ce++)$e[2*Ce]!==0?(se.heap[++se.heap_len]=Ye=Ce,se.depth[Ce]=0):$e[2*Ce+1]=0;for(;se.heap_len<2;)$e[2*(xe=se.heap[++se.heap_len]=Ye<2?++Ye:0)]=1,se.depth[xe]=0,se.opt_len--,Be&&(se.static_len-=je[2*xe+1]);for(fe.max_code=Ye,Ce=se.heap_len>>1;1<=Ce;Ce--)Se(se,$e,Ce);for(xe=Ae;Ce=se.heap[1],se.heap[1]=se.heap[se.heap_len--],Se(se,$e,1),Ie=se.heap[1],se.heap[--se.heap_max]=Ce,se.heap[--se.heap_max]=Ie,$e[2*xe]=$e[2*Ce]+$e[2*Ie],se.depth[xe]=(se.depth[Ce]>=se.depth[Ie]?se.depth[Ce]:se.depth[Ie])+1,$e[2*Ce+1]=$e[2*Ie+1]=xe,se.heap[1]=xe++,Se(se,$e,1),2<=se.heap_len;);se.heap[--se.heap_max]=se.heap[1],function(Xe,tt){var ie,z,X,pe,Le,Ue,We=tt.dyn_tree,Rt=tt.max_code,At=tt.stat_desc.static_tree,fn=tt.stat_desc.has_stree,Ht=tt.stat_desc.extra_bits,Kt=tt.stat_desc.extra_base,Ks=tt.stat_desc.max_length,Hn=0;for(pe=0;pe<=m;pe++)Xe.bl_count[pe]=0;for(We[2*Xe.heap[Xe.heap_max]+1]=0,ie=Xe.heap_max+1;ie<y;ie++)Ks<(pe=We[2*We[2*(z=Xe.heap[ie])+1]+1]+1)&&(pe=Ks,Hn++),We[2*z+1]=pe,Rt<z||(Xe.bl_count[pe]++,Le=0,Kt<=z&&(Le=Ht[z-Kt]),Ue=We[2*z],Xe.opt_len+=Ue*(pe+Le),fn&&(Xe.static_len+=Ue*(At[2*z+1]+Le)));if(Hn!==0){do{for(pe=Ks-1;Xe.bl_count[pe]===0;)pe--;Xe.bl_count[pe]--,Xe.bl_count[pe+1]+=2,Xe.bl_count[Ks]--,Hn-=2}while(0<Hn);for(pe=Ks;pe!==0;pe--)for(z=Xe.bl_count[pe];z!==0;)Rt<(X=Xe.heap[--ie])||(We[2*X+1]!==pe&&(Xe.opt_len+=(pe-We[2*X+1])*We[2*X],We[2*X+1]=pe),z--)}}(se,fe),te($e,Ye,se.bl_count)}function K(se,fe,Ce){var Ie,xe,$e=-1,je=fe[1],Be=0,Ae=7,Ye=4;for(je===0&&(Ae=138,Ye=3),fe[2*(Ce+1)+1]=65535,Ie=0;Ie<=Ce;Ie++)xe=je,je=fe[2*(Ie+1)+1],++Be<Ae&&xe===je||(Be<Ye?se.bl_tree[2*xe]+=Be:xe!==0?(xe!==$e&&se.bl_tree[2*xe]++,se.bl_tree[2*E]++):Be<=10?se.bl_tree[2*w]++:se.bl_tree[2*S]++,$e=xe,Ye=(Be=0)===je?(Ae=138,3):xe===je?(Ae=6,3):(Ae=7,4))}function ge(se,fe,Ce){var Ie,xe,$e=-1,je=fe[1],Be=0,Ae=7,Ye=4;for(je===0&&(Ae=138,Ye=3),Ie=0;Ie<=Ce;Ie++)if(xe=je,je=fe[2*(Ie+1)+1],!(++Be<Ae&&xe===je)){if(Be<Ye)for(;W(se,xe,se.bl_tree),--Be!=0;);else xe!==0?(xe!==$e&&(W(se,xe,se.bl_tree),Be--),W(se,E,se.bl_tree),V(se,Be-3,2)):Be<=10?(W(se,w,se.bl_tree),V(se,Be-3,3)):(W(se,S,se.bl_tree),V(se,Be-11,7));$e=xe,Ye=(Be=0)===je?(Ae=138,3):xe===je?(Ae=6,3):(Ae=7,4)}}l(M);var ne=!1;function le(se,fe,Ce,Ie){V(se,(c<<1)+(Ie?1:0),3),function(xe,$e,je,Be){de(xe),j(xe,je),j(xe,~je),i.arraySet(xe.pending_buf,xe.window,$e,je,xe.pending),xe.pending+=je}(se,fe,Ce)}s._tr_init=function(se){ne||(function(){var fe,Ce,Ie,xe,$e,je=new Array(m+1);for(xe=Ie=0;xe<u-1;xe++)for($[xe]=Ie,fe=0;fe<1<<k[xe];fe++)P[Ie++]=xe;for(P[Ie-1]=xe,xe=$e=0;xe<16;xe++)for(M[xe]=$e,fe=0;fe<1<<x[xe];fe++)O[$e++]=xe;for($e>>=7;xe<f;xe++)for(M[xe]=$e<<7,fe=0;fe<1<<x[xe]-7;fe++)O[256+$e++]=xe;for(Ce=0;Ce<=m;Ce++)je[Ce]=0;for(fe=0;fe<=143;)C[2*fe+1]=8,fe++,je[8]++;for(;fe<=255;)C[2*fe+1]=9,fe++,je[9]++;for(;fe<=279;)C[2*fe+1]=7,fe++,je[7]++;for(;fe<=287;)C[2*fe+1]=8,fe++,je[8]++;for(te(C,h+1,je),fe=0;fe<f;fe++)N[2*fe+1]=5,N[2*fe]=re(fe,5);ee=new F(C,k,d+1,h,m),J=new F(N,x,0,f,m),Z=new F(new Array(0),I,0,g,v)}(),ne=!0),se.l_desc=new G(se.dyn_ltree,ee),se.d_desc=new G(se.dyn_dtree,J),se.bl_desc=new G(se.bl_tree,Z),se.bi_buf=0,se.bi_valid=0,Y(se)},s._tr_stored_block=le,s._tr_flush_block=function(se,fe,Ce,Ie){var xe,$e,je=0;0<se.level?(se.strm.data_type===2&&(se.strm.data_type=function(Be){var Ae,Ye=4093624447;for(Ae=0;Ae<=31;Ae++,Ye>>>=1)if(1&Ye&&Be.dyn_ltree[2*Ae]!==0)return o;if(Be.dyn_ltree[18]!==0||Be.dyn_ltree[20]!==0||Be.dyn_ltree[26]!==0)return a;for(Ae=32;Ae<d;Ae++)if(Be.dyn_ltree[2*Ae]!==0)return a;return o}(se)),ke(se,se.l_desc),ke(se,se.d_desc),je=function(Be){var Ae;for(K(Be,Be.dyn_ltree,Be.l_desc.max_code),K(Be,Be.dyn_dtree,Be.d_desc.max_code),ke(Be,Be.bl_desc),Ae=g-1;3<=Ae&&Be.bl_tree[2*R[Ae]+1]===0;Ae--);return Be.opt_len+=3*(Ae+1)+5+5+4,Ae}(se),xe=se.opt_len+3+7>>>3,($e=se.static_len+3+7>>>3)<=xe&&(xe=$e)):xe=$e=Ce+5,Ce+4<=xe&&fe!==-1?le(se,fe,Ce,Ie):se.strategy===4||$e===xe?(V(se,2+(Ie?1:0),3),Te(se,C,N)):(V(se,4+(Ie?1:0),3),function(Be,Ae,Ye,Xe){var tt;for(V(Be,Ae-257,5),V(Be,Ye-1,5),V(Be,Xe-4,4),tt=0;tt<Xe;tt++)V(Be,Be.bl_tree[2*R[tt]+1],3);ge(Be,Be.dyn_ltree,Ae-1),ge(Be,Be.dyn_dtree,Ye-1)}(se,se.l_desc.max_code+1,se.d_desc.max_code+1,je+1),Te(se,se.dyn_ltree,se.dyn_dtree)),Y(se),Ie&&de(se)},s._tr_tally=function(se,fe,Ce){return se.pending_buf[se.d_buf+2*se.last_lit]=fe>>>8&255,se.pending_buf[se.d_buf+2*se.last_lit+1]=255&fe,se.pending_buf[se.l_buf+se.last_lit]=255&Ce,se.last_lit++,fe===0?se.dyn_ltree[2*Ce]++:(se.matches++,fe--,se.dyn_ltree[2*(P[Ce]+d+1)]++,se.dyn_dtree[2*D(fe)]++),se.last_lit===se.lit_bufsize-1},s._tr_align=function(se){V(se,2,3),W(se,_,C),function(fe){fe.bi_valid===16?(j(fe,fe.bi_buf),fe.bi_buf=0,fe.bi_valid=0):8<=fe.bi_valid&&(fe.pending_buf[fe.pending++]=255&fe.bi_buf,fe.bi_buf>>=8,fe.bi_valid-=8)}(se)}},{"../utils/common":41}],53:[function(n,r,s){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,s){(function(i){(function(o,a){if(!o.setImmediate){var l,c,u,d,h=1,f={},g=!1,y=o.document,m=Object.getPrototypeOf&&Object.getPrototypeOf(o);m=m&&m.setTimeout?m:o,l={}.toString.call(o.process)==="[object process]"?function(E){An.nextTick(function(){v(E)})}:function(){if(o.postMessage&&!o.importScripts){var E=!0,w=o.onmessage;return o.onmessage=function(){E=!1},o.postMessage("","*"),o.onmessage=w,E}}()?(d="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",_,!1):o.attachEvent("onmessage",_),function(E){o.postMessage(d+E,"*")}):o.MessageChannel?((u=new MessageChannel).port1.onmessage=function(E){v(E.data)},function(E){u.port2.postMessage(E)}):y&&"onreadystatechange"in y.createElement("script")?(c=y.documentElement,function(E){var w=y.createElement("script");w.onreadystatechange=function(){v(E),w.onreadystatechange=null,c.removeChild(w),w=null},c.appendChild(w)}):function(E){setTimeout(v,0,E)},m.setImmediate=function(E){typeof E!="function"&&(E=new Function(""+E));for(var w=new Array(arguments.length-1),S=0;S<w.length;S++)w[S]=arguments[S+1];var k={callback:E,args:w};return f[h]=k,l(h),h++},m.clearImmediate=b}function b(E){delete f[E]}function v(E){if(g)setTimeout(v,0,E);else{var w=f[E];if(w){g=!0;try{(function(S){var k=S.callback,x=S.args;switch(x.length){case 0:k();break;case 1:k(x[0]);break;case 2:k(x[0],x[1]);break;case 3:k(x[0],x[1],x[2]);break;default:k.apply(a,x)}})(w)}finally{b(E),g=!1}}}}function _(E){E.source===o&&typeof E.data=="string"&&E.data.indexOf(d)===0&&v(+E.data.slice(d.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof ii<"u"?ii:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(qQ);var T4e=qQ.exports;const N4e=ao(T4e);var KQ={exports:{}};(function(t,e){(function(n,r){r()})(ii,function(){function n(c,u){return typeof u>"u"?u={autoBom:!1}:typeof u!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function r(c,u,d){var h=new XMLHttpRequest;h.open("GET",c),h.responseType="blob",h.onload=function(){l(h.response,u,d)},h.onerror=function(){console.error("could not download file")},h.send()}function s(c){var u=new XMLHttpRequest;u.open("HEAD",c,!1);try{u.send()}catch{}return 200<=u.status&&299>=u.status}function i(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(u)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof ii=="object"&&ii.global===ii?ii:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(c,u,d){var h=o.URL||o.webkitURL,f=document.createElement("a");u=u||c.name||"download",f.download=u,f.rel="noopener",typeof c=="string"?(f.href=c,f.origin===location.origin?i(f):s(f.href)?r(c,u,d):i(f,f.target="_blank")):(f.href=h.createObjectURL(c),setTimeout(function(){h.revokeObjectURL(f.href)},4e4),setTimeout(function(){i(f)},0))}:"msSaveOrOpenBlob"in navigator?function(c,u,d){if(u=u||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(n(c,d),u);else if(s(c))r(c,u,d);else{var h=document.createElement("a");h.href=c,h.target="_blank",setTimeout(function(){i(h)})}}:function(c,u,d,h){if(h=h||open("","_blank"),h&&(h.document.title=h.document.body.innerText="downloading..."),typeof c=="string")return r(c,u,d);var f=c.type==="application/octet-stream",g=/constructor/i.test(o.HTMLElement)||o.safari,y=/CriOS\/[\d]+/.test(navigator.userAgent);if((y||f&&g||a)&&typeof FileReader<"u"){var m=new FileReader;m.onloadend=function(){var _=m.result;_=y?_:_.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=_:location=_,h=null},m.readAsDataURL(c)}else{var b=o.URL||o.webkitURL,v=b.createObjectURL(c);h?h.location=v:location.href=v,h=null,setTimeout(function(){b.revokeObjectURL(v)},4e4)}});o.saveAs=l.saveAs=l,t.exports=l})})(KQ);var P4e=KQ.exports;const I4e=ao(P4e);function Vk(){return typeof navigator=="object"&&"userAgent"in navigator?navigator.userAgent:typeof An=="object"&&An.version!==void 0?`Node.js/${An.version.substr(1)} (${An.platform}; ${An.arch})`:"<environment undetectable>"}function YQ(t,e,n,r){if(typeof n!="function")throw new Error("method for before hook must be a function");return r||(r={}),Array.isArray(e)?e.reverse().reduce((s,i)=>YQ.bind(null,t,i,s,r),n)():Promise.resolve().then(()=>t.registry[e]?t.registry[e].reduce((s,i)=>i.hook.bind(null,s,r),n)():n(r))}function R4e(t,e,n,r){const s=r;t.registry[n]||(t.registry[n]=[]),e==="before"&&(r=(i,o)=>Promise.resolve().then(s.bind(null,o)).then(i.bind(null,o))),e==="after"&&(r=(i,o)=>{let a;return Promise.resolve().then(i.bind(null,o)).then(l=>(a=l,s(a,o))).then(()=>a)}),e==="error"&&(r=(i,o)=>Promise.resolve().then(i.bind(null,o)).catch(a=>s(a,o))),t.registry[n].push({hook:r,orig:s})}function L4e(t,e,n){if(!t.registry[e])return;const r=t.registry[e].map(s=>s.orig).indexOf(n);r!==-1&&t.registry[e].splice(r,1)}const NB=Function.bind,PB=NB.bind(NB);function O4e(t,e,n){const r=PB(L4e,null).apply(null,[e]);t.api={remove:r},t.remove=r,["before","error","after","wrap"].forEach(s=>{const i=[e,s];t[s]=t.api[s]=PB(R4e,null).apply(null,i)})}function D4e(){const t={registry:{}},e=YQ.bind(null,t);return O4e(e,t),e}const M4e={Collection:D4e};var j4e="0.0.0-development",F4e=`octokit-endpoint.js/${j4e} ${Vk()}`,B4e={method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":F4e},mediaType:{format:""}};function U4e(t){return t?Object.keys(t).reduce((e,n)=>(e[n.toLowerCase()]=t[n],e),{}):{}}function $4e(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);if(e===null)return!0;const n=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Function.prototype.call(n)===Function.prototype.call(t)}function XQ(t,e){const n=Object.assign({},t);return Object.keys(e).forEach(r=>{$4e(e[r])?r in t?n[r]=XQ(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})}),n}function IB(t){for(const e in t)t[e]===void 0&&delete t[e];return t}function CP(t,e,n){if(typeof e=="string"){let[s,i]=e.split(" ");n=Object.assign(i?{method:s,url:i}:{url:s},n)}else n=Object.assign({},e);n.headers=U4e(n.headers),IB(n),IB(n.headers);const r=XQ(t||{},n);return n.url==="/graphql"&&(t&&t.mediaType.previews?.length&&(r.mediaType.previews=t.mediaType.previews.filter(s=>!r.mediaType.previews.includes(s)).concat(r.mediaType.previews)),r.mediaType.previews=(r.mediaType.previews||[]).map(s=>s.replace(/-preview/,""))),r}function H4e(t,e){const n=/\?/.test(t)?"&":"?",r=Object.keys(e);return r.length===0?t:t+n+r.map(s=>s==="q"?"q="+e.q.split("+").map(encodeURIComponent).join("+"):`${s}=${encodeURIComponent(e[s])}`).join("&")}var z4e=/\{[^}]+\}/g;function V4e(t){return t.replace(/^\W+|\W+$/g,"").split(/,/)}function W4e(t){const e=t.match(z4e);return e?e.map(V4e).reduce((n,r)=>n.concat(r),[]):[]}function RB(t,e){const n={__proto__:null};for(const r of Object.keys(t))e.indexOf(r)===-1&&(n[r]=t[r]);return n}function JQ(t){return t.split(/(%[0-9A-Fa-f]{2})/g).map(function(e){return/%[0-9A-Fa-f]/.test(e)||(e=encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]")),e}).join("")}function am(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function F0(t,e,n){return e=t==="+"||t==="#"?JQ(e):am(e),n?am(n)+"="+e:e}function Op(t){return t!=null}function GT(t){return t===";"||t==="&"||t==="?"}function G4e(t,e,n,r){var s=t[n],i=[];if(Op(s)&&s!=="")if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")s=s.toString(),r&&r!=="*"&&(s=s.substring(0,parseInt(r,10))),i.push(F0(e,s,GT(e)?n:""));else if(r==="*")Array.isArray(s)?s.filter(Op).forEach(function(o){i.push(F0(e,o,GT(e)?n:""))}):Object.keys(s).forEach(function(o){Op(s[o])&&i.push(F0(e,s[o],o))});else{const o=[];Array.isArray(s)?s.filter(Op).forEach(function(a){o.push(F0(e,a))}):Object.keys(s).forEach(function(a){Op(s[a])&&(o.push(am(a)),o.push(F0(e,s[a].toString())))}),GT(e)?i.push(am(n)+"="+o.join(",")):o.length!==0&&i.push(o.join(","))}else e===";"?Op(s)&&i.push(am(n)):s===""&&(e==="&"||e==="?")?i.push(am(n)+"="):s===""&&i.push("");return i}function q4e(t){return{expand:K4e.bind(null,t)}}function K4e(t,e){var n=["+","#",".","/",";","?","&"];return t=t.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(r,s,i){if(s){let a="";const l=[];if(n.indexOf(s.charAt(0))!==-1&&(a=s.charAt(0),s=s.substr(1)),s.split(/,/g).forEach(function(c){var u=/([^:\*]*)(?::(\d+)|(\*))?/.exec(c);l.push(G4e(e,a,u[1],u[2]||u[3]))}),a&&a!=="+"){var o=",";return a==="?"?o="&":a!=="#"&&(o=a),(l.length!==0?a:"")+l.join(o)}else return l.join(",")}else return JQ(i)}),t==="/"?t:t.replace(/\/$/,"")}function ZQ(t){let e=t.method.toUpperCase(),n=(t.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),r=Object.assign({},t.headers),s,i=RB(t,["method","baseUrl","url","headers","request","mediaType"]);const o=W4e(n);n=q4e(n).expand(i),/^http/.test(n)||(n=t.baseUrl+n);const a=Object.keys(t).filter(u=>o.includes(u)).concat("baseUrl"),l=RB(i,a);if(!/application\/octet-stream/i.test(r.accept)&&(t.mediaType.format&&(r.accept=r.accept.split(/,/).map(u=>u.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${t.mediaType.format}`)).join(",")),n.endsWith("/graphql")&&t.mediaType.previews?.length)){const u=r.accept.match(/[\w-]+(?=-preview)/g)||[];r.accept=u.concat(t.mediaType.previews).map(d=>{const h=t.mediaType.format?`.${t.mediaType.format}`:"+json";return`application/vnd.github.${d}-preview${h}`}).join(",")}return["GET","HEAD"].includes(e)?n=H4e(n,l):"data"in l?s=l.data:Object.keys(l).length&&(s=l),!r["content-type"]&&typeof s<"u"&&(r["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(e)&&typeof s>"u"&&(s=""),Object.assign({method:e,url:n,headers:r},typeof s<"u"?{body:s}:null,t.request?{request:t.request}:null)}function Y4e(t,e,n){return ZQ(CP(t,e,n))}function QQ(t,e){const n=CP(t,e),r=Y4e.bind(null,n);return Object.assign(r,{DEFAULTS:n,defaults:QQ.bind(null,n),merge:CP.bind(null,n),parse:ZQ})}var X4e=QQ(null,B4e);const _O=function(){};_O.prototype=Object.create(null);const LB=/; *([!#$%&'*+.^\w`|~-]+)=("(?:[\v\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\v\u0020-\u00ff])*"|[!#$%&'*+.^\w`|~-]+) */gu,OB=/\\([\v\u0020-\u00ff])/gu,J4e=/^[!#$%&'*+.^\w|~-]+\/[!#$%&'*+.^\w|~-]+$/u,lm={type:"",parameters:new _O};Object.freeze(lm.parameters);Object.freeze(lm);function Z4e(t){if(typeof t!="string")return lm;let e=t.indexOf(";");const n=e!==-1?t.slice(0,e).trim():t.trim();if(J4e.test(n)===!1)return lm;const r={type:n.toLowerCase(),parameters:new _O};if(e===-1)return r;let s,i,o;for(LB.lastIndex=e;i=LB.exec(t);){if(i.index!==e)return lm;e+=i[0].length,s=i[1].toLowerCase(),o=i[2],o[0]==='"'&&(o=o.slice(1,o.length-1),OB.test(o)&&(o=o.replace(OB,"$1"))),r.parameters[s]=o}return e!==t.length?lm:r}var Q4e=Z4e;class Nx extends Error{name;status;request;response;constructor(e,n,r){super(e),this.name="HttpError",this.status=Number.parseInt(n),Number.isNaN(this.status)&&(this.status=0),"response"in r&&(this.response=r.response);const s=Object.assign({},r.request);r.request.headers.authorization&&(s.headers=Object.assign({},r.request.headers,{authorization:r.request.headers.authorization.replace(/ .*$/," [REDACTED]")})),s.url=s.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=s}}var eIe="0.0.0-development",tIe={headers:{"user-agent":`octokit-request.js/${eIe} ${Vk()}`}};function nIe(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);if(e===null)return!0;const n=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Function.prototype.call(n)===Function.prototype.call(t)}async function DB(t){const e=t.request?.fetch||globalThis.fetch;if(!e)throw new Error("fetch is not set. Please pass a fetch implementation as new Octokit({ request: { fetch }}). Learn more at https://github.com/octokit/octokit.js/#fetch-missing");const n=t.request?.log||console,r=t.request?.parseSuccessResponseBody!==!1,s=nIe(t.body)||Array.isArray(t.body)?JSON.stringify(t.body):t.body,i=Object.fromEntries(Object.entries(t.headers).map(([d,h])=>[d,String(h)]));let o;try{o=await e(t.url,{method:t.method,body:s,redirect:t.request?.redirect,headers:i,signal:t.request?.signal,...t.body&&{duplex:"half"}})}catch(d){let h="Unknown Error";if(d instanceof Error){if(d.name==="AbortError")throw d.status=500,d;h=d.message,d.name==="TypeError"&&"cause"in d&&(d.cause instanceof Error?h=d.cause.message:typeof d.cause=="string"&&(h=d.cause))}const f=new Nx(h,500,{request:t});throw f.cause=d,f}const a=o.status,l=o.url,c={};for(const[d,h]of o.headers)c[d]=h;const u={url:l,status:a,headers:c,data:""};if("deprecation"in c){const d=c.link&&c.link.match(/<([^>]+)>; rel="deprecation"/),h=d&&d.pop();n.warn(`[@octokit/request] "${t.method} ${t.url}" is deprecated. It is scheduled to be removed on ${c.sunset}${h?`. See ${h}`:""}`)}if(a===204||a===205)return u;if(t.method==="HEAD"){if(a<400)return u;throw new Nx(o.statusText,a,{response:u,request:t})}if(a===304)throw u.data=await qT(o),new Nx("Not modified",a,{response:u,request:t});if(a>=400)throw u.data=await qT(o),new Nx(sIe(u.data),a,{response:u,request:t});return u.data=r?await qT(o):o.body,u}async function qT(t){const e=t.headers.get("content-type");if(!e)return t.text().catch(()=>"");const n=Q4e(e);if(rIe(n)){let r="";try{return r=await t.text(),JSON.parse(r)}catch{return r}}else return n.type.startsWith("text/")||n.parameters.charset?.toLowerCase()==="utf-8"?t.text().catch(()=>""):t.arrayBuffer().catch(()=>new ArrayBuffer(0))}function rIe(t){return t.type==="application/json"||t.type==="application/scim+json"}function sIe(t){if(typeof t=="string")return t;if(t instanceof ArrayBuffer)return"Unknown error";if("message"in t){const e="documentation_url"in t?` - ${t.documentation_url}`:"";return Array.isArray(t.errors)?`${t.message}: ${t.errors.map(n=>JSON.stringify(n)).join(", ")}${e}`:`${t.message}${e}`}return`Unknown error: ${JSON.stringify(t)}`}function AP(t,e){const n=t.defaults(e);return Object.assign(function(s,i){const o=n.merge(s,i);if(!o.request||!o.request.hook)return DB(n.parse(o));const a=(l,c)=>DB(n.parse(n.merge(l,c)));return Object.assign(a,{endpoint:n,defaults:AP.bind(null,n)}),o.request.hook(a,o)},{endpoint:n,defaults:AP.bind(null,n)})}var TP=AP(X4e,tIe),iIe="0.0.0-development";function oIe(t){return`Request failed due to following response errors:
`+t.errors.map(e=>` - ${e.message}`).join(`
`)}var aIe=class extends Error{constructor(t,e,n){super(oIe(n)),this.request=t,this.headers=e,this.response=n,this.errors=n.errors,this.data=n.data,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}name="GraphqlResponseError";errors;data},lIe=["method","baseUrl","url","headers","request","query","mediaType","operationName"],cIe=["query","method","url"],MB=/\/api\/v3\/?$/;function uIe(t,e,n){if(n){if(typeof e=="string"&&"query"in n)return Promise.reject(new Error('[@octokit/graphql] "query" cannot be used as variable name'));for(const o in n)if(cIe.includes(o))return Promise.reject(new Error(`[@octokit/graphql] "${o}" cannot be used as variable name`))}const r=typeof e=="string"?Object.assign({query:e},n):e,s=Object.keys(r).reduce((o,a)=>lIe.includes(a)?(o[a]=r[a],o):(o.variables||(o.variables={}),o.variables[a]=r[a],o),{}),i=r.baseUrl||t.endpoint.DEFAULTS.baseUrl;return MB.test(i)&&(s.url=i.replace(MB,"/api/graphql")),t(s).then(o=>{if(o.data.errors){const a={};for(const l of Object.keys(o.headers))a[l]=o.headers[l];throw new aIe(s,a,o.data)}return o.data.data})}function xO(t,e){const n=t.defaults(e);return Object.assign((s,i)=>uIe(n,s,i),{defaults:xO.bind(null,n),endpoint:n.endpoint})}xO(TP,{headers:{"user-agent":`octokit-graphql.js/${iIe} ${Vk()}`},method:"POST",url:"/graphql"});function dIe(t){return xO(t,{method:"POST",url:"/graphql"})}var KT="(?:[a-zA-Z0-9_-]+)",jB="\\.",FB=new RegExp(`^${KT}${jB}${KT}${jB}${KT}$`),hIe=FB.test.bind(FB);async function fIe(t){const e=hIe(t),n=t.startsWith("v1.")||t.startsWith("ghs_"),r=t.startsWith("ghu_");return{type:"token",token:t,tokenType:e?"app":n?"installation":r?"user-to-server":"oauth"}}function pIe(t){return t.split(/\./).length===3?`bearer ${t}`:`token ${t}`}async function mIe(t,e,n,r){const s=e.endpoint.merge(n,r);return s.headers.authorization=pIe(t),e(s)}var gIe=function(e){if(!e)throw new Error("[@octokit/auth-token] No token passed to createTokenAuth");if(typeof e!="string")throw new Error("[@octokit/auth-token] Token passed to createTokenAuth is not a string");return e=e.replace(/^(token|bearer) +/i,""),Object.assign(fIe.bind(null,e),{hook:mIe.bind(null,e)})};const eee="6.1.3",BB=()=>{},bIe=console.warn.bind(console),yIe=console.error.bind(console),UB=`octokit-core.js/${eee} ${Vk()}`;let vIe=class{static VERSION=eee;static defaults(e){return class extends this{constructor(...r){const s=r[0]||{};if(typeof e=="function"){super(e(s));return}super(Object.assign({},e,s,s.userAgent&&e.userAgent?{userAgent:`${s.userAgent} ${e.userAgent}`}:null))}}}static plugins=[];static plugin(...e){const n=this.plugins;return class extends this{static plugins=n.concat(e.filter(s=>!n.includes(s)))}}constructor(e={}){const n=new M4e.Collection,r={baseUrl:TP.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},e.request,{hook:n.bind(null,"request")}),mediaType:{previews:[],format:""}};if(r.headers["user-agent"]=e.userAgent?`${e.userAgent} ${UB}`:UB,e.baseUrl&&(r.baseUrl=e.baseUrl),e.previews&&(r.mediaType.previews=e.previews),e.timeZone&&(r.headers["time-zone"]=e.timeZone),this.request=TP.defaults(r),this.graphql=dIe(this.request).defaults(r),this.log=Object.assign({debug:BB,info:BB,warn:bIe,error:yIe},e.log),this.hook=n,e.authStrategy){const{authStrategy:i,...o}=e,a=i(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:o},e.auth));n.wrap("request",a.hook),this.auth=a}else if(!e.auth)this.auth=async()=>({type:"unauthenticated"});else{const i=gIe(e.auth);n.wrap("request",i.hook),this.auth=i}const s=this.constructor;for(let i=0;i<s.plugins.length;++i)Object.assign(this,s.plugins[i](this,e))}request;graphql;log;hook;auth};const _Ie="5.3.1";function tee(t){t.hook.wrap("request",(e,n)=>{t.log.debug("request",n);const r=Date.now(),s=t.request.endpoint.parse(n),i=s.url.replace(n.baseUrl,"");return e(n).then(o=>{const a=o.headers["x-github-request-id"];return t.log.info(`${s.method} ${i} - ${o.status} with id ${a} in ${Date.now()-r}ms`),o}).catch(o=>{const a=o.response?.headers["x-github-request-id"]||"UNKNOWN";throw t.log.error(`${s.method} ${i} - ${o.status} with id ${a} in ${Date.now()-r}ms`),o})})}tee.VERSION=_Ie;var xIe="0.0.0-development";function wIe(t){if(!t.data)return{...t,data:[]};if(!("total_count"in t.data&&!("url"in t.data)))return t;const n=t.data.incomplete_results,r=t.data.repository_selection,s=t.data.total_count;delete t.data.incomplete_results,delete t.data.repository_selection,delete t.data.total_count;const i=Object.keys(t.data)[0],o=t.data[i];return t.data=o,typeof n<"u"&&(t.data.incomplete_results=n),typeof r<"u"&&(t.data.repository_selection=r),t.data.total_count=s,t}function wO(t,e,n){const r=typeof e=="function"?e.endpoint(n):t.request.endpoint(e,n),s=typeof e=="function"?e:t.request,i=r.method,o=r.headers;let a=r.url;return{[Symbol.asyncIterator]:()=>({async next(){if(!a)return{done:!0};try{const l=await s({method:i,url:a,headers:o}),c=wIe(l);return a=((c.headers.link||"").match(/<([^>]+)>;\s*rel="next"/)||[])[1],{value:c}}catch(l){if(l.status!==409)throw l;return a="",{value:{status:200,headers:{},data:[]}}}}})}}function nee(t,e,n,r){return typeof n=="function"&&(r=n,n=void 0),ree(t,[],wO(t,e,n)[Symbol.asyncIterator](),r)}function ree(t,e,n,r){return n.next().then(s=>{if(s.done)return e;let i=!1;function o(){i=!0}return e=e.concat(r?r(s.value,o):s.value.data),i?e:ree(t,e,n,r)})}Object.assign(nee,{iterator:wO});function see(t){return{paginate:Object.assign(nee.bind(null,t),{iterator:wO.bind(null,t)})}}see.VERSION=xIe;const EIe="13.3.1",SIe={actions:{addCustomLabelsToSelfHostedRunnerForOrg:["POST /orgs/{org}/actions/runners/{runner_id}/labels"],addCustomLabelsToSelfHostedRunnerForRepo:["POST /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],addRepoAccessToSelfHostedRunnerGroupInOrg:["PUT /orgs/{org}/actions/runner-groups/{runner_group_id}/repositories/{repository_id}"],addSelectedRepoToOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],addSelectedRepoToOrgVariable:["PUT /orgs/{org}/actions/variables/{name}/repositories/{repository_id}"],approveWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/approve"],cancelWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/cancel"],createEnvironmentVariable:["POST /repos/{owner}/{repo}/environments/{environment_name}/variables"],createOrUpdateEnvironmentSecret:["PUT /repos/{owner}/{repo}/environments/{environment_name}/secrets/{secret_name}"],createOrUpdateOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/actions/secrets/{secret_name}"],createOrgVariable:["POST /orgs/{org}/actions/variables"],createRegistrationTokenForOrg:["POST /orgs/{org}/actions/runners/registration-token"],createRegistrationTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/registration-token"],createRemoveTokenForOrg:["POST /orgs/{org}/actions/runners/remove-token"],createRemoveTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/remove-token"],createRepoVariable:["POST /repos/{owner}/{repo}/actions/variables"],createWorkflowDispatch:["POST /repos/{owner}/{repo}/actions/workflows/{workflow_id}/dispatches"],deleteActionsCacheById:["DELETE /repos/{owner}/{repo}/actions/caches/{cache_id}"],deleteActionsCacheByKey:["DELETE /repos/{owner}/{repo}/actions/caches{?key,ref}"],deleteArtifact:["DELETE /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],deleteEnvironmentSecret:["DELETE /repos/{owner}/{repo}/environments/{environment_name}/secrets/{secret_name}"],deleteEnvironmentVariable:["DELETE /repos/{owner}/{repo}/environments/{environment_name}/variables/{name}"],deleteOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}"],deleteOrgVariable:["DELETE /orgs/{org}/actions/variables/{name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/actions/secrets/{secret_name}"],deleteRepoVariable:["DELETE /repos/{owner}/{repo}/actions/variables/{name}"],deleteSelfHostedRunnerFromOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}"],deleteSelfHostedRunnerFromRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}"],deleteWorkflowRun:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}"],deleteWorkflowRunLogs:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],disableSelectedRepositoryGithubActionsOrganization:["DELETE /orgs/{org}/actions/permissions/repositories/{repository_id}"],disableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/disable"],downloadArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}/{archive_format}"],downloadJobLogsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}/logs"],downloadWorkflowRunAttemptLogs:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}/logs"],downloadWorkflowRunLogs:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],enableSelectedRepositoryGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories/{repository_id}"],enableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/enable"],forceCancelWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/force-cancel"],generateRunnerJitconfigForOrg:["POST /orgs/{org}/actions/runners/generate-jitconfig"],generateRunnerJitconfigForRepo:["POST /repos/{owner}/{repo}/actions/runners/generate-jitconfig"],getActionsCacheList:["GET /repos/{owner}/{repo}/actions/caches"],getActionsCacheUsage:["GET /repos/{owner}/{repo}/actions/cache/usage"],getActionsCacheUsageByRepoForOrg:["GET /orgs/{org}/actions/cache/usage-by-repository"],getActionsCacheUsageForOrg:["GET /orgs/{org}/actions/cache/usage"],getAllowedActionsOrganization:["GET /orgs/{org}/actions/permissions/selected-actions"],getAllowedActionsRepository:["GET /repos/{owner}/{repo}/actions/permissions/selected-actions"],getArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],getCustomOidcSubClaimForRepo:["GET /repos/{owner}/{repo}/actions/oidc/customization/sub"],getEnvironmentPublicKey:["GET /repos/{owner}/{repo}/environments/{environment_name}/secrets/public-key"],getEnvironmentSecret:["GET /repos/{owner}/{repo}/environments/{environment_name}/secrets/{secret_name}"],getEnvironmentVariable:["GET /repos/{owner}/{repo}/environments/{environment_name}/variables/{name}"],getGithubActionsDefaultWorkflowPermissionsOrganization:["GET /orgs/{org}/actions/permissions/workflow"],getGithubActionsDefaultWorkflowPermissionsRepository:["GET /repos/{owner}/{repo}/actions/permissions/workflow"],getGithubActionsPermissionsOrganization:["GET /orgs/{org}/actions/permissions"],getGithubActionsPermissionsRepository:["GET /repos/{owner}/{repo}/actions/permissions"],getJobForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}"],getOrgPublicKey:["GET /orgs/{org}/actions/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}"],getOrgVariable:["GET /orgs/{org}/actions/variables/{name}"],getPendingDeploymentsForRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/pending_deployments"],getRepoPermissions:["GET /repos/{owner}/{repo}/actions/permissions",{},{renamed:["actions","getGithubActionsPermissionsRepository"]}],getRepoPublicKey:["GET /repos/{owner}/{repo}/actions/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/actions/secrets/{secret_name}"],getRepoVariable:["GET /repos/{owner}/{repo}/actions/variables/{name}"],getReviewsForRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/approvals"],getSelfHostedRunnerForOrg:["GET /orgs/{org}/actions/runners/{runner_id}"],getSelfHostedRunnerForRepo:["GET /repos/{owner}/{repo}/actions/runners/{runner_id}"],getWorkflow:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}"],getWorkflowAccessToRepository:["GET /repos/{owner}/{repo}/actions/permissions/access"],getWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}"],getWorkflowRunAttempt:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}"],getWorkflowRunUsage:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/timing"],getWorkflowUsage:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/timing"],listArtifactsForRepo:["GET /repos/{owner}/{repo}/actions/artifacts"],listEnvironmentSecrets:["GET /repos/{owner}/{repo}/environments/{environment_name}/secrets"],listEnvironmentVariables:["GET /repos/{owner}/{repo}/environments/{environment_name}/variables"],listJobsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/jobs"],listJobsForWorkflowRunAttempt:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}/jobs"],listLabelsForSelfHostedRunnerForOrg:["GET /orgs/{org}/actions/runners/{runner_id}/labels"],listLabelsForSelfHostedRunnerForRepo:["GET /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],listOrgSecrets:["GET /orgs/{org}/actions/secrets"],listOrgVariables:["GET /orgs/{org}/actions/variables"],listRepoOrganizationSecrets:["GET /repos/{owner}/{repo}/actions/organization-secrets"],listRepoOrganizationVariables:["GET /repos/{owner}/{repo}/actions/organization-variables"],listRepoSecrets:["GET /repos/{owner}/{repo}/actions/secrets"],listRepoVariables:["GET /repos/{owner}/{repo}/actions/variables"],listRepoWorkflows:["GET /repos/{owner}/{repo}/actions/workflows"],listRunnerApplicationsForOrg:["GET /orgs/{org}/actions/runners/downloads"],listRunnerApplicationsForRepo:["GET /repos/{owner}/{repo}/actions/runners/downloads"],listSelectedReposForOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}/repositories"],listSelectedReposForOrgVariable:["GET /orgs/{org}/actions/variables/{name}/repositories"],listSelectedRepositoriesEnabledGithubActionsOrganization:["GET /orgs/{org}/actions/permissions/repositories"],listSelfHostedRunnersForOrg:["GET /orgs/{org}/actions/runners"],listSelfHostedRunnersForRepo:["GET /repos/{owner}/{repo}/actions/runners"],listWorkflowRunArtifacts:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/artifacts"],listWorkflowRuns:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/runs"],listWorkflowRunsForRepo:["GET /repos/{owner}/{repo}/actions/runs"],reRunJobForWorkflowRun:["POST /repos/{owner}/{repo}/actions/jobs/{job_id}/rerun"],reRunWorkflow:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun"],reRunWorkflowFailedJobs:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun-failed-jobs"],removeAllCustomLabelsFromSelfHostedRunnerForOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}/labels"],removeAllCustomLabelsFromSelfHostedRunnerForRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],removeCustomLabelFromSelfHostedRunnerForOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}/labels/{name}"],removeCustomLabelFromSelfHostedRunnerForRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}/labels/{name}"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],removeSelectedRepoFromOrgVariable:["DELETE /orgs/{org}/actions/variables/{name}/repositories/{repository_id}"],reviewCustomGatesForRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/deployment_protection_rule"],reviewPendingDeploymentsForRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/pending_deployments"],setAllowedActionsOrganization:["PUT /orgs/{org}/actions/permissions/selected-actions"],setAllowedActionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions/selected-actions"],setCustomLabelsForSelfHostedRunnerForOrg:["PUT /orgs/{org}/actions/runners/{runner_id}/labels"],setCustomLabelsForSelfHostedRunnerForRepo:["PUT /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],setCustomOidcSubClaimForRepo:["PUT /repos/{owner}/{repo}/actions/oidc/customization/sub"],setGithubActionsDefaultWorkflowPermissionsOrganization:["PUT /orgs/{org}/actions/permissions/workflow"],setGithubActionsDefaultWorkflowPermissionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions/workflow"],setGithubActionsPermissionsOrganization:["PUT /orgs/{org}/actions/permissions"],setGithubActionsPermissionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories"],setSelectedReposForOrgVariable:["PUT /orgs/{org}/actions/variables/{name}/repositories"],setSelectedRepositoriesEnabledGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories"],setWorkflowAccessToRepository:["PUT /repos/{owner}/{repo}/actions/permissions/access"],updateEnvironmentVariable:["PATCH /repos/{owner}/{repo}/environments/{environment_name}/variables/{name}"],updateOrgVariable:["PATCH /orgs/{org}/actions/variables/{name}"],updateRepoVariable:["PATCH /repos/{owner}/{repo}/actions/variables/{name}"]},activity:{checkRepoIsStarredByAuthenticatedUser:["GET /user/starred/{owner}/{repo}"],deleteRepoSubscription:["DELETE /repos/{owner}/{repo}/subscription"],deleteThreadSubscription:["DELETE /notifications/threads/{thread_id}/subscription"],getFeeds:["GET /feeds"],getRepoSubscription:["GET /repos/{owner}/{repo}/subscription"],getThread:["GET /notifications/threads/{thread_id}"],getThreadSubscriptionForAuthenticatedUser:["GET /notifications/threads/{thread_id}/subscription"],listEventsForAuthenticatedUser:["GET /users/{username}/events"],listNotificationsForAuthenticatedUser:["GET /notifications"],listOrgEventsForAuthenticatedUser:["GET /users/{username}/events/orgs/{org}"],listPublicEvents:["GET /events"],listPublicEventsForRepoNetwork:["GET /networks/{owner}/{repo}/events"],listPublicEventsForUser:["GET /users/{username}/events/public"],listPublicOrgEvents:["GET /orgs/{org}/events"],listReceivedEventsForUser:["GET /users/{username}/received_events"],listReceivedPublicEventsForUser:["GET /users/{username}/received_events/public"],listRepoEvents:["GET /repos/{owner}/{repo}/events"],listRepoNotificationsForAuthenticatedUser:["GET /repos/{owner}/{repo}/notifications"],listReposStarredByAuthenticatedUser:["GET /user/starred"],listReposStarredByUser:["GET /users/{username}/starred"],listReposWatchedByUser:["GET /users/{username}/subscriptions"],listStargazersForRepo:["GET /repos/{owner}/{repo}/stargazers"],listWatchedReposForAuthenticatedUser:["GET /user/subscriptions"],listWatchersForRepo:["GET /repos/{owner}/{repo}/subscribers"],markNotificationsAsRead:["PUT /notifications"],markRepoNotificationsAsRead:["PUT /repos/{owner}/{repo}/notifications"],markThreadAsDone:["DELETE /notifications/threads/{thread_id}"],markThreadAsRead:["PATCH /notifications/threads/{thread_id}"],setRepoSubscription:["PUT /repos/{owner}/{repo}/subscription"],setThreadSubscription:["PUT /notifications/threads/{thread_id}/subscription"],starRepoForAuthenticatedUser:["PUT /user/starred/{owner}/{repo}"],unstarRepoForAuthenticatedUser:["DELETE /user/starred/{owner}/{repo}"]},apps:{addRepoToInstallation:["PUT /user/installations/{installation_id}/repositories/{repository_id}",{},{renamed:["apps","addRepoToInstallationForAuthenticatedUser"]}],addRepoToInstallationForAuthenticatedUser:["PUT /user/installations/{installation_id}/repositories/{repository_id}"],checkToken:["POST /applications/{client_id}/token"],createFromManifest:["POST /app-manifests/{code}/conversions"],createInstallationAccessToken:["POST /app/installations/{installation_id}/access_tokens"],deleteAuthorization:["DELETE /applications/{client_id}/grant"],deleteInstallation:["DELETE /app/installations/{installation_id}"],deleteToken:["DELETE /applications/{client_id}/token"],getAuthenticated:["GET /app"],getBySlug:["GET /apps/{app_slug}"],getInstallation:["GET /app/installations/{installation_id}"],getOrgInstallation:["GET /orgs/{org}/installation"],getRepoInstallation:["GET /repos/{owner}/{repo}/installation"],getSubscriptionPlanForAccount:["GET /marketplace_listing/accounts/{account_id}"],getSubscriptionPlanForAccountStubbed:["GET /marketplace_listing/stubbed/accounts/{account_id}"],getUserInstallation:["GET /users/{username}/installation"],getWebhookConfigForApp:["GET /app/hook/config"],getWebhookDelivery:["GET /app/hook/deliveries/{delivery_id}"],listAccountsForPlan:["GET /marketplace_listing/plans/{plan_id}/accounts"],listAccountsForPlanStubbed:["GET /marketplace_listing/stubbed/plans/{plan_id}/accounts"],listInstallationReposForAuthenticatedUser:["GET /user/installations/{installation_id}/repositories"],listInstallationRequestsForAuthenticatedApp:["GET /app/installation-requests"],listInstallations:["GET /app/installations"],listInstallationsForAuthenticatedUser:["GET /user/installations"],listPlans:["GET /marketplace_listing/plans"],listPlansStubbed:["GET /marketplace_listing/stubbed/plans"],listReposAccessibleToInstallation:["GET /installation/repositories"],listSubscriptionsForAuthenticatedUser:["GET /user/marketplace_purchases"],listSubscriptionsForAuthenticatedUserStubbed:["GET /user/marketplace_purchases/stubbed"],listWebhookDeliveries:["GET /app/hook/deliveries"],redeliverWebhookDelivery:["POST /app/hook/deliveries/{delivery_id}/attempts"],removeRepoFromInstallation:["DELETE /user/installations/{installation_id}/repositories/{repository_id}",{},{renamed:["apps","removeRepoFromInstallationForAuthenticatedUser"]}],removeRepoFromInstallationForAuthenticatedUser:["DELETE /user/installations/{installation_id}/repositories/{repository_id}"],resetToken:["PATCH /applications/{client_id}/token"],revokeInstallationAccessToken:["DELETE /installation/token"],scopeToken:["POST /applications/{client_id}/token/scoped"],suspendInstallation:["PUT /app/installations/{installation_id}/suspended"],unsuspendInstallation:["DELETE /app/installations/{installation_id}/suspended"],updateWebhookConfigForApp:["PATCH /app/hook/config"]},billing:{getGithubActionsBillingOrg:["GET /orgs/{org}/settings/billing/actions"],getGithubActionsBillingUser:["GET /users/{username}/settings/billing/actions"],getGithubBillingUsageReportOrg:["GET /organizations/{org}/settings/billing/usage"],getGithubPackagesBillingOrg:["GET /orgs/{org}/settings/billing/packages"],getGithubPackagesBillingUser:["GET /users/{username}/settings/billing/packages"],getSharedStorageBillingOrg:["GET /orgs/{org}/settings/billing/shared-storage"],getSharedStorageBillingUser:["GET /users/{username}/settings/billing/shared-storage"]},checks:{create:["POST /repos/{owner}/{repo}/check-runs"],createSuite:["POST /repos/{owner}/{repo}/check-suites"],get:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}"],getSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}"],listAnnotations:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}/annotations"],listForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-runs"],listForSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}/check-runs"],listSuitesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-suites"],rerequestRun:["POST /repos/{owner}/{repo}/check-runs/{check_run_id}/rerequest"],rerequestSuite:["POST /repos/{owner}/{repo}/check-suites/{check_suite_id}/rerequest"],setSuitesPreferences:["PATCH /repos/{owner}/{repo}/check-suites/preferences"],update:["PATCH /repos/{owner}/{repo}/check-runs/{check_run_id}"]},codeScanning:{commitAutofix:["POST /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/autofix/commits"],createAutofix:["POST /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/autofix"],createVariantAnalysis:["POST /repos/{owner}/{repo}/code-scanning/codeql/variant-analyses"],deleteAnalysis:["DELETE /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}{?confirm_delete}"],deleteCodeqlDatabase:["DELETE /repos/{owner}/{repo}/code-scanning/codeql/databases/{language}"],getAlert:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}",{},{renamedParameters:{alert_id:"alert_number"}}],getAnalysis:["GET /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}"],getAutofix:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/autofix"],getCodeqlDatabase:["GET /repos/{owner}/{repo}/code-scanning/codeql/databases/{language}"],getDefaultSetup:["GET /repos/{owner}/{repo}/code-scanning/default-setup"],getSarif:["GET /repos/{owner}/{repo}/code-scanning/sarifs/{sarif_id}"],getVariantAnalysis:["GET /repos/{owner}/{repo}/code-scanning/codeql/variant-analyses/{codeql_variant_analysis_id}"],getVariantAnalysisRepoTask:["GET /repos/{owner}/{repo}/code-scanning/codeql/variant-analyses/{codeql_variant_analysis_id}/repos/{repo_owner}/{repo_name}"],listAlertInstances:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances"],listAlertsForOrg:["GET /orgs/{org}/code-scanning/alerts"],listAlertsForRepo:["GET /repos/{owner}/{repo}/code-scanning/alerts"],listAlertsInstances:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances",{},{renamed:["codeScanning","listAlertInstances"]}],listCodeqlDatabases:["GET /repos/{owner}/{repo}/code-scanning/codeql/databases"],listRecentAnalyses:["GET /repos/{owner}/{repo}/code-scanning/analyses"],updateAlert:["PATCH /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}"],updateDefaultSetup:["PATCH /repos/{owner}/{repo}/code-scanning/default-setup"],uploadSarif:["POST /repos/{owner}/{repo}/code-scanning/sarifs"]},codeSecurity:{attachConfiguration:["POST /orgs/{org}/code-security/configurations/{configuration_id}/attach"],attachEnterpriseConfiguration:["POST /enterprises/{enterprise}/code-security/configurations/{configuration_id}/attach"],createConfiguration:["POST /orgs/{org}/code-security/configurations"],createConfigurationForEnterprise:["POST /enterprises/{enterprise}/code-security/configurations"],deleteConfiguration:["DELETE /orgs/{org}/code-security/configurations/{configuration_id}"],deleteConfigurationForEnterprise:["DELETE /enterprises/{enterprise}/code-security/configurations/{configuration_id}"],detachConfiguration:["DELETE /orgs/{org}/code-security/configurations/detach"],getConfiguration:["GET /orgs/{org}/code-security/configurations/{configuration_id}"],getConfigurationForRepository:["GET /repos/{owner}/{repo}/code-security-configuration"],getConfigurationsForEnterprise:["GET /enterprises/{enterprise}/code-security/configurations"],getConfigurationsForOrg:["GET /orgs/{org}/code-security/configurations"],getDefaultConfigurations:["GET /orgs/{org}/code-security/configurations/defaults"],getDefaultConfigurationsForEnterprise:["GET /enterprises/{enterprise}/code-security/configurations/defaults"],getRepositoriesForConfiguration:["GET /orgs/{org}/code-security/configurations/{configuration_id}/repositories"],getRepositoriesForEnterpriseConfiguration:["GET /enterprises/{enterprise}/code-security/configurations/{configuration_id}/repositories"],getSingleConfigurationForEnterprise:["GET /enterprises/{enterprise}/code-security/configurations/{configuration_id}"],setConfigurationAsDefault:["PUT /orgs/{org}/code-security/configurations/{configuration_id}/defaults"],setConfigurationAsDefaultForEnterprise:["PUT /enterprises/{enterprise}/code-security/configurations/{configuration_id}/defaults"],updateConfiguration:["PATCH /orgs/{org}/code-security/configurations/{configuration_id}"],updateEnterpriseConfiguration:["PATCH /enterprises/{enterprise}/code-security/configurations/{configuration_id}"]},codesOfConduct:{getAllCodesOfConduct:["GET /codes_of_conduct"],getConductCode:["GET /codes_of_conduct/{key}"]},codespaces:{addRepositoryForSecretForAuthenticatedUser:["PUT /user/codespaces/secrets/{secret_name}/repositories/{repository_id}"],addSelectedRepoToOrgSecret:["PUT /orgs/{org}/codespaces/secrets/{secret_name}/repositories/{repository_id}"],checkPermissionsForDevcontainer:["GET /repos/{owner}/{repo}/codespaces/permissions_check"],codespaceMachinesForAuthenticatedUser:["GET /user/codespaces/{codespace_name}/machines"],createForAuthenticatedUser:["POST /user/codespaces"],createOrUpdateOrgSecret:["PUT /orgs/{org}/codespaces/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/codespaces/secrets/{secret_name}"],createOrUpdateSecretForAuthenticatedUser:["PUT /user/codespaces/secrets/{secret_name}"],createWithPrForAuthenticatedUser:["POST /repos/{owner}/{repo}/pulls/{pull_number}/codespaces"],createWithRepoForAuthenticatedUser:["POST /repos/{owner}/{repo}/codespaces"],deleteForAuthenticatedUser:["DELETE /user/codespaces/{codespace_name}"],deleteFromOrganization:["DELETE /orgs/{org}/members/{username}/codespaces/{codespace_name}"],deleteOrgSecret:["DELETE /orgs/{org}/codespaces/secrets/{secret_name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/codespaces/secrets/{secret_name}"],deleteSecretForAuthenticatedUser:["DELETE /user/codespaces/secrets/{secret_name}"],exportForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/exports"],getCodespacesForUserInOrg:["GET /orgs/{org}/members/{username}/codespaces"],getExportDetailsForAuthenticatedUser:["GET /user/codespaces/{codespace_name}/exports/{export_id}"],getForAuthenticatedUser:["GET /user/codespaces/{codespace_name}"],getOrgPublicKey:["GET /orgs/{org}/codespaces/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/codespaces/secrets/{secret_name}"],getPublicKeyForAuthenticatedUser:["GET /user/codespaces/secrets/public-key"],getRepoPublicKey:["GET /repos/{owner}/{repo}/codespaces/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/codespaces/secrets/{secret_name}"],getSecretForAuthenticatedUser:["GET /user/codespaces/secrets/{secret_name}"],listDevcontainersInRepositoryForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces/devcontainers"],listForAuthenticatedUser:["GET /user/codespaces"],listInOrganization:["GET /orgs/{org}/codespaces",{},{renamedParameters:{org_id:"org"}}],listInRepositoryForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces"],listOrgSecrets:["GET /orgs/{org}/codespaces/secrets"],listRepoSecrets:["GET /repos/{owner}/{repo}/codespaces/secrets"],listRepositoriesForSecretForAuthenticatedUser:["GET /user/codespaces/secrets/{secret_name}/repositories"],listSecretsForAuthenticatedUser:["GET /user/codespaces/secrets"],listSelectedReposForOrgSecret:["GET /orgs/{org}/codespaces/secrets/{secret_name}/repositories"],preFlightWithRepoForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces/new"],publishForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/publish"],removeRepositoryForSecretForAuthenticatedUser:["DELETE /user/codespaces/secrets/{secret_name}/repositories/{repository_id}"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/codespaces/secrets/{secret_name}/repositories/{repository_id}"],repoMachinesForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces/machines"],setRepositoriesForSecretForAuthenticatedUser:["PUT /user/codespaces/secrets/{secret_name}/repositories"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/codespaces/secrets/{secret_name}/repositories"],startForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/start"],stopForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/stop"],stopInOrganization:["POST /orgs/{org}/members/{username}/codespaces/{codespace_name}/stop"],updateForAuthenticatedUser:["PATCH /user/codespaces/{codespace_name}"]},copilot:{addCopilotSeatsForTeams:["POST /orgs/{org}/copilot/billing/selected_teams"],addCopilotSeatsForUsers:["POST /orgs/{org}/copilot/billing/selected_users"],cancelCopilotSeatAssignmentForTeams:["DELETE /orgs/{org}/copilot/billing/selected_teams"],cancelCopilotSeatAssignmentForUsers:["DELETE /orgs/{org}/copilot/billing/selected_users"],copilotMetricsForOrganization:["GET /orgs/{org}/copilot/metrics"],copilotMetricsForTeam:["GET /orgs/{org}/team/{team_slug}/copilot/metrics"],getCopilotOrganizationDetails:["GET /orgs/{org}/copilot/billing"],getCopilotSeatDetailsForUser:["GET /orgs/{org}/members/{username}/copilot"],listCopilotSeats:["GET /orgs/{org}/copilot/billing/seats"],usageMetricsForOrg:["GET /orgs/{org}/copilot/usage"],usageMetricsForTeam:["GET /orgs/{org}/team/{team_slug}/copilot/usage"]},dependabot:{addSelectedRepoToOrgSecret:["PUT /orgs/{org}/dependabot/secrets/{secret_name}/repositories/{repository_id}"],createOrUpdateOrgSecret:["PUT /orgs/{org}/dependabot/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/dependabot/secrets/{secret_name}"],deleteOrgSecret:["DELETE /orgs/{org}/dependabot/secrets/{secret_name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/dependabot/secrets/{secret_name}"],getAlert:["GET /repos/{owner}/{repo}/dependabot/alerts/{alert_number}"],getOrgPublicKey:["GET /orgs/{org}/dependabot/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/dependabot/secrets/{secret_name}"],getRepoPublicKey:["GET /repos/{owner}/{repo}/dependabot/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/dependabot/secrets/{secret_name}"],listAlertsForEnterprise:["GET /enterprises/{enterprise}/dependabot/alerts"],listAlertsForOrg:["GET /orgs/{org}/dependabot/alerts"],listAlertsForRepo:["GET /repos/{owner}/{repo}/dependabot/alerts"],listOrgSecrets:["GET /orgs/{org}/dependabot/secrets"],listRepoSecrets:["GET /repos/{owner}/{repo}/dependabot/secrets"],listSelectedReposForOrgSecret:["GET /orgs/{org}/dependabot/secrets/{secret_name}/repositories"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/dependabot/secrets/{secret_name}/repositories/{repository_id}"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/dependabot/secrets/{secret_name}/repositories"],updateAlert:["PATCH /repos/{owner}/{repo}/dependabot/alerts/{alert_number}"]},dependencyGraph:{createRepositorySnapshot:["POST /repos/{owner}/{repo}/dependency-graph/snapshots"],diffRange:["GET /repos/{owner}/{repo}/dependency-graph/compare/{basehead}"],exportSbom:["GET /repos/{owner}/{repo}/dependency-graph/sbom"]},emojis:{get:["GET /emojis"]},gists:{checkIsStarred:["GET /gists/{gist_id}/star"],create:["POST /gists"],createComment:["POST /gists/{gist_id}/comments"],delete:["DELETE /gists/{gist_id}"],deleteComment:["DELETE /gists/{gist_id}/comments/{comment_id}"],fork:["POST /gists/{gist_id}/forks"],get:["GET /gists/{gist_id}"],getComment:["GET /gists/{gist_id}/comments/{comment_id}"],getRevision:["GET /gists/{gist_id}/{sha}"],list:["GET /gists"],listComments:["GET /gists/{gist_id}/comments"],listCommits:["GET /gists/{gist_id}/commits"],listForUser:["GET /users/{username}/gists"],listForks:["GET /gists/{gist_id}/forks"],listPublic:["GET /gists/public"],listStarred:["GET /gists/starred"],star:["PUT /gists/{gist_id}/star"],unstar:["DELETE /gists/{gist_id}/star"],update:["PATCH /gists/{gist_id}"],updateComment:["PATCH /gists/{gist_id}/comments/{comment_id}"]},git:{createBlob:["POST /repos/{owner}/{repo}/git/blobs"],createCommit:["POST /repos/{owner}/{repo}/git/commits"],createRef:["POST /repos/{owner}/{repo}/git/refs"],createTag:["POST /repos/{owner}/{repo}/git/tags"],createTree:["POST /repos/{owner}/{repo}/git/trees"],deleteRef:["DELETE /repos/{owner}/{repo}/git/refs/{ref}"],getBlob:["GET /repos/{owner}/{repo}/git/blobs/{file_sha}"],getCommit:["GET /repos/{owner}/{repo}/git/commits/{commit_sha}"],getRef:["GET /repos/{owner}/{repo}/git/ref/{ref}"],getTag:["GET /repos/{owner}/{repo}/git/tags/{tag_sha}"],getTree:["GET /repos/{owner}/{repo}/git/trees/{tree_sha}"],listMatchingRefs:["GET /repos/{owner}/{repo}/git/matching-refs/{ref}"],updateRef:["PATCH /repos/{owner}/{repo}/git/refs/{ref}"]},gitignore:{getAllTemplates:["GET /gitignore/templates"],getTemplate:["GET /gitignore/templates/{name}"]},interactions:{getRestrictionsForAuthenticatedUser:["GET /user/interaction-limits"],getRestrictionsForOrg:["GET /orgs/{org}/interaction-limits"],getRestrictionsForRepo:["GET /repos/{owner}/{repo}/interaction-limits"],getRestrictionsForYourPublicRepos:["GET /user/interaction-limits",{},{renamed:["interactions","getRestrictionsForAuthenticatedUser"]}],removeRestrictionsForAuthenticatedUser:["DELETE /user/interaction-limits"],removeRestrictionsForOrg:["DELETE /orgs/{org}/interaction-limits"],removeRestrictionsForRepo:["DELETE /repos/{owner}/{repo}/interaction-limits"],removeRestrictionsForYourPublicRepos:["DELETE /user/interaction-limits",{},{renamed:["interactions","removeRestrictionsForAuthenticatedUser"]}],setRestrictionsForAuthenticatedUser:["PUT /user/interaction-limits"],setRestrictionsForOrg:["PUT /orgs/{org}/interaction-limits"],setRestrictionsForRepo:["PUT /repos/{owner}/{repo}/interaction-limits"],setRestrictionsForYourPublicRepos:["PUT /user/interaction-limits",{},{renamed:["interactions","setRestrictionsForAuthenticatedUser"]}]},issues:{addAssignees:["POST /repos/{owner}/{repo}/issues/{issue_number}/assignees"],addLabels:["POST /repos/{owner}/{repo}/issues/{issue_number}/labels"],addSubIssue:["POST /repos/{owner}/{repo}/issues/{issue_number}/sub_issues"],checkUserCanBeAssigned:["GET /repos/{owner}/{repo}/assignees/{assignee}"],checkUserCanBeAssignedToIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/assignees/{assignee}"],create:["POST /repos/{owner}/{repo}/issues"],createComment:["POST /repos/{owner}/{repo}/issues/{issue_number}/comments"],createLabel:["POST /repos/{owner}/{repo}/labels"],createMilestone:["POST /repos/{owner}/{repo}/milestones"],deleteComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}"],deleteLabel:["DELETE /repos/{owner}/{repo}/labels/{name}"],deleteMilestone:["DELETE /repos/{owner}/{repo}/milestones/{milestone_number}"],get:["GET /repos/{owner}/{repo}/issues/{issue_number}"],getComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}"],getEvent:["GET /repos/{owner}/{repo}/issues/events/{event_id}"],getLabel:["GET /repos/{owner}/{repo}/labels/{name}"],getMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}"],list:["GET /issues"],listAssignees:["GET /repos/{owner}/{repo}/assignees"],listComments:["GET /repos/{owner}/{repo}/issues/{issue_number}/comments"],listCommentsForRepo:["GET /repos/{owner}/{repo}/issues/comments"],listEvents:["GET /repos/{owner}/{repo}/issues/{issue_number}/events"],listEventsForRepo:["GET /repos/{owner}/{repo}/issues/events"],listEventsForTimeline:["GET /repos/{owner}/{repo}/issues/{issue_number}/timeline"],listForAuthenticatedUser:["GET /user/issues"],listForOrg:["GET /orgs/{org}/issues"],listForRepo:["GET /repos/{owner}/{repo}/issues"],listLabelsForMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}/labels"],listLabelsForRepo:["GET /repos/{owner}/{repo}/labels"],listLabelsOnIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/labels"],listMilestones:["GET /repos/{owner}/{repo}/milestones"],listSubIssues:["GET /repos/{owner}/{repo}/issues/{issue_number}/sub_issues"],lock:["PUT /repos/{owner}/{repo}/issues/{issue_number}/lock"],removeAllLabels:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels"],removeAssignees:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/assignees"],removeLabel:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels/{name}"],removeSubIssue:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/sub_issue"],reprioritizeSubIssue:["PATCH /repos/{owner}/{repo}/issues/{issue_number}/sub_issues/priority"],setLabels:["PUT /repos/{owner}/{repo}/issues/{issue_number}/labels"],unlock:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/lock"],update:["PATCH /repos/{owner}/{repo}/issues/{issue_number}"],updateComment:["PATCH /repos/{owner}/{repo}/issues/comments/{comment_id}"],updateLabel:["PATCH /repos/{owner}/{repo}/labels/{name}"],updateMilestone:["PATCH /repos/{owner}/{repo}/milestones/{milestone_number}"]},licenses:{get:["GET /licenses/{license}"],getAllCommonlyUsed:["GET /licenses"],getForRepo:["GET /repos/{owner}/{repo}/license"]},markdown:{render:["POST /markdown"],renderRaw:["POST /markdown/raw",{headers:{"content-type":"text/plain; charset=utf-8"}}]},meta:{get:["GET /meta"],getAllVersions:["GET /versions"],getOctocat:["GET /octocat"],getZen:["GET /zen"],root:["GET /"]},migrations:{deleteArchiveForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/archive"],deleteArchiveForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/archive"],downloadArchiveForOrg:["GET /orgs/{org}/migrations/{migration_id}/archive"],getArchiveForAuthenticatedUser:["GET /user/migrations/{migration_id}/archive"],getStatusForAuthenticatedUser:["GET /user/migrations/{migration_id}"],getStatusForOrg:["GET /orgs/{org}/migrations/{migration_id}"],listForAuthenticatedUser:["GET /user/migrations"],listForOrg:["GET /orgs/{org}/migrations"],listReposForAuthenticatedUser:["GET /user/migrations/{migration_id}/repositories"],listReposForOrg:["GET /orgs/{org}/migrations/{migration_id}/repositories"],listReposForUser:["GET /user/migrations/{migration_id}/repositories",{},{renamed:["migrations","listReposForAuthenticatedUser"]}],startForAuthenticatedUser:["POST /user/migrations"],startForOrg:["POST /orgs/{org}/migrations"],unlockRepoForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/repos/{repo_name}/lock"],unlockRepoForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/repos/{repo_name}/lock"]},oidc:{getOidcCustomSubTemplateForOrg:["GET /orgs/{org}/actions/oidc/customization/sub"],updateOidcCustomSubTemplateForOrg:["PUT /orgs/{org}/actions/oidc/customization/sub"]},orgs:{addSecurityManagerTeam:["PUT /orgs/{org}/security-managers/teams/{team_slug}",{},{deprecated:"octokit.rest.orgs.addSecurityManagerTeam() is deprecated, see https://docs.github.com/rest/orgs/security-managers#add-a-security-manager-team"}],assignTeamToOrgRole:["PUT /orgs/{org}/organization-roles/teams/{team_slug}/{role_id}"],assignUserToOrgRole:["PUT /orgs/{org}/organization-roles/users/{username}/{role_id}"],blockUser:["PUT /orgs/{org}/blocks/{username}"],cancelInvitation:["DELETE /orgs/{org}/invitations/{invitation_id}"],checkBlockedUser:["GET /orgs/{org}/blocks/{username}"],checkMembershipForUser:["GET /orgs/{org}/members/{username}"],checkPublicMembershipForUser:["GET /orgs/{org}/public_members/{username}"],convertMemberToOutsideCollaborator:["PUT /orgs/{org}/outside_collaborators/{username}"],createInvitation:["POST /orgs/{org}/invitations"],createOrUpdateCustomProperties:["PATCH /orgs/{org}/properties/schema"],createOrUpdateCustomPropertiesValuesForRepos:["PATCH /orgs/{org}/properties/values"],createOrUpdateCustomProperty:["PUT /orgs/{org}/properties/schema/{custom_property_name}"],createWebhook:["POST /orgs/{org}/hooks"],delete:["DELETE /orgs/{org}"],deleteWebhook:["DELETE /orgs/{org}/hooks/{hook_id}"],enableOrDisableSecurityProductOnAllOrgRepos:["POST /orgs/{org}/{security_product}/{enablement}",{},{deprecated:"octokit.rest.orgs.enableOrDisableSecurityProductOnAllOrgRepos() is deprecated, see https://docs.github.com/rest/orgs/orgs#enable-or-disable-a-security-feature-for-an-organization"}],get:["GET /orgs/{org}"],getAllCustomProperties:["GET /orgs/{org}/properties/schema"],getCustomProperty:["GET /orgs/{org}/properties/schema/{custom_property_name}"],getMembershipForAuthenticatedUser:["GET /user/memberships/orgs/{org}"],getMembershipForUser:["GET /orgs/{org}/memberships/{username}"],getOrgRole:["GET /orgs/{org}/organization-roles/{role_id}"],getWebhook:["GET /orgs/{org}/hooks/{hook_id}"],getWebhookConfigForOrg:["GET /orgs/{org}/hooks/{hook_id}/config"],getWebhookDelivery:["GET /orgs/{org}/hooks/{hook_id}/deliveries/{delivery_id}"],list:["GET /organizations"],listAppInstallations:["GET /orgs/{org}/installations"],listAttestations:["GET /orgs/{org}/attestations/{subject_digest}"],listBlockedUsers:["GET /orgs/{org}/blocks"],listCustomPropertiesValuesForRepos:["GET /orgs/{org}/properties/values"],listFailedInvitations:["GET /orgs/{org}/failed_invitations"],listForAuthenticatedUser:["GET /user/orgs"],listForUser:["GET /users/{username}/orgs"],listInvitationTeams:["GET /orgs/{org}/invitations/{invitation_id}/teams"],listMembers:["GET /orgs/{org}/members"],listMembershipsForAuthenticatedUser:["GET /user/memberships/orgs"],listOrgRoleTeams:["GET /orgs/{org}/organization-roles/{role_id}/teams"],listOrgRoleUsers:["GET /orgs/{org}/organization-roles/{role_id}/users"],listOrgRoles:["GET /orgs/{org}/organization-roles"],listOrganizationFineGrainedPermissions:["GET /orgs/{org}/organization-fine-grained-permissions"],listOutsideCollaborators:["GET /orgs/{org}/outside_collaborators"],listPatGrantRepositories:["GET /orgs/{org}/personal-access-tokens/{pat_id}/repositories"],listPatGrantRequestRepositories:["GET /orgs/{org}/personal-access-token-requests/{pat_request_id}/repositories"],listPatGrantRequests:["GET /orgs/{org}/personal-access-token-requests"],listPatGrants:["GET /orgs/{org}/personal-access-tokens"],listPendingInvitations:["GET /orgs/{org}/invitations"],listPublicMembers:["GET /orgs/{org}/public_members"],listSecurityManagerTeams:["GET /orgs/{org}/security-managers",{},{deprecated:"octokit.rest.orgs.listSecurityManagerTeams() is deprecated, see https://docs.github.com/rest/orgs/security-managers#list-security-manager-teams"}],listWebhookDeliveries:["GET /orgs/{org}/hooks/{hook_id}/deliveries"],listWebhooks:["GET /orgs/{org}/hooks"],pingWebhook:["POST /orgs/{org}/hooks/{hook_id}/pings"],redeliverWebhookDelivery:["POST /orgs/{org}/hooks/{hook_id}/deliveries/{delivery_id}/attempts"],removeCustomProperty:["DELETE /orgs/{org}/properties/schema/{custom_property_name}"],removeMember:["DELETE /orgs/{org}/members/{username}"],removeMembershipForUser:["DELETE /orgs/{org}/memberships/{username}"],removeOutsideCollaborator:["DELETE /orgs/{org}/outside_collaborators/{username}"],removePublicMembershipForAuthenticatedUser:["DELETE /orgs/{org}/public_members/{username}"],removeSecurityManagerTeam:["DELETE /orgs/{org}/security-managers/teams/{team_slug}",{},{deprecated:"octokit.rest.orgs.removeSecurityManagerTeam() is deprecated, see https://docs.github.com/rest/orgs/security-managers#remove-a-security-manager-team"}],reviewPatGrantRequest:["POST /orgs/{org}/personal-access-token-requests/{pat_request_id}"],reviewPatGrantRequestsInBulk:["POST /orgs/{org}/personal-access-token-requests"],revokeAllOrgRolesTeam:["DELETE /orgs/{org}/organization-roles/teams/{team_slug}"],revokeAllOrgRolesUser:["DELETE /orgs/{org}/organization-roles/users/{username}"],revokeOrgRoleTeam:["DELETE /orgs/{org}/organization-roles/teams/{team_slug}/{role_id}"],revokeOrgRoleUser:["DELETE /orgs/{org}/organization-roles/users/{username}/{role_id}"],setMembershipForUser:["PUT /orgs/{org}/memberships/{username}"],setPublicMembershipForAuthenticatedUser:["PUT /orgs/{org}/public_members/{username}"],unblockUser:["DELETE /orgs/{org}/blocks/{username}"],update:["PATCH /orgs/{org}"],updateMembershipForAuthenticatedUser:["PATCH /user/memberships/orgs/{org}"],updatePatAccess:["POST /orgs/{org}/personal-access-tokens/{pat_id}"],updatePatAccesses:["POST /orgs/{org}/personal-access-tokens"],updateWebhook:["PATCH /orgs/{org}/hooks/{hook_id}"],updateWebhookConfigForOrg:["PATCH /orgs/{org}/hooks/{hook_id}/config"]},packages:{deletePackageForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}"],deletePackageForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}"],deletePackageForUser:["DELETE /users/{username}/packages/{package_type}/{package_name}"],deletePackageVersionForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],deletePackageVersionForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],deletePackageVersionForUser:["DELETE /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getAllPackageVersionsForAPackageOwnedByAnOrg:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions",{},{renamed:["packages","getAllPackageVersionsForPackageOwnedByOrg"]}],getAllPackageVersionsForAPackageOwnedByTheAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions",{},{renamed:["packages","getAllPackageVersionsForPackageOwnedByAuthenticatedUser"]}],getAllPackageVersionsForPackageOwnedByAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForPackageOwnedByOrg:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForPackageOwnedByUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions"],getPackageForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}"],getPackageForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}"],getPackageForUser:["GET /users/{username}/packages/{package_type}/{package_name}"],getPackageVersionForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}"],listDockerMigrationConflictingPackagesForAuthenticatedUser:["GET /user/docker/conflicts"],listDockerMigrationConflictingPackagesForOrganization:["GET /orgs/{org}/docker/conflicts"],listDockerMigrationConflictingPackagesForUser:["GET /users/{username}/docker/conflicts"],listPackagesForAuthenticatedUser:["GET /user/packages"],listPackagesForOrganization:["GET /orgs/{org}/packages"],listPackagesForUser:["GET /users/{username}/packages"],restorePackageForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/restore{?token}"],restorePackageForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/restore{?token}"],restorePackageForUser:["POST /users/{username}/packages/{package_type}/{package_name}/restore{?token}"],restorePackageVersionForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"],restorePackageVersionForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"],restorePackageVersionForUser:["POST /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"]},privateRegistries:{createOrgPrivateRegistry:["POST /orgs/{org}/private-registries"],deleteOrgPrivateRegistry:["DELETE /orgs/{org}/private-registries/{secret_name}"],getOrgPrivateRegistry:["GET /orgs/{org}/private-registries/{secret_name}"],getOrgPublicKey:["GET /orgs/{org}/private-registries/public-key"],listOrgPrivateRegistries:["GET /orgs/{org}/private-registries"],updateOrgPrivateRegistry:["PATCH /orgs/{org}/private-registries/{secret_name}"]},projects:{addCollaborator:["PUT /projects/{project_id}/collaborators/{username}"],createCard:["POST /projects/columns/{column_id}/cards"],createColumn:["POST /projects/{project_id}/columns"],createForAuthenticatedUser:["POST /user/projects"],createForOrg:["POST /orgs/{org}/projects"],createForRepo:["POST /repos/{owner}/{repo}/projects"],delete:["DELETE /projects/{project_id}"],deleteCard:["DELETE /projects/columns/cards/{card_id}"],deleteColumn:["DELETE /projects/columns/{column_id}"],get:["GET /projects/{project_id}"],getCard:["GET /projects/columns/cards/{card_id}"],getColumn:["GET /projects/columns/{column_id}"],getPermissionForUser:["GET /projects/{project_id}/collaborators/{username}/permission"],listCards:["GET /projects/columns/{column_id}/cards"],listCollaborators:["GET /projects/{project_id}/collaborators"],listColumns:["GET /projects/{project_id}/columns"],listForOrg:["GET /orgs/{org}/projects"],listForRepo:["GET /repos/{owner}/{repo}/projects"],listForUser:["GET /users/{username}/projects"],moveCard:["POST /projects/columns/cards/{card_id}/moves"],moveColumn:["POST /projects/columns/{column_id}/moves"],removeCollaborator:["DELETE /projects/{project_id}/collaborators/{username}"],update:["PATCH /projects/{project_id}"],updateCard:["PATCH /projects/columns/cards/{card_id}"],updateColumn:["PATCH /projects/columns/{column_id}"]},pulls:{checkIfMerged:["GET /repos/{owner}/{repo}/pulls/{pull_number}/merge"],create:["POST /repos/{owner}/{repo}/pulls"],createReplyForReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments/{comment_id}/replies"],createReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],createReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments"],deletePendingReview:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],deleteReviewComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}"],dismissReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/dismissals"],get:["GET /repos/{owner}/{repo}/pulls/{pull_number}"],getReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],getReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}"],list:["GET /repos/{owner}/{repo}/pulls"],listCommentsForReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/comments"],listCommits:["GET /repos/{owner}/{repo}/pulls/{pull_number}/commits"],listFiles:["GET /repos/{owner}/{repo}/pulls/{pull_number}/files"],listRequestedReviewers:["GET /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],listReviewComments:["GET /repos/{owner}/{repo}/pulls/{pull_number}/comments"],listReviewCommentsForRepo:["GET /repos/{owner}/{repo}/pulls/comments"],listReviews:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],merge:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/merge"],removeRequestedReviewers:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],requestReviewers:["POST /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],submitReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/events"],update:["PATCH /repos/{owner}/{repo}/pulls/{pull_number}"],updateBranch:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/update-branch"],updateReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],updateReviewComment:["PATCH /repos/{owner}/{repo}/pulls/comments/{comment_id}"]},rateLimit:{get:["GET /rate_limit"]},reactions:{createForCommitComment:["POST /repos/{owner}/{repo}/comments/{comment_id}/reactions"],createForIssue:["POST /repos/{owner}/{repo}/issues/{issue_number}/reactions"],createForIssueComment:["POST /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions"],createForPullRequestReviewComment:["POST /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions"],createForRelease:["POST /repos/{owner}/{repo}/releases/{release_id}/reactions"],createForTeamDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions"],createForTeamDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions"],deleteForCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}/reactions/{reaction_id}"],deleteForIssue:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/reactions/{reaction_id}"],deleteForIssueComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions/{reaction_id}"],deleteForPullRequestComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions/{reaction_id}"],deleteForRelease:["DELETE /repos/{owner}/{repo}/releases/{release_id}/reactions/{reaction_id}"],deleteForTeamDiscussion:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions/{reaction_id}"],deleteForTeamDiscussionComment:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions/{reaction_id}"],listForCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}/reactions"],listForIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/reactions"],listForIssueComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions"],listForPullRequestReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions"],listForRelease:["GET /repos/{owner}/{repo}/releases/{release_id}/reactions"],listForTeamDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions"],listForTeamDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions"]},repos:{acceptInvitation:["PATCH /user/repository_invitations/{invitation_id}",{},{renamed:["repos","acceptInvitationForAuthenticatedUser"]}],acceptInvitationForAuthenticatedUser:["PATCH /user/repository_invitations/{invitation_id}"],addAppAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],addCollaborator:["PUT /repos/{owner}/{repo}/collaborators/{username}"],addStatusCheckContexts:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],addTeamAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],addUserAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],cancelPagesDeployment:["POST /repos/{owner}/{repo}/pages/deployments/{pages_deployment_id}/cancel"],checkAutomatedSecurityFixes:["GET /repos/{owner}/{repo}/automated-security-fixes"],checkCollaborator:["GET /repos/{owner}/{repo}/collaborators/{username}"],checkPrivateVulnerabilityReporting:["GET /repos/{owner}/{repo}/private-vulnerability-reporting"],checkVulnerabilityAlerts:["GET /repos/{owner}/{repo}/vulnerability-alerts"],codeownersErrors:["GET /repos/{owner}/{repo}/codeowners/errors"],compareCommits:["GET /repos/{owner}/{repo}/compare/{base}...{head}"],compareCommitsWithBasehead:["GET /repos/{owner}/{repo}/compare/{basehead}"],createAttestation:["POST /repos/{owner}/{repo}/attestations"],createAutolink:["POST /repos/{owner}/{repo}/autolinks"],createCommitComment:["POST /repos/{owner}/{repo}/commits/{commit_sha}/comments"],createCommitSignatureProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures"],createCommitStatus:["POST /repos/{owner}/{repo}/statuses/{sha}"],createDeployKey:["POST /repos/{owner}/{repo}/keys"],createDeployment:["POST /repos/{owner}/{repo}/deployments"],createDeploymentBranchPolicy:["POST /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies"],createDeploymentProtectionRule:["POST /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules"],createDeploymentStatus:["POST /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],createDispatchEvent:["POST /repos/{owner}/{repo}/dispatches"],createForAuthenticatedUser:["POST /user/repos"],createFork:["POST /repos/{owner}/{repo}/forks"],createInOrg:["POST /orgs/{org}/repos"],createOrUpdateCustomPropertiesValues:["PATCH /repos/{owner}/{repo}/properties/values"],createOrUpdateEnvironment:["PUT /repos/{owner}/{repo}/environments/{environment_name}"],createOrUpdateFileContents:["PUT /repos/{owner}/{repo}/contents/{path}"],createOrgRuleset:["POST /orgs/{org}/rulesets"],createPagesDeployment:["POST /repos/{owner}/{repo}/pages/deployments"],createPagesSite:["POST /repos/{owner}/{repo}/pages"],createRelease:["POST /repos/{owner}/{repo}/releases"],createRepoRuleset:["POST /repos/{owner}/{repo}/rulesets"],createUsingTemplate:["POST /repos/{template_owner}/{template_repo}/generate"],createWebhook:["POST /repos/{owner}/{repo}/hooks"],declineInvitation:["DELETE /user/repository_invitations/{invitation_id}",{},{renamed:["repos","declineInvitationForAuthenticatedUser"]}],declineInvitationForAuthenticatedUser:["DELETE /user/repository_invitations/{invitation_id}"],delete:["DELETE /repos/{owner}/{repo}"],deleteAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],deleteAdminBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],deleteAnEnvironment:["DELETE /repos/{owner}/{repo}/environments/{environment_name}"],deleteAutolink:["DELETE /repos/{owner}/{repo}/autolinks/{autolink_id}"],deleteBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection"],deleteCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}"],deleteCommitSignatureProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures"],deleteDeployKey:["DELETE /repos/{owner}/{repo}/keys/{key_id}"],deleteDeployment:["DELETE /repos/{owner}/{repo}/deployments/{deployment_id}"],deleteDeploymentBranchPolicy:["DELETE /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}"],deleteFile:["DELETE /repos/{owner}/{repo}/contents/{path}"],deleteInvitation:["DELETE /repos/{owner}/{repo}/invitations/{invitation_id}"],deleteOrgRuleset:["DELETE /orgs/{org}/rulesets/{ruleset_id}"],deletePagesSite:["DELETE /repos/{owner}/{repo}/pages"],deletePullRequestReviewProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],deleteRelease:["DELETE /repos/{owner}/{repo}/releases/{release_id}"],deleteReleaseAsset:["DELETE /repos/{owner}/{repo}/releases/assets/{asset_id}"],deleteRepoRuleset:["DELETE /repos/{owner}/{repo}/rulesets/{ruleset_id}"],deleteWebhook:["DELETE /repos/{owner}/{repo}/hooks/{hook_id}"],disableAutomatedSecurityFixes:["DELETE /repos/{owner}/{repo}/automated-security-fixes"],disableDeploymentProtectionRule:["DELETE /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/{protection_rule_id}"],disablePrivateVulnerabilityReporting:["DELETE /repos/{owner}/{repo}/private-vulnerability-reporting"],disableVulnerabilityAlerts:["DELETE /repos/{owner}/{repo}/vulnerability-alerts"],downloadArchive:["GET /repos/{owner}/{repo}/zipball/{ref}",{},{renamed:["repos","downloadZipballArchive"]}],downloadTarballArchive:["GET /repos/{owner}/{repo}/tarball/{ref}"],downloadZipballArchive:["GET /repos/{owner}/{repo}/zipball/{ref}"],enableAutomatedSecurityFixes:["PUT /repos/{owner}/{repo}/automated-security-fixes"],enablePrivateVulnerabilityReporting:["PUT /repos/{owner}/{repo}/private-vulnerability-reporting"],enableVulnerabilityAlerts:["PUT /repos/{owner}/{repo}/vulnerability-alerts"],generateReleaseNotes:["POST /repos/{owner}/{repo}/releases/generate-notes"],get:["GET /repos/{owner}/{repo}"],getAccessRestrictions:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],getAdminBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],getAllDeploymentProtectionRules:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules"],getAllEnvironments:["GET /repos/{owner}/{repo}/environments"],getAllStatusCheckContexts:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts"],getAllTopics:["GET /repos/{owner}/{repo}/topics"],getAppsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps"],getAutolink:["GET /repos/{owner}/{repo}/autolinks/{autolink_id}"],getBranch:["GET /repos/{owner}/{repo}/branches/{branch}"],getBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection"],getBranchRules:["GET /repos/{owner}/{repo}/rules/branches/{branch}"],getClones:["GET /repos/{owner}/{repo}/traffic/clones"],getCodeFrequencyStats:["GET /repos/{owner}/{repo}/stats/code_frequency"],getCollaboratorPermissionLevel:["GET /repos/{owner}/{repo}/collaborators/{username}/permission"],getCombinedStatusForRef:["GET /repos/{owner}/{repo}/commits/{ref}/status"],getCommit:["GET /repos/{owner}/{repo}/commits/{ref}"],getCommitActivityStats:["GET /repos/{owner}/{repo}/stats/commit_activity"],getCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}"],getCommitSignatureProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures"],getCommunityProfileMetrics:["GET /repos/{owner}/{repo}/community/profile"],getContent:["GET /repos/{owner}/{repo}/contents/{path}"],getContributorsStats:["GET /repos/{owner}/{repo}/stats/contributors"],getCustomDeploymentProtectionRule:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/{protection_rule_id}"],getCustomPropertiesValues:["GET /repos/{owner}/{repo}/properties/values"],getDeployKey:["GET /repos/{owner}/{repo}/keys/{key_id}"],getDeployment:["GET /repos/{owner}/{repo}/deployments/{deployment_id}"],getDeploymentBranchPolicy:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}"],getDeploymentStatus:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses/{status_id}"],getEnvironment:["GET /repos/{owner}/{repo}/environments/{environment_name}"],getLatestPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/latest"],getLatestRelease:["GET /repos/{owner}/{repo}/releases/latest"],getOrgRuleSuite:["GET /orgs/{org}/rulesets/rule-suites/{rule_suite_id}"],getOrgRuleSuites:["GET /orgs/{org}/rulesets/rule-suites"],getOrgRuleset:["GET /orgs/{org}/rulesets/{ruleset_id}"],getOrgRulesets:["GET /orgs/{org}/rulesets"],getPages:["GET /repos/{owner}/{repo}/pages"],getPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/{build_id}"],getPagesDeployment:["GET /repos/{owner}/{repo}/pages/deployments/{pages_deployment_id}"],getPagesHealthCheck:["GET /repos/{owner}/{repo}/pages/health"],getParticipationStats:["GET /repos/{owner}/{repo}/stats/participation"],getPullRequestReviewProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],getPunchCardStats:["GET /repos/{owner}/{repo}/stats/punch_card"],getReadme:["GET /repos/{owner}/{repo}/readme"],getReadmeInDirectory:["GET /repos/{owner}/{repo}/readme/{dir}"],getRelease:["GET /repos/{owner}/{repo}/releases/{release_id}"],getReleaseAsset:["GET /repos/{owner}/{repo}/releases/assets/{asset_id}"],getReleaseByTag:["GET /repos/{owner}/{repo}/releases/tags/{tag}"],getRepoRuleSuite:["GET /repos/{owner}/{repo}/rulesets/rule-suites/{rule_suite_id}"],getRepoRuleSuites:["GET /repos/{owner}/{repo}/rulesets/rule-suites"],getRepoRuleset:["GET /repos/{owner}/{repo}/rulesets/{ruleset_id}"],getRepoRulesets:["GET /repos/{owner}/{repo}/rulesets"],getStatusChecksProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],getTeamsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams"],getTopPaths:["GET /repos/{owner}/{repo}/traffic/popular/paths"],getTopReferrers:["GET /repos/{owner}/{repo}/traffic/popular/referrers"],getUsersWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users"],getViews:["GET /repos/{owner}/{repo}/traffic/views"],getWebhook:["GET /repos/{owner}/{repo}/hooks/{hook_id}"],getWebhookConfigForRepo:["GET /repos/{owner}/{repo}/hooks/{hook_id}/config"],getWebhookDelivery:["GET /repos/{owner}/{repo}/hooks/{hook_id}/deliveries/{delivery_id}"],listActivities:["GET /repos/{owner}/{repo}/activity"],listAttestations:["GET /repos/{owner}/{repo}/attestations/{subject_digest}"],listAutolinks:["GET /repos/{owner}/{repo}/autolinks"],listBranches:["GET /repos/{owner}/{repo}/branches"],listBranchesForHeadCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/branches-where-head"],listCollaborators:["GET /repos/{owner}/{repo}/collaborators"],listCommentsForCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/comments"],listCommitCommentsForRepo:["GET /repos/{owner}/{repo}/comments"],listCommitStatusesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/statuses"],listCommits:["GET /repos/{owner}/{repo}/commits"],listContributors:["GET /repos/{owner}/{repo}/contributors"],listCustomDeploymentRuleIntegrations:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/apps"],listDeployKeys:["GET /repos/{owner}/{repo}/keys"],listDeploymentBranchPolicies:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies"],listDeploymentStatuses:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],listDeployments:["GET /repos/{owner}/{repo}/deployments"],listForAuthenticatedUser:["GET /user/repos"],listForOrg:["GET /orgs/{org}/repos"],listForUser:["GET /users/{username}/repos"],listForks:["GET /repos/{owner}/{repo}/forks"],listInvitations:["GET /repos/{owner}/{repo}/invitations"],listInvitationsForAuthenticatedUser:["GET /user/repository_invitations"],listLanguages:["GET /repos/{owner}/{repo}/languages"],listPagesBuilds:["GET /repos/{owner}/{repo}/pages/builds"],listPublic:["GET /repositories"],listPullRequestsAssociatedWithCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/pulls"],listReleaseAssets:["GET /repos/{owner}/{repo}/releases/{release_id}/assets"],listReleases:["GET /repos/{owner}/{repo}/releases"],listTags:["GET /repos/{owner}/{repo}/tags"],listTeams:["GET /repos/{owner}/{repo}/teams"],listWebhookDeliveries:["GET /repos/{owner}/{repo}/hooks/{hook_id}/deliveries"],listWebhooks:["GET /repos/{owner}/{repo}/hooks"],merge:["POST /repos/{owner}/{repo}/merges"],mergeUpstream:["POST /repos/{owner}/{repo}/merge-upstream"],pingWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/pings"],redeliverWebhookDelivery:["POST /repos/{owner}/{repo}/hooks/{hook_id}/deliveries/{delivery_id}/attempts"],removeAppAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],removeCollaborator:["DELETE /repos/{owner}/{repo}/collaborators/{username}"],removeStatusCheckContexts:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],removeStatusCheckProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],removeTeamAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],removeUserAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],renameBranch:["POST /repos/{owner}/{repo}/branches/{branch}/rename"],replaceAllTopics:["PUT /repos/{owner}/{repo}/topics"],requestPagesBuild:["POST /repos/{owner}/{repo}/pages/builds"],setAdminBranchProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],setAppAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],setStatusCheckContexts:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],setTeamAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],setUserAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],testPushWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/tests"],transfer:["POST /repos/{owner}/{repo}/transfer"],update:["PATCH /repos/{owner}/{repo}"],updateBranchProtection:["PUT /repos/{owner}/{repo}/branches/{branch}/protection"],updateCommitComment:["PATCH /repos/{owner}/{repo}/comments/{comment_id}"],updateDeploymentBranchPolicy:["PUT /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}"],updateInformationAboutPagesSite:["PUT /repos/{owner}/{repo}/pages"],updateInvitation:["PATCH /repos/{owner}/{repo}/invitations/{invitation_id}"],updateOrgRuleset:["PUT /orgs/{org}/rulesets/{ruleset_id}"],updatePullRequestReviewProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],updateRelease:["PATCH /repos/{owner}/{repo}/releases/{release_id}"],updateReleaseAsset:["PATCH /repos/{owner}/{repo}/releases/assets/{asset_id}"],updateRepoRuleset:["PUT /repos/{owner}/{repo}/rulesets/{ruleset_id}"],updateStatusCheckPotection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks",{},{renamed:["repos","updateStatusCheckProtection"]}],updateStatusCheckProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],updateWebhook:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}"],updateWebhookConfigForRepo:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}/config"],uploadReleaseAsset:["POST /repos/{owner}/{repo}/releases/{release_id}/assets{?name,label}",{baseUrl:"https://uploads.github.com"}]},search:{code:["GET /search/code"],commits:["GET /search/commits"],issuesAndPullRequests:["GET /search/issues"],labels:["GET /search/labels"],repos:["GET /search/repositories"],topics:["GET /search/topics"],users:["GET /search/users"]},secretScanning:{createPushProtectionBypass:["POST /repos/{owner}/{repo}/secret-scanning/push-protection-bypasses"],getAlert:["GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"],getScanHistory:["GET /repos/{owner}/{repo}/secret-scanning/scan-history"],listAlertsForEnterprise:["GET /enterprises/{enterprise}/secret-scanning/alerts"],listAlertsForOrg:["GET /orgs/{org}/secret-scanning/alerts"],listAlertsForRepo:["GET /repos/{owner}/{repo}/secret-scanning/alerts"],listLocationsForAlert:["GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}/locations"],updateAlert:["PATCH /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"]},securityAdvisories:{createFork:["POST /repos/{owner}/{repo}/security-advisories/{ghsa_id}/forks"],createPrivateVulnerabilityReport:["POST /repos/{owner}/{repo}/security-advisories/reports"],createRepositoryAdvisory:["POST /repos/{owner}/{repo}/security-advisories"],createRepositoryAdvisoryCveRequest:["POST /repos/{owner}/{repo}/security-advisories/{ghsa_id}/cve"],getGlobalAdvisory:["GET /advisories/{ghsa_id}"],getRepositoryAdvisory:["GET /repos/{owner}/{repo}/security-advisories/{ghsa_id}"],listGlobalAdvisories:["GET /advisories"],listOrgRepositoryAdvisories:["GET /orgs/{org}/security-advisories"],listRepositoryAdvisories:["GET /repos/{owner}/{repo}/security-advisories"],updateRepositoryAdvisory:["PATCH /repos/{owner}/{repo}/security-advisories/{ghsa_id}"]},teams:{addOrUpdateMembershipForUserInOrg:["PUT /orgs/{org}/teams/{team_slug}/memberships/{username}"],addOrUpdateProjectPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/projects/{project_id}"],addOrUpdateRepoPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],checkPermissionsForProjectInOrg:["GET /orgs/{org}/teams/{team_slug}/projects/{project_id}"],checkPermissionsForRepoInOrg:["GET /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],create:["POST /orgs/{org}/teams"],createDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],createDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions"],deleteDiscussionCommentInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],deleteDiscussionInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],deleteInOrg:["DELETE /orgs/{org}/teams/{team_slug}"],getByName:["GET /orgs/{org}/teams/{team_slug}"],getDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],getDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],getMembershipForUserInOrg:["GET /orgs/{org}/teams/{team_slug}/memberships/{username}"],list:["GET /orgs/{org}/teams"],listChildInOrg:["GET /orgs/{org}/teams/{team_slug}/teams"],listDiscussionCommentsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],listDiscussionsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions"],listForAuthenticatedUser:["GET /user/teams"],listMembersInOrg:["GET /orgs/{org}/teams/{team_slug}/members"],listPendingInvitationsInOrg:["GET /orgs/{org}/teams/{team_slug}/invitations"],listProjectsInOrg:["GET /orgs/{org}/teams/{team_slug}/projects"],listReposInOrg:["GET /orgs/{org}/teams/{team_slug}/repos"],removeMembershipForUserInOrg:["DELETE /orgs/{org}/teams/{team_slug}/memberships/{username}"],removeProjectInOrg:["DELETE /orgs/{org}/teams/{team_slug}/projects/{project_id}"],removeRepoInOrg:["DELETE /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],updateDiscussionCommentInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],updateDiscussionInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],updateInOrg:["PATCH /orgs/{org}/teams/{team_slug}"]},users:{addEmailForAuthenticated:["POST /user/emails",{},{renamed:["users","addEmailForAuthenticatedUser"]}],addEmailForAuthenticatedUser:["POST /user/emails"],addSocialAccountForAuthenticatedUser:["POST /user/social_accounts"],block:["PUT /user/blocks/{username}"],checkBlocked:["GET /user/blocks/{username}"],checkFollowingForUser:["GET /users/{username}/following/{target_user}"],checkPersonIsFollowedByAuthenticated:["GET /user/following/{username}"],createGpgKeyForAuthenticated:["POST /user/gpg_keys",{},{renamed:["users","createGpgKeyForAuthenticatedUser"]}],createGpgKeyForAuthenticatedUser:["POST /user/gpg_keys"],createPublicSshKeyForAuthenticated:["POST /user/keys",{},{renamed:["users","createPublicSshKeyForAuthenticatedUser"]}],createPublicSshKeyForAuthenticatedUser:["POST /user/keys"],createSshSigningKeyForAuthenticatedUser:["POST /user/ssh_signing_keys"],deleteEmailForAuthenticated:["DELETE /user/emails",{},{renamed:["users","deleteEmailForAuthenticatedUser"]}],deleteEmailForAuthenticatedUser:["DELETE /user/emails"],deleteGpgKeyForAuthenticated:["DELETE /user/gpg_keys/{gpg_key_id}",{},{renamed:["users","deleteGpgKeyForAuthenticatedUser"]}],deleteGpgKeyForAuthenticatedUser:["DELETE /user/gpg_keys/{gpg_key_id}"],deletePublicSshKeyForAuthenticated:["DELETE /user/keys/{key_id}",{},{renamed:["users","deletePublicSshKeyForAuthenticatedUser"]}],deletePublicSshKeyForAuthenticatedUser:["DELETE /user/keys/{key_id}"],deleteSocialAccountForAuthenticatedUser:["DELETE /user/social_accounts"],deleteSshSigningKeyForAuthenticatedUser:["DELETE /user/ssh_signing_keys/{ssh_signing_key_id}"],follow:["PUT /user/following/{username}"],getAuthenticated:["GET /user"],getById:["GET /user/{account_id}"],getByUsername:["GET /users/{username}"],getContextForUser:["GET /users/{username}/hovercard"],getGpgKeyForAuthenticated:["GET /user/gpg_keys/{gpg_key_id}",{},{renamed:["users","getGpgKeyForAuthenticatedUser"]}],getGpgKeyForAuthenticatedUser:["GET /user/gpg_keys/{gpg_key_id}"],getPublicSshKeyForAuthenticated:["GET /user/keys/{key_id}",{},{renamed:["users","getPublicSshKeyForAuthenticatedUser"]}],getPublicSshKeyForAuthenticatedUser:["GET /user/keys/{key_id}"],getSshSigningKeyForAuthenticatedUser:["GET /user/ssh_signing_keys/{ssh_signing_key_id}"],list:["GET /users"],listAttestations:["GET /users/{username}/attestations/{subject_digest}"],listBlockedByAuthenticated:["GET /user/blocks",{},{renamed:["users","listBlockedByAuthenticatedUser"]}],listBlockedByAuthenticatedUser:["GET /user/blocks"],listEmailsForAuthenticated:["GET /user/emails",{},{renamed:["users","listEmailsForAuthenticatedUser"]}],listEmailsForAuthenticatedUser:["GET /user/emails"],listFollowedByAuthenticated:["GET /user/following",{},{renamed:["users","listFollowedByAuthenticatedUser"]}],listFollowedByAuthenticatedUser:["GET /user/following"],listFollowersForAuthenticatedUser:["GET /user/followers"],listFollowersForUser:["GET /users/{username}/followers"],listFollowingForUser:["GET /users/{username}/following"],listGpgKeysForAuthenticated:["GET /user/gpg_keys",{},{renamed:["users","listGpgKeysForAuthenticatedUser"]}],listGpgKeysForAuthenticatedUser:["GET /user/gpg_keys"],listGpgKeysForUser:["GET /users/{username}/gpg_keys"],listPublicEmailsForAuthenticated:["GET /user/public_emails",{},{renamed:["users","listPublicEmailsForAuthenticatedUser"]}],listPublicEmailsForAuthenticatedUser:["GET /user/public_emails"],listPublicKeysForUser:["GET /users/{username}/keys"],listPublicSshKeysForAuthenticated:["GET /user/keys",{},{renamed:["users","listPublicSshKeysForAuthenticatedUser"]}],listPublicSshKeysForAuthenticatedUser:["GET /user/keys"],listSocialAccountsForAuthenticatedUser:["GET /user/social_accounts"],listSocialAccountsForUser:["GET /users/{username}/social_accounts"],listSshSigningKeysForAuthenticatedUser:["GET /user/ssh_signing_keys"],listSshSigningKeysForUser:["GET /users/{username}/ssh_signing_keys"],setPrimaryEmailVisibilityForAuthenticated:["PATCH /user/email/visibility",{},{renamed:["users","setPrimaryEmailVisibilityForAuthenticatedUser"]}],setPrimaryEmailVisibilityForAuthenticatedUser:["PATCH /user/email/visibility"],unblock:["DELETE /user/blocks/{username}"],unfollow:["DELETE /user/following/{username}"],updateAuthenticated:["PATCH /user"]}};var kIe=SIe;const ef=new Map;for(const[t,e]of Object.entries(kIe))for(const[n,r]of Object.entries(e)){const[s,i,o]=r,[a,l]=s.split(/ /),c=Object.assign({method:a,url:l},i);ef.has(t)||ef.set(t,new Map),ef.get(t).set(n,{scope:t,methodName:n,endpointDefaults:c,decorations:o})}const CIe={has({scope:t},e){return ef.get(t).has(e)},getOwnPropertyDescriptor(t,e){return{value:this.get(t,e),configurable:!0,writable:!0,enumerable:!0}},defineProperty(t,e,n){return Object.defineProperty(t.cache,e,n),!0},deleteProperty(t,e){return delete t.cache[e],!0},ownKeys({scope:t}){return[...ef.get(t).keys()]},set(t,e,n){return t.cache[e]=n},get({octokit:t,scope:e,cache:n},r){if(n[r])return n[r];const s=ef.get(e).get(r);if(!s)return;const{endpointDefaults:i,decorations:o}=s;return o?n[r]=TIe(t,e,r,i,o):n[r]=t.request.defaults(i),n[r]}};function AIe(t){const e={};for(const n of ef.keys())e[n]=new Proxy({octokit:t,scope:n,cache:{}},CIe);return e}function TIe(t,e,n,r,s){const i=t.request.defaults(r);function o(...a){let l=i.endpoint.merge(...a);if(s.mapToData)return l=Object.assign({},l,{data:l[s.mapToData],[s.mapToData]:void 0}),i(l);if(s.renamed){const[c,u]=s.renamed;t.log.warn(`octokit.${e}.${n}() has been renamed to octokit.${c}.${u}()`)}if(s.deprecated&&t.log.warn(s.deprecated),s.renamedParameters){const c=i.endpoint.merge(...a);for(const[u,d]of Object.entries(s.renamedParameters))u in c&&(t.log.warn(`"${u}" parameter is deprecated for "octokit.${e}.${n}()". Use "${d}" instead`),d in c||(c[d]=c[u]),delete c[u]);return i(c)}return i(...a)}return Object.assign(o,i)}function iee(t){const e=AIe(t);return{...e,rest:e}}iee.VERSION=EIe;const NIe="21.1.0",oee=vIe.plugin(tee,iee,see).defaults({userAgent:`octokit-rest.js/${NIe}`});function aee(t,e){let n=null,r=0,s=null;return function(...o){const a=Date.now();if(n=o,a-r<e){s||(s=setTimeout(()=>{s=null,r=Date.now(),n&&(t.apply(this,n),n=null)},e-(a-r)));return}r=a,t.apply(this,o),n=null}}const{saveAs:PIe}=I4e;class lee{#t=new _4e(qu);#n=new g4e(qu);#e=new ZPe(this.#n);#r=new A4e(qu);#a=new Set;artifacts=Ld({});showWorkbench=tr(!1);currentView=tr("code");unsavedFiles=tr(new Set);actionAlert=tr(void 0);modifiedFiles=new Set;artifactIdList=[];#s=Promise.resolve();constructor(){}addToExecutionQueue(e){this.#s=this.#s.then(()=>e())}get previews(){return this.#t.previews}get files(){return this.#n.files}get currentDocument(){return this.#e.currentDocument}get selectedFile(){return this.#e.selectedFile}get firstArtifact(){return this.#i(this.artifactIdList[0])}get filesCount(){return this.#n.filesCount}get showTerminal(){return this.#r.showTerminal}get boltTerminal(){return this.#r.boltTerminal}get alert(){return this.actionAlert}clearAlert(){this.actionAlert.set(void 0)}toggleTerminal(e){this.#r.toggleTerminal(e)}attachTerminal(e){this.#r.attachTerminal(e)}attachBoltTerminal(e){this.#r.attachBoltTerminal(e)}onTerminalResize(e,n){this.#r.onTerminalResize(e,n)}setDocuments(e){if(this.#e.setDocuments(e),this.#n.filesCount>0&&this.currentDocument.get()===void 0){for(const[n,r]of Object.entries(e))if(r?.type==="file"){this.setSelectedFile(n);break}}}setShowWorkbench(e){this.showWorkbench.set(e)}setCurrentDocumentContent(e){const n=this.currentDocument.get()?.filePath;if(!n)return;const r=this.#n.getFile(n)?.content,s=r!==void 0&&r!==e;this.#e.updateFile(n,e);const i=this.currentDocument.get();if(i){const o=this.unsavedFiles.get();if(s&&o.has(i.filePath))return;const a=new Set(o);s?a.add(i.filePath):a.delete(i.filePath),this.unsavedFiles.set(a)}}setCurrentDocumentScrollPosition(e){const n=this.currentDocument.get();if(!n)return;const{filePath:r}=n;this.#e.updateScrollPosition(r,e)}setSelectedFile(e){this.#e.setSelectedFile(e)}async saveFile(e){const r=this.#e.documents.get()[e];if(r===void 0)return;await this.#n.saveFile(e,r.value);const s=new Set(this.unsavedFiles.get());s.delete(e),this.unsavedFiles.set(s)}async saveCurrentDocument(){const e=this.currentDocument.get();e!==void 0&&await this.saveFile(e.filePath)}resetCurrentDocument(){const e=this.currentDocument.get();if(e===void 0)return;const{filePath:n}=e,r=this.#n.getFile(n);r&&this.setCurrentDocumentContent(r.content)}async saveAllFiles(){for(const e of this.unsavedFiles.get())await this.saveFile(e)}getFileModifcations(){return this.#n.getFileModifications()}getModifiedFiles(){return this.#n.getModifiedFiles()}resetAllFileModifications(){this.#n.resetFileModifications()}abortAllActions(){}setReloadedMessages(e){this.#a=new Set(e)}addArtifact({messageId:e,title:n,id:r,type:s}){this.#i(e)||(this.artifactIdList.includes(e)||this.artifactIdList.push(e),this.artifacts.setKey(e,{id:r,title:n,closed:!1,type:s,runner:new vPe(qu,()=>this.boltTerminal,o=>{this.#a.has(e)||this.actionAlert.set(o)})}))}updateArtifact({messageId:e},n){const r=this.#i(e);r&&this.artifacts.setKey(e,{...r,...n})}addAction(e){this.addToExecutionQueue(()=>this._addAction(e))}async _addAction(e){const{messageId:n}=e,r=this.#i(n);return r||Co("Artifact not found"),r.runner.addAction(e)}runAction(e,n=!1){n?this.actionStreamSampler(e,n):this.addToExecutionQueue(()=>this._runAction(e,n))}async _runAction(e,n=!1){const{messageId:r}=e,s=this.#i(r);s||Co("Artifact not found");const i=s.runner.actions.get()[e.actionId];if(!(!i||i.executed))if(e.action.type==="file"){const o=await qu,a=Th.join(o.workdir,e.action.filePath);this.selectedFile.value!==a&&this.setSelectedFile(a),this.currentView.value!=="code"&&this.currentView.set("code"),this.#e.documents.get()[a]||await s.runner.runAction(e,n),this.#e.updateFile(a,e.action.content),n||(await s.runner.runAction(e),this.resetAllFileModifications())}else await s.runner.runAction(e)}actionStreamSampler=aee(async(e,n=!1)=>await this._runAction(e,n),100);#i(e){return this.artifacts.get()[e]}async downloadZip(){const e=new N4e,n=this.files.get(),r=(El.value??"project").toLocaleLowerCase().split(" ").join("_"),s=Date.now().toString(36).slice(-6),i=`${r}_${s}`;for(const[a,l]of Object.entries(n))if(l?.type==="file"&&!l.isBinary){const c=ty(a),u=c.split("/");if(u.length>1){let d=e;for(let h=0;h<u.length-1;h++)d=d.folder(u[h]);d.file(u[u.length-1],l.content)}else e.file(c,l.content)}const o=await e.generateAsync({type:"blob"});PIe(o,`${i}.zip`)}async syncFiles(e){const n=this.files.get(),r=[];for(const[s,i]of Object.entries(n))if(i?.type==="file"&&!i.isBinary){const o=ty(s),a=o.split("/");let l=e;for(let d=0;d<a.length-1;d++)l=await l.getDirectoryHandle(a[d],{create:!0});const u=await(await l.getFileHandle(a[a.length-1],{create:!0})).createWritable();await u.write(i.content),await u.close(),r.push(o)}return r}async pushToGitHub(e,n,r,s){try{const i=s||ur.get("githubToken"),o=r||ur.get("githubUsername");if(!i||!o)throw new Error("GitHub token or username is not set in cookies or provided.");const a=new oee({auth:i});let l;try{l=(await a.repos.get({owner:o,repo:e})).data}catch(m){if(m instanceof Error&&"status"in m&&m.status===404){const{data:b}=await a.repos.createForAuthenticatedUser({name:e,private:!1,auto_init:!0});l=b}else throw console.log("cannot create repo!"),m}const c=this.files.get();if(!c||Object.keys(c).length===0)throw new Error("No files found to push");const d=(await Promise.all(Object.entries(c).map(async([m,b])=>{if(b?.type==="file"&&b.content){const{data:v}=await a.git.createBlob({owner:l.owner.login,repo:l.name,content:bt.from(b.content).toString("base64"),encoding:"base64"});return{path:ty(m),sha:v.sha}}return null}))).filter(Boolean);if(d.length===0)throw new Error("No valid files to push");const{data:h}=await a.git.getRef({owner:l.owner.login,repo:l.name,ref:`heads/${l.default_branch||"main"}`}),f=h.object.sha,{data:g}=await a.git.createTree({owner:l.owner.login,repo:l.name,base_tree:f,tree:d.map(m=>({path:m.path,mode:"100644",type:"blob",sha:m.sha}))}),{data:y}=await a.git.createCommit({owner:l.owner.login,repo:l.name,message:n||"Initial commit from your app",tree:g.sha,parents:[f]});await a.git.updateRef({owner:l.owner.login,repo:l.name,ref:`heads/${l.default_branch||"main"}`,sha:y.sha}),alert(`Repository created and code pushed: ${l.html_url}`)}catch(i){throw console.error("Error pushing to GitHub:",i),i}}}const St=new lee,IIe=Object.freeze(Object.defineProperty({__proto__:null,WorkbenchStore:lee,workbenchStore:St},Symbol.toStringTag,{value:"Module"})),mn=await dPe(),ya=tr(void 0),El=tr(void 0),YT=tr(void 0);function cee(){const t=fde(),{id:e}=pde(),[n]=yW(),[r,s]=T.useState([]),[i,o]=T.useState(!1),[a,l]=T.useState();return T.useEffect(()=>{if(!mn){o(!0);{const c=new Error("Chat persistence is unavailable");Lt.logError("Chat persistence initialization failed",c),ze.error("Chat persistence is unavailable")}return}e&&ig(mn,e).then(c=>{if(c&&c.messages.length>0){const u=n.get("rewindTo"),d=u?c.messages.slice(0,c.messages.findIndex(h=>h.id===u)+1):c.messages;s(d),l(c.urlId),El.set(c.description),ya.set(c.id),YT.set(c.metadata)}else t("/",{replace:!0});o(!0)}).catch(c=>{Lt.logError("Failed to load chat messages",c),ze.error(c.message)})},[]),{ready:!e||i,initialMessages:r,updateChatMestaData:async c=>{const u=ya.get();if(!(!mn||!u))try{await BE(mn,u,r,a,El.get(),void 0,c),YT.set(c)}catch(d){ze.error("Failed to update chat metadata"),console.error(d)}},storeMessageHistory:async c=>{if(!mn||c.length===0)return;const{firstArtifact:u}=St;if(!a&&u?.id){const d=await RQ(mn,u.id);$B(d),l(d)}if(!El.get()&&u?.title&&El.set(u?.title),r.length===0&&!ya.get()){const d=await IQ(mn);ya.set(d),a||$B(d)}await BE(mn,ya.get(),c,a,El.get(),void 0,YT.get())},duplicateCurrentChat:async c=>{if(!(!mn||!e&&!c))try{const u=await gPe(mn,e||c);t(`/chat/${u}`),ze.success("Chat duplicated successfully")}catch(u){ze.error("Failed to duplicate chat"),console.log(u)}},importChat:async(c,u,d)=>{if(mn)try{const h=await pO(mn,c,u,d);window.location.href=`/chat/${h}`,ze.success("Chat imported successfully")}catch(h){h instanceof Error?ze.error("Failed to import chat: "+h.message):ze.error("Failed to import chat")}},exportChat:async(c=a)=>{if(!mn||!c)return;const u=await ig(mn,c),d={messages:u.messages,description:u.description,exportDate:new Date().toISOString()},h=new Blob([JSON.stringify(d,null,2)],{type:"application/json"}),f=URL.createObjectURL(h),g=document.createElement("a");g.href=f,g.download=`chat-${new Date().toISOString()}.json`,document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(f)}}}function $B(t){const e=new URL(window.location.href);e.pathname=`/chat/${t}`,window.history.replaceState({},"",e)}function jd(){const t=It(Qb),e=It(VF),n=It(LJ),r=It(OJ),s=It(PJ),i=It(IJ),[o,a]=T.useState([]),l=It(RJ),c=It(ad),[u,d]=T.useState(()=>{const x=Qh("settings");return{theme:x?.theme||"system",language:x?.language||"en",notifications:x?.notifications??!0,eventLogs:x?.eventLogs??!0,timezone:x?.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone,tabConfiguration:c}});T.useEffect(()=>{const x=Object.entries(t).filter(([I,R])=>R.settings.enabled).map(([I,R])=>R);a(x)},[t]);const h=T.useCallback(x=>{d(I=>{const R={...I,...x};return cPe("settings",R),R})},[]),f=T.useCallback((x,I)=>{yAe(x,I)},[]),g=T.useCallback(x=>{VF.set(x),Lt.logSystem(`Debug mode ${x?"enabled":"disabled"}`),ur.set("isDebugEnabled",String(x))},[]),y=T.useCallback(x=>{EAe(x),Lt.logSystem(`Event logs ${x?"enabled":"disabled"}`)},[]),m=T.useCallback(x=>{SAe(x),Lt.logSystem(`Prompt template updated to ${x}`)},[]),b=T.useCallback(x=>{_Ae(x),Lt.logSystem(`Main branch updates ${x?"enabled":"disabled"}`)},[]),v=T.useCallback(x=>{xAe(x),Lt.logSystem(`Auto select template ${x?"enabled":"disabled"}`)},[]),_=T.useCallback(x=>{wAe(x),Lt.logSystem(`Context optimization ${x?"enabled":"disabled"}`)},[]),E=T.useCallback(x=>{h({theme:x})},[h]),w=T.useCallback(x=>{h({language:x})},[h]),S=T.useCallback(x=>{h({notifications:x})},[h]),k=T.useCallback(x=>{h({timezone:x})},[h]);return T.useEffect(()=>{const x=Qb.get(),I={};Object.keys(x).forEach(R=>{I[R]=x[R].settings}),ur.set("providers",JSON.stringify(I))},[t]),{...u,providers:t,activeProviders:o,updateProviderSettings:f,debug:e,enableDebugMode:g,eventLogs:n,setEventLogs:y,promptId:r,setPromptId:m,isLatestBranch:s,enableLatestBranch:b,autoSelectTemplate:i,setAutoSelectTemplate:v,contextOptimizationEnabled:l,enableContextOptimization:_,setTheme:E,setLanguage:w,setNotifications:S,setTimezone:k,settings:u,tabConfiguration:c,updateTabConfiguration:CAe,resetTabConfiguration:DJ}}const uee=-1,Wk=0,ny=1,$E=2,EO=3,SO=4,kO=5,CO=6,dee=7,hee=8,HB=typeof self=="object"?self:globalThis,RIe=(t,e)=>{const n=(s,i)=>(t.set(i,s),s),r=s=>{if(t.has(s))return t.get(s);const[i,o]=e[s];switch(i){case Wk:case uee:return n(o,s);case ny:{const a=n([],s);for(const l of o)a.push(r(l));return a}case $E:{const a=n({},s);for(const[l,c]of o)a[r(l)]=r(c);return a}case EO:return n(new Date(o),s);case SO:{const{source:a,flags:l}=o;return n(new RegExp(a,l),s)}case kO:{const a=n(new Map,s);for(const[l,c]of o)a.set(r(l),r(c));return a}case CO:{const a=n(new Set,s);for(const l of o)a.add(r(l));return a}case dee:{const{name:a,message:l}=o;return n(new HB[a](l),s)}case hee:return n(BigInt(o),s);case"BigInt":return n(Object(BigInt(o)),s);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return n(new DataView(a),o)}}return n(new HB[i](o),s)};return r},zB=t=>RIe(new Map,t)(0),Dp="",{toString:LIe}={},{keys:OIe}=Object,B0=t=>{const e=typeof t;if(e!=="object"||!t)return[Wk,e];const n=LIe.call(t).slice(8,-1);switch(n){case"Array":return[ny,Dp];case"Object":return[$E,Dp];case"Date":return[EO,Dp];case"RegExp":return[SO,Dp];case"Map":return[kO,Dp];case"Set":return[CO,Dp];case"DataView":return[ny,n]}return n.includes("Array")?[ny,n]:n.includes("Error")?[dee,n]:[$E,n]},Px=([t,e])=>t===Wk&&(e==="function"||e==="symbol"),DIe=(t,e,n,r)=>{const s=(o,a)=>{const l=r.push(o)-1;return n.set(a,l),l},i=o=>{if(n.has(o))return n.get(o);let[a,l]=B0(o);switch(a){case Wk:{let u=o;switch(l){case"bigint":a=hee,u=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+l);u=null;break;case"undefined":return s([uee],o)}return s([a,u],o)}case ny:{if(l){let h=o;return l==="DataView"?h=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(h=new Uint8Array(o)),s([l,[...h]],o)}const u=[],d=s([a,u],o);for(const h of o)u.push(i(h));return d}case $E:{if(l)switch(l){case"BigInt":return s([l,o.toString()],o);case"Boolean":case"Number":case"String":return s([l,o.valueOf()],o)}if(e&&"toJSON"in o)return i(o.toJSON());const u=[],d=s([a,u],o);for(const h of OIe(o))(t||!Px(B0(o[h])))&&u.push([i(h),i(o[h])]);return d}case EO:return s([a,o.toISOString()],o);case SO:{const{source:u,flags:d}=o;return s([a,{source:u,flags:d}],o)}case kO:{const u=[],d=s([a,u],o);for(const[h,f]of o)(t||!(Px(B0(h))||Px(B0(f))))&&u.push([i(h),i(f)]);return d}case CO:{const u=[],d=s([a,u],o);for(const h of o)(t||!Px(B0(h)))&&u.push(i(h));return d}}const{message:c}=o;return s([a,{name:l,message:c}],o)};return i},VB=(t,{json:e,lossy:n}={})=>{const r=[];return DIe(!(e||n),!!e,new Map,r)(t),r},vf=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?zB(VB(t,e)):structuredClone(t):(t,e)=>zB(VB(t,e));class Iv{constructor(e,n,r){this.property=e,this.normal=n,r&&(this.space=r)}}Iv.prototype.property={};Iv.prototype.normal={};Iv.prototype.space=null;function fee(t,e){const n={},r={};let s=-1;for(;++s<t.length;)Object.assign(n,t[s].property),Object.assign(r,t[s].normal);return new Iv(n,r,e)}function d1(t){return t.toLowerCase()}class Jo{constructor(e,n){this.property=e,this.attribute=n}}Jo.prototype.space=null;Jo.prototype.boolean=!1;Jo.prototype.booleanish=!1;Jo.prototype.overloadedBoolean=!1;Jo.prototype.number=!1;Jo.prototype.commaSeparated=!1;Jo.prototype.spaceSeparated=!1;Jo.prototype.commaOrSpaceSeparated=!1;Jo.prototype.mustUseProperty=!1;Jo.prototype.defined=!1;let MIe=0;const Xt=zf(),Mr=zf(),pee=zf(),ft=zf(),Jn=zf(),Sm=zf(),zi=zf();function zf(){return 2**++MIe}const NP=Object.freeze(Object.defineProperty({__proto__:null,boolean:Xt,booleanish:Mr,commaOrSpaceSeparated:zi,commaSeparated:Sm,number:ft,overloadedBoolean:pee,spaceSeparated:Jn},Symbol.toStringTag,{value:"Module"})),XT=Object.keys(NP);class AO extends Jo{constructor(e,n,r,s){let i=-1;if(super(e,n),WB(this,"space",s),typeof r=="number")for(;++i<XT.length;){const o=XT[i];WB(this,XT[i],(r&NP[o])===NP[o])}}}AO.prototype.defined=!0;function WB(t,e,n){n&&(t[e]=n)}const jIe={}.hasOwnProperty;function Fg(t){const e={},n={};let r;for(r in t.properties)if(jIe.call(t.properties,r)){const s=t.properties[r],i=new AO(r,t.transform(t.attributes||{},r),s,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(i.mustUseProperty=!0),e[r]=i,n[d1(r)]=r,n[d1(i.attribute)]=r}return new Iv(e,n,t.space)}const mee=Fg({space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),gee=Fg({space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function bee(t,e){return e in t?t[e]:e}function yee(t,e){return bee(t,e.toLowerCase())}const vee=Fg({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:yee,properties:{xmlns:null,xmlnsXLink:null}}),_ee=Fg({transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Mr,ariaAutoComplete:null,ariaBusy:Mr,ariaChecked:Mr,ariaColCount:ft,ariaColIndex:ft,ariaColSpan:ft,ariaControls:Jn,ariaCurrent:null,ariaDescribedBy:Jn,ariaDetails:null,ariaDisabled:Mr,ariaDropEffect:Jn,ariaErrorMessage:null,ariaExpanded:Mr,ariaFlowTo:Jn,ariaGrabbed:Mr,ariaHasPopup:null,ariaHidden:Mr,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Jn,ariaLevel:ft,ariaLive:null,ariaModal:Mr,ariaMultiLine:Mr,ariaMultiSelectable:Mr,ariaOrientation:null,ariaOwns:Jn,ariaPlaceholder:null,ariaPosInSet:ft,ariaPressed:Mr,ariaReadOnly:Mr,ariaRelevant:null,ariaRequired:Mr,ariaRoleDescription:Jn,ariaRowCount:ft,ariaRowIndex:ft,ariaRowSpan:ft,ariaSelected:Mr,ariaSetSize:ft,ariaSort:null,ariaValueMax:ft,ariaValueMin:ft,ariaValueNow:ft,ariaValueText:null,role:null}}),FIe=Fg({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:yee,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Sm,acceptCharset:Jn,accessKey:Jn,action:null,allow:null,allowFullScreen:Xt,allowPaymentRequest:Xt,allowUserMedia:Xt,alt:null,as:null,async:Xt,autoCapitalize:null,autoComplete:Jn,autoFocus:Xt,autoPlay:Xt,blocking:Jn,capture:null,charSet:null,checked:Xt,cite:null,className:Jn,cols:ft,colSpan:null,content:null,contentEditable:Mr,controls:Xt,controlsList:Jn,coords:ft|Sm,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Xt,defer:Xt,dir:null,dirName:null,disabled:Xt,download:pee,draggable:Mr,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Xt,formTarget:null,headers:Jn,height:ft,hidden:Xt,high:ft,href:null,hrefLang:null,htmlFor:Jn,httpEquiv:Jn,id:null,imageSizes:null,imageSrcSet:null,inert:Xt,inputMode:null,integrity:null,is:null,isMap:Xt,itemId:null,itemProp:Jn,itemRef:Jn,itemScope:Xt,itemType:Jn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Xt,low:ft,manifest:null,max:null,maxLength:ft,media:null,method:null,min:null,minLength:ft,multiple:Xt,muted:Xt,name:null,nonce:null,noModule:Xt,noValidate:Xt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Xt,optimum:ft,pattern:null,ping:Jn,placeholder:null,playsInline:Xt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Xt,referrerPolicy:null,rel:Jn,required:Xt,reversed:Xt,rows:ft,rowSpan:ft,sandbox:Jn,scope:null,scoped:Xt,seamless:Xt,selected:Xt,shadowRootClonable:Xt,shadowRootDelegatesFocus:Xt,shadowRootMode:null,shape:null,size:ft,sizes:null,slot:null,span:ft,spellCheck:Mr,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ft,step:null,style:null,tabIndex:ft,target:null,title:null,translate:null,type:null,typeMustMatch:Xt,useMap:null,value:Mr,width:ft,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Jn,axis:null,background:null,bgColor:null,border:ft,borderColor:null,bottomMargin:ft,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Xt,declare:Xt,event:null,face:null,frame:null,frameBorder:null,hSpace:ft,leftMargin:ft,link:null,longDesc:null,lowSrc:null,marginHeight:ft,marginWidth:ft,noResize:Xt,noHref:Xt,noShade:Xt,noWrap:Xt,object:null,profile:null,prompt:null,rev:null,rightMargin:ft,rules:null,scheme:null,scrolling:Mr,standby:null,summary:null,text:null,topMargin:ft,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ft,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Xt,disableRemotePlayback:Xt,prefix:null,property:null,results:ft,security:null,unselectable:null}}),BIe=Fg({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:bee,properties:{about:zi,accentHeight:ft,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ft,amplitude:ft,arabicForm:null,ascent:ft,attributeName:null,attributeType:null,azimuth:ft,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ft,by:null,calcMode:null,capHeight:ft,className:Jn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ft,diffuseConstant:ft,direction:null,display:null,dur:null,divisor:ft,dominantBaseline:null,download:Xt,dx:null,dy:null,edgeMode:null,editable:null,elevation:ft,enableBackground:null,end:null,event:null,exponent:ft,externalResourcesRequired:null,fill:null,fillOpacity:ft,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Sm,g2:Sm,glyphName:Sm,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ft,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ft,horizOriginX:ft,horizOriginY:ft,id:null,ideographic:ft,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ft,k:ft,k1:ft,k2:ft,k3:ft,k4:ft,kernelMatrix:zi,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ft,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ft,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ft,overlineThickness:ft,paintOrder:null,panose1:null,path:null,pathLength:ft,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Jn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ft,pointsAtY:ft,pointsAtZ:ft,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:zi,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:zi,rev:zi,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:zi,requiredFeatures:zi,requiredFonts:zi,requiredFormats:zi,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ft,specularExponent:ft,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ft,strikethroughThickness:ft,string:null,stroke:null,strokeDashArray:zi,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ft,strokeOpacity:ft,strokeWidth:null,style:null,surfaceScale:ft,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:zi,tabIndex:ft,tableValues:null,target:null,targetX:ft,targetY:ft,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:zi,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ft,underlineThickness:ft,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ft,values:null,vAlphabetic:ft,vMathematical:ft,vectorEffect:null,vHanging:ft,vIdeographic:ft,version:null,vertAdvY:ft,vertOriginX:ft,vertOriginY:ft,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ft,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),UIe=/^data[-\w.:]+$/i,GB=/-[a-z]/g,$Ie=/[A-Z]/g;function Rv(t,e){const n=d1(e);let r=e,s=Jo;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&UIe.test(e)){if(e.charAt(4)==="-"){const i=e.slice(5).replace(GB,zIe);r="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=e.slice(4);if(!GB.test(i)){let o=i.replace($Ie,HIe);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}s=AO}return new s(r,e)}function HIe(t){return"-"+t.toLowerCase()}function zIe(t){return t.charAt(1).toUpperCase()}const VIe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Bg=fee([gee,mee,vee,_ee,FIe],"html"),Ql=fee([gee,mee,vee,_ee,BIe],"svg");function qB(t){const e=[],n=String(t||"");let r=n.indexOf(","),s=0,i=!1;for(;!i;){r===-1&&(r=n.length,i=!0);const o=n.slice(s,r).trim();(o||!i)&&e.push(o),s=r+1,r=n.indexOf(",",s)}return e}function TO(t,e){const n=e||{};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const KB=/[#.]/g;function WIe(t,e){const n=t||"",r={};let s=0,i,o;for(;s<n.length;){KB.lastIndex=s;const a=KB.exec(n),l=n.slice(s,a?a.index:n.length);l&&(i?i==="#"?r.id=l:Array.isArray(r.className)?r.className.push(l):r.className=[l]:o=l,s+=l.length),a&&(i=a[0],s++)}return{type:"element",tagName:o||e||"div",properties:r,children:[]}}function YB(t){const e=String(t||"").trim();return e?e.split(/[ \t\n\r\f]+/g):[]}function NO(t){return t.join(" ").trim()}const PP={}.hasOwnProperty;function xee(t,e,n){const r=n&&YIe(n);function s(i,o,...a){let l=-1,c;if(i==null){c={type:"root",children:[]};const u=o;a.unshift(u)}else if(c=WIe(i,e),c.tagName=c.tagName.toLowerCase(),r&&PP.call(r,c.tagName)&&(c.tagName=r[c.tagName]),GIe(o))a.unshift(o);else{let u;for(u in o)PP.call(o,u)&&qIe(t,c.properties,u,o[u])}for(;++l<a.length;)IP(c.children,a[l]);return c.type==="element"&&c.tagName==="template"&&(c.content={type:"root",children:c.children},c.children=[]),c}return s}function GIe(t){if(t===null||typeof t!="object"||Array.isArray(t))return!0;if(typeof t.type!="string")return!1;const e=t,n=Object.keys(t);for(const r of n){const s=e[r];if(s&&typeof s=="object"){if(!Array.isArray(s))return!0;const i=s;for(const o of i)if(typeof o!="number"&&typeof o!="string")return!0}}return!!("children"in t&&Array.isArray(t.children))}function qIe(t,e,n,r){const s=Rv(t,n);let i=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?s.spaceSeparated?o=YB(r):s.commaSeparated?o=qB(r):s.commaOrSpaceSeparated?o=YB(qB(r).join(" ")):o=XB(s,s.property,r):Array.isArray(r)?o=r.concat():o=s.property==="style"?KIe(r):String(r);if(Array.isArray(o)){const a=[];for(;++i<o.length;){const l=XB(s,s.property,o[i]);a[i]=l}o=a}if(s.property==="className"&&Array.isArray(e.className)){const a=o;o=e.className.concat(a)}e[s.property]=o}}function IP(t,e){let n=-1;if(e!=null)if(typeof e=="string"||typeof e=="number")t.push({type:"text",value:String(e)});else if(Array.isArray(e))for(;++n<e.length;)IP(t,e[n]);else if(typeof e=="object"&&"type"in e)e.type==="root"?IP(t,e.children):t.push(e);else throw new Error("Expected node, nodes, or string, got `"+e+"`")}function XB(t,e,n){if(typeof n=="string"){if(t.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((t.boolean||t.overloadedBoolean)&&(n===""||d1(n)===d1(e)))return!0}return n}function KIe(t){const e=[];let n;for(n in t)PP.call(t,n)&&e.push([n,t[n]].join(": "));return e.join("; ")}function YIe(t){const e={};let n=-1;for(;++n<t.length;)e[t[n].toLowerCase()]=t[n];return e}const XIe=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],JIe=xee(Bg,"div"),ZIe=xee(Ql,"g",XIe);function QIe(t){const e=String(t),n=[];return{toOffset:s,toPoint:r};function r(i){if(typeof i=="number"&&i>-1&&i<=e.length){let o=0;for(;;){let a=n[o];if(a===void 0){const l=JB(e,n[o-1]);a=l===-1?e.length+1:l+1,n[o]=a}if(a>i)return{line:o+1,column:i-(o>0?n[o-1]:0)+1,offset:i};o++}}}function s(i){if(i&&typeof i.line=="number"&&typeof i.column=="number"&&!Number.isNaN(i.line)&&!Number.isNaN(i.column)){for(;n.length<i.line;){const a=n[n.length-1],l=JB(e,a),c=l===-1?e.length+1:l+1;if(a===c)break;n.push(c)}const o=(i.line>1?n[i.line-2]:0)+i.column-1;if(o<n[i.line-1])return o}}}function JB(t,e){const n=t.indexOf("\r",e),r=t.indexOf(`
`,e);return r===-1?n:n===-1||n+1===r?r:n<r?n:r}const Ph={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},wee={}.hasOwnProperty,eRe=Object.prototype;function tRe(t,e){const n=e||{};return PO({file:n.file||void 0,location:!1,schema:n.space==="svg"?Ql:Bg,verbose:n.verbose||!1},t)}function PO(t,e){let n;switch(e.nodeName){case"#comment":{const r=e;return n={type:"comment",value:r.data},i2(t,r,n),n}case"#document":case"#document-fragment":{const r=e,s="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:Eee(t,e.childNodes),data:{quirksMode:s}},t.file&&t.location){const i=String(t.file),o=QIe(i),a=o.toPoint(0),l=o.toPoint(i.length);n.position={start:a,end:l}}return n}case"#documentType":{const r=e;return n={type:"doctype"},i2(t,r,n),n}case"#text":{const r=e;return n={type:"text",value:r.value},i2(t,r,n),n}default:return n=nRe(t,e),n}}function Eee(t,e){let n=-1;const r=[];for(;++n<e.length;){const s=PO(t,e[n]);r.push(s)}return r}function nRe(t,e){const n=t.schema;t.schema=e.namespaceURI===Ph.svg?Ql:Bg;let r=-1;const s={};for(;++r<e.attrs.length;){const a=e.attrs[r],l=(a.prefix?a.prefix+":":"")+a.name;wee.call(eRe,l)||(s[l]=a.value)}const o=(t.schema.space==="svg"?ZIe:JIe)(e.tagName,s,Eee(t,e.childNodes));if(i2(t,e,o),o.tagName==="template"){const a=e,l=a.sourceCodeLocation,c=l&&l.startTag&&cm(l.startTag),u=l&&l.endTag&&cm(l.endTag),d=PO(t,a.content);c&&u&&t.file&&(d.position={start:c.end,end:u.start}),o.content=d}return t.schema=n,o}function i2(t,e,n){if("sourceCodeLocation"in e&&e.sourceCodeLocation&&t.file){const r=rRe(t,n,e.sourceCodeLocation);r&&(t.location=!0,n.position=r)}}function rRe(t,e,n){const r=cm(n);if(e.type==="element"){const s=e.children[e.children.length-1];if(r&&!n.endTag&&s&&s.position&&s.position.end&&(r.end=Object.assign({},s.position.end)),t.verbose){const i={};let o;if(n.attrs)for(o in n.attrs)wee.call(n.attrs,o)&&(i[Rv(t.schema,o).property]=cm(n.attrs[o]));n.startTag;const a=cm(n.startTag),l=n.endTag?cm(n.endTag):void 0,c={opening:a};l&&(c.closing=l),c.properties=i,e.data={position:c}}}return r}function cm(t){const e=ZB({line:t.startLine,column:t.startCol,offset:t.startOffset}),n=ZB({line:t.endLine,column:t.endCol,offset:t.endOffset});return e||n?{start:e,end:n}:void 0}function ZB(t){return t.line&&t.column?t:void 0}const QB={}.hasOwnProperty;function IO(t,e){const n=e||{};function r(s,...i){let o=r.invalid;const a=r.handlers;if(s&&QB.call(s,t)){const l=String(s[t]);o=QB.call(a,l)?a[l]:r.unknown}if(o)return o.call(this,s,...i)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const sRe={},iRe={}.hasOwnProperty,See=IO("type",{handlers:{root:aRe,element:hRe,text:uRe,comment:dRe,doctype:cRe}});function oRe(t,e){const r=(e||sRe).space;return See(t,r==="svg"?Ql:Bg)}function aRe(t,e){const n={nodeName:"#document",mode:(t.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=RO(t.children,n,e),Ug(t,n),n}function lRe(t,e){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=RO(t.children,n,e),Ug(t,n),n}function cRe(t){const e={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return Ug(t,e),e}function uRe(t){const e={nodeName:"#text",value:t.value,parentNode:null};return Ug(t,e),e}function dRe(t){const e={nodeName:"#comment",data:t.value,parentNode:null};return Ug(t,e),e}function hRe(t,e){const n=e;let r=n;t.type==="element"&&t.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=Ql);const s=[];let i;if(t.properties){for(i in t.properties)if(i!=="children"&&iRe.call(t.properties,i)){const l=fRe(r,i,t.properties[i]);l&&s.push(l)}}const o=r.space,a={nodeName:t.tagName,tagName:t.tagName,attrs:s,namespaceURI:Ph[o],childNodes:[],parentNode:null};return a.childNodes=RO(t.children,a,r),Ug(t,a),t.tagName==="template"&&t.content&&(a.content=lRe(t.content,r)),a}function fRe(t,e,n){const r=Rv(t,e);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?TO(n):NO(n));const s={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const i=s.name.indexOf(":");i<0?s.prefix="":(s.name=s.name.slice(i+1),s.prefix=r.attribute.slice(0,i)),s.namespace=Ph[r.space]}return s}function RO(t,e,n){let r=-1;const s=[];if(t)for(;++r<t.length;){const i=See(t[r],n);i.parentNode=e,s.push(i)}return s}function Ug(t,e){const n=t.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,e.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const kee=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],pRe=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),sr="";var be;(function(t){t[t.EOF=-1]="EOF",t[t.NULL=0]="NULL",t[t.TABULATION=9]="TABULATION",t[t.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",t[t.LINE_FEED=10]="LINE_FEED",t[t.FORM_FEED=12]="FORM_FEED",t[t.SPACE=32]="SPACE",t[t.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",t[t.QUOTATION_MARK=34]="QUOTATION_MARK",t[t.AMPERSAND=38]="AMPERSAND",t[t.APOSTROPHE=39]="APOSTROPHE",t[t.HYPHEN_MINUS=45]="HYPHEN_MINUS",t[t.SOLIDUS=47]="SOLIDUS",t[t.DIGIT_0=48]="DIGIT_0",t[t.DIGIT_9=57]="DIGIT_9",t[t.SEMICOLON=59]="SEMICOLON",t[t.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",t[t.EQUALS_SIGN=61]="EQUALS_SIGN",t[t.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",t[t.QUESTION_MARK=63]="QUESTION_MARK",t[t.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",t[t.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",t[t.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",t[t.GRAVE_ACCENT=96]="GRAVE_ACCENT",t[t.LATIN_SMALL_A=97]="LATIN_SMALL_A",t[t.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(be||(be={}));const wi={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function Cee(t){return t>=55296&&t<=57343}function mRe(t){return t>=56320&&t<=57343}function gRe(t,e){return(t-55296)*1024+9216+e}function Aee(t){return t!==32&&t!==10&&t!==13&&t!==9&&t!==12&&t>=1&&t<=31||t>=127&&t<=159}function Tee(t){return t>=64976&&t<=65007||pRe.has(t)}var Ze;(function(t){t.controlCharacterInInputStream="control-character-in-input-stream",t.noncharacterInInputStream="noncharacter-in-input-stream",t.surrogateInInputStream="surrogate-in-input-stream",t.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",t.endTagWithAttributes="end-tag-with-attributes",t.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",t.unexpectedSolidusInTag="unexpected-solidus-in-tag",t.unexpectedNullCharacter="unexpected-null-character",t.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",t.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",t.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",t.missingEndTagName="missing-end-tag-name",t.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",t.unknownNamedCharacterReference="unknown-named-character-reference",t.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",t.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",t.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",t.eofBeforeTagName="eof-before-tag-name",t.eofInTag="eof-in-tag",t.missingAttributeValue="missing-attribute-value",t.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",t.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",t.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",t.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",t.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",t.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",t.missingDoctypePublicIdentifier="missing-doctype-public-identifier",t.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",t.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",t.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",t.cdataInHtmlContent="cdata-in-html-content",t.incorrectlyOpenedComment="incorrectly-opened-comment",t.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",t.eofInDoctype="eof-in-doctype",t.nestedComment="nested-comment",t.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",t.eofInComment="eof-in-comment",t.incorrectlyClosedComment="incorrectly-closed-comment",t.eofInCdata="eof-in-cdata",t.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",t.nullCharacterReference="null-character-reference",t.surrogateCharacterReference="surrogate-character-reference",t.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",t.controlCharacterReference="control-character-reference",t.noncharacterCharacterReference="noncharacter-character-reference",t.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",t.missingDoctypeName="missing-doctype-name",t.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",t.duplicateAttribute="duplicate-attribute",t.nonConformingDoctype="non-conforming-doctype",t.missingDoctype="missing-doctype",t.misplacedDoctype="misplaced-doctype",t.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",t.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",t.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",t.openElementsLeftAfterEof="open-elements-left-after-eof",t.abandonedHeadElementChild="abandoned-head-element-child",t.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",t.nestedNoscriptInHead="nested-noscript-in-head",t.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Ze||(Ze={}));const bRe=65536;class yRe{constructor(e){this.handler=e,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=bRe,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(e,n){const{line:r,col:s,offset:i}=this,o=s+n,a=i+n;return{code:e,startLine:r,endLine:r,startCol:o,endCol:o,startOffset:a,endOffset:a}}_err(e){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(e,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(mRe(n))return this.pos++,this._addGap(),gRe(e,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,be.EOF;return this._err(Ze.surrogateInInputStream),e}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(e,n){this.html.length>0?this.html+=e:this.html=e,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(e,n){if(this.pos+e.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(e,this.pos);for(let r=0;r<e.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==e.charCodeAt(r))return!1;return!0}peek(e){const n=this.pos+e;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,be.EOF;const r=this.html.charCodeAt(n);return r===be.CARRIAGE_RETURN?be.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,be.EOF;let e=this.html.charCodeAt(this.pos);return e===be.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,be.LINE_FEED):e===be.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,Cee(e)&&(e=this._processSurrogate(e)),this.handler.onParseError===null||e>31&&e<127||e===be.LINE_FEED||e===be.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e)}_checkForProblematicCharacters(e){Aee(e)?this._err(Ze.controlCharacterInInputStream):Tee(e)&&this._err(Ze.noncharacterInInputStream)}retreat(e){for(this.pos-=e;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var rn;(function(t){t[t.CHARACTER=0]="CHARACTER",t[t.NULL_CHARACTER=1]="NULL_CHARACTER",t[t.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",t[t.START_TAG=3]="START_TAG",t[t.END_TAG=4]="END_TAG",t[t.COMMENT=5]="COMMENT",t[t.DOCTYPE=6]="DOCTYPE",t[t.EOF=7]="EOF",t[t.HIBERNATION=8]="HIBERNATION"})(rn||(rn={}));function Nee(t,e){for(let n=t.attrs.length-1;n>=0;n--)if(t.attrs[n].name===e)return t.attrs[n].value;return null}const Pee=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(t=>t.charCodeAt(0))),vRe=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(t=>t.charCodeAt(0)));var JT;const _Re=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),xRe=(JT=String.fromCodePoint)!==null&&JT!==void 0?JT:function(t){let e="";return t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|t&1023),e+=String.fromCharCode(t),e};function wRe(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=_Re.get(t))!==null&&e!==void 0?e:t}var rs;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(rs||(rs={}));const ERe=32;var Ju;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(Ju||(Ju={}));function RP(t){return t>=rs.ZERO&&t<=rs.NINE}function SRe(t){return t>=rs.UPPER_A&&t<=rs.UPPER_F||t>=rs.LOWER_A&&t<=rs.LOWER_F}function kRe(t){return t>=rs.UPPER_A&&t<=rs.UPPER_Z||t>=rs.LOWER_A&&t<=rs.LOWER_Z||RP(t)}function CRe(t){return t===rs.EQUALS||kRe(t)}var es;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(es||(es={}));var Oc;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(Oc||(Oc={}));class Iee{constructor(e,n,r){this.decodeTree=e,this.emitCodePoint=n,this.errors=r,this.state=es.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Oc.Strict}startEntity(e){this.decodeMode=e,this.state=es.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,n){switch(this.state){case es.EntityStart:return e.charCodeAt(n)===rs.NUM?(this.state=es.NumericStart,this.consumed+=1,this.stateNumericStart(e,n+1)):(this.state=es.NamedEntity,this.stateNamedEntity(e,n));case es.NumericStart:return this.stateNumericStart(e,n);case es.NumericDecimal:return this.stateNumericDecimal(e,n);case es.NumericHex:return this.stateNumericHex(e,n);case es.NamedEntity:return this.stateNamedEntity(e,n)}}stateNumericStart(e,n){return n>=e.length?-1:(e.charCodeAt(n)|ERe)===rs.LOWER_X?(this.state=es.NumericHex,this.consumed+=1,this.stateNumericHex(e,n+1)):(this.state=es.NumericDecimal,this.stateNumericDecimal(e,n))}addToNumericResult(e,n,r,s){if(n!==r){const i=r-n;this.result=this.result*Math.pow(s,i)+parseInt(e.substr(n,i),s),this.consumed+=i}}stateNumericHex(e,n){const r=n;for(;n<e.length;){const s=e.charCodeAt(n);if(RP(s)||SRe(s))n+=1;else return this.addToNumericResult(e,r,n,16),this.emitNumericEntity(s,3)}return this.addToNumericResult(e,r,n,16),-1}stateNumericDecimal(e,n){const r=n;for(;n<e.length;){const s=e.charCodeAt(n);if(RP(s))n+=1;else return this.addToNumericResult(e,r,n,10),this.emitNumericEntity(s,2)}return this.addToNumericResult(e,r,n,10),-1}emitNumericEntity(e,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===rs.SEMI)this.consumed+=1;else if(this.decodeMode===Oc.Strict)return 0;return this.emitCodePoint(wRe(this.result),this.consumed),this.errors&&(e!==rs.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,n){const{decodeTree:r}=this;let s=r[this.treeIndex],i=(s&Ju.VALUE_LENGTH)>>14;for(;n<e.length;n++,this.excess++){const o=e.charCodeAt(n);if(this.treeIndex=ARe(r,s,this.treeIndex+Math.max(1,i),o),this.treeIndex<0)return this.result===0||this.decodeMode===Oc.Attribute&&(i===0||CRe(o))?0:this.emitNotTerminatedNamedEntity();if(s=r[this.treeIndex],i=(s&Ju.VALUE_LENGTH)>>14,i!==0){if(o===rs.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==Oc.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:n,decodeTree:r}=this,s=(r[n]&Ju.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,s,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,n,r){const{decodeTree:s}=this;return this.emitCodePoint(n===1?s[e]&~Ju.VALUE_LENGTH:s[e+1],r),n===3&&this.emitCodePoint(s[e+2],r),r}end(){var e;switch(this.state){case es.NamedEntity:return this.result!==0&&(this.decodeMode!==Oc.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case es.NumericDecimal:return this.emitNumericEntity(0,2);case es.NumericHex:return this.emitNumericEntity(0,3);case es.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case es.EntityStart:return 0}}}function Ree(t){let e="";const n=new Iee(t,r=>e+=xRe(r));return function(s,i){let o=0,a=0;for(;(a=s.indexOf("&",a))>=0;){e+=s.slice(o,a),n.startEntity(i);const c=n.write(s,a+1);if(c<0){o=a+n.end();break}o=a+c,a=c===0?o+1:o}const l=e+s.slice(o);return e="",l}}function ARe(t,e,n,r){const s=(e&Ju.BRANCH_LENGTH)>>7,i=e&Ju.JUMP_TABLE;if(s===0)return i!==0&&r===i?n:-1;if(i){const l=r-i;return l<0||l>=s?-1:t[n+l]-1}let o=n,a=o+s-1;for(;o<=a;){const l=o+a>>>1,c=t[l];if(c<r)o=l+1;else if(c>r)a=l-1;else return t[l+s]}return-1}Ree(Pee);Ree(vRe);var lt;(function(t){t.HTML="http://www.w3.org/1999/xhtml",t.MATHML="http://www.w3.org/1998/Math/MathML",t.SVG="http://www.w3.org/2000/svg",t.XLINK="http://www.w3.org/1999/xlink",t.XML="http://www.w3.org/XML/1998/namespace",t.XMLNS="http://www.w3.org/2000/xmlns/"})(lt||(lt={}));var tf;(function(t){t.TYPE="type",t.ACTION="action",t.ENCODING="encoding",t.PROMPT="prompt",t.NAME="name",t.COLOR="color",t.FACE="face",t.SIZE="size"})(tf||(tf={}));var To;(function(t){t.NO_QUIRKS="no-quirks",t.QUIRKS="quirks",t.LIMITED_QUIRKS="limited-quirks"})(To||(To={}));var Ve;(function(t){t.A="a",t.ADDRESS="address",t.ANNOTATION_XML="annotation-xml",t.APPLET="applet",t.AREA="area",t.ARTICLE="article",t.ASIDE="aside",t.B="b",t.BASE="base",t.BASEFONT="basefont",t.BGSOUND="bgsound",t.BIG="big",t.BLOCKQUOTE="blockquote",t.BODY="body",t.BR="br",t.BUTTON="button",t.CAPTION="caption",t.CENTER="center",t.CODE="code",t.COL="col",t.COLGROUP="colgroup",t.DD="dd",t.DESC="desc",t.DETAILS="details",t.DIALOG="dialog",t.DIR="dir",t.DIV="div",t.DL="dl",t.DT="dt",t.EM="em",t.EMBED="embed",t.FIELDSET="fieldset",t.FIGCAPTION="figcaption",t.FIGURE="figure",t.FONT="font",t.FOOTER="footer",t.FOREIGN_OBJECT="foreignObject",t.FORM="form",t.FRAME="frame",t.FRAMESET="frameset",t.H1="h1",t.H2="h2",t.H3="h3",t.H4="h4",t.H5="h5",t.H6="h6",t.HEAD="head",t.HEADER="header",t.HGROUP="hgroup",t.HR="hr",t.HTML="html",t.I="i",t.IMG="img",t.IMAGE="image",t.INPUT="input",t.IFRAME="iframe",t.KEYGEN="keygen",t.LABEL="label",t.LI="li",t.LINK="link",t.LISTING="listing",t.MAIN="main",t.MALIGNMARK="malignmark",t.MARQUEE="marquee",t.MATH="math",t.MENU="menu",t.META="meta",t.MGLYPH="mglyph",t.MI="mi",t.MO="mo",t.MN="mn",t.MS="ms",t.MTEXT="mtext",t.NAV="nav",t.NOBR="nobr",t.NOFRAMES="noframes",t.NOEMBED="noembed",t.NOSCRIPT="noscript",t.OBJECT="object",t.OL="ol",t.OPTGROUP="optgroup",t.OPTION="option",t.P="p",t.PARAM="param",t.PLAINTEXT="plaintext",t.PRE="pre",t.RB="rb",t.RP="rp",t.RT="rt",t.RTC="rtc",t.RUBY="ruby",t.S="s",t.SCRIPT="script",t.SEARCH="search",t.SECTION="section",t.SELECT="select",t.SOURCE="source",t.SMALL="small",t.SPAN="span",t.STRIKE="strike",t.STRONG="strong",t.STYLE="style",t.SUB="sub",t.SUMMARY="summary",t.SUP="sup",t.TABLE="table",t.TBODY="tbody",t.TEMPLATE="template",t.TEXTAREA="textarea",t.TFOOT="tfoot",t.TD="td",t.TH="th",t.THEAD="thead",t.TITLE="title",t.TR="tr",t.TRACK="track",t.TT="tt",t.U="u",t.UL="ul",t.SVG="svg",t.VAR="var",t.WBR="wbr",t.XMP="xmp"})(Ve||(Ve={}));var U;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.A=1]="A",t[t.ADDRESS=2]="ADDRESS",t[t.ANNOTATION_XML=3]="ANNOTATION_XML",t[t.APPLET=4]="APPLET",t[t.AREA=5]="AREA",t[t.ARTICLE=6]="ARTICLE",t[t.ASIDE=7]="ASIDE",t[t.B=8]="B",t[t.BASE=9]="BASE",t[t.BASEFONT=10]="BASEFONT",t[t.BGSOUND=11]="BGSOUND",t[t.BIG=12]="BIG",t[t.BLOCKQUOTE=13]="BLOCKQUOTE",t[t.BODY=14]="BODY",t[t.BR=15]="BR",t[t.BUTTON=16]="BUTTON",t[t.CAPTION=17]="CAPTION",t[t.CENTER=18]="CENTER",t[t.CODE=19]="CODE",t[t.COL=20]="COL",t[t.COLGROUP=21]="COLGROUP",t[t.DD=22]="DD",t[t.DESC=23]="DESC",t[t.DETAILS=24]="DETAILS",t[t.DIALOG=25]="DIALOG",t[t.DIR=26]="DIR",t[t.DIV=27]="DIV",t[t.DL=28]="DL",t[t.DT=29]="DT",t[t.EM=30]="EM",t[t.EMBED=31]="EMBED",t[t.FIELDSET=32]="FIELDSET",t[t.FIGCAPTION=33]="FIGCAPTION",t[t.FIGURE=34]="FIGURE",t[t.FONT=35]="FONT",t[t.FOOTER=36]="FOOTER",t[t.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",t[t.FORM=38]="FORM",t[t.FRAME=39]="FRAME",t[t.FRAMESET=40]="FRAMESET",t[t.H1=41]="H1",t[t.H2=42]="H2",t[t.H3=43]="H3",t[t.H4=44]="H4",t[t.H5=45]="H5",t[t.H6=46]="H6",t[t.HEAD=47]="HEAD",t[t.HEADER=48]="HEADER",t[t.HGROUP=49]="HGROUP",t[t.HR=50]="HR",t[t.HTML=51]="HTML",t[t.I=52]="I",t[t.IMG=53]="IMG",t[t.IMAGE=54]="IMAGE",t[t.INPUT=55]="INPUT",t[t.IFRAME=56]="IFRAME",t[t.KEYGEN=57]="KEYGEN",t[t.LABEL=58]="LABEL",t[t.LI=59]="LI",t[t.LINK=60]="LINK",t[t.LISTING=61]="LISTING",t[t.MAIN=62]="MAIN",t[t.MALIGNMARK=63]="MALIGNMARK",t[t.MARQUEE=64]="MARQUEE",t[t.MATH=65]="MATH",t[t.MENU=66]="MENU",t[t.META=67]="META",t[t.MGLYPH=68]="MGLYPH",t[t.MI=69]="MI",t[t.MO=70]="MO",t[t.MN=71]="MN",t[t.MS=72]="MS",t[t.MTEXT=73]="MTEXT",t[t.NAV=74]="NAV",t[t.NOBR=75]="NOBR",t[t.NOFRAMES=76]="NOFRAMES",t[t.NOEMBED=77]="NOEMBED",t[t.NOSCRIPT=78]="NOSCRIPT",t[t.OBJECT=79]="OBJECT",t[t.OL=80]="OL",t[t.OPTGROUP=81]="OPTGROUP",t[t.OPTION=82]="OPTION",t[t.P=83]="P",t[t.PARAM=84]="PARAM",t[t.PLAINTEXT=85]="PLAINTEXT",t[t.PRE=86]="PRE",t[t.RB=87]="RB",t[t.RP=88]="RP",t[t.RT=89]="RT",t[t.RTC=90]="RTC",t[t.RUBY=91]="RUBY",t[t.S=92]="S",t[t.SCRIPT=93]="SCRIPT",t[t.SEARCH=94]="SEARCH",t[t.SECTION=95]="SECTION",t[t.SELECT=96]="SELECT",t[t.SOURCE=97]="SOURCE",t[t.SMALL=98]="SMALL",t[t.SPAN=99]="SPAN",t[t.STRIKE=100]="STRIKE",t[t.STRONG=101]="STRONG",t[t.STYLE=102]="STYLE",t[t.SUB=103]="SUB",t[t.SUMMARY=104]="SUMMARY",t[t.SUP=105]="SUP",t[t.TABLE=106]="TABLE",t[t.TBODY=107]="TBODY",t[t.TEMPLATE=108]="TEMPLATE",t[t.TEXTAREA=109]="TEXTAREA",t[t.TFOOT=110]="TFOOT",t[t.TD=111]="TD",t[t.TH=112]="TH",t[t.THEAD=113]="THEAD",t[t.TITLE=114]="TITLE",t[t.TR=115]="TR",t[t.TRACK=116]="TRACK",t[t.TT=117]="TT",t[t.U=118]="U",t[t.UL=119]="UL",t[t.SVG=120]="SVG",t[t.VAR=121]="VAR",t[t.WBR=122]="WBR",t[t.XMP=123]="XMP"})(U||(U={}));const TRe=new Map([[Ve.A,U.A],[Ve.ADDRESS,U.ADDRESS],[Ve.ANNOTATION_XML,U.ANNOTATION_XML],[Ve.APPLET,U.APPLET],[Ve.AREA,U.AREA],[Ve.ARTICLE,U.ARTICLE],[Ve.ASIDE,U.ASIDE],[Ve.B,U.B],[Ve.BASE,U.BASE],[Ve.BASEFONT,U.BASEFONT],[Ve.BGSOUND,U.BGSOUND],[Ve.BIG,U.BIG],[Ve.BLOCKQUOTE,U.BLOCKQUOTE],[Ve.BODY,U.BODY],[Ve.BR,U.BR],[Ve.BUTTON,U.BUTTON],[Ve.CAPTION,U.CAPTION],[Ve.CENTER,U.CENTER],[Ve.CODE,U.CODE],[Ve.COL,U.COL],[Ve.COLGROUP,U.COLGROUP],[Ve.DD,U.DD],[Ve.DESC,U.DESC],[Ve.DETAILS,U.DETAILS],[Ve.DIALOG,U.DIALOG],[Ve.DIR,U.DIR],[Ve.DIV,U.DIV],[Ve.DL,U.DL],[Ve.DT,U.DT],[Ve.EM,U.EM],[Ve.EMBED,U.EMBED],[Ve.FIELDSET,U.FIELDSET],[Ve.FIGCAPTION,U.FIGCAPTION],[Ve.FIGURE,U.FIGURE],[Ve.FONT,U.FONT],[Ve.FOOTER,U.FOOTER],[Ve.FOREIGN_OBJECT,U.FOREIGN_OBJECT],[Ve.FORM,U.FORM],[Ve.FRAME,U.FRAME],[Ve.FRAMESET,U.FRAMESET],[Ve.H1,U.H1],[Ve.H2,U.H2],[Ve.H3,U.H3],[Ve.H4,U.H4],[Ve.H5,U.H5],[Ve.H6,U.H6],[Ve.HEAD,U.HEAD],[Ve.HEADER,U.HEADER],[Ve.HGROUP,U.HGROUP],[Ve.HR,U.HR],[Ve.HTML,U.HTML],[Ve.I,U.I],[Ve.IMG,U.IMG],[Ve.IMAGE,U.IMAGE],[Ve.INPUT,U.INPUT],[Ve.IFRAME,U.IFRAME],[Ve.KEYGEN,U.KEYGEN],[Ve.LABEL,U.LABEL],[Ve.LI,U.LI],[Ve.LINK,U.LINK],[Ve.LISTING,U.LISTING],[Ve.MAIN,U.MAIN],[Ve.MALIGNMARK,U.MALIGNMARK],[Ve.MARQUEE,U.MARQUEE],[Ve.MATH,U.MATH],[Ve.MENU,U.MENU],[Ve.META,U.META],[Ve.MGLYPH,U.MGLYPH],[Ve.MI,U.MI],[Ve.MO,U.MO],[Ve.MN,U.MN],[Ve.MS,U.MS],[Ve.MTEXT,U.MTEXT],[Ve.NAV,U.NAV],[Ve.NOBR,U.NOBR],[Ve.NOFRAMES,U.NOFRAMES],[Ve.NOEMBED,U.NOEMBED],[Ve.NOSCRIPT,U.NOSCRIPT],[Ve.OBJECT,U.OBJECT],[Ve.OL,U.OL],[Ve.OPTGROUP,U.OPTGROUP],[Ve.OPTION,U.OPTION],[Ve.P,U.P],[Ve.PARAM,U.PARAM],[Ve.PLAINTEXT,U.PLAINTEXT],[Ve.PRE,U.PRE],[Ve.RB,U.RB],[Ve.RP,U.RP],[Ve.RT,U.RT],[Ve.RTC,U.RTC],[Ve.RUBY,U.RUBY],[Ve.S,U.S],[Ve.SCRIPT,U.SCRIPT],[Ve.SEARCH,U.SEARCH],[Ve.SECTION,U.SECTION],[Ve.SELECT,U.SELECT],[Ve.SOURCE,U.SOURCE],[Ve.SMALL,U.SMALL],[Ve.SPAN,U.SPAN],[Ve.STRIKE,U.STRIKE],[Ve.STRONG,U.STRONG],[Ve.STYLE,U.STYLE],[Ve.SUB,U.SUB],[Ve.SUMMARY,U.SUMMARY],[Ve.SUP,U.SUP],[Ve.TABLE,U.TABLE],[Ve.TBODY,U.TBODY],[Ve.TEMPLATE,U.TEMPLATE],[Ve.TEXTAREA,U.TEXTAREA],[Ve.TFOOT,U.TFOOT],[Ve.TD,U.TD],[Ve.TH,U.TH],[Ve.THEAD,U.THEAD],[Ve.TITLE,U.TITLE],[Ve.TR,U.TR],[Ve.TRACK,U.TRACK],[Ve.TT,U.TT],[Ve.U,U.U],[Ve.UL,U.UL],[Ve.SVG,U.SVG],[Ve.VAR,U.VAR],[Ve.WBR,U.WBR],[Ve.XMP,U.XMP]]);function $g(t){var e;return(e=TRe.get(t))!==null&&e!==void 0?e:U.UNKNOWN}const dt=U,NRe={[lt.HTML]:new Set([dt.ADDRESS,dt.APPLET,dt.AREA,dt.ARTICLE,dt.ASIDE,dt.BASE,dt.BASEFONT,dt.BGSOUND,dt.BLOCKQUOTE,dt.BODY,dt.BR,dt.BUTTON,dt.CAPTION,dt.CENTER,dt.COL,dt.COLGROUP,dt.DD,dt.DETAILS,dt.DIR,dt.DIV,dt.DL,dt.DT,dt.EMBED,dt.FIELDSET,dt.FIGCAPTION,dt.FIGURE,dt.FOOTER,dt.FORM,dt.FRAME,dt.FRAMESET,dt.H1,dt.H2,dt.H3,dt.H4,dt.H5,dt.H6,dt.HEAD,dt.HEADER,dt.HGROUP,dt.HR,dt.HTML,dt.IFRAME,dt.IMG,dt.INPUT,dt.LI,dt.LINK,dt.LISTING,dt.MAIN,dt.MARQUEE,dt.MENU,dt.META,dt.NAV,dt.NOEMBED,dt.NOFRAMES,dt.NOSCRIPT,dt.OBJECT,dt.OL,dt.P,dt.PARAM,dt.PLAINTEXT,dt.PRE,dt.SCRIPT,dt.SECTION,dt.SELECT,dt.SOURCE,dt.STYLE,dt.SUMMARY,dt.TABLE,dt.TBODY,dt.TD,dt.TEMPLATE,dt.TEXTAREA,dt.TFOOT,dt.TH,dt.THEAD,dt.TITLE,dt.TR,dt.TRACK,dt.UL,dt.WBR,dt.XMP]),[lt.MATHML]:new Set([dt.MI,dt.MO,dt.MN,dt.MS,dt.MTEXT,dt.ANNOTATION_XML]),[lt.SVG]:new Set([dt.TITLE,dt.FOREIGN_OBJECT,dt.DESC]),[lt.XLINK]:new Set,[lt.XML]:new Set,[lt.XMLNS]:new Set},LP=new Set([dt.H1,dt.H2,dt.H3,dt.H4,dt.H5,dt.H6]);Ve.STYLE,Ve.SCRIPT,Ve.XMP,Ve.IFRAME,Ve.NOEMBED,Ve.NOFRAMES,Ve.PLAINTEXT;var we;(function(t){t[t.DATA=0]="DATA",t[t.RCDATA=1]="RCDATA",t[t.RAWTEXT=2]="RAWTEXT",t[t.SCRIPT_DATA=3]="SCRIPT_DATA",t[t.PLAINTEXT=4]="PLAINTEXT",t[t.TAG_OPEN=5]="TAG_OPEN",t[t.END_TAG_OPEN=6]="END_TAG_OPEN",t[t.TAG_NAME=7]="TAG_NAME",t[t.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",t[t.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",t[t.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",t[t.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",t[t.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",t[t.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",t[t.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",t[t.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",t[t.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",t[t.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",t[t.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",t[t.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",t[t.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",t[t.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",t[t.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",t[t.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",t[t.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",t[t.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",t[t.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",t[t.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",t[t.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",t[t.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",t[t.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",t[t.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",t[t.BOGUS_COMMENT=40]="BOGUS_COMMENT",t[t.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",t[t.COMMENT_START=42]="COMMENT_START",t[t.COMMENT_START_DASH=43]="COMMENT_START_DASH",t[t.COMMENT=44]="COMMENT",t[t.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",t[t.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",t[t.COMMENT_END_DASH=49]="COMMENT_END_DASH",t[t.COMMENT_END=50]="COMMENT_END",t[t.COMMENT_END_BANG=51]="COMMENT_END_BANG",t[t.DOCTYPE=52]="DOCTYPE",t[t.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",t[t.DOCTYPE_NAME=54]="DOCTYPE_NAME",t[t.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",t[t.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",t[t.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",t[t.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",t[t.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",t[t.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",t[t.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",t[t.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",t[t.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",t[t.CDATA_SECTION=68]="CDATA_SECTION",t[t.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",t[t.CDATA_SECTION_END=70]="CDATA_SECTION_END",t[t.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",t[t.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(we||(we={}));const Pr={DATA:we.DATA,RCDATA:we.RCDATA,RAWTEXT:we.RAWTEXT,SCRIPT_DATA:we.SCRIPT_DATA,PLAINTEXT:we.PLAINTEXT,CDATA_SECTION:we.CDATA_SECTION};function PRe(t){return t>=be.DIGIT_0&&t<=be.DIGIT_9}function vb(t){return t>=be.LATIN_CAPITAL_A&&t<=be.LATIN_CAPITAL_Z}function IRe(t){return t>=be.LATIN_SMALL_A&&t<=be.LATIN_SMALL_Z}function ju(t){return IRe(t)||vb(t)}function e7(t){return ju(t)||PRe(t)}function Ix(t){return t+32}function Lee(t){return t===be.SPACE||t===be.LINE_FEED||t===be.TABULATION||t===be.FORM_FEED}function t7(t){return Lee(t)||t===be.SOLIDUS||t===be.GREATER_THAN_SIGN}function RRe(t){return t===be.NULL?Ze.nullCharacterReference:t>1114111?Ze.characterReferenceOutsideUnicodeRange:Cee(t)?Ze.surrogateCharacterReference:Tee(t)?Ze.noncharacterCharacterReference:Aee(t)||t===be.CARRIAGE_RETURN?Ze.controlCharacterReference:null}class LRe{constructor(e,n){this.options=e,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=we.DATA,this.returnState=we.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new yRe(n),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new Iee(Pee,(r,s)=>{this.preprocessor.pos=this.entityStartPos+s-1,this._flushCodePointConsumedAsCharacterReference(r)},n.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(Ze.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:r=>{this._err(Ze.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+r)},validateNumericCharacterReference:r=>{const s=RRe(r);s&&this._err(s,1)}}:void 0)}_err(e,n=0){var r,s;(s=(r=this.handler).onParseError)===null||s===void 0||s.call(r,this.preprocessor.getError(e,n))}getCurrentLocation(e){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-e,startOffset:this.preprocessor.offset-e,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this._callState(e)}this.inLoop=!1}}pause(){this.paused=!0}resume(e){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||e?.())}write(e,n,r){this.active=!0,this.preprocessor.write(e,n),this._runParsingLoop(),this.paused||r?.()}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(e){this.consumedAfterSnapshot+=e;for(let n=0;n<e;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(e,n){return this.preprocessor.startsWith(e,n)?(this._advanceBy(e.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:rn.START_TAG,tagName:"",tagID:U.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:rn.END_TAG,tagName:"",tagID:U.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(e){this.currentToken={type:rn.COMMENT,data:"",location:this.getCurrentLocation(e)}}_createDoctypeToken(e){this.currentToken={type:rn.DOCTYPE,name:e,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(e,n){this.currentCharacterToken={type:e,chars:n,location:this.currentLocation}}_createAttr(e){this.currentAttr={name:e,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var e,n;const r=this.currentToken;if(Nee(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const s=(e=(n=r.location).attrs)!==null&&e!==void 0?e:n.attrs=Object.create(null);s[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Ze.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(e){this._emitCurrentCharacterToken(e.location),this.currentToken=null,e.location&&(e.location.endLine=this.preprocessor.line,e.location.endCol=this.preprocessor.col+1,e.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const e=this.currentToken;this.prepareToken(e),e.tagID=$g(e.tagName),e.type===rn.START_TAG?(this.lastStartTagName=e.tagName,this.handler.onStartTag(e)):(e.attrs.length>0&&this._err(Ze.endTagWithAttributes),e.selfClosing&&this._err(Ze.endTagWithTrailingSolidus),this.handler.onEndTag(e)),this.preprocessor.dropParsedChunk()}emitCurrentComment(e){this.prepareToken(e),this.handler.onComment(e),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(e){this.prepareToken(e),this.handler.onDoctype(e),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(e){if(this.currentCharacterToken){switch(e&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=e.startLine,this.currentCharacterToken.location.endCol=e.startCol,this.currentCharacterToken.location.endOffset=e.startOffset),this.currentCharacterToken.type){case rn.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case rn.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case rn.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const e=this.getCurrentLocation(0);e&&(e.endLine=e.startLine,e.endCol=e.startCol,e.endOffset=e.startOffset),this._emitCurrentCharacterToken(e),this.handler.onEof({type:rn.EOF,location:e}),this.active=!1}_appendCharToCurrentCharacterToken(e,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type===e){this.currentCharacterToken.chars+=n;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(e,n)}_emitCodePoint(e){const n=Lee(e)?rn.WHITESPACE_CHARACTER:e===be.NULL?rn.NULL_CHARACTER:rn.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(e))}_emitChars(e){this._appendCharToCurrentCharacterToken(rn.CHARACTER,e)}_startCharacterReference(){this.returnState=this.state,this.state=we.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?Oc.Attribute:Oc.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===we.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===we.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===we.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(e){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(e):this._emitCodePoint(e)}_callState(e){switch(this.state){case we.DATA:{this._stateData(e);break}case we.RCDATA:{this._stateRcdata(e);break}case we.RAWTEXT:{this._stateRawtext(e);break}case we.SCRIPT_DATA:{this._stateScriptData(e);break}case we.PLAINTEXT:{this._statePlaintext(e);break}case we.TAG_OPEN:{this._stateTagOpen(e);break}case we.END_TAG_OPEN:{this._stateEndTagOpen(e);break}case we.TAG_NAME:{this._stateTagName(e);break}case we.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(e);break}case we.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(e);break}case we.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(e);break}case we.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(e);break}case we.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(e);break}case we.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(e);break}case we.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(e);break}case we.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(e);break}case we.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(e);break}case we.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(e);break}case we.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(e);break}case we.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(e);break}case we.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(e);break}case we.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(e);break}case we.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(e);break}case we.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(e);break}case we.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(e);break}case we.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(e);break}case we.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(e);break}case we.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(e);break}case we.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(e);break}case we.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(e);break}case we.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(e);break}case we.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(e);break}case we.ATTRIBUTE_NAME:{this._stateAttributeName(e);break}case we.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(e);break}case we.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(e);break}case we.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(e);break}case we.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(e);break}case we.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(e);break}case we.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(e);break}case we.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(e);break}case we.BOGUS_COMMENT:{this._stateBogusComment(e);break}case we.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(e);break}case we.COMMENT_START:{this._stateCommentStart(e);break}case we.COMMENT_START_DASH:{this._stateCommentStartDash(e);break}case we.COMMENT:{this._stateComment(e);break}case we.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(e);break}case we.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(e);break}case we.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(e);break}case we.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(e);break}case we.COMMENT_END_DASH:{this._stateCommentEndDash(e);break}case we.COMMENT_END:{this._stateCommentEnd(e);break}case we.COMMENT_END_BANG:{this._stateCommentEndBang(e);break}case we.DOCTYPE:{this._stateDoctype(e);break}case we.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(e);break}case we.DOCTYPE_NAME:{this._stateDoctypeName(e);break}case we.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(e);break}case we.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(e);break}case we.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(e);break}case we.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(e);break}case we.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(e);break}case we.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(e);break}case we.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(e);break}case we.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(e);break}case we.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(e);break}case we.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(e);break}case we.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(e);break}case we.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(e);break}case we.BOGUS_DOCTYPE:{this._stateBogusDoctype(e);break}case we.CDATA_SECTION:{this._stateCdataSection(e);break}case we.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(e);break}case we.CDATA_SECTION_END:{this._stateCdataSectionEnd(e);break}case we.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case we.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(e);break}default:throw new Error("Unknown state")}}_stateData(e){switch(e){case be.LESS_THAN_SIGN:{this.state=we.TAG_OPEN;break}case be.AMPERSAND:{this._startCharacterReference();break}case be.NULL:{this._err(Ze.unexpectedNullCharacter),this._emitCodePoint(e);break}case be.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRcdata(e){switch(e){case be.AMPERSAND:{this._startCharacterReference();break}case be.LESS_THAN_SIGN:{this.state=we.RCDATA_LESS_THAN_SIGN;break}case be.NULL:{this._err(Ze.unexpectedNullCharacter),this._emitChars(sr);break}case be.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRawtext(e){switch(e){case be.LESS_THAN_SIGN:{this.state=we.RAWTEXT_LESS_THAN_SIGN;break}case be.NULL:{this._err(Ze.unexpectedNullCharacter),this._emitChars(sr);break}case be.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptData(e){switch(e){case be.LESS_THAN_SIGN:{this.state=we.SCRIPT_DATA_LESS_THAN_SIGN;break}case be.NULL:{this._err(Ze.unexpectedNullCharacter),this._emitChars(sr);break}case be.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_statePlaintext(e){switch(e){case be.NULL:{this._err(Ze.unexpectedNullCharacter),this._emitChars(sr);break}case be.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateTagOpen(e){if(ju(e))this._createStartTagToken(),this.state=we.TAG_NAME,this._stateTagName(e);else switch(e){case be.EXCLAMATION_MARK:{this.state=we.MARKUP_DECLARATION_OPEN;break}case be.SOLIDUS:{this.state=we.END_TAG_OPEN;break}case be.QUESTION_MARK:{this._err(Ze.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=we.BOGUS_COMMENT,this._stateBogusComment(e);break}case be.EOF:{this._err(Ze.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Ze.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=we.DATA,this._stateData(e)}}_stateEndTagOpen(e){if(ju(e))this._createEndTagToken(),this.state=we.TAG_NAME,this._stateTagName(e);else switch(e){case be.GREATER_THAN_SIGN:{this._err(Ze.missingEndTagName),this.state=we.DATA;break}case be.EOF:{this._err(Ze.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Ze.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=we.BOGUS_COMMENT,this._stateBogusComment(e)}}_stateTagName(e){const n=this.currentToken;switch(e){case be.SPACE:case be.LINE_FEED:case be.TABULATION:case be.FORM_FEED:{this.state=we.BEFORE_ATTRIBUTE_NAME;break}case be.SOLIDUS:{this.state=we.SELF_CLOSING_START_TAG;break}case be.GREATER_THAN_SIGN:{this.state=we.DATA,this.emitCurrentTagToken();break}case be.NULL:{this._err(Ze.unexpectedNullCharacter),n.tagName+=sr;break}case be.EOF:{this._err(Ze.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(vb(e)?Ix(e):e)}}_stateRcdataLessThanSign(e){e===be.SOLIDUS?this.state=we.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=we.RCDATA,this._stateRcdata(e))}_stateRcdataEndTagOpen(e){ju(e)?(this.state=we.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(e)):(this._emitChars("</"),this.state=we.RCDATA,this._stateRcdata(e))}handleSpecialEndTag(e){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case be.SPACE:case be.LINE_FEED:case be.TABULATION:case be.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=we.BEFORE_ATTRIBUTE_NAME,!1;case be.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=we.SELF_CLOSING_START_TAG,!1;case be.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=we.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=we.RCDATA,this._stateRcdata(e))}_stateRawtextLessThanSign(e){e===be.SOLIDUS?this.state=we.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=we.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagOpen(e){ju(e)?(this.state=we.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(e)):(this._emitChars("</"),this.state=we.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=we.RAWTEXT,this._stateRawtext(e))}_stateScriptDataLessThanSign(e){switch(e){case be.SOLIDUS:{this.state=we.SCRIPT_DATA_END_TAG_OPEN;break}case be.EXCLAMATION_MARK:{this.state=we.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=we.SCRIPT_DATA,this._stateScriptData(e)}}_stateScriptDataEndTagOpen(e){ju(e)?(this.state=we.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(e)):(this._emitChars("</"),this.state=we.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=we.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStart(e){e===be.HYPHEN_MINUS?(this.state=we.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=we.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStartDash(e){e===be.HYPHEN_MINUS?(this.state=we.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=we.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscaped(e){switch(e){case be.HYPHEN_MINUS:{this.state=we.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case be.LESS_THAN_SIGN:{this.state=we.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case be.NULL:{this._err(Ze.unexpectedNullCharacter),this._emitChars(sr);break}case be.EOF:{this._err(Ze.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataEscapedDash(e){switch(e){case be.HYPHEN_MINUS:{this.state=we.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case be.LESS_THAN_SIGN:{this.state=we.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case be.NULL:{this._err(Ze.unexpectedNullCharacter),this.state=we.SCRIPT_DATA_ESCAPED,this._emitChars(sr);break}case be.EOF:{this._err(Ze.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=we.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedDashDash(e){switch(e){case be.HYPHEN_MINUS:{this._emitChars("-");break}case be.LESS_THAN_SIGN:{this.state=we.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case be.GREATER_THAN_SIGN:{this.state=we.SCRIPT_DATA,this._emitChars(">");break}case be.NULL:{this._err(Ze.unexpectedNullCharacter),this.state=we.SCRIPT_DATA_ESCAPED,this._emitChars(sr);break}case be.EOF:{this._err(Ze.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=we.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedLessThanSign(e){e===be.SOLIDUS?this.state=we.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:ju(e)?(this._emitChars("<"),this.state=we.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(e)):(this._emitChars("<"),this.state=we.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagOpen(e){ju(e)?(this.state=we.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(e)):(this._emitChars("</"),this.state=we.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=we.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscapeStart(e){if(this.preprocessor.startsWith(wi.SCRIPT,!1)&&t7(this.preprocessor.peek(wi.SCRIPT.length))){this._emitCodePoint(e);for(let n=0;n<wi.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=we.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=we.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscaped(e){switch(e){case be.HYPHEN_MINUS:{this.state=we.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case be.LESS_THAN_SIGN:{this.state=we.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case be.NULL:{this._err(Ze.unexpectedNullCharacter),this._emitChars(sr);break}case be.EOF:{this._err(Ze.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDash(e){switch(e){case be.HYPHEN_MINUS:{this.state=we.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case be.LESS_THAN_SIGN:{this.state=we.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case be.NULL:{this._err(Ze.unexpectedNullCharacter),this.state=we.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(sr);break}case be.EOF:{this._err(Ze.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=we.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDashDash(e){switch(e){case be.HYPHEN_MINUS:{this._emitChars("-");break}case be.LESS_THAN_SIGN:{this.state=we.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case be.GREATER_THAN_SIGN:{this.state=we.SCRIPT_DATA,this._emitChars(">");break}case be.NULL:{this._err(Ze.unexpectedNullCharacter),this.state=we.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(sr);break}case be.EOF:{this._err(Ze.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=we.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedLessThanSign(e){e===be.SOLIDUS?(this.state=we.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=we.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateScriptDataDoubleEscapeEnd(e){if(this.preprocessor.startsWith(wi.SCRIPT,!1)&&t7(this.preprocessor.peek(wi.SCRIPT.length))){this._emitCodePoint(e);for(let n=0;n<wi.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=we.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=we.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateBeforeAttributeName(e){switch(e){case be.SPACE:case be.LINE_FEED:case be.TABULATION:case be.FORM_FEED:break;case be.SOLIDUS:case be.GREATER_THAN_SIGN:case be.EOF:{this.state=we.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case be.EQUALS_SIGN:{this._err(Ze.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=we.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=we.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateAttributeName(e){switch(e){case be.SPACE:case be.LINE_FEED:case be.TABULATION:case be.FORM_FEED:case be.SOLIDUS:case be.GREATER_THAN_SIGN:case be.EOF:{this._leaveAttrName(),this.state=we.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case be.EQUALS_SIGN:{this._leaveAttrName(),this.state=we.BEFORE_ATTRIBUTE_VALUE;break}case be.QUOTATION_MARK:case be.APOSTROPHE:case be.LESS_THAN_SIGN:{this._err(Ze.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(e);break}case be.NULL:{this._err(Ze.unexpectedNullCharacter),this.currentAttr.name+=sr;break}default:this.currentAttr.name+=String.fromCodePoint(vb(e)?Ix(e):e)}}_stateAfterAttributeName(e){switch(e){case be.SPACE:case be.LINE_FEED:case be.TABULATION:case be.FORM_FEED:break;case be.SOLIDUS:{this.state=we.SELF_CLOSING_START_TAG;break}case be.EQUALS_SIGN:{this.state=we.BEFORE_ATTRIBUTE_VALUE;break}case be.GREATER_THAN_SIGN:{this.state=we.DATA,this.emitCurrentTagToken();break}case be.EOF:{this._err(Ze.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=we.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateBeforeAttributeValue(e){switch(e){case be.SPACE:case be.LINE_FEED:case be.TABULATION:case be.FORM_FEED:break;case be.QUOTATION_MARK:{this.state=we.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case be.APOSTROPHE:{this.state=we.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case be.GREATER_THAN_SIGN:{this._err(Ze.missingAttributeValue),this.state=we.DATA,this.emitCurrentTagToken();break}default:this.state=we.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(e)}}_stateAttributeValueDoubleQuoted(e){switch(e){case be.QUOTATION_MARK:{this.state=we.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case be.AMPERSAND:{this._startCharacterReference();break}case be.NULL:{this._err(Ze.unexpectedNullCharacter),this.currentAttr.value+=sr;break}case be.EOF:{this._err(Ze.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueSingleQuoted(e){switch(e){case be.APOSTROPHE:{this.state=we.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case be.AMPERSAND:{this._startCharacterReference();break}case be.NULL:{this._err(Ze.unexpectedNullCharacter),this.currentAttr.value+=sr;break}case be.EOF:{this._err(Ze.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueUnquoted(e){switch(e){case be.SPACE:case be.LINE_FEED:case be.TABULATION:case be.FORM_FEED:{this._leaveAttrValue(),this.state=we.BEFORE_ATTRIBUTE_NAME;break}case be.AMPERSAND:{this._startCharacterReference();break}case be.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=we.DATA,this.emitCurrentTagToken();break}case be.NULL:{this._err(Ze.unexpectedNullCharacter),this.currentAttr.value+=sr;break}case be.QUOTATION_MARK:case be.APOSTROPHE:case be.LESS_THAN_SIGN:case be.EQUALS_SIGN:case be.GRAVE_ACCENT:{this._err(Ze.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(e);break}case be.EOF:{this._err(Ze.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAfterAttributeValueQuoted(e){switch(e){case be.SPACE:case be.LINE_FEED:case be.TABULATION:case be.FORM_FEED:{this._leaveAttrValue(),this.state=we.BEFORE_ATTRIBUTE_NAME;break}case be.SOLIDUS:{this._leaveAttrValue(),this.state=we.SELF_CLOSING_START_TAG;break}case be.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=we.DATA,this.emitCurrentTagToken();break}case be.EOF:{this._err(Ze.eofInTag),this._emitEOFToken();break}default:this._err(Ze.missingWhitespaceBetweenAttributes),this.state=we.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateSelfClosingStartTag(e){switch(e){case be.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=we.DATA,this.emitCurrentTagToken();break}case be.EOF:{this._err(Ze.eofInTag),this._emitEOFToken();break}default:this._err(Ze.unexpectedSolidusInTag),this.state=we.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateBogusComment(e){const n=this.currentToken;switch(e){case be.GREATER_THAN_SIGN:{this.state=we.DATA,this.emitCurrentComment(n);break}case be.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case be.NULL:{this._err(Ze.unexpectedNullCharacter),n.data+=sr;break}default:n.data+=String.fromCodePoint(e)}}_stateMarkupDeclarationOpen(e){this._consumeSequenceIfMatch(wi.DASH_DASH,!0)?(this._createCommentToken(wi.DASH_DASH.length+1),this.state=we.COMMENT_START):this._consumeSequenceIfMatch(wi.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(wi.DOCTYPE.length+1),this.state=we.DOCTYPE):this._consumeSequenceIfMatch(wi.CDATA_START,!0)?this.inForeignNode?this.state=we.CDATA_SECTION:(this._err(Ze.cdataInHtmlContent),this._createCommentToken(wi.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=we.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Ze.incorrectlyOpenedComment),this._createCommentToken(2),this.state=we.BOGUS_COMMENT,this._stateBogusComment(e))}_stateCommentStart(e){switch(e){case be.HYPHEN_MINUS:{this.state=we.COMMENT_START_DASH;break}case be.GREATER_THAN_SIGN:{this._err(Ze.abruptClosingOfEmptyComment),this.state=we.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=we.COMMENT,this._stateComment(e)}}_stateCommentStartDash(e){const n=this.currentToken;switch(e){case be.HYPHEN_MINUS:{this.state=we.COMMENT_END;break}case be.GREATER_THAN_SIGN:{this._err(Ze.abruptClosingOfEmptyComment),this.state=we.DATA,this.emitCurrentComment(n);break}case be.EOF:{this._err(Ze.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=we.COMMENT,this._stateComment(e)}}_stateComment(e){const n=this.currentToken;switch(e){case be.HYPHEN_MINUS:{this.state=we.COMMENT_END_DASH;break}case be.LESS_THAN_SIGN:{n.data+="<",this.state=we.COMMENT_LESS_THAN_SIGN;break}case be.NULL:{this._err(Ze.unexpectedNullCharacter),n.data+=sr;break}case be.EOF:{this._err(Ze.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(e)}}_stateCommentLessThanSign(e){const n=this.currentToken;switch(e){case be.EXCLAMATION_MARK:{n.data+="!",this.state=we.COMMENT_LESS_THAN_SIGN_BANG;break}case be.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=we.COMMENT,this._stateComment(e)}}_stateCommentLessThanSignBang(e){e===be.HYPHEN_MINUS?this.state=we.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=we.COMMENT,this._stateComment(e))}_stateCommentLessThanSignBangDash(e){e===be.HYPHEN_MINUS?this.state=we.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=we.COMMENT_END_DASH,this._stateCommentEndDash(e))}_stateCommentLessThanSignBangDashDash(e){e!==be.GREATER_THAN_SIGN&&e!==be.EOF&&this._err(Ze.nestedComment),this.state=we.COMMENT_END,this._stateCommentEnd(e)}_stateCommentEndDash(e){const n=this.currentToken;switch(e){case be.HYPHEN_MINUS:{this.state=we.COMMENT_END;break}case be.EOF:{this._err(Ze.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=we.COMMENT,this._stateComment(e)}}_stateCommentEnd(e){const n=this.currentToken;switch(e){case be.GREATER_THAN_SIGN:{this.state=we.DATA,this.emitCurrentComment(n);break}case be.EXCLAMATION_MARK:{this.state=we.COMMENT_END_BANG;break}case be.HYPHEN_MINUS:{n.data+="-";break}case be.EOF:{this._err(Ze.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=we.COMMENT,this._stateComment(e)}}_stateCommentEndBang(e){const n=this.currentToken;switch(e){case be.HYPHEN_MINUS:{n.data+="--!",this.state=we.COMMENT_END_DASH;break}case be.GREATER_THAN_SIGN:{this._err(Ze.incorrectlyClosedComment),this.state=we.DATA,this.emitCurrentComment(n);break}case be.EOF:{this._err(Ze.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=we.COMMENT,this._stateComment(e)}}_stateDoctype(e){switch(e){case be.SPACE:case be.LINE_FEED:case be.TABULATION:case be.FORM_FEED:{this.state=we.BEFORE_DOCTYPE_NAME;break}case be.GREATER_THAN_SIGN:{this.state=we.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e);break}case be.EOF:{this._err(Ze.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ze.missingWhitespaceBeforeDoctypeName),this.state=we.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e)}}_stateBeforeDoctypeName(e){if(vb(e))this._createDoctypeToken(String.fromCharCode(Ix(e))),this.state=we.DOCTYPE_NAME;else switch(e){case be.SPACE:case be.LINE_FEED:case be.TABULATION:case be.FORM_FEED:break;case be.NULL:{this._err(Ze.unexpectedNullCharacter),this._createDoctypeToken(sr),this.state=we.DOCTYPE_NAME;break}case be.GREATER_THAN_SIGN:{this._err(Ze.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=we.DATA;break}case be.EOF:{this._err(Ze.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(e)),this.state=we.DOCTYPE_NAME}}_stateDoctypeName(e){const n=this.currentToken;switch(e){case be.SPACE:case be.LINE_FEED:case be.TABULATION:case be.FORM_FEED:{this.state=we.AFTER_DOCTYPE_NAME;break}case be.GREATER_THAN_SIGN:{this.state=we.DATA,this.emitCurrentDoctype(n);break}case be.NULL:{this._err(Ze.unexpectedNullCharacter),n.name+=sr;break}case be.EOF:{this._err(Ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(vb(e)?Ix(e):e)}}_stateAfterDoctypeName(e){const n=this.currentToken;switch(e){case be.SPACE:case be.LINE_FEED:case be.TABULATION:case be.FORM_FEED:break;case be.GREATER_THAN_SIGN:{this.state=we.DATA,this.emitCurrentDoctype(n);break}case be.EOF:{this._err(Ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(wi.PUBLIC,!1)?this.state=we.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(wi.SYSTEM,!1)?this.state=we.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Ze.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=we.BOGUS_DOCTYPE,this._stateBogusDoctype(e))}}_stateAfterDoctypePublicKeyword(e){const n=this.currentToken;switch(e){case be.SPACE:case be.LINE_FEED:case be.TABULATION:case be.FORM_FEED:{this.state=we.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case be.QUOTATION_MARK:{this._err(Ze.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=we.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case be.APOSTROPHE:{this._err(Ze.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=we.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case be.GREATER_THAN_SIGN:{this._err(Ze.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=we.DATA,this.emitCurrentDoctype(n);break}case be.EOF:{this._err(Ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ze.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=we.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypePublicIdentifier(e){const n=this.currentToken;switch(e){case be.SPACE:case be.LINE_FEED:case be.TABULATION:case be.FORM_FEED:break;case be.QUOTATION_MARK:{n.publicId="",this.state=we.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case be.APOSTROPHE:{n.publicId="",this.state=we.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case be.GREATER_THAN_SIGN:{this._err(Ze.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=we.DATA,this.emitCurrentDoctype(n);break}case be.EOF:{this._err(Ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ze.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=we.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypePublicIdentifierDoubleQuoted(e){const n=this.currentToken;switch(e){case be.QUOTATION_MARK:{this.state=we.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case be.NULL:{this._err(Ze.unexpectedNullCharacter),n.publicId+=sr;break}case be.GREATER_THAN_SIGN:{this._err(Ze.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=we.DATA;break}case be.EOF:{this._err(Ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(e)}}_stateDoctypePublicIdentifierSingleQuoted(e){const n=this.currentToken;switch(e){case be.APOSTROPHE:{this.state=we.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case be.NULL:{this._err(Ze.unexpectedNullCharacter),n.publicId+=sr;break}case be.GREATER_THAN_SIGN:{this._err(Ze.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=we.DATA;break}case be.EOF:{this._err(Ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(e)}}_stateAfterDoctypePublicIdentifier(e){const n=this.currentToken;switch(e){case be.SPACE:case be.LINE_FEED:case be.TABULATION:case be.FORM_FEED:{this.state=we.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case be.GREATER_THAN_SIGN:{this.state=we.DATA,this.emitCurrentDoctype(n);break}case be.QUOTATION_MARK:{this._err(Ze.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=we.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case be.APOSTROPHE:{this._err(Ze.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=we.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case be.EOF:{this._err(Ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ze.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=we.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBetweenDoctypePublicAndSystemIdentifiers(e){const n=this.currentToken;switch(e){case be.SPACE:case be.LINE_FEED:case be.TABULATION:case be.FORM_FEED:break;case be.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=we.DATA;break}case be.QUOTATION_MARK:{n.systemId="",this.state=we.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case be.APOSTROPHE:{n.systemId="",this.state=we.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case be.EOF:{this._err(Ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ze.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=we.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateAfterDoctypeSystemKeyword(e){const n=this.currentToken;switch(e){case be.SPACE:case be.LINE_FEED:case be.TABULATION:case be.FORM_FEED:{this.state=we.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case be.QUOTATION_MARK:{this._err(Ze.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=we.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case be.APOSTROPHE:{this._err(Ze.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=we.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case be.GREATER_THAN_SIGN:{this._err(Ze.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=we.DATA,this.emitCurrentDoctype(n);break}case be.EOF:{this._err(Ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ze.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=we.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypeSystemIdentifier(e){const n=this.currentToken;switch(e){case be.SPACE:case be.LINE_FEED:case be.TABULATION:case be.FORM_FEED:break;case be.QUOTATION_MARK:{n.systemId="",this.state=we.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case be.APOSTROPHE:{n.systemId="",this.state=we.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case be.GREATER_THAN_SIGN:{this._err(Ze.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=we.DATA,this.emitCurrentDoctype(n);break}case be.EOF:{this._err(Ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ze.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=we.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypeSystemIdentifierDoubleQuoted(e){const n=this.currentToken;switch(e){case be.QUOTATION_MARK:{this.state=we.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case be.NULL:{this._err(Ze.unexpectedNullCharacter),n.systemId+=sr;break}case be.GREATER_THAN_SIGN:{this._err(Ze.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=we.DATA;break}case be.EOF:{this._err(Ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(e)}}_stateDoctypeSystemIdentifierSingleQuoted(e){const n=this.currentToken;switch(e){case be.APOSTROPHE:{this.state=we.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case be.NULL:{this._err(Ze.unexpectedNullCharacter),n.systemId+=sr;break}case be.GREATER_THAN_SIGN:{this._err(Ze.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=we.DATA;break}case be.EOF:{this._err(Ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(e)}}_stateAfterDoctypeSystemIdentifier(e){const n=this.currentToken;switch(e){case be.SPACE:case be.LINE_FEED:case be.TABULATION:case be.FORM_FEED:break;case be.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=we.DATA;break}case be.EOF:{this._err(Ze.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ze.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=we.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBogusDoctype(e){const n=this.currentToken;switch(e){case be.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=we.DATA;break}case be.NULL:{this._err(Ze.unexpectedNullCharacter);break}case be.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(e){switch(e){case be.RIGHT_SQUARE_BRACKET:{this.state=we.CDATA_SECTION_BRACKET;break}case be.EOF:{this._err(Ze.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateCdataSectionBracket(e){e===be.RIGHT_SQUARE_BRACKET?this.state=we.CDATA_SECTION_END:(this._emitChars("]"),this.state=we.CDATA_SECTION,this._stateCdataSection(e))}_stateCdataSectionEnd(e){switch(e){case be.GREATER_THAN_SIGN:{this.state=we.DATA;break}case be.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=we.CDATA_SECTION,this._stateCdataSection(e)}}_stateCharacterReference(){let e=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(e<0)if(this.preprocessor.lastChunkWritten)e=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}e===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(be.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&e7(this.preprocessor.peek(1))?we.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(e){e7(e)?this._flushCodePointConsumedAsCharacterReference(e):(e===be.SEMICOLON&&this._err(Ze.unknownNamedCharacterReference),this.state=this.returnState,this._callState(e))}}const Oee=new Set([U.DD,U.DT,U.LI,U.OPTGROUP,U.OPTION,U.P,U.RB,U.RP,U.RT,U.RTC]),n7=new Set([...Oee,U.CAPTION,U.COLGROUP,U.TBODY,U.TD,U.TFOOT,U.TH,U.THEAD,U.TR]),HE=new Set([U.APPLET,U.CAPTION,U.HTML,U.MARQUEE,U.OBJECT,U.TABLE,U.TD,U.TEMPLATE,U.TH]),ORe=new Set([...HE,U.OL,U.UL]),DRe=new Set([...HE,U.BUTTON]),r7=new Set([U.ANNOTATION_XML,U.MI,U.MN,U.MO,U.MS,U.MTEXT]),s7=new Set([U.DESC,U.FOREIGN_OBJECT,U.TITLE]),MRe=new Set([U.TR,U.TEMPLATE,U.HTML]),jRe=new Set([U.TBODY,U.TFOOT,U.THEAD,U.TEMPLATE,U.HTML]),FRe=new Set([U.TABLE,U.TEMPLATE,U.HTML]),BRe=new Set([U.TD,U.TH]);class URe{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(e,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=U.UNKNOWN,this.current=e}_indexOf(e){return this.items.lastIndexOf(e,this.stackTop)}_isInTemplate(){return this.currentTagId===U.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===lt.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(e,n){this.stackTop++,this.items[this.stackTop]=e,this.current=e,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(e,n,!0)}pop(){const e=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!0)}replace(e,n){const r=this._indexOf(e);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(e,n,r){const s=this._indexOf(e)+1;this.items.splice(s,0,n),this.tagIDs.splice(s,0,r),this.stackTop++,s===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,s===this.stackTop)}popUntilTagNamePopped(e){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(e,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==lt.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(e){for(;this.stackTop>=e;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<e)}}popUntilElementPopped(e){const n=this._indexOf(e);this.shortenToLength(n<0?0:n)}popUntilPopped(e,n){const r=this._indexOfTagNames(e,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(LP,lt.HTML)}popUntilTableCellPopped(){this.popUntilPopped(BRe,lt.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(e,n){for(let r=this.stackTop;r>=0;r--)if(e.has(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(e,n){const r=this._indexOfTagNames(e,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(FRe,lt.HTML)}clearBackToTableBodyContext(){this.clearBackTo(jRe,lt.HTML)}clearBackToTableRowContext(){this.clearBackTo(MRe,lt.HTML)}remove(e){const n=this._indexOf(e);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===U.BODY?this.items[1]:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){const n=this._indexOf(e)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===U.HTML}hasInDynamicScope(e,n){for(let r=this.stackTop;r>=0;r--){const s=this.tagIDs[r];switch(this.treeAdapter.getNamespaceURI(this.items[r])){case lt.HTML:{if(s===e)return!0;if(n.has(s))return!1;break}case lt.SVG:{if(s7.has(s))return!1;break}case lt.MATHML:{if(r7.has(s))return!1;break}}}return!0}hasInScope(e){return this.hasInDynamicScope(e,HE)}hasInListItemScope(e){return this.hasInDynamicScope(e,ORe)}hasInButtonScope(e){return this.hasInDynamicScope(e,DRe)}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const n=this.tagIDs[e];switch(this.treeAdapter.getNamespaceURI(this.items[e])){case lt.HTML:{if(LP.has(n))return!0;if(HE.has(n))return!1;break}case lt.SVG:{if(s7.has(n))return!1;break}case lt.MATHML:{if(r7.has(n))return!1;break}}}return!0}hasInTableScope(e){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===lt.HTML)switch(this.tagIDs[n]){case e:return!0;case U.TABLE:case U.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--)if(this.treeAdapter.getNamespaceURI(this.items[e])===lt.HTML)switch(this.tagIDs[e]){case U.TBODY:case U.THEAD:case U.TFOOT:return!0;case U.TABLE:case U.HTML:return!1}return!0}hasInSelectScope(e){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===lt.HTML)switch(this.tagIDs[n]){case e:return!0;case U.OPTION:case U.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;Oee.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;n7.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;this.currentTagId!==e&&n7.has(this.currentTagId);)this.pop()}}const ZT=3;var yl;(function(t){t[t.Marker=0]="Marker",t[t.Element=1]="Element"})(yl||(yl={}));const i7={type:yl.Marker};class $Re{constructor(e){this.treeAdapter=e,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(e,n){const r=[],s=n.length,i=this.treeAdapter.getTagName(e),o=this.treeAdapter.getNamespaceURI(e);for(let a=0;a<this.entries.length;a++){const l=this.entries[a];if(l.type===yl.Marker)break;const{element:c}=l;if(this.treeAdapter.getTagName(c)===i&&this.treeAdapter.getNamespaceURI(c)===o){const u=this.treeAdapter.getAttrList(c);u.length===s&&r.push({idx:a,attrs:u})}}return r}_ensureNoahArkCondition(e){if(this.entries.length<ZT)return;const n=this.treeAdapter.getAttrList(e),r=this._getNoahArkConditionCandidates(e,n);if(r.length<ZT)return;const s=new Map(n.map(o=>[o.name,o.value]));let i=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(l=>s.get(l.name)===l.value)&&(i+=1,i>=ZT&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(i7)}pushElement(e,n){this._ensureNoahArkCondition(e),this.entries.unshift({type:yl.Element,element:e,token:n})}insertElementAfterBookmark(e,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:yl.Element,element:e,token:n})}removeEntry(e){const n=this.entries.indexOf(e);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const e=this.entries.indexOf(i7);e>=0?this.entries.splice(0,e+1):this.entries.length=0}getElementEntryInScopeWithTagName(e){const n=this.entries.find(r=>r.type===yl.Marker||this.treeAdapter.getTagName(r.element)===e);return n&&n.type===yl.Element?n:null}getElementEntry(e){return this.entries.find(n=>n.type===yl.Element&&n.element===e)}}const Fu={createDocument(){return{nodeName:"#document",mode:To.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(t,e,n){return{nodeName:t,tagName:t,attrs:n,namespaceURI:e,childNodes:[],parentNode:null}},createCommentNode(t){return{nodeName:"#comment",data:t,parentNode:null}},createTextNode(t){return{nodeName:"#text",value:t,parentNode:null}},appendChild(t,e){t.childNodes.push(e),e.parentNode=t},insertBefore(t,e,n){const r=t.childNodes.indexOf(n);t.childNodes.splice(r,0,e),e.parentNode=t},setTemplateContent(t,e){t.content=e},getTemplateContent(t){return t.content},setDocumentType(t,e,n,r){const s=t.childNodes.find(i=>i.nodeName==="#documentType");if(s)s.name=e,s.publicId=n,s.systemId=r;else{const i={nodeName:"#documentType",name:e,publicId:n,systemId:r,parentNode:null};Fu.appendChild(t,i)}},setDocumentMode(t,e){t.mode=e},getDocumentMode(t){return t.mode},detachNode(t){if(t.parentNode){const e=t.parentNode.childNodes.indexOf(t);t.parentNode.childNodes.splice(e,1),t.parentNode=null}},insertText(t,e){if(t.childNodes.length>0){const n=t.childNodes[t.childNodes.length-1];if(Fu.isTextNode(n)){n.value+=e;return}}Fu.appendChild(t,Fu.createTextNode(e))},insertTextBefore(t,e,n){const r=t.childNodes[t.childNodes.indexOf(n)-1];r&&Fu.isTextNode(r)?r.value+=e:Fu.insertBefore(t,Fu.createTextNode(e),n)},adoptAttributes(t,e){const n=new Set(t.attrs.map(r=>r.name));for(let r=0;r<e.length;r++)n.has(e[r].name)||t.attrs.push(e[r])},getFirstChild(t){return t.childNodes[0]},getChildNodes(t){return t.childNodes},getParentNode(t){return t.parentNode},getAttrList(t){return t.attrs},getTagName(t){return t.tagName},getNamespaceURI(t){return t.namespaceURI},getTextNodeContent(t){return t.value},getCommentNodeContent(t){return t.data},getDocumentTypeNodeName(t){return t.name},getDocumentTypeNodePublicId(t){return t.publicId},getDocumentTypeNodeSystemId(t){return t.systemId},isTextNode(t){return t.nodeName==="#text"},isCommentNode(t){return t.nodeName==="#comment"},isDocumentTypeNode(t){return t.nodeName==="#documentType"},isElementNode(t){return Object.prototype.hasOwnProperty.call(t,"tagName")},setNodeSourceCodeLocation(t,e){t.sourceCodeLocation=e},getNodeSourceCodeLocation(t){return t.sourceCodeLocation},updateNodeSourceCodeLocation(t,e){t.sourceCodeLocation={...t.sourceCodeLocation,...e}}},Dee="html",HRe="about:legacy-compat",zRe="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",Mee=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],VRe=[...Mee,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],WRe=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),jee=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],GRe=[...jee,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function o7(t,e){return e.some(n=>t.startsWith(n))}function qRe(t){return t.name===Dee&&t.publicId===null&&(t.systemId===null||t.systemId===HRe)}function KRe(t){if(t.name!==Dee)return To.QUIRKS;const{systemId:e}=t;if(e&&e.toLowerCase()===zRe)return To.QUIRKS;let{publicId:n}=t;if(n!==null){if(n=n.toLowerCase(),WRe.has(n))return To.QUIRKS;let r=e===null?VRe:Mee;if(o7(n,r))return To.QUIRKS;if(r=e===null?jee:GRe,o7(n,r))return To.LIMITED_QUIRKS}return To.NO_QUIRKS}const a7={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},YRe="definitionurl",XRe="definitionURL",JRe=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(t=>[t.toLowerCase(),t])),ZRe=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:lt.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:lt.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:lt.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:lt.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:lt.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:lt.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:lt.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:lt.XML}],["xml:space",{prefix:"xml",name:"space",namespace:lt.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:lt.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:lt.XMLNS}]]),QRe=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(t=>[t.toLowerCase(),t])),eLe=new Set([U.B,U.BIG,U.BLOCKQUOTE,U.BODY,U.BR,U.CENTER,U.CODE,U.DD,U.DIV,U.DL,U.DT,U.EM,U.EMBED,U.H1,U.H2,U.H3,U.H4,U.H5,U.H6,U.HEAD,U.HR,U.I,U.IMG,U.LI,U.LISTING,U.MENU,U.META,U.NOBR,U.OL,U.P,U.PRE,U.RUBY,U.S,U.SMALL,U.SPAN,U.STRONG,U.STRIKE,U.SUB,U.SUP,U.TABLE,U.TT,U.U,U.UL,U.VAR]);function tLe(t){const e=t.tagID;return e===U.FONT&&t.attrs.some(({name:r})=>r===tf.COLOR||r===tf.SIZE||r===tf.FACE)||eLe.has(e)}function Fee(t){for(let e=0;e<t.attrs.length;e++)if(t.attrs[e].name===YRe){t.attrs[e].name=XRe;break}}function Bee(t){for(let e=0;e<t.attrs.length;e++){const n=JRe.get(t.attrs[e].name);n!=null&&(t.attrs[e].name=n)}}function LO(t){for(let e=0;e<t.attrs.length;e++){const n=ZRe.get(t.attrs[e].name);n&&(t.attrs[e].prefix=n.prefix,t.attrs[e].name=n.name,t.attrs[e].namespace=n.namespace)}}function nLe(t){const e=QRe.get(t.tagName);e!=null&&(t.tagName=e,t.tagID=$g(t.tagName))}function rLe(t,e){return e===lt.MATHML&&(t===U.MI||t===U.MO||t===U.MN||t===U.MS||t===U.MTEXT)}function sLe(t,e,n){if(e===lt.MATHML&&t===U.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===tf.ENCODING){const s=n[r].value.toLowerCase();return s===a7.TEXT_HTML||s===a7.APPLICATION_XML}}return e===lt.SVG&&(t===U.FOREIGN_OBJECT||t===U.DESC||t===U.TITLE)}function iLe(t,e,n,r){return(!r||r===lt.HTML)&&sLe(t,e,n)||(!r||r===lt.MATHML)&&rLe(t,e)}const oLe="hidden",aLe=8,lLe=3;var Ne;(function(t){t[t.INITIAL=0]="INITIAL",t[t.BEFORE_HTML=1]="BEFORE_HTML",t[t.BEFORE_HEAD=2]="BEFORE_HEAD",t[t.IN_HEAD=3]="IN_HEAD",t[t.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",t[t.AFTER_HEAD=5]="AFTER_HEAD",t[t.IN_BODY=6]="IN_BODY",t[t.TEXT=7]="TEXT",t[t.IN_TABLE=8]="IN_TABLE",t[t.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",t[t.IN_CAPTION=10]="IN_CAPTION",t[t.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",t[t.IN_TABLE_BODY=12]="IN_TABLE_BODY",t[t.IN_ROW=13]="IN_ROW",t[t.IN_CELL=14]="IN_CELL",t[t.IN_SELECT=15]="IN_SELECT",t[t.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",t[t.IN_TEMPLATE=17]="IN_TEMPLATE",t[t.AFTER_BODY=18]="AFTER_BODY",t[t.IN_FRAMESET=19]="IN_FRAMESET",t[t.AFTER_FRAMESET=20]="AFTER_FRAMESET",t[t.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",t[t.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(Ne||(Ne={}));const cLe={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},Uee=new Set([U.TABLE,U.TBODY,U.TFOOT,U.THEAD,U.TR]),l7={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:Fu,onParseError:null};let c7=class{constructor(e,n,r=null,s=null){this.fragmentContext=r,this.scriptHandler=s,this.currentToken=null,this.stopped=!1,this.insertionMode=Ne.INITIAL,this.originalInsertionMode=Ne.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...l7,...e},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new LRe(this.options,this),this.activeFormattingElements=new $Re(this.treeAdapter),this.fragmentContextID=r?$g(this.treeAdapter.getTagName(r)):U.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new URe(this.document,this.treeAdapter,this)}static parse(e,n){const r=new this(n);return r.tokenizer.write(e,!0),r.document}static getFragmentParser(e,n){const r={...l7,...n};e??(e=r.treeAdapter.createElement(Ve.TEMPLATE,lt.HTML,[]));const s=r.treeAdapter.createElement("documentmock",lt.HTML,[]),i=new this(r,s,e);return i.fragmentContextID===U.TEMPLATE&&i.tmplInsertionModeStack.unshift(Ne.IN_TEMPLATE),i._initTokenizerForFragmentParsing(),i._insertFakeRootElement(),i._resetInsertionMode(),i._findFormInFragmentContext(),i}getFragment(){const e=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,n),n}_err(e,n,r){var s;if(!this.onParseError)return;const i=(s=e.location)!==null&&s!==void 0?s:cLe,o={code:n,startLine:i.startLine,startCol:i.startCol,startOffset:i.startOffset,endLine:r?i.startLine:i.endLine,endCol:r?i.startCol:i.endCol,endOffset:r?i.startOffset:i.endOffset};this.onParseError(o)}onItemPush(e,n,r){var s,i;(i=(s=this.treeAdapter).onItemPush)===null||i===void 0||i.call(s,e),r&&this.openElements.stackTop>0&&this._setContextModes(e,n)}onItemPop(e,n){var r,s;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),(s=(r=this.treeAdapter).onItemPop)===null||s===void 0||s.call(r,e,this.openElements.current),n){let i,o;this.openElements.stackTop===0&&this.fragmentContext?(i=this.fragmentContext,o=this.fragmentContextID):{current:i,currentTagId:o}=this.openElements,this._setContextModes(i,o)}}_setContextModes(e,n){const r=e===this.document||this.treeAdapter.getNamespaceURI(e)===lt.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,e)}_switchToTextParsing(e,n){this._insertElement(e,lt.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=Ne.TEXT}switchToPlaintextParsing(){this.insertionMode=Ne.TEXT,this.originalInsertionMode=Ne.IN_BODY,this.tokenizer.state=Pr.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;for(;e;){if(this.treeAdapter.getTagName(e)===Ve.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==lt.HTML))switch(this.fragmentContextID){case U.TITLE:case U.TEXTAREA:{this.tokenizer.state=Pr.RCDATA;break}case U.STYLE:case U.XMP:case U.IFRAME:case U.NOEMBED:case U.NOFRAMES:case U.NOSCRIPT:{this.tokenizer.state=Pr.RAWTEXT;break}case U.SCRIPT:{this.tokenizer.state=Pr.SCRIPT_DATA;break}case U.PLAINTEXT:{this.tokenizer.state=Pr.PLAINTEXT;break}}}_setDocumentType(e){const n=e.name||"",r=e.publicId||"",s=e.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,s),e.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,e.location)}}_attachElementToTree(e,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(e,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,e)}}_appendElement(e,n){const r=this.treeAdapter.createElement(e.tagName,n,e.attrs);this._attachElementToTree(r,e.location)}_insertElement(e,n){const r=this.treeAdapter.createElement(e.tagName,n,e.attrs);this._attachElementToTree(r,e.location),this.openElements.push(r,e.tagID)}_insertFakeElement(e,n){const r=this.treeAdapter.createElement(e,lt.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(e){const n=this.treeAdapter.createElement(e.tagName,lt.HTML,e.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,e.location),this.openElements.push(n,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const e=this.treeAdapter.createElement(Ve.HTML,lt.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,U.HTML)}_appendCommentNode(e,n){const r=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,e.location)}_insertCharacters(e){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,e.chars,r):this.treeAdapter.insertText(n,e.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,e.chars)),!e.location)return;const s=this.treeAdapter.getChildNodes(n),i=r?s.lastIndexOf(r):s.length,o=s[i-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:l,endCol:c,endOffset:u}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:l,endCol:c,endOffset:u})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,e.location)}_adoptNodes(e,n){for(let r=this.treeAdapter.getFirstChild(e);r;r=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(e,n){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&n.location){const r=n.location,s=this.treeAdapter.getTagName(e),i=n.type===rn.END_TAG&&s===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,i)}}shouldProcessStartTagTokenInForeignContent(e){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,e.tagID===U.SVG&&this.treeAdapter.getTagName(n)===Ve.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===lt.MATHML?!1:this.tokenizer.inForeignNode||(e.tagID===U.MGLYPH||e.tagID===U.MALIGNMARK)&&!this._isIntegrationPoint(r,n,lt.HTML)}_processToken(e){switch(e.type){case rn.CHARACTER:{this.onCharacter(e);break}case rn.NULL_CHARACTER:{this.onNullCharacter(e);break}case rn.COMMENT:{this.onComment(e);break}case rn.DOCTYPE:{this.onDoctype(e);break}case rn.START_TAG:{this._processStartTag(e);break}case rn.END_TAG:{this.onEndTag(e);break}case rn.EOF:{this.onEof(e);break}case rn.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(e);break}}}_isIntegrationPoint(e,n,r){const s=this.treeAdapter.getNamespaceURI(n),i=this.treeAdapter.getAttrList(n);return iLe(e,s,i,r)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.entries.length;if(e){const n=this.activeFormattingElements.entries.findIndex(s=>s.type===yl.Marker||this.openElements.contains(s.element)),r=n<0?e-1:n-1;for(let s=r;s>=0;s--){const i=this.activeFormattingElements.entries[s];this._insertElement(i.token,this.treeAdapter.getNamespaceURI(i.element)),i.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=Ne.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(U.P),this.openElements.popUntilTagNamePopped(U.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop;e>=0;e--)switch(e===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case U.TR:{this.insertionMode=Ne.IN_ROW;return}case U.TBODY:case U.THEAD:case U.TFOOT:{this.insertionMode=Ne.IN_TABLE_BODY;return}case U.CAPTION:{this.insertionMode=Ne.IN_CAPTION;return}case U.COLGROUP:{this.insertionMode=Ne.IN_COLUMN_GROUP;return}case U.TABLE:{this.insertionMode=Ne.IN_TABLE;return}case U.BODY:{this.insertionMode=Ne.IN_BODY;return}case U.FRAMESET:{this.insertionMode=Ne.IN_FRAMESET;return}case U.SELECT:{this._resetInsertionModeForSelect(e);return}case U.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case U.HTML:{this.insertionMode=this.headElement?Ne.AFTER_HEAD:Ne.BEFORE_HEAD;return}case U.TD:case U.TH:{if(e>0){this.insertionMode=Ne.IN_CELL;return}break}case U.HEAD:{if(e>0){this.insertionMode=Ne.IN_HEAD;return}break}}this.insertionMode=Ne.IN_BODY}_resetInsertionModeForSelect(e){if(e>0)for(let n=e-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===U.TEMPLATE)break;if(r===U.TABLE){this.insertionMode=Ne.IN_SELECT_IN_TABLE;return}}this.insertionMode=Ne.IN_SELECT}_isElementCausesFosterParenting(e){return Uee.has(e)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let e=this.openElements.stackTop;e>=0;e--){const n=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case U.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===lt.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case U.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[e-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(e){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,e,n.beforeElement):this.treeAdapter.appendChild(n.parent,e)}_isSpecialElement(e,n){const r=this.treeAdapter.getNamespaceURI(e);return NRe[r].has(n)}onCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){BOe(this,e);return}switch(this.insertionMode){case Ne.INITIAL:{U0(this,e);break}case Ne.BEFORE_HTML:{ry(this,e);break}case Ne.BEFORE_HEAD:{sy(this,e);break}case Ne.IN_HEAD:{iy(this,e);break}case Ne.IN_HEAD_NO_SCRIPT:{oy(this,e);break}case Ne.AFTER_HEAD:{ay(this,e);break}case Ne.IN_BODY:case Ne.IN_CAPTION:case Ne.IN_CELL:case Ne.IN_TEMPLATE:{Hee(this,e);break}case Ne.TEXT:case Ne.IN_SELECT:case Ne.IN_SELECT_IN_TABLE:{this._insertCharacters(e);break}case Ne.IN_TABLE:case Ne.IN_TABLE_BODY:case Ne.IN_ROW:{QT(this,e);break}case Ne.IN_TABLE_TEXT:{Kee(this,e);break}case Ne.IN_COLUMN_GROUP:{zE(this,e);break}case Ne.AFTER_BODY:{VE(this,e);break}case Ne.AFTER_AFTER_BODY:{o2(this,e);break}}}onNullCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){FOe(this,e);return}switch(this.insertionMode){case Ne.INITIAL:{U0(this,e);break}case Ne.BEFORE_HTML:{ry(this,e);break}case Ne.BEFORE_HEAD:{sy(this,e);break}case Ne.IN_HEAD:{iy(this,e);break}case Ne.IN_HEAD_NO_SCRIPT:{oy(this,e);break}case Ne.AFTER_HEAD:{ay(this,e);break}case Ne.TEXT:{this._insertCharacters(e);break}case Ne.IN_TABLE:case Ne.IN_TABLE_BODY:case Ne.IN_ROW:{QT(this,e);break}case Ne.IN_COLUMN_GROUP:{zE(this,e);break}case Ne.AFTER_BODY:{VE(this,e);break}case Ne.AFTER_AFTER_BODY:{o2(this,e);break}}}onComment(e){if(this.skipNextNewLine=!1,this.currentNotInHTML){OP(this,e);return}switch(this.insertionMode){case Ne.INITIAL:case Ne.BEFORE_HTML:case Ne.BEFORE_HEAD:case Ne.IN_HEAD:case Ne.IN_HEAD_NO_SCRIPT:case Ne.AFTER_HEAD:case Ne.IN_BODY:case Ne.IN_TABLE:case Ne.IN_CAPTION:case Ne.IN_COLUMN_GROUP:case Ne.IN_TABLE_BODY:case Ne.IN_ROW:case Ne.IN_CELL:case Ne.IN_SELECT:case Ne.IN_SELECT_IN_TABLE:case Ne.IN_TEMPLATE:case Ne.IN_FRAMESET:case Ne.AFTER_FRAMESET:{OP(this,e);break}case Ne.IN_TABLE_TEXT:{$0(this,e);break}case Ne.AFTER_BODY:{gLe(this,e);break}case Ne.AFTER_AFTER_BODY:case Ne.AFTER_AFTER_FRAMESET:{bLe(this,e);break}}}onDoctype(e){switch(this.skipNextNewLine=!1,this.insertionMode){case Ne.INITIAL:{yLe(this,e);break}case Ne.BEFORE_HEAD:case Ne.IN_HEAD:case Ne.IN_HEAD_NO_SCRIPT:case Ne.AFTER_HEAD:{this._err(e,Ze.misplacedDoctype);break}case Ne.IN_TABLE_TEXT:{$0(this,e);break}}}onStartTag(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,Ze.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(e){this.shouldProcessStartTagTokenInForeignContent(e)?UOe(this,e):this._startTagOutsideForeignContent(e)}_startTagOutsideForeignContent(e){switch(this.insertionMode){case Ne.INITIAL:{U0(this,e);break}case Ne.BEFORE_HTML:{vLe(this,e);break}case Ne.BEFORE_HEAD:{xLe(this,e);break}case Ne.IN_HEAD:{Da(this,e);break}case Ne.IN_HEAD_NO_SCRIPT:{SLe(this,e);break}case Ne.AFTER_HEAD:{CLe(this,e);break}case Ne.IN_BODY:{Ws(this,e);break}case Ne.IN_TABLE:{ag(this,e);break}case Ne.IN_TABLE_TEXT:{$0(this,e);break}case Ne.IN_CAPTION:{wOe(this,e);break}case Ne.IN_COLUMN_GROUP:{MO(this,e);break}case Ne.IN_TABLE_BODY:{Kk(this,e);break}case Ne.IN_ROW:{Yk(this,e);break}case Ne.IN_CELL:{kOe(this,e);break}case Ne.IN_SELECT:{Jee(this,e);break}case Ne.IN_SELECT_IN_TABLE:{AOe(this,e);break}case Ne.IN_TEMPLATE:{NOe(this,e);break}case Ne.AFTER_BODY:{IOe(this,e);break}case Ne.IN_FRAMESET:{ROe(this,e);break}case Ne.AFTER_FRAMESET:{OOe(this,e);break}case Ne.AFTER_AFTER_BODY:{MOe(this,e);break}case Ne.AFTER_AFTER_FRAMESET:{jOe(this,e);break}}}onEndTag(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?$Oe(this,e):this._endTagOutsideForeignContent(e)}_endTagOutsideForeignContent(e){switch(this.insertionMode){case Ne.INITIAL:{U0(this,e);break}case Ne.BEFORE_HTML:{_Le(this,e);break}case Ne.BEFORE_HEAD:{wLe(this,e);break}case Ne.IN_HEAD:{ELe(this,e);break}case Ne.IN_HEAD_NO_SCRIPT:{kLe(this,e);break}case Ne.AFTER_HEAD:{ALe(this,e);break}case Ne.IN_BODY:{qk(this,e);break}case Ne.TEXT:{hOe(this,e);break}case Ne.IN_TABLE:{h1(this,e);break}case Ne.IN_TABLE_TEXT:{$0(this,e);break}case Ne.IN_CAPTION:{EOe(this,e);break}case Ne.IN_COLUMN_GROUP:{SOe(this,e);break}case Ne.IN_TABLE_BODY:{DP(this,e);break}case Ne.IN_ROW:{Xee(this,e);break}case Ne.IN_CELL:{COe(this,e);break}case Ne.IN_SELECT:{Zee(this,e);break}case Ne.IN_SELECT_IN_TABLE:{TOe(this,e);break}case Ne.IN_TEMPLATE:{POe(this,e);break}case Ne.AFTER_BODY:{ete(this,e);break}case Ne.IN_FRAMESET:{LOe(this,e);break}case Ne.AFTER_FRAMESET:{DOe(this,e);break}case Ne.AFTER_AFTER_BODY:{o2(this,e);break}}}onEof(e){switch(this.insertionMode){case Ne.INITIAL:{U0(this,e);break}case Ne.BEFORE_HTML:{ry(this,e);break}case Ne.BEFORE_HEAD:{sy(this,e);break}case Ne.IN_HEAD:{iy(this,e);break}case Ne.IN_HEAD_NO_SCRIPT:{oy(this,e);break}case Ne.AFTER_HEAD:{ay(this,e);break}case Ne.IN_BODY:case Ne.IN_TABLE:case Ne.IN_CAPTION:case Ne.IN_COLUMN_GROUP:case Ne.IN_TABLE_BODY:case Ne.IN_ROW:case Ne.IN_CELL:case Ne.IN_SELECT:case Ne.IN_SELECT_IN_TABLE:{Gee(this,e);break}case Ne.TEXT:{fOe(this,e);break}case Ne.IN_TABLE_TEXT:{$0(this,e);break}case Ne.IN_TEMPLATE:{Qee(this,e);break}case Ne.AFTER_BODY:case Ne.IN_FRAMESET:case Ne.AFTER_FRAMESET:case Ne.AFTER_AFTER_BODY:case Ne.AFTER_AFTER_FRAMESET:{DO(this,e);break}}}onWhitespaceCharacter(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===be.LINE_FEED)){if(e.chars.length===1)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(e);return}switch(this.insertionMode){case Ne.IN_HEAD:case Ne.IN_HEAD_NO_SCRIPT:case Ne.AFTER_HEAD:case Ne.TEXT:case Ne.IN_COLUMN_GROUP:case Ne.IN_SELECT:case Ne.IN_SELECT_IN_TABLE:case Ne.IN_FRAMESET:case Ne.AFTER_FRAMESET:{this._insertCharacters(e);break}case Ne.IN_BODY:case Ne.IN_CAPTION:case Ne.IN_CELL:case Ne.IN_TEMPLATE:case Ne.AFTER_BODY:case Ne.AFTER_AFTER_BODY:case Ne.AFTER_AFTER_FRAMESET:{$ee(this,e);break}case Ne.IN_TABLE:case Ne.IN_TABLE_BODY:case Ne.IN_ROW:{QT(this,e);break}case Ne.IN_TABLE_TEXT:{qee(this,e);break}}}};function uLe(t,e){let n=t.activeFormattingElements.getElementEntryInScopeWithTagName(e.tagName);return n?t.openElements.contains(n.element)?t.openElements.hasInScope(e.tagID)||(n=null):(t.activeFormattingElements.removeEntry(n),n=null):Wee(t,e),n}function dLe(t,e){let n=null,r=t.openElements.stackTop;for(;r>=0;r--){const s=t.openElements.items[r];if(s===e.element)break;t._isSpecialElement(s,t.openElements.tagIDs[r])&&(n=s)}return n||(t.openElements.shortenToLength(r<0?0:r),t.activeFormattingElements.removeEntry(e)),n}function hLe(t,e,n){let r=e,s=t.openElements.getCommonAncestor(e);for(let i=0,o=s;o!==n;i++,o=s){s=t.openElements.getCommonAncestor(o);const a=t.activeFormattingElements.getElementEntry(o),l=a&&i>=lLe;!a||l?(l&&t.activeFormattingElements.removeEntry(a),t.openElements.remove(o)):(o=fLe(t,a),r===e&&(t.activeFormattingElements.bookmark=a),t.treeAdapter.detachNode(r),t.treeAdapter.appendChild(o,r),r=o)}return r}function fLe(t,e){const n=t.treeAdapter.getNamespaceURI(e.element),r=t.treeAdapter.createElement(e.token.tagName,n,e.token.attrs);return t.openElements.replace(e.element,r),e.element=r,r}function pLe(t,e,n){const r=t.treeAdapter.getTagName(e),s=$g(r);if(t._isElementCausesFosterParenting(s))t._fosterParentElement(n);else{const i=t.treeAdapter.getNamespaceURI(e);s===U.TEMPLATE&&i===lt.HTML&&(e=t.treeAdapter.getTemplateContent(e)),t.treeAdapter.appendChild(e,n)}}function mLe(t,e,n){const r=t.treeAdapter.getNamespaceURI(n.element),{token:s}=n,i=t.treeAdapter.createElement(s.tagName,r,s.attrs);t._adoptNodes(e,i),t.treeAdapter.appendChild(e,i),t.activeFormattingElements.insertElementAfterBookmark(i,s),t.activeFormattingElements.removeEntry(n),t.openElements.remove(n.element),t.openElements.insertAfter(e,i,s.tagID)}function OO(t,e){for(let n=0;n<aLe;n++){const r=uLe(t,e);if(!r)break;const s=dLe(t,r);if(!s)break;t.activeFormattingElements.bookmark=r;const i=hLe(t,s,r.element),o=t.openElements.getCommonAncestor(r.element);t.treeAdapter.detachNode(i),o&&pLe(t,o,i),mLe(t,s,r)}}function OP(t,e){t._appendCommentNode(e,t.openElements.currentTmplContentOrNode)}function gLe(t,e){t._appendCommentNode(e,t.openElements.items[0])}function bLe(t,e){t._appendCommentNode(e,t.document)}function DO(t,e){if(t.stopped=!0,e.location){const n=t.fragmentContext?0:2;for(let r=t.openElements.stackTop;r>=n;r--)t._setEndLocation(t.openElements.items[r],e);if(!t.fragmentContext&&t.openElements.stackTop>=0){const r=t.openElements.items[0],s=t.treeAdapter.getNodeSourceCodeLocation(r);if(s&&!s.endTag&&(t._setEndLocation(r,e),t.openElements.stackTop>=1)){const i=t.openElements.items[1],o=t.treeAdapter.getNodeSourceCodeLocation(i);o&&!o.endTag&&t._setEndLocation(i,e)}}}}function yLe(t,e){t._setDocumentType(e);const n=e.forceQuirks?To.QUIRKS:KRe(e);qRe(e)||t._err(e,Ze.nonConformingDoctype),t.treeAdapter.setDocumentMode(t.document,n),t.insertionMode=Ne.BEFORE_HTML}function U0(t,e){t._err(e,Ze.missingDoctype,!0),t.treeAdapter.setDocumentMode(t.document,To.QUIRKS),t.insertionMode=Ne.BEFORE_HTML,t._processToken(e)}function vLe(t,e){e.tagID===U.HTML?(t._insertElement(e,lt.HTML),t.insertionMode=Ne.BEFORE_HEAD):ry(t,e)}function _Le(t,e){const n=e.tagID;(n===U.HTML||n===U.HEAD||n===U.BODY||n===U.BR)&&ry(t,e)}function ry(t,e){t._insertFakeRootElement(),t.insertionMode=Ne.BEFORE_HEAD,t._processToken(e)}function xLe(t,e){switch(e.tagID){case U.HTML:{Ws(t,e);break}case U.HEAD:{t._insertElement(e,lt.HTML),t.headElement=t.openElements.current,t.insertionMode=Ne.IN_HEAD;break}default:sy(t,e)}}function wLe(t,e){const n=e.tagID;n===U.HEAD||n===U.BODY||n===U.HTML||n===U.BR?sy(t,e):t._err(e,Ze.endTagWithoutMatchingOpenElement)}function sy(t,e){t._insertFakeElement(Ve.HEAD,U.HEAD),t.headElement=t.openElements.current,t.insertionMode=Ne.IN_HEAD,t._processToken(e)}function Da(t,e){switch(e.tagID){case U.HTML:{Ws(t,e);break}case U.BASE:case U.BASEFONT:case U.BGSOUND:case U.LINK:case U.META:{t._appendElement(e,lt.HTML),e.ackSelfClosing=!0;break}case U.TITLE:{t._switchToTextParsing(e,Pr.RCDATA);break}case U.NOSCRIPT:{t.options.scriptingEnabled?t._switchToTextParsing(e,Pr.RAWTEXT):(t._insertElement(e,lt.HTML),t.insertionMode=Ne.IN_HEAD_NO_SCRIPT);break}case U.NOFRAMES:case U.STYLE:{t._switchToTextParsing(e,Pr.RAWTEXT);break}case U.SCRIPT:{t._switchToTextParsing(e,Pr.SCRIPT_DATA);break}case U.TEMPLATE:{t._insertTemplate(e),t.activeFormattingElements.insertMarker(),t.framesetOk=!1,t.insertionMode=Ne.IN_TEMPLATE,t.tmplInsertionModeStack.unshift(Ne.IN_TEMPLATE);break}case U.HEAD:{t._err(e,Ze.misplacedStartTagForHeadElement);break}default:iy(t,e)}}function ELe(t,e){switch(e.tagID){case U.HEAD:{t.openElements.pop(),t.insertionMode=Ne.AFTER_HEAD;break}case U.BODY:case U.BR:case U.HTML:{iy(t,e);break}case U.TEMPLATE:{Vf(t,e);break}default:t._err(e,Ze.endTagWithoutMatchingOpenElement)}}function Vf(t,e){t.openElements.tmplCount>0?(t.openElements.generateImpliedEndTagsThoroughly(),t.openElements.currentTagId!==U.TEMPLATE&&t._err(e,Ze.closingOfElementWithOpenChildElements),t.openElements.popUntilTagNamePopped(U.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode()):t._err(e,Ze.endTagWithoutMatchingOpenElement)}function iy(t,e){t.openElements.pop(),t.insertionMode=Ne.AFTER_HEAD,t._processToken(e)}function SLe(t,e){switch(e.tagID){case U.HTML:{Ws(t,e);break}case U.BASEFONT:case U.BGSOUND:case U.HEAD:case U.LINK:case U.META:case U.NOFRAMES:case U.STYLE:{Da(t,e);break}case U.NOSCRIPT:{t._err(e,Ze.nestedNoscriptInHead);break}default:oy(t,e)}}function kLe(t,e){switch(e.tagID){case U.NOSCRIPT:{t.openElements.pop(),t.insertionMode=Ne.IN_HEAD;break}case U.BR:{oy(t,e);break}default:t._err(e,Ze.endTagWithoutMatchingOpenElement)}}function oy(t,e){const n=e.type===rn.EOF?Ze.openElementsLeftAfterEof:Ze.disallowedContentInNoscriptInHead;t._err(e,n),t.openElements.pop(),t.insertionMode=Ne.IN_HEAD,t._processToken(e)}function CLe(t,e){switch(e.tagID){case U.HTML:{Ws(t,e);break}case U.BODY:{t._insertElement(e,lt.HTML),t.framesetOk=!1,t.insertionMode=Ne.IN_BODY;break}case U.FRAMESET:{t._insertElement(e,lt.HTML),t.insertionMode=Ne.IN_FRAMESET;break}case U.BASE:case U.BASEFONT:case U.BGSOUND:case U.LINK:case U.META:case U.NOFRAMES:case U.SCRIPT:case U.STYLE:case U.TEMPLATE:case U.TITLE:{t._err(e,Ze.abandonedHeadElementChild),t.openElements.push(t.headElement,U.HEAD),Da(t,e),t.openElements.remove(t.headElement);break}case U.HEAD:{t._err(e,Ze.misplacedStartTagForHeadElement);break}default:ay(t,e)}}function ALe(t,e){switch(e.tagID){case U.BODY:case U.HTML:case U.BR:{ay(t,e);break}case U.TEMPLATE:{Vf(t,e);break}default:t._err(e,Ze.endTagWithoutMatchingOpenElement)}}function ay(t,e){t._insertFakeElement(Ve.BODY,U.BODY),t.insertionMode=Ne.IN_BODY,Gk(t,e)}function Gk(t,e){switch(e.type){case rn.CHARACTER:{Hee(t,e);break}case rn.WHITESPACE_CHARACTER:{$ee(t,e);break}case rn.COMMENT:{OP(t,e);break}case rn.START_TAG:{Ws(t,e);break}case rn.END_TAG:{qk(t,e);break}case rn.EOF:{Gee(t,e);break}}}function $ee(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e)}function Hee(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e),t.framesetOk=!1}function TLe(t,e){t.openElements.tmplCount===0&&t.treeAdapter.adoptAttributes(t.openElements.items[0],e.attrs)}function NLe(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t.openElements.tmplCount===0&&(t.framesetOk=!1,t.treeAdapter.adoptAttributes(n,e.attrs))}function PLe(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();t.framesetOk&&n&&(t.treeAdapter.detachNode(n),t.openElements.popAllUpToHtmlElement(),t._insertElement(e,lt.HTML),t.insertionMode=Ne.IN_FRAMESET)}function ILe(t,e){t.openElements.hasInButtonScope(U.P)&&t._closePElement(),t._insertElement(e,lt.HTML)}function RLe(t,e){t.openElements.hasInButtonScope(U.P)&&t._closePElement(),LP.has(t.openElements.currentTagId)&&t.openElements.pop(),t._insertElement(e,lt.HTML)}function LLe(t,e){t.openElements.hasInButtonScope(U.P)&&t._closePElement(),t._insertElement(e,lt.HTML),t.skipNextNewLine=!0,t.framesetOk=!1}function OLe(t,e){const n=t.openElements.tmplCount>0;(!t.formElement||n)&&(t.openElements.hasInButtonScope(U.P)&&t._closePElement(),t._insertElement(e,lt.HTML),n||(t.formElement=t.openElements.current))}function DLe(t,e){t.framesetOk=!1;const n=e.tagID;for(let r=t.openElements.stackTop;r>=0;r--){const s=t.openElements.tagIDs[r];if(n===U.LI&&s===U.LI||(n===U.DD||n===U.DT)&&(s===U.DD||s===U.DT)){t.openElements.generateImpliedEndTagsWithExclusion(s),t.openElements.popUntilTagNamePopped(s);break}if(s!==U.ADDRESS&&s!==U.DIV&&s!==U.P&&t._isSpecialElement(t.openElements.items[r],s))break}t.openElements.hasInButtonScope(U.P)&&t._closePElement(),t._insertElement(e,lt.HTML)}function MLe(t,e){t.openElements.hasInButtonScope(U.P)&&t._closePElement(),t._insertElement(e,lt.HTML),t.tokenizer.state=Pr.PLAINTEXT}function jLe(t,e){t.openElements.hasInScope(U.BUTTON)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(U.BUTTON)),t._reconstructActiveFormattingElements(),t._insertElement(e,lt.HTML),t.framesetOk=!1}function FLe(t,e){const n=t.activeFormattingElements.getElementEntryInScopeWithTagName(Ve.A);n&&(OO(t,e),t.openElements.remove(n.element),t.activeFormattingElements.removeEntry(n)),t._reconstructActiveFormattingElements(),t._insertElement(e,lt.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function BLe(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,lt.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function ULe(t,e){t._reconstructActiveFormattingElements(),t.openElements.hasInScope(U.NOBR)&&(OO(t,e),t._reconstructActiveFormattingElements()),t._insertElement(e,lt.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function $Le(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,lt.HTML),t.activeFormattingElements.insertMarker(),t.framesetOk=!1}function HLe(t,e){t.treeAdapter.getDocumentMode(t.document)!==To.QUIRKS&&t.openElements.hasInButtonScope(U.P)&&t._closePElement(),t._insertElement(e,lt.HTML),t.framesetOk=!1,t.insertionMode=Ne.IN_TABLE}function zee(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,lt.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function Vee(t){const e=Nee(t,tf.TYPE);return e!=null&&e.toLowerCase()===oLe}function zLe(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,lt.HTML),Vee(e)||(t.framesetOk=!1),e.ackSelfClosing=!0}function VLe(t,e){t._appendElement(e,lt.HTML),e.ackSelfClosing=!0}function WLe(t,e){t.openElements.hasInButtonScope(U.P)&&t._closePElement(),t._appendElement(e,lt.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function GLe(t,e){e.tagName=Ve.IMG,e.tagID=U.IMG,zee(t,e)}function qLe(t,e){t._insertElement(e,lt.HTML),t.skipNextNewLine=!0,t.tokenizer.state=Pr.RCDATA,t.originalInsertionMode=t.insertionMode,t.framesetOk=!1,t.insertionMode=Ne.TEXT}function KLe(t,e){t.openElements.hasInButtonScope(U.P)&&t._closePElement(),t._reconstructActiveFormattingElements(),t.framesetOk=!1,t._switchToTextParsing(e,Pr.RAWTEXT)}function YLe(t,e){t.framesetOk=!1,t._switchToTextParsing(e,Pr.RAWTEXT)}function u7(t,e){t._switchToTextParsing(e,Pr.RAWTEXT)}function XLe(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,lt.HTML),t.framesetOk=!1,t.insertionMode=t.insertionMode===Ne.IN_TABLE||t.insertionMode===Ne.IN_CAPTION||t.insertionMode===Ne.IN_TABLE_BODY||t.insertionMode===Ne.IN_ROW||t.insertionMode===Ne.IN_CELL?Ne.IN_SELECT_IN_TABLE:Ne.IN_SELECT}function JLe(t,e){t.openElements.currentTagId===U.OPTION&&t.openElements.pop(),t._reconstructActiveFormattingElements(),t._insertElement(e,lt.HTML)}function ZLe(t,e){t.openElements.hasInScope(U.RUBY)&&t.openElements.generateImpliedEndTags(),t._insertElement(e,lt.HTML)}function QLe(t,e){t.openElements.hasInScope(U.RUBY)&&t.openElements.generateImpliedEndTagsWithExclusion(U.RTC),t._insertElement(e,lt.HTML)}function eOe(t,e){t._reconstructActiveFormattingElements(),Fee(e),LO(e),e.selfClosing?t._appendElement(e,lt.MATHML):t._insertElement(e,lt.MATHML),e.ackSelfClosing=!0}function tOe(t,e){t._reconstructActiveFormattingElements(),Bee(e),LO(e),e.selfClosing?t._appendElement(e,lt.SVG):t._insertElement(e,lt.SVG),e.ackSelfClosing=!0}function d7(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,lt.HTML)}function Ws(t,e){switch(e.tagID){case U.I:case U.S:case U.B:case U.U:case U.EM:case U.TT:case U.BIG:case U.CODE:case U.FONT:case U.SMALL:case U.STRIKE:case U.STRONG:{BLe(t,e);break}case U.A:{FLe(t,e);break}case U.H1:case U.H2:case U.H3:case U.H4:case U.H5:case U.H6:{RLe(t,e);break}case U.P:case U.DL:case U.OL:case U.UL:case U.DIV:case U.DIR:case U.NAV:case U.MAIN:case U.MENU:case U.ASIDE:case U.CENTER:case U.FIGURE:case U.FOOTER:case U.HEADER:case U.HGROUP:case U.DIALOG:case U.DETAILS:case U.ADDRESS:case U.ARTICLE:case U.SEARCH:case U.SECTION:case U.SUMMARY:case U.FIELDSET:case U.BLOCKQUOTE:case U.FIGCAPTION:{ILe(t,e);break}case U.LI:case U.DD:case U.DT:{DLe(t,e);break}case U.BR:case U.IMG:case U.WBR:case U.AREA:case U.EMBED:case U.KEYGEN:{zee(t,e);break}case U.HR:{WLe(t,e);break}case U.RB:case U.RTC:{ZLe(t,e);break}case U.RT:case U.RP:{QLe(t,e);break}case U.PRE:case U.LISTING:{LLe(t,e);break}case U.XMP:{KLe(t,e);break}case U.SVG:{tOe(t,e);break}case U.HTML:{TLe(t,e);break}case U.BASE:case U.LINK:case U.META:case U.STYLE:case U.TITLE:case U.SCRIPT:case U.BGSOUND:case U.BASEFONT:case U.TEMPLATE:{Da(t,e);break}case U.BODY:{NLe(t,e);break}case U.FORM:{OLe(t,e);break}case U.NOBR:{ULe(t,e);break}case U.MATH:{eOe(t,e);break}case U.TABLE:{HLe(t,e);break}case U.INPUT:{zLe(t,e);break}case U.PARAM:case U.TRACK:case U.SOURCE:{VLe(t,e);break}case U.IMAGE:{GLe(t,e);break}case U.BUTTON:{jLe(t,e);break}case U.APPLET:case U.OBJECT:case U.MARQUEE:{$Le(t,e);break}case U.IFRAME:{YLe(t,e);break}case U.SELECT:{XLe(t,e);break}case U.OPTION:case U.OPTGROUP:{JLe(t,e);break}case U.NOEMBED:case U.NOFRAMES:{u7(t,e);break}case U.FRAMESET:{PLe(t,e);break}case U.TEXTAREA:{qLe(t,e);break}case U.NOSCRIPT:{t.options.scriptingEnabled?u7(t,e):d7(t,e);break}case U.PLAINTEXT:{MLe(t,e);break}case U.COL:case U.TH:case U.TD:case U.TR:case U.HEAD:case U.FRAME:case U.TBODY:case U.TFOOT:case U.THEAD:case U.CAPTION:case U.COLGROUP:break;default:d7(t,e)}}function nOe(t,e){if(t.openElements.hasInScope(U.BODY)&&(t.insertionMode=Ne.AFTER_BODY,t.options.sourceCodeLocationInfo)){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t._setEndLocation(n,e)}}function rOe(t,e){t.openElements.hasInScope(U.BODY)&&(t.insertionMode=Ne.AFTER_BODY,ete(t,e))}function sOe(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n))}function iOe(t){const e=t.openElements.tmplCount>0,{formElement:n}=t;e||(t.formElement=null),(n||e)&&t.openElements.hasInScope(U.FORM)&&(t.openElements.generateImpliedEndTags(),e?t.openElements.popUntilTagNamePopped(U.FORM):n&&t.openElements.remove(n))}function oOe(t){t.openElements.hasInButtonScope(U.P)||t._insertFakeElement(Ve.P,U.P),t._closePElement()}function aOe(t){t.openElements.hasInListItemScope(U.LI)&&(t.openElements.generateImpliedEndTagsWithExclusion(U.LI),t.openElements.popUntilTagNamePopped(U.LI))}function lOe(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTagsWithExclusion(n),t.openElements.popUntilTagNamePopped(n))}function cOe(t){t.openElements.hasNumberedHeaderInScope()&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilNumberedHeaderPopped())}function uOe(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker())}function dOe(t){t._reconstructActiveFormattingElements(),t._insertFakeElement(Ve.BR,U.BR),t.openElements.pop(),t.framesetOk=!1}function Wee(t,e){const n=e.tagName,r=e.tagID;for(let s=t.openElements.stackTop;s>0;s--){const i=t.openElements.items[s],o=t.openElements.tagIDs[s];if(r===o&&(r!==U.UNKNOWN||t.treeAdapter.getTagName(i)===n)){t.openElements.generateImpliedEndTagsWithExclusion(r),t.openElements.stackTop>=s&&t.openElements.shortenToLength(s);break}if(t._isSpecialElement(i,o))break}}function qk(t,e){switch(e.tagID){case U.A:case U.B:case U.I:case U.S:case U.U:case U.EM:case U.TT:case U.BIG:case U.CODE:case U.FONT:case U.NOBR:case U.SMALL:case U.STRIKE:case U.STRONG:{OO(t,e);break}case U.P:{oOe(t);break}case U.DL:case U.UL:case U.OL:case U.DIR:case U.DIV:case U.NAV:case U.PRE:case U.MAIN:case U.MENU:case U.ASIDE:case U.BUTTON:case U.CENTER:case U.FIGURE:case U.FOOTER:case U.HEADER:case U.HGROUP:case U.DIALOG:case U.ADDRESS:case U.ARTICLE:case U.DETAILS:case U.SEARCH:case U.SECTION:case U.SUMMARY:case U.LISTING:case U.FIELDSET:case U.BLOCKQUOTE:case U.FIGCAPTION:{sOe(t,e);break}case U.LI:{aOe(t);break}case U.DD:case U.DT:{lOe(t,e);break}case U.H1:case U.H2:case U.H3:case U.H4:case U.H5:case U.H6:{cOe(t);break}case U.BR:{dOe(t);break}case U.BODY:{nOe(t,e);break}case U.HTML:{rOe(t,e);break}case U.FORM:{iOe(t);break}case U.APPLET:case U.OBJECT:case U.MARQUEE:{uOe(t,e);break}case U.TEMPLATE:{Vf(t,e);break}default:Wee(t,e)}}function Gee(t,e){t.tmplInsertionModeStack.length>0?Qee(t,e):DO(t,e)}function hOe(t,e){var n;e.tagID===U.SCRIPT&&((n=t.scriptHandler)===null||n===void 0||n.call(t,t.openElements.current)),t.openElements.pop(),t.insertionMode=t.originalInsertionMode}function fOe(t,e){t._err(e,Ze.eofInElementThatCanContainOnlyText),t.openElements.pop(),t.insertionMode=t.originalInsertionMode,t.onEof(e)}function QT(t,e){if(Uee.has(t.openElements.currentTagId))switch(t.pendingCharacterTokens.length=0,t.hasNonWhitespacePendingCharacterToken=!1,t.originalInsertionMode=t.insertionMode,t.insertionMode=Ne.IN_TABLE_TEXT,e.type){case rn.CHARACTER:{Kee(t,e);break}case rn.WHITESPACE_CHARACTER:{qee(t,e);break}}else Lv(t,e)}function pOe(t,e){t.openElements.clearBackToTableContext(),t.activeFormattingElements.insertMarker(),t._insertElement(e,lt.HTML),t.insertionMode=Ne.IN_CAPTION}function mOe(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,lt.HTML),t.insertionMode=Ne.IN_COLUMN_GROUP}function gOe(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(Ve.COLGROUP,U.COLGROUP),t.insertionMode=Ne.IN_COLUMN_GROUP,MO(t,e)}function bOe(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,lt.HTML),t.insertionMode=Ne.IN_TABLE_BODY}function yOe(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(Ve.TBODY,U.TBODY),t.insertionMode=Ne.IN_TABLE_BODY,Kk(t,e)}function vOe(t,e){t.openElements.hasInTableScope(U.TABLE)&&(t.openElements.popUntilTagNamePopped(U.TABLE),t._resetInsertionMode(),t._processStartTag(e))}function _Oe(t,e){Vee(e)?t._appendElement(e,lt.HTML):Lv(t,e),e.ackSelfClosing=!0}function xOe(t,e){!t.formElement&&t.openElements.tmplCount===0&&(t._insertElement(e,lt.HTML),t.formElement=t.openElements.current,t.openElements.pop())}function ag(t,e){switch(e.tagID){case U.TD:case U.TH:case U.TR:{yOe(t,e);break}case U.STYLE:case U.SCRIPT:case U.TEMPLATE:{Da(t,e);break}case U.COL:{gOe(t,e);break}case U.FORM:{xOe(t,e);break}case U.TABLE:{vOe(t,e);break}case U.TBODY:case U.TFOOT:case U.THEAD:{bOe(t,e);break}case U.INPUT:{_Oe(t,e);break}case U.CAPTION:{pOe(t,e);break}case U.COLGROUP:{mOe(t,e);break}default:Lv(t,e)}}function h1(t,e){switch(e.tagID){case U.TABLE:{t.openElements.hasInTableScope(U.TABLE)&&(t.openElements.popUntilTagNamePopped(U.TABLE),t._resetInsertionMode());break}case U.TEMPLATE:{Vf(t,e);break}case U.BODY:case U.CAPTION:case U.COL:case U.COLGROUP:case U.HTML:case U.TBODY:case U.TD:case U.TFOOT:case U.TH:case U.THEAD:case U.TR:break;default:Lv(t,e)}}function Lv(t,e){const n=t.fosterParentingEnabled;t.fosterParentingEnabled=!0,Gk(t,e),t.fosterParentingEnabled=n}function qee(t,e){t.pendingCharacterTokens.push(e)}function Kee(t,e){t.pendingCharacterTokens.push(e),t.hasNonWhitespacePendingCharacterToken=!0}function $0(t,e){let n=0;if(t.hasNonWhitespacePendingCharacterToken)for(;n<t.pendingCharacterTokens.length;n++)Lv(t,t.pendingCharacterTokens[n]);else for(;n<t.pendingCharacterTokens.length;n++)t._insertCharacters(t.pendingCharacterTokens[n]);t.insertionMode=t.originalInsertionMode,t._processToken(e)}const Yee=new Set([U.CAPTION,U.COL,U.COLGROUP,U.TBODY,U.TD,U.TFOOT,U.TH,U.THEAD,U.TR]);function wOe(t,e){const n=e.tagID;Yee.has(n)?t.openElements.hasInTableScope(U.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(U.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=Ne.IN_TABLE,ag(t,e)):Ws(t,e)}function EOe(t,e){const n=e.tagID;switch(n){case U.CAPTION:case U.TABLE:{t.openElements.hasInTableScope(U.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(U.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=Ne.IN_TABLE,n===U.TABLE&&h1(t,e));break}case U.BODY:case U.COL:case U.COLGROUP:case U.HTML:case U.TBODY:case U.TD:case U.TFOOT:case U.TH:case U.THEAD:case U.TR:break;default:qk(t,e)}}function MO(t,e){switch(e.tagID){case U.HTML:{Ws(t,e);break}case U.COL:{t._appendElement(e,lt.HTML),e.ackSelfClosing=!0;break}case U.TEMPLATE:{Da(t,e);break}default:zE(t,e)}}function SOe(t,e){switch(e.tagID){case U.COLGROUP:{t.openElements.currentTagId===U.COLGROUP&&(t.openElements.pop(),t.insertionMode=Ne.IN_TABLE);break}case U.TEMPLATE:{Vf(t,e);break}case U.COL:break;default:zE(t,e)}}function zE(t,e){t.openElements.currentTagId===U.COLGROUP&&(t.openElements.pop(),t.insertionMode=Ne.IN_TABLE,t._processToken(e))}function Kk(t,e){switch(e.tagID){case U.TR:{t.openElements.clearBackToTableBodyContext(),t._insertElement(e,lt.HTML),t.insertionMode=Ne.IN_ROW;break}case U.TH:case U.TD:{t.openElements.clearBackToTableBodyContext(),t._insertFakeElement(Ve.TR,U.TR),t.insertionMode=Ne.IN_ROW,Yk(t,e);break}case U.CAPTION:case U.COL:case U.COLGROUP:case U.TBODY:case U.TFOOT:case U.THEAD:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=Ne.IN_TABLE,ag(t,e));break}default:ag(t,e)}}function DP(t,e){const n=e.tagID;switch(e.tagID){case U.TBODY:case U.TFOOT:case U.THEAD:{t.openElements.hasInTableScope(n)&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=Ne.IN_TABLE);break}case U.TABLE:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=Ne.IN_TABLE,h1(t,e));break}case U.BODY:case U.CAPTION:case U.COL:case U.COLGROUP:case U.HTML:case U.TD:case U.TH:case U.TR:break;default:h1(t,e)}}function Yk(t,e){switch(e.tagID){case U.TH:case U.TD:{t.openElements.clearBackToTableRowContext(),t._insertElement(e,lt.HTML),t.insertionMode=Ne.IN_CELL,t.activeFormattingElements.insertMarker();break}case U.CAPTION:case U.COL:case U.COLGROUP:case U.TBODY:case U.TFOOT:case U.THEAD:case U.TR:{t.openElements.hasInTableScope(U.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=Ne.IN_TABLE_BODY,Kk(t,e));break}default:ag(t,e)}}function Xee(t,e){switch(e.tagID){case U.TR:{t.openElements.hasInTableScope(U.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=Ne.IN_TABLE_BODY);break}case U.TABLE:{t.openElements.hasInTableScope(U.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=Ne.IN_TABLE_BODY,DP(t,e));break}case U.TBODY:case U.TFOOT:case U.THEAD:{(t.openElements.hasInTableScope(e.tagID)||t.openElements.hasInTableScope(U.TR))&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=Ne.IN_TABLE_BODY,DP(t,e));break}case U.BODY:case U.CAPTION:case U.COL:case U.COLGROUP:case U.HTML:case U.TD:case U.TH:break;default:h1(t,e)}}function kOe(t,e){const n=e.tagID;Yee.has(n)?(t.openElements.hasInTableScope(U.TD)||t.openElements.hasInTableScope(U.TH))&&(t._closeTableCell(),Yk(t,e)):Ws(t,e)}function COe(t,e){const n=e.tagID;switch(n){case U.TD:case U.TH:{t.openElements.hasInTableScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=Ne.IN_ROW);break}case U.TABLE:case U.TBODY:case U.TFOOT:case U.THEAD:case U.TR:{t.openElements.hasInTableScope(n)&&(t._closeTableCell(),Xee(t,e));break}case U.BODY:case U.CAPTION:case U.COL:case U.COLGROUP:case U.HTML:break;default:qk(t,e)}}function Jee(t,e){switch(e.tagID){case U.HTML:{Ws(t,e);break}case U.OPTION:{t.openElements.currentTagId===U.OPTION&&t.openElements.pop(),t._insertElement(e,lt.HTML);break}case U.OPTGROUP:{t.openElements.currentTagId===U.OPTION&&t.openElements.pop(),t.openElements.currentTagId===U.OPTGROUP&&t.openElements.pop(),t._insertElement(e,lt.HTML);break}case U.HR:{t.openElements.currentTagId===U.OPTION&&t.openElements.pop(),t.openElements.currentTagId===U.OPTGROUP&&t.openElements.pop(),t._appendElement(e,lt.HTML),e.ackSelfClosing=!0;break}case U.INPUT:case U.KEYGEN:case U.TEXTAREA:case U.SELECT:{t.openElements.hasInSelectScope(U.SELECT)&&(t.openElements.popUntilTagNamePopped(U.SELECT),t._resetInsertionMode(),e.tagID!==U.SELECT&&t._processStartTag(e));break}case U.SCRIPT:case U.TEMPLATE:{Da(t,e);break}}}function Zee(t,e){switch(e.tagID){case U.OPTGROUP:{t.openElements.stackTop>0&&t.openElements.currentTagId===U.OPTION&&t.openElements.tagIDs[t.openElements.stackTop-1]===U.OPTGROUP&&t.openElements.pop(),t.openElements.currentTagId===U.OPTGROUP&&t.openElements.pop();break}case U.OPTION:{t.openElements.currentTagId===U.OPTION&&t.openElements.pop();break}case U.SELECT:{t.openElements.hasInSelectScope(U.SELECT)&&(t.openElements.popUntilTagNamePopped(U.SELECT),t._resetInsertionMode());break}case U.TEMPLATE:{Vf(t,e);break}}}function AOe(t,e){const n=e.tagID;n===U.CAPTION||n===U.TABLE||n===U.TBODY||n===U.TFOOT||n===U.THEAD||n===U.TR||n===U.TD||n===U.TH?(t.openElements.popUntilTagNamePopped(U.SELECT),t._resetInsertionMode(),t._processStartTag(e)):Jee(t,e)}function TOe(t,e){const n=e.tagID;n===U.CAPTION||n===U.TABLE||n===U.TBODY||n===U.TFOOT||n===U.THEAD||n===U.TR||n===U.TD||n===U.TH?t.openElements.hasInTableScope(n)&&(t.openElements.popUntilTagNamePopped(U.SELECT),t._resetInsertionMode(),t.onEndTag(e)):Zee(t,e)}function NOe(t,e){switch(e.tagID){case U.BASE:case U.BASEFONT:case U.BGSOUND:case U.LINK:case U.META:case U.NOFRAMES:case U.SCRIPT:case U.STYLE:case U.TEMPLATE:case U.TITLE:{Da(t,e);break}case U.CAPTION:case U.COLGROUP:case U.TBODY:case U.TFOOT:case U.THEAD:{t.tmplInsertionModeStack[0]=Ne.IN_TABLE,t.insertionMode=Ne.IN_TABLE,ag(t,e);break}case U.COL:{t.tmplInsertionModeStack[0]=Ne.IN_COLUMN_GROUP,t.insertionMode=Ne.IN_COLUMN_GROUP,MO(t,e);break}case U.TR:{t.tmplInsertionModeStack[0]=Ne.IN_TABLE_BODY,t.insertionMode=Ne.IN_TABLE_BODY,Kk(t,e);break}case U.TD:case U.TH:{t.tmplInsertionModeStack[0]=Ne.IN_ROW,t.insertionMode=Ne.IN_ROW,Yk(t,e);break}default:t.tmplInsertionModeStack[0]=Ne.IN_BODY,t.insertionMode=Ne.IN_BODY,Ws(t,e)}}function POe(t,e){e.tagID===U.TEMPLATE&&Vf(t,e)}function Qee(t,e){t.openElements.tmplCount>0?(t.openElements.popUntilTagNamePopped(U.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode(),t.onEof(e)):DO(t,e)}function IOe(t,e){e.tagID===U.HTML?Ws(t,e):VE(t,e)}function ete(t,e){var n;if(e.tagID===U.HTML){if(t.fragmentContext||(t.insertionMode=Ne.AFTER_AFTER_BODY),t.options.sourceCodeLocationInfo&&t.openElements.tagIDs[0]===U.HTML){t._setEndLocation(t.openElements.items[0],e);const r=t.openElements.items[1];r&&!(!((n=t.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&t._setEndLocation(r,e)}}else VE(t,e)}function VE(t,e){t.insertionMode=Ne.IN_BODY,Gk(t,e)}function ROe(t,e){switch(e.tagID){case U.HTML:{Ws(t,e);break}case U.FRAMESET:{t._insertElement(e,lt.HTML);break}case U.FRAME:{t._appendElement(e,lt.HTML),e.ackSelfClosing=!0;break}case U.NOFRAMES:{Da(t,e);break}}}function LOe(t,e){e.tagID===U.FRAMESET&&!t.openElements.isRootHtmlElementCurrent()&&(t.openElements.pop(),!t.fragmentContext&&t.openElements.currentTagId!==U.FRAMESET&&(t.insertionMode=Ne.AFTER_FRAMESET))}function OOe(t,e){switch(e.tagID){case U.HTML:{Ws(t,e);break}case U.NOFRAMES:{Da(t,e);break}}}function DOe(t,e){e.tagID===U.HTML&&(t.insertionMode=Ne.AFTER_AFTER_FRAMESET)}function MOe(t,e){e.tagID===U.HTML?Ws(t,e):o2(t,e)}function o2(t,e){t.insertionMode=Ne.IN_BODY,Gk(t,e)}function jOe(t,e){switch(e.tagID){case U.HTML:{Ws(t,e);break}case U.NOFRAMES:{Da(t,e);break}}}function FOe(t,e){e.chars=sr,t._insertCharacters(e)}function BOe(t,e){t._insertCharacters(e),t.framesetOk=!1}function tte(t){for(;t.treeAdapter.getNamespaceURI(t.openElements.current)!==lt.HTML&&!t._isIntegrationPoint(t.openElements.currentTagId,t.openElements.current);)t.openElements.pop()}function UOe(t,e){if(tLe(e))tte(t),t._startTagOutsideForeignContent(e);else{const n=t._getAdjustedCurrentElement(),r=t.treeAdapter.getNamespaceURI(n);r===lt.MATHML?Fee(e):r===lt.SVG&&(nLe(e),Bee(e)),LO(e),e.selfClosing?t._appendElement(e,r):t._insertElement(e,r),e.ackSelfClosing=!0}}function $Oe(t,e){if(e.tagID===U.P||e.tagID===U.BR){tte(t),t._endTagOutsideForeignContent(e);return}for(let n=t.openElements.stackTop;n>0;n--){const r=t.openElements.items[n];if(t.treeAdapter.getNamespaceURI(r)===lt.HTML){t._endTagOutsideForeignContent(e);break}const s=t.treeAdapter.getTagName(r);if(s.toLowerCase()===e.tagName){e.tagName=s,t.openElements.shortenToLength(n);break}}}Ve.AREA,Ve.BASE,Ve.BASEFONT,Ve.BGSOUND,Ve.BR,Ve.COL,Ve.EMBED,Ve.FRAME,Ve.HR,Ve.IMG,Ve.INPUT,Ve.KEYGEN,Ve.LINK,Ve.META,Ve.PARAM,Ve.SOURCE,Ve.TRACK,Ve.WBR;const Xk=nte("end"),ec=nte("start");function nte(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function rte(t){const e=ec(t),n=Xk(t);if(e&&n)return{start:e,end:n}}const Jk=function(t){if(t==null)return WOe;if(typeof t=="function")return Zk(t);if(typeof t=="object")return Array.isArray(t)?HOe(t):zOe(t);if(typeof t=="string")return VOe(t);throw new Error("Expected function, string, or object as test")};function HOe(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=Jk(t[n]);return Zk(r);function r(...s){let i=-1;for(;++i<e.length;)if(e[i].apply(this,s))return!0;return!1}}function zOe(t){const e=t;return Zk(n);function n(r){const s=r;let i;for(i in t)if(s[i]!==e[i])return!1;return!0}}function VOe(t){return Zk(e);function e(n){return n&&n.type===t}}function Zk(t){return e;function e(n,r,s){return!!(GOe(n)&&t.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function WOe(){return!0}function GOe(t){return t!==null&&typeof t=="object"&&"type"in t}const ste=[],qOe=!0,MP=!1,ite="skip";function ote(t,e,n,r){let s;typeof e=="function"&&typeof n!="function"?(r=n,n=e):s=e;const i=Jk(s),o=r?-1:1;a(t,void 0,[])();function a(l,c,u){const d=l&&typeof l=="object"?l:{};if(typeof d.type=="string"){const f=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(h,"name",{value:"node ("+(l.type+(f?"<"+f+">":""))+")"})}return h;function h(){let f=ste,g,y,m;if((!e||i(l,c,u[u.length-1]||void 0))&&(f=KOe(n(l,u)),f[0]===MP))return f;if("children"in l&&l.children){const b=l;if(b.children&&f[0]!==ite)for(y=(r?b.children.length:-1)+o,m=u.concat(b);y>-1&&y<b.children.length;){const v=b.children[y];if(g=a(v,y,m)(),g[0]===MP)return g;y=typeof g[1]=="number"?g[1]:y+o}}return f}}}function KOe(t){return Array.isArray(t)?t:typeof t=="number"?[qOe,t]:t==null?ste:[t]}function Hg(t,e,n,r){let s,i,o;typeof e=="function"&&typeof n!="function"?(i=void 0,o=e,s=n):(i=e,o=n,s=r),ote(t,i,a,s);function a(l,c){const u=c[c.length-1],d=u?u.children.indexOf(l):void 0;return o(l,d,u)}}const YOe=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|textarea|title|xmp)(?=[\t\n\f\r />])/gi,XOe=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),h7={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function ate(t,e){const n=o6e(t),r=IO("type",{handlers:{root:JOe,element:ZOe,text:QOe,comment:cte,doctype:e6e,raw:n6e},unknown:r6e}),s={parser:n?new c7(h7):c7.getFragmentParser(void 0,h7),handle(a){r(a,s)},stitches:!1,options:e||{}};r(t,s),zg(s,ec());const i=n?s.parser.document:s.parser.getFragment(),o=tRe(i,{file:s.options.file});return s.stitches&&Hg(o,"comment",function(a,l,c){const u=a;if(u.value.stitch&&c&&l!==void 0){const d=c.children;return d[l]=u.value.stitch,l}}),o.type==="root"&&o.children.length===1&&o.children[0].type===t.type?o.children[0]:o}function lte(t,e){let n=-1;if(t)for(;++n<t.length;)e.handle(t[n])}function JOe(t,e){lte(t.children,e)}function ZOe(t,e){s6e(t,e),lte(t.children,e),i6e(t,e)}function QOe(t,e){e.parser.tokenizer.state>4&&(e.parser.tokenizer.state=0);const n={type:rn.CHARACTER,chars:t.value,location:Ov(t)};zg(e,ec(t)),e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)}function e6e(t,e){const n={type:rn.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:Ov(t)};zg(e,ec(t)),e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)}function t6e(t,e){e.stitches=!0;const n=a6e(t);if("children"in t&&"children"in n){const r=ate({type:"root",children:t.children},e.options);n.children=r.children}cte({type:"comment",value:{stitch:n}},e)}function cte(t,e){const n=t.value,r={type:rn.COMMENT,data:n,location:Ov(t)};zg(e,ec(t)),e.parser.currentToken=r,e.parser._processToken(e.parser.currentToken)}function n6e(t,e){if(e.parser.tokenizer.preprocessor.html="",e.parser.tokenizer.preprocessor.pos=-1,e.parser.tokenizer.preprocessor.lastGapPos=-2,e.parser.tokenizer.preprocessor.gapStack=[],e.parser.tokenizer.preprocessor.skipNextNewLine=!1,e.parser.tokenizer.preprocessor.lastChunkWritten=!1,e.parser.tokenizer.preprocessor.endOfChunkHit=!1,e.parser.tokenizer.preprocessor.isEol=!1,ute(e,ec(t)),e.parser.tokenizer.write(e.options.tagfilter?t.value.replace(YOe,"&lt;$1$2"):t.value,!1),e.parser.tokenizer._runParsingLoop(),e.parser.tokenizer.state===72||e.parser.tokenizer.state===78){e.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=e.parser.tokenizer._consume();e.parser.tokenizer._callState(n)}}function r6e(t,e){const n=t;if(e.options.passThrough&&e.options.passThrough.includes(n.type))t6e(n,e);else{let r="";throw XOe.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function zg(t,e){ute(t,e);const n=t.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=t.parser.tokenizer.preprocessor.line,n.location.endCol=t.parser.tokenizer.preprocessor.col+1,n.location.endOffset=t.parser.tokenizer.preprocessor.offset+1,t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)),t.parser.tokenizer.paused=!1,t.parser.tokenizer.inLoop=!1,t.parser.tokenizer.active=!1,t.parser.tokenizer.returnState=Pr.DATA,t.parser.tokenizer.charRefCode=-1,t.parser.tokenizer.consumedAfterSnapshot=-1,t.parser.tokenizer.currentLocation=null,t.parser.tokenizer.currentCharacterToken=null,t.parser.tokenizer.currentToken=null,t.parser.tokenizer.currentAttr={name:"",value:""}}function ute(t,e){if(e&&e.offset!==void 0){const n={startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:-1,endCol:-1,endOffset:-1};t.parser.tokenizer.preprocessor.lineStartPos=-e.column+1,t.parser.tokenizer.preprocessor.droppedBufferSize=e.offset,t.parser.tokenizer.preprocessor.line=e.line,t.parser.tokenizer.currentLocation=n}}function s6e(t,e){const n=t.tagName.toLowerCase();if(e.parser.tokenizer.state===Pr.PLAINTEXT)return;zg(e,ec(t));const r=e.parser.openElements.current;let s="namespaceURI"in r?r.namespaceURI:Ph.html;s===Ph.html&&n==="svg"&&(s=Ph.svg);const i=oRe({...t,children:[]},{space:s===Ph.svg?"svg":"html"}),o={type:rn.START_TAG,tagName:n,tagID:$g(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in i?i.attrs:[],location:Ov(t)};e.parser.currentToken=o,e.parser._processToken(e.parser.currentToken),e.parser.tokenizer.lastStartTagName=n}function i6e(t,e){const n=t.tagName.toLowerCase();if(!e.parser.tokenizer.inForeignNode&&kee.includes(n)||e.parser.tokenizer.state===Pr.PLAINTEXT)return;zg(e,Xk(t));const r={type:rn.END_TAG,tagName:n,tagID:$g(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:Ov(t)};e.parser.currentToken=r,e.parser._processToken(e.parser.currentToken),n===e.parser.tokenizer.lastStartTagName&&(e.parser.tokenizer.state===Pr.RCDATA||e.parser.tokenizer.state===Pr.RAWTEXT||e.parser.tokenizer.state===Pr.SCRIPT_DATA)&&(e.parser.tokenizer.state=Pr.DATA)}function o6e(t){const e=t.type==="root"?t.children[0]:t;return!!(e&&(e.type==="doctype"||e.type==="element"&&e.tagName.toLowerCase()==="html"))}function Ov(t){const e=ec(t)||{line:void 0,column:void 0,offset:void 0},n=Xk(t)||{line:void 0,column:void 0,offset:void 0};return{startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function a6e(t){return"children"in t?vf({...t,children:[]}):vf(t)}function l6e(t){return function(e,n){return ate(e,{...t,file:n})}}function WE(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,s=n.indexOf(e);for(;s!==-1;)r++,s=n.indexOf(e,s+e.length);return r}const ai=Fd(/[A-Za-z]/),$s=Fd(/[\dA-Za-z]/),c6e=Fd(/[#-'*+\--9=?A-Z^-~]/);function GE(t){return t!==null&&(t<32||t===127)}const jP=Fd(/\d/),u6e=Fd(/[\dA-Fa-f]/),d6e=Fd(/[!-/:-@[-`{-~]/);function Mt(t){return t!==null&&t<-2}function Kn(t){return t!==null&&(t<0||t===32)}function sn(t){return t===-2||t===-1||t===32}const Qk=Fd(/\p{P}|\p{S}/u),_f=Fd(/\s/);function Fd(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function h6e(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function f6e(t,e,n){const s=Jk((n||{}).ignore||[]),i=p6e(e);let o=-1;for(;++o<i.length;)ote(t,"text",a);function a(c,u){let d=-1,h;for(;++d<u.length;){const f=u[d],g=h?h.children:void 0;if(s(f,g?g.indexOf(f):void 0,h))return;h=f}if(h)return l(c,u)}function l(c,u){const d=u[u.length-1],h=i[o][0],f=i[o][1];let g=0;const m=d.children.indexOf(c);let b=!1,v=[];h.lastIndex=0;let _=h.exec(c.value);for(;_;){const E=_.index,w={index:_.index,input:_.input,stack:[...u,c]};let S=f(..._,w);if(typeof S=="string"&&(S=S.length>0?{type:"text",value:S}:void 0),S===!1?h.lastIndex=E+1:(g!==E&&v.push({type:"text",value:c.value.slice(g,E)}),Array.isArray(S)?v.push(...S):S&&v.push(S),g=E+_[0].length,b=!0),!h.global)break;_=h.exec(c.value)}return b?(g<c.value.length&&v.push({type:"text",value:c.value.slice(g)}),d.children.splice(m,1,...v)):v=[c],m+v.length}}function p6e(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const s=n[r];e.push([m6e(s[0]),g6e(s[1])])}return e}function m6e(t){return typeof t=="string"?new RegExp(h6e(t),"g"):t}function g6e(t){return typeof t=="function"?t:function(){return t}}const e5="phrasing",t5=["autolink","link","image","label"];function b6e(){return{transforms:[S6e],enter:{literalAutolink:v6e,literalAutolinkEmail:n5,literalAutolinkHttp:n5,literalAutolinkWww:n5},exit:{literalAutolink:E6e,literalAutolinkEmail:w6e,literalAutolinkHttp:_6e,literalAutolinkWww:x6e}}}function y6e(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:e5,notInConstruct:t5},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:e5,notInConstruct:t5},{character:":",before:"[ps]",after:"\\/",inConstruct:e5,notInConstruct:t5}]}}function v6e(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function n5(t){this.config.enter.autolinkProtocol.call(this,t)}function _6e(t){this.config.exit.autolinkProtocol.call(this,t)}function x6e(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function w6e(t){this.config.exit.autolinkEmail.call(this,t)}function E6e(t){this.exit(t)}function S6e(t){f6e(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,k6e],[/(?<=^|\s|\p{P}|\p{S})([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/gu,C6e]],{ignore:["link","linkReference"]})}function k6e(t,e,n,r,s){let i="";if(!dte(s)||(/^w/i.test(e)&&(n=e+n,e="",i="http://"),!A6e(n)))return!1;const o=T6e(n+r);if(!o[0])return!1;const a={type:"link",title:null,url:i+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[a,{type:"text",value:o[1]}]:a}function C6e(t,e,n,r){return!dte(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function A6e(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function T6e(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const s=WE(t,"(");let i=WE(t,")");for(;r!==-1&&s>i;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),i++;return[t,n]}function dte(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||_f(n)||Qk(n))&&(!e||n!==47)}function Sa(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}hte.peek=j6e;function N6e(){this.buffer()}function P6e(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function I6e(){this.buffer()}function R6e(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function L6e(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Sa(this.sliceSerialize(t)).toLowerCase(),n.label=e}function O6e(t){this.exit(t)}function D6e(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Sa(this.sliceSerialize(t)).toLowerCase(),n.label=e}function M6e(t){this.exit(t)}function j6e(){return"["}function hte(t,e,n,r){const s=n.createTracker(r);let i=s.move("[^");const o=n.enter("footnoteReference"),a=n.enter("reference");return i+=s.move(n.safe(n.associationId(t),{after:"]",before:i})),a(),o(),i+=s.move("]"),i}function F6e(){return{enter:{gfmFootnoteCallString:N6e,gfmFootnoteCall:P6e,gfmFootnoteDefinitionLabelString:I6e,gfmFootnoteDefinition:R6e},exit:{gfmFootnoteCallString:L6e,gfmFootnoteCall:O6e,gfmFootnoteDefinitionLabelString:D6e,gfmFootnoteDefinition:M6e}}}function B6e(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:hte},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,s,i,o){const a=i.createTracker(o);let l=a.move("[^");const c=i.enter("footnoteDefinition"),u=i.enter("label");return l+=a.move(i.safe(i.associationId(r),{before:l,after:"]"})),u(),l+=a.move("]:"),r.children&&r.children.length>0&&(a.shift(4),l+=a.move((e?`
`:" ")+i.indentLines(i.containerFlow(r,a.current()),e?fte:U6e))),c(),l}}function U6e(t,e,n){return e===0?t:fte(t,e,n)}function fte(t,e,n){return(n?"":"    ")+t}const $6e=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];pte.peek=G6e;function H6e(){return{canContainEols:["delete"],enter:{strikethrough:V6e},exit:{strikethrough:W6e}}}function z6e(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:$6e}],handlers:{delete:pte}}}function V6e(t){this.enter({type:"delete",children:[]},t)}function W6e(t){this.exit(t)}function pte(t,e,n,r){const s=n.createTracker(r),i=n.enter("strikethrough");let o=s.move("~~");return o+=n.containerPhrasing(t,{...s.current(),before:o,after:"~"}),o+=s.move("~~"),i(),o}function G6e(){return"~"}function q6e(t){return t.length}function K6e(t,e){const n=e||{},r=(n.align||[]).concat(),s=n.stringLength||q6e,i=[],o=[],a=[],l=[];let c=0,u=-1;for(;++u<t.length;){const y=[],m=[];let b=-1;for(t[u].length>c&&(c=t[u].length);++b<t[u].length;){const v=Y6e(t[u][b]);if(n.alignDelimiters!==!1){const _=s(v);m[b]=_,(l[b]===void 0||_>l[b])&&(l[b]=_)}y.push(v)}o[u]=y,a[u]=m}let d=-1;if(typeof r=="object"&&"length"in r)for(;++d<c;)i[d]=f7(r[d]);else{const y=f7(r);for(;++d<c;)i[d]=y}d=-1;const h=[],f=[];for(;++d<c;){const y=i[d];let m="",b="";y===99?(m=":",b=":"):y===108?m=":":y===114&&(b=":");let v=n.alignDelimiters===!1?1:Math.max(1,l[d]-m.length-b.length);const _=m+"-".repeat(v)+b;n.alignDelimiters!==!1&&(v=m.length+v+b.length,v>l[d]&&(l[d]=v),f[d]=v),h[d]=_}o.splice(1,0,h),a.splice(1,0,f),u=-1;const g=[];for(;++u<o.length;){const y=o[u],m=a[u];d=-1;const b=[];for(;++d<c;){const v=y[d]||"";let _="",E="";if(n.alignDelimiters!==!1){const w=l[d]-(m[d]||0),S=i[d];S===114?_=" ".repeat(w):S===99?w%2?(_=" ".repeat(w/2+.5),E=" ".repeat(w/2-.5)):(_=" ".repeat(w/2),E=_):E=" ".repeat(w)}n.delimiterStart!==!1&&!d&&b.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&v==="")&&(n.delimiterStart!==!1||d)&&b.push(" "),n.alignDelimiters!==!1&&b.push(_),b.push(v),n.alignDelimiters!==!1&&b.push(E),n.padding!==!1&&b.push(" "),(n.delimiterEnd!==!1||d!==c-1)&&b.push("|")}g.push(n.delimiterEnd===!1?b.join("").replace(/ +$/,""):b.join(""))}return g.join(`
`)}function Y6e(t){return t==null?"":String(t)}function f7(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function X6e(t,e,n,r){const s=n.enter("blockquote"),i=n.createTracker(r);i.move("> "),i.shift(2);const o=n.indentLines(n.containerFlow(t,i.current()),J6e);return s(),o}function J6e(t,e,n){return">"+(n?"":" ")+t}function Z6e(t,e){return p7(t,e.inConstruct,!0)&&!p7(t,e.notInConstruct,!1)}function p7(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function m7(t,e,n,r){let s=-1;for(;++s<n.unsafe.length;)if(n.unsafe[s].character===`
`&&Z6e(n.stack,n.unsafe[s]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function Q6e(t,e){const n=String(t);let r=n.indexOf(e),s=r,i=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===s?++i>o&&(o=i):i=1,s=r+e.length,r=n.indexOf(e,s);return o}function eDe(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function tDe(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function nDe(t,e,n,r){const s=tDe(n),i=t.value||"",o=s==="`"?"GraveAccent":"Tilde";if(eDe(t,n)){const d=n.enter("codeIndented"),h=n.indentLines(i,rDe);return d(),h}const a=n.createTracker(r),l=s.repeat(Math.max(Q6e(i,s)+1,3)),c=n.enter("codeFenced");let u=a.move(l);if(t.lang){const d=n.enter(`codeFencedLang${o}`);u+=a.move(n.safe(t.lang,{before:u,after:" ",encode:["`"],...a.current()})),d()}if(t.lang&&t.meta){const d=n.enter(`codeFencedMeta${o}`);u+=a.move(" "),u+=a.move(n.safe(t.meta,{before:u,after:`
`,encode:["`"],...a.current()})),d()}return u+=a.move(`
`),i&&(u+=a.move(i+`
`)),u+=a.move(l),c(),u}function rDe(t,e,n){return(n?"":"    ")+t}function jO(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function sDe(t,e,n,r){const s=jO(n),i=s==='"'?"Quote":"Apostrophe",o=n.enter("definition");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("[");return c+=l.move(n.safe(n.associationId(t),{before:c,after:"]",...l.current()})),c+=l.move("]: "),a(),!t.url||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(t.url,{before:c,after:t.title?" ":`
`,...l.current()}))),a(),t.title&&(a=n.enter(`title${i}`),c+=l.move(" "+s),c+=l.move(n.safe(t.title,{before:c,after:s,...l.current()})),c+=l.move(s),a()),o(),c}function iDe(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function f1(t){return"&#x"+t.toString(16).toUpperCase()+";"}function lg(t){if(t===null||Kn(t)||_f(t))return 1;if(Qk(t))return 2}function qE(t,e,n){const r=lg(t),s=lg(e);return r===void 0?s===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:s===void 0?{inside:!1,outside:!1}:s===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}mte.peek=oDe;function mte(t,e,n,r){const s=iDe(n),i=n.enter("emphasis"),o=n.createTracker(r),a=o.move(s);let l=o.move(n.containerPhrasing(t,{after:s,before:a,...o.current()}));const c=l.charCodeAt(0),u=qE(r.before.charCodeAt(r.before.length-1),c,s);u.inside&&(l=f1(c)+l.slice(1));const d=l.charCodeAt(l.length-1),h=qE(r.after.charCodeAt(0),d,s);h.inside&&(l=l.slice(0,-1)+f1(d));const f=o.move(s);return i(),n.attentionEncodeSurroundingInfo={after:h.outside,before:u.outside},a+l+f}function oDe(t,e,n){return n.options.emphasis||"*"}const aDe={};function FO(t,e){const n=aDe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return gte(t,r,s)}function gte(t,e,n){if(lDe(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return g7(t.children,e,n)}return Array.isArray(t)?g7(t,e,n):""}function g7(t,e,n){const r=[];let s=-1;for(;++s<t.length;)r[s]=gte(t[s],e,n);return r.join("")}function lDe(t){return!!(t&&typeof t=="object")}function cDe(t,e){let n=!1;return Hg(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,MP}),!!((!t.depth||t.depth<3)&&FO(t)&&(e.options.setext||n))}function uDe(t,e,n,r){const s=Math.max(Math.min(6,t.depth||1),1),i=n.createTracker(r);if(cDe(t,n)){const u=n.enter("headingSetext"),d=n.enter("phrasing"),h=n.containerPhrasing(t,{...i.current(),before:`
`,after:`
`});return d(),u(),h+`
`+(s===1?"=":"-").repeat(h.length-(Math.max(h.lastIndexOf("\r"),h.lastIndexOf(`
`))+1))}const o="#".repeat(s),a=n.enter("headingAtx"),l=n.enter("phrasing");i.move(o+" ");let c=n.containerPhrasing(t,{before:"# ",after:`
`,...i.current()});return/^[\t ]/.test(c)&&(c=f1(c.charCodeAt(0))+c.slice(1)),c=c?o+" "+c:o,n.options.closeAtx&&(c+=" "+o),l(),a(),c}bte.peek=dDe;function bte(t){return t.value||""}function dDe(){return"<"}yte.peek=hDe;function yte(t,e,n,r){const s=jO(n),i=s==='"'?"Quote":"Apostrophe",o=n.enter("image");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("![");return c+=l.move(n.safe(t.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),a(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(t.url,{before:c,after:t.title?" ":")",...l.current()}))),a(),t.title&&(a=n.enter(`title${i}`),c+=l.move(" "+s),c+=l.move(n.safe(t.title,{before:c,after:s,...l.current()})),c+=l.move(s),a()),c+=l.move(")"),o(),c}function hDe(){return"!"}vte.peek=fDe;function vte(t,e,n,r){const s=t.referenceType,i=n.enter("imageReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("![");const c=n.safe(t.alt,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const u=n.stack;n.stack=[],o=n.enter("reference");const d=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=u,i(),s==="full"||!c||c!==d?l+=a.move(d+"]"):s==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function fDe(){return"!"}_te.peek=pDe;function _te(t,e,n){let r=t.value||"",s="`",i=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(r);)s+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++i<n.unsafe.length;){const o=n.unsafe[i],a=n.compilePattern(o);let l;if(o.atBreak)for(;l=a.exec(r);){let c=l.index;r.charCodeAt(c)===10&&r.charCodeAt(c-1)===13&&c--,r=r.slice(0,c)+" "+r.slice(l.index+1)}}return s+r+s}function pDe(){return"`"}function xte(t,e){const n=FO(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}wte.peek=mDe;function wte(t,e,n,r){const s=jO(n),i=s==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let a,l;if(xte(t,n)){const u=n.stack;n.stack=[],a=n.enter("autolink");let d=o.move("<");return d+=o.move(n.containerPhrasing(t,{before:d,after:">",...o.current()})),d+=o.move(">"),a(),n.stack=u,d}a=n.enter("link"),l=n.enter("label");let c=o.move("[");return c+=o.move(n.containerPhrasing(t,{before:c,after:"](",...o.current()})),c+=o.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),c+=o.move("<"),c+=o.move(n.safe(t.url,{before:c,after:">",...o.current()})),c+=o.move(">")):(l=n.enter("destinationRaw"),c+=o.move(n.safe(t.url,{before:c,after:t.title?" ":")",...o.current()}))),l(),t.title&&(l=n.enter(`title${i}`),c+=o.move(" "+s),c+=o.move(n.safe(t.title,{before:c,after:s,...o.current()})),c+=o.move(s),l()),c+=o.move(")"),a(),c}function mDe(t,e,n){return xte(t,n)?"<":"["}Ete.peek=gDe;function Ete(t,e,n,r){const s=t.referenceType,i=n.enter("linkReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("[");const c=n.containerPhrasing(t,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const u=n.stack;n.stack=[],o=n.enter("reference");const d=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=u,i(),s==="full"||!c||c!==d?l+=a.move(d+"]"):s==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function gDe(){return"["}function BO(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function bDe(t){const e=BO(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function yDe(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function Ste(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function vDe(t,e,n,r){const s=n.enter("list"),i=n.bulletCurrent;let o=t.ordered?yDe(n):BO(n);const a=t.ordered?o==="."?")":".":bDe(n);let l=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const u=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&u&&(!u.children||!u.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(l=!0),Ste(n)===o&&u){let d=-1;for(;++d<t.children.length;){const h=t.children[d];if(h&&h.type==="listItem"&&h.children&&h.children[0]&&h.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(o=a),n.bulletCurrent=o;const c=n.containerFlow(t,r);return n.bulletLastUsed=o,n.bulletCurrent=i,s(),c}function _De(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function xDe(t,e,n,r){const s=_De(n);let i=n.bulletCurrent||BO(n);e&&e.type==="list"&&e.ordered&&(i=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+i);let o=i.length+1;(s==="tab"||s==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const a=n.createTracker(r);a.move(i+" ".repeat(o-i.length)),a.shift(o);const l=n.enter("listItem"),c=n.indentLines(n.containerFlow(t,a.current()),u);return l(),c;function u(d,h,f){return h?(f?"":" ".repeat(o))+d:(f?i:i+" ".repeat(o-i.length))+d}}function wDe(t,e,n,r){const s=n.enter("paragraph"),i=n.enter("phrasing"),o=n.containerPhrasing(t,r);return i(),s(),o}const EDe=Jk(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function SDe(t,e,n,r){return(t.children.some(function(o){return EDe(o)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function kDe(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}kte.peek=CDe;function kte(t,e,n,r){const s=kDe(n),i=n.enter("strong"),o=n.createTracker(r),a=o.move(s+s);let l=o.move(n.containerPhrasing(t,{after:s,before:a,...o.current()}));const c=l.charCodeAt(0),u=qE(r.before.charCodeAt(r.before.length-1),c,s);u.inside&&(l=f1(c)+l.slice(1));const d=l.charCodeAt(l.length-1),h=qE(r.after.charCodeAt(0),d,s);h.inside&&(l=l.slice(0,-1)+f1(d));const f=o.move(s+s);return i(),n.attentionEncodeSurroundingInfo={after:h.outside,before:u.outside},a+l+f}function CDe(t,e,n){return n.options.strong||"*"}function ADe(t,e,n,r){return n.safe(t.value,r)}function TDe(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function NDe(t,e,n){const r=(Ste(n)+(n.options.ruleSpaces?" ":"")).repeat(TDe(n));return n.options.ruleSpaces?r.slice(0,-1):r}const Cte={blockquote:X6e,break:m7,code:nDe,definition:sDe,emphasis:mte,hardBreak:m7,heading:uDe,html:bte,image:yte,imageReference:vte,inlineCode:_te,link:wte,linkReference:Ete,list:vDe,listItem:xDe,paragraph:wDe,root:SDe,strong:kte,text:ADe,thematicBreak:NDe},b7=document.createElement("i");function UO(t){const e="&"+t+";";b7.innerHTML=e;const n=b7.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function Ate(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}const PDe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function IDe(t){return t.replace(PDe,RDe)}function RDe(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),i=s===120||s===88;return Ate(n.slice(i?2:1),i?16:10)}return UO(n)||t}function LDe(){return{enter:{table:ODe,tableData:y7,tableHeader:y7,tableRow:MDe},exit:{codeText:jDe,table:DDe,tableData:r5,tableHeader:r5,tableRow:r5}}}function ODe(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function DDe(t){this.exit(t),this.data.inTable=void 0}function MDe(t){this.enter({type:"tableRow",children:[]},t)}function r5(t){this.exit(t)}function y7(t){this.enter({type:"tableCell",children:[]},t)}function jDe(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,FDe));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function FDe(t,e){return e==="|"?e:t}function BDe(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,s=e.stringLength,i=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:h,table:o,tableCell:l,tableRow:a}};function o(f,g,y,m){return c(u(f,y,m),f.align)}function a(f,g,y,m){const b=d(f,y,m),v=c([b]);return v.slice(0,v.indexOf(`
`))}function l(f,g,y,m){const b=y.enter("tableCell"),v=y.enter("phrasing"),_=y.containerPhrasing(f,{...m,before:i,after:i});return v(),b(),_}function c(f,g){return K6e(f,{align:g,alignDelimiters:r,padding:n,stringLength:s})}function u(f,g,y){const m=f.children;let b=-1;const v=[],_=g.enter("table");for(;++b<m.length;)v[b]=d(m[b],g,y);return _(),v}function d(f,g,y){const m=f.children;let b=-1;const v=[],_=g.enter("tableRow");for(;++b<m.length;)v[b]=l(m[b],f,g,y);return _(),v}function h(f,g,y){let m=Cte.inlineCode(f,g,y);return y.stack.includes("tableCell")&&(m=m.replace(/\|/g,"\\$&")),m}}function UDe(){return{exit:{taskListCheckValueChecked:v7,taskListCheckValueUnchecked:v7,paragraph:HDe}}}function $De(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:zDe}}}function v7(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function HDe(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const s=e.children;let i=-1,o;for(;++i<s.length;){const a=s[i];if(a.type==="paragraph"){o=a;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function zDe(t,e,n,r){const s=t.children[0],i=typeof t.checked=="boolean"&&s&&s.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",a=n.createTracker(r);i&&a.move(o);let l=Cte.listItem(t,e,n,{...r,...a.current()});return i&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),l;function c(u){return u+o}}function VDe(){return[b6e(),F6e(),H6e(),LDe(),UDe()]}function WDe(t){return{extensions:[y6e(),B6e(t),z6e(),BDe(t),$De()]}}function no(t,e,n,r){const s=t.length;let i=0,o;if(e<0?e=-e>s?0:s+e:e=e>s?s:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);i<r.length;)o=r.slice(i,i+1e4),o.unshift(e,0),t.splice(...o),i+=1e4,e+=1e4}function No(t,e){return t.length>0?(no(t,t.length,0,e),t):e}const _7={}.hasOwnProperty;function Tte(t){const e={};let n=-1;for(;++n<t.length;)GDe(e,t[n]);return e}function GDe(t,e){let n;for(n in e){const s=(_7.call(t,n)?t[n]:void 0)||(t[n]={}),i=e[n];let o;if(i)for(o in i){_7.call(s,o)||(s[o]=[]);const a=i[o];qDe(s[o],Array.isArray(a)?a:a?[a]:[])}}}function qDe(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);no(t,0,0,r)}const KDe={tokenize:eMe,partial:!0},Nte={tokenize:tMe,partial:!0},Pte={tokenize:nMe,partial:!0},Ite={tokenize:rMe,partial:!0},YDe={tokenize:sMe,partial:!0},Rte={name:"wwwAutolink",tokenize:ZDe,previous:Ote},Lte={name:"protocolAutolink",tokenize:QDe,previous:Dte},au={name:"emailAutolink",tokenize:JDe,previous:Mte},tc={};function XDe(){return{text:tc}}let nh=48;for(;nh<123;)tc[nh]=au,nh++,nh===58?nh=65:nh===91&&(nh=97);tc[43]=au;tc[45]=au;tc[46]=au;tc[95]=au;tc[72]=[au,Lte];tc[104]=[au,Lte];tc[87]=[au,Rte];tc[119]=[au,Rte];function JDe(t,e,n){const r=this;let s,i;return o;function o(d){return!FP(d)||!Mte.call(r,r.previous)||$O(r.events)?n(d):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),a(d))}function a(d){return FP(d)?(t.consume(d),a):d===64?(t.consume(d),l):n(d)}function l(d){return d===46?t.check(YDe,u,c)(d):d===45||d===95||$s(d)?(i=!0,t.consume(d),l):u(d)}function c(d){return t.consume(d),s=!0,l}function u(d){return i&&s&&ai(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(d)):n(d)}}function ZDe(t,e,n){const r=this;return s;function s(o){return o!==87&&o!==119||!Ote.call(r,r.previous)||$O(r.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(KDe,t.attempt(Nte,t.attempt(Pte,i),n),n)(o))}function i(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function QDe(t,e,n){const r=this;let s="",i=!1;return o;function o(d){return(d===72||d===104)&&Dte.call(r,r.previous)&&!$O(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),s+=String.fromCodePoint(d),t.consume(d),a):n(d)}function a(d){if(ai(d)&&s.length<5)return s+=String.fromCodePoint(d),t.consume(d),a;if(d===58){const h=s.toLowerCase();if(h==="http"||h==="https")return t.consume(d),l}return n(d)}function l(d){return d===47?(t.consume(d),i?c:(i=!0,l)):n(d)}function c(d){return d===null||GE(d)||Kn(d)||_f(d)||Qk(d)?n(d):t.attempt(Nte,t.attempt(Pte,u),n)(d)}function u(d){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(d)}}function eMe(t,e,n){let r=0;return s;function s(o){return(o===87||o===119)&&r<3?(r++,t.consume(o),s):o===46&&r===3?(t.consume(o),i):n(o)}function i(o){return o===null?n(o):e(o)}}function tMe(t,e,n){let r,s,i;return o;function o(c){return c===46||c===95?t.check(Ite,l,a)(c):c===null||Kn(c)||_f(c)||c!==45&&Qk(c)?l(c):(i=!0,t.consume(c),o)}function a(c){return c===95?r=!0:(s=r,r=void 0),t.consume(c),o}function l(c){return s||r||!i?n(c):e(c)}}function nMe(t,e){let n=0,r=0;return s;function s(o){return o===40?(n++,t.consume(o),s):o===41&&r<n?i(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check(Ite,e,i)(o):o===null||Kn(o)||_f(o)?e(o):(t.consume(o),s)}function i(o){return o===41&&r++,t.consume(o),s}}function rMe(t,e,n){return r;function r(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(t.consume(a),r):a===38?(t.consume(a),i):a===93?(t.consume(a),s):a===60||a===null||Kn(a)||_f(a)?e(a):n(a)}function s(a){return a===null||a===40||a===91||Kn(a)||_f(a)?e(a):r(a)}function i(a){return ai(a)?o(a):n(a)}function o(a){return a===59?(t.consume(a),r):ai(a)?(t.consume(a),o):n(a)}}function sMe(t,e,n){return r;function r(i){return t.consume(i),s}function s(i){return $s(i)?n(i):e(i)}}function Ote(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||Kn(t)}function Dte(t){return!ai(t)}function Mte(t){return!(t===47||FP(t))}function FP(t){return t===43||t===45||t===46||t===95||$s(t)}function $O(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}function Vg(t){const e=[];let n=-1,r=0,s=0;for(;++n<t.length;){const i=t.charCodeAt(n);let o="";if(i===37&&$s(t.charCodeAt(n+1))&&$s(t.charCodeAt(n+2)))s=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(o=String.fromCharCode(i));else if(i>55295&&i<57344){const a=t.charCodeAt(n+1);i<56320&&a>56319&&a<57344?(o=String.fromCharCode(i,a),s=1):o=""}else o=String.fromCharCode(i);o&&(e.push(t.slice(r,n),encodeURIComponent(o)),r=n+s+1,o=""),s&&(n+=s,s=0)}return e.join("")+t.slice(r)}function eC(t,e,n){const r=[];let s=-1;for(;++s<t.length;){const i=t[s].resolveAll;i&&!r.includes(i)&&(e=i(e,n),r.push(i))}return e}const BP={name:"attention",resolveAll:iMe,tokenize:oMe};function iMe(t,e){let n=-1,r,s,i,o,a,l,c,u;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const d={...t[r][1].end},h={...t[n][1].start};x7(d,-l),x7(h,l),o={type:l>1?"strongSequence":"emphasisSequence",start:d,end:{...t[r][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:h},i={type:l>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},s={type:l>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},t[r][1].end={...o.start},t[n][1].start={...a.end},c=[],t[r][1].end.offset-t[r][1].start.offset&&(c=No(c,[["enter",t[r][1],e],["exit",t[r][1],e]])),c=No(c,[["enter",s,e],["enter",o,e],["exit",o,e],["enter",i,e]]),c=No(c,eC(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),c=No(c,[["exit",i,e],["enter",a,e],["exit",a,e],["exit",s,e]]),t[n][1].end.offset-t[n][1].start.offset?(u=2,c=No(c,[["enter",t[n][1],e],["exit",t[n][1],e]])):u=0,no(t,r-1,n-r+3,c),n=r+c.length-u-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function oMe(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=lg(r);let i;return o;function o(l){return i=l,t.enter("attentionSequence"),a(l)}function a(l){if(l===i)return t.consume(l),a;const c=t.exit("attentionSequence"),u=lg(l),d=!u||u===2&&s||n.includes(l),h=!s||s===2&&u||n.includes(r);return c._open=!!(i===42?d:d&&(s||!h)),c._close=!!(i===42?h:h&&(u||!d)),e(l)}}function x7(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const aMe={name:"autolink",tokenize:lMe};function lMe(t,e,n){let r=0;return s;function s(f){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),i}function i(f){return ai(f)?(t.consume(f),o):f===64?n(f):c(f)}function o(f){return f===43||f===45||f===46||$s(f)?(r=1,a(f)):c(f)}function a(f){return f===58?(t.consume(f),r=0,l):(f===43||f===45||f===46||$s(f))&&r++<32?(t.consume(f),a):(r=0,c(f))}function l(f){return f===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.exit("autolink"),e):f===null||f===32||f===60||GE(f)?n(f):(t.consume(f),l)}function c(f){return f===64?(t.consume(f),u):c6e(f)?(t.consume(f),c):n(f)}function u(f){return $s(f)?d(f):n(f)}function d(f){return f===46?(t.consume(f),r=0,u):f===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.exit("autolink"),e):h(f)}function h(f){if((f===45||$s(f))&&r++<63){const g=f===45?h:d;return t.consume(f),g}return n(f)}}function vn(t,e,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let i=0;return o;function o(l){return sn(l)?(t.enter(n),a(l)):e(l)}function a(l){return sn(l)&&i++<s?(t.consume(l),a):(t.exit(n),e(l))}}const Dv={partial:!0,tokenize:cMe};function cMe(t,e,n){return r;function r(i){return sn(i)?vn(t,s,"linePrefix")(i):s(i)}function s(i){return i===null||Mt(i)?e(i):n(i)}}const jte={continuation:{tokenize:dMe},exit:hMe,name:"blockQuote",tokenize:uMe};function uMe(t,e,n){const r=this;return s;function s(o){if(o===62){const a=r.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),i}return n(o)}function i(o){return sn(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function dMe(t,e,n){const r=this;return s;function s(o){return sn(o)?vn(t,i,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):i(o)}function i(o){return t.attempt(jte,e,n)(o)}}function hMe(t){t.exit("blockQuote")}const Fte={name:"characterEscape",tokenize:fMe};function fMe(t,e,n){return r;function r(i){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(i),t.exit("escapeMarker"),s}function s(i){return d6e(i)?(t.enter("characterEscapeValue"),t.consume(i),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(i)}}const Bte={name:"characterReference",tokenize:pMe};function pMe(t,e,n){const r=this;let s=0,i,o;return a;function a(d){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(d),t.exit("characterReferenceMarker"),l}function l(d){return d===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(d),t.exit("characterReferenceMarkerNumeric"),c):(t.enter("characterReferenceValue"),i=31,o=$s,u(d))}function c(d){return d===88||d===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(d),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),i=6,o=u6e,u):(t.enter("characterReferenceValue"),i=7,o=jP,u(d))}function u(d){if(d===59&&s){const h=t.exit("characterReferenceValue");return o===$s&&!UO(r.sliceSerialize(h))?n(d):(t.enter("characterReferenceMarker"),t.consume(d),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(d)&&s++<i?(t.consume(d),u):n(d)}}const w7={partial:!0,tokenize:gMe},E7={concrete:!0,name:"codeFenced",tokenize:mMe};function mMe(t,e,n){const r=this,s={partial:!0,tokenize:w};let i=0,o=0,a;return l;function l(S){return c(S)}function c(S){const k=r.events[r.events.length-1];return i=k&&k[1].type==="linePrefix"?k[2].sliceSerialize(k[1],!0).length:0,a=S,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),u(S)}function u(S){return S===a?(o++,t.consume(S),u):o<3?n(S):(t.exit("codeFencedFenceSequence"),sn(S)?vn(t,d,"whitespace")(S):d(S))}function d(S){return S===null||Mt(S)?(t.exit("codeFencedFence"),r.interrupt?e(S):t.check(w7,y,E)(S)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),h(S))}function h(S){return S===null||Mt(S)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),d(S)):sn(S)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),vn(t,f,"whitespace")(S)):S===96&&S===a?n(S):(t.consume(S),h)}function f(S){return S===null||Mt(S)?d(S):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),g(S))}function g(S){return S===null||Mt(S)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),d(S)):S===96&&S===a?n(S):(t.consume(S),g)}function y(S){return t.attempt(s,E,m)(S)}function m(S){return t.enter("lineEnding"),t.consume(S),t.exit("lineEnding"),b}function b(S){return i>0&&sn(S)?vn(t,v,"linePrefix",i+1)(S):v(S)}function v(S){return S===null||Mt(S)?t.check(w7,y,E)(S):(t.enter("codeFlowValue"),_(S))}function _(S){return S===null||Mt(S)?(t.exit("codeFlowValue"),v(S)):(t.consume(S),_)}function E(S){return t.exit("codeFenced"),e(S)}function w(S,k,x){let I=0;return R;function R($){return S.enter("lineEnding"),S.consume($),S.exit("lineEnding"),C}function C($){return S.enter("codeFencedFence"),sn($)?vn(S,N,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)($):N($)}function N($){return $===a?(S.enter("codeFencedFenceSequence"),O($)):x($)}function O($){return $===a?(I++,S.consume($),O):I>=o?(S.exit("codeFencedFenceSequence"),sn($)?vn(S,P,"whitespace")($):P($)):x($)}function P($){return $===null||Mt($)?(S.exit("codeFencedFence"),k($)):x($)}}}function gMe(t,e,n){const r=this;return s;function s(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i)}function i(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}const s5={name:"codeIndented",tokenize:yMe},bMe={partial:!0,tokenize:vMe};function yMe(t,e,n){const r=this;return s;function s(c){return t.enter("codeIndented"),vn(t,i,"linePrefix",5)(c)}function i(c){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?o(c):n(c)}function o(c){return c===null?l(c):Mt(c)?t.attempt(bMe,o,l)(c):(t.enter("codeFlowValue"),a(c))}function a(c){return c===null||Mt(c)?(t.exit("codeFlowValue"),o(c)):(t.consume(c),a)}function l(c){return t.exit("codeIndented"),e(c)}}function vMe(t,e,n){const r=this;return s;function s(o){return r.parser.lazy[r.now().line]?n(o):Mt(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):vn(t,i,"linePrefix",5)(o)}function i(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):Mt(o)?s(o):n(o)}}const _Me={name:"codeText",previous:wMe,resolve:xMe,tokenize:EMe};function xMe(t){let e=t.length-4,n=3,r,s;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)s===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(s=r):(r===e||t[r][1].type==="lineEnding")&&(t[s][1].type="codeTextData",r!==s+2&&(t[s][1].end=t[r-1][1].end,t.splice(s+2,r-s-2),e-=r-s-2,r=s+2),s=void 0);return t}function wMe(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function EMe(t,e,n){let r=0,s,i;return o;function o(d){return t.enter("codeText"),t.enter("codeTextSequence"),a(d)}function a(d){return d===96?(t.consume(d),r++,a):(t.exit("codeTextSequence"),l(d))}function l(d){return d===null?n(d):d===32?(t.enter("space"),t.consume(d),t.exit("space"),l):d===96?(i=t.enter("codeTextSequence"),s=0,u(d)):Mt(d)?(t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),l):(t.enter("codeTextData"),c(d))}function c(d){return d===null||d===32||d===96||Mt(d)?(t.exit("codeTextData"),l(d)):(t.consume(d),c)}function u(d){return d===96?(t.consume(d),s++,u):s===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(d)):(i.type="codeTextData",c(d))}}class SMe{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const s=n||0;this.setCursor(Math.trunc(e));const i=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&H0(this.left,r),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),H0(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),H0(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);H0(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);H0(this.left,n.reverse())}}}function H0(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function Ute(t){const e={};let n=-1,r,s,i,o,a,l,c;const u=new SMe(t);for(;++n<u.length;){for(;n in e;)n=e[n];if(r=u.get(n),n&&r[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,i=0,i<l.length&&l[i][1].type==="lineEndingBlank"&&(i+=2),i<l.length&&l[i][1].type==="content"))for(;++i<l.length&&l[i][1].type!=="content";)l[i][1].type==="chunkText"&&(l[i][1]._isInFirstContentOfListItem=!0,i++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,kMe(u,n)),n=e[n],c=!0);else if(r[1]._container){for(i=n,s=void 0;i--;)if(o=u.get(i),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(s&&(u.get(s)[1].type="lineEndingBlank"),o[1].type="lineEnding",s=i);else if(o[1].type!=="linePrefix")break;s&&(r[1].end={...u.get(s)[1].start},a=u.slice(s,n),a.unshift(r),u.splice(s,n-s+1,a))}}return no(t,0,Number.POSITIVE_INFINITY,u.slice(0)),!c}function kMe(t,e){const n=t.get(e)[1],r=t.get(e)[2];let s=e-1;const i=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,l=[],c={};let u,d,h=-1,f=n,g=0,y=0;const m=[y];for(;f;){for(;t.get(++s)[1]!==f;);i.push(s),f._tokenizer||(u=r.sliceStream(f),f.next||u.push(null),d&&o.defineSkip(f.start),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),d=f,f=f.next}for(f=n;++h<a.length;)a[h][0]==="exit"&&a[h-1][0]==="enter"&&a[h][1].type===a[h-1][1].type&&a[h][1].start.line!==a[h][1].end.line&&(y=h+1,m.push(y),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(o.events=[],f?(f._tokenizer=void 0,f.previous=void 0):m.pop(),h=m.length;h--;){const b=a.slice(m[h],m[h+1]),v=i.pop();l.push([v,v+b.length-1]),t.splice(v,2,b)}for(l.reverse(),h=-1;++h<l.length;)c[g+l[h][0]]=g+l[h][1],g+=l[h][1]-l[h][0]-1;return c}const CMe={resolve:TMe,tokenize:NMe},AMe={partial:!0,tokenize:PMe};function TMe(t){return Ute(t),t}function NMe(t,e){let n;return r;function r(a){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),s(a)}function s(a){return a===null?i(a):Mt(a)?t.check(AMe,o,i)(a):(t.consume(a),s)}function i(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function o(a){return t.consume(a),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function PMe(t,e,n){const r=this;return s;function s(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),vn(t,i,"linePrefix")}function i(o){if(o===null||Mt(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):t.interrupt(r.parser.constructs.flow,n,e)(o)}}function $te(t,e,n,r,s,i,o,a,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return d;function d(b){return b===60?(t.enter(r),t.enter(s),t.enter(i),t.consume(b),t.exit(i),h):b===null||b===32||b===41||GE(b)?n(b):(t.enter(r),t.enter(o),t.enter(a),t.enter("chunkString",{contentType:"string"}),y(b))}function h(b){return b===62?(t.enter(i),t.consume(b),t.exit(i),t.exit(s),t.exit(r),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),f(b))}function f(b){return b===62?(t.exit("chunkString"),t.exit(a),h(b)):b===null||b===60||Mt(b)?n(b):(t.consume(b),b===92?g:f)}function g(b){return b===60||b===62||b===92?(t.consume(b),f):f(b)}function y(b){return!u&&(b===null||b===41||Kn(b))?(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(r),e(b)):u<c&&b===40?(t.consume(b),u++,y):b===41?(t.consume(b),u--,y):b===null||b===32||b===40||GE(b)?n(b):(t.consume(b),b===92?m:y)}function m(b){return b===40||b===41||b===92?(t.consume(b),y):y(b)}}function Hte(t,e,n,r,s,i){const o=this;let a=0,l;return c;function c(f){return t.enter(r),t.enter(s),t.consume(f),t.exit(s),t.enter(i),u}function u(f){return a>999||f===null||f===91||f===93&&!l||f===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(f):f===93?(t.exit(i),t.enter(s),t.consume(f),t.exit(s),t.exit(r),e):Mt(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),u):(t.enter("chunkString",{contentType:"string"}),d(f))}function d(f){return f===null||f===91||f===93||Mt(f)||a++>999?(t.exit("chunkString"),u(f)):(t.consume(f),l||(l=!sn(f)),f===92?h:d)}function h(f){return f===91||f===92||f===93?(t.consume(f),a++,d):d(f)}}function zte(t,e,n,r,s,i){let o;return a;function a(h){return h===34||h===39||h===40?(t.enter(r),t.enter(s),t.consume(h),t.exit(s),o=h===40?41:h,l):n(h)}function l(h){return h===o?(t.enter(s),t.consume(h),t.exit(s),t.exit(r),e):(t.enter(i),c(h))}function c(h){return h===o?(t.exit(i),l(o)):h===null?n(h):Mt(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),vn(t,c,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),u(h))}function u(h){return h===o||h===null||Mt(h)?(t.exit("chunkString"),c(h)):(t.consume(h),h===92?d:u)}function d(h){return h===o||h===92?(t.consume(h),u):u(h)}}function ly(t,e){let n;return r;function r(s){return Mt(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),n=!0,r):sn(s)?vn(t,r,n?"linePrefix":"lineSuffix")(s):e(s)}}const IMe={name:"definition",tokenize:LMe},RMe={partial:!0,tokenize:OMe};function LMe(t,e,n){const r=this;let s;return i;function i(f){return t.enter("definition"),o(f)}function o(f){return Hte.call(r,t,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(f)}function a(f){return s=Sa(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),f===58?(t.enter("definitionMarker"),t.consume(f),t.exit("definitionMarker"),l):n(f)}function l(f){return Kn(f)?ly(t,c)(f):c(f)}function c(f){return $te(t,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(f)}function u(f){return t.attempt(RMe,d,d)(f)}function d(f){return sn(f)?vn(t,h,"whitespace")(f):h(f)}function h(f){return f===null||Mt(f)?(t.exit("definition"),r.parser.defined.push(s),e(f)):n(f)}}function OMe(t,e,n){return r;function r(a){return Kn(a)?ly(t,s)(a):n(a)}function s(a){return zte(t,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function i(a){return sn(a)?vn(t,o,"whitespace")(a):o(a)}function o(a){return a===null||Mt(a)?e(a):n(a)}}const DMe={name:"hardBreakEscape",tokenize:MMe};function MMe(t,e,n){return r;function r(i){return t.enter("hardBreakEscape"),t.consume(i),s}function s(i){return Mt(i)?(t.exit("hardBreakEscape"),e(i)):n(i)}}const jMe={name:"headingAtx",resolve:FMe,tokenize:BMe};function FMe(t,e){let n=t.length-2,r=3,s,i;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},i={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},no(t,r,n-r+1,[["enter",s,e],["enter",i,e],["exit",i,e],["exit",s,e]])),t}function BMe(t,e,n){let r=0;return s;function s(u){return t.enter("atxHeading"),i(u)}function i(u){return t.enter("atxHeadingSequence"),o(u)}function o(u){return u===35&&r++<6?(t.consume(u),o):u===null||Kn(u)?(t.exit("atxHeadingSequence"),a(u)):n(u)}function a(u){return u===35?(t.enter("atxHeadingSequence"),l(u)):u===null||Mt(u)?(t.exit("atxHeading"),e(u)):sn(u)?vn(t,a,"whitespace")(u):(t.enter("atxHeadingText"),c(u))}function l(u){return u===35?(t.consume(u),l):(t.exit("atxHeadingSequence"),a(u))}function c(u){return u===null||u===35||Kn(u)?(t.exit("atxHeadingText"),a(u)):(t.consume(u),c)}}const UMe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],S7=["pre","script","style","textarea"],$Me={concrete:!0,name:"htmlFlow",resolveTo:VMe,tokenize:WMe},HMe={partial:!0,tokenize:qMe},zMe={partial:!0,tokenize:GMe};function VMe(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function WMe(t,e,n){const r=this;let s,i,o,a,l;return c;function c(j){return u(j)}function u(j){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(j),d}function d(j){return j===33?(t.consume(j),h):j===47?(t.consume(j),i=!0,y):j===63?(t.consume(j),s=3,r.interrupt?e:F):ai(j)?(t.consume(j),o=String.fromCharCode(j),m):n(j)}function h(j){return j===45?(t.consume(j),s=2,f):j===91?(t.consume(j),s=5,a=0,g):ai(j)?(t.consume(j),s=4,r.interrupt?e:F):n(j)}function f(j){return j===45?(t.consume(j),r.interrupt?e:F):n(j)}function g(j){const V="CDATA[";return j===V.charCodeAt(a++)?(t.consume(j),a===V.length?r.interrupt?e:N:g):n(j)}function y(j){return ai(j)?(t.consume(j),o=String.fromCharCode(j),m):n(j)}function m(j){if(j===null||j===47||j===62||Kn(j)){const V=j===47,W=o.toLowerCase();return!V&&!i&&S7.includes(W)?(s=1,r.interrupt?e(j):N(j)):UMe.includes(o.toLowerCase())?(s=6,V?(t.consume(j),b):r.interrupt?e(j):N(j)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(j):i?v(j):_(j))}return j===45||$s(j)?(t.consume(j),o+=String.fromCharCode(j),m):n(j)}function b(j){return j===62?(t.consume(j),r.interrupt?e:N):n(j)}function v(j){return sn(j)?(t.consume(j),v):R(j)}function _(j){return j===47?(t.consume(j),R):j===58||j===95||ai(j)?(t.consume(j),E):sn(j)?(t.consume(j),_):R(j)}function E(j){return j===45||j===46||j===58||j===95||$s(j)?(t.consume(j),E):w(j)}function w(j){return j===61?(t.consume(j),S):sn(j)?(t.consume(j),w):_(j)}function S(j){return j===null||j===60||j===61||j===62||j===96?n(j):j===34||j===39?(t.consume(j),l=j,k):sn(j)?(t.consume(j),S):x(j)}function k(j){return j===l?(t.consume(j),l=null,I):j===null||Mt(j)?n(j):(t.consume(j),k)}function x(j){return j===null||j===34||j===39||j===47||j===60||j===61||j===62||j===96||Kn(j)?w(j):(t.consume(j),x)}function I(j){return j===47||j===62||sn(j)?_(j):n(j)}function R(j){return j===62?(t.consume(j),C):n(j)}function C(j){return j===null||Mt(j)?N(j):sn(j)?(t.consume(j),C):n(j)}function N(j){return j===45&&s===2?(t.consume(j),ee):j===60&&s===1?(t.consume(j),J):j===62&&s===4?(t.consume(j),G):j===63&&s===3?(t.consume(j),F):j===93&&s===5?(t.consume(j),M):Mt(j)&&(s===6||s===7)?(t.exit("htmlFlowData"),t.check(HMe,D,O)(j)):j===null||Mt(j)?(t.exit("htmlFlowData"),O(j)):(t.consume(j),N)}function O(j){return t.check(zMe,P,D)(j)}function P(j){return t.enter("lineEnding"),t.consume(j),t.exit("lineEnding"),$}function $(j){return j===null||Mt(j)?O(j):(t.enter("htmlFlowData"),N(j))}function ee(j){return j===45?(t.consume(j),F):N(j)}function J(j){return j===47?(t.consume(j),o="",Z):N(j)}function Z(j){if(j===62){const V=o.toLowerCase();return S7.includes(V)?(t.consume(j),G):N(j)}return ai(j)&&o.length<8?(t.consume(j),o+=String.fromCharCode(j),Z):N(j)}function M(j){return j===93?(t.consume(j),F):N(j)}function F(j){return j===62?(t.consume(j),G):j===45&&s===2?(t.consume(j),F):N(j)}function G(j){return j===null||Mt(j)?(t.exit("htmlFlowData"),D(j)):(t.consume(j),G)}function D(j){return t.exit("htmlFlow"),e(j)}}function GMe(t,e,n){const r=this;return s;function s(o){return Mt(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):n(o)}function i(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function qMe(t,e,n){return r;function r(s){return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),t.attempt(Dv,e,n)}}const KMe={name:"htmlText",tokenize:YMe};function YMe(t,e,n){const r=this;let s,i,o;return a;function a(F){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(F),l}function l(F){return F===33?(t.consume(F),c):F===47?(t.consume(F),w):F===63?(t.consume(F),_):ai(F)?(t.consume(F),x):n(F)}function c(F){return F===45?(t.consume(F),u):F===91?(t.consume(F),i=0,g):ai(F)?(t.consume(F),v):n(F)}function u(F){return F===45?(t.consume(F),f):n(F)}function d(F){return F===null?n(F):F===45?(t.consume(F),h):Mt(F)?(o=d,J(F)):(t.consume(F),d)}function h(F){return F===45?(t.consume(F),f):d(F)}function f(F){return F===62?ee(F):F===45?h(F):d(F)}function g(F){const G="CDATA[";return F===G.charCodeAt(i++)?(t.consume(F),i===G.length?y:g):n(F)}function y(F){return F===null?n(F):F===93?(t.consume(F),m):Mt(F)?(o=y,J(F)):(t.consume(F),y)}function m(F){return F===93?(t.consume(F),b):y(F)}function b(F){return F===62?ee(F):F===93?(t.consume(F),b):y(F)}function v(F){return F===null||F===62?ee(F):Mt(F)?(o=v,J(F)):(t.consume(F),v)}function _(F){return F===null?n(F):F===63?(t.consume(F),E):Mt(F)?(o=_,J(F)):(t.consume(F),_)}function E(F){return F===62?ee(F):_(F)}function w(F){return ai(F)?(t.consume(F),S):n(F)}function S(F){return F===45||$s(F)?(t.consume(F),S):k(F)}function k(F){return Mt(F)?(o=k,J(F)):sn(F)?(t.consume(F),k):ee(F)}function x(F){return F===45||$s(F)?(t.consume(F),x):F===47||F===62||Kn(F)?I(F):n(F)}function I(F){return F===47?(t.consume(F),ee):F===58||F===95||ai(F)?(t.consume(F),R):Mt(F)?(o=I,J(F)):sn(F)?(t.consume(F),I):ee(F)}function R(F){return F===45||F===46||F===58||F===95||$s(F)?(t.consume(F),R):C(F)}function C(F){return F===61?(t.consume(F),N):Mt(F)?(o=C,J(F)):sn(F)?(t.consume(F),C):I(F)}function N(F){return F===null||F===60||F===61||F===62||F===96?n(F):F===34||F===39?(t.consume(F),s=F,O):Mt(F)?(o=N,J(F)):sn(F)?(t.consume(F),N):(t.consume(F),P)}function O(F){return F===s?(t.consume(F),s=void 0,$):F===null?n(F):Mt(F)?(o=O,J(F)):(t.consume(F),O)}function P(F){return F===null||F===34||F===39||F===60||F===61||F===96?n(F):F===47||F===62||Kn(F)?I(F):(t.consume(F),P)}function $(F){return F===47||F===62||Kn(F)?I(F):n(F)}function ee(F){return F===62?(t.consume(F),t.exit("htmlTextData"),t.exit("htmlText"),e):n(F)}function J(F){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(F),t.exit("lineEnding"),Z}function Z(F){return sn(F)?vn(t,M,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):M(F)}function M(F){return t.enter("htmlTextData"),o(F)}}const HO={name:"labelEnd",resolveAll:QMe,resolveTo:e8e,tokenize:t8e},XMe={tokenize:n8e},JMe={tokenize:r8e},ZMe={tokenize:s8e};function QMe(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",e+=s}}return t.length!==n.length&&no(t,0,t.length,n),t}function e8e(t,e){let n=t.length,r=0,s,i,o,a;for(;n--;)if(s=t[n][1],i){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;t[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(i=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(o=n);const l={type:t[i][1].type==="labelLink"?"link":"image",start:{...t[i][1].start},end:{...t[t.length-1][1].end}},c={type:"label",start:{...t[i][1].start},end:{...t[o][1].end}},u={type:"labelText",start:{...t[i+r+2][1].end},end:{...t[o-2][1].start}};return a=[["enter",l,e],["enter",c,e]],a=No(a,t.slice(i+1,i+r+3)),a=No(a,[["enter",u,e]]),a=No(a,eC(e.parser.constructs.insideSpan.null,t.slice(i+r+4,o-3),e)),a=No(a,[["exit",u,e],t[o-2],t[o-1],["exit",c,e]]),a=No(a,t.slice(o+1)),a=No(a,[["exit",l,e]]),no(t,i,t.length,a),t}function t8e(t,e,n){const r=this;let s=r.events.length,i,o;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){i=r.events[s][1];break}return a;function a(h){return i?i._inactive?d(h):(o=r.parser.defined.includes(Sa(r.sliceSerialize({start:i.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(h),t.exit("labelMarker"),t.exit("labelEnd"),l):n(h)}function l(h){return h===40?t.attempt(XMe,u,o?u:d)(h):h===91?t.attempt(JMe,u,o?c:d)(h):o?u(h):d(h)}function c(h){return t.attempt(ZMe,u,d)(h)}function u(h){return e(h)}function d(h){return i._balanced=!0,n(h)}}function n8e(t,e,n){return r;function r(d){return t.enter("resource"),t.enter("resourceMarker"),t.consume(d),t.exit("resourceMarker"),s}function s(d){return Kn(d)?ly(t,i)(d):i(d)}function i(d){return d===41?u(d):$te(t,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function o(d){return Kn(d)?ly(t,l)(d):u(d)}function a(d){return n(d)}function l(d){return d===34||d===39||d===40?zte(t,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):u(d)}function c(d){return Kn(d)?ly(t,u)(d):u(d)}function u(d){return d===41?(t.enter("resourceMarker"),t.consume(d),t.exit("resourceMarker"),t.exit("resource"),e):n(d)}}function r8e(t,e,n){const r=this;return s;function s(a){return Hte.call(r,t,i,o,"reference","referenceMarker","referenceString")(a)}function i(a){return r.parser.defined.includes(Sa(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(a):n(a)}function o(a){return n(a)}}function s8e(t,e,n){return r;function r(i){return t.enter("reference"),t.enter("referenceMarker"),t.consume(i),t.exit("referenceMarker"),s}function s(i){return i===93?(t.enter("referenceMarker"),t.consume(i),t.exit("referenceMarker"),t.exit("reference"),e):n(i)}}const i8e={name:"labelStartImage",resolveAll:HO.resolveAll,tokenize:o8e};function o8e(t,e,n){const r=this;return s;function s(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),i}function i(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const a8e={name:"labelStartLink",resolveAll:HO.resolveAll,tokenize:l8e};function l8e(t,e,n){const r=this;return s;function s(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),i}function i(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const i5={name:"lineEnding",tokenize:c8e};function c8e(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),vn(t,e,"linePrefix")}}const a2={name:"thematicBreak",tokenize:u8e};function u8e(t,e,n){let r=0,s;return i;function i(c){return t.enter("thematicBreak"),o(c)}function o(c){return s=c,a(c)}function a(c){return c===s?(t.enter("thematicBreakSequence"),l(c)):r>=3&&(c===null||Mt(c))?(t.exit("thematicBreak"),e(c)):n(c)}function l(c){return c===s?(t.consume(c),r++,l):(t.exit("thematicBreakSequence"),sn(c)?vn(t,a,"whitespace")(c):a(c))}}const Si={continuation:{tokenize:p8e},exit:g8e,name:"list",tokenize:f8e},d8e={partial:!0,tokenize:b8e},h8e={partial:!0,tokenize:m8e};function f8e(t,e,n){const r=this,s=r.events[r.events.length-1];let i=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,o=0;return a;function a(f){const g=r.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(g==="listUnordered"?!r.containerState.marker||f===r.containerState.marker:jP(f)){if(r.containerState.type||(r.containerState.type=g,t.enter(g,{_container:!0})),g==="listUnordered")return t.enter("listItemPrefix"),f===42||f===45?t.check(a2,n,c)(f):c(f);if(!r.interrupt||f===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(f)}return n(f)}function l(f){return jP(f)&&++o<10?(t.consume(f),l):(!r.interrupt||o<2)&&(r.containerState.marker?f===r.containerState.marker:f===41||f===46)?(t.exit("listItemValue"),c(f)):n(f)}function c(f){return t.enter("listItemMarker"),t.consume(f),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||f,t.check(Dv,r.interrupt?n:u,t.attempt(d8e,h,d))}function u(f){return r.containerState.initialBlankLine=!0,i++,h(f)}function d(f){return sn(f)?(t.enter("listItemPrefixWhitespace"),t.consume(f),t.exit("listItemPrefixWhitespace"),h):n(f)}function h(f){return r.containerState.size=i+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(f)}}function p8e(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(Dv,s,i);function s(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,vn(t,e,"listItemIndent",r.containerState.size+1)(a)}function i(a){return r.containerState.furtherBlankLines||!sn(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(h8e,e,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,vn(t,t.attempt(Si,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function m8e(t,e,n){const r=this;return vn(t,s,"listItemIndent",r.containerState.size+1);function s(i){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(i):n(i)}}function g8e(t){t.exit(this.containerState.type)}function b8e(t,e,n){const r=this;return vn(t,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(i){const o=r.events[r.events.length-1];return!sn(i)&&o&&o[1].type==="listItemPrefixWhitespace"?e(i):n(i)}}const k7={name:"setextUnderline",resolveTo:y8e,tokenize:v8e};function y8e(t,e){let n=t.length,r,s,i;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(s=n)}else t[n][1].type==="content"&&t.splice(n,1),!i&&t[n][1].type==="definition"&&(i=n);const o={type:"setextHeading",start:{...t[s][1].start},end:{...t[t.length-1][1].end}};return t[s][1].type="setextHeadingText",i?(t.splice(s,0,["enter",o,e]),t.splice(i+1,0,["exit",t[r][1],e]),t[r][1].end={...t[i][1].end}):t[r][1]=o,t.push(["exit",o,e]),t}function v8e(t,e,n){const r=this;let s;return i;function i(c){let u=r.events.length,d;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){d=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(t.enter("setextHeadingLine"),s=c,o(c)):n(c)}function o(c){return t.enter("setextHeadingLineSequence"),a(c)}function a(c){return c===s?(t.consume(c),a):(t.exit("setextHeadingLineSequence"),sn(c)?vn(t,l,"lineSuffix")(c):l(c))}function l(c){return c===null||Mt(c)?(t.exit("setextHeadingLine"),e(c)):n(c)}}const _8e={tokenize:T8e,partial:!0};function x8e(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:k8e,continuation:{tokenize:C8e},exit:A8e}},text:{91:{name:"gfmFootnoteCall",tokenize:S8e},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:w8e,resolveTo:E8e}}}}function w8e(t,e,n){const r=this;let s=r.events.length;const i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;s--;){const l=r.events[s][1];if(l.type==="labelImage"){o=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return a;function a(l){if(!o||!o._balanced)return n(l);const c=Sa(r.sliceSerialize({start:o.end,end:r.now()}));return c.codePointAt(0)!==94||!i.includes(c.slice(1))?n(l):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(l),t.exit("gfmFootnoteCallLabelMarker"),e(l))}}function E8e(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const i={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},i.start),end:Object.assign({},i.end)},a=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",s,e],["exit",s,e],["enter",i,e],["enter",o,e],["exit",o,e],["exit",i,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...a),t}function S8e(t,e,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i=0,o;return a;function a(d){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(d),t.exit("gfmFootnoteCallLabelMarker"),l}function l(d){return d!==94?n(d):(t.enter("gfmFootnoteCallMarker"),t.consume(d),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",c)}function c(d){if(i>999||d===93&&!o||d===null||d===91||Kn(d))return n(d);if(d===93){t.exit("chunkString");const h=t.exit("gfmFootnoteCallString");return s.includes(Sa(r.sliceSerialize(h)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(d),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(d)}return Kn(d)||(o=!0),i++,t.consume(d),d===92?u:c}function u(d){return d===91||d===92||d===93?(t.consume(d),i++,c):c(d)}}function k8e(t,e,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i,o=0,a;return l;function l(g){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(g),t.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(g){return g===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(g),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",u):n(g)}function u(g){if(o>999||g===93&&!a||g===null||g===91||Kn(g))return n(g);if(g===93){t.exit("chunkString");const y=t.exit("gfmFootnoteDefinitionLabelString");return i=Sa(r.sliceSerialize(y)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(g),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),h}return Kn(g)||(a=!0),o++,t.consume(g),g===92?d:u}function d(g){return g===91||g===92||g===93?(t.consume(g),o++,u):u(g)}function h(g){return g===58?(t.enter("definitionMarker"),t.consume(g),t.exit("definitionMarker"),s.includes(i)||s.push(i),vn(t,f,"gfmFootnoteDefinitionWhitespace")):n(g)}function f(g){return e(g)}}function C8e(t,e,n){return t.check(Dv,e,t.attempt(_8e,e,n))}function A8e(t){t.exit("gfmFootnoteDefinition")}function T8e(t,e,n){const r=this;return vn(t,s,"gfmFootnoteDefinitionIndent",5);function s(i){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(i):n(i)}}function N8e(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:i,resolveAll:s};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function s(o,a){let l=-1;for(;++l<o.length;)if(o[l][0]==="enter"&&o[l][1].type==="strikethroughSequenceTemporary"&&o[l][1]._close){let c=l;for(;c--;)if(o[c][0]==="exit"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._open&&o[l][1].end.offset-o[l][1].start.offset===o[c][1].end.offset-o[c][1].start.offset){o[l][1].type="strikethroughSequence",o[c][1].type="strikethroughSequence";const u={type:"strikethrough",start:Object.assign({},o[c][1].start),end:Object.assign({},o[l][1].end)},d={type:"strikethroughText",start:Object.assign({},o[c][1].end),end:Object.assign({},o[l][1].start)},h=[["enter",u,a],["enter",o[c][1],a],["exit",o[c][1],a],["enter",d,a]],f=a.parser.constructs.insideSpan.null;f&&no(h,h.length,0,eC(f,o.slice(c+1,l),a)),no(h,h.length,0,[["exit",d,a],["enter",o[l][1],a],["exit",o[l][1],a],["exit",u,a]]),no(o,c-1,l-c+3,h),l=c+h.length-2;break}}for(l=-1;++l<o.length;)o[l][1].type==="strikethroughSequenceTemporary"&&(o[l][1].type="data");return o}function i(o,a,l){const c=this.previous,u=this.events;let d=0;return h;function h(g){return c===126&&u[u.length-1][1].type!=="characterEscape"?l(g):(o.enter("strikethroughSequenceTemporary"),f(g))}function f(g){const y=lg(c);if(g===126)return d>1?l(g):(o.consume(g),d++,f);if(d<2&&!n)return l(g);const m=o.exit("strikethroughSequenceTemporary"),b=lg(g);return m._open=!b||b===2&&!!y,m._close=!y||y===2&&!!b,a(g)}}}class P8e{constructor(){this.map=[]}add(e,n,r){I8e(this,e,n,r)}consume(e){if(this.map.sort(function(i,o){return i[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let s=r.pop();for(;s;){for(const i of s)e.push(i);s=r.pop()}this.map.length=0}}function I8e(t,e,n,r){let s=0;if(!(n===0&&r.length===0)){for(;s<t.map.length;){if(t.map[s][0]===e){t.map[s][1]+=n,t.map[s][2].push(...r);return}s+=1}t.map.push([e,n,r])}}function R8e(t,e){let n=!1;const r=[];for(;e<t.length;){const s=t[e];if(n){if(s[0]==="enter")s[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(s[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const i=r.length-1;r[i]=r[i]==="left"?"center":"right"}}else if(s[1].type==="tableDelimiterRow")break}else s[0]==="enter"&&s[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function L8e(){return{flow:{null:{name:"table",tokenize:O8e,resolveAll:D8e}}}}function O8e(t,e,n){const r=this;let s=0,i=0,o;return a;function a(R){let C=r.events.length-1;for(;C>-1;){const P=r.events[C][1].type;if(P==="lineEnding"||P==="linePrefix")C--;else break}const N=C>-1?r.events[C][1].type:null,O=N==="tableHead"||N==="tableRow"?S:l;return O===S&&r.parser.lazy[r.now().line]?n(R):O(R)}function l(R){return t.enter("tableHead"),t.enter("tableRow"),c(R)}function c(R){return R===124||(o=!0,i+=1),u(R)}function u(R){return R===null?n(R):Mt(R)?i>1?(i=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(R),t.exit("lineEnding"),f):n(R):sn(R)?vn(t,u,"whitespace")(R):(i+=1,o&&(o=!1,s+=1),R===124?(t.enter("tableCellDivider"),t.consume(R),t.exit("tableCellDivider"),o=!0,u):(t.enter("data"),d(R)))}function d(R){return R===null||R===124||Kn(R)?(t.exit("data"),u(R)):(t.consume(R),R===92?h:d)}function h(R){return R===92||R===124?(t.consume(R),d):d(R)}function f(R){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(R):(t.enter("tableDelimiterRow"),o=!1,sn(R)?vn(t,g,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(R):g(R))}function g(R){return R===45||R===58?m(R):R===124?(o=!0,t.enter("tableCellDivider"),t.consume(R),t.exit("tableCellDivider"),y):w(R)}function y(R){return sn(R)?vn(t,m,"whitespace")(R):m(R)}function m(R){return R===58?(i+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume(R),t.exit("tableDelimiterMarker"),b):R===45?(i+=1,b(R)):R===null||Mt(R)?E(R):w(R)}function b(R){return R===45?(t.enter("tableDelimiterFiller"),v(R)):w(R)}function v(R){return R===45?(t.consume(R),v):R===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(R),t.exit("tableDelimiterMarker"),_):(t.exit("tableDelimiterFiller"),_(R))}function _(R){return sn(R)?vn(t,E,"whitespace")(R):E(R)}function E(R){return R===124?g(R):R===null||Mt(R)?!o||s!==i?w(R):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(R)):w(R)}function w(R){return n(R)}function S(R){return t.enter("tableRow"),k(R)}function k(R){return R===124?(t.enter("tableCellDivider"),t.consume(R),t.exit("tableCellDivider"),k):R===null||Mt(R)?(t.exit("tableRow"),e(R)):sn(R)?vn(t,k,"whitespace")(R):(t.enter("data"),x(R))}function x(R){return R===null||R===124||Kn(R)?(t.exit("data"),k(R)):(t.consume(R),R===92?I:x)}function I(R){return R===92||R===124?(t.consume(R),x):x(R)}}function D8e(t,e){let n=-1,r=!0,s=0,i=[0,0,0,0],o=[0,0,0,0],a=!1,l=0,c,u,d;const h=new P8e;for(;++n<t.length;){const f=t[n],g=f[1];f[0]==="enter"?g.type==="tableHead"?(a=!1,l!==0&&(C7(h,e,l,c,u),u=void 0,l=0),c={type:"table",start:Object.assign({},g.start),end:Object.assign({},g.end)},h.add(n,0,[["enter",c,e]])):g.type==="tableRow"||g.type==="tableDelimiterRow"?(r=!0,d=void 0,i=[0,0,0,0],o=[0,n+1,0,0],a&&(a=!1,u={type:"tableBody",start:Object.assign({},g.start),end:Object.assign({},g.end)},h.add(n,0,[["enter",u,e]])),s=g.type==="tableDelimiterRow"?2:u?3:1):s&&(g.type==="data"||g.type==="tableDelimiterMarker"||g.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(i[1]!==0&&(o[0]=o[1],d=Rx(h,e,i,s,void 0,d),i=[0,0,0,0]),o[2]=n)):g.type==="tableCellDivider"&&(r?r=!1:(i[1]!==0&&(o[0]=o[1],d=Rx(h,e,i,s,void 0,d)),i=o,o=[i[1],n,0,0])):g.type==="tableHead"?(a=!0,l=n):g.type==="tableRow"||g.type==="tableDelimiterRow"?(l=n,i[1]!==0?(o[0]=o[1],d=Rx(h,e,i,s,n,d)):o[1]!==0&&(d=Rx(h,e,o,s,n,d)),s=0):s&&(g.type==="data"||g.type==="tableDelimiterMarker"||g.type==="tableDelimiterFiller")&&(o[3]=n)}for(l!==0&&C7(h,e,l,c,u),h.consume(e.events),n=-1;++n<e.events.length;){const f=e.events[n];f[0]==="enter"&&f[1].type==="table"&&(f[1]._align=R8e(e.events,n))}return t}function Rx(t,e,n,r,s,i){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",a="tableContent";n[0]!==0&&(i.end=Object.assign({},qp(e.events,n[0])),t.add(n[0],0,[["exit",i,e]]));const l=qp(e.events,n[1]);if(i={type:o,start:Object.assign({},l),end:Object.assign({},l)},t.add(n[1],0,[["enter",i,e]]),n[2]!==0){const c=qp(e.events,n[2]),u=qp(e.events,n[3]),d={type:a,start:Object.assign({},c),end:Object.assign({},u)};if(t.add(n[2],0,[["enter",d,e]]),r!==2){const h=e.events[n[2]],f=e.events[n[3]];if(h[1].end=Object.assign({},f[1].end),h[1].type="chunkText",h[1].contentType="text",n[3]>n[2]+1){const g=n[2]+1,y=n[3]-n[2]-1;t.add(g,y,[])}}t.add(n[3]+1,0,[["exit",d,e]])}return s!==void 0&&(i.end=Object.assign({},qp(e.events,s)),t.add(s,0,[["exit",i,e]]),i=void 0),i}function C7(t,e,n,r,s){const i=[],o=qp(e.events,n);s&&(s.end=Object.assign({},o),i.push(["exit",s,e])),r.end=Object.assign({},o),i.push(["exit",r,e]),t.add(n+1,0,i)}function qp(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const M8e={name:"tasklistCheck",tokenize:F8e};function j8e(){return{text:{91:M8e}}}function F8e(t,e,n){const r=this;return s;function s(l){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(l):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),i)}function i(l){return Kn(l)?(t.enter("taskListCheckValueUnchecked"),t.consume(l),t.exit("taskListCheckValueUnchecked"),o):l===88||l===120?(t.enter("taskListCheckValueChecked"),t.consume(l),t.exit("taskListCheckValueChecked"),o):n(l)}function o(l){return l===93?(t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),a):n(l)}function a(l){return Mt(l)?e(l):sn(l)?t.check({tokenize:B8e},e,n)(l):n(l)}}function B8e(t,e,n){return vn(t,r,"whitespace");function r(s){return s===null?n(s):e(s)}}function U8e(t){return Tte([XDe(),x8e(),N8e(t),L8e(),j8e()])}const $8e={};function H8e(t){const e=this,n=t||$8e,r=e.data(),s=r.micromarkExtensions||(r.micromarkExtensions=[]),i=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);s.push(U8e(n)),i.push(VDe()),o.push(WDe(n))}const rh=["ariaDescribedBy","ariaLabel","ariaLabelledBy"],cy={ancestors:{tbody:["table"],td:["table"],th:["table"],thead:["table"],tfoot:["table"],tr:["table"]},attributes:{a:[...rh,"dataFootnoteBackref","dataFootnoteRef",["className","data-footnote-backref"],"href"],blockquote:["cite"],code:[["className",/^language-./]],del:["cite"],div:["itemScope","itemType"],dl:[...rh],h2:[["className","sr-only"]],img:[...rh,"longDesc","src"],input:[["disabled",!0],["type","checkbox"]],ins:["cite"],li:[["className","task-list-item"]],ol:[...rh,["className","contains-task-list"]],q:["cite"],section:["dataFootnotes",["className","footnotes"]],source:["srcSet"],summary:[...rh],table:[...rh],ul:[...rh,["className","contains-task-list"]],"*":["abbr","accept","acceptCharset","accessKey","action","align","alt","axis","border","cellPadding","cellSpacing","char","charOff","charSet","checked","clear","colSpan","color","cols","compact","coords","dateTime","dir","encType","frame","hSpace","headers","height","hrefLang","htmlFor","id","isMap","itemProp","label","lang","maxLength","media","method","multiple","name","noHref","noShade","noWrap","open","prompt","readOnly","rev","rowSpan","rows","rules","scope","selected","shape","size","span","start","summary","tabIndex","title","useMap","vAlign","value","width"]},clobber:["ariaDescribedBy","ariaLabelledBy","id","name"],clobberPrefix:"user-content-",protocols:{cite:["http","https"],href:["http","https","irc","ircs","mailto","xmpp"],longDesc:["http","https"],src:["http","https"]},required:{input:{disabled:!0,type:"checkbox"}},strip:["script"],tagNames:["a","b","blockquote","br","code","dd","del","details","div","dl","dt","em","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","li","ol","p","picture","pre","q","rp","rt","ruby","s","samp","section","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","tr","tt","ul","var"]},Hu={}.hasOwnProperty;function z8e(t,e){let n={type:"root",children:[]};const r={schema:e?{...cy,...e}:cy,stack:[]},s=Vte(r,t);return s&&(Array.isArray(s)?s.length===1?n=s[0]:n.children=s:n=s),n}function Vte(t,e){if(e&&typeof e=="object"){const n=e;switch(typeof n.type=="string"?n.type:""){case"comment":return V8e(t,n);case"doctype":return W8e(t,n);case"element":return G8e(t,n);case"root":return q8e(t,n);case"text":return K8e(t,n)}}}function V8e(t,e){if(t.schema.allowComments){const n=typeof e.value=="string"?e.value:"",r=n.indexOf("-->"),i={type:"comment",value:r<0?n:n.slice(0,r)};return Mv(i,e),i}}function W8e(t,e){if(t.schema.allowDoctypes){const n={type:"doctype"};return Mv(n,e),n}}function G8e(t,e){const n=typeof e.tagName=="string"?e.tagName:"";t.stack.push(n);const r=Wte(t,e.children),s=Y8e(t,e.properties);t.stack.pop();let i=!1;if(n&&n!=="*"&&(!t.schema.tagNames||t.schema.tagNames.includes(n))&&(i=!0,t.schema.ancestors&&Hu.call(t.schema.ancestors,n))){const a=t.schema.ancestors[n];let l=-1;for(i=!1;++l<a.length;)t.stack.includes(a[l])&&(i=!0)}if(!i)return t.schema.strip&&!t.schema.strip.includes(n)?r:void 0;const o={type:"element",tagName:n,properties:s,children:r};return Mv(o,e),o}function q8e(t,e){const r={type:"root",children:Wte(t,e.children)};return Mv(r,e),r}function K8e(t,e){const r={type:"text",value:typeof e.value=="string"?e.value:""};return Mv(r,e),r}function Wte(t,e){const n=[];if(Array.isArray(e)){const r=e;let s=-1;for(;++s<r.length;){const i=Vte(t,r[s]);i&&(Array.isArray(i)?n.push(...i):n.push(i))}}return n}function Y8e(t,e){const n=t.stack[t.stack.length-1],r=t.schema.attributes,s=t.schema.required,i=r&&Hu.call(r,n)?r[n]:void 0,o=r&&Hu.call(r,"*")?r["*"]:void 0,a=e&&typeof e=="object"?e:{},l={};let c;for(c in a)if(Hu.call(a,c)){const u=a[c];let d=A7(t,T7(i,c),c,u);d==null&&(d=A7(t,T7(o,c),c,u)),d!=null&&(l[c]=d)}if(s&&Hu.call(s,n)){const u=s[n];for(c in u)Hu.call(u,c)&&!Hu.call(l,c)&&(l[c]=u[c])}return l}function A7(t,e,n,r){return e?Array.isArray(r)?X8e(t,e,n,r):Gte(t,e,n,r):void 0}function X8e(t,e,n,r){let s=-1;const i=[];for(;++s<r.length;){const o=Gte(t,e,n,r[s]);(typeof o=="number"||typeof o=="string")&&i.push(o)}return i}function Gte(t,e,n,r){if(!(typeof r!="boolean"&&typeof r!="number"&&typeof r!="string")&&J8e(t,n,r)){if(typeof e=="object"&&e.length>1){let s=!1,i=0;for(;++i<e.length;){const o=e[i];if(o&&typeof o=="object"&&"flags"in o){if(o.test(String(r))){s=!0;break}}else if(o===r){s=!0;break}}if(!s)return}return t.schema.clobber&&t.schema.clobberPrefix&&t.schema.clobber.includes(n)?t.schema.clobberPrefix+r:r}}function J8e(t,e,n){const r=t.schema.protocols&&Hu.call(t.schema.protocols,e)?t.schema.protocols[e]:void 0;if(!r||r.length===0)return!0;const s=String(n),i=s.indexOf(":"),o=s.indexOf("?"),a=s.indexOf("#"),l=s.indexOf("/");if(i<0||l>-1&&i>l||o>-1&&i>o||a>-1&&i>a)return!0;let c=-1;for(;++c<r.length;){const u=r[c];if(i===u.length&&s.slice(0,u.length)===u)return!0}return!1}function Mv(t,e){const n=rte(e);e.data&&(t.data=vf(e.data)),n&&(t.position=n)}function T7(t,e){let n,r=-1;if(t)for(;++r<t.length;){const s=t[r],i=typeof s=="string"?s:s[0];if(i===e)return s;i==="data*"&&(n=s)}if(e.length>4&&e.slice(0,4).toLowerCase()==="data")return n}function Z8e(t){return function(e){return z8e(e,t)}}const zO=["a","b","blockquote","br","code","dd","del","details","div","dl","dt","em","h1","h2","h3","h4","h5","h6","hr","i","ins","kbd","li","ol","p","pre","q","rp","rt","ruby","s","samp","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","tr","ul","var","think"];function Q8e(){return t=>{Hg(t,e=>{if(e.type==="html"&&e.value&&e.value.startsWith("<think>")){const n=e.value.slice(7);e.value=`<div class="__boltThought__">${n}`;return}if(e.type==="html"&&e.value&&e.value.startsWith("</think>")){const n=e.value.slice(8);e.value=`</div>${n}`}})}}const eje={...cy,tagNames:zO,attributes:{...cy.attributes,div:[...cy.attributes?.div??[],"data*",["className","__boltArtifact__","__boltThought__"]]},strip:[]};function tje(t){const e=[H8e];return t&&e.unshift(rje),e.unshift(Q8e),e}function nje(t){const e=[];return t&&e.push(l6e,[Z8e,eje]),e}const rje=()=>(t,e)=>{const n=e.toString();Hg(t,(r,s,i)=>{if(s==null||["paragraph","text","inlineCode","code","strong","emphasis"].includes(r.type)||!r.position)return!0;let o=n.slice(r.position.start.offset,r.position.end.offset);return r.type==="heading"&&(o=`
${o}`),i.children[s]={type:"text",value:o},[ite,s]})},sje=(t=Zc)=>`
You are Ada, an expert AI assistant and exceptional senior software developer with vast knowledge across multiple programming languages, frameworks, and best practices.

<system_constraints>
  You are operating in an environment called WebContainer, an in-browser Node.js runtime that emulates a Linux system to some degree. However, it runs in the browser and doesn't run a full-fledged Linux system and doesn't rely on a cloud VM to execute code. All code is executed in the browser. It does come with a shell that emulates zsh. The container cannot run native binaries since those cannot be executed in the browser. That means it can only execute code that is native to a browser including JS, WebAssembly, etc.

  The shell comes with \`python\` and \`python3\` binaries, but they are LIMITED TO THE PYTHON STANDARD LIBRARY ONLY This means:

    - There is NO \`pip\` support! If you attempt to use \`pip\`, you should explicitly state that it's not available.
    - CRITICAL: Third-party libraries cannot be installed or imported.
    - Even some standard library modules that require additional system dependencies (like \`curses\`) are not available.
    - Only modules from the core Python standard library can be used.

  Additionally, there is no \`g++\` or any C/C++ compiler available. WebContainer CANNOT run native binaries or compile C/C++ code!

  Keep these limitations in mind when suggesting Python or C++ solutions and explicitly mention these constraints if relevant to the task at hand.

  WebContainer has the ability to run a web server but requires to use an npm package (e.g., Vite, servor, serve, http-server) or use the Node.js APIs to implement a web server.

  IMPORTANT: Prefer using Vite instead of implementing a custom web server.

  IMPORTANT: Git is NOT available.

  IMPORTANT: WebContainer CANNOT execute diff or patch editing so always write your code in full no partial/diff update

  IMPORTANT: Prefer writing Node.js scripts instead of shell scripts. The environment doesn't fully support shell scripts, so use Node.js for scripting tasks whenever possible!

  IMPORTANT: When choosing databases or npm packages, prefer options that don't rely on native binaries. For databases, prefer libsql, sqlite, or other solutions that don't involve native code. WebContainer CANNOT execute arbitrary native binaries.

  Available shell commands:
    File Operations:
      - cat: Display file contents
      - cp: Copy files/directories
      - ls: List directory contents
      - mkdir: Create directory
      - mv: Move/rename files
      - rm: Remove files
      - rmdir: Remove empty directories
      - touch: Create empty file/update timestamp
    
    System Information:
      - hostname: Show system name
      - ps: Display running processes
      - pwd: Print working directory
      - uptime: Show system uptime
      - env: Environment variables
    
    Development Tools:
      - node: Execute Node.js code
      - python3: Run Python scripts
      - code: VSCode operations
      - jq: Process JSON
    
    Other Utilities:
      - curl, head, sort, tail, clear, which, export, chmod, scho, hostname, kill, ln, xxd, alias, false,  getconf, true, loadenv, wasm, xdg-open, command, exit, source
</system_constraints>

<code_formatting_info>
  Use 2 spaces for code indentation
</code_formatting_info>

<message_formatting_info>
  You can make the output pretty by using only the following available HTML elements: ${zO.map(e=>`<${e}>`).join(", ")}
</message_formatting_info>

<chain_of_thought_instructions>
  Before providing a solution, BRIEFLY outline your implementation steps. This helps ensure systematic thinking and clear communication. Your planning should:
  - List concrete steps you'll take
  - Identify key components needed
  - Note potential challenges
  - Be concise (2-4 lines maximum)

  Example responses:

  User: "Create a todo list app with local storage"
  Assistant: "Sure. I'll start by:
  1. Set up Vite + React
  2. Create TodoList and TodoItem components
  3. Implement localStorage for persistence
  4. Add CRUD operations
  
  Let's start now.

  [Rest of response...]"

  User: "Help debug why my API calls aren't working"
  Assistant: "Great. My first steps will be:
  1. Check network requests
  2. Verify API endpoint format
  3. Examine error handling
  
  [Rest of response...]"

</chain_of_thought_instructions>

<artifact_info>
  Ada creates a SINGLE, comprehensive artifact for each project. The artifact contains all necessary steps and components, including:

  - Shell commands to run including dependencies to install using a package manager (NPM)
  - Files to create and their contents
  - Folders to create if necessary

  <artifact_instructions>
    1. CRITICAL: Think HOLISTICALLY and COMPREHENSIVELY BEFORE creating an artifact. This means:

      - Consider ALL relevant files in the project
      - Review ALL previous file changes and user modifications (as shown in diffs, see diff_spec)
      - Analyze the entire project context and dependencies
      - Anticipate potential impacts on other parts of the system

      This holistic approach is ABSOLUTELY ESSENTIAL for creating coherent and effective solutions.

    2. IMPORTANT: When receiving file modifications, ALWAYS use the latest file modifications and make any edits to the latest content of a file. This ensures that all changes are applied to the most up-to-date version of the file.

    3. The current working directory is \`${t}\`.

    4. Wrap the content in opening and closing \`<boltArtifact>\` tags. These tags contain more specific \`<boltAction>\` elements.

    5. Add a title for the artifact to the \`title\` attribute of the opening \`<boltArtifact>\`.

    6. Add a unique identifier to the \`id\` attribute of the of the opening \`<boltArtifact>\`. For updates, reuse the prior identifier. The identifier should be descriptive and relevant to the content, using kebab-case (e.g., "example-code-snippet"). This identifier will be used consistently throughout the artifact's lifecycle, even when updating or iterating on the artifact.

    7. Use \`<boltAction>\` tags to define specific actions to perform.

    8. For each \`<boltAction>\`, add a type to the \`type\` attribute of the opening \`<boltAction>\` tag to specify the type of the action. Assign one of the following values to the \`type\` attribute:

      - shell: For running shell commands.

        - When Using \`npx\`, ALWAYS provide the \`--yes\` flag.
        - When running multiple shell commands, use \`&&\` to run them sequentially.
        - ULTRA IMPORTANT: Do NOT run a dev command with shell action use start action to run dev commands

      - file: For writing new files or updating existing files. For each file add a \`filePath\` attribute to the opening \`<boltAction>\` tag to specify the file path. The content of the file artifact is the file contents. All file paths MUST BE relative to the current working directory.

      - start: For starting a development server.
        - Use to start application if it hasnt been started yet or when NEW dependencies have been added.
        - Only use this action when you need to run a dev server or start the application
        - ULTRA IMPORTANT: do NOT re-run a dev server if files are updated. The existing dev server can automatically detect changes and executes the file changes


    9. The order of the actions is VERY IMPORTANT. For example, if you decide to run a file it's important that the file exists in the first place and you need to create it before running a shell command that would execute the file.

    10. ALWAYS install necessary dependencies FIRST before generating any other artifact. If that requires a \`package.json\` then you should create that first!

      IMPORTANT: Add all required dependencies to the \`package.json\` already and try to avoid \`npm i <pkg>\` if possible!

    11. CRITICAL: Always provide the FULL, updated content of the artifact. This means:

      - Include ALL code, even if parts are unchanged
      - NEVER use placeholders like "// rest of the code remains the same..." or "<- leave original code here ->"
      - ALWAYS show the complete, up-to-date file contents when updating files
      - Avoid any form of truncation or summarization

    12. When running a dev server NEVER say something like "You can now view X by opening the provided local server URL in your browser. The preview will be opened automatically or by the user manually!

    13. If a dev server has already been started, do not re-run the dev command when new dependencies are installed or files were updated. Assume that installing new dependencies will be executed in a different process and changes will be picked up by the dev server.

    14. IMPORTANT: Use coding best practices and split functionality into smaller modules instead of putting everything in a single gigantic file. Files should be as small as possible, and functionality should be extracted into separate modules when possible.

      - Ensure code is clean, readable, and maintainable.
      - Adhere to proper naming conventions and consistent formatting.
      - Split functionality into smaller, reusable modules instead of placing everything in a single large file.
      - Keep files as small as possible by extracting related functionalities into separate modules.
      - Use imports to connect these modules together effectively.
  </artifact_instructions>
</artifact_info>

NEVER use the word "artifact". For example:
  - DO NOT SAY: "This artifact sets up a simple Snake game using HTML, CSS, and JavaScript."
  - INSTEAD SAY: "We set up a simple Snake game using HTML, CSS, and JavaScript."

IMPORTANT: Use valid markdown only for all your responses and DO NOT use HTML tags except for artifacts!

ULTRA IMPORTANT: Do NOT be verbose and DO NOT explain anything unless the user is asking for more information. That is VERY important.

ULTRA IMPORTANT: Think first and reply with the artifact that contains all necessary steps to set up the project, files, shell commands to run. It is SUPER IMPORTANT to respond with this first.

Here are some examples of correct usage of artifacts:

<examples>
  <example>
    <user_query>Can you help me create a JavaScript function to calculate the factorial of a number?</user_query>

    <assistant_response>
      Certainly, I can help you create a JavaScript function to calculate the factorial of a number.

      <boltArtifact id="factorial-function" title="JavaScript Factorial Function">
        <boltAction type="file" filePath="index.js">function factorial(n) {
  ...
}
...</boltAction>

        <boltAction type="shell">node index.js</boltAction>
      </boltArtifact>
    </assistant_response>
  </example>

  <example>
    <user_query>Build a snake game</user_query>

    <assistant_response>
      Certainly! I'd be happy to help you build a snake game using JavaScript and HTML5 Canvas. This will be a basic implementation that you can later expand upon. Let's create the game step by step.

      <boltArtifact id="snake-game" title="Snake Game in HTML and JavaScript">
        <boltAction type="file" filePath="package.json">{
  "name": "snake",
  "scripts": {
    "dev": "vite"
  }
  ...
}</boltAction>

        <boltAction type="shell">npm install --save-dev vite</boltAction>

        <boltAction type="file" filePath="index.html">...</boltAction>

        <boltAction type="start">npm run dev</boltAction>
      </boltArtifact>

      Now you can play the Snake game by opening the provided local server URL in your browser. Use the arrow keys to control the snake. Eat the red food to grow and increase your score. The game ends if you hit the wall or your own tail.
    </assistant_response>
  </example>

  <example>
    <user_query>Make a bouncing ball with real gravity using React</user_query>

    <assistant_response>
      Certainly! I'll create a bouncing ball with real gravity using React. We'll use the react-spring library for physics-based animations.

      <boltArtifact id="bouncing-ball-react" title="Bouncing Ball with Gravity in React">
        <boltAction type="file" filePath="package.json">{
  "name": "bouncing-ball",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview"
  },
  "dependencies": {
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-spring": "^9.7.1"
  },
  "devDependencies": {
    "@types/react": "^18.0.28",
    "@types/react-dom": "^18.0.11",
    "@vitejs/plugin-react": "^3.1.0",
    "vite": "^4.2.0"
  }
}</boltAction>

        <boltAction type="file" filePath="index.html">...</boltAction>

        <boltAction type="file" filePath="src/main.jsx">...</boltAction>

        <boltAction type="file" filePath="src/index.css">...</boltAction>

        <boltAction type="file" filePath="src/App.jsx">...</boltAction>

        <boltAction type="start">npm run dev</boltAction>
      </boltArtifact>

      You can now view the bouncing ball animation in the preview. The ball will start falling from the top of the screen and bounce realistically when it hits the bottom.
    </assistant_response>
  </example>
</examples>
`;yde`
  Continue your prior response. IMPORTANT: Immediately begin from where you left off without any interruptions.
  Do not repeat any content, including artifact and action tags.
`;const ije=t=>{const{cwd:e,allowedHtmlElements:n}=t;return`
You are Ada, an expert AI assistant and exceptional senior software developer with vast knowledge across multiple programming languages, frameworks, and best practices.

<system_constraints>
  - Operating in WebContainer, an in-browser Node.js runtime
  - Limited Python support: standard library only, no pip
  - No C/C++ compiler, native binaries, or Git
  - Prefer Node.js scripts over shell scripts
  - Use Vite for web servers
  - Databases: prefer libsql, sqlite, or non-native solutions
  - When for react dont forget to write vite config and index.html to the project
  - WebContainer CANNOT execute diff or patch editing so always write your code in full no partial/diff update

  Available shell commands: cat, cp, ls, mkdir, mv, rm, rmdir, touch, hostname, ps, pwd, uptime, env, node, python3, code, jq, curl, head, sort, tail, clear, which, export, chmod, scho, kill, ln, xxd, alias, getconf, loadenv, wasm, xdg-open, command, exit, source
</system_constraints>

<code_formatting_info>
  Use 2 spaces for indentation
</code_formatting_info>

<message_formatting_info>
  Available HTML elements: ${n.join(", ")}
</message_formatting_info>

<chain_of_thought_instructions>
  do not mention the phrase "chain of thought"
  Before solutions, briefly outline implementation steps (2-4 lines max):
  - List concrete steps
  - Identify key components
  - Note potential challenges
  - Do not write the actual code just the plan and structure if needed 
  - Once completed planning start writing the artifacts
</chain_of_thought_instructions>

<artifact_info>
  Create a single, comprehensive artifact for each project:
  - Use \`<boltArtifact>\` tags with \`title\` and \`id\` attributes
  - Use \`<boltAction>\` tags with \`type\` attribute:
    - shell: Run commands
    - file: Write/update files (use \`filePath\` attribute)
    - start: Start dev server (only when necessary)
  - Order actions logically
  - Install dependencies first
  - Provide full, updated content for all files
  - Use coding best practices: modular, clean, readable code
</artifact_info>


# CRITICAL RULES - NEVER IGNORE

## File and Command Handling
1. ALWAYS use artifacts for file contents and commands - NO EXCEPTIONS
2. When writing a file, INCLUDE THE ENTIRE FILE CONTENT - NO PARTIAL UPDATES
3. For modifications, ONLY alter files that require changes - DO NOT touch unaffected files

## Response Format
4. Use markdown EXCLUSIVELY - HTML tags are ONLY allowed within artifacts
5. Be concise - Explain ONLY when explicitly requested
6. NEVER use the word "artifact" in responses

## Development Process
7. ALWAYS think and plan comprehensively before providing a solution
8. Current working directory: \`${e} \` - Use this for all file paths
9. Don't use cli scaffolding to steup the project, use cwd as Root of the project
11. For nodejs projects ALWAYS install dependencies after writing package.json file

## Coding Standards
10. ALWAYS create smaller, atomic components and modules
11. Modularity is PARAMOUNT - Break down functionality into logical, reusable parts
12. IMMEDIATELY refactor any file exceeding 250 lines
13. ALWAYS plan refactoring before implementation - Consider impacts on the entire system

## Artifact Usage
22. Use \`<boltArtifact>\` tags with \`title\` and \`id\` attributes for each project
23. Use \`<boltAction>\` tags with appropriate \`type\` attribute:
    - \`shell\`: For running commands
    - \`file\`: For writing/updating files (include \`filePath\` attribute)
    - \`start\`: For starting dev servers (use only when necessary/ or new dependencies are installed)
24. Order actions logically - dependencies MUST be installed first
25. For Vite project must include vite config and index.html for entry point
26. Provide COMPLETE, up-to-date content for all files - NO placeholders or partial updates
27. WebContainer CANNOT execute diff or patch editing so always write your code in full no partial/diff update

CRITICAL: These rules are ABSOLUTE and MUST be followed WITHOUT EXCEPTION in EVERY response.

Examples:
<examples>
  <example>
    <user_query>Can you help me create a JavaScript function to calculate the factorial of a number?</user_query>
    <assistant_response>
      Certainly, I can help you create a JavaScript function to calculate the factorial of a number.

      <boltArtifact id="factorial-function" title="JavaScript Factorial Function">
        <boltAction type="file" filePath="index.js">function factorial(n) {
  ...
}

...</boltAction>
        <boltAction type="shell">node index.js</boltAction>
      </boltArtifact>
    </assistant_response>
  </example>

  <example>
    <user_query>Build a snake game</user_query>
    <assistant_response>
      Certainly! I'd be happy to help you build a snake game using JavaScript and HTML5 Canvas. This will be a basic implementation that you can later expand upon. Let's create the game step by step.

      <boltArtifact id="snake-game" title="Snake Game in HTML and JavaScript">
        <boltAction type="file" filePath="package.json">{
  "name": "snake",
  "scripts": {
    "dev": "vite"
  }
  ...
}</boltAction>
        <boltAction type="shell">npm install --save-dev vite</boltAction>
        <boltAction type="file" filePath="index.html">...</boltAction>
        <boltAction type="start">npm run dev</boltAction>
      </boltArtifact>

      Now you can play the Snake game by opening the provided local server URL in your browser. Use the arrow keys to control the snake. Eat the red food to grow and increase your score. The game ends if you hit the wall or your own tail.
    </assistant_response>
  </example>

  <example>
    <user_query>Make a bouncing ball with real gravity using React</user_query>
    <assistant_response>
      Certainly! I'll create a bouncing ball with real gravity using React. We'll use the react-spring library for physics-based animations.

      <boltArtifact id="bouncing-ball-react" title="Bouncing Ball with Gravity in React">
        <boltAction type="file" filePath="package.json">{
  "name": "bouncing-ball",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview"
  },
  "dependencies": {
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-spring": "^9.7.1"
  },
  "devDependencies": {
    "@types/react": "^18.0.28",
    "@types/react-dom": "^18.0.11",
    "@vitejs/plugin-react": "^3.1.0",
    "vite": "^4.2.0"
  }
}</boltAction>
        <boltAction type="file" filePath="index.html">...</boltAction>
        <boltAction type="file" filePath="src/main.jsx">...</boltAction>
        <boltAction type="file" filePath="src/index.css">...</boltAction>
        <boltAction type="file" filePath="src/App.jsx">...</boltAction>
        <boltAction type="start">npm run dev</boltAction>
      </boltArtifact>

      You can now view the bouncing ball animation in the preview. The ball will start falling from the top of the screen and bounce realistically when it hits the bottom.
    </assistant_response>
  </example>
</examples>
Always use artifacts for file contents and commands, following the format shown in these examples.
`};class oje{static library={default:{label:"Default Prompt",description:"This is the battle tested default system Prompt",get:e=>sje(e.cwd)},optimized:{label:"Optimized Prompt (experimental)",description:"an Experimental version of the prompt for lower token usage",get:e=>ije(e)}};static getList(){return Object.entries(this.library).map(([e,n])=>{const{label:r,description:s}=n;return{id:e,label:r,description:s}})}static getPropmtFromLibrary(e,n){if(!this.library[e])throw"Prompt Now Found";return this.library[e]?.get(n)}}const aje=T.memo(({feature:t,index:e,onToggle:n})=>p.jsx(ot.div,{layoutId:t.id,className:Pe("relative group cursor-pointer","bg-bolt-elements-background-depth-2","hover:bg-bolt-elements-background-depth-3","transition-colors duration-200","rounded-lg overflow-hidden"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:e*.1},children:p.jsxs("div",{className:"p-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:Pe(t.icon,"w-5 h-5 text-bolt-elements-textSecondary")}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("h4",{className:"font-medium text-bolt-elements-textPrimary",children:t.title}),t.beta&&p.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-blue-500/10 text-blue-500 font-medium",children:"Beta"}),t.experimental&&p.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-orange-500/10 text-orange-500 font-medium",children:"Experimental"})]})]}),p.jsx(Fo,{checked:t.enabled,onCheckedChange:r=>n(t.id,r)})]}),p.jsx("p",{className:"mt-2 text-sm text-bolt-elements-textSecondary",children:t.description}),t.tooltip&&p.jsx("p",{className:"mt-1 text-xs text-bolt-elements-textTertiary",children:t.tooltip})]})},t.id)),N7=T.memo(({title:t,features:e,icon:n,description:r,onToggleFeature:s})=>p.jsxs(ot.div,{layout:!0,className:"flex flex-col gap-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:Pe(n,"text-xl text-purple-500")}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:t}),p.jsx("p",{className:"text-sm text-bolt-elements-textSecondary",children:r})]})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.map((i,o)=>p.jsx(aje,{feature:i,index:o,onToggle:s},i.id))})]}));function lje(){const{autoSelectTemplate:t,isLatestBranch:e,contextOptimizationEnabled:n,eventLogs:r,setAutoSelectTemplate:s,enableLatestBranch:i,enableContextOptimization:o,setEventLogs:a,setPromptId:l,promptId:c}=jd();ut.useEffect(()=>{e===void 0&&i(!1),n===void 0&&o(!0),t===void 0&&s(!0),c===void 0&&l("default"),r===void 0&&a(!0)},[]);const u=T.useCallback((h,f)=>{switch(h){case"latestBranch":{i(f),ze.success(`Main branch updates ${f?"enabled":"disabled"}`);break}case"autoSelectTemplate":{s(f),ze.success(`Auto select template ${f?"enabled":"disabled"}`);break}case"contextOptimization":{o(f),ze.success(`Context optimization ${f?"enabled":"disabled"}`);break}case"eventLogs":{a(f),ze.success(`Event logging ${f?"enabled":"disabled"}`);break}}},[i,s,o,a]),d={stable:[{id:"latestBranch",title:"Main Branch Updates",description:"Get the latest updates from the main branch",icon:"i-ph:git-branch",enabled:e,tooltip:"Enabled by default to receive updates from the main development branch"},{id:"autoSelectTemplate",title:"Auto Select Template",description:"Automatically select starter template",icon:"i-ph:selection",enabled:t,tooltip:"Enabled by default to automatically select the most appropriate starter template"},{id:"contextOptimization",title:"Context Optimization",description:"Optimize context for better responses",icon:"i-ph:brain",enabled:n,tooltip:"Enabled by default for improved AI responses"},{id:"eventLogs",title:"Event Logging",description:"Enable detailed event logging and history",icon:"i-ph:list-bullets",enabled:r,tooltip:"Enabled by default to record detailed logs of system events and user actions"}],beta:[]};return p.jsxs("div",{className:"flex flex-col gap-8",children:[p.jsx(N7,{title:"Core Features",features:d.stable,icon:"i-ph:check-circle",description:"Essential features that are enabled by default for optimal performance",onToggleFeature:u}),d.beta.length>0&&p.jsx(N7,{title:"Beta Features",features:d.beta,icon:"i-ph:test-tube",description:"New features that are ready for testing but may have some rough edges",onToggleFeature:u}),p.jsx(ot.div,{layout:!0,className:Pe("bg-bolt-elements-background-depth-2","hover:bg-bolt-elements-background-depth-3","transition-all duration-200","rounded-lg p-4","group"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:Pe("p-2 rounded-lg text-xl","bg-bolt-elements-background-depth-3 group-hover:bg-bolt-elements-background-depth-4","transition-colors duration-200","text-purple-500"),children:p.jsx("div",{className:"i-ph:book"})}),p.jsxs("div",{className:"flex-1",children:[p.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary group-hover:text-purple-500 transition-colors",children:"Prompt Library"}),p.jsx("p",{className:"text-xs text-bolt-elements-textSecondary mt-0.5",children:"Choose a prompt from the library to use as the system prompt"})]}),p.jsx("select",{value:c,onChange:h=>{l(h.target.value),ze.success("Prompt template updated")},className:Pe("p-2 rounded-lg text-sm min-w-[200px]","bg-bolt-elements-background-depth-3 border border-bolt-elements-borderColor","text-bolt-elements-textPrimary","focus:outline-none focus:ring-2 focus:ring-purple-500/30","group-hover:border-purple-500/30","transition-all duration-200"),children:oje.getList().map(h=>p.jsx("option",{value:h.id,children:h.label},h.id))})]})})]})}function cje(){const[t,e]=T.useState(!1),[n,r]=T.useState(!1),[s,i]=T.useState(!1),[o,a]=T.useState(!1),[l,c]=T.useState(!1),[u,d]=T.useState(!1),h=T.useRef(null),f=T.useRef(null),g=async()=>{try{if(!mn)throw new Error("Database not initialized");const S={chats:await t2(mn),exportDate:new Date().toISOString()},k=new Blob([JSON.stringify(S,null,2)],{type:"application/json"}),x=URL.createObjectURL(k),I=document.createElement("a");I.href=x,I.download=`bolt-chats-${new Date().toISOString()}.json`,document.body.appendChild(I),I.click(),document.body.removeChild(I),URL.revokeObjectURL(x),ze.success("Chats exported successfully")}catch(w){console.error("Export error:",w),ze.error("Failed to export chats")}},y=()=>{try{const w={userProfile:localStorage.getItem("bolt_user_profile"),settings:localStorage.getItem("bolt_settings"),exportDate:new Date().toISOString()},S=new Blob([JSON.stringify(w,null,2)],{type:"application/json"}),k=URL.createObjectURL(S),x=document.createElement("a");x.href=k,x.download=`bolt-settings-${new Date().toISOString()}.json`,document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(k),ze.success("Settings exported successfully")}catch(w){console.error("Export error:",w),ze.error("Failed to export settings")}},m=async w=>{const S=w.target.files?.[0];if(S)try{const k=await S.text(),x=JSON.parse(k);x.userProfile&&localStorage.setItem("bolt_user_profile",x.userProfile),x.settings&&localStorage.setItem("bolt_settings",x.settings),window.location.reload(),ze.success("Settings imported successfully")}catch(k){console.error("Import error:",k),ze.error("Failed to import settings")}},b=async w=>{const S=w.target.files?.[0];if(S){r(!0);try{const k=await S.text(),x=JSON.parse(k);Object.entries(x).forEach(([I,R])=>{if(typeof R!="string")throw new Error(`Invalid value for key: ${I}`);localStorage.setItem(`bolt_${I.toLowerCase()}`,R)}),ze.success("API keys imported successfully")}catch(k){console.error("Error importing API keys:",k),ze.error("Failed to import API keys")}finally{r(!1),f.current&&(f.current.value="")}}},v=()=>{e(!0);try{const w={Anthropic_API_KEY:"",OpenAI_API_KEY:"",Google_API_KEY:"",Groq_API_KEY:"",HuggingFace_API_KEY:"",OpenRouter_API_KEY:"",Deepseek_API_KEY:"",Mistral_API_KEY:"",OpenAILike_API_KEY:"",Together_API_KEY:"",xAI_API_KEY:"",Perplexity_API_KEY:"",Cohere_API_KEY:"",AzureOpenAI_API_KEY:"",OPENAI_LIKE_API_BASE_URL:"",LMSTUDIO_API_BASE_URL:"",OLLAMA_API_BASE_URL:"",TOGETHER_API_BASE_URL:""},S=new Blob([JSON.stringify(w,null,2)],{type:"application/json"}),k=URL.createObjectURL(S),x=document.createElement("a");x.href=k,x.download="bolt-api-keys-template.json",document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(k),ze.success("Template downloaded successfully")}catch(w){console.error("Error downloading template:",w),ze.error("Failed to download template")}finally{e(!1)}},_=async()=>{i(!0);try{if(localStorage.removeItem("bolt_user_profile"),localStorage.removeItem("bolt_settings"),localStorage.removeItem("bolt_chat_history"),!mn)throw new Error("Database not initialized");const S=(await t2(mn)).map(k=>vP(mn,k.id));await Promise.all(S),c(!1),window.location.reload(),ze.success("Settings reset successfully")}catch(w){console.error("Reset error:",w),c(!1),ze.error("Failed to reset settings")}finally{i(!1)}},E=async()=>{a(!0);try{if(localStorage.removeItem("bolt_chat_history"),!mn)throw new Error("Database not initialized");const S=(await t2(mn)).map(k=>vP(mn,k.id));await Promise.all(S),d(!1),ze.success("Chat history deleted successfully")}catch(w){console.error("Delete error:",w),d(!1),ze.error("Failed to delete chat history")}finally{a(!1)}};return p.jsxs("div",{className:"space-y-6",children:[p.jsx("input",{ref:h,type:"file",accept:".json",onChange:m,className:"hidden"}),p.jsx(jo,{open:l,onOpenChange:c,children:p.jsx(qm,{showCloseButton:!1,className:"z-[1000]",children:p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"i-ph:warning-circle-fill w-5 h-5 text-yellow-500"}),p.jsx(hf,{children:"Reset All Settings?"})]}),p.jsx("p",{className:"text-sm text-bolt-elements-textSecondary mt-2",children:"This will reset all your settings to their default values. This action cannot be undone."}),p.jsxs("div",{className:"flex justify-end items-center gap-3 mt-6",children:[p.jsx(Gm,{asChild:!0,children:p.jsx("button",{className:"px-4 py-2 rounded-lg text-sm bg-[#F5F5F5] dark:bg-[#1A1A1A] text-[#666666] dark:text-[#999999] hover:text-[#333333] dark:hover:text-white",children:"Cancel"})}),p.jsxs(ot.button,{className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg text-sm bg-white dark:bg-[#1A1A1A] text-yellow-600 dark:text-yellow-500 hover:bg-yellow-50 dark:hover:bg-yellow-500/10 border border-transparent hover:border-yellow-500/10 dark:hover:border-yellow-500/20",onClick:_,disabled:s,whileHover:{scale:1.02},whileTap:{scale:.98},children:[s?p.jsx("div",{className:"i-ph:spinner-gap-bold animate-spin w-4 h-4"}):p.jsx("div",{className:"i-ph:arrow-counter-clockwise w-4 h-4"}),"Reset Settings"]})]})]})})}),p.jsx(jo,{open:u,onOpenChange:d,children:p.jsx(qm,{showCloseButton:!1,className:"z-[1000]",children:p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"i-ph:warning-circle-fill w-5 h-5 text-red-500"}),p.jsx(hf,{children:"Delete All Chats?"})]}),p.jsx("p",{className:"text-sm text-bolt-elements-textSecondary mt-2",children:"This will permanently delete all your chat history. This action cannot be undone."}),p.jsxs("div",{className:"flex justify-end items-center gap-3 mt-6",children:[p.jsx(Gm,{asChild:!0,children:p.jsx("button",{className:"px-4 py-2 rounded-lg text-sm bg-[#F5F5F5] dark:bg-[#1A1A1A] text-[#666666] dark:text-[#999999] hover:text-[#333333] dark:hover:text-white",children:"Cancel"})}),p.jsxs(ot.button,{className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg text-sm bg-white dark:bg-[#1A1A1A] text-red-500 dark:text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10 border border-transparent hover:border-red-500/10 dark:hover:border-red-500/20",onClick:E,disabled:o,whileHover:{scale:1.02},whileTap:{scale:.98},children:[o?p.jsx("div",{className:"i-ph:spinner-gap-bold animate-spin w-4 h-4"}):p.jsx("div",{className:"i-ph:trash w-4 h-4"}),"Delete All"]})]})]})})}),p.jsxs(ot.div,{className:"bg-white dark:bg-[#0A0A0A] rounded-lg p-6 border border-[#E5E5E5] dark:border-[#1A1A1A]",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx("div",{className:"i-ph:chat-circle-duotone w-5 h-5 text-purple-500"}),p.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Chat History"})]}),p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Export or delete all your chat history."}),p.jsxs("div",{className:"flex gap-4",children:[p.jsxs(ot.button,{className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-purple-500 text-white text-sm hover:bg-purple-600",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:g,children:[p.jsx("div",{className:"i-ph:download-simple w-4 h-4"}),"Export All Chats"]}),p.jsxs(ot.button,{className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-red-50 text-red-500 text-sm hover:bg-red-100 dark:bg-red-500/10 dark:hover:bg-red-500/20",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>d(!0),children:[p.jsx("div",{className:"i-ph:trash w-4 h-4"}),"Delete All Chats"]})]})]}),p.jsxs(ot.div,{className:"bg-white dark:bg-[#0A0A0A] rounded-lg p-6 border border-[#E5E5E5] dark:border-[#1A1A1A]",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx("div",{className:"i-ph:gear-duotone w-5 h-5 text-purple-500"}),p.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Settings Backup"})]}),p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Export your settings to a JSON file or import settings from a previously exported file."}),p.jsxs("div",{className:"flex gap-4",children:[p.jsxs(ot.button,{className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-purple-500 text-white text-sm hover:bg-purple-600",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:y,children:[p.jsx("div",{className:"i-ph:download-simple w-4 h-4"}),"Export Settings"]}),p.jsxs(ot.button,{className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-purple-500 text-white text-sm hover:bg-purple-600",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>h.current?.click(),children:[p.jsx("div",{className:"i-ph:upload-simple w-4 h-4"}),"Import Settings"]}),p.jsxs(ot.button,{className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-yellow-50 text-yellow-600 text-sm hover:bg-yellow-100 dark:bg-yellow-500/10 dark:hover:bg-yellow-500/20 dark:text-yellow-500",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>c(!0),children:[p.jsx("div",{className:"i-ph:arrow-counter-clockwise w-4 h-4"}),"Reset Settings"]})]})]}),p.jsxs(ot.div,{className:"bg-white dark:bg-[#0A0A0A] rounded-lg p-6 border border-[#E5E5E5] dark:border-[#1A1A1A]",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx("div",{className:"i-ph:key-duotone w-5 h-5 text-purple-500"}),p.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"API Keys Management"})]}),p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Import API keys from a JSON file or download a template to fill in your keys."}),p.jsxs("div",{className:"flex gap-4",children:[p.jsx("input",{ref:f,type:"file",accept:".json",onChange:b,className:"hidden"}),p.jsxs(ot.button,{className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-purple-500 text-white text-sm hover:bg-purple-600",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:v,disabled:t,children:[t?p.jsx("div",{className:"i-ph:spinner-gap-bold animate-spin w-4 h-4"}):p.jsx("div",{className:"i-ph:download-simple w-4 h-4"}),"Download Template"]}),p.jsxs(ot.button,{className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-purple-500 text-white text-sm hover:bg-purple-600",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>f.current?.click(),disabled:n,children:[n?p.jsx("div",{className:"i-ph:spinner-gap-bold animate-spin w-4 h-4"}):p.jsx("div",{className:"i-ph:upload-simple w-4 h-4"}),"Import API Keys"]})]})]})]})}var VO="Collapsible",[uje,Zht]=Xo(VO),[dje,WO]=uje(VO),qte=T.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:s,disabled:i,onOpenChange:o,...a}=t,[l=!1,c]=Bf({prop:r,defaultProp:s,onChange:o});return p.jsx(dje,{scope:n,disabled:i,contentId:Vc(),open:l,onOpenToggle:T.useCallback(()=>c(u=>!u),[c]),children:p.jsx(hn.div,{"data-state":qO(l),"data-disabled":i?"":void 0,...a,ref:e})})});qte.displayName=VO;var Kte="CollapsibleTrigger",Yte=T.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,s=WO(Kte,n);return p.jsx(hn.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":qO(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...r,ref:e,onClick:Nt(t.onClick,s.onOpenToggle)})});Yte.displayName=Kte;var GO="CollapsibleContent",Xte=T.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=WO(GO,t.__scopeCollapsible);return p.jsx(Ss,{present:n||s.open,children:({present:i})=>p.jsx(hje,{...r,ref:e,present:i})})});Xte.displayName=GO;var hje=T.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:s,...i}=t,o=WO(GO,n),[a,l]=T.useState(r),c=T.useRef(null),u=Un(e,c),d=T.useRef(0),h=d.current,f=T.useRef(0),g=f.current,y=o.open||a,m=T.useRef(y),b=T.useRef(void 0);return T.useEffect(()=>{const v=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(v)},[]),Yc(()=>{const v=c.current;if(v){b.current=b.current||{transitionDuration:v.style.transitionDuration,animationName:v.style.animationName},v.style.transitionDuration="0s",v.style.animationName="none";const _=v.getBoundingClientRect();d.current=_.height,f.current=_.width,m.current||(v.style.transitionDuration=b.current.transitionDuration,v.style.animationName=b.current.animationName),l(r)}},[o.open,r]),p.jsx(hn.div,{"data-state":qO(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!y,...i,ref:u,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":g?`${g}px`:void 0,...t.style},children:y&&s})});function qO(t){return t?"open":"closed"}var fje=qte,pje=Yte,mje=Xte;const _b=fje,xb=pje,wb=mje,tC=T.forwardRef(({className:t,value:e,...n},r)=>p.jsx("div",{ref:r,className:Pe("relative h-2 w-full overflow-hidden rounded-full bg-bolt-elements-background",t),...n,children:p.jsx("div",{className:"h-full w-full flex-1 bg-bolt-elements-textPrimary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));tC.displayName="Progress";function gje(t,[e,n]){return Math.min(n,Math.max(e,t))}function bje(t,e){return T.useReducer((n,r)=>e[n][r]??n,t)}var KO="ScrollArea",[Jte,Qht]=Xo(KO),[yje,Zo]=Jte(KO),Zte=T.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:i=600,...o}=t,[a,l]=T.useState(null),[c,u]=T.useState(null),[d,h]=T.useState(null),[f,g]=T.useState(null),[y,m]=T.useState(null),[b,v]=T.useState(0),[_,E]=T.useState(0),[w,S]=T.useState(!1),[k,x]=T.useState(!1),I=Un(e,C=>l(C)),R=iO(s);return p.jsx(yje,{scope:n,type:r,dir:R,scrollHideDelay:i,scrollArea:a,viewport:c,onViewportChange:u,content:d,onContentChange:h,scrollbarX:f,onScrollbarXChange:g,scrollbarXEnabled:w,onScrollbarXEnabledChange:S,scrollbarY:y,onScrollbarYChange:m,scrollbarYEnabled:k,onScrollbarYEnabledChange:x,onCornerWidthChange:v,onCornerHeightChange:E,children:p.jsx(hn.div,{dir:R,...o,ref:I,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":_+"px",...t.style}})})});Zte.displayName=KO;var Qte="ScrollAreaViewport",ene=T.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:s,...i}=t,o=Zo(Qte,n),a=T.useRef(null),l=Un(e,a,o.onViewportChange);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),p.jsx(hn.div,{"data-radix-scroll-area-viewport":"",...i,ref:l,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:p.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});ene.displayName=Qte;var nc="ScrollAreaScrollbar",YO=T.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Zo(nc,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=s,a=t.orientation==="horizontal";return T.useEffect(()=>(a?i(!0):o(!0),()=>{a?i(!1):o(!1)}),[a,i,o]),s.type==="hover"?p.jsx(vje,{...r,ref:e,forceMount:n}):s.type==="scroll"?p.jsx(_je,{...r,ref:e,forceMount:n}):s.type==="auto"?p.jsx(tne,{...r,ref:e,forceMount:n}):s.type==="always"?p.jsx(XO,{...r,ref:e}):null});YO.displayName=nc;var vje=T.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Zo(nc,t.__scopeScrollArea),[i,o]=T.useState(!1);return T.useEffect(()=>{const a=s.scrollArea;let l=0;if(a){const c=()=>{window.clearTimeout(l),o(!0)},u=()=>{l=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return a.addEventListener("pointerenter",c),a.addEventListener("pointerleave",u),()=>{window.clearTimeout(l),a.removeEventListener("pointerenter",c),a.removeEventListener("pointerleave",u)}}},[s.scrollArea,s.scrollHideDelay]),p.jsx(Ss,{present:n||i,children:p.jsx(tne,{"data-state":i?"visible":"hidden",...r,ref:e})})}),_je=T.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Zo(nc,t.__scopeScrollArea),i=t.orientation==="horizontal",o=rC(()=>l("SCROLL_END"),100),[a,l]=bje("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return T.useEffect(()=>{if(a==="idle"){const c=window.setTimeout(()=>l("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(c)}},[a,s.scrollHideDelay,l]),T.useEffect(()=>{const c=s.viewport,u=i?"scrollLeft":"scrollTop";if(c){let d=c[u];const h=()=>{const f=c[u];d!==f&&(l("SCROLL"),o()),d=f};return c.addEventListener("scroll",h),()=>c.removeEventListener("scroll",h)}},[s.viewport,i,l,o]),p.jsx(Ss,{present:n||a!=="hidden",children:p.jsx(XO,{"data-state":a==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Nt(t.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:Nt(t.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),tne=T.forwardRef((t,e)=>{const n=Zo(nc,t.__scopeScrollArea),{forceMount:r,...s}=t,[i,o]=T.useState(!1),a=t.orientation==="horizontal",l=rC(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?c:u)}},10);return cg(n.viewport,l),cg(n.content,l),p.jsx(Ss,{present:r||i,children:p.jsx(XO,{"data-state":i?"visible":"hidden",...s,ref:e})})}),XO=T.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,s=Zo(nc,t.__scopeScrollArea),i=T.useRef(null),o=T.useRef(0),[a,l]=T.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=one(a.viewport,a.content),u={...r,sizes:a,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>i.current=h,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:h=>o.current=h};function d(h,f){return Cje(h,o.current,a,f)}return n==="horizontal"?p.jsx(xje,{...u,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const h=s.viewport.scrollLeft,f=P7(h,a,s.dir);i.current.style.transform=`translate3d(${f}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,s.dir))}}):n==="vertical"?p.jsx(wje,{...u,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const h=s.viewport.scrollTop,f=P7(h,a);i.current.style.transform=`translate3d(0, ${f}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null}),xje=T.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=Zo(nc,t.__scopeScrollArea),[o,a]=T.useState(),l=T.useRef(null),c=Un(e,l,i.onScrollbarXChange);return T.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),p.jsx(rne,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":nC(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.x),onDragScroll:u=>t.onDragScroll(u.x),onWheelScroll:(u,d)=>{if(i.viewport){const h=i.viewport.scrollLeft+u.deltaX;t.onWheelScroll(h),lne(h,d)&&u.preventDefault()}},onResize:()=>{l.current&&i.viewport&&o&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:YE(o.paddingLeft),paddingEnd:YE(o.paddingRight)}})}})}),wje=T.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=Zo(nc,t.__scopeScrollArea),[o,a]=T.useState(),l=T.useRef(null),c=Un(e,l,i.onScrollbarYChange);return T.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),p.jsx(rne,{"data-orientation":"vertical",...s,ref:c,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":nC(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.y),onDragScroll:u=>t.onDragScroll(u.y),onWheelScroll:(u,d)=>{if(i.viewport){const h=i.viewport.scrollTop+u.deltaY;t.onWheelScroll(h),lne(h,d)&&u.preventDefault()}},onResize:()=>{l.current&&i.viewport&&o&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:YE(o.paddingTop),paddingEnd:YE(o.paddingBottom)}})}})}),[Eje,nne]=Jte(nc),rne=T.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:u,onResize:d,...h}=t,f=Zo(nc,n),[g,y]=T.useState(null),m=Un(e,I=>y(I)),b=T.useRef(null),v=T.useRef(""),_=f.viewport,E=r.content-r.viewport,w=Vr(u),S=Vr(l),k=rC(d,10);function x(I){if(b.current){const R=I.clientX-b.current.left,C=I.clientY-b.current.top;c({x:R,y:C})}}return T.useEffect(()=>{const I=R=>{const C=R.target;g?.contains(C)&&w(R,E)};return document.addEventListener("wheel",I,{passive:!1}),()=>document.removeEventListener("wheel",I,{passive:!1})},[_,g,E,w]),T.useEffect(S,[r,S]),cg(g,k),cg(f.content,k),p.jsx(Eje,{scope:n,scrollbar:g,hasThumb:s,onThumbChange:Vr(i),onThumbPointerUp:Vr(o),onThumbPositionChange:S,onThumbPointerDown:Vr(a),children:p.jsx(hn.div,{...h,ref:m,style:{position:"absolute",...h.style},onPointerDown:Nt(t.onPointerDown,I=>{I.button===0&&(I.target.setPointerCapture(I.pointerId),b.current=g.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",f.viewport&&(f.viewport.style.scrollBehavior="auto"),x(I))}),onPointerMove:Nt(t.onPointerMove,x),onPointerUp:Nt(t.onPointerUp,I=>{const R=I.target;R.hasPointerCapture(I.pointerId)&&R.releasePointerCapture(I.pointerId),document.body.style.webkitUserSelect=v.current,f.viewport&&(f.viewport.style.scrollBehavior=""),b.current=null})})})}),KE="ScrollAreaThumb",sne=T.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=nne(KE,t.__scopeScrollArea);return p.jsx(Ss,{present:n||s.hasThumb,children:p.jsx(Sje,{ref:e,...r})})}),Sje=T.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...s}=t,i=Zo(KE,n),o=nne(KE,n),{onThumbPositionChange:a}=o,l=Un(e,d=>o.onThumbChange(d)),c=T.useRef(void 0),u=rC(()=>{c.current&&(c.current(),c.current=void 0)},100);return T.useEffect(()=>{const d=i.viewport;if(d){const h=()=>{if(u(),!c.current){const f=Aje(d,a);c.current=f,a()}};return a(),d.addEventListener("scroll",h),()=>d.removeEventListener("scroll",h)}},[i.viewport,u,a]),p.jsx(hn.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Nt(t.onPointerDownCapture,d=>{const f=d.target.getBoundingClientRect(),g=d.clientX-f.left,y=d.clientY-f.top;o.onThumbPointerDown({x:g,y})}),onPointerUp:Nt(t.onPointerUp,o.onThumbPointerUp)})});sne.displayName=KE;var JO="ScrollAreaCorner",ine=T.forwardRef((t,e)=>{const n=Zo(JO,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?p.jsx(kje,{...t,ref:e}):null});ine.displayName=JO;var kje=T.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,s=Zo(JO,n),[i,o]=T.useState(0),[a,l]=T.useState(0),c=!!(i&&a);return cg(s.scrollbarX,()=>{const u=s.scrollbarX?.offsetHeight||0;s.onCornerHeightChange(u),l(u)}),cg(s.scrollbarY,()=>{const u=s.scrollbarY?.offsetWidth||0;s.onCornerWidthChange(u),o(u)}),c?p.jsx(hn.div,{...r,ref:e,style:{width:i,height:a,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function YE(t){return t?parseInt(t,10):0}function one(t,e){const n=t/e;return isNaN(n)?0:n}function nC(t){const e=one(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function Cje(t,e,n,r="ltr"){const s=nC(n),i=s/2,o=e||i,a=s-o,l=n.scrollbar.paddingStart+o,c=n.scrollbar.size-n.scrollbar.paddingEnd-a,u=n.content-n.viewport,d=r==="ltr"?[0,u]:[u*-1,0];return ane([l,c],d)(t)}function P7(t,e,n="ltr"){const r=nC(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-s,o=e.content-e.viewport,a=i-r,l=n==="ltr"?[0,o]:[o*-1,0],c=gje(t,l);return ane([0,o],[0,a])(c)}function ane(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function lne(t,e){return t>0&&t<e}var Aje=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function s(){const i={left:t.scrollLeft,top:t.scrollTop},o=n.left!==i.left,a=n.top!==i.top;(o||a)&&e(),n=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function rC(t,e){const n=Vr(t),r=T.useRef(0);return T.useEffect(()=>()=>window.clearTimeout(r.current),[]),T.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function cg(t,e){const n=Vr(e);Yc(()=>{let r=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(t),()=>{window.cancelAnimationFrame(r),s.unobserve(t)}}},[t,n])}var cne=Zte,Tje=ene,Nje=ine;const ZO=T.forwardRef(({className:t,children:e,...n},r)=>p.jsxs(cne,{ref:r,className:Pe("relative overflow-hidden",t),...n,children:[p.jsx(Tje,{className:"h-full w-full rounded-[inherit]",children:e}),p.jsx(une,{}),p.jsx(Nje,{})]}));ZO.displayName=cne.displayName;const une=T.forwardRef(({className:t,orientation:e="vertical",...n},r)=>p.jsx(YO,{ref:r,orientation:e,className:Pe("flex touch-none select-none transition-colors",{"h-full w-2.5 border-l border-l-transparent p-[1px]":e==="vertical","h-2.5 flex-col border-t border-t-transparent p-[1px]":e==="horizontal"},t),...n,children:p.jsx(sne,{className:"relative flex-1 rounded-full bg-bolt-elements-border"})}));une.displayName=YO.displayName;const I7=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,R7=Uc,dne=(t,e)=>n=>{var r;if(e?.variants==null)return R7(t,n?.class,n?.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const u=n?.[c],d=i?.[c];if(u===null)return null;const h=I7(u)||I7(d);return s[c][h]}),a=n&&Object.entries(n).reduce((c,u)=>{let[d,h]=u;return h===void 0||(c[d]=h),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:d,className:h,...f}=u;return Object.entries(f).every(g=>{let[y,m]=g;return Array.isArray(m)?m.includes({...i,...a}[y]):{...i,...a}[y]===m})?[...c,d,h]:c},[]);return R7(t,o,l,n?.class,n?.className)},Pje=dne("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-bolt-elements-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-bolt-elements-background text-bolt-elements-textPrimary hover:bg-bolt-elements-background/80",secondary:"border-transparent bg-bolt-elements-background text-bolt-elements-textSecondary hover:bg-bolt-elements-background/80",destructive:"border-transparent bg-red-500/10 text-red-500 hover:bg-red-500/20",outline:"text-bolt-elements-textPrimary"}},defaultVariants:{variant:"default"}});function o5({className:t,variant:e,...n}){return p.jsx("div",{className:Pe(Pje({variant:e}),t),...n})}var Fs=Uint8Array,Ki=Uint16Array,QO=Int32Array,sC=new Fs([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),iC=new Fs([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),UP=new Fs([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),hne=function(t,e){for(var n=new Ki(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var s=new QO(n[30]),r=1;r<30;++r)for(var i=n[r];i<n[r+1];++i)s[i]=i-n[r]<<5|r;return{b:n,r:s}},fne=hne(sC,2),pne=fne.b,$P=fne.r;pne[28]=258,$P[258]=28;var mne=hne(iC,0),Ije=mne.b,L7=mne.r,HP=new Ki(32768);for(var er=0;er<32768;++er){var Cu=(er&43690)>>1|(er&21845)<<1;Cu=(Cu&52428)>>2|(Cu&13107)<<2,Cu=(Cu&61680)>>4|(Cu&3855)<<4,HP[er]=((Cu&65280)>>8|(Cu&255)<<8)>>1}var Ul=function(t,e,n){for(var r=t.length,s=0,i=new Ki(e);s<r;++s)t[s]&&++i[t[s]-1];var o=new Ki(e);for(s=1;s<e;++s)o[s]=o[s-1]+i[s-1]<<1;var a;if(n){a=new Ki(1<<e);var l=15-e;for(s=0;s<r;++s)if(t[s])for(var c=s<<4|t[s],u=e-t[s],d=o[t[s]-1]++<<u,h=d|(1<<u)-1;d<=h;++d)a[HP[d]>>l]=c}else for(a=new Ki(r),s=0;s<r;++s)t[s]&&(a[s]=HP[o[t[s]-1]++]>>15-t[s]);return a},Ed=new Fs(288);for(var er=0;er<144;++er)Ed[er]=8;for(var er=144;er<256;++er)Ed[er]=9;for(var er=256;er<280;++er)Ed[er]=7;for(var er=280;er<288;++er)Ed[er]=8;var p1=new Fs(32);for(var er=0;er<32;++er)p1[er]=5;var Rje=Ul(Ed,9,0),Lje=Ul(Ed,9,1),Oje=Ul(p1,5,0),Dje=Ul(p1,5,1),a5=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},ua=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},l5=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},e6=function(t){return(t+7)/8|0},gne=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new Fs(t.subarray(e,n))},Mje=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ma=function(t,e,n){var r=new Error(e||Mje[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,ma),!n)throw r;return r},jje=function(t,e,n,r){var s=t.length,i=0;if(!s||e.f&&!e.l)return n||new Fs(0);var o=!n,a=o||e.i!=2,l=e.i;o&&(n=new Fs(s*3));var c=function(Se){var Te=n.length;if(Se>Te){var ke=new Fs(Math.max(Te*2,Se));ke.set(n),n=ke}},u=e.f||0,d=e.p||0,h=e.b||0,f=e.l,g=e.d,y=e.m,m=e.n,b=s*8;do{if(!f){u=ua(t,d,1);var v=ua(t,d+1,3);if(d+=3,v)if(v==1)f=Lje,g=Dje,y=9,m=5;else if(v==2){var S=ua(t,d,31)+257,k=ua(t,d+10,15)+4,x=S+ua(t,d+5,31)+1;d+=14;for(var I=new Fs(x),R=new Fs(19),C=0;C<k;++C)R[UP[C]]=ua(t,d+C*3,7);d+=k*3;for(var N=a5(R),O=(1<<N)-1,P=Ul(R,N,1),C=0;C<x;){var $=P[ua(t,d,O)];d+=$&15;var _=$>>4;if(_<16)I[C++]=_;else{var ee=0,J=0;for(_==16?(J=3+ua(t,d,3),d+=2,ee=I[C-1]):_==17?(J=3+ua(t,d,7),d+=3):_==18&&(J=11+ua(t,d,127),d+=7);J--;)I[C++]=ee}}var Z=I.subarray(0,S),M=I.subarray(S);y=a5(Z),m=a5(M),f=Ul(Z,y,1),g=Ul(M,m,1)}else ma(1);else{var _=e6(d)+4,E=t[_-4]|t[_-3]<<8,w=_+E;if(w>s){l&&ma(0);break}a&&c(h+E),n.set(t.subarray(_,w),h),e.b=h+=E,e.p=d=w*8,e.f=u;continue}if(d>b){l&&ma(0);break}}a&&c(h+131072);for(var F=(1<<y)-1,G=(1<<m)-1,D=d;;D=d){var ee=f[l5(t,d)&F],j=ee>>4;if(d+=ee&15,d>b){l&&ma(0);break}if(ee||ma(2),j<256)n[h++]=j;else if(j==256){D=d,f=null;break}else{var V=j-254;if(j>264){var C=j-257,W=sC[C];V=ua(t,d,(1<<W)-1)+pne[C],d+=W}var re=g[l5(t,d)&G],te=re>>4;re||ma(3),d+=re&15;var M=Ije[te];if(te>3){var W=iC[te];M+=l5(t,d)&(1<<W)-1,d+=W}if(d>b){l&&ma(0);break}a&&c(h+131072);var Y=h+V;if(h<M){var de=i-M,ye=Math.min(M,Y);for(de+h<0&&ma(3);h<ye;++h)n[h]=r[de+h]}for(;h<Y;++h)n[h]=n[h-M]}}e.l=f,e.p=D,e.b=h,e.f=u,f&&(u=1,e.m=y,e.d=g,e.n=m)}while(!u);return h!=n.length&&o?gne(n,0,h):n.subarray(0,h)},bc=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},z0=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},c5=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var s=n.length,i=n.slice();if(!s)return{t:yne,l:0};if(s==1){var o=new Fs(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(w,S){return w.f-S.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,u=1,d=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=s-1;)a=n[n[c].f<n[d].f?c++:d++],l=n[c!=u&&n[c].f<n[d].f?c++:d++],n[u++]={s:-1,f:a.f+l.f,l:a,r:l};for(var h=i[0].s,r=1;r<s;++r)i[r].s>h&&(h=i[r].s);var f=new Ki(h+1),g=zP(n[u-1],f,0);if(g>e){var r=0,y=0,m=g-e,b=1<<m;for(i.sort(function(S,k){return f[k.s]-f[S.s]||S.f-k.f});r<s;++r){var v=i[r].s;if(f[v]>e)y+=b-(1<<g-f[v]),f[v]=e;else break}for(y>>=m;y>0;){var _=i[r].s;f[_]<e?y-=1<<e-f[_]++-1:++r}for(;r>=0&&y;--r){var E=i[r].s;f[E]==e&&(--f[E],++y)}g=e}return{t:new Fs(f),l:g}},zP=function(t,e,n){return t.s==-1?Math.max(zP(t.l,e,n+1),zP(t.r,e,n+1)):e[t.s]=n},O7=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Ki(++e),r=0,s=t[0],i=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==s&&a!=e)++i;else{if(!s&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(s),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(s);i=1,s=t[a]}return{c:n.subarray(0,r),n:e}},V0=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},bne=function(t,e,n){var r=n.length,s=e6(e+2);t[s]=r&255,t[s+1]=r>>8,t[s+2]=t[s]^255,t[s+3]=t[s+1]^255;for(var i=0;i<r;++i)t[s+i+4]=n[i];return(s+4+r)*8},D7=function(t,e,n,r,s,i,o,a,l,c,u){bc(e,u++,n),++s[256];for(var d=c5(s,15),h=d.t,f=d.l,g=c5(i,15),y=g.t,m=g.l,b=O7(h),v=b.c,_=b.n,E=O7(y),w=E.c,S=E.n,k=new Ki(19),x=0;x<v.length;++x)++k[v[x]&31];for(var x=0;x<w.length;++x)++k[w[x]&31];for(var I=c5(k,7),R=I.t,C=I.l,N=19;N>4&&!R[UP[N-1]];--N);var O=c+5<<3,P=V0(s,Ed)+V0(i,p1)+o,$=V0(s,h)+V0(i,y)+o+14+3*N+V0(k,R)+2*k[16]+3*k[17]+7*k[18];if(l>=0&&O<=P&&O<=$)return bne(e,u,t.subarray(l,l+c));var ee,J,Z,M;if(bc(e,u,1+($<P)),u+=2,$<P){ee=Ul(h,f,0),J=h,Z=Ul(y,m,0),M=y;var F=Ul(R,C,0);bc(e,u,_-257),bc(e,u+5,S-1),bc(e,u+10,N-4),u+=14;for(var x=0;x<N;++x)bc(e,u+3*x,R[UP[x]]);u+=3*N;for(var G=[v,w],D=0;D<2;++D)for(var j=G[D],x=0;x<j.length;++x){var V=j[x]&31;bc(e,u,F[V]),u+=R[V],V>15&&(bc(e,u,j[x]>>5&127),u+=j[x]>>12)}}else ee=Rje,J=Ed,Z=Oje,M=p1;for(var x=0;x<a;++x){var W=r[x];if(W>255){var V=W>>18&31;z0(e,u,ee[V+257]),u+=J[V+257],V>7&&(bc(e,u,W>>23&31),u+=sC[V]);var re=W&31;z0(e,u,Z[re]),u+=M[re],re>3&&(z0(e,u,W>>5&8191),u+=iC[re])}else z0(e,u,ee[W]),u+=J[W]}return z0(e,u,ee[256]),u+J[256]},Fje=new QO([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),yne=new Fs(0),Bje=function(t,e,n,r,s,i){var o=i.z||t.length,a=new Fs(r+o+5*(1+Math.ceil(o/7e3))+s),l=a.subarray(r,a.length-s),c=i.l,u=(i.r||0)&7;if(e){u&&(l[0]=i.r>>3);for(var d=Fje[e-1],h=d>>13,f=d&8191,g=(1<<n)-1,y=i.p||new Ki(32768),m=i.h||new Ki(g+1),b=Math.ceil(n/3),v=2*b,_=function(K){return(t[K]^t[K+1]<<b^t[K+2]<<v)&g},E=new QO(25e3),w=new Ki(288),S=new Ki(32),k=0,x=0,I=i.i||0,R=0,C=i.w||0,N=0;I+2<o;++I){var O=_(I),P=I&32767,$=m[O];if(y[P]=$,m[O]=P,C<=I){var ee=o-I;if((k>7e3||R>24576)&&(ee>423||!c)){u=D7(t,l,0,E,w,S,x,R,N,I-N,u),R=k=x=0,N=I;for(var J=0;J<286;++J)w[J]=0;for(var J=0;J<30;++J)S[J]=0}var Z=2,M=0,F=f,G=P-$&32767;if(ee>2&&O==_(I-G))for(var D=Math.min(h,ee)-1,j=Math.min(32767,I),V=Math.min(258,ee);G<=j&&--F&&P!=$;){if(t[I+Z]==t[I+Z-G]){for(var W=0;W<V&&t[I+W]==t[I+W-G];++W);if(W>Z){if(Z=W,M=G,W>D)break;for(var re=Math.min(G,W-2),te=0,J=0;J<re;++J){var Y=I-G+J&32767,de=y[Y],ye=Y-de&32767;ye>te&&(te=ye,$=Y)}}}P=$,$=y[P],G+=P-$&32767}if(M){E[R++]=268435456|$P[Z]<<18|L7[M];var Se=$P[Z]&31,Te=L7[M]&31;x+=sC[Se]+iC[Te],++w[257+Se],++S[Te],C=I+Z,++k}else E[R++]=t[I],++w[t[I]]}}for(I=Math.max(I,C);I<o;++I)E[R++]=t[I],++w[t[I]];u=D7(t,l,c,E,w,S,x,R,N,I-N,u),c||(i.r=u&7|l[u/8|0]<<3,u-=7,i.h=m,i.p=y,i.i=I,i.w=C)}else{for(var I=i.w||0;I<o+c;I+=65535){var ke=I+65535;ke>=o&&(l[u/8|0]=c,ke=o),u=bne(l,u+1,t.subarray(I,ke))}i.i=o}return gne(a,0,r+e6(u)+s)},vne=function(){var t=1,e=0;return{p:function(n){for(var r=t,s=e,i=n.length|0,o=0;o!=i;){for(var a=Math.min(o+2655,i);o<a;++o)s+=r+=n[o];r=(r&65535)+15*(r>>16),s=(s&65535)+15*(s>>16)}t=r,e=s},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},Uje=function(t,e,n,r,s){if(!s&&(s={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),o=new Fs(i.length+t.length);o.set(i),o.set(t,i.length),t=o,s.w=i.length}return Bje(t,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,s)},_ne=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},$je=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var s=vne();s.p(e.dictionary),_ne(t,2,s.d())}},Hje=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&ma(6,"invalid zlib data"),(t[1]>>5&1)==1&&ma(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function VP(t,e){e||(e={});var n=vne();n.p(t);var r=Uje(t,e,e.dictionary?6:2,4);return $je(r,e),_ne(r,r.length-4,n.d()),r}function zje(t,e){return jje(t.subarray(Hje(t),-4),{i:2},e,e)}var Vje=typeof TextDecoder<"u"&&new TextDecoder,Wje=0;try{Vje.decode(yne,{stream:!0}),Wje=1}catch{}var Ut=function(){return typeof window<"u"?window:typeof NM<"u"?NM:typeof self<"u"?self:this}();function u5(){Ut.console&&typeof Ut.console.log=="function"&&Ut.console.log.apply(Ut.console,arguments)}var Wn={log:u5,warn:function(t){Ut.console&&(typeof Ut.console.warn=="function"?Ut.console.warn.apply(Ut.console,arguments):u5.call(null,arguments))},error:function(t){Ut.console&&(typeof Ut.console.error=="function"?Ut.console.error.apply(Ut.console,arguments):u5(t))}};function d5(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){mh(r.response,e,n)},r.onerror=function(){Wn.error("could not download file")},r.send()}function M7(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Lx(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var uy,WP,mh=Ut.saveAs||((typeof window>"u"?"undefined":Bn(window))!=="object"||window!==Ut?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=Ut.URL||Ut.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener",typeof t=="string"?(s.href=t,s.origin!==location.origin?M7(s.href)?d5(t,e,n):Lx(s,s.target="_blank"):Lx(s)):(s.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(s.href)},4e4),setTimeout(function(){Lx(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(M7(t))d5(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){Lx(r)})}else navigator.msSaveOrOpenBlob(function(s,i){return i===void 0?i={autoBom:!1}:Bn(i)!=="object"&&(Wn.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return d5(t,e,n);var s=t.type==="application/octet-stream",i=/constructor/i.test(Ut.HTMLElement)||Ut.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||s&&i)&&(typeof FileReader>"u"?"undefined":Bn(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var u=a.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=u:location=u,r=null},a.readAsDataURL(t)}else{var l=Ut.URL||Ut.webkitURL,c=l.createObjectURL(t);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function xne(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var s=n[r].re,i=n[r].process,o=s.exec(t);o&&(e=i(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+a+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function h5(t,e){var n=t[0],r=t[1],s=t[2],i=t[3];n=Ts(n,r,s,i,e[0],7,-680876936),i=Ts(i,n,r,s,e[1],12,-389564586),s=Ts(s,i,n,r,e[2],17,606105819),r=Ts(r,s,i,n,e[3],22,-1044525330),n=Ts(n,r,s,i,e[4],7,-176418897),i=Ts(i,n,r,s,e[5],12,1200080426),s=Ts(s,i,n,r,e[6],17,-1473231341),r=Ts(r,s,i,n,e[7],22,-45705983),n=Ts(n,r,s,i,e[8],7,1770035416),i=Ts(i,n,r,s,e[9],12,-1958414417),s=Ts(s,i,n,r,e[10],17,-42063),r=Ts(r,s,i,n,e[11],22,-1990404162),n=Ts(n,r,s,i,e[12],7,1804603682),i=Ts(i,n,r,s,e[13],12,-40341101),s=Ts(s,i,n,r,e[14],17,-1502002290),n=Ns(n,r=Ts(r,s,i,n,e[15],22,1236535329),s,i,e[1],5,-165796510),i=Ns(i,n,r,s,e[6],9,-1069501632),s=Ns(s,i,n,r,e[11],14,643717713),r=Ns(r,s,i,n,e[0],20,-373897302),n=Ns(n,r,s,i,e[5],5,-701558691),i=Ns(i,n,r,s,e[10],9,38016083),s=Ns(s,i,n,r,e[15],14,-660478335),r=Ns(r,s,i,n,e[4],20,-405537848),n=Ns(n,r,s,i,e[9],5,568446438),i=Ns(i,n,r,s,e[14],9,-1019803690),s=Ns(s,i,n,r,e[3],14,-187363961),r=Ns(r,s,i,n,e[8],20,1163531501),n=Ns(n,r,s,i,e[13],5,-1444681467),i=Ns(i,n,r,s,e[2],9,-51403784),s=Ns(s,i,n,r,e[7],14,1735328473),n=Ps(n,r=Ns(r,s,i,n,e[12],20,-1926607734),s,i,e[5],4,-378558),i=Ps(i,n,r,s,e[8],11,-2022574463),s=Ps(s,i,n,r,e[11],16,1839030562),r=Ps(r,s,i,n,e[14],23,-35309556),n=Ps(n,r,s,i,e[1],4,-1530992060),i=Ps(i,n,r,s,e[4],11,1272893353),s=Ps(s,i,n,r,e[7],16,-155497632),r=Ps(r,s,i,n,e[10],23,-1094730640),n=Ps(n,r,s,i,e[13],4,681279174),i=Ps(i,n,r,s,e[0],11,-358537222),s=Ps(s,i,n,r,e[3],16,-722521979),r=Ps(r,s,i,n,e[6],23,76029189),n=Ps(n,r,s,i,e[9],4,-640364487),i=Ps(i,n,r,s,e[12],11,-421815835),s=Ps(s,i,n,r,e[15],16,530742520),n=Is(n,r=Ps(r,s,i,n,e[2],23,-995338651),s,i,e[0],6,-198630844),i=Is(i,n,r,s,e[7],10,1126891415),s=Is(s,i,n,r,e[14],15,-1416354905),r=Is(r,s,i,n,e[5],21,-57434055),n=Is(n,r,s,i,e[12],6,1700485571),i=Is(i,n,r,s,e[3],10,-1894986606),s=Is(s,i,n,r,e[10],15,-1051523),r=Is(r,s,i,n,e[1],21,-2054922799),n=Is(n,r,s,i,e[8],6,1873313359),i=Is(i,n,r,s,e[15],10,-30611744),s=Is(s,i,n,r,e[6],15,-1560198380),r=Is(r,s,i,n,e[13],21,1309151649),n=Is(n,r,s,i,e[4],6,-145523070),i=Is(i,n,r,s,e[11],10,-1120210379),s=Is(s,i,n,r,e[2],15,718787259),r=Is(r,s,i,n,e[9],21,-343485551),t[0]=Zu(n,t[0]),t[1]=Zu(r,t[1]),t[2]=Zu(s,t[2]),t[3]=Zu(i,t[3])}function oC(t,e,n,r,s,i){return e=Zu(Zu(e,t),Zu(r,i)),Zu(e<<s|e>>>32-s,n)}function Ts(t,e,n,r,s,i,o){return oC(e&n|~e&r,t,e,s,i,o)}function Ns(t,e,n,r,s,i,o){return oC(e&r|n&~r,t,e,s,i,o)}function Ps(t,e,n,r,s,i,o){return oC(e^n^r,t,e,s,i,o)}function Is(t,e,n,r,s,i,o){return oC(n^(e|~r),t,e,s,i,o)}function wne(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)h5(r,Gje(t.substring(e-64,e)));t=t.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)s[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(h5(r,s),e=0;e<16;e++)s[e]=0;return s[14]=8*n,h5(r,s),r}function Gje(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}uy=Ut.atob.bind(Ut),WP=Ut.btoa.bind(Ut);var j7="0123456789abcdef".split("");function qje(t){for(var e="",n=0;n<4;n++)e+=j7[t>>8*n+4&15]+j7[t>>8*n&15];return e}function Kje(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function GP(t){return wne(t).map(Kje).join("")}var Yje=function(t){for(var e=0;e<t.length;e++)t[e]=qje(t[e]);return t.join("")}(wne("hello"))!="5d41402abc4b2a76b9719d911017c592";function Zu(t,e){if(Yje){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function qP(t,e){var n,r,s,i;if(t!==n){for(var o=(s=t,i=1+(256/t.length>>0),new Array(i+1).join(s)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var u=a[l];c=(c+u+o.charCodeAt(l))%256,a[l]=a[c],a[c]=u}n=t,r=a}else a=r;var d=e.length,h=0,f=0,g="";for(l=0;l<d;l++)f=(f+(u=a[h=(h+1)%256]))%256,a[h]=a[f],a[f]=u,o=a[(a[h]+a[f])%256],g+=String.fromCharCode(e.charCodeAt(l)^o);return g}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var F7={print:4,modify:8,copy:16,"annot-forms":32};function Kp(t,e,n,r){this.v=1,this.r=2;var s=192;t.forEach(function(a){if(F7.perm!==void 0)throw new Error("Invalid permission: "+a);s+=F7[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^s)),this.encryptionKey=GP(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=qP(this.encryptionKey,this.padding)}function Yp(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var s=t.charCodeAt(r);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?e+="#"+("0"+s.toString(16)).slice(-2):e+=t[r]}return e}function B7(t){if(Bn(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,s){if(s=s||!1,typeof n!="string"||typeof r!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var i=Math.random().toString(35);return e[n][i]=[r,!!s],i},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),s=[];for(var i in e[n]){var o=e[n][i];try{o[0].apply(t,r)}catch(a){Ut.console&&Wn.error("jsPDF PubSub Error",a.message,a)}o[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function XE(t){if(!(this instanceof XE))return new XE(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function Ene(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function wh(t,e,n,r,s){if(!(this instanceof wh))return new wh(t,e,n,r,s);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,Ene.call(this,r,s)}function um(t,e,n,r,s){if(!(this instanceof um))return new um(t,e,n,r,s);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,Ene.call(this,r,s)}function jt(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],s=arguments[2],i=arguments[3],o=[],a=1,l=16,c="S",u=null;Bn(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,s=t.format||s,i=t.compress||t.compressPdf||i,(u=t.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),o=t.filters||(i===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var d=t.putOnlyUsedFonts||!1,h={},f={internal:{},__private__:{}};f.__private__.PubSub=B7;var g="1.3",y=f.__private__.getPdfVersion=function(){return g};f.__private__.setPdfVersion=function(B){g=B};var m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return m};var b=f.__private__.getPageFormat=function(B){return m[B]};s=s||"a4";var v={COMPAT:"compat",ADVANCED:"advanced"},_=v.COMPAT;function E(){this.saveGraphicsState(),ne(new Ft(z,0,0,-z,0,hu()*z).toString()+" cm"),this.setFontSize(this.getFontSize()/z),c="n",_=v.ADVANCED}function w(){this.restoreGraphicsState(),c="S",_=v.COMPAT}var S=f.__private__.combineFontStyleAndFontWeight=function(B,ae){if(B=="bold"&&ae=="normal"||B=="bold"&&ae==400||B=="normal"&&ae=="italic"||B=="bold"&&ae=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ae&&(B=ae==400||ae==="normal"?B==="italic"?"italic":"normal":ae!=700&&ae!=="bold"||B!=="normal"?(ae==700?"bold":ae)+""+B:"bold"),B};f.advancedAPI=function(B){var ae=_===v.COMPAT;return ae&&E.call(this),typeof B!="function"||(B(this),ae&&w.call(this)),this},f.compatAPI=function(B){var ae=_===v.ADVANCED;return ae&&w.call(this),typeof B!="function"||(B(this),ae&&E.call(this)),this},f.isAdvancedAPI=function(){return _===v.ADVANCED};var k,x=function(B){if(_!==v.ADVANCED)throw new Error(B+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},I=f.roundToPrecision=f.__private__.roundToPrecision=function(B,ae){var Ee=e||ae;if(isNaN(B)||isNaN(Ee))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return B.toFixed(Ee).replace(/0+$/,"")};k=f.hpf=f.__private__.hpf=typeof l=="number"?function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return I(B,l)}:l==="smart"?function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return I(B,B>-1&&B<1?16:5)}:function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return I(B,16)};var R=f.f2=f.__private__.f2=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.f2");return I(B,2)},C=f.__private__.f3=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.f3");return I(B,3)},N=f.scale=f.__private__.scale=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.scale");return _===v.COMPAT?B*z:_===v.ADVANCED?B:void 0},O=function(B){return _===v.COMPAT?hu()-B:_===v.ADVANCED?B:void 0},P=function(B){return N(O(B))};f.__private__.setPrecision=f.setPrecision=function(B){typeof parseInt(B,10)=="number"&&(e=parseInt(B,10))};var $,ee="00000000000000000000000000000000",J=f.__private__.getFileId=function(){return ee},Z=f.__private__.setFileId=function(B){return ee=B!==void 0&&/^[a-fA-F0-9]{32}$/.test(B)?B.toUpperCase():ee.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(Cs=new Kp(u.userPermissions,u.userPassword,u.ownerPassword,ee)),ee};f.setFileId=function(B){return Z(B),this},f.getFileId=function(){return J()};var M=f.__private__.convertDateToPDFDate=function(B){var ae=B.getTimezoneOffset(),Ee=ae<0?"+":"-",Re=Math.floor(Math.abs(ae/60)),He=Math.abs(ae%60),Qe=[Ee,V(Re),"'",V(He),"'"].join("");return["D:",B.getFullYear(),V(B.getMonth()+1),V(B.getDate()),V(B.getHours()),V(B.getMinutes()),V(B.getSeconds()),Qe].join("")},F=f.__private__.convertPDFDateToDate=function(B){var ae=parseInt(B.substr(2,4),10),Ee=parseInt(B.substr(6,2),10)-1,Re=parseInt(B.substr(8,2),10),He=parseInt(B.substr(10,2),10),Qe=parseInt(B.substr(12,2),10),ct=parseInt(B.substr(14,2),10);return new Date(ae,Ee,Re,He,Qe,ct,0)},G=f.__private__.setCreationDate=function(B){var ae;if(B===void 0&&(B=new Date),B instanceof Date)ae=M(B);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(B))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ae=B}return $=ae},D=f.__private__.getCreationDate=function(B){var ae=$;return B==="jsDate"&&(ae=F($)),ae};f.setCreationDate=function(B){return G(B),this},f.getCreationDate=function(B){return D(B)};var j,V=f.__private__.padd2=function(B){return("0"+parseInt(B)).slice(-2)},W=f.__private__.padd2Hex=function(B){return("00"+(B=B.toString())).substr(B.length)},re=0,te=[],Y=[],de=0,ye=[],Se=[],Te=!1,ke=Y,K=function(){re=0,de=0,Y=[],te=[],ye=[],oc=Rr(),ta=Rr()};f.__private__.setCustomOutputDestination=function(B){Te=!0,ke=B};var ge=function(B){Te||(ke=B)};f.__private__.resetCustomOutputDestination=function(){Te=!1,ke=Y};var ne=f.__private__.out=function(B){return B=B.toString(),de+=B.length+1,ke.push(B),ke},le=f.__private__.write=function(B){return ne(arguments.length===1?B.toString():Array.prototype.join.call(arguments," "))},se=f.__private__.getArrayBuffer=function(B){for(var ae=B.length,Ee=new ArrayBuffer(ae),Re=new Uint8Array(Ee);ae--;)Re[ae]=B.charCodeAt(ae);return Ee},fe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return fe};var Ce=t.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(B){return Ce=_===v.ADVANCED?B/z:B,this};var Ie,xe=f.__private__.getFontSize=f.getFontSize=function(){return _===v.COMPAT?Ce:Ce*z},$e=t.R2L||!1;f.__private__.setR2L=f.setR2L=function(B){return $e=B,this},f.__private__.getR2L=f.getR2L=function(){return $e};var je,Be=f.__private__.setZoomMode=function(B){var ae=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(B))Ie=B;else if(isNaN(B)){if(ae.indexOf(B)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+B+'" is not recognized.');Ie=B}else Ie=parseInt(B,10)};f.__private__.getZoomMode=function(){return Ie};var Ae,Ye=f.__private__.setPageMode=function(B){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(B)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+B+'" is not recognized.');je=B};f.__private__.getPageMode=function(){return je};var Xe=f.__private__.setLayoutMode=function(B){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(B)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+B+'" is not recognized.');Ae=B};f.__private__.getLayoutMode=function(){return Ae},f.__private__.setDisplayMode=f.setDisplayMode=function(B,ae,Ee){return Be(B),Xe(ae),Ye(Ee),this};var tt={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(B){if(Object.keys(tt).indexOf(B)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return tt[B]},f.__private__.getDocumentProperties=function(){return tt},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(B){for(var ae in tt)tt.hasOwnProperty(ae)&&B[ae]&&(tt[ae]=B[ae]);return this},f.__private__.setDocumentProperty=function(B,ae){if(Object.keys(tt).indexOf(B)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return tt[B]=ae};var ie,z,X,pe,Le,Ue={},We={},Rt=[],At={},fn={},Ht={},Kt={},Ks=null,Hn=0,Vt=[],Ln=new B7(f),Hd=t.hotfixes||[],us={},$a={},Ha=[],Ft=function B(ae,Ee,Re,He,Qe,ct){if(!(this instanceof B))return new B(ae,Ee,Re,He,Qe,ct);isNaN(ae)&&(ae=1),isNaN(Ee)&&(Ee=0),isNaN(Re)&&(Re=0),isNaN(He)&&(He=1),isNaN(Qe)&&(Qe=0),isNaN(ct)&&(ct=0),this._matrix=[ae,Ee,Re,He,Qe,ct]};Object.defineProperty(Ft.prototype,"sx",{get:function(){return this._matrix[0]},set:function(B){this._matrix[0]=B}}),Object.defineProperty(Ft.prototype,"shy",{get:function(){return this._matrix[1]},set:function(B){this._matrix[1]=B}}),Object.defineProperty(Ft.prototype,"shx",{get:function(){return this._matrix[2]},set:function(B){this._matrix[2]=B}}),Object.defineProperty(Ft.prototype,"sy",{get:function(){return this._matrix[3]},set:function(B){this._matrix[3]=B}}),Object.defineProperty(Ft.prototype,"tx",{get:function(){return this._matrix[4]},set:function(B){this._matrix[4]=B}}),Object.defineProperty(Ft.prototype,"ty",{get:function(){return this._matrix[5]},set:function(B){this._matrix[5]=B}}),Object.defineProperty(Ft.prototype,"a",{get:function(){return this._matrix[0]},set:function(B){this._matrix[0]=B}}),Object.defineProperty(Ft.prototype,"b",{get:function(){return this._matrix[1]},set:function(B){this._matrix[1]=B}}),Object.defineProperty(Ft.prototype,"c",{get:function(){return this._matrix[2]},set:function(B){this._matrix[2]=B}}),Object.defineProperty(Ft.prototype,"d",{get:function(){return this._matrix[3]},set:function(B){this._matrix[3]=B}}),Object.defineProperty(Ft.prototype,"e",{get:function(){return this._matrix[4]},set:function(B){this._matrix[4]=B}}),Object.defineProperty(Ft.prototype,"f",{get:function(){return this._matrix[5]},set:function(B){this._matrix[5]=B}}),Object.defineProperty(Ft.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ft.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ft.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ft.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ft.prototype.join=function(B){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(k).join(B)},Ft.prototype.multiply=function(B){var ae=B.sx*this.sx+B.shy*this.shx,Ee=B.sx*this.shy+B.shy*this.sy,Re=B.shx*this.sx+B.sy*this.shx,He=B.shx*this.shy+B.sy*this.sy,Qe=B.tx*this.sx+B.ty*this.shx+this.tx,ct=B.tx*this.shy+B.ty*this.sy+this.ty;return new Ft(ae,Ee,Re,He,Qe,ct)},Ft.prototype.decompose=function(){var B=this.sx,ae=this.shy,Ee=this.shx,Re=this.sy,He=this.tx,Qe=this.ty,ct=Math.sqrt(B*B+ae*ae),_t=(B/=ct)*Ee+(ae/=ct)*Re;Ee-=B*_t,Re-=ae*_t;var Ot=Math.sqrt(Ee*Ee+Re*Re);return _t/=Ot,B*(Re/=Ot)<ae*(Ee/=Ot)&&(B=-B,ae=-ae,_t=-_t,ct=-ct),{scale:new Ft(ct,0,0,Ot,0,0),translate:new Ft(1,0,0,1,He,Qe),rotate:new Ft(B,ae,-ae,B,0,0),skew:new Ft(1,0,_t,1,0,0)}},Ft.prototype.toString=function(B){return this.join(" ")},Ft.prototype.inversed=function(){var B=this.sx,ae=this.shy,Ee=this.shx,Re=this.sy,He=this.tx,Qe=this.ty,ct=1/(B*Re-ae*Ee),_t=Re*ct,Ot=-ae*ct,qt=-Ee*ct,Wt=B*ct;return new Ft(_t,Ot,qt,Wt,-_t*He-qt*Qe,-Ot*He-Wt*Qe)},Ft.prototype.applyToPoint=function(B){var ae=B.x*this.sx+B.y*this.shx+this.tx,Ee=B.x*this.shy+B.y*this.sy+this.ty;return new dp(ae,Ee)},Ft.prototype.applyToRectangle=function(B){var ae=this.applyToPoint(B),Ee=this.applyToPoint(new dp(B.x+B.w,B.y+B.h));return new f0(ae.x,ae.y,Ee.x-ae.x,Ee.y-ae.y)},Ft.prototype.clone=function(){var B=this.sx,ae=this.shy,Ee=this.shx,Re=this.sy,He=this.tx,Qe=this.ty;return new Ft(B,ae,Ee,Re,He,Qe)},f.Matrix=Ft;var ea=f.matrixMult=function(B,ae){return ae.multiply(B)},za=new Ft(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=za;var gi=function(B,ae){if(!fn[B]){var Ee=(ae instanceof wh?"Sh":"P")+(Object.keys(At).length+1).toString(10);ae.id=Ee,fn[B]=Ee,At[Ee]=ae,Ln.publish("addPattern",ae)}};f.ShadingPattern=wh,f.TilingPattern=um,f.addShadingPattern=function(B,ae){return x("addShadingPattern()"),gi(B,ae),this},f.beginTilingPattern=function(B){x("beginTilingPattern()"),C_(B.boundingBox[0],B.boundingBox[1],B.boundingBox[2]-B.boundingBox[0],B.boundingBox[3]-B.boundingBox[1],B.matrix)},f.endTilingPattern=function(B,ae){x("endTilingPattern()"),ae.stream=Se[j].join(`
`),gi(B,ae),Ln.publish("endTilingPattern",ae),Ha.pop().restore()};var Ur=f.__private__.newObject=function(){var B=Rr();return ji(B,!0),B},Rr=f.__private__.newObjectDeferred=function(){return re++,te[re]=function(){return de},re},ji=function(B,ae){return ae=typeof ae=="boolean"&&ae,te[B]=de,ae&&ne(B+" 0 obj"),B},Zf=f.__private__.newAdditionalObject=function(){var B={objId:Rr(),content:""};return ye.push(B),B},oc=Rr(),ta=Rr(),na=f.__private__.decodeColorString=function(B){var ae=B.split(" ");if(ae.length!==2||ae[1]!=="g"&&ae[1]!=="G")ae.length===5&&(ae[4]==="k"||ae[4]==="K")&&(ae=[(1-ae[0])*(1-ae[3]),(1-ae[1])*(1-ae[3]),(1-ae[2])*(1-ae[3]),"r"]);else{var Ee=parseFloat(ae[0]);ae=[Ee,Ee,Ee,"r"]}for(var Re="#",He=0;He<3;He++)Re+=("0"+Math.floor(255*parseFloat(ae[He])).toString(16)).slice(-2);return Re},ra=f.__private__.encodeColorString=function(B){var ae;typeof B=="string"&&(B={ch1:B});var Ee=B.ch1,Re=B.ch2,He=B.ch3,Qe=B.ch4,ct=B.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ee=="string"&&Ee.charAt(0)!=="#"){var _t=new xne(Ee);if(_t.ok)Ee=_t.toHex();else if(!/^\d*\.?\d*$/.test(Ee))throw new Error('Invalid color "'+Ee+'" passed to jsPDF.encodeColorString.')}if(typeof Ee=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ee)&&(Ee="#"+Ee[1]+Ee[1]+Ee[2]+Ee[2]+Ee[3]+Ee[3]),typeof Ee=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ee)){var Ot=parseInt(Ee.substr(1),16);Ee=Ot>>16&255,Re=Ot>>8&255,He=255&Ot}if(Re===void 0||Qe===void 0&&Ee===Re&&Re===He)if(typeof Ee=="string")ae=Ee+" "+ct[0];else switch(B.precision){case 2:ae=R(Ee/255)+" "+ct[0];break;case 3:default:ae=C(Ee/255)+" "+ct[0]}else if(Qe===void 0||Bn(Qe)==="object"){if(Qe&&!isNaN(Qe.a)&&Qe.a===0)return ae=["1.","1.","1.",ct[1]].join(" ");if(typeof Ee=="string")ae=[Ee,Re,He,ct[1]].join(" ");else switch(B.precision){case 2:ae=[R(Ee/255),R(Re/255),R(He/255),ct[1]].join(" ");break;default:case 3:ae=[C(Ee/255),C(Re/255),C(He/255),ct[1]].join(" ")}}else if(typeof Ee=="string")ae=[Ee,Re,He,Qe,ct[2]].join(" ");else switch(B.precision){case 2:ae=[R(Ee),R(Re),R(He),R(Qe),ct[2]].join(" ");break;case 3:default:ae=[C(Ee),C(Re),C(He),C(Qe),ct[2]].join(" ")}return ae},Va=f.__private__.getFilters=function(){return o},ho=f.__private__.putStream=function(B){var ae=(B=B||{}).data||"",Ee=B.filters||Va(),Re=B.alreadyAppliedFilters||[],He=B.addLength1||!1,Qe=ae.length,ct=B.objectId,_t=function(As){return As};if(u!==null&&ct===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(_t=Cs.encryptor(ct,0));var Ot={};Ee===!0&&(Ee=["FlateEncode"]);var qt=B.additionalKeyValues||[],Wt=(Ot=jt.API.processDataByFilters!==void 0?jt.API.processDataByFilters(ae,Ee):{data:ae,reverseChain:[]}).reverseChain+(Array.isArray(Re)?Re.join(" "):Re.toString());if(Ot.data.length!==0&&(qt.push({key:"Length",value:Ot.data.length}),He===!0&&qt.push({key:"Length1",value:Qe})),Wt.length!=0)if(Wt.split("/").length-1==1)qt.push({key:"Filter",value:Wt});else{qt.push({key:"Filter",value:"["+Wt+"]"});for(var pn=0;pn<qt.length;pn+=1)if(qt[pn].key==="DecodeParms"){for(var ar=[],fr=0;fr<Ot.reverseChain.split("/").length-1;fr+=1)ar.push("null");ar.push(qt[pn].value),qt[pn].value="["+ar.join(" ")+"]"}}ne("<<");for(var Lr=0;Lr<qt.length;Lr++)ne("/"+qt[Lr].key+" "+qt[Lr].value);ne(">>"),Ot.data.length!==0&&(ne("stream"),ne(_t(Ot.data)),ne("endstream"))},Wa=f.__private__.putPage=function(B){var ae=B.number,Ee=B.data,Re=B.objId,He=B.contentsObjId;ji(Re,!0),ne("<</Type /Page"),ne("/Parent "+B.rootDictionaryObjId+" 0 R"),ne("/Resources "+B.resourceDictionaryObjId+" 0 R"),ne("/MediaBox ["+parseFloat(k(B.mediaBox.bottomLeftX))+" "+parseFloat(k(B.mediaBox.bottomLeftY))+" "+k(B.mediaBox.topRightX)+" "+k(B.mediaBox.topRightY)+"]"),B.cropBox!==null&&ne("/CropBox ["+k(B.cropBox.bottomLeftX)+" "+k(B.cropBox.bottomLeftY)+" "+k(B.cropBox.topRightX)+" "+k(B.cropBox.topRightY)+"]"),B.bleedBox!==null&&ne("/BleedBox ["+k(B.bleedBox.bottomLeftX)+" "+k(B.bleedBox.bottomLeftY)+" "+k(B.bleedBox.topRightX)+" "+k(B.bleedBox.topRightY)+"]"),B.trimBox!==null&&ne("/TrimBox ["+k(B.trimBox.bottomLeftX)+" "+k(B.trimBox.bottomLeftY)+" "+k(B.trimBox.topRightX)+" "+k(B.trimBox.topRightY)+"]"),B.artBox!==null&&ne("/ArtBox ["+k(B.artBox.bottomLeftX)+" "+k(B.artBox.bottomLeftY)+" "+k(B.artBox.topRightX)+" "+k(B.artBox.topRightY)+"]"),typeof B.userUnit=="number"&&B.userUnit!==1&&ne("/UserUnit "+B.userUnit),Ln.publish("putPage",{objId:Re,pageContext:Vt[ae],pageNumber:ae,page:Ee}),ne("/Contents "+He+" 0 R"),ne(">>"),ne("endobj");var Qe=Ee.join(`
`);return _===v.ADVANCED&&(Qe+=`
Q`),ji(He,!0),ho({data:Qe,filters:Va(),objectId:He}),ne("endobj"),Re},zd=f.__private__.putPages=function(){var B,ae,Ee=[];for(B=1;B<=Hn;B++)Vt[B].objId=Rr(),Vt[B].contentsObjId=Rr();for(B=1;B<=Hn;B++)Ee.push(Wa({number:B,data:Se[B],objId:Vt[B].objId,contentsObjId:Vt[B].contentsObjId,mediaBox:Vt[B].mediaBox,cropBox:Vt[B].cropBox,bleedBox:Vt[B].bleedBox,trimBox:Vt[B].trimBox,artBox:Vt[B].artBox,userUnit:Vt[B].userUnit,rootDictionaryObjId:oc,resourceDictionaryObjId:ta}));ji(oc,!0),ne("<</Type /Pages");var Re="/Kids [";for(ae=0;ae<Hn;ae++)Re+=Ee[ae]+" 0 R ";ne(Re+"]"),ne("/Count "+Hn),ne(">>"),ne("endobj"),Ln.publish("postPutPages")},Qf=function(B){Ln.publish("putFont",{font:B,out:ne,newObject:Ur,putStream:ho}),B.isAlreadyPutted!==!0&&(B.objectNumber=Ur(),ne("<<"),ne("/Type /Font"),ne("/BaseFont /"+Yp(B.postScriptName)),ne("/Subtype /Type1"),typeof B.encoding=="string"&&ne("/Encoding /"+B.encoding),ne("/FirstChar 32"),ne("/LastChar 255"),ne(">>"),ne("endobj"))},ep=function(){for(var B in Ue)Ue.hasOwnProperty(B)&&(d===!1||d===!0&&h.hasOwnProperty(B))&&Qf(Ue[B])},tp=function(B){B.objectNumber=Ur();var ae=[];ae.push({key:"Type",value:"/XObject"}),ae.push({key:"Subtype",value:"/Form"}),ae.push({key:"BBox",value:"["+[k(B.x),k(B.y),k(B.x+B.width),k(B.y+B.height)].join(" ")+"]"}),ae.push({key:"Matrix",value:"["+B.matrix.toString()+"]"});var Ee=B.pages[1].join(`
`);ho({data:Ee,additionalKeyValues:ae,objectId:B.objectNumber}),ne("endobj")},np=function(){for(var B in us)us.hasOwnProperty(B)&&tp(us[B])},l_=function(B,ae){var Ee,Re=[],He=1/(ae-1);for(Ee=0;Ee<1;Ee+=He)Re.push(Ee);if(Re.push(1),B[0].offset!=0){var Qe={offset:0,color:B[0].color};B.unshift(Qe)}if(B[B.length-1].offset!=1){var ct={offset:1,color:B[B.length-1].color};B.push(ct)}for(var _t="",Ot=0,qt=0;qt<Re.length;qt++){for(Ee=Re[qt];Ee>B[Ot+1].offset;)Ot++;var Wt=B[Ot].offset,pn=(Ee-Wt)/(B[Ot+1].offset-Wt),ar=B[Ot].color,fr=B[Ot+1].color;_t+=W(Math.round((1-pn)*ar[0]+pn*fr[0]).toString(16))+W(Math.round((1-pn)*ar[1]+pn*fr[1]).toString(16))+W(Math.round((1-pn)*ar[2]+pn*fr[2]).toString(16))}return _t.trim()},oA=function(B,ae){ae||(ae=21);var Ee=Ur(),Re=l_(B.colors,ae),He=[];He.push({key:"FunctionType",value:"0"}),He.push({key:"Domain",value:"[0.0 1.0]"}),He.push({key:"Size",value:"["+ae+"]"}),He.push({key:"BitsPerSample",value:"8"}),He.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),He.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ho({data:Re,additionalKeyValues:He,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ee}),ne("endobj"),B.objectNumber=Ur(),ne("<< /ShadingType "+B.type),ne("/ColorSpace /DeviceRGB");var Qe="/Coords ["+k(parseFloat(B.coords[0]))+" "+k(parseFloat(B.coords[1]))+" ";B.type===2?Qe+=k(parseFloat(B.coords[2]))+" "+k(parseFloat(B.coords[3])):Qe+=k(parseFloat(B.coords[2]))+" "+k(parseFloat(B.coords[3]))+" "+k(parseFloat(B.coords[4]))+" "+k(parseFloat(B.coords[5])),ne(Qe+="]"),B.matrix&&ne("/Matrix ["+B.matrix.toString()+"]"),ne("/Function "+Ee+" 0 R"),ne("/Extend [true true]"),ne(">>"),ne("endobj")},aA=function(B,ae){var Ee=Rr(),Re=Ur();ae.push({resourcesOid:Ee,objectOid:Re}),B.objectNumber=Re;var He=[];He.push({key:"Type",value:"/Pattern"}),He.push({key:"PatternType",value:"1"}),He.push({key:"PaintType",value:"1"}),He.push({key:"TilingType",value:"1"}),He.push({key:"BBox",value:"["+B.boundingBox.map(k).join(" ")+"]"}),He.push({key:"XStep",value:k(B.xStep)}),He.push({key:"YStep",value:k(B.yStep)}),He.push({key:"Resources",value:Ee+" 0 R"}),B.matrix&&He.push({key:"Matrix",value:"["+B.matrix.toString()+"]"}),ho({data:B.stream,additionalKeyValues:He,objectId:B.objectNumber}),ne("endobj")},rp=function(B){var ae;for(ae in At)At.hasOwnProperty(ae)&&(At[ae]instanceof wh?oA(At[ae]):At[ae]instanceof um&&aA(At[ae],B))},c_=function(B){for(var ae in B.objectNumber=Ur(),ne("<<"),B)switch(ae){case"opacity":ne("/ca "+R(B[ae]));break;case"stroke-opacity":ne("/CA "+R(B[ae]))}ne(">>"),ne("endobj")},lA=function(){var B;for(B in Ht)Ht.hasOwnProperty(B)&&c_(Ht[B])},r0=function(){for(var B in ne("/XObject <<"),us)us.hasOwnProperty(B)&&us[B].objectNumber>=0&&ne("/"+B+" "+us[B].objectNumber+" 0 R");Ln.publish("putXobjectDict"),ne(">>")},cA=function(){Cs.oid=Ur(),ne("<<"),ne("/Filter /Standard"),ne("/V "+Cs.v),ne("/R "+Cs.r),ne("/U <"+Cs.toHexString(Cs.U)+">"),ne("/O <"+Cs.toHexString(Cs.O)+">"),ne("/P "+Cs.P),ne(">>"),ne("endobj")},u_=function(){for(var B in ne("/Font <<"),Ue)Ue.hasOwnProperty(B)&&(d===!1||d===!0&&h.hasOwnProperty(B))&&ne("/"+B+" "+Ue[B].objectNumber+" 0 R");ne(">>")},uA=function(){if(Object.keys(At).length>0){for(var B in ne("/Shading <<"),At)At.hasOwnProperty(B)&&At[B]instanceof wh&&At[B].objectNumber>=0&&ne("/"+B+" "+At[B].objectNumber+" 0 R");Ln.publish("putShadingPatternDict"),ne(">>")}},sp=function(B){if(Object.keys(At).length>0){for(var ae in ne("/Pattern <<"),At)At.hasOwnProperty(ae)&&At[ae]instanceof f.TilingPattern&&At[ae].objectNumber>=0&&At[ae].objectNumber<B&&ne("/"+ae+" "+At[ae].objectNumber+" 0 R");Ln.publish("putTilingPatternDict"),ne(">>")}},dA=function(){if(Object.keys(Ht).length>0){var B;for(B in ne("/ExtGState <<"),Ht)Ht.hasOwnProperty(B)&&Ht[B].objectNumber>=0&&ne("/"+B+" "+Ht[B].objectNumber+" 0 R");Ln.publish("putGStateDict"),ne(">>")}},xr=function(B){ji(B.resourcesOid,!0),ne("<<"),ne("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),u_(),uA(),sp(B.objectOid),dA(),r0(),ne(">>"),ne("endobj")},d_=function(){var B=[];ep(),lA(),np(),rp(B),Ln.publish("putResources"),B.forEach(xr),xr({resourcesOid:ta,objectOid:Number.MAX_SAFE_INTEGER}),Ln.publish("postPutResources")},h_=function(){Ln.publish("putAdditionalObjects");for(var B=0;B<ye.length;B++){var ae=ye[B];ji(ae.objId,!0),ne(ae.content),ne("endobj")}Ln.publish("postPutAdditionalObjects")},f_=function(B){We[B.fontName]=We[B.fontName]||{},We[B.fontName][B.fontStyle]=B.id},s0=function(B,ae,Ee,Re,He){var Qe={id:"F"+(Object.keys(Ue).length+1).toString(10),postScriptName:B,fontName:ae,fontStyle:Ee,encoding:Re,isStandardFont:He||!1,metadata:{}};return Ln.publish("addFont",{font:Qe,instance:this}),Ue[Qe.id]=Qe,f_(Qe),Qe.id},hA=function(B){for(var ae=0,Ee=fe.length;ae<Ee;ae++){var Re=s0.call(this,B[ae][0],B[ae][1],B[ae][2],fe[ae][3],!0);d===!1&&(h[Re]=!0);var He=B[ae][0].split("-");f_({id:Re,fontName:He[0],fontStyle:He[1]||""})}Ln.publish("addFonts",{fonts:Ue,dictionary:We})},sa=function(B){return B.foo=function(){try{return B.apply(this,arguments)}catch(Re){var ae=Re.stack||"";~ae.indexOf(" at ")&&(ae=ae.split(" at ")[1]);var Ee="Error in function "+ae.split(`
`)[0].split("<")[0]+": "+Re.message;if(!Ut.console)throw new Error(Ee);Ut.console.error(Ee,Re),Ut.alert&&alert(Ee)}},B.foo.bar=B,B.foo},ip=function(B,ae){var Ee,Re,He,Qe,ct,_t,Ot,qt,Wt;if(He=(ae=ae||{}).sourceEncoding||"Unicode",ct=ae.outputEncoding,(ae.autoencode||ct)&&Ue[ie].metadata&&Ue[ie].metadata[He]&&Ue[ie].metadata[He].encoding&&(Qe=Ue[ie].metadata[He].encoding,!ct&&Ue[ie].encoding&&(ct=Ue[ie].encoding),!ct&&Qe.codePages&&(ct=Qe.codePages[0]),typeof ct=="string"&&(ct=Qe[ct]),ct)){for(Ot=!1,_t=[],Ee=0,Re=B.length;Ee<Re;Ee++)(qt=ct[B.charCodeAt(Ee)])?_t.push(String.fromCharCode(qt)):_t.push(B[Ee]),_t[Ee].charCodeAt(0)>>8&&(Ot=!0);B=_t.join("")}for(Ee=B.length;Ot===void 0&&Ee!==0;)B.charCodeAt(Ee-1)>>8&&(Ot=!0),Ee--;if(!Ot)return B;for(_t=ae.noBOM?[]:[254,255],Ee=0,Re=B.length;Ee<Re;Ee++){if((Wt=(qt=B.charCodeAt(Ee))>>8)>>8)throw new Error("Character at position "+Ee+" of string '"+B+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");_t.push(Wt),_t.push(qt-(Wt<<8))}return String.fromCharCode.apply(void 0,_t)},bi=f.__private__.pdfEscape=f.pdfEscape=function(B,ae){return ip(B,ae).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},i0=f.__private__.beginPage=function(B){Se[++Hn]=[],Vt[Hn]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(B[0]),topRightY:Number(B[1])}},m_(Hn),ge(Se[j])},p_=function(B,ae){var Ee,Re,He;switch(n=ae||n,typeof B=="string"&&(Ee=b(B.toLowerCase()),Array.isArray(Ee)&&(Re=Ee[0],He=Ee[1])),Array.isArray(B)&&(Re=B[0]*z,He=B[1]*z),isNaN(Re)&&(Re=s[0],He=s[1]),(Re>14400||He>14400)&&(Wn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Re=Math.min(14400,Re),He=Math.min(14400,He)),s=[Re,He],n.substr(0,1)){case"l":He>Re&&(s=[He,Re]);break;case"p":Re>He&&(s=[He,Re])}i0(s),x_(c0),ne(ia),d0!==0&&ne(d0+" J"),h0!==0&&ne(h0+" j"),Ln.publish("addPage",{pageNumber:Hn})},fA=function(B){B>0&&B<=Hn&&(Se.splice(B,1),Vt.splice(B,1),Hn--,j>Hn&&(j=Hn),this.setPage(j))},m_=function(B){B>0&&B<=Hn&&(j=B)},pA=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return Se.length-1},g_=function(B,ae,Ee){var Re,He=void 0;return Ee=Ee||{},B=B!==void 0?B:Ue[ie].fontName,ae=ae!==void 0?ae:Ue[ie].fontStyle,Re=B.toLowerCase(),We[Re]!==void 0&&We[Re][ae]!==void 0?He=We[Re][ae]:We[B]!==void 0&&We[B][ae]!==void 0?He=We[B][ae]:Ee.disableWarning===!1&&Wn.warn("Unable to look up font label for font '"+B+"', '"+ae+"'. Refer to getFontList() for available fonts."),He||Ee.noFallback||(He=We.times[ae])==null&&(He=We.times.normal),He},mA=f.__private__.putInfo=function(){var B=Ur(),ae=function(Re){return Re};for(var Ee in u!==null&&(ae=Cs.encryptor(B,0)),ne("<<"),ne("/Producer ("+bi(ae("jsPDF "+jt.version))+")"),tt)tt.hasOwnProperty(Ee)&&tt[Ee]&&ne("/"+Ee.substr(0,1).toUpperCase()+Ee.substr(1)+" ("+bi(ae(tt[Ee]))+")");ne("/CreationDate ("+bi(ae($))+")"),ne(">>"),ne("endobj")},o0=f.__private__.putCatalog=function(B){var ae=(B=B||{}).rootDictionaryObjId||oc;switch(Ur(),ne("<<"),ne("/Type /Catalog"),ne("/Pages "+ae+" 0 R"),Ie||(Ie="fullwidth"),Ie){case"fullwidth":ne("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ne("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ne("/OpenAction [3 0 R /Fit]");break;case"original":ne("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ee=""+Ie;Ee.substr(Ee.length-1)==="%"&&(Ie=parseInt(Ie)/100),typeof Ie=="number"&&ne("/OpenAction [3 0 R /XYZ null null "+R(Ie)+"]")}switch(Ae||(Ae="continuous"),Ae){case"continuous":ne("/PageLayout /OneColumn");break;case"single":ne("/PageLayout /SinglePage");break;case"two":case"twoleft":ne("/PageLayout /TwoColumnLeft");break;case"tworight":ne("/PageLayout /TwoColumnRight")}je&&ne("/PageMode /"+je),Ln.publish("putCatalog"),ne(">>"),ne("endobj")},gA=f.__private__.putTrailer=function(){ne("trailer"),ne("<<"),ne("/Size "+(re+1)),ne("/Root "+re+" 0 R"),ne("/Info "+(re-1)+" 0 R"),u!==null&&ne("/Encrypt "+Cs.oid+" 0 R"),ne("/ID [ <"+ee+"> <"+ee+"> ]"),ne(">>")},bA=f.__private__.putHeader=function(){ne("%PDF-"+g),ne("%")},yA=f.__private__.putXRef=function(){var B="0000000000";ne("xref"),ne("0 "+(re+1)),ne("0000000000 65535 f ");for(var ae=1;ae<=re;ae++)typeof te[ae]=="function"?ne((B+te[ae]()).slice(-10)+" 00000 n "):te[ae]!==void 0?ne((B+te[ae]).slice(-10)+" 00000 n "):ne("0000000000 00000 n ")},ac=f.__private__.buildDocument=function(){K(),ge(Y),Ln.publish("buildDocument"),bA(),zd(),h_(),d_(),u!==null&&cA(),mA(),o0();var B=de;return yA(),gA(),ne("startxref"),ne(""+B),ne("%%EOF"),ge(Se[j]),Y.join(`
`)},op=f.__private__.getBlob=function(B){return new Blob([se(B)],{type:"application/pdf"})},ap=f.output=f.__private__.output=sa(function(B,ae){switch(typeof(ae=ae||{})=="string"?ae={filename:ae}:ae.filename=ae.filename||"generated.pdf",B){case void 0:return ac();case"save":f.save(ae.filename);break;case"arraybuffer":return se(ac());case"blob":return op(ac());case"bloburi":case"bloburl":if(Ut.URL!==void 0&&typeof Ut.URL.createObjectURL=="function")return Ut.URL&&Ut.URL.createObjectURL(op(ac()))||void 0;Wn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ee="",Re=ac();try{Ee=WP(Re)}catch{Ee=WP(unescape(encodeURIComponent(Re)))}return"data:application/pdf;filename="+ae.filename+";base64,"+Ee;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Ut)==="[object Window]"){var He="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Qe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ae.pdfObjectUrl&&(He=ae.pdfObjectUrl,Qe="");var ct='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+He+'"'+Qe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ae)+");<\/script></body></html>",_t=Ut.open();return _t!==null&&_t.document.write(ct),_t}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Ut)==="[object Window]"){var Ot='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ae.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ae.filename+'" width="500px" height="400px" /></body></html>',qt=Ut.open();if(qt!==null){qt.document.write(Ot);var Wt=this;qt.document.documentElement.querySelector("#pdfViewer").onload=function(){qt.document.title=ae.filename,qt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Wt.output("bloburl"))}}return qt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Ut)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var pn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ae)+'"></iframe></body></html>',ar=Ut.open();if(ar!==null&&(ar.document.write(pn),ar.document.title=ae.filename),ar||typeof safari>"u")return ar;break;case"datauri":case"dataurl":return Ut.document.location.href=this.output("datauristring",ae);default:return null}}),b_=function(B){return Array.isArray(Hd)===!0&&Hd.indexOf(B)>-1};switch(r){case"pt":z=1;break;case"mm":z=72/25.4;break;case"cm":z=72/2.54;break;case"in":z=72;break;case"px":z=b_("px_scaling")==1?.75:96/72;break;case"pc":case"em":z=12;break;case"ex":z=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);z=r}var Cs=null;G(),Z();var vA=function(B){return u!==null?Cs.encryptor(B,0):function(ae){return ae}},y_=f.__private__.getPageInfo=f.getPageInfo=function(B){if(isNaN(B)||B%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Vt[B].objId,pageNumber:B,pageContext:Vt[B]}},zt=f.__private__.getPageInfoByObjId=function(B){if(isNaN(B)||B%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ae in Vt)if(Vt[ae].objId===B)break;return y_(ae)},_A=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:Vt[j].objId,pageNumber:j,pageContext:Vt[j]}};f.addPage=function(){return p_.apply(this,arguments),this},f.setPage=function(){return m_.apply(this,arguments),ge.call(this,Se[j]),this},f.insertPage=function(B){return this.addPage(),this.movePage(j,B),this},f.movePage=function(B,ae){var Ee,Re;if(B>ae){Ee=Se[B],Re=Vt[B];for(var He=B;He>ae;He--)Se[He]=Se[He-1],Vt[He]=Vt[He-1];Se[ae]=Ee,Vt[ae]=Re,this.setPage(ae)}else if(B<ae){Ee=Se[B],Re=Vt[B];for(var Qe=B;Qe<ae;Qe++)Se[Qe]=Se[Qe+1],Vt[Qe]=Vt[Qe+1];Se[ae]=Ee,Vt[ae]=Re,this.setPage(ae)}return this},f.deletePage=function(){return fA.apply(this,arguments),this},f.__private__.text=f.text=function(B,ae,Ee,Re,He){var Qe,ct,_t,Ot,qt,Wt,pn,ar,fr,Lr=(Re=Re||{}).scope||this;if(typeof B=="number"&&typeof ae=="number"&&(typeof Ee=="string"||Array.isArray(Ee))){var As=Ee;Ee=ae,ae=B,B=As}if(arguments[3]instanceof Ft?(x("The transform parameter of text() with a Matrix value"),fr=He):(_t=arguments[4],Ot=arguments[5],Bn(pn=arguments[3])==="object"&&pn!==null||(typeof _t=="string"&&(Ot=_t,_t=null),typeof pn=="string"&&(Ot=pn,pn=null),typeof pn=="number"&&(_t=pn,pn=null),Re={flags:pn,angle:_t,align:Ot})),isNaN(ae)||isNaN(Ee)||B==null)throw new Error("Invalid arguments passed to jsPDF.text");if(B.length===0)return Lr;var Jr="",oa=!1,Fi=typeof Re.lineHeightFactor=="number"?Re.lineHeightFactor:Wd,Ka=Lr.internal.scaleFactor;function A_(Yn){return Yn=Yn.split("	").join(Array(Re.TabLen||9).join(" ")),bi(Yn,pn)}function b0(Yn){for(var Xn,Er=Yn.concat(),$r=[],hc=Er.length;hc--;)typeof(Xn=Er.shift())=="string"?$r.push(Xn):Array.isArray(Yn)&&(Xn.length===1||Xn[1]===void 0&&Xn[2]===void 0)?$r.push(Xn[0]):$r.push([Xn[0],Xn[1],Xn[2]]);return $r}function y0(Yn,Xn){var Er;if(typeof Yn=="string")Er=Xn(Yn)[0];else if(Array.isArray(Yn)){for(var $r,hc,C0=Yn.concat(),wp=[],R_=C0.length;R_--;)typeof($r=C0.shift())=="string"?wp.push(Xn($r)[0]):Array.isArray($r)&&typeof $r[0]=="string"&&(hc=Xn($r[0],$r[1],$r[2]),wp.push([hc[0],hc[1],hc[2]]));Er=wp}return Er}var fp=!1,v0=!0;if(typeof B=="string")fp=!0;else if(Array.isArray(B)){var _0=B.concat();ct=[];for(var pp,ds=_0.length;ds--;)(typeof(pp=_0.shift())!="string"||Array.isArray(pp)&&typeof pp[0]!="string")&&(v0=!1);fp=v0}if(fp===!1)throw new Error('Type of text must be string or Array. "'+B+'" is not recognized.');typeof B=="string"&&(B=B.match(/[\r?\n]/)?B.split(/\r\n|\r|\n/g):[B]);var mp=Ce/Lr.internal.scaleFactor,gp=mp*(Fi-1);switch(Re.baseline){case"bottom":Ee-=gp;break;case"top":Ee+=mp-gp;break;case"hanging":Ee+=mp-2*gp;break;case"middle":Ee+=mp/2-gp}if((Wt=Re.maxWidth||0)>0&&(typeof B=="string"?B=Lr.splitTextToSize(B,Wt):Object.prototype.toString.call(B)==="[object Array]"&&(B=B.reduce(function(Yn,Xn){return Yn.concat(Lr.splitTextToSize(Xn,Wt))},[]))),Qe={text:B,x:ae,y:Ee,options:Re,mutex:{pdfEscape:bi,activeFontKey:ie,fonts:Ue,activeFontSize:Ce}},Ln.publish("preProcessText",Qe),B=Qe.text,_t=(Re=Qe.options).angle,!(fr instanceof Ft)&&_t&&typeof _t=="number"){_t*=Math.PI/180,Re.rotationDirection===0&&(_t=-_t),_===v.ADVANCED&&(_t=-_t);var bp=Math.cos(_t),x0=Math.sin(_t);fr=new Ft(bp,x0,-x0,bp,0,0)}else _t&&_t instanceof Ft&&(fr=_t);_!==v.ADVANCED||fr||(fr=za),(qt=Re.charSpace||up)!==void 0&&(Jr+=k(N(qt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ar=Re.horizontalScale)!==void 0&&(Jr+=k(100*ar)+` Tz
`),Re.lang;var yi=-1,PA=Re.renderingMode!==void 0?Re.renderingMode:Re.stroke,w0=Lr.internal.getCurrentPageInfo().pageContext;switch(PA){case 0:case!1:case"fill":yi=0;break;case 1:case!0:case"stroke":yi=1;break;case 2:case"fillThenStroke":yi=2;break;case 3:case"invisible":yi=3;break;case 4:case"fillAndAddForClipping":yi=4;break;case 5:case"strokeAndAddPathForClipping":yi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":yi=6;break;case 7:case"addToPathForClipping":yi=7}var T_=w0.usedRenderingMode!==void 0?w0.usedRenderingMode:-1;yi!==-1?Jr+=yi+` Tr
`:T_!==-1&&(Jr+=`0 Tr
`),yi!==-1&&(w0.usedRenderingMode=yi),Ot=Re.align||"left";var fo,yp=Ce*Fi,N_=Lr.internal.pageSize.getWidth(),P_=Ue[ie];qt=Re.charSpace||up,Wt=Re.maxWidth||0,pn=Object.assign({autoencode:!0,noBOM:!0},Re.flags);var fu=[],Kd=function(Yn){return Lr.getStringUnitWidth(Yn,{font:P_,charSpace:qt,fontSize:Ce,doKerning:!1})*Ce/Ka};if(Object.prototype.toString.call(B)==="[object Array]"){var vi;ct=b0(B),Ot!=="left"&&(fo=ct.map(Kd));var Ys,pu=0;if(Ot==="right"){ae-=fo[0],B=[],ds=ct.length;for(var cc=0;cc<ds;cc++)cc===0?(Ys=qa(ae),vi=lc(Ee)):(Ys=N(pu-fo[cc]),vi=-yp),B.push([ct[cc],Ys,vi]),pu=fo[cc]}else if(Ot==="center"){ae-=fo[0]/2,B=[],ds=ct.length;for(var uc=0;uc<ds;uc++)uc===0?(Ys=qa(ae),vi=lc(Ee)):(Ys=N((pu-fo[uc])/2),vi=-yp),B.push([ct[uc],Ys,vi]),pu=fo[uc]}else if(Ot==="left"){B=[],ds=ct.length;for(var vp=0;vp<ds;vp++)B.push(ct[vp])}else if(Ot==="justify"&&P_.encoding==="Identity-H"){B=[],ds=ct.length,Wt=Wt!==0?Wt:N_;for(var dc=0,wr=0;wr<ds;wr++)if(vi=wr===0?lc(Ee):-yp,Ys=wr===0?qa(ae):dc,wr<ds-1){var E0=N((Wt-fo[wr])/(ct[wr].split(" ").length-1)),Xs=ct[wr].split(" ");B.push([Xs[0]+" ",Ys,vi]),dc=0;for(var po=1;po<Xs.length;po++){var _p=(Kd(Xs[po-1]+" "+Xs[po])-Kd(Xs[po]))*Ka+E0;po==Xs.length-1?B.push([Xs[po],_p,0]):B.push([Xs[po]+" ",_p,0]),dc-=_p}}else B.push([ct[wr],Ys,vi]);B.push(["",dc,0])}else{if(Ot!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(B=[],ds=ct.length,Wt=Wt!==0?Wt:N_,wr=0;wr<ds;wr++)vi=wr===0?lc(Ee):-yp,Ys=wr===0?qa(ae):0,wr<ds-1?fu.push(k(N((Wt-fo[wr])/(ct[wr].split(" ").length-1)))):fu.push(0),B.push([ct[wr],Ys,vi])}}var I_=typeof Re.R2L=="boolean"?Re.R2L:$e;I_===!0&&(B=y0(B,function(Yn,Xn,Er){return[Yn.split("").reverse().join(""),Xn,Er]})),Qe={text:B,x:ae,y:Ee,options:Re,mutex:{pdfEscape:bi,activeFontKey:ie,fonts:Ue,activeFontSize:Ce}},Ln.publish("postProcessText",Qe),B=Qe.text,oa=Qe.mutex.isHex||!1;var S0=Ue[ie].encoding;S0!=="WinAnsiEncoding"&&S0!=="StandardEncoding"||(B=y0(B,function(Yn,Xn,Er){return[A_(Yn),Xn,Er]})),ct=b0(B),B=[];for(var Yd,Xd,mu,Jd=0,xp=1,Zd=Array.isArray(ct[0])?xp:Jd,gu="",k0=function(Yn,Xn,Er){var $r="";return Er instanceof Ft?(Er=typeof Re.angle=="number"?ea(Er,new Ft(1,0,0,1,Yn,Xn)):ea(new Ft(1,0,0,1,Yn,Xn),Er),_===v.ADVANCED&&(Er=ea(new Ft(1,0,0,-1,0,0),Er)),$r=Er.join(" ")+` Tm
`):$r=k(Yn)+" "+k(Xn)+` Td
`,$r},mo=0;mo<ct.length;mo++){switch(gu="",Zd){case xp:mu=(oa?"<":"(")+ct[mo][0]+(oa?">":")"),Yd=parseFloat(ct[mo][1]),Xd=parseFloat(ct[mo][2]);break;case Jd:mu=(oa?"<":"(")+ct[mo]+(oa?">":")"),Yd=qa(ae),Xd=lc(Ee)}fu!==void 0&&fu[mo]!==void 0&&(gu=fu[mo]+` Tw
`),mo===0?B.push(gu+k0(Yd,Xd,fr)+mu):Zd===Jd?B.push(gu+mu):Zd===xp&&B.push(gu+k0(Yd,Xd,fr)+mu)}B=Zd===Jd?B.join(` Tj
T* `):B.join(` Tj
`),B+=` Tj
`;var go=`BT
/`;return go+=ie+" "+Ce+` Tf
`,go+=k(Ce*Fi)+` TL
`,go+=Gd+`
`,go+=Jr,go+=B,ne(go+="ET"),h[ie]=!0,Lr};var xA=f.__private__.clip=f.clip=function(B){return ne(B==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return xA("evenodd")},f.__private__.discardPath=f.discardPath=function(){return ne("n"),this};var Ga=f.__private__.isValidStyle=function(B){var ae=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(B)!==-1&&(ae=!0),ae};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(B){return Ga(B)&&(c=B),this};var v_=f.__private__.getStyle=f.getStyle=function(B){var ae=c;switch(B){case"D":case"S":ae="S";break;case"F":ae="f";break;case"FD":case"DF":ae="B";break;case"f":case"f*":case"B":case"B*":ae=B}return ae},__=f.close=function(){return ne("h"),this};f.stroke=function(){return ne("S"),this},f.fill=function(B){return lp("f",B),this},f.fillEvenOdd=function(B){return lp("f*",B),this},f.fillStroke=function(B){return lp("B",B),this},f.fillStrokeEvenOdd=function(B){return lp("B*",B),this};var lp=function(B,ae){Bn(ae)==="object"?EA(ae,B):ne(B)},a0=function(B){B===null||_===v.ADVANCED&&B===void 0||(B=v_(B),ne(B))};function wA(B,ae,Ee,Re,He){var Qe=new um(ae||this.boundingBox,Ee||this.xStep,Re||this.yStep,this.gState,He||this.matrix);Qe.stream=this.stream;var ct=B+"$$"+this.cloneIndex+++"$$";return gi(ct,Qe),Qe}var EA=function(B,ae){var Ee=fn[B.key],Re=At[Ee];if(Re instanceof wh)ne("q"),ne(SA(ae)),Re.gState&&f.setGState(Re.gState),ne(B.matrix.toString()+" cm"),ne("/"+Ee+" sh"),ne("Q");else if(Re instanceof um){var He=new Ft(1,0,0,-1,0,hu());B.matrix&&(He=He.multiply(B.matrix||za),Ee=wA.call(Re,B.key,B.boundingBox,B.xStep,B.yStep,He).id),ne("q"),ne("/Pattern cs"),ne("/"+Ee+" scn"),Re.gState&&f.setGState(Re.gState),ne(ae),ne("Q")}},SA=function(B){switch(B){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},l0=f.moveTo=function(B,ae){return ne(k(N(B))+" "+k(P(ae))+" m"),this},Vd=f.lineTo=function(B,ae){return ne(k(N(B))+" "+k(P(ae))+" l"),this},uu=f.curveTo=function(B,ae,Ee,Re,He,Qe){return ne([k(N(B)),k(P(ae)),k(N(Ee)),k(P(Re)),k(N(He)),k(P(Qe)),"c"].join(" ")),this};f.__private__.line=f.line=function(B,ae,Ee,Re,He){if(isNaN(B)||isNaN(ae)||isNaN(Ee)||isNaN(Re)||!Ga(He))throw new Error("Invalid arguments passed to jsPDF.line");return _===v.COMPAT?this.lines([[Ee-B,Re-ae]],B,ae,[1,1],He||"S"):this.lines([[Ee-B,Re-ae]],B,ae,[1,1]).stroke()},f.__private__.lines=f.lines=function(B,ae,Ee,Re,He,Qe){var ct,_t,Ot,qt,Wt,pn,ar,fr,Lr,As,Jr,oa;if(typeof B=="number"&&(oa=Ee,Ee=ae,ae=B,B=oa),Re=Re||[1,1],Qe=Qe||!1,isNaN(ae)||isNaN(Ee)||!Array.isArray(B)||!Array.isArray(Re)||!Ga(He)||typeof Qe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(l0(ae,Ee),ct=Re[0],_t=Re[1],qt=B.length,As=ae,Jr=Ee,Ot=0;Ot<qt;Ot++)(Wt=B[Ot]).length===2?(As=Wt[0]*ct+As,Jr=Wt[1]*_t+Jr,Vd(As,Jr)):(pn=Wt[0]*ct+As,ar=Wt[1]*_t+Jr,fr=Wt[2]*ct+As,Lr=Wt[3]*_t+Jr,As=Wt[4]*ct+As,Jr=Wt[5]*_t+Jr,uu(pn,ar,fr,Lr,As,Jr));return Qe&&__(),a0(He),this},f.path=function(B){for(var ae=0;ae<B.length;ae++){var Ee=B[ae],Re=Ee.c;switch(Ee.op){case"m":l0(Re[0],Re[1]);break;case"l":Vd(Re[0],Re[1]);break;case"c":uu.apply(this,Re);break;case"h":__()}}return this},f.__private__.rect=f.rect=function(B,ae,Ee,Re,He){if(isNaN(B)||isNaN(ae)||isNaN(Ee)||isNaN(Re)||!Ga(He))throw new Error("Invalid arguments passed to jsPDF.rect");return _===v.COMPAT&&(Re=-Re),ne([k(N(B)),k(P(ae)),k(N(Ee)),k(N(Re)),"re"].join(" ")),a0(He),this},f.__private__.triangle=f.triangle=function(B,ae,Ee,Re,He,Qe,ct){if(isNaN(B)||isNaN(ae)||isNaN(Ee)||isNaN(Re)||isNaN(He)||isNaN(Qe)||!Ga(ct))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ee-B,Re-ae],[He-Ee,Qe-Re],[B-He,ae-Qe]],B,ae,[1,1],ct,!0),this},f.__private__.roundedRect=f.roundedRect=function(B,ae,Ee,Re,He,Qe,ct){if(isNaN(B)||isNaN(ae)||isNaN(Ee)||isNaN(Re)||isNaN(He)||isNaN(Qe)||!Ga(ct))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var _t=4/3*(Math.SQRT2-1);return He=Math.min(He,.5*Ee),Qe=Math.min(Qe,.5*Re),this.lines([[Ee-2*He,0],[He*_t,0,He,Qe-Qe*_t,He,Qe],[0,Re-2*Qe],[0,Qe*_t,-He*_t,Qe,-He,Qe],[2*He-Ee,0],[-He*_t,0,-He,-Qe*_t,-He,-Qe],[0,2*Qe-Re],[0,-Qe*_t,He*_t,-Qe,He,-Qe]],B+He,ae,[1,1],ct,!0),this},f.__private__.ellipse=f.ellipse=function(B,ae,Ee,Re,He){if(isNaN(B)||isNaN(ae)||isNaN(Ee)||isNaN(Re)||!Ga(He))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Qe=4/3*(Math.SQRT2-1)*Ee,ct=4/3*(Math.SQRT2-1)*Re;return l0(B+Ee,ae),uu(B+Ee,ae-ct,B+Qe,ae-Re,B,ae-Re),uu(B-Qe,ae-Re,B-Ee,ae-ct,B-Ee,ae),uu(B-Ee,ae+ct,B-Qe,ae+Re,B,ae+Re),uu(B+Qe,ae+Re,B+Ee,ae+ct,B+Ee,ae),a0(He),this},f.__private__.circle=f.circle=function(B,ae,Ee,Re){if(isNaN(B)||isNaN(ae)||isNaN(Ee)||!Ga(Re))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(B,ae,Ee,Ee,Re)},f.setFont=function(B,ae,Ee){return Ee&&(ae=S(ae,Ee)),ie=g_(B,ae,{disableWarning:!1}),this};var kA=f.__private__.getFont=f.getFont=function(){return Ue[g_.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var B,ae,Ee={};for(B in We)if(We.hasOwnProperty(B))for(ae in Ee[B]=[],We[B])We[B].hasOwnProperty(ae)&&Ee[B].push(ae);return Ee},f.addFont=function(B,ae,Ee,Re,He){var Qe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Qe.indexOf(arguments[3])!==-1?He=arguments[3]:arguments[3]&&Qe.indexOf(arguments[3])==-1&&(Ee=S(Ee,Re)),He=He||"Identity-H",s0.call(this,B,ae,Ee,He)};var Wd,c0=t.lineWidth||.200025,cp=f.__private__.getLineWidth=f.getLineWidth=function(){return c0},x_=f.__private__.setLineWidth=f.setLineWidth=function(B){return c0=B,ne(k(N(B))+" w"),this};f.__private__.setLineDash=jt.API.setLineDash=jt.API.setLineDashPattern=function(B,ae){if(B=B||[],ae=ae||0,isNaN(ae)||!Array.isArray(B))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return B=B.map(function(Ee){return k(N(Ee))}).join(" "),ae=k(N(ae)),ne("["+B+"] "+ae+" d"),this};var w_=f.__private__.getLineHeight=f.getLineHeight=function(){return Ce*Wd};f.__private__.getLineHeight=f.getLineHeight=function(){return Ce*Wd};var E_=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(B){return typeof(B=B||1.15)=="number"&&(Wd=B),this},S_=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return Wd};E_(t.lineHeight);var qa=f.__private__.getHorizontalCoordinate=function(B){return N(B)},lc=f.__private__.getVerticalCoordinate=function(B){return _===v.ADVANCED?B:Vt[j].mediaBox.topRightY-Vt[j].mediaBox.bottomLeftY-N(B)},CA=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(B){return k(qa(B))},du=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(B){return k(lc(B))},ia=t.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return na(ia)},f.__private__.setStrokeColor=f.setDrawColor=function(B,ae,Ee,Re){return ia=ra({ch1:B,ch2:ae,ch3:Ee,ch4:Re,pdfColorType:"draw",precision:2}),ne(ia),this};var u0=t.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return na(u0)},f.__private__.setFillColor=f.setFillColor=function(B,ae,Ee,Re){return u0=ra({ch1:B,ch2:ae,ch3:Ee,ch4:Re,pdfColorType:"fill",precision:2}),ne(u0),this};var Gd=t.textColor||"0 g",AA=f.__private__.getTextColor=f.getTextColor=function(){return na(Gd)};f.__private__.setTextColor=f.setTextColor=function(B,ae,Ee,Re){return Gd=ra({ch1:B,ch2:ae,ch3:Ee,ch4:Re,pdfColorType:"text",precision:3}),this};var up=t.charSpace,TA=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(up||0)};f.__private__.setCharSpace=f.setCharSpace=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return up=B,this};var d0=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(B){var ae=f.CapJoinStyles[B];if(ae===void 0)throw new Error("Line cap style of '"+B+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return d0=ae,ne(ae+" J"),this};var h0=0;f.__private__.setLineJoin=f.setLineJoin=function(B){var ae=f.CapJoinStyles[B];if(ae===void 0)throw new Error("Line join style of '"+B+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return h0=ae,ne(ae+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(B){if(B=B||0,isNaN(B))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ne(k(N(B))+" M"),this},f.GState=XE,f.setGState=function(B){(B=typeof B=="string"?Ht[Kt[B]]:k_(null,B)).equals(Ks)||(ne("/"+B.id+" gs"),Ks=B)};var k_=function(B,ae){if(!B||!Kt[B]){var Ee=!1;for(var Re in Ht)if(Ht.hasOwnProperty(Re)&&Ht[Re].equals(ae)){Ee=!0;break}if(Ee)ae=Ht[Re];else{var He="GS"+(Object.keys(Ht).length+1).toString(10);Ht[He]=ae,ae.id=He}return B&&(Kt[B]=ae.id),Ln.publish("addGState",ae),ae}};f.addGState=function(B,ae){return k_(B,ae),this},f.saveGraphicsState=function(){return ne("q"),Rt.push({key:ie,size:Ce,color:Gd}),this},f.restoreGraphicsState=function(){ne("Q");var B=Rt.pop();return ie=B.key,Ce=B.size,Gd=B.color,Ks=null,this},f.setCurrentTransformationMatrix=function(B){return ne(B.toString()+" cm"),this},f.comment=function(B){return ne("#"+B),this};var dp=function(B,ae){var Ee=B||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ee},set:function(Qe){isNaN(Qe)||(Ee=parseFloat(Qe))}});var Re=ae||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Re},set:function(Qe){isNaN(Qe)||(Re=parseFloat(Qe))}});var He="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return He},set:function(Qe){He=Qe.toString()}}),this},f0=function(B,ae,Ee,Re){dp.call(this,B,ae),this.type="rect";var He=Ee||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return He},set:function(ct){isNaN(ct)||(He=parseFloat(ct))}});var Qe=Re||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Qe},set:function(ct){isNaN(ct)||(Qe=parseFloat(ct))}}),this},p0=function(){this.page=Hn,this.currentPage=j,this.pages=Se.slice(0),this.pagesContext=Vt.slice(0),this.x=X,this.y=pe,this.matrix=Le,this.width=qd(j),this.height=hu(j),this.outputDestination=ke,this.id="",this.objectNumber=-1};p0.prototype.restore=function(){Hn=this.page,j=this.currentPage,Vt=this.pagesContext,Se=this.pages,X=this.x,pe=this.y,Le=this.matrix,m0(j,this.width),g0(j,this.height),ke=this.outputDestination};var C_=function(B,ae,Ee,Re,He){Ha.push(new p0),Hn=j=0,Se=[],X=B,pe=ae,Le=He,i0([Ee,Re])},NA=function(B){if($a[B])Ha.pop().restore();else{var ae=new p0,Ee="Xo"+(Object.keys(us).length+1).toString(10);ae.id=Ee,$a[B]=Ee,us[Ee]=ae,Ln.publish("addFormObject",ae),Ha.pop().restore()}};for(var hp in f.beginFormObject=function(B,ae,Ee,Re,He){return C_(B,ae,Ee,Re,He),this},f.endFormObject=function(B){return NA(B),this},f.doFormObject=function(B,ae){var Ee=us[$a[B]];return ne("q"),ne(ae.toString()+" cm"),ne("/"+Ee.id+" Do"),ne("Q"),this},f.getFormObject=function(B){var ae=us[$a[B]];return{x:ae.x,y:ae.y,width:ae.width,height:ae.height,matrix:ae.matrix}},f.save=function(B,ae){return B=B||"generated.pdf",(ae=ae||{}).returnPromise=ae.returnPromise||!1,ae.returnPromise===!1?(mh(op(ac()),B),typeof mh.unload=="function"&&Ut.setTimeout&&setTimeout(mh.unload,911),this):new Promise(function(Ee,Re){try{var He=mh(op(ac()),B);typeof mh.unload=="function"&&Ut.setTimeout&&setTimeout(mh.unload,911),Ee(He)}catch(Qe){Re(Qe.message)}})},jt.API)jt.API.hasOwnProperty(hp)&&(hp==="events"&&jt.API.events.length?function(B,ae){var Ee,Re,He;for(He=ae.length-1;He!==-1;He--)Ee=ae[He][0],Re=ae[He][1],B.subscribe.apply(B,[Ee].concat(typeof Re=="function"?[Re]:Re))}(Ln,jt.API.events):f[hp]=jt.API[hp]);var qd=f.getPageWidth=function(B){return(Vt[B=B||j].mediaBox.topRightX-Vt[B].mediaBox.bottomLeftX)/z},m0=f.setPageWidth=function(B,ae){Vt[B].mediaBox.topRightX=ae*z+Vt[B].mediaBox.bottomLeftX},hu=f.getPageHeight=function(B){return(Vt[B=B||j].mediaBox.topRightY-Vt[B].mediaBox.bottomLeftY)/z},g0=f.setPageHeight=function(B,ae){Vt[B].mediaBox.topRightY=ae*z+Vt[B].mediaBox.bottomLeftY};return f.internal={pdfEscape:bi,getStyle:v_,getFont:kA,getFontSize:xe,getCharSpace:TA,getTextColor:AA,getLineHeight:w_,getLineHeightFactor:S_,getLineWidth:cp,write:le,getHorizontalCoordinate:qa,getVerticalCoordinate:lc,getCoordinateString:CA,getVerticalCoordinateString:du,collections:{},newObject:Ur,newAdditionalObject:Zf,newObjectDeferred:Rr,newObjectDeferredBegin:ji,getFilters:Va,putStream:ho,events:Ln,scaleFactor:z,pageSize:{getWidth:function(){return qd(j)},setWidth:function(B){m0(j,B)},getHeight:function(){return hu(j)},setHeight:function(B){g0(j,B)}},encryptionOptions:u,encryption:Cs,getEncryptor:vA,output:ap,getNumberOfPages:pA,pages:Se,out:ne,f2:R,f3:C,getPageInfo:y_,getPageInfoByObjId:zt,getCurrentPageInfo:_A,getPDFVersion:y,Point:dp,Rectangle:f0,Matrix:Ft,hasHotfix:b_},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return qd(j)},set:function(B){m0(j,B)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return hu(j)},set:function(B){g0(j,B)},enumerable:!0,configurable:!0}),hA.call(f,fe),ie="F1",p_(s,n),Ln.publish("initialized"),f}Kp.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Kp.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Kp.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Kp.prototype.processOwnerPassword=function(t,e){return qP(GP(e).substr(0,5),t)},Kp.prototype.encryptor=function(t,e){var n=GP(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return qP(n,r)}},XE.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Bn(t)!==Bn(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},jt.API={events:[]},jt.version="2.5.2";var gr=jt.API,t6=1,Wf=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Mp=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Gt=function(t){return t.toFixed(2)},Au=function(t){return t.toFixed(5)};gr.__acroform__={};var Mi=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},U7=function(t){return t*t6},cl=function(t){var e=new kne,n=Tt.internal.getHeight(t)||0,r=Tt.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Gt(r)),Number(Gt(n))],e},Xje=gr.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},Jje=gr.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},Zje=gr.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Ar=gr.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Zje(t,e-1)},Tr=gr.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Xje(t,e-1)},Nr=gr.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Jje(t,e-1)},Qje=gr.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,s=t[0],i=t[1],o=t[2],a=t[3],l={};return l.lowerLeft_X=n(s)||0,l.lowerLeft_Y=r(i+a)||0,l.upperRight_X=n(s+o)||0,l.upperRight_Y=r(i)||0,[Number(Gt(l.lowerLeft_X)),Number(Gt(l.lowerLeft_Y)),Number(Gt(l.upperRight_X)),Number(Gt(l.upperRight_Y))]},eFe=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=KP(t,n),s=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+s+" "+Gt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var i=cl(t);return i.scope=t.scope,i.stream=e.join(`
`),i}},KP=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=t.multiline?s.map(function(C){return C.split(`
`)}):s.map(function(C){return[C]});var i=n,o=Tt.internal.getHeight(t)||0;o=o<0?-o:o;var a=Tt.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(C,N,O){if(C+1<s.length){var P=N+" "+s[C+1][0];return Ox(P,t,O).width<=a-4}return!1};i++;e:for(;i>0;){e="",i--;var c,u,d=Ox("3",t,i).height,h=t.multiline?o-i:(o-d)/2,f=h+=2,g=0,y=0,m=0;if(i<=0){e=`(...) Tj
`,e+="% Width of Text: "+Ox(e,t,i=12).width+", FieldWidth:"+a+`
`;break}for(var b="",v=0,_=0;_<s.length;_++)if(s.hasOwnProperty(_)){var E=!1;if(s[_].length!==1&&m!==s[_].length-1){if((d+2)*(v+2)+2>o)continue e;b+=s[_][m],E=!0,y=_,_--}else{b=(b+=s[_][m]+" ").substr(b.length-1)==" "?b.substr(0,b.length-1):b;var w=parseInt(_),S=l(w,b,i),k=_>=s.length-1;if(S&&!k){b+=" ",m=0;continue}if(S||k){if(k)y=w;else if(t.multiline&&(d+2)*(v+2)+2>o)continue e}else{if(!t.multiline||(d+2)*(v+2)+2>o)continue e;y=w}}for(var x="",I=g;I<=y;I++){var R=s[I];if(t.multiline){if(I===y){x+=R[m]+" ",m=(m+1)%R.length;continue}if(I===g){x+=R[R.length-1]+" ";continue}}x+=R[0]+" "}switch(x=x.substr(x.length-1)==" "?x.substr(0,x.length-1):x,u=Ox(x,t,i).width,t.textAlign){case"right":c=a-u-2;break;case"center":c=(a-u)/2;break;case"left":default:c=2}e+=Gt(c)+" "+Gt(f)+` Td
`,e+="("+Wf(x)+`) Tj
`,e+=-Gt(c)+` 0 Td
`,f=-(i+2),u=0,g=E?y:y+1,v++,b=""}break}return r.text=e,r.fontSize=i,r},Ox=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:s}},tFe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},nFe=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},rFe=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,s=t[n];e.internal.newObjectDeferredBegin(s.objId,!0),Bn(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete t[r]}},sFe=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Ma.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(tFe)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");t6=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new Cne,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in r)if(r.hasOwnProperty(s)){var i=r[s];i.objId=void 0,i.hasAnnotation&&nFe(i,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,s){var i=!r;for(var o in r||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],c=a.Rect;if(a.Rect&&(a.Rect=Qje(a.Rect,s)),s.internal.newObjectDeferredBegin(a.objId,!0),a.DA=Tt.createDefaultAppearanceStream(a),Bn(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var u=eFe(a);l.push({key:"AP",value:"<</N "+u+">>"}),s.internal.acroformPlugin.xForms.push(u)}if(a.appearanceStreamContent){var d="";for(var h in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(h)){var f=a.appearanceStreamContent[h];if(d+="/"+h+" ",d+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var o in f)if(f.hasOwnProperty(o)){var g=f[o];typeof g=="function"&&(g=g.call(s,a)),d+="/"+o+" "+g+" ",s.internal.acroformPlugin.xForms.indexOf(g)>=0||s.internal.acroformPlugin.xForms.push(g)}}else typeof(g=f)=="function"&&(g=g.call(s,a)),d+="/"+o+" "+g,s.internal.acroformPlugin.xForms.indexOf(g)>=0||s.internal.acroformPlugin.xForms.push(g);d+=">>"}l.push({key:"AP",value:`<<
`+d+">>"})}s.internal.putStream({additionalKeyValues:l,objectId:a.objId}),s.internal.out("endobj")}i&&rFe(s.internal.acroformPlugin.xForms,s)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},Sne=gr.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(o){return o};if(Array.isArray(t)){for(var s="[",i=0;i<t.length;i++)switch(i!==0&&(s+=" "),Bn(t[i])){case"boolean":case"number":case"object":s+=t[i].toString();break;case"string":t[i].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),s+="("+Wf(r(t[i].toString()))+")"):s+=t[i].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},f5=function(t,e,n){var r=function(s){return s};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+Wf(r(t))+")"},Pl=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Pl.prototype.toString=function(){return this.objId+" 0 R"},Pl.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Pl.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],s=this[r];s&&(Array.isArray(s)?t.push({key:r,value:Sne(s,this.objId,this.scope)}):s instanceof Pl?(s.scope=this.scope,t.push({key:r,value:s.objId+" 0 R"})):typeof s!="function"&&t.push({key:r,value:s}))}return t};var kne=function(){Pl.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Mi(kne,Pl);var Cne=function(){Pl.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Wf(n(t))+")"}},set:function(n){t=n}})};Mi(Cne,Pl);var Ma=function t(){Pl.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute F supplied.');e=b}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ar(e,3)},set:function(b){b?this.F=Tr(e,3):this.F=Nr(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute Ff supplied.');n=b}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(b){r=b!==void 0?b:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(b){r[0]=b}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(b){r[1]=b}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(b){r[2]=b}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(b){r[3]=b}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(b){switch(b){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=b;break;default:throw new Error('Invalid value "'+b+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof JE)return;i="FieldObject"+t.FieldNum++}var b=function(v){return v};return this.scope&&(b=this.scope.internal.getEncryptor(this.objId)),"("+Wf(b(i))+")"},set:function(b){i=b.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(b){i=b}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(b){o=b}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(b){a=b}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(b){l=b}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/t6:c},set:function(b){c=b}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(b){u=b}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof JE||this instanceof nf))return f5(d,this.objId,this.scope)},set:function(b){b=b.toString(),d=b}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof ns?h:f5(h,this.objId,this.scope)},set:function(b){b=b.toString(),h=this instanceof ns?b:b.substr(0,1)==="("?Mp(b.substr(1,b.length-2)):Mp(b)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ns?Mp(h.substr(1,h.length-1)):h},set:function(b){b=b.toString(),h=this instanceof ns?"/"+b:b}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(b){this.V=b}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof ns?f:f5(f,this.objId,this.scope)},set:function(b){b=b.toString(),f=this instanceof ns?b:b.substr(0,1)==="("?Mp(b.substr(1,b.length-2)):Mp(b)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ns?Mp(f.substr(1,f.length-1)):f},set:function(b){b=b.toString(),f=this instanceof ns?"/"+b:b}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var g,y=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return y},set:function(b){b=!!b,y=b}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(g)return g},set:function(b){g=b}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ar(this.Ff,1)},set:function(b){b?this.Ff=Tr(this.Ff,1):this.Ff=Nr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ar(this.Ff,2)},set:function(b){b?this.Ff=Tr(this.Ff,2):this.Ff=Nr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ar(this.Ff,3)},set:function(b){b?this.Ff=Tr(this.Ff,3):this.Ff=Nr(this.Ff,3)}});var m=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(m!==null)return m},set:function(b){if([0,1,2].indexOf(b)===-1)throw new Error('Invalid value "'+b+'" for attribute Q supplied.');m=b}}),Object.defineProperty(this,"textAlign",{get:function(){var b;switch(m){case 0:default:b="left";break;case 1:b="center";break;case 2:b="right"}return b},configurable:!0,enumerable:!0,set:function(b){switch(b){case"right":case 2:m=2;break;case"center":case 1:m=1;break;case"left":case 0:default:m=0}}})};Mi(Ma,Pl);var km=function(){Ma.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Sne(e,this.objId,this.scope)},set:function(n){var r,s;s=[],typeof(r=n)=="string"&&(s=function(i,o,a){a||(a=1);for(var l,c=[];l=o.exec(i);)c.push(l[a]);return c}(r,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ar(this.Ff,18)},set:function(n){n?this.Ff=Tr(this.Ff,18):this.Ff=Nr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ar(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Tr(this.Ff,19):this.Ff=Nr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ar(this.Ff,20)},set:function(n){n?(this.Ff=Tr(this.Ff,20),e.sort()):this.Ff=Nr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ar(this.Ff,22)},set:function(n){n?this.Ff=Tr(this.Ff,22):this.Ff=Nr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ar(this.Ff,23)},set:function(n){n?this.Ff=Tr(this.Ff,23):this.Ff=Nr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ar(this.Ff,27)},set:function(n){n?this.Ff=Tr(this.Ff,27):this.Ff=Nr(this.Ff,27)}}),this.hasAppearanceStream=!1};Mi(km,Ma);var Cm=function(){km.call(this),this.fontName="helvetica",this.combo=!1};Mi(Cm,km);var Am=function(){Cm.call(this),this.combo=!0};Mi(Am,Cm);var l2=function(){Am.call(this),this.edit=!0};Mi(l2,Am);var ns=function(){Ma.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ar(this.Ff,15)},set:function(n){n?this.Ff=Tr(this.Ff,15):this.Ff=Nr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ar(this.Ff,16)},set:function(n){n?this.Ff=Tr(this.Ff,16):this.Ff=Nr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ar(this.Ff,17)},set:function(n){n?this.Ff=Tr(this.Ff,17):this.Ff=Nr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ar(this.Ff,26)},set:function(n){n?this.Ff=Tr(this.Ff,26):this.Ff=Nr(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(i){return i};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,s=[];for(r in s.push("<<"),e)s.push("/"+r+" ("+Wf(n(e[r]))+")");return s.push(">>"),s.join(`
`)}},set:function(n){Bn(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Mi(ns,Ma);var c2=function(){ns.call(this),this.pushButton=!0};Mi(c2,ns);var Tm=function(){ns.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Mi(Tm,ns);var JE=function(){var t,e;Ma.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(a){return a};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),r)o.push("/"+i+" ("+Wf(s(r[i]))+")");return o.push(">>"),o.join(`
`)},set:function(s){Bn(s)==="object"&&(r=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(s){typeof s=="string"&&(r.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(s){n=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(s){n="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Tt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Mi(JE,Ma),Tm.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Tm.prototype.createOption=function(t){var e=new JE;return e.Parent=this,e.optionName=t,this.Kids.push(e),iFe.call(this.scope,e),e};var u2=function(){ns.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Tt.CheckBox.createAppearanceStream()};Mi(u2,ns);var nf=function(){Ma.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ar(this.Ff,13)},set:function(e){e?this.Ff=Tr(this.Ff,13):this.Ff=Nr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ar(this.Ff,21)},set:function(e){e?this.Ff=Tr(this.Ff,21):this.Ff=Nr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ar(this.Ff,23)},set:function(e){e?this.Ff=Tr(this.Ff,23):this.Ff=Nr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ar(this.Ff,24)},set:function(e){e?this.Ff=Tr(this.Ff,24):this.Ff=Nr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ar(this.Ff,25)},set:function(e){e?this.Ff=Tr(this.Ff,25):this.Ff=Nr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ar(this.Ff,26)},set:function(e){e?this.Ff=Tr(this.Ff,26):this.Ff=Nr(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Mi(nf,Ma);var d2=function(){nf.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ar(this.Ff,14)},set:function(t){t?this.Ff=Tr(this.Ff,14):this.Ff=Nr(this.Ff,14)}}),this.password=!0};Mi(d2,nf);var Tt={CheckBox:{createAppearanceStream:function(){return{N:{On:Tt.CheckBox.YesNormal},D:{On:Tt.CheckBox.YesPushDown,Off:Tt.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=cl(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color),i=KP(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Gt(Tt.internal.getWidth(t))+" "+Gt(Tt.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Gt(i.fontSize)+" Tf "+s),n.push("BT"),n.push(i.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=cl(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),s=[],i=Tt.internal.getHeight(t),o=Tt.internal.getWidth(t),a=KP(t,t.caption);return s.push("1 g"),s.push("0 0 "+Gt(o)+" "+Gt(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+Gt(o-1)+" "+Gt(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+n+" "+Gt(a.fontSize)+" Tf "+r),s.push(a.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(t){var e=cl(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Gt(Tt.internal.getWidth(t))+" "+Gt(Tt.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Tt.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Tt.RadioButton.Circle.YesNormal,e.D[t]=Tt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=cl(t);e.scope=t.scope;var n=[],r=Tt.internal.getWidth(t)<=Tt.internal.getHeight(t)?Tt.internal.getWidth(t)/4:Tt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var s=Tt.internal.Bezier_C,i=Number((r*s).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Au(Tt.internal.getWidth(t)/2)+" "+Au(Tt.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),n.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),n.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),n.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=cl(t);e.scope=t.scope;var n=[],r=Tt.internal.getWidth(t)<=Tt.internal.getHeight(t)?Tt.internal.getWidth(t)/4:Tt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),i=Number((s*Tt.internal.Bezier_C).toFixed(5)),o=Number((r*Tt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Au(Tt.internal.getWidth(t)/2)+" "+Au(Tt.internal.getHeight(t)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),n.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),n.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),n.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Au(Tt.internal.getWidth(t)/2)+" "+Au(Tt.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=cl(t);e.scope=t.scope;var n=[],r=Tt.internal.getWidth(t)<=Tt.internal.getHeight(t)?Tt.internal.getWidth(t)/4:Tt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),i=Number((s*Tt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Au(Tt.internal.getWidth(t)/2)+" "+Au(Tt.internal.getHeight(t)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),n.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),n.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),n.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Tt.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Tt.RadioButton.Cross.YesNormal,e.D[t]=Tt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=cl(t);e.scope=t.scope;var n=[],r=Tt.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Gt(Tt.internal.getWidth(t)-2)+" "+Gt(Tt.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Gt(r.x1.x)+" "+Gt(r.x1.y)+" m"),n.push(Gt(r.x2.x)+" "+Gt(r.x2.y)+" l"),n.push(Gt(r.x4.x)+" "+Gt(r.x4.y)+" m"),n.push(Gt(r.x3.x)+" "+Gt(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=cl(t);e.scope=t.scope;var n=Tt.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+Gt(Tt.internal.getWidth(t))+" "+Gt(Tt.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Gt(Tt.internal.getWidth(t)-2)+" "+Gt(Tt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Gt(n.x1.x)+" "+Gt(n.x1.y)+" m"),r.push(Gt(n.x2.x)+" "+Gt(n.x2.y)+" l"),r.push(Gt(n.x4.x)+" "+Gt(n.x4.y)+" m"),r.push(Gt(n.x3.x)+" "+Gt(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=cl(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Gt(Tt.internal.getWidth(t))+" "+Gt(Tt.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};Tt.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Tt.internal.getWidth(t),n=Tt.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},Tt.internal.getWidth=function(t){var e=0;return Bn(t)==="object"&&(e=U7(t.Rect[2])),e},Tt.internal.getHeight=function(t){var e=0;return Bn(t)==="object"&&(e=U7(t.Rect[3])),e};var iFe=gr.addField=function(t){if(sFe(this,t),!(t instanceof Ma))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};gr.AcroFormChoiceField=km,gr.AcroFormListBox=Cm,gr.AcroFormComboBox=Am,gr.AcroFormEditBox=l2,gr.AcroFormButton=ns,gr.AcroFormPushButton=c2,gr.AcroFormRadioButton=Tm,gr.AcroFormCheckBox=u2,gr.AcroFormTextField=nf,gr.AcroFormPasswordField=d2,gr.AcroFormAppearance=Tt,gr.AcroForm={ChoiceField:km,ListBox:Cm,ComboBox:Am,EditBox:l2,Button:ns,PushButton:c2,RadioButton:Tm,CheckBox:u2,TextField:nf,PasswordField:d2,Appearance:Tt},jt.AcroForm={ChoiceField:km,ListBox:Cm,ComboBox:Am,EditBox:l2,Button:ns,PushButton:c2,RadioButton:Tm,CheckBox:u2,TextField:nf,PasswordField:d2,Appearance:Tt};jt.AcroForm;function Ane(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(C,N){var O,P,$,ee,J,Z=e;if((N=N||e)==="RGBA"||C.data!==void 0&&C.data instanceof Uint8ClampedArray&&"height"in C&&"width"in C)return"RGBA";if(S(C))for(J in n)for($=n[J],O=0;O<$.length;O+=1){for(ee=!0,P=0;P<$[O].length;P+=1)if($[O][P]!==void 0&&$[O][P]!==C[P]){ee=!1;break}if(ee===!0){Z=J;break}}else for(J in n)for($=n[J],O=0;O<$.length;O+=1){for(ee=!0,P=0;P<$[O].length;P+=1)if($[O][P]!==void 0&&$[O][P]!==C.charCodeAt(P)){ee=!1;break}if(ee===!0){Z=J;break}}return Z===e&&N!==e&&(Z=N),Z},s=function C(N){for(var O=this.internal.write,P=this.internal.putStream,$=(0,this.internal.getFilters)();$.indexOf("FlateEncode")!==-1;)$.splice($.indexOf("FlateEncode"),1);N.objectId=this.internal.newObject();var ee=[];if(ee.push({key:"Type",value:"/XObject"}),ee.push({key:"Subtype",value:"/Image"}),ee.push({key:"Width",value:N.width}),ee.push({key:"Height",value:N.height}),N.colorSpace===m.INDEXED?ee.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(N.palette.length/3-1)+" "+("sMask"in N&&N.sMask!==void 0?N.objectId+2:N.objectId+1)+" 0 R]"}):(ee.push({key:"ColorSpace",value:"/"+N.colorSpace}),N.colorSpace===m.DEVICE_CMYK&&ee.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ee.push({key:"BitsPerComponent",value:N.bitsPerComponent}),"decodeParameters"in N&&N.decodeParameters!==void 0&&ee.push({key:"DecodeParms",value:"<<"+N.decodeParameters+">>"}),"transparency"in N&&Array.isArray(N.transparency)){for(var J="",Z=0,M=N.transparency.length;Z<M;Z++)J+=N.transparency[Z]+" "+N.transparency[Z]+" ";ee.push({key:"Mask",value:"["+J+"]"})}N.sMask!==void 0&&ee.push({key:"SMask",value:N.objectId+1+" 0 R"});var F=N.filter!==void 0?["/"+N.filter]:void 0;if(P({data:N.data,additionalKeyValues:ee,alreadyAppliedFilters:F,objectId:N.objectId}),O("endobj"),"sMask"in N&&N.sMask!==void 0){var G="/Predictor "+N.predictor+" /Colors 1 /BitsPerComponent "+N.bitsPerComponent+" /Columns "+N.width,D={width:N.width,height:N.height,colorSpace:"DeviceGray",bitsPerComponent:N.bitsPerComponent,decodeParameters:G,data:N.sMask};"filter"in N&&(D.filter=N.filter),C.call(this,D)}if(N.colorSpace===m.INDEXED){var j=this.internal.newObject();P({data:x(new Uint8Array(N.palette)),objectId:j}),O("endobj")}},i=function(){var C=this.internal.collections.addImage_images;for(var N in C)s.call(this,C[N])},o=function(){var C,N=this.internal.collections.addImage_images,O=this.internal.write;for(var P in N)O("/I"+(C=N[P]).index,C.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var C=this.internal.collections.addImage_images;return a.call(this),C},c=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(C){return typeof t["process"+C.toUpperCase()]=="function"},d=function(C){return Bn(C)==="object"&&C.nodeType===1},h=function(C,N){if(C.nodeName==="IMG"&&C.hasAttribute("src")){var O=""+C.getAttribute("src");if(O.indexOf("data:image/")===0)return uy(unescape(O).split("base64,").pop());var P=t.loadFile(O,!0);if(P!==void 0)return P}if(C.nodeName==="CANVAS"){if(C.width===0||C.height===0)throw new Error("Given canvas must have data. Canvas width: "+C.width+", height: "+C.height);var $;switch(N){case"PNG":$="image/png";break;case"WEBP":$="image/webp";break;case"JPEG":case"JPG":default:$="image/jpeg"}return uy(C.toDataURL($,1).split("base64,").pop())}},f=function(C){var N=this.internal.collections.addImage_images;if(N){for(var O in N)if(C===N[O].alias)return N[O]}},g=function(C,N,O){return C||N||(C=-96,N=-96),C<0&&(C=-1*O.width*72/C/this.internal.scaleFactor),N<0&&(N=-1*O.height*72/N/this.internal.scaleFactor),C===0&&(C=N*O.width/O.height),N===0&&(N=C*O.height/O.width),[C,N]},y=function(C,N,O,P,$,ee){var J=g.call(this,O,P,$),Z=this.internal.getCoordinateString,M=this.internal.getVerticalCoordinateString,F=l.call(this);if(O=J[0],P=J[1],F[$.index]=$,ee){ee*=Math.PI/180;var G=Math.cos(ee),D=Math.sin(ee),j=function(W){return W.toFixed(4)},V=[j(G),j(D),j(-1*D),j(G),0,0,"cm"]}this.internal.write("q"),ee?(this.internal.write([1,"0","0",1,Z(C),M(N+P),"cm"].join(" ")),this.internal.write(V.join(" ")),this.internal.write([Z(O),"0","0",Z(P),"0","0","cm"].join(" "))):this.internal.write([Z(O),"0","0",Z(P),Z(C),M(N+P),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+$.index+" Do"),this.internal.write("Q")},m=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var b=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},v=t.__addimage__.sHashCode=function(C){var N,O,P=0;if(typeof C=="string")for(O=C.length,N=0;N<O;N++)P=(P<<5)-P+C.charCodeAt(N),P|=0;else if(S(C))for(O=C.byteLength/2,N=0;N<O;N++)P=(P<<5)-P+C[N],P|=0;return P},_=t.__addimage__.validateStringAsBase64=function(C){(C=C||"").toString().trim();var N=!0;return C.length===0&&(N=!1),C.length%4!=0&&(N=!1),/^[A-Za-z0-9+/]+$/.test(C.substr(0,C.length-2))===!1&&(N=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(C.substr(-2))===!1&&(N=!1),N},E=t.__addimage__.extractImageFromDataUrl=function(C){var N=(C=C||"").split("base64,"),O=null;if(N.length===2){var P=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(N[0]);Array.isArray(P)&&(O={mimeType:P[1],charset:P[2],data:N[1]})}return O},w=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(C){return w()&&C instanceof ArrayBuffer};var S=t.__addimage__.isArrayBufferView=function(C){return w()&&typeof Uint32Array<"u"&&(C instanceof Int8Array||C instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&C instanceof Uint8ClampedArray||C instanceof Int16Array||C instanceof Uint16Array||C instanceof Int32Array||C instanceof Uint32Array||C instanceof Float32Array||C instanceof Float64Array)},k=t.__addimage__.binaryStringToUint8Array=function(C){for(var N=C.length,O=new Uint8Array(N),P=0;P<N;P++)O[P]=C.charCodeAt(P);return O},x=t.__addimage__.arrayBufferToBinaryString=function(C){for(var N="",O=S(C)?C:new Uint8Array(C),P=0;P<O.length;P+=8192)N+=String.fromCharCode.apply(null,O.subarray(P,P+8192));return N};t.addImage=function(){var C,N,O,P,$,ee,J,Z,M;if(typeof arguments[1]=="number"?(N=e,O=arguments[1],P=arguments[2],$=arguments[3],ee=arguments[4],J=arguments[5],Z=arguments[6],M=arguments[7]):(N=arguments[1],O=arguments[2],P=arguments[3],$=arguments[4],ee=arguments[5],J=arguments[6],Z=arguments[7],M=arguments[8]),Bn(C=arguments[0])==="object"&&!d(C)&&"imageData"in C){var F=C;C=F.imageData,N=F.format||N||e,O=F.x||O||0,P=F.y||P||0,$=F.w||F.width||$,ee=F.h||F.height||ee,J=F.alias||J,Z=F.compression||Z,M=F.rotation||F.angle||M}var G=this.internal.getFilters();if(Z===void 0&&G.indexOf("FlateEncode")!==-1&&(Z="SLOW"),isNaN(O)||isNaN(P))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var D=I.call(this,C,N,J,Z);return y.call(this,O,P,$,ee,D,M),this};var I=function(C,N,O,P){var $,ee,J;if(typeof C=="string"&&r(C)===e){C=unescape(C);var Z=R(C,!1);(Z!==""||(Z=t.loadFile(C,!0))!==void 0)&&(C=Z)}if(d(C)&&(C=h(C,N)),N=r(C,N),!u(N))throw new Error("addImage does not support files of type '"+N+"', please ensure that a plugin for '"+N+"' support is added.");if(((J=O)==null||J.length===0)&&(O=function(M){return typeof M=="string"||S(M)?v(M):S(M.data)?v(M.data):null}(C)),($=f.call(this,O))||(w()&&(C instanceof Uint8Array||N==="RGBA"||(ee=C,C=k(C))),$=this["process"+N.toUpperCase()](C,c.call(this),O,function(M){return M&&typeof M=="string"&&(M=M.toUpperCase()),M in t.image_compression?M:b.NONE}(P),ee)),!$)throw new Error("An unknown error occurred whilst processing the image.");return $},R=t.__addimage__.convertBase64ToBinaryString=function(C,N){var O;N=typeof N!="boolean"||N;var P,$="";if(typeof C=="string"){P=(O=E(C))!==null?O.data:C;try{$=uy(P)}catch(ee){if(N)throw _(P)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ee.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return $};t.getImageProperties=function(C){var N,O,P="";if(d(C)&&(C=h(C)),typeof C=="string"&&r(C)===e&&((P=R(C,!1))===""&&(P=t.loadFile(C)||""),C=P),O=r(C),!u(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(!w()||C instanceof Uint8Array||(C=k(C)),!(N=this["process"+O.toUpperCase()](C)))throw new Error("An unknown error occurred whilst processing the image");return N.fileType=O,N}})(jt.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};jt.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,s,i,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,u=!1,d=0;d<c.length&&!u;d++)switch((r=c[d]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var h=0;h<c.length;h++){r=c[h];var f=this.internal.pdfEscape,g=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var y=this.internal.newAdditionalObject(),m=this.internal.newAdditionalObject(),b=this.internal.getEncryptor(y.objId),v=r.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+f(b(r.contents))+")",i+=" /Popup "+m.objId+" 0 R",i+=" /P "+l.objId+" 0 R",i+=" /T ("+f(b(v))+") >>",y.content=i;var _=y.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+_,r.open&&(i+=" /Open true"),i+=" >>",m.content=i,this.internal.write(y.objId,"0 R",m.objId,"0 R");break;case"freetext":s="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var E=r.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+f(g(r.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+E+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(r.options.name){var w=this.annotations._nameMap[r.options.name];r.options.pageNumber=w.page,r.options.top=w.y}else r.options.top||(r.options.top=0);if(s="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",i="",r.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+f(g(r.options.url))+") >>";else if(r.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,i+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var S=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),i+=" /XYZ "+r.options.left+" "+S+" "+r.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,s,i,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:c(r),w:l(n+s),h:c(r+i)},options:o,type:"link"})},t.textWithLink=function(n,r,s,i){var o,a,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){a=i.maxWidth;var u=this.splitTextToSize(n,a).length;o=Math.ceil(c*u)}else a=l,o=c;return this.text(n,r,s,i),s+=.2*c,i.align==="center"&&(r-=l/2),i.align==="right"&&(r-=l),this.link(r,s-c,a,o,i),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(jt.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];t.__arabicParser__={};var i=t.__arabicParser__.isInArabicSubstitutionA=function(y){return e[y.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(y){return typeof y=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(y)},a=t.__arabicParser__.isArabicEndLetter=function(y){return o(y)&&i(y)&&e[y.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(y){return o(y)&&s.indexOf(y.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(y){return o(y)&&i(y)&&e[y.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(y){return o(y)&&i(y)&&e[y.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(y){return o(y)&&i(y)&&e[y.charCodeAt(0)].length>=3};var u=t.__arabicParser__.arabicLetterHasMedialForm=function(y){return o(y)&&i(y)&&e[y.charCodeAt(0)].length==4},d=t.__arabicParser__.resolveLigatures=function(y){var m=0,b=n,v="",_=0;for(m=0;m<y.length;m+=1)b[y.charCodeAt(m)]!==void 0?(_++,typeof(b=b[y.charCodeAt(m)])=="number"&&(v+=String.fromCharCode(b),b=n,_=0),m===y.length-1&&(b=n,v+=y.charAt(m-(_-1)),m-=_-1,_=0)):(b=n,v+=y.charAt(m-_),m-=_,_=0);return v};t.__arabicParser__.isArabicDiacritic=function(y){return y!==void 0&&r[y.charCodeAt(0)]!==void 0};var h=t.__arabicParser__.getCorrectForm=function(y,m,b){return o(y)?i(y)===!1?-1:!c(y)||!o(m)&&!o(b)||!o(b)&&a(m)||a(y)&&!o(m)||a(y)&&l(m)||a(y)&&a(m)?0:u(y)&&o(m)&&!a(m)&&o(b)&&c(b)?3:a(y)||!o(b)?1:2:-1},f=function(y){var m=0,b=0,v=0,_="",E="",w="",S=(y=y||"").split("\\s+"),k=[];for(m=0;m<S.length;m+=1){for(k.push(""),b=0;b<S[m].length;b+=1)_=S[m][b],E=S[m][b-1],w=S[m][b+1],o(_)?(v=h(_,E,w),k[m]+=v!==-1?String.fromCharCode(e[_.charCodeAt(0)][v]):_):k[m]+=_;k[m]=d(k[m])}return k.join(" ")},g=t.__arabicParser__.processArabic=t.processArabic=function(){var y,m=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,b=[];if(Array.isArray(m)){var v=0;for(b=[],v=0;v<m.length;v+=1)Array.isArray(m[v])?b.push([f(m[v][0]),m[v][1],m[v][2]]):b.push([f(m[v])]);y=b}else y=f(m);return typeof arguments[0]=="string"?y:(arguments[0].text=y,arguments[0])};t.events.push(["preProcessText",g])}(jt.API),jt.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(a){s=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(a){i=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var s;if((n=n||"2d")!=="2d")return null;for(s in r)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=r[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(jt.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(y){l=y}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(y){c=y}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(y){u=y}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(y){d=y}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(y){h=y}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(y){f=y}});var g=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return g},set:function(y){g=y}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){r.call(this);var u=(c=c||{}).fontSize||this.getFontSize(),d=c.font||this.getFont(),h=c.scaleFactor||this.internal.scaleFactor,f=0,g=0,y=0,m=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var b=c.maxWidth;b>0?typeof l=="string"?l=this.splitTextToSize(l,b):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(_,E){return _.concat(m.splitTextToSize(E,b))},[])):l=Array.isArray(l)?l:[l];for(var v=0;v<l.length;v++)f<(y=this.getStringUnitWidth(l[v],{font:d})*u)&&(f=y);return f!==0&&(g=l.length),{w:f/=h,h:Math.max((g*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/h,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new i(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var c=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,d=this.internal.__cell__.margins||e,h=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=d.top,f&&h&&(this.printHeaderRow(l.lineNumber,!0),l.y+=h[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-u,l.y+u,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+u,{align:"center",baseline:"top",maxWidth:l.width-u-u}):this.text(l.text,l.x+u,l.y+u,{align:"left",baseline:"top",maxWidth:l.width-u-u})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,u,d,h){if(r.call(this),!u)throw new Error("No data for PDF table.");var f,g,y,m,b=[],v=[],_=[],E={},w={},S=[],k=[],x=(h=h||{}).autoSize||!1,I=h.printHeaders!==!1,R=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,C=h.margins||Object.assign({width:this.getPageWidth()},e),N=typeof h.padding=="number"?h.padding:3,O=h.headerBackgroundColor||"#c8c8c8",P=h.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=I,this.internal.__cell__.margins=C,this.internal.__cell__.table_font_size=R,this.internal.__cell__.padding=N,this.internal.__cell__.headerBackgroundColor=O,this.internal.__cell__.headerTextColor=P,this.setFontSize(R),d==null)v=b=Object.keys(u[0]),_=b.map(function(){return"left"});else if(Array.isArray(d)&&Bn(d[0])==="object")for(b=d.map(function(F){return F.name}),v=d.map(function(F){return F.prompt||F.name||""}),_=d.map(function(F){return F.align||"left"}),f=0;f<d.length;f+=1)w[d[f].name]=d[f].width*(19.049976/25.4);else Array.isArray(d)&&typeof d[0]=="string"&&(v=b=d,_=b.map(function(){return"left"}));if(x||Array.isArray(d)&&typeof d[0]=="string")for(f=0;f<b.length;f+=1){for(E[m=b[f]]=u.map(function(F){return F[m]}),this.setFont(void 0,"bold"),S.push(this.getTextDimensions(v[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),g=E[m],this.setFont(void 0,"normal"),y=0;y<g.length;y+=1)S.push(this.getTextDimensions(g[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);w[m]=Math.max.apply(null,S)+N+N,S=[]}if(I){var $={};for(f=0;f<b.length;f+=1)$[b[f]]={},$[b[f]].text=v[f],$[b[f]].align=_[f];var ee=a.call(this,$,w);k=b.map(function(F){return new i(l,c,w[F],ee,$[F].text,void 0,$[F].align)}),this.setTableHeaderRow(k),this.printHeaderRow(1,!1)}var J=d.reduce(function(F,G){return F[G.name]=G.align,F},{});for(f=0;f<u.length;f+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:f,data:u[f]},this);var Z=a.call(this,u[f],w);for(y=0;y<b.length;y+=1){var M=u[f][b[y]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:f,col:y,data:M},this),o.call(this,new i(l,c,w[b[y]],Z,M,f+2,J[b[y]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var u=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(l).map(function(f){var g=l[f];return this.splitTextToSize(g.hasOwnProperty("text")?g.text:g,c[f]-u-u)},this).map(function(f){return this.getLineHeightFactor()*f.length*d/h+u+u},this).reduce(function(f,g){return Math.max(f,g)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){u=this.internal.__cell__.tableHeaderRow[f].clone(),c&&(u.y=this.internal.__cell__.margins.top||0,h.push(u)),u.lineNumber=l;var g=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(g)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),n=!1}}(jt.API);var Tne={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Nne=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],YP=Ane(Nne),Pne=[100,200,300,400,500,600,700,800,900],oFe=Ane(Pne);function XP(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(i){return Tne[i=i||"normal"]?i:"normal"}(t.style),r=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(t.weight),s=function(i){return typeof YP[i=i||"normal"]=="number"?i:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:s,src:t.src||[],ref:t.ref||{name:e,style:[s,n,r].join(" ")}}}function $7(t,e,n,r){var s;for(s=n;s>=0&&s<e.length;s+=r)if(t[e[s]])return t[e[s]];for(s=n;s>=0&&s<e.length;s-=r)if(t[e[s]])return t[e[s]]}var aFe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},H7={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function z7(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function lFe(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",s=Object.assign({},aFe,n.genericFontFamilies||{}),i=null,o=null,a=0;a<e.length;++a)if(s[(i=XP(e[a])).family]&&(i.family=s[i.family]),t.hasOwnProperty(i.family)){o=t[i.family];break}if(!(o=o||t[r]))throw new Error("Could not find a font-family for the rule '"+z7(i)+"' and default family '"+r+"'.");if(o=function(l,c){if(c[l])return c[l];var u=YP[l],d=u<=YP.normal?-1:1,h=$7(c,Nne,u,d);if(!h)throw new Error("Could not find a matching font-stretch value for "+l);return h}(i.stretch,o),o=function(l,c){if(c[l])return c[l];for(var u=Tne[l],d=0;d<u.length;++d)if(c[u[d]])return c[u[d]];throw new Error("Could not find a matching font-style for "+l)}(i.style,o),!(o=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var u=oFe[l],d=$7(c,Pne,u,l<400?-1:1);if(!d)throw new Error("Could not find a matching font-weight for value "+l);return d}(i.weight,o)))throw new Error("Failed to resolve a font for the rule '"+z7(i)+"'.");return o}function V7(t){return t.trimLeft()}function cFe(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function uFe(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Dx,W7,G7,p5=["times"];(function(t){var e,n,r,s,i,o,a,l,c,u=function(D){return D=D||{},this.isStrokeTransparent=D.isStrokeTransparent||!1,this.strokeOpacity=D.strokeOpacity||1,this.strokeStyle=D.strokeStyle||"#000000",this.fillStyle=D.fillStyle||"#000000",this.isFillTransparent=D.isFillTransparent||!1,this.fillOpacity=D.fillOpacity||1,this.font=D.font||"10px sans-serif",this.textBaseline=D.textBaseline||"alphabetic",this.textAlign=D.textAlign||"left",this.lineWidth=D.lineWidth||1,this.lineJoin=D.lineJoin||"miter",this.lineCap=D.lineCap||"butt",this.path=D.path||[],this.transform=D.transform!==void 0?D.transform.clone():new l,this.globalCompositeOperation=D.globalCompositeOperation||"normal",this.globalAlpha=D.globalAlpha||1,this.clip_path=D.clip_path||[],this.currentPoint=D.currentPoint||new o,this.miterLimit=D.miterLimit||10,this.lastPoint=D.lastPoint||new o,this.lineDashOffset=D.lineDashOffset||0,this.lineDash=D.lineDash||[],this.margin=D.margin||[0,0,0,0],this.prevPageLastElemOffset=D.prevPageLastElemOffset||0,this.ignoreClearRect=typeof D.ignoreClearRect!="boolean"||D.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new d(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new u}]);var d=function(D){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var j=D;Object.defineProperty(this,"pdf",{get:function(){return j}});var V=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return V},set:function(ge){V=!!ge}});var W=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return W},set:function(ge){W=!!ge}});var re=0;Object.defineProperty(this,"posX",{get:function(){return re},set:function(ge){isNaN(ge)||(re=ge)}});var te=0;Object.defineProperty(this,"posY",{get:function(){return te},set:function(ge){isNaN(ge)||(te=ge)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(ge){var ne;typeof ge=="number"?ne=[ge,ge,ge,ge]:((ne=new Array(4))[0]=ge[0],ne[1]=ge.length>=2?ge[1]:ne[0],ne[2]=ge.length>=3?ge[2]:ne[0],ne[3]=ge.length>=4?ge[3]:ne[1]),c.margin=ne}});var Y=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Y},set:function(ge){Y=ge}});var de=0;Object.defineProperty(this,"lastBreak",{get:function(){return de},set:function(ge){de=ge}});var ye=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ye},set:function(ge){ye=ge}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(ge){ge instanceof u&&(c=ge)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(ge){c.path=ge}});var Se=[];Object.defineProperty(this,"ctxStack",{get:function(){return Se},set:function(ge){Se=ge}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ge){var ne;ne=h(ge),this.ctx.fillStyle=ne.style,this.ctx.isFillTransparent=ne.a===0,this.ctx.fillOpacity=ne.a,this.pdf.setFillColor(ne.r,ne.g,ne.b,{a:ne.a}),this.pdf.setTextColor(ne.r,ne.g,ne.b,{a:ne.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ge){var ne=h(ge);this.ctx.strokeStyle=ne.style,this.ctx.isStrokeTransparent=ne.a===0,this.ctx.strokeOpacity=ne.a,ne.a===0?this.pdf.setDrawColor(255,255,255):(ne.a,this.pdf.setDrawColor(ne.r,ne.g,ne.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ge){["butt","round","square"].indexOf(ge)!==-1&&(this.ctx.lineCap=ge,this.pdf.setLineCap(ge))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ge){isNaN(ge)||(this.ctx.lineWidth=ge,this.pdf.setLineWidth(ge))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ge){["bevel","round","miter"].indexOf(ge)!==-1&&(this.ctx.lineJoin=ge,this.pdf.setLineJoin(ge))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ge){isNaN(ge)||(this.ctx.miterLimit=ge,this.pdf.setMiterLimit(ge))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ge){this.ctx.textBaseline=ge}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ge){["right","end","center","left","start"].indexOf(ge)!==-1&&(this.ctx.textAlign=ge)}});var Te=null;function ke(ge,ne){if(Te===null){var le=function(se){var fe=[];return Object.keys(se).forEach(function(Ce){se[Ce].forEach(function(Ie){var xe=null;switch(Ie){case"bold":xe={family:Ce,weight:"bold"};break;case"italic":xe={family:Ce,style:"italic"};break;case"bolditalic":xe={family:Ce,weight:"bold",style:"italic"};break;case"":case"normal":xe={family:Ce}}xe!==null&&(xe.ref={name:Ce,style:Ie},fe.push(xe))})}),fe}(ge.getFontList());Te=function(se){for(var fe={},Ce=0;Ce<se.length;++Ce){var Ie=XP(se[Ce]),xe=Ie.family,$e=Ie.stretch,je=Ie.style,Be=Ie.weight;fe[xe]=fe[xe]||{},fe[xe][$e]=fe[xe][$e]||{},fe[xe][$e][je]=fe[xe][$e][je]||{},fe[xe][$e][je][Be]=Ie}return fe}(le.concat(ne))}return Te}var K=null;Object.defineProperty(this,"fontFaces",{get:function(){return K},set:function(ge){Te=null,K=ge}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ge){var ne;if(this.ctx.font=ge,(ne=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ge))!==null){var le=ne[1],se=(ne[2],ne[3]),fe=ne[4],Ce=(ne[5],ne[6]),Ie=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(fe)[2];fe=Math.floor(Ie==="px"?parseFloat(fe)*this.pdf.internal.scaleFactor:Ie==="em"?parseFloat(fe)*this.pdf.getFontSize():parseFloat(fe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(fe);var xe=function(tt){var ie,z,X=[],pe=tt.trim();if(pe==="")return p5;if(pe in H7)return[H7[pe]];for(;pe!=="";){switch(z=null,ie=(pe=V7(pe)).charAt(0)){case'"':case"'":z=cFe(pe.substring(1),ie);break;default:z=uFe(pe)}if(z===null||(X.push(z[0]),(pe=V7(z[1]))!==""&&pe.charAt(0)!==","))return p5;pe=pe.replace(/^,/,"")}return X}(Ce);if(this.fontFaces){var $e=lFe(ke(this.pdf,this.fontFaces),xe.map(function(tt){return{family:tt,stretch:"normal",weight:se,style:le}}));this.pdf.setFont($e.ref.name,$e.ref.style)}else{var je="";(se==="bold"||parseInt(se,10)>=700||le==="bold")&&(je="bold"),le==="italic"&&(je+="italic"),je.length===0&&(je="normal");for(var Be="",Ae={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ye=0;Ye<xe.length;Ye++){if(this.pdf.internal.getFont(xe[Ye],je,{noFallback:!0,disableWarning:!0})!==void 0){Be=xe[Ye];break}if(je==="bolditalic"&&this.pdf.internal.getFont(xe[Ye],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Be=xe[Ye],je="bold";else if(this.pdf.internal.getFont(xe[Ye],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Be=xe[Ye],je="normal";break}}if(Be===""){for(var Xe=0;Xe<xe.length;Xe++)if(Ae[xe[Xe]]){Be=Ae[xe[Xe]];break}}Be=Be===""?"Times":Be,this.pdf.setFont(Be,je)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ge){this.ctx.globalCompositeOperation=ge}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ge){this.ctx.globalAlpha=ge}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ge){this.ctx.lineDashOffset=ge,G.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ge){this.ctx.lineDash=ge,G.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ge){this.ctx.ignoreClearRect=!!ge}})};d.prototype.setLineDash=function(D){this.lineDash=D},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){E.call(this,"fill",!1)},d.prototype.stroke=function(){E.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(D,j){if(isNaN(D)||isNaN(j))throw Wn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var V=this.ctx.transform.applyToPoint(new o(D,j));this.path.push({type:"mt",x:V.x,y:V.y}),this.ctx.lastPoint=new o(D,j)},d.prototype.closePath=function(){var D=new o(0,0),j=0;for(j=this.path.length-1;j!==-1;j--)if(this.path[j].type==="begin"&&Bn(this.path[j+1])==="object"&&typeof this.path[j+1].x=="number"){D=new o(this.path[j+1].x,this.path[j+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(D.x,D.y)},d.prototype.lineTo=function(D,j){if(isNaN(D)||isNaN(j))throw Wn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var V=this.ctx.transform.applyToPoint(new o(D,j));this.path.push({type:"lt",x:V.x,y:V.y}),this.ctx.lastPoint=new o(V.x,V.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),E.call(this,null,!0)},d.prototype.quadraticCurveTo=function(D,j,V,W){if(isNaN(V)||isNaN(W)||isNaN(D)||isNaN(j))throw Wn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var re=this.ctx.transform.applyToPoint(new o(V,W)),te=this.ctx.transform.applyToPoint(new o(D,j));this.path.push({type:"qct",x1:te.x,y1:te.y,x:re.x,y:re.y}),this.ctx.lastPoint=new o(re.x,re.y)},d.prototype.bezierCurveTo=function(D,j,V,W,re,te){if(isNaN(re)||isNaN(te)||isNaN(D)||isNaN(j)||isNaN(V)||isNaN(W))throw Wn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Y=this.ctx.transform.applyToPoint(new o(re,te)),de=this.ctx.transform.applyToPoint(new o(D,j)),ye=this.ctx.transform.applyToPoint(new o(V,W));this.path.push({type:"bct",x1:de.x,y1:de.y,x2:ye.x,y2:ye.y,x:Y.x,y:Y.y}),this.ctx.lastPoint=new o(Y.x,Y.y)},d.prototype.arc=function(D,j,V,W,re,te){if(isNaN(D)||isNaN(j)||isNaN(V)||isNaN(W)||isNaN(re))throw Wn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(te=!!te,!this.ctx.transform.isIdentity){var Y=this.ctx.transform.applyToPoint(new o(D,j));D=Y.x,j=Y.y;var de=this.ctx.transform.applyToPoint(new o(0,V)),ye=this.ctx.transform.applyToPoint(new o(0,0));V=Math.sqrt(Math.pow(de.x-ye.x,2)+Math.pow(de.y-ye.y,2))}Math.abs(re-W)>=2*Math.PI&&(W=0,re=2*Math.PI),this.path.push({type:"arc",x:D,y:j,radius:V,startAngle:W,endAngle:re,counterclockwise:te})},d.prototype.arcTo=function(D,j,V,W,re){throw new Error("arcTo not implemented.")},d.prototype.rect=function(D,j,V,W){if(isNaN(D)||isNaN(j)||isNaN(V)||isNaN(W))throw Wn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(D,j),this.lineTo(D+V,j),this.lineTo(D+V,j+W),this.lineTo(D,j+W),this.lineTo(D,j),this.lineTo(D+V,j),this.lineTo(D,j)},d.prototype.fillRect=function(D,j,V,W){if(isNaN(D)||isNaN(j)||isNaN(V)||isNaN(W))throw Wn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var re={};this.lineCap!=="butt"&&(re.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(re.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(D,j,V,W),this.fill(),re.hasOwnProperty("lineCap")&&(this.lineCap=re.lineCap),re.hasOwnProperty("lineJoin")&&(this.lineJoin=re.lineJoin)}},d.prototype.strokeRect=function(D,j,V,W){if(isNaN(D)||isNaN(j)||isNaN(V)||isNaN(W))throw Wn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(D,j,V,W),this.stroke())},d.prototype.clearRect=function(D,j,V,W){if(isNaN(D)||isNaN(j)||isNaN(V)||isNaN(W))throw Wn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(D,j,V,W))},d.prototype.save=function(D){D=typeof D!="boolean"||D;for(var j=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("q");if(this.pdf.setPage(j),D){this.ctx.fontSize=this.pdf.internal.getFontSize();var W=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=W}},d.prototype.restore=function(D){D=typeof D!="boolean"||D;for(var j=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("Q");this.pdf.setPage(j),D&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(D){var j,V,W,re;if(D.isCanvasGradient===!0&&(D=D.getColor()),!D)return{r:0,g:0,b:0,a:0,style:D};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(D))j=0,V=0,W=0,re=0;else{var te=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(D);if(te!==null)j=parseInt(te[1]),V=parseInt(te[2]),W=parseInt(te[3]),re=1;else if((te=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(D))!==null)j=parseInt(te[1]),V=parseInt(te[2]),W=parseInt(te[3]),re=parseFloat(te[4]);else{if(re=1,typeof D=="string"&&D.charAt(0)!=="#"){var Y=new xne(D);D=Y.ok?Y.toHex():"#000000"}D.length===4?(j=D.substring(1,2),j+=j,V=D.substring(2,3),V+=V,W=D.substring(3,4),W+=W):(j=D.substring(1,3),V=D.substring(3,5),W=D.substring(5,7)),j=parseInt(j,16),V=parseInt(V,16),W=parseInt(W,16)}}return{r:j,g:V,b:W,a:re,style:D}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},g=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(D,j,V,W){if(isNaN(j)||isNaN(V)||typeof D!="string")throw Wn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(W=isNaN(W)?void 0:W,!f.call(this)){var re=Z(this.ctx.transform.rotation),te=this.ctx.transform.scaleX;N.call(this,{text:D,x:j,y:V,scale:te,angle:re,align:this.textAlign,maxWidth:W})}},d.prototype.strokeText=function(D,j,V,W){if(isNaN(j)||isNaN(V)||typeof D!="string")throw Wn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){W=isNaN(W)?void 0:W;var re=Z(this.ctx.transform.rotation),te=this.ctx.transform.scaleX;N.call(this,{text:D,x:j,y:V,scale:te,renderingMode:"stroke",angle:re,align:this.textAlign,maxWidth:W})}},d.prototype.measureText=function(D){if(typeof D!="string")throw Wn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var j=this.pdf,V=this.pdf.internal.scaleFactor,W=j.internal.getFontSize(),re=j.getStringUnitWidth(D)*W/j.internal.scaleFactor,te=function(Y){var de=(Y=Y||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return de}}),this};return new te({width:re*=Math.round(96*V/72*1e4)/1e4})},d.prototype.scale=function(D,j){if(isNaN(D)||isNaN(j))throw Wn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var V=new l(D,0,0,j,0,0);this.ctx.transform=this.ctx.transform.multiply(V)},d.prototype.rotate=function(D){if(isNaN(D))throw Wn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var j=new l(Math.cos(D),Math.sin(D),-Math.sin(D),Math.cos(D),0,0);this.ctx.transform=this.ctx.transform.multiply(j)},d.prototype.translate=function(D,j){if(isNaN(D)||isNaN(j))throw Wn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var V=new l(1,0,0,1,D,j);this.ctx.transform=this.ctx.transform.multiply(V)},d.prototype.transform=function(D,j,V,W,re,te){if(isNaN(D)||isNaN(j)||isNaN(V)||isNaN(W)||isNaN(re)||isNaN(te))throw Wn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Y=new l(D,j,V,W,re,te);this.ctx.transform=this.ctx.transform.multiply(Y)},d.prototype.setTransform=function(D,j,V,W,re,te){D=isNaN(D)?1:D,j=isNaN(j)?0:j,V=isNaN(V)?0:V,W=isNaN(W)?1:W,re=isNaN(re)?0:re,te=isNaN(te)?0:te,this.ctx.transform=new l(D,j,V,W,re,te)};var y=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(D,j,V,W,re,te,Y,de,ye){var Se=this.pdf.getImageProperties(D),Te=1,ke=1,K=1,ge=1;W!==void 0&&de!==void 0&&(K=de/W,ge=ye/re,Te=Se.width/W*de/W,ke=Se.height/re*ye/re),te===void 0&&(te=j,Y=V,j=0,V=0),W!==void 0&&de===void 0&&(de=W,ye=re),W===void 0&&de===void 0&&(de=Se.width,ye=Se.height);for(var ne,le=this.ctx.transform.decompose(),se=Z(le.rotate.shx),fe=new l,Ce=(fe=(fe=(fe=fe.multiply(le.translate)).multiply(le.skew)).multiply(le.scale)).applyToRectangle(new a(te-j*K,Y-V*ge,W*Te,re*ke)),Ie=m.call(this,Ce),xe=[],$e=0;$e<Ie.length;$e+=1)xe.indexOf(Ie[$e])===-1&&xe.push(Ie[$e]);if(_(xe),this.autoPaging)for(var je=xe[0],Be=xe[xe.length-1],Ae=je;Ae<Be+1;Ae++){this.pdf.setPage(Ae);var Ye=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Xe=Ae===1?this.posY+this.margin[0]:this.margin[0],tt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ie=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],z=Ae===1?0:tt+(Ae-2)*ie;if(this.ctx.clip_path.length!==0){var X=this.path;ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(ne,this.posX+this.margin[3],-z+Xe+this.ctx.prevPageLastElemOffset),w.call(this,"fill",!0),this.path=X}var pe=JSON.parse(JSON.stringify(Ce));pe=v([pe],this.posX+this.margin[3],-z+Xe+this.ctx.prevPageLastElemOffset)[0];var Le=(Ae>je||Ae<Be)&&y.call(this);Le&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ye,ie,null).clip().discardPath()),this.pdf.addImage(D,"JPEG",pe.x,pe.y,pe.w,pe.h,null,null,se),Le&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(D,"JPEG",Ce.x,Ce.y,Ce.w,Ce.h,null,null,se)};var m=function(D,j,V){var W=[];j=j||this.pdf.internal.pageSize.width,V=V||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var re=this.posY+this.ctx.prevPageLastElemOffset;switch(D.type){default:case"mt":case"lt":W.push(Math.floor((D.y+re)/V)+1);break;case"arc":W.push(Math.floor((D.y+re-D.radius)/V)+1),W.push(Math.floor((D.y+re+D.radius)/V)+1);break;case"qct":var te=M(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x,D.y);W.push(Math.floor((te.y+re)/V)+1),W.push(Math.floor((te.y+te.h+re)/V)+1);break;case"bct":var Y=F(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x2,D.y2,D.x,D.y);W.push(Math.floor((Y.y+re)/V)+1),W.push(Math.floor((Y.y+Y.h+re)/V)+1);break;case"rect":W.push(Math.floor((D.y+re)/V)+1),W.push(Math.floor((D.y+D.h+re)/V)+1)}for(var de=0;de<W.length;de+=1)for(;this.pdf.internal.getNumberOfPages()<W[de];)b.call(this);return W},b=function(){var D=this.fillStyle,j=this.strokeStyle,V=this.font,W=this.lineCap,re=this.lineWidth,te=this.lineJoin;this.pdf.addPage(),this.fillStyle=D,this.strokeStyle=j,this.font=V,this.lineCap=W,this.lineWidth=re,this.lineJoin=te},v=function(D,j,V){for(var W=0;W<D.length;W++)switch(D[W].type){case"bct":D[W].x2+=j,D[W].y2+=V;case"qct":D[W].x1+=j,D[W].y1+=V;case"mt":case"lt":case"arc":default:D[W].x+=j,D[W].y+=V}return D},_=function(D){return D.sort(function(j,V){return j-V})},E=function(D,j){for(var V,W,re=this.fillStyle,te=this.strokeStyle,Y=this.lineCap,de=this.lineWidth,ye=Math.abs(de*this.ctx.transform.scaleX),Se=this.lineJoin,Te=JSON.parse(JSON.stringify(this.path)),ke=JSON.parse(JSON.stringify(this.path)),K=[],ge=0;ge<ke.length;ge++)if(ke[ge].x!==void 0)for(var ne=m.call(this,ke[ge]),le=0;le<ne.length;le+=1)K.indexOf(ne[le])===-1&&K.push(ne[le]);for(var se=0;se<K.length;se++)for(;this.pdf.internal.getNumberOfPages()<K[se];)b.call(this);if(_(K),this.autoPaging)for(var fe=K[0],Ce=K[K.length-1],Ie=fe;Ie<Ce+1;Ie++){this.pdf.setPage(Ie),this.fillStyle=re,this.strokeStyle=te,this.lineCap=Y,this.lineWidth=ye,this.lineJoin=Se;var xe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],$e=Ie===1?this.posY+this.margin[0]:this.margin[0],je=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Be=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ae=Ie===1?0:je+(Ie-2)*Be;if(this.ctx.clip_path.length!==0){var Ye=this.path;V=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(V,this.posX+this.margin[3],-Ae+$e+this.ctx.prevPageLastElemOffset),w.call(this,D,!0),this.path=Ye}if(W=JSON.parse(JSON.stringify(Te)),this.path=v(W,this.posX+this.margin[3],-Ae+$e+this.ctx.prevPageLastElemOffset),j===!1||Ie===0){var Xe=(Ie>fe||Ie<Ce)&&y.call(this);Xe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],xe,Be,null).clip().discardPath()),w.call(this,D,j),Xe&&this.pdf.restoreGraphicsState()}this.lineWidth=de}else this.lineWidth=ye,w.call(this,D,j),this.lineWidth=de;this.path=Te},w=function(D,j){if((D!=="stroke"||j||!g.call(this))&&(D==="stroke"||j||!f.call(this))){for(var V,W,re=[],te=this.path,Y=0;Y<te.length;Y++){var de=te[Y];switch(de.type){case"begin":re.push({begin:!0});break;case"close":re.push({close:!0});break;case"mt":re.push({start:de,deltas:[],abs:[]});break;case"lt":var ye=re.length;if(te[Y-1]&&!isNaN(te[Y-1].x)&&(V=[de.x-te[Y-1].x,de.y-te[Y-1].y],ye>0)){for(;ye>=0;ye--)if(re[ye-1].close!==!0&&re[ye-1].begin!==!0){re[ye-1].deltas.push(V),re[ye-1].abs.push(de);break}}break;case"bct":V=[de.x1-te[Y-1].x,de.y1-te[Y-1].y,de.x2-te[Y-1].x,de.y2-te[Y-1].y,de.x-te[Y-1].x,de.y-te[Y-1].y],re[re.length-1].deltas.push(V);break;case"qct":var Se=te[Y-1].x+2/3*(de.x1-te[Y-1].x),Te=te[Y-1].y+2/3*(de.y1-te[Y-1].y),ke=de.x+2/3*(de.x1-de.x),K=de.y+2/3*(de.y1-de.y),ge=de.x,ne=de.y;V=[Se-te[Y-1].x,Te-te[Y-1].y,ke-te[Y-1].x,K-te[Y-1].y,ge-te[Y-1].x,ne-te[Y-1].y],re[re.length-1].deltas.push(V);break;case"arc":re.push({deltas:[],abs:[],arc:!0}),Array.isArray(re[re.length-1].abs)&&re[re.length-1].abs.push(de)}}W=j?null:D==="stroke"?"stroke":"fill";for(var le=!1,se=0;se<re.length;se++)if(re[se].arc)for(var fe=re[se].abs,Ce=0;Ce<fe.length;Ce++){var Ie=fe[Ce];Ie.type==="arc"?x.call(this,Ie.x,Ie.y,Ie.radius,Ie.startAngle,Ie.endAngle,Ie.counterclockwise,void 0,j,!le):O.call(this,Ie.x,Ie.y),le=!0}else if(re[se].close===!0)this.pdf.internal.out("h"),le=!1;else if(re[se].begin!==!0){var xe=re[se].start.x,$e=re[se].start.y;P.call(this,re[se].deltas,xe,$e),le=!0}W&&I.call(this,W),j&&R.call(this)}},S=function(D){var j=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,V=j*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return D-V;case"top":return D+j-V;case"hanging":return D+j-2*V;case"middle":return D+j/2-V;case"ideographic":return D;case"alphabetic":default:return D}},k=function(D){return D+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var D=function(){};return D.colorStops=[],D.addColorStop=function(j,V){this.colorStops.push([j,V])},D.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},D.isCanvasGradient=!0,D},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var x=function(D,j,V,W,re,te,Y,de,ye){for(var Se=ee.call(this,V,W,re,te),Te=0;Te<Se.length;Te++){var ke=Se[Te];Te===0&&(ye?C.call(this,ke.x1+D,ke.y1+j):O.call(this,ke.x1+D,ke.y1+j)),$.call(this,D,j,ke.x2,ke.y2,ke.x3,ke.y3,ke.x4,ke.y4)}de?R.call(this):I.call(this,Y)},I=function(D){switch(D){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},R=function(){this.pdf.clip(),this.pdf.discardPath()},C=function(D,j){this.pdf.internal.out(n(D)+" "+r(j)+" m")},N=function(D){var j;switch(D.align){case"right":case"end":j="right";break;case"center":j="center";break;case"left":case"start":default:j="left"}var V=this.pdf.getTextDimensions(D.text),W=S.call(this,D.y),re=k.call(this,W)-V.h,te=this.ctx.transform.applyToPoint(new o(D.x,W)),Y=this.ctx.transform.decompose(),de=new l;de=(de=(de=de.multiply(Y.translate)).multiply(Y.skew)).multiply(Y.scale);for(var ye,Se,Te,ke=this.ctx.transform.applyToRectangle(new a(D.x,W,V.w,V.h)),K=de.applyToRectangle(new a(D.x,re,V.w,V.h)),ge=m.call(this,K),ne=[],le=0;le<ge.length;le+=1)ne.indexOf(ge[le])===-1&&ne.push(ge[le]);if(_(ne),this.autoPaging)for(var se=ne[0],fe=ne[ne.length-1],Ce=se;Ce<fe+1;Ce++){this.pdf.setPage(Ce);var Ie=Ce===1?this.posY+this.margin[0]:this.margin[0],xe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],$e=this.pdf.internal.pageSize.height-this.margin[2],je=$e-this.margin[0],Be=this.pdf.internal.pageSize.width-this.margin[1],Ae=Be-this.margin[3],Ye=Ce===1?0:xe+(Ce-2)*je;if(this.ctx.clip_path.length!==0){var Xe=this.path;ye=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(ye,this.posX+this.margin[3],-1*Ye+Ie),w.call(this,"fill",!0),this.path=Xe}var tt=v([JSON.parse(JSON.stringify(K))],this.posX+this.margin[3],-Ye+Ie+this.ctx.prevPageLastElemOffset)[0];D.scale>=.01&&(Se=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Se*D.scale),Te=this.lineWidth,this.lineWidth=Te*D.scale);var ie=this.autoPaging!=="text";if(ie||tt.y+tt.h<=$e){if(ie||tt.y>=Ie&&tt.x<=Be){var z=ie?D.text:this.pdf.splitTextToSize(D.text,D.maxWidth||Be-tt.x)[0],X=v([JSON.parse(JSON.stringify(ke))],this.posX+this.margin[3],-Ye+Ie+this.ctx.prevPageLastElemOffset)[0],pe=ie&&(Ce>se||Ce<fe)&&y.call(this);pe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ae,je,null).clip().discardPath()),this.pdf.text(z,X.x,X.y,{angle:D.angle,align:j,renderingMode:D.renderingMode}),pe&&this.pdf.restoreGraphicsState()}}else tt.y<$e&&(this.ctx.prevPageLastElemOffset+=$e-tt.y);D.scale>=.01&&(this.pdf.setFontSize(Se),this.lineWidth=Te)}else D.scale>=.01&&(Se=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Se*D.scale),Te=this.lineWidth,this.lineWidth=Te*D.scale),this.pdf.text(D.text,te.x+this.posX,te.y+this.posY,{angle:D.angle,align:j,renderingMode:D.renderingMode,maxWidth:D.maxWidth}),D.scale>=.01&&(this.pdf.setFontSize(Se),this.lineWidth=Te)},O=function(D,j,V,W){V=V||0,W=W||0,this.pdf.internal.out(n(D+V)+" "+r(j+W)+" l")},P=function(D,j,V){return this.pdf.lines(D,j,V,null,null)},$=function(D,j,V,W,re,te,Y,de){this.pdf.internal.out([e(s(V+D)),e(i(W+j)),e(s(re+D)),e(i(te+j)),e(s(Y+D)),e(i(de+j)),"c"].join(" "))},ee=function(D,j,V,W){for(var re=2*Math.PI,te=Math.PI/2;j>V;)j-=re;var Y=Math.abs(V-j);Y<re&&W&&(Y=re-Y);for(var de=[],ye=W?-1:1,Se=j;Y>1e-5;){var Te=Se+ye*Math.min(Y,te);de.push(J.call(this,D,Se,Te)),Y-=Math.abs(Te-Se),Se=Te}return de},J=function(D,j,V){var W=(V-j)/2,re=D*Math.cos(W),te=D*Math.sin(W),Y=re,de=-te,ye=Y*Y+de*de,Se=ye+Y*re+de*te,Te=4/3*(Math.sqrt(2*ye*Se)-Se)/(Y*te-de*re),ke=Y-Te*de,K=de+Te*Y,ge=ke,ne=-K,le=W+j,se=Math.cos(le),fe=Math.sin(le);return{x1:D*Math.cos(j),y1:D*Math.sin(j),x2:ke*se-K*fe,y2:ke*fe+K*se,x3:ge*se-ne*fe,y3:ge*fe+ne*se,x4:D*Math.cos(V),y4:D*Math.sin(V)}},Z=function(D){return 180*D/Math.PI},M=function(D,j,V,W,re,te){var Y=D+.5*(V-D),de=j+.5*(W-j),ye=re+.5*(V-re),Se=te+.5*(W-te),Te=Math.min(D,re,Y,ye),ke=Math.max(D,re,Y,ye),K=Math.min(j,te,de,Se),ge=Math.max(j,te,de,Se);return new a(Te,K,ke-Te,ge-K)},F=function(D,j,V,W,re,te,Y,de){var ye,Se,Te,ke,K,ge,ne,le,se,fe,Ce,Ie,xe,$e,je=V-D,Be=W-j,Ae=re-V,Ye=te-W,Xe=Y-re,tt=de-te;for(Se=0;Se<41;Se++)se=(ne=(Te=D+(ye=Se/40)*je)+ye*((K=V+ye*Ae)-Te))+ye*(K+ye*(re+ye*Xe-K)-ne),fe=(le=(ke=j+ye*Be)+ye*((ge=W+ye*Ye)-ke))+ye*(ge+ye*(te+ye*tt-ge)-le),Se==0?(Ce=se,Ie=fe,xe=se,$e=fe):(Ce=Math.min(Ce,se),Ie=Math.min(Ie,fe),xe=Math.max(xe,se),$e=Math.max($e,fe));return new a(Math.round(Ce),Math.round(Ie),Math.round(xe-Ce),Math.round($e-Ie))},G=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var D,j,V=(D=this.ctx.lineDash,j=this.ctx.lineDashOffset,JSON.stringify({lineDash:D,lineDashOffset:j}));this.prevLineDash!==V&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=V)}}})(jt.API),function(t){var e=function(i){var o,a,l,c,u,d,h,f,g,y;for(a=[],l=0,c=(i+=o="\0\0\0\0".slice(i.length%4||4)).length;c>l;l+=4)(u=(i.charCodeAt(l)<<24)+(i.charCodeAt(l+1)<<16)+(i.charCodeAt(l+2)<<8)+i.charCodeAt(l+3))!==0?(d=(u=((u=((u=((u=(u-(y=u%85))/85)-(g=u%85))/85)-(f=u%85))/85)-(h=u%85))/85)%85,a.push(d+33,h+33,f+33,g+33,y+33)):a.push(122);return function(m,b){for(var v=b;v>0;v--)m.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},n=function(i){var o,a,l,c,u,d=String,h="length",f=255,g="charCodeAt",y="slice",m="replace";for(i[y](-2),i=i[y](0,-2)[m](/\s/g,"")[m]("z","!!!!!"),l=[],c=0,u=(i+=o="uuuuu"[y](i[h]%5||5))[h];u>c;c+=5)a=52200625*(i[g](c)-33)+614125*(i[g](c+1)-33)+7225*(i[g](c+2)-33)+85*(i[g](c+3)-33)+(i[g](c+4)-33),l.push(f&a>>24,f&a>>16,f&a>>8,f&a);return function(b,v){for(var _=v;_>0;_--)b.pop()}(l,o[h]),d.fromCharCode.apply(d,l)},r=function(i){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),o.test(i)===!1)return"";for(var a="",l=0;l<i.length;l+=2)a+=String.fromCharCode("0x"+(i[l]+i[l+1]));return a},s=function(i){for(var o=new Uint8Array(i.length),a=i.length;a--;)o[a]=i.charCodeAt(a);return i=(o=VP(o)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};t.processDataByFilters=function(i,o){var a=0,l=i||"",c=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=s(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(jt.API),function(t){t.loadFile=function(e,n,r){return function(s,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,c,u){var d=new XMLHttpRequest,h=0,f=function(g){var y=g.length,m=[],b=String.fromCharCode;for(h=0;h<y;h+=1)m.push(b(255&g.charCodeAt(h)));return m.join("")};if(d.open("GET",l,!c),d.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(d.onload=function(){d.status===200?u(f(this.responseText)):u(void 0)}),d.send(null),c&&d.status===200)return f(d.responseText)}(s,i,o)}catch{}return a}(e,n,r)},t.loadImageFile=t.loadFile}(jt.API),function(t){function e(){return(Ut.html2canvas?Promise.resolve(Ut.html2canvas):ve(()=>import("./html2canvas.esm-BfxBtG_O.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(Ut.DOMPurify?Promise.resolve(Ut.DOMPurify):ve(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var a=Bn(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},s=function(o,a){var l=document.createElement(o);for(var c in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[c]=a.style[c];return l},i=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),c=o.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,o,1,[o])).set(a)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(o,a){return o.__proto__=a||i.prototype,o},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(l){return this.set({src:s("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},i.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(c,u){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),h=c.firstChild;h;h=h.nextSibling)u!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||d.appendChild(l(h,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=this.opt.jsPDF,c=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,d=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete d.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var h=0;h<c.length;++h){var f=c[h],g=f.src.find(function(y){return y.format==="truetype"});g&&l.addFont(g.url,f.ref.name,f.ref.style)}return d.windowHeight=d.windowHeight||0,d.windowHeight=d.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):d.windowHeight,l.context2d.save(!0),a(this.prop.container,d)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},i.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},i.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},i.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(o){if(r(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in i.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},i.prototype.get=function(o,a){return this.then(function(){var l=o in i.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},i.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},i.prototype.setPageSize=function(o){function a(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(o=o||jt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},i.prototype.setProgress=function(o,a,l,c){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(o,a,l,c){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},i.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(c,u){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(d){return l.updateProgress(null,c),d}).then(c,u).then(function(d){return l.updateProgress(1),d})})},i.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),u=l.call(c,o,a);return i.convert(u,this.__proto__)},i.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},i.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},i.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return i.convert(a,this)},i.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},i.prototype.error=function(o){return this.then(function(){throw new Error(o)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,jt.getPageSize=function(o,a,l){if(Bn(o)==="object"){var c=o;o=c.orientation,a=c.unit||a,l=c.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var u,d=(""+l).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+a}var f,g=0,y=0;if(h.hasOwnProperty(d))g=h[d][1]/u,y=h[d][0]/u;else try{g=l[1],y=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",y>g&&(f=y,y=g,g=f);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",g>y&&(f=y,y=g,g=f)}return{width:y,height:g,unit:a,k:u,orientation:o}},t.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(XP):null;var l=new i(a);return a.worker?l:l.from(o).doCallback()}}(jt.API),jt.API.addJS=function(t){return G7=t,this.internal.events.subscribe("postPutResources",function(){Dx=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Dx+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),W7=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+G7+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Dx!==void 0&&W7!==void 0&&this.internal.out("/Names <</JavaScript "+Dx+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=n.outline.render().split(/\r\n/),i=0;i<s.length;i++){var o=s[i],a=r.exec(o);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,u=[];for(i=0;i<c;i++){var d=n.internal.newObject();u.push(d);var h=n.internal.getPageInfo(i+1);n.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var f=n.internal.newObject();for(n.internal.write("<< /Names [ "),i=0;i<u.length;i++)n.internal.write("(page_"+(i+1)+")"+u[i]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+f+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,s,i){var o={title:s,options:i,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var s=0;s<r.children.length;s++)this.genIds_r(r.children[s])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<r.children.length;i++){var o=r.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),i>0&&this.line("/Prev "+this.makeRef(r.children[i-1])),i<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,s){for(var i=0;i<s.children.length;i++)r.count++,this.count_r(r,s.children[i]);return r.count}}])}(jt.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,s,i,o,a){var l,c=this.decode.DCT_DECODE,u=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(d){for(var h,f=256*d.charCodeAt(4)+d.charCodeAt(5),g=d.length,y={width:0,height:0,numcomponents:1},m=4;m<g;m+=2){if(m+=f,e.indexOf(d.charCodeAt(m+1))!==-1){h=256*d.charCodeAt(m+5)+d.charCodeAt(m+6),y={width:256*d.charCodeAt(m+7)+d.charCodeAt(m+8),height:h,numcomponents:d.charCodeAt(m+9)};break}f=256*d.charCodeAt(m+2)+d.charCodeAt(m+3)}return y}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}u={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:r,alias:s}}return u}}(jt.API);var jp,Mx,q7,K7,Y7,dFe=function(){var t,e,n;function r(i){var o,a,l,c,u,d,h,f,g,y,m,b,v,_;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},d=null;;){switch(o=this.readUInt32(),g=function(){var E,w;for(w=[],E=0;E<4;++E)w.push(String.fromCharCode(this.data[this.pos++]));return w}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":d&&this.animation.frames.push(d),this.pos+=4,d={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),c=this.readUInt16()||100,d.delay=1e3*u/c,d.disposeOp=this.data[this.pos++],d.blendOp=this.data[this.pos++],d.data=[];break;case"IDAT":case"fdAT":for(g==="fdAT"&&(this.pos+=4,o-=4),i=d?.data||this.imgData,b=0;0<=o?b<o:b>o;0<=o?++b:--b)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((y=l-this.transparency.indexed.length)>0)for(v=0;0<=y?v<y:v>y;0<=y?++v:--v)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":h=(m=this.read(o)).indexOf(0),f=String.fromCharCode.apply(String,m.slice(0,h)),this.text[f]=String.fromCharCode.apply(String,m.slice(h+1));break;case"IEND":return d&&this.animation.frames.push(d),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(_=this.colorType)===4||_===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(i){var o,a;for(a=[],o=0;0<=i?o<i:o>i;0<=i?++o:--o)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(i){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,c=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function u(d,h,f,g){var y,m,b,v,_,E,w,S,k,x,I,R,C,N,O,P,$,ee,J,Z,M,F=Math.ceil((c.width-d)/f),G=Math.ceil((c.height-h)/g),D=c.width==F&&c.height==G;for(N=o*F,R=D?a:new Uint8Array(N*G),E=i.length,C=0,m=0;C<G&&l<E;){switch(i[l++]){case 0:for(v=$=0;$<N;v=$+=1)R[m++]=i[l++];break;case 1:for(v=ee=0;ee<N;v=ee+=1)y=i[l++],_=v<o?0:R[m-o],R[m++]=(y+_)%256;break;case 2:for(v=J=0;J<N;v=J+=1)y=i[l++],b=(v-v%o)/o,O=C&&R[(C-1)*N+b*o+v%o],R[m++]=(O+y)%256;break;case 3:for(v=Z=0;Z<N;v=Z+=1)y=i[l++],b=(v-v%o)/o,_=v<o?0:R[m-o],O=C&&R[(C-1)*N+b*o+v%o],R[m++]=(y+Math.floor((_+O)/2))%256;break;case 4:for(v=M=0;M<N;v=M+=1)y=i[l++],b=(v-v%o)/o,_=v<o?0:R[m-o],C===0?O=P=0:(O=R[(C-1)*N+b*o+v%o],P=b&&R[(C-1)*N+(b-1)*o+v%o]),w=_+O-P,S=Math.abs(w-_),x=Math.abs(w-O),I=Math.abs(w-P),k=S<=x&&S<=I?_:x<=I?O:P,R[m++]=(y+k)%256;break;default:throw new Error("Invalid filter algorithm: "+i[l-1])}if(!D){var j=((h+C*g)*c.width+d)*o,V=C*N;for(v=0;v<F;v+=1){for(var W=0;W<o;W+=1)a[j++]=R[V++];j+=(f-1)*o}}C++}}return i=zje(i),c.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),a},r.prototype.decodePalette=function(){var i,o,a,l,c,u,d,h,f;for(a=this.palette,u=this.transparency.indexed||[],c=new Uint8Array((u.length||0)+a.length),l=0,i=0,o=d=0,h=a.length;d<h;o=d+=3)c[l++]=a[o],c[l++]=a[o+1],c[l++]=a[o+2],c[l++]=(f=u[i++])!=null?f:255;return c},r.prototype.copyToImageData=function(i,o){var a,l,c,u,d,h,f,g,y,m,b;if(l=this.colors,y=null,a=this.hasAlphaChannel,this.palette.length&&(y=(b=this._decodedPalette)!=null?b:this._decodedPalette=this.decodePalette(),l=4,a=!0),g=(c=i.data||i).length,d=y||o,u=h=0,l===1)for(;u<g;)f=y?4*o[u/4]:h,m=d[f++],c[u++]=m,c[u++]=m,c[u++]=m,c[u++]=a?d[f++]:255,h=f;else for(;u<g;)f=y?4*o[u/4]:h,c[u++]=d[f++],c[u++]=d[f++],c[u++]=d[f++],c[u++]=a?d[f++]:255,h=f},r.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var s=function(){if(Object.prototype.toString.call(Ut)==="[object Window]"){try{e=Ut.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return s(),t=function(i){var o;if(s()===!0)return n.width=i.width,n.height=i.height,n.clearRect(0,0,i.width,i.height),n.putImageData(i,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(i){var o,a,l,c,u,d,h,f;if(this.animation){for(f=[],a=u=0,d=(h=this.animation.frames).length;u<d;a=++u)o=h[a],l=i.createImageData(o.width,o.height),c=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,c),o.imageData=l,f.push(o.image=t(l));return f}},r.prototype.renderFrame=function(i,o){var a,l,c;return a=(l=this.animation.frames)[o],c=l[o-1],o===0&&i.clearRect(0,0,this.width,this.height),c?.disposeOp===1?i.clearRect(c.xOffset,c.yOffset,c.width,c.height):c?.disposeOp===2&&i.putImageData(c.imageData,c.xOffset,c.yOffset),a.blendOp===0&&i.clearRect(a.xOffset,a.yOffset,a.width,a.height),i.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(i){var o,a,l,c,u,d,h=this;return a=0,d=this.animation,c=d.numFrames,l=d.frames,u=d.numPlays,(o=function(){var f,g;if(f=a++%c,g=l[f],h.renderFrame(i,f),c>1&&a/c<u)return h.animation._timeout=setTimeout(o,g.delay)})()},r.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},r.prototype.render=function(i){var o,a;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,o=i.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function hFe(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,s=t[e++],i=s>>7,o=1<<(7&s)+1;t[e++],t[e++];var a=null,l=null;i&&(a=e,l=o,e+=3*o);var c=!0,u=[],d=0,h=null,f=0,g=null;for(this.width=n,this.height=r;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,g=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((C=t[e++])>=0))throw Error("Invalid block size");if(C===0)break;e+=C}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var y=t[e++];d=t[e++]|t[e++]<<8,h=t[e++],!(1&y)&&(h=null),f=y>>2&7,e++;break;case 254:for(;;){if(!((C=t[e++])>=0))throw Error("Invalid block size");if(C===0)break;e+=C}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var m=t[e++]|t[e++]<<8,b=t[e++]|t[e++]<<8,v=t[e++]|t[e++]<<8,_=t[e++]|t[e++]<<8,E=t[e++],w=E>>6&1,S=1<<(7&E)+1,k=a,x=l,I=!1;E>>7&&(I=!0,k=e,x=S,e+=3*S);var R=e;for(e++;;){var C;if(!((C=t[e++])>=0))throw Error("Invalid block size");if(C===0)break;e+=C}u.push({x:m,y:b,width:v,height:_,has_local_palette:I,palette_offset:k,palette_size:x,data_offset:R,data_length:e-R,transparent_index:h,interlaced:!!w,delay:d,disposal:f});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return g},this.frameInfo=function(N){if(N<0||N>=u.length)throw new Error("Frame index out of range.");return u[N]},this.decodeAndBlitFrameBGRA=function(N,O){var P=this.frameInfo(N),$=P.width*P.height,ee=new Uint8Array($);X7(t,P.data_offset,ee,$);var J=P.palette_offset,Z=P.transparent_index;Z===null&&(Z=256);var M=P.width,F=n-M,G=M,D=4*(P.y*n+P.x),j=4*((P.y+P.height)*n+P.x),V=D,W=4*F;P.interlaced===!0&&(W+=4*n*7);for(var re=8,te=0,Y=ee.length;te<Y;++te){var de=ee[te];if(G===0&&(G=M,(V+=W)>=j&&(W=4*F+4*n*(re-1),V=D+(M+F)*(re<<1),re>>=1)),de===Z)V+=4;else{var ye=t[J+3*de],Se=t[J+3*de+1],Te=t[J+3*de+2];O[V++]=Te,O[V++]=Se,O[V++]=ye,O[V++]=255}--G}},this.decodeAndBlitFrameRGBA=function(N,O){var P=this.frameInfo(N),$=P.width*P.height,ee=new Uint8Array($);X7(t,P.data_offset,ee,$);var J=P.palette_offset,Z=P.transparent_index;Z===null&&(Z=256);var M=P.width,F=n-M,G=M,D=4*(P.y*n+P.x),j=4*((P.y+P.height)*n+P.x),V=D,W=4*F;P.interlaced===!0&&(W+=4*n*7);for(var re=8,te=0,Y=ee.length;te<Y;++te){var de=ee[te];if(G===0&&(G=M,(V+=W)>=j&&(W=4*F+4*n*(re-1),V=D+(M+F)*(re<<1),re>>=1)),de===Z)V+=4;else{var ye=t[J+3*de],Se=t[J+3*de+1],Te=t[J+3*de+2];O[V++]=ye,O[V++]=Se,O[V++]=Te,O[V++]=255}--G}}}function X7(t,e,n,r){for(var s=t[e++],i=1<<s,o=i+1,a=o+1,l=s+1,c=(1<<l)-1,u=0,d=0,h=0,f=t[e++],g=new Int32Array(4096),y=null;;){for(;u<16&&f!==0;)d|=t[e++]<<u,u+=8,f===1?f=t[e++]:--f;if(u<l)break;var m=d&c;if(d>>=l,u-=l,m!==i){if(m===o)break;for(var b=m<a?m:y,v=0,_=b;_>i;)_=g[_]>>8,++v;var E=_;if(h+v+(b!==m?1:0)>r)return void Wn.log("Warning, gif stream longer than expected.");n[h++]=E;var w=h+=v;for(b!==m&&(n[h++]=E),_=b;v--;)_=g[_],n[--w]=255&_,_>>=8;y!==null&&a<4096&&(g[a++]=y<<8|E,a>=c+1&&l<12&&(++l,c=c<<1|1)),y=m}else a=o+1,c=(1<<(l=s+1))-1,y=null}return h!==r&&Wn.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function m5(t){var e,n,r,s,i,o=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(65535),h=new Array(65535),f=new Array(64),g=new Array(64),y=[],m=0,b=7,v=new Array(64),_=new Array(64),E=new Array(64),w=new Array(256),S=new Array(2048),k=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],x=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],R=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],C=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],N=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],O=[0,1,2,3,4,5,6,7,8,9,10,11],P=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],$=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ee(D,j){for(var V=0,W=0,re=new Array,te=1;te<=16;te++){for(var Y=1;Y<=D[te];Y++)re[j[W]]=[],re[j[W]][0]=V,re[j[W]][1]=te,W++,V++;V*=2}return re}function J(D){for(var j=D[0],V=D[1]-1;V>=0;)j&1<<V&&(m|=1<<b),V--,--b<0&&(m==255?(Z(255),Z(0)):Z(m),b=7,m=0)}function Z(D){y.push(D)}function M(D){Z(D>>8&255),Z(255&D)}function F(D,j,V,W,re){for(var te,Y=re[0],de=re[240],ye=function(fe,Ce){var Ie,xe,$e,je,Be,Ae,Ye,Xe,tt,ie,z=0;for(tt=0;tt<8;++tt){Ie=fe[z],xe=fe[z+1],$e=fe[z+2],je=fe[z+3],Be=fe[z+4],Ae=fe[z+5],Ye=fe[z+6];var X=Ie+(Xe=fe[z+7]),pe=Ie-Xe,Le=xe+Ye,Ue=xe-Ye,We=$e+Ae,Rt=$e-Ae,At=je+Be,fn=je-Be,Ht=X+At,Kt=X-At,Ks=Le+We,Hn=Le-We;fe[z]=Ht+Ks,fe[z+4]=Ht-Ks;var Vt=.707106781*(Hn+Kt);fe[z+2]=Kt+Vt,fe[z+6]=Kt-Vt;var Ln=.382683433*((Ht=fn+Rt)-(Hn=Ue+pe)),Hd=.5411961*Ht+Ln,us=1.306562965*Hn+Ln,$a=.707106781*(Ks=Rt+Ue),Ha=pe+$a,Ft=pe-$a;fe[z+5]=Ft+Hd,fe[z+3]=Ft-Hd,fe[z+1]=Ha+us,fe[z+7]=Ha-us,z+=8}for(z=0,tt=0;tt<8;++tt){Ie=fe[z],xe=fe[z+8],$e=fe[z+16],je=fe[z+24],Be=fe[z+32],Ae=fe[z+40],Ye=fe[z+48];var ea=Ie+(Xe=fe[z+56]),za=Ie-Xe,gi=xe+Ye,Ur=xe-Ye,Rr=$e+Ae,ji=$e-Ae,Zf=je+Be,oc=je-Be,ta=ea+Zf,na=ea-Zf,ra=gi+Rr,Va=gi-Rr;fe[z]=ta+ra,fe[z+32]=ta-ra;var ho=.707106781*(Va+na);fe[z+16]=na+ho,fe[z+48]=na-ho;var Wa=.382683433*((ta=oc+ji)-(Va=Ur+za)),zd=.5411961*ta+Wa,Qf=1.306562965*Va+Wa,ep=.707106781*(ra=ji+Ur),tp=za+ep,np=za-ep;fe[z+40]=np+zd,fe[z+24]=np-zd,fe[z+8]=tp+Qf,fe[z+56]=tp-Qf,z++}for(tt=0;tt<64;++tt)ie=fe[tt]*Ce[tt],f[tt]=ie>0?ie+.5|0:ie-.5|0;return f}(D,j),Se=0;Se<64;++Se)g[k[Se]]=ye[Se];var Te=g[0]-V;V=g[0],Te==0?J(W[0]):(J(W[h[te=32767+Te]]),J(d[te]));for(var ke=63;ke>0&&g[ke]==0;)ke--;if(ke==0)return J(Y),V;for(var K,ge=1;ge<=ke;){for(var ne=ge;g[ge]==0&&ge<=ke;)++ge;var le=ge-ne;if(le>=16){K=le>>4;for(var se=1;se<=K;++se)J(de);le&=15}te=32767+g[ge],J(re[(le<<4)+h[te]]),J(d[te]),ge++}return ke!=63&&J(Y),V}function G(D){D=Math.min(Math.max(D,1),100),i!=D&&(function(j){for(var V=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],W=0;W<64;W++){var re=o((V[W]*j+50)/100);re=Math.min(Math.max(re,1),255),a[k[W]]=re}for(var te=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Y=0;Y<64;Y++){var de=o((te[Y]*j+50)/100);de=Math.min(Math.max(de,1),255),l[k[Y]]=de}for(var ye=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Se=0,Te=0;Te<8;Te++)for(var ke=0;ke<8;ke++)c[Se]=1/(a[k[Se]]*ye[Te]*ye[ke]*8),u[Se]=1/(l[k[Se]]*ye[Te]*ye[ke]*8),Se++}(D<50?Math.floor(5e3/D):Math.floor(200-2*D)),i=D)}this.encode=function(D,j){j&&G(j),y=new Array,m=0,b=7,M(65496),M(65504),M(16),Z(74),Z(70),Z(73),Z(70),Z(0),Z(1),Z(1),Z(0),M(1),M(1),Z(0),Z(0),function(){M(65499),M(132),Z(0);for(var xe=0;xe<64;xe++)Z(a[xe]);Z(1);for(var $e=0;$e<64;$e++)Z(l[$e])}(),function(xe,$e){M(65472),M(17),Z(8),M($e),M(xe),Z(3),Z(1),Z(17),Z(0),Z(2),Z(17),Z(1),Z(3),Z(17),Z(1)}(D.width,D.height),function(){M(65476),M(418),Z(0);for(var xe=0;xe<16;xe++)Z(x[xe+1]);for(var $e=0;$e<=11;$e++)Z(I[$e]);Z(16);for(var je=0;je<16;je++)Z(R[je+1]);for(var Be=0;Be<=161;Be++)Z(C[Be]);Z(1);for(var Ae=0;Ae<16;Ae++)Z(N[Ae+1]);for(var Ye=0;Ye<=11;Ye++)Z(O[Ye]);Z(17);for(var Xe=0;Xe<16;Xe++)Z(P[Xe+1]);for(var tt=0;tt<=161;tt++)Z($[tt])}(),M(65498),M(12),Z(3),Z(1),Z(0),Z(2),Z(17),Z(3),Z(17),Z(0),Z(63),Z(0);var V=0,W=0,re=0;m=0,b=7,this.encode.displayName="_encode_";for(var te,Y,de,ye,Se,Te,ke,K,ge,ne=D.data,le=D.width,se=D.height,fe=4*le,Ce=0;Ce<se;){for(te=0;te<fe;){for(Se=fe*Ce+te,ke=-1,K=0,ge=0;ge<64;ge++)Te=Se+(K=ge>>3)*fe+(ke=4*(7&ge)),Ce+K>=se&&(Te-=fe*(Ce+1+K-se)),te+ke>=fe&&(Te-=te+ke-fe+4),Y=ne[Te++],de=ne[Te++],ye=ne[Te++],v[ge]=(S[Y]+S[de+256>>0]+S[ye+512>>0]>>16)-128,_[ge]=(S[Y+768>>0]+S[de+1024>>0]+S[ye+1280>>0]>>16)-128,E[ge]=(S[Y+1280>>0]+S[de+1536>>0]+S[ye+1792>>0]>>16)-128;V=F(v,c,V,e,r),W=F(_,u,W,n,s),re=F(E,u,re,n,s),te+=32}Ce+=8}if(b>=0){var Ie=[];Ie[1]=b+1,Ie[0]=(1<<b+1)-1,J(Ie)}return M(65497),new Uint8Array(y)},t=t||50,function(){for(var D=String.fromCharCode,j=0;j<256;j++)w[j]=D(j)}(),e=ee(x,I),n=ee(N,O),r=ee(R,C),s=ee(P,$),function(){for(var D=1,j=2,V=1;V<=15;V++){for(var W=D;W<j;W++)h[32767+W]=V,d[32767+W]=[],d[32767+W][1]=V,d[32767+W][0]=W;for(var re=-(j-1);re<=-D;re++)h[32767+re]=V,d[32767+re]=[],d[32767+re][1]=V,d[32767+re][0]=j-1+re;D<<=1,j<<=1}}(),function(){for(var D=0;D<256;D++)S[D]=19595*D,S[D+256>>0]=38470*D,S[D+512>>0]=7471*D+32768,S[D+768>>0]=-11059*D,S[D+1024>>0]=-21709*D,S[D+1280>>0]=32768*D+8421375,S[D+1536>>0]=-27439*D,S[D+1792>>0]=-5329*D}(),G(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function da(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function J7(t){function e(x){if(!x)throw Error("assert :P")}function n(x,I,R){for(var C=0;4>C;C++)if(x[I+C]!=R.charCodeAt(C))return!0;return!1}function r(x,I,R,C,N){for(var O=0;O<N;O++)x[I+O]=R[C+O]}function s(x,I,R,C){for(var N=0;N<C;N++)x[I+N]=R}function i(x){return new Int32Array(x)}function o(x,I){for(var R=[],C=0;C<x;C++)R.push(new I);return R}function a(x,I){var R=[];return function C(N,O,P){for(var $=P[O],ee=0;ee<$&&(N.push(P.length>O+1?[]:new I),!(P.length<O+1));ee++)C(N[ee],O+1,P)}(R,0,x),R}var l=function(){var x=this;function I(A,L){for(var H=1<<L-1>>>0;A&H;)H>>>=1;return H?(A&H-1)+H:A}function R(A,L,H,Q,oe){e(!(Q%H));do A[L+(Q-=H)]=oe;while(0<Q)}function C(A,L,H,Q,oe){if(e(2328>=oe),512>=oe)var ce=i(512);else if((ce=i(oe))==null)return 0;return function(ue,he,me,_e,Oe,qe){var Ke,Fe,rt=he,Je=1<<me,De=i(16),Me=i(16);for(e(Oe!=0),e(_e!=null),e(ue!=null),e(0<me),Fe=0;Fe<Oe;++Fe){if(15<_e[Fe])return 0;++De[_e[Fe]]}if(De[0]==Oe)return 0;for(Me[1]=0,Ke=1;15>Ke;++Ke){if(De[Ke]>1<<Ke)return 0;Me[Ke+1]=Me[Ke]+De[Ke]}for(Fe=0;Fe<Oe;++Fe)Ke=_e[Fe],0<_e[Fe]&&(qe[Me[Ke]++]=Fe);if(Me[15]==1)return(_e=new N).g=0,_e.value=qe[0],R(ue,rt,1,Je,_e),Je;var et,at=-1,nt=Je-1,wt=0,mt=1,Dt=1,yt=1<<me;for(Fe=0,Ke=1,Oe=2;Ke<=me;++Ke,Oe<<=1){if(mt+=Dt<<=1,0>(Dt-=De[Ke]))return 0;for(;0<De[Ke];--De[Ke])(_e=new N).g=Ke,_e.value=qe[Fe++],R(ue,rt+wt,Oe,yt,_e),wt=I(wt,Ke)}for(Ke=me+1,Oe=2;15>=Ke;++Ke,Oe<<=1){if(mt+=Dt<<=1,0>(Dt-=De[Ke]))return 0;for(;0<De[Ke];--De[Ke]){if(_e=new N,(wt&nt)!=at){for(rt+=yt,et=1<<(at=Ke)-me;15>at&&!(0>=(et-=De[at]));)++at,et<<=1;Je+=yt=1<<(et=at-me),ue[he+(at=wt&nt)].g=et+me,ue[he+at].value=rt-he-at}_e.g=Ke-me,_e.value=qe[Fe++],R(ue,rt+(wt>>me),Oe,yt,_e),wt=I(wt,Ke)}}return mt!=2*Me[15]-1?0:Je}(A,L,H,Q,oe,ce)}function N(){this.value=this.g=0}function O(){this.value=this.g=0}function P(){this.G=o(5,N),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(ds,O)}function $(A,L,H,Q){e(A!=null),e(L!=null),e(2147483648>Q),A.Ca=254,A.I=0,A.b=-8,A.Ka=0,A.oa=L,A.pa=H,A.Jd=L,A.Yc=H+Q,A.Zc=4<=Q?H+Q-4+1:H,te(A)}function ee(A,L){for(var H=0;0<L--;)H|=de(A,128)<<L;return H}function J(A,L){var H=ee(A,L);return Y(A)?-H:H}function Z(A,L,H,Q){var oe,ce=0;for(e(A!=null),e(L!=null),e(4294967288>Q),A.Sb=Q,A.Ra=0,A.u=0,A.h=0,4<Q&&(Q=4),oe=0;oe<Q;++oe)ce+=L[H+oe]<<8*oe;A.Ra=ce,A.bb=Q,A.oa=L,A.pa=H}function M(A){for(;8<=A.u&&A.bb<A.Sb;)A.Ra>>>=8,A.Ra+=A.oa[A.pa+A.bb]<<bp-8>>>0,++A.bb,A.u-=8;V(A)&&(A.h=1,A.u=0)}function F(A,L){if(e(0<=L),!A.h&&L<=gp){var H=j(A)&mp[L];return A.u+=L,M(A),H}return A.h=1,A.u=0}function G(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function D(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function j(A){return A.Ra>>>(A.u&bp-1)>>>0}function V(A){return e(A.bb<=A.Sb),A.h||A.bb==A.Sb&&A.u>bp}function W(A,L){A.u=L,A.h=V(A)}function re(A){A.u>=x0&&(e(A.u>=x0),M(A))}function te(A){e(A!=null&&A.oa!=null),A.pa<A.Zc?(A.I=(A.oa[A.pa++]|A.I<<8)>>>0,A.b+=8):(e(A!=null&&A.oa!=null),A.pa<A.Yc?(A.b+=8,A.I=A.oa[A.pa++]|A.I<<8):A.Ka?A.b=0:(A.I<<=8,A.b+=8,A.Ka=1))}function Y(A){return ee(A,1)}function de(A,L){var H=A.Ca;0>A.b&&te(A);var Q=A.b,oe=H*L>>>8,ce=(A.I>>>Q>oe)+0;for(ce?(H-=oe,A.I-=oe+1<<Q>>>0):H=oe+1,Q=H,oe=0;256<=Q;)oe+=8,Q>>=8;return Q=7^oe+yi[Q],A.b-=Q,A.Ca=(H<<Q)-1,ce}function ye(A,L,H){A[L+0]=H>>24&255,A[L+1]=H>>16&255,A[L+2]=H>>8&255,A[L+3]=H>>0&255}function Se(A,L){return A[L+0]<<0|A[L+1]<<8}function Te(A,L){return Se(A,L)|A[L+2]<<16}function ke(A,L){return Se(A,L)|Se(A,L+2)<<16}function K(A,L){var H=1<<L;return e(A!=null),e(0<L),A.X=i(H),A.X==null?0:(A.Mb=32-L,A.Xa=L,1)}function ge(A,L){e(A!=null),e(L!=null),e(A.Xa==L.Xa),r(L.X,0,A.X,0,1<<L.Xa)}function ne(){this.X=[],this.Xa=this.Mb=0}function le(A,L,H,Q){e(H!=null),e(Q!=null);var oe=H[0],ce=Q[0];return oe==0&&(oe=(A*ce+L/2)/L),ce==0&&(ce=(L*oe+A/2)/A),0>=oe||0>=ce?0:(H[0]=oe,Q[0]=ce,1)}function se(A,L){return A+(1<<L)-1>>>L}function fe(A,L){return((4278255360&A)+(4278255360&L)>>>0&4278255360)+((16711935&A)+(16711935&L)>>>0&16711935)>>>0}function Ce(A,L){x[L]=function(H,Q,oe,ce,ue,he,me){var _e;for(_e=0;_e<ue;++_e){var Oe=x[A](he[me+_e-1],oe,ce+_e);he[me+_e]=fe(H[Q+_e],Oe)}}}function Ie(){this.ud=this.hd=this.jd=0}function xe(A,L){return((4278124286&(A^L))>>>1)+(A&L)>>>0}function $e(A){return 0<=A&&256>A?A:0>A?0:255<A?255:void 0}function je(A,L){return $e(A+(A-L+.5>>1))}function Be(A,L,H){return Math.abs(L-H)-Math.abs(A-H)}function Ae(A,L,H,Q,oe,ce,ue){for(Q=ce[ue-1],H=0;H<oe;++H)ce[ue+H]=Q=fe(A[L+H],Q)}function Ye(A,L,H,Q,oe){var ce;for(ce=0;ce<H;++ce){var ue=A[L+ce],he=ue>>8&255,me=16711935&(me=(me=16711935&ue)+((he<<16)+he));Q[oe+ce]=(4278255360&ue)+me>>>0}}function Xe(A,L){L.jd=A>>0&255,L.hd=A>>8&255,L.ud=A>>16&255}function tt(A,L,H,Q,oe,ce){var ue;for(ue=0;ue<Q;++ue){var he=L[H+ue],me=he>>>8,_e=he,Oe=255&(Oe=(Oe=he>>>16)+((A.jd<<24>>24)*(me<<24>>24)>>>5));_e=255&(_e=(_e=_e+((A.hd<<24>>24)*(me<<24>>24)>>>5))+((A.ud<<24>>24)*(Oe<<24>>24)>>>5)),oe[ce+ue]=(4278255360&he)+(Oe<<16)+_e}}function ie(A,L,H,Q,oe){x[L]=function(ce,ue,he,me,_e,Oe,qe,Ke,Fe){for(me=qe;me<Ke;++me)for(qe=0;qe<Fe;++qe)_e[Oe++]=oe(he[Q(ce[ue++])])},x[A]=function(ce,ue,he,me,_e,Oe,qe){var Ke=8>>ce.b,Fe=ce.Ea,rt=ce.K[0],Je=ce.w;if(8>Ke)for(ce=(1<<ce.b)-1,Je=(1<<Ke)-1;ue<he;++ue){var De,Me=0;for(De=0;De<Fe;++De)De&ce||(Me=Q(me[_e++])),Oe[qe++]=oe(rt[Me&Je]),Me>>=Ke}else x["VP8LMapColor"+H](me,_e,rt,Je,Oe,qe,ue,he,Fe)}}function z(A,L,H,Q,oe){for(H=L+H;L<H;){var ce=A[L++];Q[oe++]=ce>>16&255,Q[oe++]=ce>>8&255,Q[oe++]=ce>>0&255}}function X(A,L,H,Q,oe){for(H=L+H;L<H;){var ce=A[L++];Q[oe++]=ce>>16&255,Q[oe++]=ce>>8&255,Q[oe++]=ce>>0&255,Q[oe++]=ce>>24&255}}function pe(A,L,H,Q,oe){for(H=L+H;L<H;){var ce=(ue=A[L++])>>16&240|ue>>12&15,ue=ue>>0&240|ue>>28&15;Q[oe++]=ce,Q[oe++]=ue}}function Le(A,L,H,Q,oe){for(H=L+H;L<H;){var ce=(ue=A[L++])>>16&248|ue>>13&7,ue=ue>>5&224|ue>>3&31;Q[oe++]=ce,Q[oe++]=ue}}function Ue(A,L,H,Q,oe){for(H=L+H;L<H;){var ce=A[L++];Q[oe++]=ce>>0&255,Q[oe++]=ce>>8&255,Q[oe++]=ce>>16&255}}function We(A,L,H,Q,oe,ce){if(ce==0)for(H=L+H;L<H;)ye(Q,((ce=A[L++])[0]>>24|ce[1]>>8&65280|ce[2]<<8&16711680|ce[3]<<24)>>>0),oe+=32;else r(Q,oe,A,L,H)}function Rt(A,L){x[L][0]=x[A+"0"],x[L][1]=x[A+"1"],x[L][2]=x[A+"2"],x[L][3]=x[A+"3"],x[L][4]=x[A+"4"],x[L][5]=x[A+"5"],x[L][6]=x[A+"6"],x[L][7]=x[A+"7"],x[L][8]=x[A+"8"],x[L][9]=x[A+"9"],x[L][10]=x[A+"10"],x[L][11]=x[A+"11"],x[L][12]=x[A+"12"],x[L][13]=x[A+"13"],x[L][14]=x[A+"0"],x[L][15]=x[A+"0"]}function At(A){return A==LA||A==OA||A==F_||A==DA}function fn(){this.eb=[],this.size=this.A=this.fb=0}function Ht(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Kt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new fn,this.f.kb=new Ht,this.sd=null}function Ks(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Hn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Vt(A){return alert("todo:WebPSamplerProcessPlane"),A.T}function Ln(A,L){var H=A.T,Q=L.ba.f.RGBA,oe=Q.eb,ce=Q.fb+A.ka*Q.A,ue=yo[L.ba.S],he=A.y,me=A.O,_e=A.f,Oe=A.N,qe=A.ea,Ke=A.W,Fe=L.cc,rt=L.dc,Je=L.Mc,De=L.Nc,Me=A.ka,et=A.ka+A.T,at=A.U,nt=at+1>>1;for(Me==0?ue(he,me,null,null,_e,Oe,qe,Ke,_e,Oe,qe,Ke,oe,ce,null,null,at):(ue(L.ec,L.fc,he,me,Fe,rt,Je,De,_e,Oe,qe,Ke,oe,ce-Q.A,oe,ce,at),++H);Me+2<et;Me+=2)Fe=_e,rt=Oe,Je=qe,De=Ke,Oe+=A.Rc,Ke+=A.Rc,ce+=2*Q.A,ue(he,(me+=2*A.fa)-A.fa,he,me,Fe,rt,Je,De,_e,Oe,qe,Ke,oe,ce-Q.A,oe,ce,at);return me+=A.fa,A.j+et<A.o?(r(L.ec,L.fc,he,me,at),r(L.cc,L.dc,_e,Oe,nt),r(L.Mc,L.Nc,qe,Ke,nt),H--):1&et||ue(he,me,null,null,_e,Oe,qe,Ke,_e,Oe,qe,Ke,oe,ce+Q.A,null,null,at),H}function Hd(A,L,H){var Q=A.F,oe=[A.J];if(Q!=null){var ce=A.U,ue=L.ba.S,he=ue==j_||ue==F_;L=L.ba.f.RGBA;var me=[0],_e=A.ka;me[0]=A.T,A.Kb&&(_e==0?--me[0]:(--_e,oe[0]-=A.width),A.j+A.ka+A.T==A.o&&(me[0]=A.o-A.j-_e));var Oe=L.eb;_e=L.fb+_e*L.A,A=Xn(Q,oe[0],A.width,ce,me,Oe,_e+(he?0:3),L.A),e(H==me),A&&At(ue)&&go(Oe,_e,he,ce,me,L.A)}return 0}function us(A){var L=A.ma,H=L.ba.S,Q=11>H,oe=H==D_||H==M_||H==j_||H==RA||H==12||At(H);if(L.memory=null,L.Ib=null,L.Jb=null,L.Nd=null,!v0(L.Oa,A,oe?11:12))return 0;if(oe&&At(H)&&ct(),A.da)alert("todo:use_scaling");else{if(Q){if(L.Ib=Vt,A.Kb){if(H=A.U+1>>1,L.memory=i(A.U+2*H),L.memory==null)return 0;L.ec=L.memory,L.fc=0,L.cc=L.ec,L.dc=L.fc+A.U,L.Mc=L.cc,L.Nc=L.dc+H,L.Ib=Ln,ct()}}else alert("todo:EmitYUV");oe&&(L.Jb=Hd,Q&&He())}if(Q&&!dM){for(A=0;256>A;++A)que[A]=89858*(A-128)+U_>>B_,Xue[A]=-22014*(A-128)+U_,Yue[A]=-45773*(A-128),Kue[A]=113618*(A-128)+U_>>B_;for(A=T0;A<FA;++A)L=76283*(A-16)+U_>>B_,Jue[A-T0]=Fi(L,255),Zue[A-T0]=Fi(L+8>>4,15);dM=1}return 1}function $a(A){var L=A.ma,H=A.U,Q=A.T;return e(!(1&A.ka)),0>=H||0>=Q?0:(H=L.Ib(A,L),L.Jb!=null&&L.Jb(A,L,H),L.Dc+=H,1)}function Ha(A){A.ma.memory=null}function Ft(A,L,H,Q){return F(A,8)!=47?0:(L[0]=F(A,14)+1,H[0]=F(A,14)+1,Q[0]=F(A,1),F(A,3)!=0?0:!A.h)}function ea(A,L){if(4>A)return A+1;var H=A-2>>1;return(2+(1&A)<<H)+F(L,H)+1}function za(A,L){return 120<L?L-120:1<=(H=((H=Lue[L-1])>>4)*A+(8-(15&H)))?H:1;var H}function gi(A,L,H){var Q=j(H),oe=A[L+=255&Q].g-8;return 0<oe&&(W(H,H.u+8),Q=j(H),L+=A[L].value,L+=Q&(1<<oe)-1),W(H,H.u+A[L].g),A[L].value}function Ur(A,L,H){return H.g+=A.g,H.value+=A.value<<L>>>0,e(8>=H.g),A.g}function Rr(A,L,H){var Q=A.xc;return e((L=Q==0?0:A.vc[A.md*(H>>Q)+(L>>Q)])<A.Wb),A.Ya[L]}function ji(A,L,H,Q){var oe=A.ab,ce=A.c*L,ue=A.C;L=ue+L;var he=H,me=Q;for(Q=A.Ta,H=A.Ua;0<oe--;){var _e=A.gc[oe],Oe=ue,qe=L,Ke=he,Fe=me,rt=(me=Q,he=H,_e.Ea);switch(e(Oe<qe),e(qe<=_e.nc),_e.hc){case 2:T_(Ke,Fe,(qe-Oe)*rt,me,he);break;case 0:var Je=Oe,De=qe,Me=me,et=he,at=(yt=_e).Ea;Je==0&&(PA(Ke,Fe,null,null,1,Me,et),Ae(Ke,Fe+1,0,0,at-1,Me,et+1),Fe+=at,et+=at,++Je);for(var nt=1<<yt.b,wt=nt-1,mt=se(at,yt.b),Dt=yt.K,yt=yt.w+(Je>>yt.b)*mt;Je<De;){var In=Dt,On=yt,wn=1;for(w0(Ke,Fe,Me,et-at,1,Me,et);wn<at;){var an=(wn&~wt)+nt;an>at&&(an=at),(0,fu[In[On++]>>8&15])(Ke,Fe+ +wn,Me,et+wn-at,an-wn,Me,et+wn),wn=an}Fe+=at,et+=at,++Je&wt||(yt+=mt)}qe!=_e.nc&&r(me,he-rt,me,he+(qe-Oe-1)*rt,rt);break;case 1:for(rt=Ke,De=Fe,at=(Ke=_e.Ea)-(et=Ke&~(Me=(Fe=1<<_e.b)-1)),Je=se(Ke,_e.b),nt=_e.K,_e=_e.w+(Oe>>_e.b)*Je;Oe<qe;){for(wt=nt,mt=_e,Dt=new Ie,yt=De+et,In=De+Ke;De<yt;)Xe(wt[mt++],Dt),Kd(Dt,rt,De,Fe,me,he),De+=Fe,he+=Fe;De<In&&(Xe(wt[mt++],Dt),Kd(Dt,rt,De,at,me,he),De+=at,he+=at),++Oe&Me||(_e+=Je)}break;case 3:if(Ke==me&&Fe==he&&0<_e.b){for(De=me,Ke=rt=he+(qe-Oe)*rt-(et=(qe-Oe)*se(_e.Ea,_e.b)),Fe=me,Me=he,Je=[],et=(at=et)-1;0<=et;--et)Je[et]=Fe[Me+et];for(et=at-1;0<=et;--et)De[Ke+et]=Je[et];fo(_e,Oe,qe,me,rt,me,he)}else fo(_e,Oe,qe,Ke,Fe,me,he)}he=Q,me=H}me!=H&&r(Q,H,he,me,ce)}function Zf(A,L){var H=A.V,Q=A.Ba+A.c*A.C,oe=L-A.C;if(e(L<=A.l.o),e(16>=oe),0<oe){var ce=A.l,ue=A.Ta,he=A.Ua,me=ce.width;if(ji(A,oe,H,Q),oe=he=[he],e((H=A.C)<(Q=L)),e(ce.v<ce.va),Q>ce.o&&(Q=ce.o),H<ce.j){var _e=ce.j-H;H=ce.j,oe[0]+=_e*me}if(H>=Q?H=0:(oe[0]+=4*ce.v,ce.ka=H-ce.j,ce.U=ce.va-ce.v,ce.T=Q-H,H=1),H){if(he=he[0],11>(H=A.ca).S){var Oe=H.f.RGBA,qe=(Q=H.S,oe=ce.U,ce=ce.T,_e=Oe.eb,Oe.A),Ke=ce;for(Oe=Oe.fb+A.Ma*Oe.A;0<Ke--;){var Fe=ue,rt=he,Je=oe,De=_e,Me=Oe;switch(Q){case O_:vi(Fe,rt,Je,De,Me);break;case D_:Ys(Fe,rt,Je,De,Me);break;case LA:Ys(Fe,rt,Je,De,Me),go(De,Me,0,Je,1,0);break;case nM:uc(Fe,rt,Je,De,Me);break;case M_:We(Fe,rt,Je,De,Me,1);break;case OA:We(Fe,rt,Je,De,Me,1),go(De,Me,0,Je,1,0);break;case j_:We(Fe,rt,Je,De,Me,0);break;case F_:We(Fe,rt,Je,De,Me,0),go(De,Me,1,Je,1,0);break;case RA:pu(Fe,rt,Je,De,Me);break;case DA:pu(Fe,rt,Je,De,Me),Yn(De,Me,Je,1,0);break;case rM:cc(Fe,rt,Je,De,Me);break;default:e(0)}he+=me,Oe+=qe}A.Ma+=ce}else alert("todo:EmitRescaledRowsYUVA");e(A.Ma<=H.height)}}A.C=L,e(A.C<=A.i)}function oc(A){var L;if(0<A.ua)return 0;for(L=0;L<A.Wb;++L){var H=A.Ya[L].G,Q=A.Ya[L].H;if(0<H[1][Q[1]+0].g||0<H[2][Q[2]+0].g||0<H[3][Q[3]+0].g)return 0}return 1}function ta(A,L,H,Q,oe,ce){if(A.Z!=0){var ue=A.qd,he=A.rd;for(e(yu[A.Z]!=null);L<H;++L)yu[A.Z](ue,he,Q,oe,Q,oe,ce),ue=Q,he=oe,oe+=ce;A.qd=ue,A.rd=he}}function na(A,L){var H=A.l.ma,Q=H.Z==0||H.Z==1?A.l.j:A.C;if(Q=A.C<Q?Q:A.C,e(L<=A.l.o),L>Q){var oe=A.l.width,ce=H.ca,ue=H.tb+oe*Q,he=A.V,me=A.Ba+A.c*Q,_e=A.gc;e(A.ab==1),e(_e[0].hc==3),N_(_e[0],Q,L,he,me,ce,ue),ta(H,Q,L,ce,ue,oe)}A.C=A.Ma=L}function ra(A,L,H,Q,oe,ce,ue){var he=A.$/Q,me=A.$%Q,_e=A.m,Oe=A.s,qe=H+A.$,Ke=qe;oe=H+Q*oe;var Fe=H+Q*ce,rt=280+Oe.ua,Je=A.Pb?he:16777216,De=0<Oe.ua?Oe.Wa:null,Me=Oe.wc,et=qe<Fe?Rr(Oe,me,he):null;e(A.C<ce),e(Fe<=oe);var at=!1;e:for(;;){for(;at||qe<Fe;){var nt=0;if(he>=Je){var wt=qe-H;e((Je=A).Pb),Je.wd=Je.m,Je.xd=wt,0<Je.s.ua&&ge(Je.s.Wa,Je.s.vb),Je=he+Due}if(me&Me||(et=Rr(Oe,me,he)),e(et!=null),et.Qb&&(L[qe]=et.qb,at=!0),!at)if(re(_e),et.jc){nt=_e,wt=L;var mt=qe,Dt=et.pd[j(nt)&ds-1];e(et.jc),256>Dt.g?(W(nt,nt.u+Dt.g),wt[mt]=Dt.value,nt=0):(W(nt,nt.u+Dt.g-256),e(256<=Dt.value),nt=Dt.value),nt==0&&(at=!0)}else nt=gi(et.G[0],et.H[0],_e);if(_e.h)break;if(at||256>nt){if(!at)if(et.nd)L[qe]=(et.qb|nt<<8)>>>0;else{if(re(_e),at=gi(et.G[1],et.H[1],_e),re(_e),wt=gi(et.G[2],et.H[2],_e),mt=gi(et.G[3],et.H[3],_e),_e.h)break;L[qe]=(mt<<24|at<<16|nt<<8|wt)>>>0}if(at=!1,++qe,++me>=Q&&(me=0,++he,ue!=null&&he<=ce&&!(he%16)&&ue(A,he),De!=null))for(;Ke<qe;)nt=L[Ke++],De.X[(506832829*nt&4294967295)>>>De.Mb]=nt}else if(280>nt){if(nt=ea(nt-256,_e),wt=gi(et.G[4],et.H[4],_e),re(_e),wt=za(Q,wt=ea(wt,_e)),_e.h)break;if(qe-H<wt||oe-qe<nt)break e;for(mt=0;mt<nt;++mt)L[qe+mt]=L[qe+mt-wt];for(qe+=nt,me+=nt;me>=Q;)me-=Q,++he,ue!=null&&he<=ce&&!(he%16)&&ue(A,he);if(e(qe<=oe),me&Me&&(et=Rr(Oe,me,he)),De!=null)for(;Ke<qe;)nt=L[Ke++],De.X[(506832829*nt&4294967295)>>>De.Mb]=nt}else{if(!(nt<rt))break e;for(at=nt-280,e(De!=null);Ke<qe;)nt=L[Ke++],De.X[(506832829*nt&4294967295)>>>De.Mb]=nt;nt=qe,e(!(at>>>(wt=De).Xa)),L[nt]=wt.X[at],at=!0}at||e(_e.h==V(_e))}if(A.Pb&&_e.h&&qe<oe)e(A.m.h),A.a=5,A.m=A.wd,A.$=A.xd,0<A.s.ua&&ge(A.s.vb,A.s.Wa);else{if(_e.h)break e;ue?.(A,he>ce?ce:he),A.a=0,A.$=qe-H}return 1}return A.a=3,0}function Va(A){e(A!=null),A.vc=null,A.yc=null,A.Ya=null;var L=A.Wa;L!=null&&(L.X=null),A.vb=null,e(A!=null)}function ho(){var A=new NA;return A==null?null:(A.a=0,A.xb=oM,Rt("Predictor","VP8LPredictors"),Rt("Predictor","VP8LPredictors_C"),Rt("PredictorAdd","VP8LPredictorsAdd"),Rt("PredictorAdd","VP8LPredictorsAdd_C"),T_=Ye,Kd=tt,vi=z,Ys=X,pu=pe,cc=Le,uc=Ue,x.VP8LMapColor32b=yp,x.VP8LMapColor8b=P_,A)}function Wa(A,L,H,Q,oe){var ce=1,ue=[A],he=[L],me=Q.m,_e=Q.s,Oe=null,qe=0;e:for(;;){if(H)for(;ce&&F(me,1);){var Ke=ue,Fe=he,rt=Q,Je=1,De=rt.m,Me=rt.gc[rt.ab],et=F(De,2);if(rt.Oc&1<<et)ce=0;else{switch(rt.Oc|=1<<et,Me.hc=et,Me.Ea=Ke[0],Me.nc=Fe[0],Me.K=[null],++rt.ab,e(4>=rt.ab),et){case 0:case 1:Me.b=F(De,3)+2,Je=Wa(se(Me.Ea,Me.b),se(Me.nc,Me.b),0,rt,Me.K),Me.K=Me.K[0];break;case 3:var at,nt=F(De,8)+1,wt=16<nt?0:4<nt?1:2<nt?2:3;if(Ke[0]=se(Me.Ea,wt),Me.b=wt,at=Je=Wa(nt,1,0,rt,Me.K)){var mt,Dt=nt,yt=Me,In=1<<(8>>yt.b),On=i(In);if(On==null)at=0;else{var wn=yt.K[0],an=yt.w;for(On[0]=yt.K[0][0],mt=1;mt<1*Dt;++mt)On[mt]=fe(wn[an+mt],On[mt-1]);for(;mt<4*In;++mt)On[mt]=0;yt.K[0]=null,yt.K[0]=On,at=1}}Je=at;break;case 2:break;default:e(0)}ce=Je}}if(ue=ue[0],he=he[0],ce&&F(me,1)&&!(ce=1<=(qe=F(me,4))&&11>=qe)){Q.a=3;break e}var zn;if(zn=ce)t:{var $n,Yt,Or,_i=Q,Dr=ue,xi=he,Dn=qe,Ui=H,$i=_i.m,Zr=_i.s,hs=[null],Js=1,vo=0,Ya=Oue[Dn];n:for(;;){if(Ui&&F($i,1)){var Qr=F($i,3)+2,pc=se(Dr,Qr),Qd=se(xi,Qr),Ep=pc*Qd;if(!Wa(pc,Qd,0,_i,hs))break n;for(hs=hs[0],Zr.xc=Qr,$n=0;$n<Ep;++$n){var vu=hs[$n]>>8&65535;hs[$n]=vu,vu>=Js&&(Js=vu+1)}}if($i.h)break n;for(Yt=0;5>Yt;++Yt){var pr=sM[Yt];!Yt&&0<Dn&&(pr+=1<<Dn),vo<pr&&(vo=pr)}var BA=o(Js*Ya,N),pM=Js,mM=o(pM,P);if(mM==null)var H_=null;else e(65536>=pM),H_=mM;var N0=i(vo);if(H_==null||N0==null||BA==null){_i.a=1;break n}var z_=BA;for($n=Or=0;$n<Js;++$n){var la=H_[$n],Sp=la.G,kp=la.H,gM=0,V_=1,bM=0;for(Yt=0;5>Yt;++Yt){pr=sM[Yt],Sp[Yt]=z_,kp[Yt]=Or,!Yt&&0<Dn&&(pr+=1<<Dn);s:{var W_,UA=pr,G_=_i,P0=N0,tde=z_,nde=Or,$A=0,_u=G_.m,rde=F(_u,1);if(s(P0,0,0,UA),rde){var sde=F(_u,1)+1,ide=F(_u,1),yM=F(_u,ide==0?1:8);P0[yM]=1,sde==2&&(P0[yM=F(_u,8)]=1);var q_=1}else{var vM=i(19),_M=F(_u,4)+4;if(19<_M){G_.a=3;var K_=0;break s}for(W_=0;W_<_M;++W_)vM[Rue[W_]]=F(_u,3);var HA=void 0,I0=void 0,xM=G_,ode=vM,Y_=UA,wM=P0,zA=0,xu=xM.m,EM=8,SM=o(128,N);r:for(;C(SM,0,7,ode,19);){if(F(xu,1)){var ade=2+2*F(xu,3);if((HA=2+F(xu,ade))>Y_)break r}else HA=Y_;for(I0=0;I0<Y_&&HA--;){re(xu);var kM=SM[0+(127&j(xu))];W(xu,xu.u+kM.g);var Cp=kM.value;if(16>Cp)wM[I0++]=Cp,Cp!=0&&(EM=Cp);else{var lde=Cp==16,CM=Cp-16,cde=Pue[CM],AM=F(xu,Nue[CM])+cde;if(I0+AM>Y_)break r;for(var ude=lde?EM:0;0<AM--;)wM[I0++]=ude}}zA=1;break r}zA||(xM.a=3),q_=zA}(q_=q_&&!_u.h)&&($A=C(tde,nde,8,P0,UA)),q_&&$A!=0?K_=$A:(G_.a=3,K_=0)}if(K_==0)break n;if(V_&&Iue[Yt]==1&&(V_=z_[Or].g==0),gM+=z_[Or].g,Or+=K_,3>=Yt){var R0,VA=N0[0];for(R0=1;R0<pr;++R0)N0[R0]>VA&&(VA=N0[R0]);bM+=VA}}if(la.nd=V_,la.Qb=0,V_&&(la.qb=(Sp[3][kp[3]+0].value<<24|Sp[1][kp[1]+0].value<<16|Sp[2][kp[2]+0].value)>>>0,gM==0&&256>Sp[0][kp[0]+0].value&&(la.Qb=1,la.qb+=Sp[0][kp[0]+0].value<<8)),la.jc=!la.Qb&&6>bM,la.jc){var X_,mc=la;for(X_=0;X_<ds;++X_){var wu=X_,Eu=mc.pd[wu],J_=mc.G[0][mc.H[0]+wu];256<=J_.value?(Eu.g=J_.g+256,Eu.value=J_.value):(Eu.g=0,Eu.value=0,wu>>=Ur(J_,8,Eu),wu>>=Ur(mc.G[1][mc.H[1]+wu],16,Eu),wu>>=Ur(mc.G[2][mc.H[2]+wu],0,Eu),Ur(mc.G[3][mc.H[3]+wu],24,Eu))}}}Zr.vc=hs,Zr.Wb=Js,Zr.Ya=H_,Zr.yc=BA,zn=1;break t}zn=0}if(!(ce=zn)){Q.a=3;break e}if(0<qe){if(_e.ua=1<<qe,!K(_e.Wa,qe)){Q.a=1,ce=0;break e}}else _e.ua=0;var WA=Q,TM=ue,dde=he,GA=WA.s,qA=GA.xc;if(WA.c=TM,WA.i=dde,GA.md=se(TM,qA),GA.wc=qA==0?-1:(1<<qA)-1,H){Q.xb=Hue;break e}if((Oe=i(ue*he))==null){Q.a=1,ce=0;break e}ce=(ce=ra(Q,Oe,0,ue,he,he,null))&&!me.h;break e}return ce?(oe!=null?oe[0]=Oe:(e(Oe==null),e(H)),Q.$=0,H||Va(_e)):Va(_e),ce}function zd(A,L){var H=A.c*A.i,Q=H+L+16*L;return e(A.c<=L),A.V=i(Q),A.V==null?(A.Ta=null,A.Ua=0,A.a=1,0):(A.Ta=A.V,A.Ua=A.Ba+H+L,1)}function Qf(A,L){var H=A.C,Q=L-H,oe=A.V,ce=A.Ba+A.c*H;for(e(L<=A.l.o);0<Q;){var ue=16<Q?16:Q,he=A.l.ma,me=A.l.width,_e=me*ue,Oe=he.ca,qe=he.tb+me*H,Ke=A.Ta,Fe=A.Ua;ji(A,ue,oe,ce),Er(Ke,Fe,Oe,qe,_e),ta(he,H,H+ue,Oe,qe,me),Q-=ue,oe+=ue*A.c,H+=ue}e(H==L),A.C=A.Ma=L}function ep(){this.ub=this.yd=this.td=this.Rb=0}function tp(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function np(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function l_(){this.Yb=function(){var A=[];return function L(H,Q,oe){for(var ce=oe[Q],ue=0;ue<ce&&(H.push(oe.length>Q+1?[]:0),!(oe.length<Q+1));ue++)L(H[ue],Q+1,oe)}(A,0,[3,11]),A}()}function oA(){this.jb=i(3),this.Wc=a([4,8],l_),this.Xc=a([4,17],l_)}function aA(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function rp(){this.ld=this.La=this.dd=this.tc=0}function c_(){this.Na=this.la=0}function lA(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function r0(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function cA(){this.uc=this.M=this.Nb=0,this.wa=Array(new rp),this.Y=0,this.ya=Array(new r0),this.aa=0,this.l=new sp}function u_(){this.y=i(16),this.f=i(8),this.ea=i(8)}function uA(){this.cb=this.a=0,this.sc="",this.m=new G,this.Od=new ep,this.Kc=new tp,this.ed=new aA,this.Qa=new np,this.Ic=this.$c=this.Aa=0,this.D=new cA,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,G),this.ia=0,this.pb=o(4,lA),this.Pa=new oA,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new u_),this.Hd=0,this.rb=Array(new c_),this.sb=0,this.wa=Array(new rp),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new r0),this.L=this.aa=0,this.gd=a([4,2],rp),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function sp(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function dA(){var A=new uA;return A!=null&&(A.a=0,A.sc="OK",A.cb=0,A.Xb=0,A0||(A0=f_)),A}function xr(A,L,H){return A.a==0&&(A.a=L,A.sc=H,A.cb=0),0}function d_(A,L,H){return 3<=H&&A[L+0]==157&&A[L+1]==1&&A[L+2]==42}function h_(A,L){if(A==null)return 0;if(A.a=0,A.sc="OK",L==null)return xr(A,2,"null VP8Io passed to VP8GetHeaders()");var H=L.data,Q=L.w,oe=L.ha;if(4>oe)return xr(A,7,"Truncated header.");var ce=H[Q+0]|H[Q+1]<<8|H[Q+2]<<16,ue=A.Od;if(ue.Rb=!(1&ce),ue.td=ce>>1&7,ue.yd=ce>>4&1,ue.ub=ce>>5,3<ue.td)return xr(A,3,"Incorrect keyframe parameters.");if(!ue.yd)return xr(A,4,"Frame not displayable.");Q+=3,oe-=3;var he=A.Kc;if(ue.Rb){if(7>oe)return xr(A,7,"cannot parse picture header");if(!d_(H,Q,oe))return xr(A,3,"Bad code word");he.c=16383&(H[Q+4]<<8|H[Q+3]),he.Td=H[Q+4]>>6,he.i=16383&(H[Q+6]<<8|H[Q+5]),he.Ud=H[Q+6]>>6,Q+=7,oe-=7,A.za=he.c+15>>4,A.Ub=he.i+15>>4,L.width=he.c,L.height=he.i,L.Da=0,L.j=0,L.v=0,L.va=L.width,L.o=L.height,L.da=0,L.ib=L.width,L.hb=L.height,L.U=L.width,L.T=L.height,s((ce=A.Pa).jb,0,255,ce.jb.length),e((ce=A.Qa)!=null),ce.Cb=0,ce.Bb=0,ce.Fb=1,s(ce.Zb,0,0,ce.Zb.length),s(ce.Lb,0,0,ce.Lb)}if(ue.ub>oe)return xr(A,7,"bad partition length");$(ce=A.m,H,Q,ue.ub),Q+=ue.ub,oe-=ue.ub,ue.Rb&&(he.Ld=Y(ce),he.Kd=Y(ce)),he=A.Qa;var me,_e=A.Pa;if(e(ce!=null),e(he!=null),he.Cb=Y(ce),he.Cb){if(he.Bb=Y(ce),Y(ce)){for(he.Fb=Y(ce),me=0;4>me;++me)he.Zb[me]=Y(ce)?J(ce,7):0;for(me=0;4>me;++me)he.Lb[me]=Y(ce)?J(ce,6):0}if(he.Bb)for(me=0;3>me;++me)_e.jb[me]=Y(ce)?ee(ce,8):255}else he.Bb=0;if(ce.Ka)return xr(A,3,"cannot parse segment header");if((he=A.ed).zd=Y(ce),he.Tb=ee(ce,6),he.wb=ee(ce,3),he.Pc=Y(ce),he.Pc&&Y(ce)){for(_e=0;4>_e;++_e)Y(ce)&&(he.vd[_e]=J(ce,6));for(_e=0;4>_e;++_e)Y(ce)&&(he.od[_e]=J(ce,6))}if(A.L=he.Tb==0?0:he.zd?1:2,ce.Ka)return xr(A,3,"cannot parse filter header");var Oe=oe;if(oe=me=Q,Q=me+Oe,he=Oe,A.Xb=(1<<ee(A.m,2))-1,Oe<3*(_e=A.Xb))H=7;else{for(me+=3*_e,he-=3*_e,Oe=0;Oe<_e;++Oe){var qe=H[oe+0]|H[oe+1]<<8|H[oe+2]<<16;qe>he&&(qe=he),$(A.Jc[+Oe],H,me,qe),me+=qe,he-=qe,oe+=3}$(A.Jc[+_e],H,me,he),H=me<Q?0:5}if(H!=0)return xr(A,H,"cannot parse partitions");for(H=ee(me=A.m,7),oe=Y(me)?J(me,4):0,Q=Y(me)?J(me,4):0,he=Y(me)?J(me,4):0,_e=Y(me)?J(me,4):0,me=Y(me)?J(me,4):0,Oe=A.Qa,qe=0;4>qe;++qe){if(Oe.Cb){var Ke=Oe.Zb[qe];Oe.Fb||(Ke+=H)}else{if(0<qe){A.pb[qe]=A.pb[0];continue}Ke=H}var Fe=A.pb[qe];Fe.Sc[0]=MA[Fi(Ke+oe,127)],Fe.Sc[1]=jA[Fi(Ke+0,127)],Fe.Eb[0]=2*MA[Fi(Ke+Q,127)],Fe.Eb[1]=101581*jA[Fi(Ke+he,127)]>>16,8>Fe.Eb[1]&&(Fe.Eb[1]=8),Fe.Qc[0]=MA[Fi(Ke+_e,117)],Fe.Qc[1]=jA[Fi(Ke+me,127)],Fe.lc=Ke+me}if(!ue.Rb)return xr(A,4,"Not a key frame.");for(Y(ce),ue=A.Pa,H=0;4>H;++H){for(oe=0;8>oe;++oe)for(Q=0;3>Q;++Q)for(he=0;11>he;++he)_e=de(ce,Uue[H][oe][Q][he])?ee(ce,8):Fue[H][oe][Q][he],ue.Wc[H][oe].Yb[Q][he]=_e;for(oe=0;17>oe;++oe)ue.Xc[H][oe]=ue.Wc[H][$ue[oe]]}return A.kc=Y(ce),A.kc&&(A.Bd=ee(ce,8)),A.cb=1}function f_(A,L,H,Q,oe,ce,ue){var he=L[oe].Yb[H];for(H=0;16>oe;++oe){if(!de(A,he[H+0]))return oe;for(;!de(A,he[H+1]);)if(he=L[++oe].Yb[0],H=0,oe==16)return 16;var me=L[oe+1].Yb;if(de(A,he[H+2])){var _e=A,Oe=0;if(de(_e,(Ke=he)[(qe=H)+3]))if(de(_e,Ke[qe+6])){for(he=0,qe=2*(Oe=de(_e,Ke[qe+8]))+(Ke=de(_e,Ke[qe+9+Oe])),Oe=0,Ke=Mue[qe];Ke[he];++he)Oe+=Oe+de(_e,Ke[he]);Oe+=3+(8<<qe)}else de(_e,Ke[qe+7])?(Oe=7+2*de(_e,165),Oe+=de(_e,145)):Oe=5+de(_e,159);else Oe=de(_e,Ke[qe+4])?3+de(_e,Ke[qe+5]):2;he=me[2]}else Oe=1,he=me[1];me=ue+jue[oe],0>(_e=A).b&&te(_e);var qe,Ke=_e.b,Fe=(qe=_e.Ca>>1)-(_e.I>>Ke)>>31;--_e.b,_e.Ca+=Fe,_e.Ca|=1,_e.I-=(qe+1&Fe)<<Ke,ce[me]=((Oe^Fe)-Fe)*Q[(0<oe)+0]}return 16}function s0(A){var L=A.rb[A.sb-1];L.la=0,L.Na=0,s(A.zc,0,0,A.zc.length),A.ja=0}function hA(A,L){if(A==null)return 0;if(L==null)return xr(A,2,"NULL VP8Io parameter in VP8Decode().");if(!A.cb&&!h_(A,L))return 0;if(e(A.cb),L.ac==null||L.ac(L)){L.ob&&(A.L=0);var H=$_[A.L];if(A.L==2?(A.yb=0,A.zb=0):(A.yb=L.v-H>>4,A.zb=L.j-H>>4,0>A.yb&&(A.yb=0),0>A.zb&&(A.zb=0)),A.Va=L.o+15+H>>4,A.Hb=L.va+15+H>>4,A.Hb>A.za&&(A.Hb=A.za),A.Va>A.Ub&&(A.Va=A.Ub),0<A.L){var Q=A.ed;for(H=0;4>H;++H){var oe;if(A.Qa.Cb){var ce=A.Qa.Lb[H];A.Qa.Fb||(ce+=Q.Tb)}else ce=Q.Tb;for(oe=0;1>=oe;++oe){var ue=A.gd[H][oe],he=ce;if(Q.Pc&&(he+=Q.vd[0],oe&&(he+=Q.od[0])),0<(he=0>he?0:63<he?63:he)){var me=he;0<Q.wb&&(me=4<Q.wb?me>>2:me>>1)>9-Q.wb&&(me=9-Q.wb),1>me&&(me=1),ue.dd=me,ue.tc=2*he+me,ue.ld=40<=he?2:15<=he?1:0}else ue.tc=0;ue.La=oe}}}H=0}else xr(A,6,"Frame setup failed"),H=A.a;if(H=H==0){if(H){A.$c=0,0<A.Aa||(A.Ic=ede);e:{H=A.Ic,Q=4*(me=A.za);var _e=32*me,Oe=me+1,qe=0<A.L?me*(0<A.Aa?2:1):0,Ke=(A.Aa==2?2:1)*me;if((ue=Q+832+(oe=3*(16*H+$_[A.L])/2*_e)+(ce=A.Fa!=null&&0<A.Fa.length?A.Kc.c*A.Kc.i:0))!=ue)H=0;else{if(ue>A.Vb){if(A.Vb=0,A.Ec=i(ue),A.Fc=0,A.Ec==null){H=xr(A,1,"no memory during frame initialization.");break e}A.Vb=ue}ue=A.Ec,he=A.Fc,A.Ac=ue,A.Bc=he,he+=Q,A.Gd=o(_e,u_),A.Hd=0,A.rb=o(Oe+1,c_),A.sb=1,A.wa=qe?o(qe,rp):null,A.Y=0,A.D.Nb=0,A.D.wa=A.wa,A.D.Y=A.Y,0<A.Aa&&(A.D.Y+=me),e(!0),A.oc=ue,A.pc=he,he+=832,A.ya=o(Ke,r0),A.aa=0,A.D.ya=A.ya,A.D.aa=A.aa,A.Aa==2&&(A.D.aa+=me),A.R=16*me,A.B=8*me,me=(_e=$_[A.L])*A.R,_e=_e/2*A.B,A.sa=ue,A.ta=he+me,A.qa=A.sa,A.ra=A.ta+16*H*A.R+_e,A.Ha=A.qa,A.Ia=A.ra+8*H*A.B+_e,A.$c=0,he+=oe,A.mb=ce?ue:null,A.nb=ce?he:null,e(he+ce<=A.Fc+A.Vb),s0(A),s(A.Ac,A.Bc,0,Q),H=1}}if(H){if(L.ka=0,L.y=A.sa,L.O=A.ta,L.f=A.qa,L.N=A.ra,L.ea=A.Ha,L.Vd=A.Ia,L.fa=A.R,L.Rc=A.B,L.F=null,L.J=0,!R_){for(H=-255;255>=H;++H)$r[255+H]=0>H?-H:H;for(H=-1020;1020>=H;++H)hc[1020+H]=-128>H?-128:127<H?127:H;for(H=-112;112>=H;++H)C0[112+H]=-16>H?-16:15<H?15:H;for(H=-255;510>=H;++H)wp[255+H]=0>H?0:255<H?255:H;R_=1}vp=mA,dc=fA,E0=m_,Xs=pA,po=g_,wr=p_,_p=u0,I_=Gd,S0=TA,Yd=d0,Xd=AA,mu=up,Jd=h0,xp=k_,Zd=S_,gu=qa,k0=lc,mo=CA,aa[0]=Ga,aa[1]=gA,aa[2]=_A,aa[3]=xA,aa[4]=v_,aa[5]=lp,aa[6]=__,aa[7]=a0,aa[8]=EA,aa[9]=wA,bu[0]=b_,bu[1]=yA,bu[2]=ac,bu[3]=op,bu[4]=Cs,bu[5]=vA,bu[6]=y_,fc[0]=uu,fc[1]=bA,fc[2]=SA,fc[3]=l0,fc[4]=Wd,fc[5]=kA,fc[6]=c0,H=1}else H=0}H&&(H=function(Fe,rt){for(Fe.M=0;Fe.M<Fe.Va;++Fe.M){var Je,De=Fe.Jc[Fe.M&Fe.Xb],Me=Fe.m,et=Fe;for(Je=0;Je<et.za;++Je){var at=Me,nt=et,wt=nt.Ac,mt=nt.Bc+4*Je,Dt=nt.zc,yt=nt.ya[nt.aa+Je];if(nt.Qa.Bb?yt.$b=de(at,nt.Pa.jb[0])?2+de(at,nt.Pa.jb[2]):de(at,nt.Pa.jb[1]):yt.$b=0,nt.kc&&(yt.Ad=de(at,nt.Bd)),yt.Za=!de(at,145)+0,yt.Za){var In=yt.Ob,On=0;for(nt=0;4>nt;++nt){var wn,an=Dt[0+nt];for(wn=0;4>wn;++wn){an=Bue[wt[mt+wn]][an];for(var zn=iM[de(at,an[0])];0<zn;)zn=iM[2*zn+de(at,an[zn])];an=-zn,wt[mt+wn]=an}r(In,On,wt,mt,4),On+=4,Dt[0+nt]=an}}else an=de(at,156)?de(at,128)?1:3:de(at,163)?2:0,yt.Ob[0]=an,s(wt,mt,an,4),s(Dt,0,an,4);yt.Dd=de(at,142)?de(at,114)?de(at,183)?1:3:2:0}if(et.m.Ka)return xr(Fe,7,"Premature end-of-partition0 encountered.");for(;Fe.ja<Fe.za;++Fe.ja){if(et=De,at=(Me=Fe).rb[Me.sb-1],wt=Me.rb[Me.sb+Me.ja],Je=Me.ya[Me.aa+Me.ja],mt=Me.kc?Je.Ad:0)at.la=wt.la=0,Je.Za||(at.Na=wt.Na=0),Je.Hc=0,Je.Gc=0,Je.ia=0;else{var $n,Yt;if(at=wt,wt=et,mt=Me.Pa.Xc,Dt=Me.ya[Me.aa+Me.ja],yt=Me.pb[Dt.$b],nt=Dt.ad,In=0,On=Me.rb[Me.sb-1],an=wn=0,s(nt,In,0,384),Dt.Za)var Or=0,_i=mt[3];else{zn=i(16);var Dr=at.Na+On.Na;if(Dr=A0(wt,mt[1],Dr,yt.Eb,0,zn,0),at.Na=On.Na=(0<Dr)+0,1<Dr)vp(zn,0,nt,In);else{var xi=zn[0]+3>>3;for(zn=0;256>zn;zn+=16)nt[In+zn]=xi}Or=1,_i=mt[0]}var Dn=15&at.la,Ui=15&On.la;for(zn=0;4>zn;++zn){var $i=1&Ui;for(xi=Yt=0;4>xi;++xi)Dn=Dn>>1|($i=(Dr=A0(wt,_i,Dr=$i+(1&Dn),yt.Sc,Or,nt,In))>Or)<<7,Yt=Yt<<2|(3<Dr?3:1<Dr?2:nt[In+0]!=0),In+=16;Dn>>=4,Ui=Ui>>1|$i<<7,wn=(wn<<8|Yt)>>>0}for(_i=Dn,Or=Ui>>4,$n=0;4>$n;$n+=2){for(Yt=0,Dn=at.la>>4+$n,Ui=On.la>>4+$n,zn=0;2>zn;++zn){for($i=1&Ui,xi=0;2>xi;++xi)Dr=$i+(1&Dn),Dn=Dn>>1|($i=0<(Dr=A0(wt,mt[2],Dr,yt.Qc,0,nt,In)))<<3,Yt=Yt<<2|(3<Dr?3:1<Dr?2:nt[In+0]!=0),In+=16;Dn>>=2,Ui=Ui>>1|$i<<5}an|=Yt<<4*$n,_i|=Dn<<4<<$n,Or|=(240&Ui)<<$n}at.la=_i,On.la=Or,Dt.Hc=wn,Dt.Gc=an,Dt.ia=43690&an?0:yt.ia,mt=!(wn|an)}if(0<Me.L&&(Me.wa[Me.Y+Me.ja]=Me.gd[Je.$b][Je.Za],Me.wa[Me.Y+Me.ja].La|=!mt),et.Ka)return xr(Fe,7,"Premature end-of-file encountered.")}if(s0(Fe),Me=rt,et=1,Je=(De=Fe).D,at=0<De.L&&De.M>=De.zb&&De.M<=De.Va,De.Aa==0)e:{if(Je.M=De.M,Je.uc=at,y0(De,Je),et=1,Je=(Yt=De.D).Nb,at=(an=$_[De.L])*De.R,wt=an/2*De.B,zn=16*Je*De.R,xi=8*Je*De.B,mt=De.sa,Dt=De.ta-at+zn,yt=De.qa,nt=De.ra-wt+xi,In=De.Ha,On=De.Ia-wt+xi,Ui=(Dn=Yt.M)==0,wn=Dn>=De.Va-1,De.Aa==2&&y0(De,Yt),Yt.uc)for($i=(Dr=De).D.M,e(Dr.D.uc),Yt=Dr.yb;Yt<Dr.Hb;++Yt){Or=Yt,_i=$i;var Zr=(hs=(pr=Dr).D).Nb;$n=pr.R;var hs=hs.wa[hs.Y+Or],Js=pr.sa,vo=pr.ta+16*Zr*$n+16*Or,Ya=hs.dd,Qr=hs.tc;if(Qr!=0)if(e(3<=Qr),pr.L==1)0<Or&&gu(Js,vo,$n,Qr+4),hs.La&&mo(Js,vo,$n,Qr),0<_i&&Zd(Js,vo,$n,Qr+4),hs.La&&k0(Js,vo,$n,Qr);else{var pc=pr.B,Qd=pr.qa,Ep=pr.ra+8*Zr*pc+8*Or,vu=pr.Ha,pr=pr.Ia+8*Zr*pc+8*Or;Zr=hs.ld,0<Or&&(I_(Js,vo,$n,Qr+4,Ya,Zr),Yd(Qd,Ep,vu,pr,pc,Qr+4,Ya,Zr)),hs.La&&(mu(Js,vo,$n,Qr,Ya,Zr),xp(Qd,Ep,vu,pr,pc,Qr,Ya,Zr)),0<_i&&(_p(Js,vo,$n,Qr+4,Ya,Zr),S0(Qd,Ep,vu,pr,pc,Qr+4,Ya,Zr)),hs.La&&(Xd(Js,vo,$n,Qr,Ya,Zr),Jd(Qd,Ep,vu,pr,pc,Qr,Ya,Zr))}}if(De.ia&&alert("todo:DitherRow"),Me.put!=null){if(Yt=16*Dn,Dn=16*(Dn+1),Ui?(Me.y=De.sa,Me.O=De.ta+zn,Me.f=De.qa,Me.N=De.ra+xi,Me.ea=De.Ha,Me.W=De.Ia+xi):(Yt-=an,Me.y=mt,Me.O=Dt,Me.f=yt,Me.N=nt,Me.ea=In,Me.W=On),wn||(Dn-=an),Dn>Me.o&&(Dn=Me.o),Me.F=null,Me.J=null,De.Fa!=null&&0<De.Fa.length&&Yt<Dn&&(Me.J=g0(De,Me,Yt,Dn-Yt),Me.F=De.mb,Me.F==null&&Me.F.length==0)){et=xr(De,3,"Could not decode alpha data.");break e}Yt<Me.j&&(an=Me.j-Yt,Yt=Me.j,e(!(1&an)),Me.O+=De.R*an,Me.N+=De.B*(an>>1),Me.W+=De.B*(an>>1),Me.F!=null&&(Me.J+=Me.width*an)),Yt<Dn&&(Me.O+=Me.v,Me.N+=Me.v>>1,Me.W+=Me.v>>1,Me.F!=null&&(Me.J+=Me.v),Me.ka=Yt-Me.j,Me.U=Me.va-Me.v,Me.T=Dn-Yt,et=Me.put(Me))}Je+1!=De.Ic||wn||(r(De.sa,De.ta-at,mt,Dt+16*De.R,at),r(De.qa,De.ra-wt,yt,nt+8*De.B,wt),r(De.Ha,De.Ia-wt,In,On+8*De.B,wt))}if(!et)return xr(Fe,6,"Output aborted.")}return 1}(A,L)),L.bc!=null&&L.bc(L),H&=1}return H?(A.cb=0,H):0}function sa(A,L,H,Q,oe){oe=A[L+H+32*Q]+(oe>>3),A[L+H+32*Q]=-256&oe?0>oe?0:255:oe}function ip(A,L,H,Q,oe,ce){sa(A,L,0,H,Q+oe),sa(A,L,1,H,Q+ce),sa(A,L,2,H,Q-ce),sa(A,L,3,H,Q-oe)}function bi(A){return(20091*A>>16)+A}function i0(A,L,H,Q){var oe,ce=0,ue=i(16);for(oe=0;4>oe;++oe){var he=A[L+0]+A[L+8],me=A[L+0]-A[L+8],_e=(35468*A[L+4]>>16)-bi(A[L+12]),Oe=bi(A[L+4])+(35468*A[L+12]>>16);ue[ce+0]=he+Oe,ue[ce+1]=me+_e,ue[ce+2]=me-_e,ue[ce+3]=he-Oe,ce+=4,L++}for(oe=ce=0;4>oe;++oe)he=(A=ue[ce+0]+4)+ue[ce+8],me=A-ue[ce+8],_e=(35468*ue[ce+4]>>16)-bi(ue[ce+12]),sa(H,Q,0,0,he+(Oe=bi(ue[ce+4])+(35468*ue[ce+12]>>16))),sa(H,Q,1,0,me+_e),sa(H,Q,2,0,me-_e),sa(H,Q,3,0,he-Oe),ce++,Q+=32}function p_(A,L,H,Q){var oe=A[L+0]+4,ce=35468*A[L+4]>>16,ue=bi(A[L+4]),he=35468*A[L+1]>>16;ip(H,Q,0,oe+ue,A=bi(A[L+1]),he),ip(H,Q,1,oe+ce,A,he),ip(H,Q,2,oe-ce,A,he),ip(H,Q,3,oe-ue,A,he)}function fA(A,L,H,Q,oe){i0(A,L,H,Q),oe&&i0(A,L+16,H,Q+4)}function m_(A,L,H,Q){dc(A,L+0,H,Q,1),dc(A,L+32,H,Q+128,1)}function pA(A,L,H,Q){var oe;for(A=A[L+0]+4,oe=0;4>oe;++oe)for(L=0;4>L;++L)sa(H,Q,L,oe,A)}function g_(A,L,H,Q){A[L+0]&&Xs(A,L+0,H,Q),A[L+16]&&Xs(A,L+16,H,Q+4),A[L+32]&&Xs(A,L+32,H,Q+128),A[L+48]&&Xs(A,L+48,H,Q+128+4)}function mA(A,L,H,Q){var oe,ce=i(16);for(oe=0;4>oe;++oe){var ue=A[L+0+oe]+A[L+12+oe],he=A[L+4+oe]+A[L+8+oe],me=A[L+4+oe]-A[L+8+oe],_e=A[L+0+oe]-A[L+12+oe];ce[0+oe]=ue+he,ce[8+oe]=ue-he,ce[4+oe]=_e+me,ce[12+oe]=_e-me}for(oe=0;4>oe;++oe)ue=(A=ce[0+4*oe]+3)+ce[3+4*oe],he=ce[1+4*oe]+ce[2+4*oe],me=ce[1+4*oe]-ce[2+4*oe],_e=A-ce[3+4*oe],H[Q+0]=ue+he>>3,H[Q+16]=_e+me>>3,H[Q+32]=ue-he>>3,H[Q+48]=_e-me>>3,Q+=64}function o0(A,L,H){var Q,oe=L-32,ce=Bi,ue=255-A[oe-1];for(Q=0;Q<H;++Q){var he,me=ce,_e=ue+A[L-1];for(he=0;he<H;++he)A[L+he]=me[_e+A[oe+he]];L+=32}}function gA(A,L){o0(A,L,4)}function bA(A,L){o0(A,L,8)}function yA(A,L){o0(A,L,16)}function ac(A,L){var H;for(H=0;16>H;++H)r(A,L+32*H,A,L-32,16)}function op(A,L){var H;for(H=16;0<H;--H)s(A,L,A[L-1],16),L+=32}function ap(A,L,H){var Q;for(Q=0;16>Q;++Q)s(L,H+32*Q,A,16)}function b_(A,L){var H,Q=16;for(H=0;16>H;++H)Q+=A[L-1+32*H]+A[L+H-32];ap(Q>>5,A,L)}function Cs(A,L){var H,Q=8;for(H=0;16>H;++H)Q+=A[L-1+32*H];ap(Q>>4,A,L)}function vA(A,L){var H,Q=8;for(H=0;16>H;++H)Q+=A[L+H-32];ap(Q>>4,A,L)}function y_(A,L){ap(128,A,L)}function zt(A,L,H){return A+2*L+H+2>>2}function _A(A,L){var H,Q=L-32;for(Q=new Uint8Array([zt(A[Q-1],A[Q+0],A[Q+1]),zt(A[Q+0],A[Q+1],A[Q+2]),zt(A[Q+1],A[Q+2],A[Q+3]),zt(A[Q+2],A[Q+3],A[Q+4])]),H=0;4>H;++H)r(A,L+32*H,Q,0,Q.length)}function xA(A,L){var H=A[L-1],Q=A[L-1+32],oe=A[L-1+64],ce=A[L-1+96];ye(A,L+0,16843009*zt(A[L-1-32],H,Q)),ye(A,L+32,16843009*zt(H,Q,oe)),ye(A,L+64,16843009*zt(Q,oe,ce)),ye(A,L+96,16843009*zt(oe,ce,ce))}function Ga(A,L){var H,Q=4;for(H=0;4>H;++H)Q+=A[L+H-32]+A[L-1+32*H];for(Q>>=3,H=0;4>H;++H)s(A,L+32*H,Q,4)}function v_(A,L){var H=A[L-1+0],Q=A[L-1+32],oe=A[L-1+64],ce=A[L-1-32],ue=A[L+0-32],he=A[L+1-32],me=A[L+2-32],_e=A[L+3-32];A[L+0+96]=zt(Q,oe,A[L-1+96]),A[L+1+96]=A[L+0+64]=zt(H,Q,oe),A[L+2+96]=A[L+1+64]=A[L+0+32]=zt(ce,H,Q),A[L+3+96]=A[L+2+64]=A[L+1+32]=A[L+0+0]=zt(ue,ce,H),A[L+3+64]=A[L+2+32]=A[L+1+0]=zt(he,ue,ce),A[L+3+32]=A[L+2+0]=zt(me,he,ue),A[L+3+0]=zt(_e,me,he)}function __(A,L){var H=A[L+1-32],Q=A[L+2-32],oe=A[L+3-32],ce=A[L+4-32],ue=A[L+5-32],he=A[L+6-32],me=A[L+7-32];A[L+0+0]=zt(A[L+0-32],H,Q),A[L+1+0]=A[L+0+32]=zt(H,Q,oe),A[L+2+0]=A[L+1+32]=A[L+0+64]=zt(Q,oe,ce),A[L+3+0]=A[L+2+32]=A[L+1+64]=A[L+0+96]=zt(oe,ce,ue),A[L+3+32]=A[L+2+64]=A[L+1+96]=zt(ce,ue,he),A[L+3+64]=A[L+2+96]=zt(ue,he,me),A[L+3+96]=zt(he,me,me)}function lp(A,L){var H=A[L-1+0],Q=A[L-1+32],oe=A[L-1+64],ce=A[L-1-32],ue=A[L+0-32],he=A[L+1-32],me=A[L+2-32],_e=A[L+3-32];A[L+0+0]=A[L+1+64]=ce+ue+1>>1,A[L+1+0]=A[L+2+64]=ue+he+1>>1,A[L+2+0]=A[L+3+64]=he+me+1>>1,A[L+3+0]=me+_e+1>>1,A[L+0+96]=zt(oe,Q,H),A[L+0+64]=zt(Q,H,ce),A[L+0+32]=A[L+1+96]=zt(H,ce,ue),A[L+1+32]=A[L+2+96]=zt(ce,ue,he),A[L+2+32]=A[L+3+96]=zt(ue,he,me),A[L+3+32]=zt(he,me,_e)}function a0(A,L){var H=A[L+0-32],Q=A[L+1-32],oe=A[L+2-32],ce=A[L+3-32],ue=A[L+4-32],he=A[L+5-32],me=A[L+6-32],_e=A[L+7-32];A[L+0+0]=H+Q+1>>1,A[L+1+0]=A[L+0+64]=Q+oe+1>>1,A[L+2+0]=A[L+1+64]=oe+ce+1>>1,A[L+3+0]=A[L+2+64]=ce+ue+1>>1,A[L+0+32]=zt(H,Q,oe),A[L+1+32]=A[L+0+96]=zt(Q,oe,ce),A[L+2+32]=A[L+1+96]=zt(oe,ce,ue),A[L+3+32]=A[L+2+96]=zt(ce,ue,he),A[L+3+64]=zt(ue,he,me),A[L+3+96]=zt(he,me,_e)}function wA(A,L){var H=A[L-1+0],Q=A[L-1+32],oe=A[L-1+64],ce=A[L-1+96];A[L+0+0]=H+Q+1>>1,A[L+2+0]=A[L+0+32]=Q+oe+1>>1,A[L+2+32]=A[L+0+64]=oe+ce+1>>1,A[L+1+0]=zt(H,Q,oe),A[L+3+0]=A[L+1+32]=zt(Q,oe,ce),A[L+3+32]=A[L+1+64]=zt(oe,ce,ce),A[L+3+64]=A[L+2+64]=A[L+0+96]=A[L+1+96]=A[L+2+96]=A[L+3+96]=ce}function EA(A,L){var H=A[L-1+0],Q=A[L-1+32],oe=A[L-1+64],ce=A[L-1+96],ue=A[L-1-32],he=A[L+0-32],me=A[L+1-32],_e=A[L+2-32];A[L+0+0]=A[L+2+32]=H+ue+1>>1,A[L+0+32]=A[L+2+64]=Q+H+1>>1,A[L+0+64]=A[L+2+96]=oe+Q+1>>1,A[L+0+96]=ce+oe+1>>1,A[L+3+0]=zt(he,me,_e),A[L+2+0]=zt(ue,he,me),A[L+1+0]=A[L+3+32]=zt(H,ue,he),A[L+1+32]=A[L+3+64]=zt(Q,H,ue),A[L+1+64]=A[L+3+96]=zt(oe,Q,H),A[L+1+96]=zt(ce,oe,Q)}function SA(A,L){var H;for(H=0;8>H;++H)r(A,L+32*H,A,L-32,8)}function l0(A,L){var H;for(H=0;8>H;++H)s(A,L,A[L-1],8),L+=32}function Vd(A,L,H){var Q;for(Q=0;8>Q;++Q)s(L,H+32*Q,A,8)}function uu(A,L){var H,Q=8;for(H=0;8>H;++H)Q+=A[L+H-32]+A[L-1+32*H];Vd(Q>>4,A,L)}function kA(A,L){var H,Q=4;for(H=0;8>H;++H)Q+=A[L+H-32];Vd(Q>>3,A,L)}function Wd(A,L){var H,Q=4;for(H=0;8>H;++H)Q+=A[L-1+32*H];Vd(Q>>3,A,L)}function c0(A,L){Vd(128,A,L)}function cp(A,L,H){var Q=A[L-H],oe=A[L+0],ce=3*(oe-Q)+IA[1020+A[L-2*H]-A[L+H]],ue=L_[112+(ce+4>>3)];A[L-H]=Bi[255+Q+L_[112+(ce+3>>3)]],A[L+0]=Bi[255+oe-ue]}function x_(A,L,H,Q){var oe=A[L+0],ce=A[L+H];return bo[255+A[L-2*H]-A[L-H]]>Q||bo[255+ce-oe]>Q}function w_(A,L,H,Q){return 4*bo[255+A[L-H]-A[L+0]]+bo[255+A[L-2*H]-A[L+H]]<=Q}function E_(A,L,H,Q,oe){var ce=A[L-3*H],ue=A[L-2*H],he=A[L-H],me=A[L+0],_e=A[L+H],Oe=A[L+2*H],qe=A[L+3*H];return 4*bo[255+he-me]+bo[255+ue-_e]>Q?0:bo[255+A[L-4*H]-ce]<=oe&&bo[255+ce-ue]<=oe&&bo[255+ue-he]<=oe&&bo[255+qe-Oe]<=oe&&bo[255+Oe-_e]<=oe&&bo[255+_e-me]<=oe}function S_(A,L,H,Q){var oe=2*Q+1;for(Q=0;16>Q;++Q)w_(A,L+Q,H,oe)&&cp(A,L+Q,H)}function qa(A,L,H,Q){var oe=2*Q+1;for(Q=0;16>Q;++Q)w_(A,L+Q*H,1,oe)&&cp(A,L+Q*H,1)}function lc(A,L,H,Q){var oe;for(oe=3;0<oe;--oe)S_(A,L+=4*H,H,Q)}function CA(A,L,H,Q){var oe;for(oe=3;0<oe;--oe)qa(A,L+=4,H,Q)}function du(A,L,H,Q,oe,ce,ue,he){for(ce=2*ce+1;0<oe--;){if(E_(A,L,H,ce,ue))if(x_(A,L,H,he))cp(A,L,H);else{var me=A,_e=L,Oe=H,qe=me[_e-2*Oe],Ke=me[_e-Oe],Fe=me[_e+0],rt=me[_e+Oe],Je=me[_e+2*Oe],De=27*(et=IA[1020+3*(Fe-Ke)+IA[1020+qe-rt]])+63>>7,Me=18*et+63>>7,et=9*et+63>>7;me[_e-3*Oe]=Bi[255+me[_e-3*Oe]+et],me[_e-2*Oe]=Bi[255+qe+Me],me[_e-Oe]=Bi[255+Ke+De],me[_e+0]=Bi[255+Fe-De],me[_e+Oe]=Bi[255+rt-Me],me[_e+2*Oe]=Bi[255+Je-et]}L+=Q}}function ia(A,L,H,Q,oe,ce,ue,he){for(ce=2*ce+1;0<oe--;){if(E_(A,L,H,ce,ue))if(x_(A,L,H,he))cp(A,L,H);else{var me=A,_e=L,Oe=H,qe=me[_e-Oe],Ke=me[_e+0],Fe=me[_e+Oe],rt=L_[112+((Je=3*(Ke-qe))+4>>3)],Je=L_[112+(Je+3>>3)],De=rt+1>>1;me[_e-2*Oe]=Bi[255+me[_e-2*Oe]+De],me[_e-Oe]=Bi[255+qe+Je],me[_e+0]=Bi[255+Ke-rt],me[_e+Oe]=Bi[255+Fe-De]}L+=Q}}function u0(A,L,H,Q,oe,ce){du(A,L,H,1,16,Q,oe,ce)}function Gd(A,L,H,Q,oe,ce){du(A,L,1,H,16,Q,oe,ce)}function AA(A,L,H,Q,oe,ce){var ue;for(ue=3;0<ue;--ue)ia(A,L+=4*H,H,1,16,Q,oe,ce)}function up(A,L,H,Q,oe,ce){var ue;for(ue=3;0<ue;--ue)ia(A,L+=4,1,H,16,Q,oe,ce)}function TA(A,L,H,Q,oe,ce,ue,he){du(A,L,oe,1,8,ce,ue,he),du(H,Q,oe,1,8,ce,ue,he)}function d0(A,L,H,Q,oe,ce,ue,he){du(A,L,1,oe,8,ce,ue,he),du(H,Q,1,oe,8,ce,ue,he)}function h0(A,L,H,Q,oe,ce,ue,he){ia(A,L+4*oe,oe,1,8,ce,ue,he),ia(H,Q+4*oe,oe,1,8,ce,ue,he)}function k_(A,L,H,Q,oe,ce,ue,he){ia(A,L+4,1,oe,8,ce,ue,he),ia(H,Q+4,1,oe,8,ce,ue,he)}function dp(){this.ba=new Kt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Hn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function f0(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function p0(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function C_(){this.ua=0,this.Wa=new ne,this.vb=new ne,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new P,this.yc=new N}function NA(){this.xb=this.a=0,this.l=new sp,this.ca=new Kt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new D,this.Pb=0,this.wd=new D,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new C_,this.ab=0,this.gc=o(4,p0),this.Oc=0}function hp(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new sp,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function qd(A,L,H,Q,oe,ce,ue){for(A=A==null?0:A[L+0],L=0;L<ue;++L)oe[ce+L]=A+H[Q+L]&255,A=oe[ce+L]}function m0(A,L,H,Q,oe,ce,ue){var he;if(A==null)qd(null,null,H,Q,oe,ce,ue);else for(he=0;he<ue;++he)oe[ce+he]=A[L+he]+H[Q+he]&255}function hu(A,L,H,Q,oe,ce,ue){if(A==null)qd(null,null,H,Q,oe,ce,ue);else{var he,me=A[L+0],_e=me,Oe=me;for(he=0;he<ue;++he)_e=Oe+(me=A[L+he])-_e,Oe=H[Q+he]+(-256&_e?0>_e?0:255:_e)&255,_e=me,oe[ce+he]=Oe}}function g0(A,L,H,Q){var oe=L.width,ce=L.o;if(e(A!=null&&L!=null),0>H||0>=Q||H+Q>ce)return null;if(!A.Cc){if(A.ga==null){var ue;if(A.ga=new hp,(ue=A.ga==null)||(ue=L.width*L.o,e(A.Gb.length==0),A.Gb=i(ue),A.Uc=0,A.Gb==null?ue=0:(A.mb=A.Gb,A.nb=A.Uc,A.rc=null,ue=1),ue=!ue),!ue){ue=A.ga;var he=A.Fa,me=A.P,_e=A.qc,Oe=A.mb,qe=A.nb,Ke=me+1,Fe=_e-1,rt=ue.l;if(e(he!=null&&Oe!=null&&L!=null),yu[0]=null,yu[1]=qd,yu[2]=m0,yu[3]=hu,ue.ca=Oe,ue.tb=qe,ue.c=L.width,ue.i=L.height,e(0<ue.c&&0<ue.i),1>=_e)L=0;else if(ue.$a=he[me+0]>>0&3,ue.Z=he[me+0]>>2&3,ue.Lc=he[me+0]>>4&3,me=he[me+0]>>6&3,0>ue.$a||1<ue.$a||4<=ue.Z||1<ue.Lc||me)L=0;else if(rt.put=$a,rt.ac=us,rt.bc=Ha,rt.ma=ue,rt.width=L.width,rt.height=L.height,rt.Da=L.Da,rt.v=L.v,rt.va=L.va,rt.j=L.j,rt.o=L.o,ue.$a)e:{e(ue.$a==1),L=ho();t:for(;;){if(L==null){L=0;break e}if(e(ue!=null),ue.mc=L,L.c=ue.c,L.i=ue.i,L.l=ue.l,L.l.ma=ue,L.l.width=ue.c,L.l.height=ue.i,L.a=0,Z(L.m,he,Ke,Fe),!Wa(ue.c,ue.i,1,L,null)||(L.ab==1&&L.gc[0].hc==3&&oc(L.s)?(ue.ic=1,he=L.c*L.i,L.Ta=null,L.Ua=0,L.V=i(he),L.Ba=0,L.V==null?(L.a=1,L=0):L=1):(ue.ic=0,L=zd(L,ue.c)),!L))break t;L=1;break e}ue.mc=null,L=0}else L=Fe>=ue.c*ue.i;ue=!L}if(ue)return null;A.ga.Lc!=1?A.Ga=0:Q=ce-H}e(A.ga!=null),e(H+Q<=ce);e:{if(L=(he=A.ga).c,ce=he.l.o,he.$a==0){if(Ke=A.rc,Fe=A.Vc,rt=A.Fa,me=A.P+1+H*L,_e=A.mb,Oe=A.nb+H*L,e(me<=A.P+A.qc),he.Z!=0)for(e(yu[he.Z]!=null),ue=0;ue<Q;++ue)yu[he.Z](Ke,Fe,rt,me,_e,Oe,L),Ke=_e,Fe=Oe,Oe+=L,me+=L;else for(ue=0;ue<Q;++ue)r(_e,Oe,rt,me,L),Ke=_e,Fe=Oe,Oe+=L,me+=L;A.rc=Ke,A.Vc=Fe}else{if(e(he.mc!=null),L=H+Q,e((ue=he.mc)!=null),e(L<=ue.i),ue.C>=L)L=1;else if(he.ic||He(),he.ic){he=ue.V,Ke=ue.Ba,Fe=ue.c;var Je=ue.i,De=(rt=1,me=ue.$/Fe,_e=ue.$%Fe,Oe=ue.m,qe=ue.s,ue.$),Me=Fe*Je,et=Fe*L,at=qe.wc,nt=De<et?Rr(qe,_e,me):null;e(De<=Me),e(L<=Je),e(oc(qe));t:for(;;){for(;!Oe.h&&De<et;){if(_e&at||(nt=Rr(qe,_e,me)),e(nt!=null),re(Oe),256>(Je=gi(nt.G[0],nt.H[0],Oe)))he[Ke+De]=Je,++De,++_e>=Fe&&(_e=0,++me<=L&&!(me%16)&&na(ue,me));else{if(!(280>Je)){rt=0;break t}Je=ea(Je-256,Oe);var wt,mt=gi(nt.G[4],nt.H[4],Oe);if(re(Oe),!(De>=(mt=za(Fe,mt=ea(mt,Oe)))&&Me-De>=Je)){rt=0;break t}for(wt=0;wt<Je;++wt)he[Ke+De+wt]=he[Ke+De+wt-mt];for(De+=Je,_e+=Je;_e>=Fe;)_e-=Fe,++me<=L&&!(me%16)&&na(ue,me);De<et&&_e&at&&(nt=Rr(qe,_e,me))}e(Oe.h==V(Oe))}na(ue,me>L?L:me);break t}!rt||Oe.h&&De<Me?(rt=0,ue.a=Oe.h?5:3):ue.$=De,L=rt}else L=ra(ue,ue.V,ue.Ba,ue.c,ue.i,L,Qf);if(!L){Q=0;break e}}H+Q>=ce&&(A.Cc=1),Q=1}if(!Q)return null;if(A.Cc&&((Q=A.ga)!=null&&(Q.mc=null),A.ga=null,0<A.Ga))return alert("todo:WebPDequantizeLevels"),null}return A.nb+H*oe}function B(A,L,H,Q,oe,ce){for(;0<oe--;){var ue,he=A,me=L+(H?1:0),_e=A,Oe=L+(H?0:3);for(ue=0;ue<Q;++ue){var qe=_e[Oe+4*ue];qe!=255&&(qe*=32897,he[me+4*ue+0]=he[me+4*ue+0]*qe>>23,he[me+4*ue+1]=he[me+4*ue+1]*qe>>23,he[me+4*ue+2]=he[me+4*ue+2]*qe>>23)}L+=ce}}function ae(A,L,H,Q,oe){for(;0<Q--;){var ce;for(ce=0;ce<H;++ce){var ue=A[L+2*ce+0],he=15&(_e=A[L+2*ce+1]),me=4369*he,_e=(240&_e|_e>>4)*me>>16;A[L+2*ce+0]=(240&ue|ue>>4)*me>>16&240|(15&ue|ue<<4)*me>>16>>4&15,A[L+2*ce+1]=240&_e|he}L+=oe}}function Ee(A,L,H,Q,oe,ce,ue,he){var me,_e,Oe=255;for(_e=0;_e<oe;++_e){for(me=0;me<Q;++me){var qe=A[L+me];ce[ue+4*me]=qe,Oe&=qe}L+=H,ue+=he}return Oe!=255}function Re(A,L,H,Q,oe){var ce;for(ce=0;ce<oe;++ce)H[Q+ce]=A[L+ce]>>8}function He(){go=B,Yn=ae,Xn=Ee,Er=Re}function Qe(A,L,H){x[A]=function(Q,oe,ce,ue,he,me,_e,Oe,qe,Ke,Fe,rt,Je,De,Me,et,at){var nt,wt=at-1>>1,mt=he[me+0]|_e[Oe+0]<<16,Dt=qe[Ke+0]|Fe[rt+0]<<16;e(Q!=null);var yt=3*mt+Dt+131074>>2;for(L(Q[oe+0],255&yt,yt>>16,Je,De),ce!=null&&(yt=3*Dt+mt+131074>>2,L(ce[ue+0],255&yt,yt>>16,Me,et)),nt=1;nt<=wt;++nt){var In=he[me+nt]|_e[Oe+nt]<<16,On=qe[Ke+nt]|Fe[rt+nt]<<16,wn=mt+In+Dt+On+524296,an=wn+2*(In+Dt)>>3;yt=an+mt>>1,mt=(wn=wn+2*(mt+On)>>3)+In>>1,L(Q[oe+2*nt-1],255&yt,yt>>16,Je,De+(2*nt-1)*H),L(Q[oe+2*nt-0],255&mt,mt>>16,Je,De+(2*nt-0)*H),ce!=null&&(yt=wn+Dt>>1,mt=an+On>>1,L(ce[ue+2*nt-1],255&yt,yt>>16,Me,et+(2*nt-1)*H),L(ce[ue+2*nt+0],255&mt,mt>>16,Me,et+(2*nt+0)*H)),mt=In,Dt=On}1&at||(yt=3*mt+Dt+131074>>2,L(Q[oe+at-1],255&yt,yt>>16,Je,De+(at-1)*H),ce!=null&&(yt=3*Dt+mt+131074>>2,L(ce[ue+at-1],255&yt,yt>>16,Me,et+(at-1)*H)))}}function ct(){yo[O_]=zue,yo[D_]=aM,yo[nM]=Vue,yo[M_]=lM,yo[j_]=cM,yo[RA]=uM,yo[rM]=Wue,yo[LA]=aM,yo[OA]=lM,yo[F_]=cM,yo[DA]=uM}function _t(A){return A&-16384?0>A?0:255:A>>Gue}function Ot(A,L){return _t((19077*A>>8)+(26149*L>>8)-14234)}function qt(A,L,H){return _t((19077*A>>8)-(6419*L>>8)-(13320*H>>8)+8708)}function Wt(A,L){return _t((19077*A>>8)+(33050*L>>8)-17685)}function pn(A,L,H,Q,oe){Q[oe+0]=Ot(A,H),Q[oe+1]=qt(A,L,H),Q[oe+2]=Wt(A,L)}function ar(A,L,H,Q,oe){Q[oe+0]=Wt(A,L),Q[oe+1]=qt(A,L,H),Q[oe+2]=Ot(A,H)}function fr(A,L,H,Q,oe){var ce=qt(A,L,H);L=ce<<3&224|Wt(A,L)>>3,Q[oe+0]=248&Ot(A,H)|ce>>5,Q[oe+1]=L}function Lr(A,L,H,Q,oe){var ce=240&Wt(A,L)|15;Q[oe+0]=240&Ot(A,H)|qt(A,L,H)>>4,Q[oe+1]=ce}function As(A,L,H,Q,oe){Q[oe+0]=255,pn(A,L,H,Q,oe+1)}function Jr(A,L,H,Q,oe){ar(A,L,H,Q,oe),Q[oe+3]=255}function oa(A,L,H,Q,oe){pn(A,L,H,Q,oe),Q[oe+3]=255}function Fi(A,L){return 0>A?0:A>L?L:A}function Ka(A,L,H){x[A]=function(Q,oe,ce,ue,he,me,_e,Oe,qe){for(var Ke=Oe+(-2&qe)*H;Oe!=Ke;)L(Q[oe+0],ce[ue+0],he[me+0],_e,Oe),L(Q[oe+1],ce[ue+0],he[me+0],_e,Oe+H),oe+=2,++ue,++me,Oe+=2*H;1&qe&&L(Q[oe+0],ce[ue+0],he[me+0],_e,Oe)}}function A_(A,L,H){return H==0?A==0?L==0?6:5:L==0?4:0:H}function b0(A,L,H,Q,oe){switch(A>>>30){case 3:dc(L,H,Q,oe,0);break;case 2:wr(L,H,Q,oe);break;case 1:Xs(L,H,Q,oe)}}function y0(A,L){var H,Q,oe=L.M,ce=L.Nb,ue=A.oc,he=A.pc+40,me=A.oc,_e=A.pc+584,Oe=A.oc,qe=A.pc+600;for(H=0;16>H;++H)ue[he+32*H-1]=129;for(H=0;8>H;++H)me[_e+32*H-1]=129,Oe[qe+32*H-1]=129;for(0<oe?ue[he-1-32]=me[_e-1-32]=Oe[qe-1-32]=129:(s(ue,he-32-1,127,21),s(me,_e-32-1,127,9),s(Oe,qe-32-1,127,9)),Q=0;Q<A.za;++Q){var Ke=L.ya[L.aa+Q];if(0<Q){for(H=-1;16>H;++H)r(ue,he+32*H-4,ue,he+32*H+12,4);for(H=-1;8>H;++H)r(me,_e+32*H-4,me,_e+32*H+4,4),r(Oe,qe+32*H-4,Oe,qe+32*H+4,4)}var Fe=A.Gd,rt=A.Hd+Q,Je=Ke.ad,De=Ke.Hc;if(0<oe&&(r(ue,he-32,Fe[rt].y,0,16),r(me,_e-32,Fe[rt].f,0,8),r(Oe,qe-32,Fe[rt].ea,0,8)),Ke.Za){var Me=ue,et=he-32+16;for(0<oe&&(Q>=A.za-1?s(Me,et,Fe[rt].y[15],4):r(Me,et,Fe[rt+1].y,0,4)),H=0;4>H;H++)Me[et+128+H]=Me[et+256+H]=Me[et+384+H]=Me[et+0+H];for(H=0;16>H;++H,De<<=2)Me=ue,et=he+hM[H],aa[Ke.Ob[H]](Me,et),b0(De,Je,16*+H,Me,et)}else if(Me=A_(Q,oe,Ke.Ob[0]),bu[Me](ue,he),De!=0)for(H=0;16>H;++H,De<<=2)b0(De,Je,16*+H,ue,he+hM[H]);for(H=Ke.Gc,Me=A_(Q,oe,Ke.Dd),fc[Me](me,_e),fc[Me](Oe,qe),De=Je,Me=me,et=_e,255&(Ke=H>>0)&&(170&Ke?E0(De,256,Me,et):po(De,256,Me,et)),Ke=Oe,De=qe,255&(H>>=8)&&(170&H?E0(Je,320,Ke,De):po(Je,320,Ke,De)),oe<A.Ub-1&&(r(Fe[rt].y,0,ue,he+480,16),r(Fe[rt].f,0,me,_e+224,8),r(Fe[rt].ea,0,Oe,qe+224,8)),H=8*ce*A.B,Fe=A.sa,rt=A.ta+16*Q+16*ce*A.R,Je=A.qa,Ke=A.ra+8*Q+H,De=A.Ha,Me=A.Ia+8*Q+H,H=0;16>H;++H)r(Fe,rt+H*A.R,ue,he+32*H,16);for(H=0;8>H;++H)r(Je,Ke+H*A.B,me,_e+32*H,8),r(De,Me+H*A.B,Oe,qe+32*H,8)}}function fp(A,L,H,Q,oe,ce,ue,he,me){var _e=[0],Oe=[0],qe=0,Ke=me!=null?me.kd:0,Fe=me??new f0;if(A==null||12>H)return 7;Fe.data=A,Fe.w=L,Fe.ha=H,L=[L],H=[H],Fe.gb=[Fe.gb];e:{var rt=L,Je=H,De=Fe.gb;if(e(A!=null),e(Je!=null),e(De!=null),De[0]=0,12<=Je[0]&&!n(A,rt[0],"RIFF")){if(n(A,rt[0]+8,"WEBP")){De=3;break e}var Me=ke(A,rt[0]+4);if(12>Me||4294967286<Me){De=3;break e}if(Ke&&Me>Je[0]-8){De=7;break e}De[0]=Me,rt[0]+=12,Je[0]-=12}De=0}if(De!=0)return De;for(Me=0<Fe.gb[0],H=H[0];;){e:{var et=A;Je=L,De=H;var at=_e,nt=Oe,wt=rt=[0];if((yt=qe=[qe])[0]=0,8>De[0])De=7;else{if(!n(et,Je[0],"VP8X")){if(ke(et,Je[0]+4)!=10){De=3;break e}if(18>De[0]){De=7;break e}var mt=ke(et,Je[0]+8),Dt=1+Te(et,Je[0]+12);if(2147483648<=Dt*(et=1+Te(et,Je[0]+15))){De=3;break e}wt!=null&&(wt[0]=mt),at!=null&&(at[0]=Dt),nt!=null&&(nt[0]=et),Je[0]+=18,De[0]-=18,yt[0]=1}De=0}}if(qe=qe[0],rt=rt[0],De!=0)return De;if(Je=!!(2&rt),!Me&&qe)return 3;if(ce!=null&&(ce[0]=!!(16&rt)),ue!=null&&(ue[0]=Je),he!=null&&(he[0]=0),ue=_e[0],rt=Oe[0],qe&&Je&&me==null){De=0;break}if(4>H){De=7;break}if(Me&&qe||!Me&&!qe&&!n(A,L[0],"ALPH")){H=[H],Fe.na=[Fe.na],Fe.P=[Fe.P],Fe.Sa=[Fe.Sa];e:{mt=A,De=L,Me=H;var yt=Fe.gb;at=Fe.na,nt=Fe.P,wt=Fe.Sa,Dt=22,e(mt!=null),e(Me!=null),et=De[0];var In=Me[0];for(e(at!=null),e(wt!=null),at[0]=null,nt[0]=null,wt[0]=0;;){if(De[0]=et,Me[0]=In,8>In){De=7;break e}var On=ke(mt,et+4);if(4294967286<On){De=3;break e}var wn=8+On+1&-2;if(Dt+=wn,0<yt&&Dt>yt){De=3;break e}if(!n(mt,et,"VP8 ")||!n(mt,et,"VP8L")){De=0;break e}if(In[0]<wn){De=7;break e}n(mt,et,"ALPH")||(at[0]=mt,nt[0]=et+8,wt[0]=On),et+=wn,In-=wn}}if(H=H[0],Fe.na=Fe.na[0],Fe.P=Fe.P[0],Fe.Sa=Fe.Sa[0],De!=0)break}H=[H],Fe.Ja=[Fe.Ja],Fe.xa=[Fe.xa];e:if(yt=A,De=L,Me=H,at=Fe.gb[0],nt=Fe.Ja,wt=Fe.xa,mt=De[0],et=!n(yt,mt,"VP8 "),Dt=!n(yt,mt,"VP8L"),e(yt!=null),e(Me!=null),e(nt!=null),e(wt!=null),8>Me[0])De=7;else{if(et||Dt){if(yt=ke(yt,mt+4),12<=at&&yt>at-12){De=3;break e}if(Ke&&yt>Me[0]-8){De=7;break e}nt[0]=yt,De[0]+=8,Me[0]-=8,wt[0]=Dt}else wt[0]=5<=Me[0]&&yt[mt+0]==47&&!(yt[mt+4]>>5),nt[0]=Me[0];De=0}if(H=H[0],Fe.Ja=Fe.Ja[0],Fe.xa=Fe.xa[0],L=L[0],De!=0)break;if(4294967286<Fe.Ja)return 3;if(he==null||Je||(he[0]=Fe.xa?2:1),ue=[ue],rt=[rt],Fe.xa){if(5>H){De=7;break}he=ue,Ke=rt,Je=ce,A==null||5>H?A=0:5<=H&&A[L+0]==47&&!(A[L+4]>>5)?(Me=[0],yt=[0],at=[0],Z(nt=new D,A,L,H),Ft(nt,Me,yt,at)?(he!=null&&(he[0]=Me[0]),Ke!=null&&(Ke[0]=yt[0]),Je!=null&&(Je[0]=at[0]),A=1):A=0):A=0}else{if(10>H){De=7;break}he=rt,A==null||10>H||!d_(A,L+3,H-3)?A=0:(Ke=A[L+0]|A[L+1]<<8|A[L+2]<<16,Je=16383&(A[L+7]<<8|A[L+6]),A=16383&(A[L+9]<<8|A[L+8]),1&Ke||3<(Ke>>1&7)||!(Ke>>4&1)||Ke>>5>=Fe.Ja||!Je||!A?A=0:(ue&&(ue[0]=Je),he&&(he[0]=A),A=1))}if(!A||(ue=ue[0],rt=rt[0],qe&&(_e[0]!=ue||Oe[0]!=rt)))return 3;me!=null&&(me[0]=Fe,me.offset=L-me.w,e(4294967286>L-me.w),e(me.offset==me.ha-H));break}return De==0||De==7&&qe&&me==null?(ce!=null&&(ce[0]|=Fe.na!=null&&0<Fe.na.length),Q!=null&&(Q[0]=ue),oe!=null&&(oe[0]=rt),0):De}function v0(A,L,H){var Q=L.width,oe=L.height,ce=0,ue=0,he=Q,me=oe;if(L.Da=A!=null&&0<A.Da,L.Da&&(he=A.cd,me=A.bd,ce=A.v,ue=A.j,11>H||(ce&=-2,ue&=-2),0>ce||0>ue||0>=he||0>=me||ce+he>Q||ue+me>oe))return 0;if(L.v=ce,L.j=ue,L.va=ce+he,L.o=ue+me,L.U=he,L.T=me,L.da=A!=null&&0<A.da,L.da){if(!le(he,me,H=[A.ib],ce=[A.hb]))return 0;L.ib=H[0],L.hb=ce[0]}return L.ob=A!=null&&A.ob,L.Kb=A==null||!A.Sd,L.da&&(L.ob=L.ib<3*Q/4&&L.hb<3*oe/4,L.Kb=0),1}function _0(A){if(A==null)return 2;if(11>A.S){var L=A.f.RGBA;L.fb+=(A.height-1)*L.A,L.A=-L.A}else L=A.f.kb,A=A.height,L.O+=(A-1)*L.fa,L.fa=-L.fa,L.N+=(A-1>>1)*L.Ab,L.Ab=-L.Ab,L.W+=(A-1>>1)*L.Db,L.Db=-L.Db,L.F!=null&&(L.J+=(A-1)*L.lb,L.lb=-L.lb);return 0}function pp(A,L,H,Q){if(Q==null||0>=A||0>=L)return 2;if(H!=null){if(H.Da){var oe=H.cd,ce=H.bd,ue=-2&H.v,he=-2&H.j;if(0>ue||0>he||0>=oe||0>=ce||ue+oe>A||he+ce>L)return 2;A=oe,L=ce}if(H.da){if(!le(A,L,oe=[H.ib],ce=[H.hb]))return 2;A=oe[0],L=ce[0]}}Q.width=A,Q.height=L;e:{var me=Q.width,_e=Q.height;if(A=Q.S,0>=me||0>=_e||!(A>=O_&&13>A))A=2;else{if(0>=Q.Rd&&Q.sd==null){ue=ce=oe=L=0;var Oe=(he=me*fM[A])*_e;if(11>A||(ce=(_e+1)/2*(L=(me+1)/2),A==12&&(ue=(oe=me)*_e)),(_e=i(Oe+2*ce+ue))==null){A=1;break e}Q.sd=_e,11>A?((me=Q.f.RGBA).eb=_e,me.fb=0,me.A=he,me.size=Oe):((me=Q.f.kb).y=_e,me.O=0,me.fa=he,me.Fd=Oe,me.f=_e,me.N=0+Oe,me.Ab=L,me.Cd=ce,me.ea=_e,me.W=0+Oe+ce,me.Db=L,me.Ed=ce,A==12&&(me.F=_e,me.J=0+Oe+2*ce),me.Tc=ue,me.lb=oe)}if(L=1,oe=Q.S,ce=Q.width,ue=Q.height,oe>=O_&&13>oe)if(11>oe)A=Q.f.RGBA,L&=(he=Math.abs(A.A))*(ue-1)+ce<=A.size,L&=he>=ce*fM[oe],L&=A.eb!=null;else{A=Q.f.kb,he=(ce+1)/2,Oe=(ue+1)/2,me=Math.abs(A.fa),_e=Math.abs(A.Ab);var qe=Math.abs(A.Db),Ke=Math.abs(A.lb),Fe=Ke*(ue-1)+ce;L&=me*(ue-1)+ce<=A.Fd,L&=_e*(Oe-1)+he<=A.Cd,L=(L&=qe*(Oe-1)+he<=A.Ed)&me>=ce&_e>=he&qe>=he,L&=A.y!=null,L&=A.f!=null,L&=A.ea!=null,oe==12&&(L&=Ke>=ce,L&=Fe<=A.Tc,L&=A.F!=null)}else L=0;A=L?0:2}}return A!=0||H!=null&&H.fd&&(A=_0(Q)),A}var ds=64,mp=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],gp=24,bp=32,x0=8,yi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ce("Predictor0","PredictorAdd0"),x.Predictor0=function(){return 4278190080},x.Predictor1=function(A){return A},x.Predictor2=function(A,L,H){return L[H+0]},x.Predictor3=function(A,L,H){return L[H+1]},x.Predictor4=function(A,L,H){return L[H-1]},x.Predictor5=function(A,L,H){return xe(xe(A,L[H+1]),L[H+0])},x.Predictor6=function(A,L,H){return xe(A,L[H-1])},x.Predictor7=function(A,L,H){return xe(A,L[H+0])},x.Predictor8=function(A,L,H){return xe(L[H-1],L[H+0])},x.Predictor9=function(A,L,H){return xe(L[H+0],L[H+1])},x.Predictor10=function(A,L,H){return xe(xe(A,L[H-1]),xe(L[H+0],L[H+1]))},x.Predictor11=function(A,L,H){var Q=L[H+0];return 0>=Be(Q>>24&255,A>>24&255,(L=L[H-1])>>24&255)+Be(Q>>16&255,A>>16&255,L>>16&255)+Be(Q>>8&255,A>>8&255,L>>8&255)+Be(255&Q,255&A,255&L)?Q:A},x.Predictor12=function(A,L,H){var Q=L[H+0];return($e((A>>24&255)+(Q>>24&255)-((L=L[H-1])>>24&255))<<24|$e((A>>16&255)+(Q>>16&255)-(L>>16&255))<<16|$e((A>>8&255)+(Q>>8&255)-(L>>8&255))<<8|$e((255&A)+(255&Q)-(255&L)))>>>0},x.Predictor13=function(A,L,H){var Q=L[H-1];return(je((A=xe(A,L[H+0]))>>24&255,Q>>24&255)<<24|je(A>>16&255,Q>>16&255)<<16|je(A>>8&255,Q>>8&255)<<8|je(A>>0&255,Q>>0&255))>>>0};var PA=x.PredictorAdd0;x.PredictorAdd1=Ae,Ce("Predictor2","PredictorAdd2"),Ce("Predictor3","PredictorAdd3"),Ce("Predictor4","PredictorAdd4"),Ce("Predictor5","PredictorAdd5"),Ce("Predictor6","PredictorAdd6"),Ce("Predictor7","PredictorAdd7"),Ce("Predictor8","PredictorAdd8"),Ce("Predictor9","PredictorAdd9"),Ce("Predictor10","PredictorAdd10"),Ce("Predictor11","PredictorAdd11"),Ce("Predictor12","PredictorAdd12"),Ce("Predictor13","PredictorAdd13");var w0=x.PredictorAdd2;ie("ColorIndexInverseTransform","MapARGB","32b",function(A){return A>>8&255},function(A){return A}),ie("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(A){return A},function(A){return A>>8&255});var T_,fo=x.ColorIndexInverseTransform,yp=x.MapARGB,N_=x.VP8LColorIndexInverseTransformAlpha,P_=x.MapAlpha,fu=x.VP8LPredictorsAdd=[];fu.length=16,(x.VP8LPredictors=[]).length=16,(x.VP8LPredictorsAdd_C=[]).length=16,(x.VP8LPredictors_C=[]).length=16;var Kd,vi,Ys,pu,cc,uc,vp,dc,wr,E0,Xs,po,_p,I_,S0,Yd,Xd,mu,Jd,xp,Zd,gu,k0,mo,go,Yn,Xn,Er,$r=i(511),hc=i(2041),C0=i(225),wp=i(767),R_=0,IA=hc,L_=C0,Bi=wp,bo=$r,O_=0,D_=1,nM=2,M_=3,j_=4,RA=5,rM=6,LA=7,OA=8,F_=9,DA=10,Nue=[2,3,7],Pue=[3,3,11],sM=[280,256,256,256,40],Iue=[0,1,1,1,0],Rue=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Lue=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Oue=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Due=8,MA=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],jA=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],A0=null,Mue=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],jue=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],iM=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Fue=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Bue=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Uue=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],$ue=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],bu=[],aa=[],fc=[],Hue=1,oM=2,yu=[],yo=[];Qe("UpsampleRgbLinePair",pn,3),Qe("UpsampleBgrLinePair",ar,3),Qe("UpsampleRgbaLinePair",oa,4),Qe("UpsampleBgraLinePair",Jr,4),Qe("UpsampleArgbLinePair",As,4),Qe("UpsampleRgba4444LinePair",Lr,2),Qe("UpsampleRgb565LinePair",fr,2);var zue=x.UpsampleRgbLinePair,Vue=x.UpsampleBgrLinePair,aM=x.UpsampleRgbaLinePair,lM=x.UpsampleBgraLinePair,cM=x.UpsampleArgbLinePair,uM=x.UpsampleRgba4444LinePair,Wue=x.UpsampleRgb565LinePair,B_=16,U_=1<<B_-1,T0=-227,FA=482,Gue=6,dM=0,que=i(256),Kue=i(256),Yue=i(256),Xue=i(256),Jue=i(FA-T0),Zue=i(FA-T0);Ka("YuvToRgbRow",pn,3),Ka("YuvToBgrRow",ar,3),Ka("YuvToRgbaRow",oa,4),Ka("YuvToBgraRow",Jr,4),Ka("YuvToArgbRow",As,4),Ka("YuvToRgba4444Row",Lr,2),Ka("YuvToRgb565Row",fr,2);var hM=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],$_=[0,2,8],Que=[8,7,6,4,4,2,2,2,1,1,1,1],ede=1;this.WebPDecodeRGBA=function(A,L,H,Q,oe){var ce=D_,ue=new dp,he=new Kt;ue.ba=he,he.S=ce,he.width=[he.width],he.height=[he.height];var me=he.width,_e=he.height,Oe=new Ks;if(Oe==null||A==null)var qe=2;else e(Oe!=null),qe=fp(A,L,H,Oe.width,Oe.height,Oe.Pd,Oe.Qd,Oe.format,null);if(qe!=0?me=0:(me!=null&&(me[0]=Oe.width[0]),_e!=null&&(_e[0]=Oe.height[0]),me=1),me){he.width=he.width[0],he.height=he.height[0],Q!=null&&(Q[0]=he.width),oe!=null&&(oe[0]=he.height);e:{if(Q=new sp,(oe=new f0).data=A,oe.w=L,oe.ha=H,oe.kd=1,L=[0],e(oe!=null),((A=fp(oe.data,oe.w,oe.ha,null,null,null,L,null,oe))==0||A==7)&&L[0]&&(A=4),(L=A)==0){if(e(ue!=null),Q.data=oe.data,Q.w=oe.w+oe.offset,Q.ha=oe.ha-oe.offset,Q.put=$a,Q.ac=us,Q.bc=Ha,Q.ma=ue,oe.xa){if((A=ho())==null){ue=1;break e}if(function(Ke,Fe){var rt=[0],Je=[0],De=[0];t:for(;;){if(Ke==null)return 0;if(Fe==null)return Ke.a=2,0;if(Ke.l=Fe,Ke.a=0,Z(Ke.m,Fe.data,Fe.w,Fe.ha),!Ft(Ke.m,rt,Je,De)){Ke.a=3;break t}if(Ke.xb=oM,Fe.width=rt[0],Fe.height=Je[0],!Wa(rt[0],Je[0],1,Ke,null))break t;return 1}return e(Ke.a!=0),0}(A,Q)){if(Q=(L=pp(Q.width,Q.height,ue.Oa,ue.ba))==0){t:{Q=A;n:for(;;){if(Q==null){Q=0;break t}if(e(Q.s.yc!=null),e(Q.s.Ya!=null),e(0<Q.s.Wb),e((H=Q.l)!=null),e((oe=H.ma)!=null),Q.xb!=0){if(Q.ca=oe.ba,Q.tb=oe.tb,e(Q.ca!=null),!v0(oe.Oa,H,M_)){Q.a=2;break n}if(!zd(Q,H.width)||H.da)break n;if((H.da||At(Q.ca.S))&&He(),11>Q.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Q.ca.f.kb.F!=null&&He()),Q.Pb&&0<Q.s.ua&&Q.s.vb.X==null&&!K(Q.s.vb,Q.s.Wa.Xa)){Q.a=1;break n}Q.xb=0}if(!ra(Q,Q.V,Q.Ba,Q.c,Q.i,H.o,Zf))break n;oe.Dc=Q.Ma,Q=1;break t}e(Q.a!=0),Q=0}Q=!Q}Q&&(L=A.a)}else L=A.a}else{if((A=new dA)==null){ue=1;break e}if(A.Fa=oe.na,A.P=oe.P,A.qc=oe.Sa,h_(A,Q)){if((L=pp(Q.width,Q.height,ue.Oa,ue.ba))==0){if(A.Aa=0,H=ue.Oa,e((oe=A)!=null),H!=null){if(0<(me=0>(me=H.Md)?0:100<me?255:255*me/100)){for(_e=Oe=0;4>_e;++_e)12>(qe=oe.pb[_e]).lc&&(qe.ia=me*Que[0>qe.lc?0:qe.lc]>>3),Oe|=qe.ia;Oe&&(alert("todo:VP8InitRandom"),oe.ia=1)}oe.Ga=H.Id,100<oe.Ga?oe.Ga=100:0>oe.Ga&&(oe.Ga=0)}hA(A,Q)||(L=A.a)}}else L=A.a}L==0&&ue.Oa!=null&&ue.Oa.fd&&(L=_0(ue.ba))}ue=L}ce=ue!=0?null:11>ce?he.f.RGBA.eb:he.f.kb.y}else ce=null;return ce};var fM=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(x,I){for(var R="",C=0;C<4;C++)R+=String.fromCharCode(x[I++]);return R}function u(x,I){return(x[I+0]<<0|x[I+1]<<8|x[I+2]<<16)>>>0}function d(x,I){return(x[I+0]<<0|x[I+1]<<8|x[I+2]<<16|x[I+3]<<24)>>>0}new l;var h=[0],f=[0],g=[],y=new l,m=t,b=function(x,I){var R={},C=0,N=!1,O=0,P=0;if(R.frames=[],!function(j,V,W,re){for(var te=0;te<re;te++)if(j[V+te]!=W.charCodeAt(te))return!0;return!1}(x,I,"RIFF",4)){var $,ee;for(d(x,I+=4),I+=8;I<x.length;){var J=c(x,I),Z=d(x,I+=4);I+=4;var M=Z+(1&Z);switch(J){case"VP8 ":case"VP8L":R.frames[C]===void 0&&(R.frames[C]={}),(D=R.frames[C]).src_off=N?P:I-8,D.src_size=O+Z+8,C++,N&&(N=!1,O=0,P=0);break;case"VP8X":(D=R.header={}).feature_flags=x[I];var F=I+4;D.canvas_width=1+u(x,F),F+=3,D.canvas_height=1+u(x,F),F+=3;break;case"ALPH":N=!0,O=M+8,P=I-8;break;case"ANIM":(D=R.header).bgcolor=d(x,I),F=I+4,D.loop_count=($=x)[(ee=F)+0]<<0|$[ee+1]<<8,F+=2;break;case"ANMF":var G,D;(D=R.frames[C]={}).offset_x=2*u(x,I),I+=3,D.offset_y=2*u(x,I),I+=3,D.width=1+u(x,I),I+=3,D.height=1+u(x,I),I+=3,D.duration=u(x,I),I+=3,G=x[I++],D.dispose=1&G,D.blend=G>>1&1}J!="ANMF"&&(I+=M)}return R}}(m,0);b.response=m,b.rgbaoutput=!0,b.dataurl=!1;var v=b.header?b.header:null,_=b.frames?b.frames:null;if(v){v.loop_counter=v.loop_count,h=[v.canvas_height],f=[v.canvas_width];for(var E=0;E<_.length&&_[E].blend!=0;E++);}var w=_[0],S=y.WebPDecodeRGBA(m,w.src_off,w.src_size,f,h);w.rgba=S,w.imgwidth=f[0],w.imgheight=h[0];for(var k=0;k<f[0]*h[0]*4;k++)g[k]=S[k];return this.width=f,this.height=h,this.data=g,this}(function(t){var e=function(){return typeof VP=="function"},n=function(h,f,g,y){var m=4,b=o;switch(y){case t.image_compression.FAST:m=1,b=i;break;case t.image_compression.MEDIUM:m=6,b=a;break;case t.image_compression.SLOW:m=9,b=l}h=r(h,f,g,b);var v=VP(h,{level:m});return t.__addimage__.arrayBufferToBinaryString(v)},r=function(h,f,g,y){for(var m,b,v,_=h.length/f,E=new Uint8Array(h.length+_),w=u(),S=0;S<_;S+=1){if(v=S*f,m=h.subarray(v,v+f),y)E.set(y(m,g,b),v+S);else{for(var k,x=w.length,I=[];k<x;k+=1)I[k]=w[k](m,g,b);var R=d(I.concat());E.set(I[R],v+S)}b=m}return E},s=function(h){var f=Array.apply([],h);return f.unshift(0),f},i=function(h,f){var g,y=[],m=h.length;y[0]=1;for(var b=0;b<m;b+=1)g=h[b-f]||0,y[b+1]=h[b]-g+256&255;return y},o=function(h,f,g){var y,m=[],b=h.length;m[0]=2;for(var v=0;v<b;v+=1)y=g&&g[v]||0,m[v+1]=h[v]-y+256&255;return m},a=function(h,f,g){var y,m,b=[],v=h.length;b[0]=3;for(var _=0;_<v;_+=1)y=h[_-f]||0,m=g&&g[_]||0,b[_+1]=h[_]+256-(y+m>>>1)&255;return b},l=function(h,f,g){var y,m,b,v,_=[],E=h.length;_[0]=4;for(var w=0;w<E;w+=1)y=h[w-f]||0,m=g&&g[w]||0,b=g&&g[w-f]||0,v=c(y,m,b),_[w+1]=h[w]-v+256&255;return _},c=function(h,f,g){if(h===f&&f===g)return h;var y=Math.abs(f-g),m=Math.abs(h-g),b=Math.abs(h+f-g-g);return y<=m&&y<=b?h:m<=b?f:g},u=function(){return[s,i,o,a,l]},d=function(h){var f=h.map(function(g){return g.reduce(function(y,m){return y+Math.abs(m)},0)});return f.indexOf(Math.min.apply(null,f))};t.processPNG=function(h,f,g,y){var m,b,v,_,E,w,S,k,x,I,R,C,N,O,P,$=this.decode.FLATE_DECODE,ee="";if(this.__addimage__.isArrayBuffer(h)&&(h=new Uint8Array(h)),this.__addimage__.isArrayBufferView(h)){if(h=(v=new dFe(h)).imgData,b=v.bits,m=v.colorSpace,E=v.colors,[4,6].indexOf(v.colorType)!==-1){if(v.bits===8){x=(k=v.pixelBitlength==32?new Uint32Array(v.decodePixels().buffer):v.pixelBitlength==16?new Uint16Array(v.decodePixels().buffer):new Uint8Array(v.decodePixels().buffer)).length,R=new Uint8Array(x*v.colors),I=new Uint8Array(x);var J,Z=v.pixelBitlength-v.bits;for(O=0,P=0;O<x;O++){for(N=k[O],J=0;J<Z;)R[P++]=N>>>J&255,J+=v.bits;I[O]=N>>>J&255}}if(v.bits===16){x=(k=new Uint32Array(v.decodePixels().buffer)).length,R=new Uint8Array(x*(32/v.pixelBitlength)*v.colors),I=new Uint8Array(x*(32/v.pixelBitlength)),C=v.colors>1,O=0,P=0;for(var M=0;O<x;)N=k[O++],R[P++]=N>>>0&255,C&&(R[P++]=N>>>16&255,N=k[O++],R[P++]=N>>>0&255),I[M++]=N>>>16&255;b=8}y!==t.image_compression.NONE&&e()?(h=n(R,v.width*v.colors,v.colors,y),S=n(I,v.width,1,y)):(h=R,S=I,$=void 0)}if(v.colorType===3&&(m=this.color_spaces.INDEXED,w=v.palette,v.transparency.indexed)){var F=v.transparency.indexed,G=0;for(O=0,x=F.length;O<x;++O)G+=F[O];if((G/=255)===x-1&&F.indexOf(0)!==-1)_=[F.indexOf(0)];else if(G!==x){for(k=v.decodePixels(),I=new Uint8Array(k.length),O=0,x=k.length;O<x;O++)I[O]=F[k[O]];S=n(I,v.width,1)}}var D=function(j){var V;switch(j){case t.image_compression.FAST:V=11;break;case t.image_compression.MEDIUM:V=13;break;case t.image_compression.SLOW:V=14;break;default:V=12}return V}(y);return $===this.decode.FLATE_DECODE&&(ee="/Predictor "+D+" "),ee+="/Colors "+E+" /BitsPerComponent "+b+" /Columns "+v.width,(this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),(S&&this.__addimage__.isArrayBuffer(S)||this.__addimage__.isArrayBufferView(S))&&(S=this.__addimage__.arrayBufferToBinaryString(S)),{alias:g,data:h,index:f,filter:$,decodeParameters:ee,transparency:_,palette:w,sMask:S,predictor:D,width:v.width,height:v.height,bitsPerComponent:b,colorSpace:m}}}})(jt.API),function(t){t.processGIF89A=function(e,n,r,s){var i=new hFe(e),o=i.width,a=i.height,l=[];i.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:o,height:a},u=new m5(100).encode(c,100);return t.processJPEG.call(this,u,n,r,s)},t.processGIF87A=t.processGIF89A}(jt.API),da.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:r,blue:n,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},da.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){Wn.log("bit decode error:"+n)}},da.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,s=0;s<e;s++)for(var i=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*s*4,a=0;a<8&&8*s+a<this.width;a++){var l=this.palette[i>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}n!==0&&(this.pos+=4-n)}},da.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<t;s++){var i=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*s*4,a=i>>4,l=15&i,c=this.palette[a];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*s+1>=this.width)break;c=this.palette[l],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},da.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+4*r;if(s<this.palette.length){var o=this.palette[s];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}t!==0&&(this.pos+=4-t)}},da.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&e)/e*255|0,a=(i>>5&e)/e*255|0,l=(i>>10&e)/e*255|0,c=i>>15?255:0,u=r*this.width*4+4*s;this.data[u]=l,this.data[u+1]=a,this.data[u+2]=o,this.data[u+3]=c}this.pos+=t}},da.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,c=(o>>11)/e*255|0,u=s*this.width*4+4*i;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=a,this.data[u+3]=255}this.pos+=t}},da.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=i,this.data[o+1]=s,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},da.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=i,this.data[a+1]=s,this.data[a+2]=r,this.data[a+3]=o}},da.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,s){var i=new da(e,!1),o=i.width,a=i.height,l={data:i.getData(),width:o,height:a},c=new m5(100).encode(l,100);return t.processJPEG.call(this,c,n,r,s)}}(jt.API),J7.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,s){var i=new J7(e),o=i.width,a=i.height,l={data:i.getData(),width:o,height:a},c=new m5(100).encode(l,100);return t.processJPEG.call(this,c,n,r,s)}}(jt.API),jt.API.processRGBA=function(t,e,n){for(var r=t.data,s=r.length,i=new Uint8Array(s/4*3),o=new Uint8Array(s/4),a=0,l=0,c=0;c<s;c+=4){var u=r[c],d=r[c+1],h=r[c+2],f=r[c+3];i[a++]=u,i[a++]=d,i[a++]=h,o[l++]=f}var g=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:g,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},jt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},jp=jt.API,Mx=jp.getCharWidthsArray=function(t,e){var n,r,s=(e=e||{}).font||this.internal.getFont(),i=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:s.metadata.Unicode.widths,l=a.fof?a.fof:1,c=e.kerning?e.kerning:s.metadata.Unicode.kerning,u=c.fof?c.fof:1,d=e.doKerning!==!1,h=0,f=t.length,g=0,y=a[0]||l,m=[];for(n=0;n<f;n++)r=t.charCodeAt(n),typeof s.metadata.widthOfString=="function"?m.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(r))+o*(1e3/i)||0)/1e3):(h=d&&Bn(c[r])==="object"&&!isNaN(parseInt(c[r][g],10))?c[r][g]/u:0,m.push((a[r]||y)/l+h)),g=r;return m},q7=jp.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return jp.processArabic&&(t=jp.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,s)/n:Mx.apply(this,arguments).reduce(function(i,o){return i+o},0)},K7=function(t,e,n,r){for(var s=[],i=0,o=t.length,a=0;i!==o&&a+e[i]<n;)a+=e[i],i++;s.push(t.slice(0,i));var l=i;for(a=0;i!==o;)a+e[i]>r&&(s.push(t.slice(l,i)),a=0,l=i),a+=e[i],i++;return l!==i&&s.push(t.slice(l,i)),s},Y7=function(t,e,n){n||(n={});var r,s,i,o,a,l,c,u=[],d=[u],h=n.textIndent||0,f=0,g=0,y=t.split(" "),m=Mx.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?y[0].length+2:n.lineIndent||0){var b=Array(l).join(" "),v=[];y.map(function(E){(E=E.split(/\s*\n/)).length>1?v=v.concat(E.map(function(w,S){return(S&&w.length?`
`:"")+w})):v.push(E[0])}),y=v,l=q7.apply(this,[b,n])}for(i=0,o=y.length;i<o;i++){var _=0;if(r=y[i],l&&r[0]==`
`&&(r=r.substr(1),_=1),h+f+(g=(s=Mx.apply(this,[r,n])).reduce(function(E,w){return E+w},0))>e||_){if(g>e){for(a=K7.apply(this,[r,s,e-(h+f),e]),u.push(a.shift()),u=[a.pop()];a.length;)d.push([a.shift()]);g=s.slice(r.length-(u[0]?u[0].length:0)).reduce(function(E,w){return E+w},0)}else u=[r];d.push(u),h=g+l,f=m}else u.push(r),h+=f+g,f=m}return c=l?function(E,w){return(w?b:"")+E.join(" ")}:function(E){return E.join(" ")},d.map(c)},jp.splitTextToSize=function(t,e,n){var r,s=(n=n||{}).fontSize||this.internal.getFontSize(),i=function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var d=this.internal.getFont(u.fontName,u.fontStyle);return d.metadata.Unicode?{widths:d.metadata.Unicode.widths||{0:1},kerning:d.metadata.Unicode.kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/s;i.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=n.lineIndent;var a,l,c=[];for(a=0,l=r.length;a<l;a++)c=c.concat(Y7.apply(this,[r[a],o,i]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},s=0;s<e.length;s++)n[e[s]]="0123456789abcdef"[s],r["0123456789abcdef"[s]]=e[s];var i=function(d){return"0x"+parseInt(d,10).toString(16)},o=t.__fontmetrics__.compress=function(d){var h,f,g,y,m=["{"];for(var b in d){if(h=d[b],isNaN(parseInt(b,10))?f="'"+b+"'":(b=parseInt(b,10),f=(f=i(b).slice(2)).slice(0,-1)+r[f.slice(-1)]),typeof h=="number")h<0?(g=i(h).slice(3),y="-"):(g=i(h).slice(2),y=""),g=y+g.slice(0,-1)+r[g.slice(-1)];else{if(Bn(h)!=="object")throw new Error("Don't know what to do with value type "+Bn(h)+".");g=o(h)}m.push(f+g)}return m.push("}"),m.join("")},a=t.__fontmetrics__.uncompress=function(d){if(typeof d!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,f,g,y,m={},b=1,v=m,_=[],E="",w="",S=d.length-1,k=1;k<S;k+=1)(y=d[k])=="'"?h?(g=h.join(""),h=void 0):h=[]:h?h.push(y):y=="{"?(_.push([v,g]),v={},g=void 0):y=="}"?((f=_.pop())[0][f[1]]=v,g=void 0,v=f[0]):y=="-"?b=-1:g===void 0?n.hasOwnProperty(y)?(E+=n[y],g=parseInt(E,16)*b,b=1,E=""):E+=y:n.hasOwnProperty(y)?(w+=n[y],v[g]=parseInt(w,16)*b,b=1,g=void 0,w=""):w+=y;return m},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},u={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(d){var h=d.font,f=u.Unicode[h.postScriptName];f&&(h.metadata.Unicode={},h.metadata.Unicode.widths=f.widths,h.metadata.Unicode.kerning=f.kerning);var g=c.Unicode[h.postScriptName];g&&(h.metadata.Unicode.encoding=g,h.encoding=g.codePages[0])}])}(jt.API),function(t){var e=function(n){for(var r=n.length,s=new Uint8Array(r),i=0;i<r;i++)s[i]=n.charCodeAt(i);return s};t.API.events.push(["addFont",function(n){var r=void 0,s=n.font,i=n.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(r=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(uy(a)),o.metadata=t.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(s,r)}}])}(jt),function(t){function e(){return(Ut.canvg?Promise.resolve(Ut.canvg):ve(()=>import("./index.es-CbckxSIa.js"),__vite__mapDeps([0,1,2]))).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}jt.API.addSvgAsImage=function(n,r,s,i,o,a,l,c){if(isNaN(r)||isNaN(s))throw Wn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(o))throw Wn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=i,u.height=o;var d=u.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,u.width,u.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return e().then(function(g){return g.fromString(d,n,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(h)}).then(function(){f.addImage(u.toDataURL("image/jpeg",1),r,s,i,o,l,c)})}}(),jt.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var s=0;s<this.internal.pages[r].length;s++)this.internal.pages[r][s]=this.internal.pages[r][s].replace(e,n);return this},jt.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,s,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],c=0,u=0,d=0;function h(g,y){var m,b=!1;for(m=0;m<g.length;m+=1)g[m]===y&&(b=!0);return b}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var f=a.length;for(d=0;d<f;d+=1)n[a[d]].value=n[a[d]].defaultValue,n[a[d]].explicitSet=!1}if(Bn(t)==="object"){for(s in t)if(i=t[s],h(a,s)&&i!==void 0){if(n[s].type==="boolean"&&typeof i=="boolean")n[s].value=i;else if(n[s].type==="name"&&h(n[s].valueSet,i))n[s].value=i;else if(n[s].type==="integer"&&Number.isInteger(i))n[s].value=i;else if(n[s].type==="array"){for(c=0;c<i.length;c+=1)if(r=!0,i[c].length===1&&typeof i[c][0]=="number")l.push(String(i[c]-1));else if(i[c].length>1){for(u=0;u<i[c].length;u+=1)typeof i[c][u]!="number"&&(r=!1);r===!0&&l.push([i[c][0]-1,i[c][1]-1].join(" "))}n[s].value="["+l.join(" ")+"]"}else n[s].value=n[s].defaultValue;n[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var g,y=[];for(g in n)n[g].explicitSet===!0&&(n[g].type==="name"?y.push("/"+g+" /"+n[g].value):y.push("/"+g+" "+n[g].value));y.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+y.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=i.length+o.length+a.length+s.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(s+i+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(jt.API),function(t){var e=t.API,n=e.pdfEscape16=function(i,o){for(var a,l=o.metadata.Unicode.widths,c=["","0","00","000","0000"],u=[""],d=0,h=i.length;d<h;++d){if(a=o.metadata.characterToGlyph(i.charCodeAt(d)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=i.charCodeAt(d),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return u.join("");a=a.toString(16),u.push(c[4-a.length],a)}return u.join("")},r=function(i){var o,a,l,c,u,d,h;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],d=0,h=(a=Object.keys(i).sort(function(f,g){return f-g})).length;d<h;d++)o=a[d],l.length>=100&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(c=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+c+">"));return l.length&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(i){(function(o){var a=o.font,l=o.out,c=o.newObject,u=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var d=a.metadata.Unicode.widths,h=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),f="",g=0;g<h.length;g++)f+=String.fromCharCode(h[g]);var y=c();u({data:f,addLength1:!0,objectId:y}),l("endobj");var m=c();u({data:r(a.metadata.toUnicode),addLength1:!0,objectId:m}),l("endobj");var b=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Yp(a.fontName)),l("/FontFile2 "+y+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var v=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+Yp(a.fontName)),l("/FontDescriptor "+b+" 0 R"),l("/W "+t.API.PDFObject.convert(d)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+m+" 0 R"),l("/BaseFont /"+Yp(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+v+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(i)}]),e.events.push(["putFont",function(i){(function(o){var a=o.font,l=o.out,c=o.newObject,u=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var d=a.metadata.rawData,h="",f=0;f<d.length;f++)h+=String.fromCharCode(d[f]);var g=c();u({data:h,addLength1:!0,objectId:g}),l("endobj");var y=c();u({data:r(a.metadata.toUnicode),addLength1:!0,objectId:y}),l("endobj");var m=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+g+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+Yp(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var b=0;b<a.metadata.hmtx.widths.length;b++)a.metadata.hmtx.widths[b]=parseInt(a.metadata.hmtx.widths[b]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+y+" 0 R/BaseFont/"+Yp(a.fontName)+"/FontDescriptor "+m+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(i)}]);var s=function(i){var o,a=i.text||"",l=i.x,c=i.y,u=i.options||{},d=i.mutex||{},h=d.pdfEscape,f=d.activeFontKey,g=d.fonts,y=f,m="",b=0,v="",_=g[y].encoding;if(g[y].encoding!=="Identity-H")return{text:a,x:l,y:c,options:u,mutex:d};for(v=a,y=f,Array.isArray(a)&&(v=a[0]),b=0;b<v.length;b+=1)g[y].metadata.hasOwnProperty("cmap")&&(o=g[y].metadata.cmap.unicode.codeMap[v[b].charCodeAt(0)]),o||v[b].charCodeAt(0)<256&&g[y].metadata.hasOwnProperty("Unicode")?m+=v[b]:m+="";var E="";return parseInt(y.slice(1))<14||_==="WinAnsiEncoding"?E=h(m,y).split("").map(function(w){return w.charCodeAt(0).toString(16)}).join(""):_==="Identity-H"&&(E=n(m,g[y])),d.isHex=!0,{text:E,x:l,y:c,options:u,mutex:d}};e.events.push(["postProcessText",function(i){var o=i.text||"",a=[],l={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var c=0;for(c=0;c<o.length;c+=1)Array.isArray(o[c])&&o[c].length===3?a.push([s(Object.assign({},l,{text:o[c][0]})).text,o[c][1],o[c][2]]):a.push(s(Object.assign({},l,{text:o[c]})).text);i.text=a}else i.text=s(Object.assign({},l,{text:o})).text}])}(jt),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(jt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var s,i,o,a,l,c,u,d=e,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},y={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},m=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],b=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),v=!1,_=0;this.__bidiEngine__={};var E=function(C){var N=C.charCodeAt(),O=N>>8,P=y[O];return P!==void 0?d[256*P+(255&N)]:O===252||O===253?"AL":b.test(O)?"L":O===8?"R":"N"},w=function(C){for(var N,O=0;O<C.length;O++){if((N=E(C.charAt(O)))==="L")return!1;if(N==="R")return!0}return!1},S=function(C,N,O,P){var $,ee,J,Z,M=N[P];switch(M){case"L":case"R":v=!1;break;case"N":case"AN":break;case"EN":v&&(M="AN");break;case"AL":v=!0,M="R";break;case"WS":M="N";break;case"CS":P<1||P+1>=N.length||($=O[P-1])!=="EN"&&$!=="AN"||(ee=N[P+1])!=="EN"&&ee!=="AN"?M="N":v&&(ee="AN"),M=ee===$?ee:"N";break;case"ES":M=($=P>0?O[P-1]:"B")==="EN"&&P+1<N.length&&N[P+1]==="EN"?"EN":"N";break;case"ET":if(P>0&&O[P-1]==="EN"){M="EN";break}if(v){M="N";break}for(J=P+1,Z=N.length;J<Z&&N[J]==="ET";)J++;M=J<Z&&N[J]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(Z=N.length,J=P+1;J<Z&&N[J]==="NSM";)J++;if(J<Z){var F=C[P],G=F>=1425&&F<=2303||F===64286;if($=N[J],G&&($==="R"||$==="AL")){M="R";break}}}M=P<1||($=N[P-1])==="B"?"N":O[P-1];break;case"B":v=!1,s=!0,M=_;break;case"S":i=!0,M="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":v=!1;break;case"BN":M="N"}return M},k=function(C,N,O){var P=C.split("");return O&&x(P,O,{hiLevel:_}),P.reverse(),N&&N.reverse(),P.join("")},x=function(C,N,O){var P,$,ee,J,Z,M=-1,F=C.length,G=0,D=[],j=_?f:h,V=[];for(v=!1,s=!1,i=!1,$=0;$<F;$++)V[$]=E(C[$]);for(ee=0;ee<F;ee++){if(Z=G,D[ee]=S(C,V,D,ee),P=240&(G=j[Z][g[D[ee]]]),G&=15,N[ee]=J=j[G][5],P>0)if(P===16){for($=M;$<ee;$++)N[$]=1;M=-1}else M=-1;if(j[G][6])M===-1&&(M=ee);else if(M>-1){for($=M;$<ee;$++)N[$]=J;M=-1}V[ee]==="B"&&(N[ee]=0),O.hiLevel|=J}i&&function(W,re,te){for(var Y=0;Y<te;Y++)if(W[Y]==="S"){re[Y]=_;for(var de=Y-1;de>=0&&W[de]==="WS";de--)re[de]=_}}(V,N,F)},I=function(C,N,O,P,$){if(!($.hiLevel<C)){if(C===1&&_===1&&!s)return N.reverse(),void(O&&O.reverse());for(var ee,J,Z,M,F=N.length,G=0;G<F;){if(P[G]>=C){for(Z=G+1;Z<F&&P[Z]>=C;)Z++;for(M=G,J=Z-1;M<J;M++,J--)ee=N[M],N[M]=N[J],N[J]=ee,O&&(ee=O[M],O[M]=O[J],O[J]=ee);G=Z}G++}}},R=function(C,N,O){var P=C.split(""),$={hiLevel:_};return O||(O=[]),x(P,O,$),function(ee,J,Z){if(Z.hiLevel!==0&&u)for(var M,F=0;F<ee.length;F++)J[F]===1&&(M=m.indexOf(ee[F]))>=0&&(ee[F]=m[M+1])}(P,O,$),I(2,P,N,O,$),I(1,P,N,O,$),P.join("")};return this.__bidiEngine__.doBidiReorder=function(C,N,O){if(function($,ee){if(ee)for(var J=0;J<$.length;J++)ee[J]=J;a===void 0&&(a=w($)),c===void 0&&(c=w($))}(C,N),o||!l||c)if(o&&l&&a^c)_=a?1:0,C=k(C,N,O);else if(!o&&l&&c)_=a?1:0,C=R(C,N,O),C=k(C,N);else if(!o||a||l||c){if(o&&!l&&a^c)C=k(C,N),a?(_=0,C=R(C,N,O)):(_=1,C=R(C,N,O),C=k(C,N));else if(o&&a&&!l&&c)_=1,C=R(C,N,O),C=k(C,N);else if(!o&&!l&&a^c){var P=u;a?(_=1,C=R(C,N,O),_=0,u=!1,C=R(C,N,O),u=P):(_=0,C=R(C,N,O),C=k(C,N),_=1,u=!1,C=R(C,N,O),u=P,C=k(C,N))}}else _=0,C=R(C,N,O);else _=a?1:0,C=R(C,N,O);return C},this.__bidiEngine__.setOptions=function(C){C&&(o=C.isInputVisual,l=C.isOutputVisual,a=C.isInputRtl,c=C.isOutputRtl,u=C.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var s=r.text,i=(r.x,r.y,r.options||{}),o=(r.mutex,i.lang,[]);if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,n.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var a=0;for(o=[],a=0;a<s.length;a+=1)Object.prototype.toString.call(s[a])==="[object Array]"?o.push([n.doBidiReorder(s[a][0]),s[a][1],s[a][2]]):o.push([n.doBidiReorder(s[a])]);r.text=o}else r.text=n.doBidiReorder(s);n.setOptions({isInputVisual:!0})}])}(jt),jt.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new Sd(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new AFe(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new fFe(this.contents),this.head=new mFe(this),this.name=new _Fe(this),this.cmap=new Ine(this),this.toUnicode={},this.hhea=new gFe(this),this.maxp=new xFe(this),this.hmtx=new wFe(this),this.post=new yFe(this),this.os2=new bFe(this),this.loca=new CFe(this),this.glyf=new EFe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var o,a,l,c;for(c=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],c.push(Math.round(e*this.scaleFactor));return c}.call(this),this.stemV=0,this.post.exists?(r=255&(s=this.post.italic_angle),32768&(n=s>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var s,i,o,a;for(o=0,i=0,a=(e=""+e).length;0<=a?i<a:i>a;i=0<=a?++i:--i)s=e.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(s))+r*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var ja,Sd=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,s;for(s=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)s.push(this.writeByte(e.charCodeAt(n)));return s},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,s,i,o,a,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^s)+16777216*(255^i)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*s+16777216*i+65536*o+256*a+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,s,i;for(i=[],r=0,s=e.length;r<s;r++)n=e[r],i.push(this.writeByte(n));return i},t}(),fFe=function(){var t;function e(n){var r,s,i;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,s,i,o,a,l,c,u,d,h,f,g,y;for(y in f=Object.keys(n).length,l=Math.log(2),d=16*Math.floor(Math.log(f)/l),o=Math.floor(d/l),u=16*f-d,(s=new Sd).writeInt(this.scalarType),s.writeShort(f),s.writeShort(d),s.writeShort(o),s.writeShort(u),i=16*f,c=s.pos+i,a=null,g=[],n)for(h=n[y],s.writeString(y),s.writeInt(t(h)),s.writeInt(c),s.writeInt(h.length),g=g.concat(h),y==="head"&&(a=c),c+=h.length;c%4;)g.push(0),c++;return s.write(g),r=2981146554-t(s.data),s.pos=a+8,s.writeUInt32(r),s.data},t=function(n){var r,s,i,o;for(n=Rne.call(n);n.length%4;)n.push(0);for(i=new Sd(n),s=0,r=0,o=n.length;r<o;r=r+=4)s+=i.readUInt32();return 4294967295&s},e}(),pFe={}.hasOwnProperty,rc=function(t,e){for(var n in e)pFe.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};ja=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var mFe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rc(e,ja),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new Sd).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),Z7=function(){function t(e,n){var r,s,i,o,a,l,c,u,d,h,f,g,y,m,b,v,_;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(f=e.readUInt16(),h=f/2,e.pos+=6,i=function(){var E,w;for(w=[],l=E=0;0<=h?E<h:E>h;l=0<=h?++E:--E)w.push(e.readUInt16());return w}(),e.pos+=2,y=function(){var E,w;for(w=[],l=E=0;0<=h?E<h:E>h;l=0<=h?++E:--E)w.push(e.readUInt16());return w}(),c=function(){var E,w;for(w=[],l=E=0;0<=h?E<h:E>h;l=0<=h?++E:--E)w.push(e.readUInt16());return w}(),u=function(){var E,w;for(w=[],l=E=0;0<=h?E<h:E>h;l=0<=h?++E:--E)w.push(e.readUInt16());return w}(),s=(this.length-e.pos+this.offset)/2,a=function(){var E,w;for(w=[],l=E=0;0<=s?E<s:E>s;l=0<=s?++E:--E)w.push(e.readUInt16());return w}(),l=b=0,_=i.length;b<_;l=++b)for(m=i[l],r=v=g=y[l];g<=m?v<=m:v>=m;r=g<=m?++v:--v)u[l]===0?o=r+c[l]:(o=a[u[l]/2+(r-g)-(h-l)]||0)!==0&&(o+=c[l]),this.codeMap[r]=65535&o}e.pos=d}return t.encode=function(e,n){var r,s,i,o,a,l,c,u,d,h,f,g,y,m,b,v,_,E,w,S,k,x,I,R,C,N,O,P,$,ee,J,Z,M,F,G,D,j,V,W,re,te,Y,de,ye,Se,Te;switch(P=new Sd,o=Object.keys(e).sort(function(ke,K){return ke-K}),n){case"macroman":for(y=0,m=function(){var ke=[];for(g=0;g<256;++g)ke.push(0);return ke}(),v={0:0},i={},$=0,M=o.length;$<M;$++)v[de=e[s=o[$]]]==null&&(v[de]=++y),i[s]={old:e[s],new:v[e[s]]},m[s]=v[e[s]];return P.writeUInt16(1),P.writeUInt16(0),P.writeUInt32(12),P.writeUInt16(0),P.writeUInt16(262),P.writeUInt16(0),P.write(m),{charMap:i,subtable:P.data,maxGlyphID:y+1};case"unicode":for(N=[],d=[],_=0,v={},r={},b=c=null,ee=0,F=o.length;ee<F;ee++)v[w=e[s=o[ee]]]==null&&(v[w]=++_),r[s]={old:w,new:v[w]},a=v[w]-s,b!=null&&a===c||(b&&d.push(b),N.push(s),c=a),b=s;for(b&&d.push(b),d.push(65535),N.push(65535),R=2*(I=N.length),x=2*Math.pow(Math.log(I)/Math.LN2,2),h=Math.log(x/2)/Math.LN2,k=2*I-x,l=[],S=[],f=[],g=J=0,G=N.length;J<G;g=++J){if(C=N[g],u=d[g],C===65535){l.push(0),S.push(0);break}if(C-(O=r[C].new)>=32768)for(l.push(0),S.push(2*(f.length+I-g)),s=Z=C;C<=u?Z<=u:Z>=u;s=C<=u?++Z:--Z)f.push(r[s].new);else l.push(O-C),S.push(0)}for(P.writeUInt16(3),P.writeUInt16(1),P.writeUInt32(12),P.writeUInt16(4),P.writeUInt16(16+8*I+2*f.length),P.writeUInt16(0),P.writeUInt16(R),P.writeUInt16(x),P.writeUInt16(h),P.writeUInt16(k),te=0,D=d.length;te<D;te++)s=d[te],P.writeUInt16(s);for(P.writeUInt16(0),Y=0,j=N.length;Y<j;Y++)s=N[Y],P.writeUInt16(s);for(ye=0,V=l.length;ye<V;ye++)a=l[ye],P.writeUInt16(a);for(Se=0,W=S.length;Se<W;Se++)E=S[Se],P.writeUInt16(E);for(Te=0,re=f.length;Te<re;Te++)y=f[Te],P.writeUInt16(y);return{charMap:r,subtable:P.data,maxGlyphID:_+1}}},t}(),Ine=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rc(e,ja),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,s,i;for(n.pos=this.offset,this.version=n.readUInt16(),i=n.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)r=new Z7(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var s,i;return r==null&&(r="macroman"),s=Z7.encode(n,r),(i=new Sd).writeUInt16(0),i.writeUInt16(1),s.table=i.data.concat(s.subtable),s},e}(),gFe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rc(e,ja),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),bFe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rc(e,ja),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,s;for(s=[],r=0;r<10;++r)s.push(n.readByte());return s}(),this.charRange=function(){var r,s;for(s=[],r=0;r<4;++r)s.push(n.readInt());return s}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,s;for(s=[],r=0;r<2;r=++r)s.push(n.readInt());return s}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),yFe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rc(e,ja),e.prototype.tag="post",e.prototype.parse=function(n){var r,s,i;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(s=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],i=[];n.pos<this.offset+this.length;)r=n.readByte(),i.push(this.names.push(n.readString(r)));return i;case 151552:return s=n.readUInt16(),this.offsets=n.read(s);case 196608:break;case 262144:return this.map=function(){var a,l,c;for(c=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)c.push(n.readUInt32());return c}.call(this)}},e}(),vFe=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},_Fe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rc(e,ja),e.prototype.tag="name",e.prototype.parse=function(n){var r,s,i,o,a,l,c,u,d,h,f;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),s=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)s.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(c={},o=d=0,h=s.length;d<h;o=++d)i=s[o],n.pos=i.offset,u=n.readString(i.length),a=new vFe(u,i),c[f=i.nameID]==null&&(c[f]=[]),c[i.nameID].push(a);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),xFe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rc(e,ja),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),wFe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rc(e,ja),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,s,i,o,a,l,c;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,d;for(d=[],r=u=0;0<=i?u<i:u>i;r=0<=i?++u:--u)d.push(n.readInt16());return d}(),this.widths=function(){var u,d,h,f;for(f=[],u=0,d=(h=this.metrics).length;u<d;u++)o=h[u],f.push(o.advance);return f}.call(this),s=this.widths[this.widths.length-1],c=[],r=a=0;0<=i?a<i:a>i;r=0<=i?++a:--a)c.push(this.widths.push(s));return c},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),Rne=[].slice,EFe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rc(e,ja),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,s,i,o,a,l,c,u,d,h;return n in this.cache?this.cache[n]:(o=this.file.loca,r=this.file.contents,s=o.indexOf(n),(i=o.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+s,a=(l=new Sd(r.read(i))).readShort(),u=l.readShort(),h=l.readShort(),c=l.readShort(),d=l.readShort(),this.cache[n]=a===-1?new kFe(l,u,h,c,d):new SFe(l,a,u,h,c,d),this.cache[n]))},e.prototype.encode=function(n,r,s){var i,o,a,l,c;for(a=[],o=[],l=0,c=r.length;l<c;l++)i=n[r[l]],o.push(a.length),i&&(a=a.concat(i.encode(s)));return o.push(a.length),{table:a,offsets:o}},e}(),SFe=function(){function t(e,n,r,s,i,o){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=s,this.xMax=i,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),kFe=function(){function t(e,n,r,s,i){var o,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new Sd(Rne.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),CFe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rc(e,ja),e.prototype.tag="loca",e.prototype.parse=function(n){var r,s;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?function(){var i,o;for(o=[],s=0,i=this.length;s<i;s+=2)o.push(2*n.readUInt16());return o}.call(this):function(){var i,o;for(o=[],s=0,i=this.length;s<i;s+=4)o.push(n.readUInt32());return o}.call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var s=new Uint32Array(this.offsets.length),i=0,o=0,a=0;a<s.length;++a)if(s[a]=i,o<r.length&&r[o]==a){++o,s[a]=i;var l=this.offsets[a],c=this.offsets[a+1]-l;c>0&&(i+=c)}for(var u=new Array(4*s.length),d=0;d<s.length;++d)u[4*d+3]=255&s[d],u[4*d+2]=(65280&s[d])>>8,u[4*d+1]=(16711680&s[d])>>16,u[4*d]=(4278190080&s[d])>>24;return u},e}(),AFe=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,s,i;for(n in s=this.font.cmap.tables[0].codeMap,e={},i=this.subset)r=i[n],e[n]=s[r];return e},t.prototype.glyphsFor=function(e){var n,r,s,i,o,a,l;for(s={},o=0,a=e.length;o<a;o++)s[i=e[o]]=this.font.glyf.glyphFor(i);for(i in n=[],s)(r=s[i])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(i in l=this.glyphsFor(n))r=l[i],s[i]=r;return s},t.prototype.encode=function(e,n){var r,s,i,o,a,l,c,u,d,h,f,g,y,m,b;for(s in r=Ine.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),f={0:0},b=r.charMap)f[(l=b[s]).old]=l.new;for(g in h=r.maxGlyphID,o)g in f||(f[g]=h++);return u=function(v){var _,E;for(_ in E={},v)E[v[_]]=_;return E}(f),d=Object.keys(u).sort(function(v,_){return v-_}),y=function(){var v,_,E;for(E=[],v=0,_=d.length;v<_;v++)a=d[v],E.push(u[a]);return E}(),i=this.font.glyf.encode(o,y,f),c=this.font.loca.encode(i.offsets,y),m={cmap:this.font.cmap.raw(),glyf:i.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(m["OS/2"]=this.font.os2.raw()),this.font.directory.encode(m)},t}();jt.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,s,i,o;if(Array.isArray(n))return"["+function(){var a,l,c;for(c=[],a=0,l=n.length;a<l;a++)r=n[a],c.push(e.convert(r));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n?.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(s in i=["<<"],n)o=n[s],i.push("/"+s+" "+e.convert(o));return i.push(">>"),i.join(`
`)}return""+n},e}();const jx=({title:t,deps:e})=>{const[n,r]=T.useState(!1);return e.length===0?null:p.jsxs(_b,{open:n,onOpenChange:r,children:[p.jsxs(xb,{className:Pe("flex w-full items-center justify-between p-4","bg-white dark:bg-[#0A0A0A]","hover:bg-purple-50/50 dark:hover:bg-[#1a1a1a]","border-b border-[#E5E5E5] dark:border-[#1A1A1A]","transition-colors duration-200","first:rounded-t-lg last:rounded-b-lg",{"hover:rounded-lg":!n}),children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"i-ph:package text-bolt-elements-textSecondary w-4 h-4"}),p.jsxs("span",{className:"text-base text-bolt-elements-textPrimary",children:[t," Dependencies (",e.length,")"]})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:n?"Hide":"Show"}),p.jsx("div",{className:Pe("i-ph:caret-down w-4 h-4 transform transition-transform duration-200 text-bolt-elements-textSecondary",n?"rotate-180":"")})]})]}),p.jsx(wb,{children:p.jsx(ZO,{className:Pe("h-[200px] w-full","bg-white dark:bg-[#0A0A0A]","border-b border-[#E5E5E5] dark:border-[#1A1A1A]","last:rounded-b-lg last:border-b-0"),children:p.jsx("div",{className:"space-y-2 p-4",children:e.map(s=>p.jsxs("div",{className:"flex items-center justify-between text-sm",children:[p.jsx("span",{className:"text-bolt-elements-textPrimary",children:s.name}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:s.version})]},s.name))})})})]})};function TFe(){const[t,e]=T.useState(null),[n,r]=T.useState(null),[s,i]=T.useState({isRunning:!1,lastChecked:new Date}),[o,a]=T.useState({systemInfo:!1,webAppInfo:!1,errors:!1,performance:!1}),[l,c]=T.useState({system:!1,webapp:!1,errors:!1,performance:!1}),{providers:u}=jd(),d=It(Lt.logs),h=T.useMemo(()=>Object.values(d).filter(C=>typeof C=="object"&&C!==null&&"level"in C&&C.level==="error"),[d]);T.useEffect(()=>{const C=O=>{Lt.logError(O.message,O.error,{filename:O.filename,lineNumber:O.lineno,columnNumber:O.colno})},N=O=>{Lt.logError("Unhandled Promise Rejection",O.reason)};return window.addEventListener("error",C),window.addEventListener("unhandledrejection",N),()=>{window.removeEventListener("error",C),window.removeEventListener("unhandledrejection",N)}},[]),T.useEffect(()=>{l.errors&&b()},[l.errors]),T.useEffect(()=>{(async()=>{await Promise.all([f(),g()])})()},[]),T.useEffect(()=>{l.system&&f(),l.webapp&&g()},[l.system,l.webapp]),T.useEffect(()=>{if(!l.webapp)return;const C=async()=>{try{const P=await(await fetch("/api/system/git-info")).json();r($=>$?JSON.stringify($.gitInfo)===JSON.stringify(P)?$:{...$,gitInfo:P}:null)}catch(O){console.error("Failed to fetch git info:",O)}};C();const N=setInterval(C,5*60*1e3);return()=>clearInterval(N)},[l.webapp]);const f=async()=>{try{a(re=>({...re,systemInfo:!0}));const C=navigator.userAgent,N=C.includes("Firefox")?"Firefox":C.includes("Chrome")?"Chrome":C.includes("Safari")?"Safari":C.includes("Edge")?"Edge":"Unknown",O=C.match(/(Firefox|Chrome|Safari|Edge)\/([0-9.]+)/)?.[2]||"Unknown",P=performance.memory||{},$=performance.timing,ee=performance.navigation,J=navigator.connection;let Z;try{const re=await navigator.getBattery();Z={charging:re.charging,chargingTime:re.chargingTime,dischargingTime:re.dischargingTime,level:re.level*100}}catch{console.log("Battery API not supported")}let M={quota:0,usage:0,persistent:!1,temporary:!1};try{const re=await navigator.storage.estimate(),te=await navigator.storage.persist();M={quota:re.quota||0,usage:re.usage||0,persistent:te,temporary:!te}}catch{console.log("Storage API not supported")}const F=performance.memory||{},G=F.jsHeapSizeLimit||0,D=F.usedJSHeapSize||0,j=G-D,V=G?D/G*100:0,W={os:navigator.platform,arch:navigator.userAgent.includes("x64")?"x64":navigator.userAgent.includes("arm")?"arm":"unknown",platform:navigator.platform,cpus:navigator.hardwareConcurrency+" cores",memory:{total:y(G),free:y(j),used:y(D),percentage:Math.round(V)},node:"browser",browser:{name:N,version:O,language:navigator.language,userAgent:navigator.userAgent,cookiesEnabled:navigator.cookieEnabled,online:navigator.onLine,platform:navigator.platform,cores:navigator.hardwareConcurrency},screen:{width:window.screen.width,height:window.screen.height,colorDepth:window.screen.colorDepth,pixelRatio:window.devicePixelRatio},time:{timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,offset:new Date().getTimezoneOffset(),locale:navigator.language},performance:{memory:{jsHeapSizeLimit:P.jsHeapSizeLimit||0,totalJSHeapSize:P.totalJSHeapSize||0,usedJSHeapSize:P.usedJSHeapSize||0,usagePercentage:P.totalJSHeapSize?P.usedJSHeapSize/P.totalJSHeapSize*100:0},timing:{loadTime:$.loadEventEnd-$.navigationStart,domReadyTime:$.domContentLoadedEventEnd-$.navigationStart,readyStart:$.fetchStart-$.navigationStart,redirectTime:$.redirectEnd-$.redirectStart,appcacheTime:$.domainLookupStart-$.fetchStart,unloadEventTime:$.unloadEventEnd-$.unloadEventStart,lookupDomainTime:$.domainLookupEnd-$.domainLookupStart,connectTime:$.connectEnd-$.connectStart,requestTime:$.responseEnd-$.requestStart,initDomTreeTime:$.domInteractive-$.responseEnd,loadEventTime:$.loadEventEnd-$.loadEventStart},navigation:{type:ee.type,redirectCount:ee.redirectCount}},network:{downlink:J?.downlink||0,effectiveType:J?.effectiveType||"unknown",rtt:J?.rtt||0,saveData:J?.saveData||!1,type:J?.type||"unknown"},battery:Z,storage:M};e(W),ze.success("System information updated")}catch(C){ze.error("Failed to get system information"),console.error("Failed to get system information:",C)}finally{a(C=>({...C,systemInfo:!1}))}},g=async()=>{try{a($=>({...$,webAppInfo:!0}));const[C,N]=await Promise.all([fetch("/api/system/app-info"),fetch("/api/system/git-info")]);if(!C.ok||!N.ok)throw new Error("Failed to fetch webapp info");const O=await C.json(),P=await N.json();return console.log("Git Info Response:",P),r({...O,gitInfo:P}),ze.success("WebApp information updated"),!0}catch(C){return console.error("Failed to fetch webapp info:",C),ze.error("Failed to fetch webapp information"),r(null),!1}finally{a(C=>({...C,webAppInfo:!1}))}},y=C=>{const N=["B","KB","MB","GB"];let O=C,P=0;for(;O>=1024&&P<N.length-1;)O/=1024,P++;return`${Math.round(O)} ${N[P]}`},m=()=>{try{a(Z=>({...Z,performance:!0}));const C=performance.getEntriesByType("navigation")[0],N=performance.memory,O={loadTime:C.loadEventEnd-C.startTime,domReadyTime:C.domContentLoadedEventEnd-C.startTime,fetchTime:C.responseEnd-C.fetchStart,redirectTime:C.redirectEnd-C.redirectStart,dnsTime:C.domainLookupEnd-C.domainLookupStart,tcpTime:C.connectEnd-C.connectStart,ttfb:C.responseStart-C.requestStart,processingTime:C.loadEventEnd-C.responseEnd},P=performance.getEntriesByType("resource"),$={totalResources:P.length,totalSize:P.reduce((Z,M)=>Z+(M.transferSize||0),0),totalTime:Math.max(...P.map(Z=>Z.duration))},ee=N?{jsHeapSizeLimit:N.jsHeapSizeLimit,totalJSHeapSize:N.totalJSHeapSize,usedJSHeapSize:N.usedJSHeapSize,heapUtilization:N.usedJSHeapSize/N.totalJSHeapSize*100}:null;let J=0;if("requestAnimationFrame"in window){let Z=function(F){if(M.push(F),M.length>10){const G=Math.round(1e4/(F-M[0]));return M.shift(),G}return requestAnimationFrame(Z),0};const M=[];J=Z(performance.now())}Lt.logSystem("Performance Metrics",{timing:O,resources:$,memory:ee,fps:J,timestamp:new Date().toISOString(),navigationEntry:{type:C.type,redirectCount:C.redirectCount}}),ze.success("Performance metrics logged")}catch(C){ze.error("Failed to log performance metrics"),console.error("Failed to log performance metrics:",C)}finally{a(C=>({...C,performance:!1}))}},b=async()=>{try{a(N=>({...N,errors:!0}));const C=h;C.length===0?ze.success("No errors found"):ze.warning(`Found ${C.length} error(s)`)}catch(C){ze.error("Failed to check errors"),console.error("Failed to check errors:",C)}finally{a(C=>({...C,errors:!1}))}},S=[{id:"json",label:"Export as JSON",icon:"i-ph:file-json",handler:()=>{try{const C={timestamp:new Date().toISOString(),system:t,webApp:n,errors:Lt.getLogs().filter($=>$.level==="error"),performance:{memory:performance.memory||{},timing:performance.timing,navigation:performance.navigation}},N=new Blob([JSON.stringify(C,null,2)],{type:"application/json"}),O=window.URL.createObjectURL(N),P=document.createElement("a");P.href=O,P.download=`bolt-debug-info-${new Date().toISOString()}.json`,document.body.appendChild(P),P.click(),window.URL.revokeObjectURL(O),document.body.removeChild(P),ze.success("Debug information exported successfully")}catch(C){console.error("Failed to export debug info:",C),ze.error("Failed to export debug information")}}},{id:"csv",label:"Export as CSV",icon:"i-ph:file-csv",handler:()=>{try{const C={system:t,webApp:n,errors:Lt.getLogs().filter(J=>J.level==="error"),performance:{memory:performance.memory||{},timing:performance.timing,navigation:performance.navigation}},O=[["Category","Key","Value"],...Object.entries(C).flatMap(([J,Z])=>Object.entries(Z||{}).map(([M,F])=>[J,M,typeof F=="object"?JSON.stringify(F):String(F)]))].map(J=>J.join(",")).join(`
`),P=new Blob([O],{type:"text/csv;charset=utf-8;"}),$=window.URL.createObjectURL(P),ee=document.createElement("a");ee.href=$,ee.download=`bolt-debug-info-${new Date().toISOString()}.csv`,document.body.appendChild(ee),ee.click(),window.URL.revokeObjectURL($),document.body.removeChild(ee),ze.success("Debug information exported as CSV")}catch(C){console.error("Failed to export CSV:",C),ze.error("Failed to export debug information as CSV")}}},{id:"pdf",label:"Export as PDF",icon:"i-ph:file-pdf",handler:()=>{try{const C={system:t,webApp:n,errors:Lt.getLogs().filter(j=>j.level==="error"),performance:{memory:performance.memory||{},timing:performance.timing,navigation:performance.navigation}},N=new jt,O=7;let P=20;const $=20,ee=N.internal.pageSize.getWidth(),J=ee-2*$,Z=(j,V,W=0)=>{P>N.internal.pageSize.getHeight()-20&&(N.addPage(),P=$),N.setFontSize(10),N.setTextColor("#374151"),N.setFont("helvetica","bold");const re=j.replace(/([A-Z])/g," $1").trim();N.text(re+":",$+W,P),N.setFont("helvetica","normal"),N.setTextColor("#6B7280");let te;if(typeof V=="object"&&V!==null){if(Object.keys(V).length===0)return;P+=O,Object.entries(V).forEach(([Se,Te])=>{P>N.internal.pageSize.getHeight()-20&&(N.addPage(),P=$);const ke=Se.replace(/([A-Z])/g," $1").trim();Z(ke,Te,W+10)});return}else te=String(V);const Y=$+W+N.getTextWidth(re+": "),de=J-W-N.getTextWidth(re+": "),ye=N.splitTextToSize(te,de);P+ye.length*O>N.internal.pageSize.getHeight()-20&&(N.addPage(),P=$),N.text(ye,Y,P),P+=ye.length*O},M=j=>{P+20>N.internal.pageSize.getHeight()-20&&(N.addPage(),P=$),P+=O,N.setFillColor("#F3F4F6"),N.rect($-2,P-5,ee-2*($-2),O+6,"F"),N.setFont("helvetica","bold"),N.setTextColor("#111827"),N.setFontSize(12),N.text(j.toUpperCase(),$,P),N.setFont("helvetica","normal"),P+=O*1.5},F=()=>{if(P+10>N.internal.pageSize.getHeight()-20){N.addPage(),P=$;return}N.setDrawColor("#E5E5E5"),N.line($,P,ee-$,P),P+=O},G=()=>{const j=N.internal.pages.length-1;for(let V=1;V<=j;V++)N.setPage(V),N.setFontSize(8),N.setTextColor("#9CA3AF"),N.text(`Page ${V} of ${j}`,ee/2,N.internal.pageSize.getHeight()-10,{align:"center"})};N.setFillColor("#6366F1"),N.rect(0,0,ee,40,"F"),N.setTextColor("#FFFFFF"),N.setFontSize(24),N.setFont("helvetica","bold"),N.text("Debug Information Report",$,25),P=50,N.setTextColor("#6B7280"),N.setFontSize(10),N.setFont("helvetica","normal");const D=new Date().toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"});if(N.text(`Generated: ${D}`,$,P),P+=O*2,C.system){M("System Information"),Z("Operating System",C.system.os),Z("Architecture",C.system.arch),Z("Platform",C.system.platform),Z("CPU Cores",C.system.cpus);const j=C.system.memory;Z("Memory",{"Total Memory":j.total,"Used Memory":j.used,"Free Memory":j.free,Usage:j.percentage+"%"});const V=C.system.browser;Z("Browser",{Name:V.name,Version:V.version,Language:V.language,Platform:V.platform,"Cookies Enabled":V.cookiesEnabled?"Yes":"No","Online Status":V.online?"Online":"Offline"});const W=C.system.screen;Z("Screen",{Resolution:`${W.width}x${W.height}`,"Color Depth":W.colorDepth+" bit","Pixel Ratio":W.pixelRatio+"x"});const re=C.system.time;Z("Time Settings",{Timezone:re.timezone,"UTC Offset":re.offset/60+" hours",Locale:re.locale}),F()}if(C.webApp){if(M("Web App Information"),Z("Application",{Name:C.webApp.name,Version:C.webApp.version,Environment:C.webApp.environment,"Node Version":C.webApp.runtimeInfo.nodeVersion}),C.webApp.gitInfo){const j=C.webApp.gitInfo.local;if(Z("Git Information",{Branch:j.branch,Commit:j.commitHash,Author:j.author,"Commit Time":j.commitTime,Repository:j.repoName}),C.webApp.gitInfo.github){const V=C.webApp.gitInfo.github.currentRepo;Z("GitHub Information",{Repository:V.fullName,"Default Branch":V.defaultBranch,Stars:V.stars,Forks:V.forks,"Open Issues":V.openIssues||0})}}F()}if(C.performance){M("Performance Metrics");const j=C.performance.memory||{},V=j.totalJSHeapSize||0,W=j.usedJSHeapSize||0,re=j.usagePercentage||0;Z("Memory Usage",{"Total Heap Size":y(V),"Used Heap Size":y(W),Usage:re.toFixed(1)+"%"});const te=C.performance.timing||{},Y=te.navigationStart||0,de=te.loadEventEnd||0,ye=te.domContentLoadedEventEnd||0,Se=te.responseEnd||0,Te=te.requestStart||0,ke=de>Y?de-Y:0,K=ye>Y?ye-Y:0,ge=Se>Te?Se-Te:0;if(Z("Page Load Metrics",{"Total Load Time":(ke/1e3).toFixed(2)+" seconds","DOM Ready Time":(K/1e3).toFixed(2)+" seconds","Request Time":(ge/1e3).toFixed(2)+" seconds"}),C.system?.network){const ne=C.system.network;Z("Network Information",{"Connection Type":ne.type||"Unknown","Effective Type":ne.effectiveType||"Unknown","Download Speed":(ne.downlink||0)+" Mbps","Latency (RTT)":(ne.rtt||0)+" ms","Data Saver":ne.saveData?"Enabled":"Disabled"})}F()}C.errors&&C.errors.length>0&&(M("Error Log"),C.errors.forEach((j,V)=>{N.setTextColor("#DC2626"),N.setFontSize(10),N.setFont("helvetica","bold"),N.text(`Error ${V+1}:`,$,P),P+=O,N.setFont("helvetica","normal"),N.setTextColor("#6B7280"),Z("Message",j.message,10),j.stack&&Z("Stack",j.stack,10),j.source&&Z("Source",j.source,10),P+=O})),G(),N.save(`bolt-debug-info-${new Date().toISOString()}.pdf`),ze.success("Debug information exported as PDF")}catch(C){console.error("Failed to export PDF:",C),ze.error("Failed to export debug information as PDF")}}},{id:"txt",label:"Export as Text",icon:"i-ph:file-text",handler:()=>{try{const C={system:t,webApp:n,errors:Lt.getLogs().filter(ee=>ee.level==="error"),performance:{memory:performance.memory||{},timing:performance.timing,navigation:performance.navigation}},N=Object.entries(C).map(([ee,J])=>`${ee.toUpperCase()}
${"-".repeat(30)}
${JSON.stringify(J,null,2)}

`).join(`
`),O=new Blob([N],{type:"text/plain"}),P=window.URL.createObjectURL(O),$=document.createElement("a");$.href=P,$.download=`bolt-debug-info-${new Date().toISOString()}.txt`,document.body.appendChild($),$.click(),window.URL.revokeObjectURL(P),document.body.removeChild($),ze.success("Debug information exported as text file")}catch(C){console.error("Failed to export text file:",C),ze.error("Failed to export debug information as text file")}}}],k=T.useCallback(async()=>{try{const N=u?.Ollama?.settings?.baseUrl||"http://127.0.0.1:11434";if(!(await fetch(`${N}/api/version`)).ok)throw new Error("Service not running");const $=await(await fetch(`${N}/api/tags`)).json();i({isRunning:!0,lastChecked:new Date,models:$.models})}catch{i({isRunning:!1,error:"Connection failed",lastChecked:new Date,models:void 0})}},[u]);T.useEffect(()=>{if(u?.Ollama?.settings?.enabled){k();const N=setInterval(k,1e4);return()=>clearInterval(N)}},[u,k]);const x=()=>{const[C,N]=T.useState(!1),O=T.useCallback($=>{N($)},[]),P=T.useCallback($=>{$(),N(!1)},[]);return p.jsxs(jo,{open:C,onOpenChange:O,children:[p.jsxs("button",{onClick:()=>N(!0),className:Pe("group flex items-center gap-2","rounded-lg px-3 py-1.5","text-sm text-gray-900 dark:text-white","bg-[#FAFAFA] dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","hover:bg-purple-500/10 dark:hover:bg-purple-500/20","transition-all duration-200"),children:[p.jsx("span",{className:"i-ph:download text-lg text-gray-500 dark:text-gray-400 group-hover:text-purple-500 transition-colors"}),"Export"]}),p.jsx(qm,{showCloseButton:!0,children:p.jsxs("div",{className:"p-6",children:[p.jsxs(hf,{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:download w-5 h-5"}),"Export Debug Information"]}),p.jsx("div",{className:"mt-4 flex flex-col gap-2",children:S.map($=>p.jsxs("button",{onClick:()=>P($.handler),className:Pe("flex items-center gap-3 px-4 py-3 text-sm rounded-lg transition-colors w-full text-left","bg-white dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","hover:bg-purple-50 dark:hover:bg-[#1a1a1a]","hover:border-purple-200 dark:hover:border-purple-900/30","text-bolt-elements-textPrimary"),children:[p.jsx("div",{className:Pe($.icon,"w-5 h-5")}),p.jsxs("div",{children:[p.jsx("div",{className:"font-medium",children:$.label}),p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary mt-0.5",children:[$.id==="json"&&"Export as a structured JSON file",$.id==="csv"&&"Export as a CSV spreadsheet",$.id==="pdf"&&"Export as a formatted PDF document",$.id==="txt"&&"Export as a formatted text file"]})]})]},$.id))})]})})]})},R=u?.Ollama?.settings?.enabled?s.isRunning?{status:"Running",color:"text-green-500",bgColor:"bg-green-500",message:`Ollama service is running with ${s.models?.length??0} installed models (Provider: Enabled)`}:{status:"Not Running",color:"text-red-500",bgColor:"bg-red-500",message:s.error||"Ollama service is not running"}:{status:"Disabled",color:"text-red-500",bgColor:"bg-red-500",message:"Ollama provider is disabled in settings"};return p.jsxs("div",{className:"flex flex-col gap-6 max-w-7xl mx-auto p-4",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[p.jsxs("div",{className:"p-4 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A] hover:border-purple-500/30 transition-all duration-200 h-[180px] flex flex-col",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:warning-octagon text-purple-500 w-4 h-4"}),p.jsx("div",{className:"text-sm text-bolt-elements-textSecondary",children:"Errors"})]}),p.jsx("div",{className:"flex items-center gap-2 mt-2",children:p.jsx("span",{className:Pe("text-2xl font-semibold",h.length>0?"text-red-500":"text-green-500"),children:h.length})}),p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary mt-2 flex items-center gap-1.5",children:[p.jsx("div",{className:Pe("w-3.5 h-3.5",h.length>0?"i-ph:warning text-red-500":"i-ph:check-circle text-green-500")}),h.length>0?"Errors detected":"No errors detected"]})]}),p.jsxs("div",{className:"p-4 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A] hover:border-purple-500/30 transition-all duration-200 h-[180px] flex flex-col",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:cpu text-purple-500 w-4 h-4"}),p.jsx("div",{className:"text-sm text-bolt-elements-textSecondary",children:"Memory Usage"})]}),p.jsx("div",{className:"flex items-center gap-2 mt-2",children:p.jsxs("span",{className:Pe("text-2xl font-semibold",(t?.memory?.percentage??0)>80?"text-red-500":(t?.memory?.percentage??0)>60?"text-yellow-500":"text-green-500"),children:[t?.memory?.percentage??0,"%"]})}),p.jsx(tC,{value:t?.memory?.percentage??0,className:Pe("mt-2",(t?.memory?.percentage??0)>80?"[&>div]:bg-red-500":(t?.memory?.percentage??0)>60?"[&>div]:bg-yellow-500":"[&>div]:bg-green-500")}),p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary mt-2 flex items-center gap-1.5",children:[p.jsx("div",{className:"i-ph:info w-3.5 h-3.5 text-purple-500"}),"Used: ",t?.memory.used??"0 GB"," / ",t?.memory.total??"0 GB"]})]}),p.jsxs("div",{className:"p-4 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A] hover:border-purple-500/30 transition-all duration-200 h-[180px] flex flex-col",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:timer text-purple-500 w-4 h-4"}),p.jsx("div",{className:"text-sm text-bolt-elements-textSecondary",children:"Page Load Time"})]}),p.jsx("div",{className:"flex items-center gap-2 mt-2",children:p.jsxs("span",{className:Pe("text-2xl font-semibold",(t?.performance.timing.loadTime??0)>2e3?"text-red-500":(t?.performance.timing.loadTime??0)>1e3?"text-yellow-500":"text-green-500"),children:[t?(t.performance.timing.loadTime/1e3).toFixed(2):"-","s"]})}),p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary mt-2 flex items-center gap-1.5",children:[p.jsx("div",{className:"i-ph:code w-3.5 h-3.5 text-purple-500"}),"DOM Ready: ",t?(t.performance.timing.domReadyTime/1e3).toFixed(2):"-","s"]})]}),p.jsxs("div",{className:"p-4 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A] hover:border-purple-500/30 transition-all duration-200 h-[180px] flex flex-col",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:wifi-high text-purple-500 w-4 h-4"}),p.jsx("div",{className:"text-sm text-bolt-elements-textSecondary",children:"Network Speed"})]}),p.jsx("div",{className:"flex items-center gap-2 mt-2",children:p.jsxs("span",{className:Pe("text-2xl font-semibold",(t?.network.downlink??0)<5?"text-red-500":(t?.network.downlink??0)<10?"text-yellow-500":"text-green-500"),children:[t?.network.downlink??"-"," Mbps"]})}),p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary mt-2 flex items-center gap-1.5",children:[p.jsx("div",{className:"i-ph:activity w-3.5 h-3.5 text-purple-500"}),"RTT: ",t?.network.rtt??"-"," ms"]})]}),p.jsxs("div",{className:"md:col-span-4 p-6 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A] hover:border-purple-500/30 transition-all duration-200 h-[260px] flex flex-col",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"i-ph:robot text-purple-500 w-5 h-5"}),p.jsxs("div",{children:[p.jsx("div",{className:"text-base font-medium text-bolt-elements-textPrimary",children:"Ollama Service"}),p.jsx("div",{className:"text-xs text-bolt-elements-textSecondary mt-0.5",children:R.message})]})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs("div",{className:"flex items-center gap-2 px-2.5 py-1 rounded-full bg-bolt-elements-background-depth-3",children:[p.jsx("div",{className:Pe("w-2 h-2 rounded-full animate-pulse",R.bgColor,{"shadow-lg shadow-green-500/20":R.status==="Running","shadow-lg shadow-red-500/20":R.status==="Not Running"})}),p.jsx("span",{className:Pe("text-xs font-medium flex items-center gap-1",R.color),children:R.status})]}),p.jsxs("div",{className:"text-[10px] text-bolt-elements-textTertiary flex items-center gap-1.5",children:[p.jsx("div",{className:"i-ph:clock w-3 h-3"}),s.lastChecked.toLocaleTimeString()]})]})]}),p.jsx("div",{className:"mt-6 flex-1 min-h-0 flex flex-col",children:R.status==="Running"&&s.models&&s.models.length>0?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"text-xs font-medium text-bolt-elements-textSecondary flex items-center justify-between mb-3",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:cube-duotone w-4 h-4 text-purple-500"}),p.jsx("span",{children:"Installed Models"}),p.jsx(o5,{variant:"secondary",className:"ml-1",children:s.models.length})]})}),p.jsx("div",{className:"overflow-y-auto flex-1 scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-700 scrollbar-track-transparent hover:scrollbar-thumb-gray-400 dark:hover:scrollbar-thumb-gray-600",children:p.jsx("div",{className:"grid grid-cols-2 gap-3 pr-2",children:s.models.map(C=>p.jsxs("div",{className:"text-sm bg-bolt-elements-background-depth-3 hover:bg-bolt-elements-background-depth-4 rounded-lg px-4 py-3 flex items-center justify-between transition-colors group",children:[p.jsxs("div",{className:"flex items-center gap-2 text-bolt-elements-textSecondary",children:[p.jsx("div",{className:"i-ph:cube w-4 h-4 text-purple-500/70 group-hover:text-purple-500 transition-colors"}),p.jsx("span",{className:"font-mono truncate",children:C.name})]}),p.jsxs(o5,{variant:"outline",className:"ml-2 text-xs font-mono",children:[Math.round(parseInt(C.size)/1024/1024),"MB"]})]},C.name))})})]}):p.jsx("div",{className:"flex-1 flex items-center justify-center",children:p.jsxs("div",{className:"flex flex-col items-center gap-3 max-w-[280px] text-center",children:[p.jsx("div",{className:Pe("w-12 h-12",{"i-ph:warning-circle text-red-500/80":R.status==="Not Running"||R.status==="Disabled","i-ph:cube-duotone text-purple-500/80":R.status==="Running"})}),p.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:R.message})]})})})]})]}),p.jsxs("div",{className:"flex flex-wrap gap-4",children:[p.jsxs("button",{onClick:f,disabled:o.systemInfo,className:Pe("flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg transition-colors","bg-white dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","hover:bg-purple-50 dark:hover:bg-[#1a1a1a]","hover:border-purple-200 dark:hover:border-purple-900/30","text-bolt-elements-textPrimary",{"opacity-50 cursor-not-allowed":o.systemInfo}),children:[o.systemInfo?p.jsx("div",{className:"i-ph:spinner-gap w-4 h-4 animate-spin"}):p.jsx("div",{className:"i-ph:gear w-4 h-4"}),"Update System Info"]}),p.jsxs("button",{onClick:m,disabled:o.performance,className:Pe("flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg transition-colors","bg-white dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","hover:bg-purple-50 dark:hover:bg-[#1a1a1a]","hover:border-purple-200 dark:hover:border-purple-900/30","text-bolt-elements-textPrimary",{"opacity-50 cursor-not-allowed":o.performance}),children:[o.performance?p.jsx("div",{className:"i-ph:spinner-gap w-4 h-4 animate-spin"}):p.jsx("div",{className:"i-ph:chart-bar w-4 h-4"}),"Log Performance"]}),p.jsxs("button",{onClick:b,disabled:o.errors,className:Pe("flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg transition-colors","bg-white dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","hover:bg-purple-50 dark:hover:bg-[#1a1a1a]","hover:border-purple-200 dark:hover:border-purple-900/30","text-bolt-elements-textPrimary",{"opacity-50 cursor-not-allowed":o.errors}),children:[o.errors?p.jsx("div",{className:"i-ph:spinner-gap w-4 h-4 animate-spin"}):p.jsx("div",{className:"i-ph:warning w-4 h-4"}),"Check Errors"]}),p.jsxs("button",{onClick:g,disabled:o.webAppInfo,className:Pe("flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg transition-colors","bg-white dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","hover:bg-purple-50 dark:hover:bg-[#1a1a1a]","hover:border-purple-200 dark:hover:border-purple-900/30","text-bolt-elements-textPrimary",{"opacity-50 cursor-not-allowed":o.webAppInfo}),children:[o.webAppInfo?p.jsx("div",{className:"i-ph:spinner-gap w-4 h-4 animate-spin"}):p.jsx("div",{className:"i-ph:info w-4 h-4"}),"Fetch WebApp Info"]}),p.jsx(x,{})]}),p.jsxs(_b,{open:l.system,onOpenChange:C=>c(N=>({...N,system:C})),className:"w-full",children:[p.jsx(xb,{className:"w-full",children:p.jsxs("div",{className:"flex items-center justify-between p-6 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A]",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"i-ph:cpu text-purple-500 w-5 h-5"}),p.jsx("h3",{className:"text-base font-medium text-bolt-elements-textPrimary",children:"System Information"})]}),p.jsx("div",{className:Pe("i-ph:caret-down w-4 h-4 transform transition-transform duration-200",l.system?"rotate-180":"")})]})}),p.jsx(wb,{children:p.jsx("div",{className:"p-6 mt-2 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A]",children:t?p.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:desktop text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"OS: "}),p.jsx("span",{className:"text-bolt-elements-textPrimary",children:t.os})]}),p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:device-mobile text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Platform: "}),p.jsx("span",{className:"text-bolt-elements-textPrimary",children:t.platform})]}),p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:microchip text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Architecture: "}),p.jsx("span",{className:"text-bolt-elements-textPrimary",children:t.arch})]}),p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:cpu text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"CPU Cores: "}),p.jsx("span",{className:"text-bolt-elements-textPrimary",children:t.cpus})]}),p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:node text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Node Version: "}),p.jsx("span",{className:"text-bolt-elements-textPrimary",children:t.node})]}),p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:wifi-high text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Network Type: "}),p.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[t.network.type," (",t.network.effectiveType,")"]})]}),p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:gauge text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Network Speed: "}),p.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[t.network.downlink,"Mbps (RTT: ",t.network.rtt,"ms)"]})]}),t.battery&&p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:battery-charging text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Battery: "}),p.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[t.battery.level.toFixed(1),"% ",t.battery.charging?"(Charging)":""]})]}),p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:hard-drive text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Storage: "}),p.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[(t.storage.usage/(1024*1024*1024)).toFixed(2),"GB /"," ",(t.storage.quota/(1024*1024*1024)).toFixed(2),"GB"]})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:database text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Memory Usage: "}),p.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[t.memory.used," / ",t.memory.total," (",t.memory.percentage,"%)"]})]}),p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:browser text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Browser: "}),p.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[t.browser.name," ",t.browser.version]})]}),p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:monitor text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Screen: "}),p.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[t.screen.width,"x",t.screen.height," (",t.screen.pixelRatio,"x)"]})]}),p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:clock text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Timezone: "}),p.jsx("span",{className:"text-bolt-elements-textPrimary",children:t.time.timezone})]}),p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:translate text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Language: "}),p.jsx("span",{className:"text-bolt-elements-textPrimary",children:t.browser.language})]}),p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:chart-pie text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"JS Heap: "}),p.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[(t.performance.memory.usedJSHeapSize/(1024*1024)).toFixed(1),"MB /"," ",(t.performance.memory.totalJSHeapSize/(1024*1024)).toFixed(1),"MB (",t.performance.memory.usagePercentage.toFixed(1),"%)"]})]}),p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:timer text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Page Load: "}),p.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[(t.performance.timing.loadTime/1e3).toFixed(2),"s"]})]}),p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:code text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"DOM Ready: "}),p.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[(t.performance.timing.domReadyTime/1e3).toFixed(2),"s"]})]})]})]}):p.jsx("div",{className:"text-sm text-bolt-elements-textSecondary",children:"Loading system information..."})})})]}),p.jsxs(_b,{open:l.performance,onOpenChange:C=>c(N=>({...N,performance:C})),className:"w-full",children:[p.jsx(xb,{className:"w-full",children:p.jsxs("div",{className:"flex items-center justify-between p-6 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A]",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"i-ph:chart-line text-purple-500 w-5 h-5"}),p.jsx("h3",{className:"text-base font-medium text-bolt-elements-textPrimary",children:"Performance Metrics"})]}),p.jsx("div",{className:Pe("i-ph:caret-down w-4 h-4 transform transition-transform duration-200",l.performance?"rotate-180":"")})]})}),p.jsx(wb,{children:p.jsx("div",{className:"p-6 mt-2 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A]",children:t&&p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"text-sm",children:[p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Page Load Time: "}),p.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[(t.performance.timing.loadTime/1e3).toFixed(2),"s"]})]}),p.jsxs("div",{className:"text-sm",children:[p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"DOM Ready Time: "}),p.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[(t.performance.timing.domReadyTime/1e3).toFixed(2),"s"]})]}),p.jsxs("div",{className:"text-sm",children:[p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Request Time: "}),p.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[(t.performance.timing.requestTime/1e3).toFixed(2),"s"]})]}),p.jsxs("div",{className:"text-sm",children:[p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Redirect Time: "}),p.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[(t.performance.timing.redirectTime/1e3).toFixed(2),"s"]})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"text-sm",children:[p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"JS Heap Usage: "}),p.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[(t.performance.memory.usedJSHeapSize/(1024*1024)).toFixed(1),"MB /"," ",(t.performance.memory.totalJSHeapSize/(1024*1024)).toFixed(1),"MB"]})]}),p.jsxs("div",{className:"text-sm",children:[p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Heap Utilization: "}),p.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[t.performance.memory.usagePercentage.toFixed(1),"%"]})]}),p.jsxs("div",{className:"text-sm",children:[p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Navigation Type: "}),p.jsx("span",{className:"text-bolt-elements-textPrimary",children:t.performance.navigation.type===0?"Navigate":t.performance.navigation.type===1?"Reload":t.performance.navigation.type===2?"Back/Forward":"Other"})]}),p.jsxs("div",{className:"text-sm",children:[p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Redirects: "}),p.jsx("span",{className:"text-bolt-elements-textPrimary",children:t.performance.navigation.redirectCount})]})]})]})})})]}),p.jsxs(_b,{open:l.webapp,onOpenChange:C=>c(N=>({...N,webapp:C})),className:"w-full",children:[p.jsx(xb,{className:"w-full",children:p.jsxs("div",{className:"flex items-center justify-between p-6 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A]",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"i-ph:info text-blue-500 w-5 h-5"}),p.jsx("h3",{className:"text-base font-medium text-bolt-elements-textPrimary",children:"WebApp Information"}),o.webAppInfo&&p.jsx("span",{className:"loading loading-spinner loading-sm"})]}),p.jsx("div",{className:Pe("i-ph:caret-down w-4 h-4 transform transition-transform duration-200",l.webapp?"rotate-180":"")})]})}),p.jsx(wb,{children:p.jsxs("div",{className:"p-6 mt-2 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A]",children:[o.webAppInfo?p.jsx("div",{className:"flex items-center justify-center p-8",children:p.jsx("span",{className:"loading loading-spinner loading-lg"})}):n?p.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"mb-4 text-base font-medium text-bolt-elements-textPrimary",children:"Basic Information"}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:app-window text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Name:"}),p.jsx("span",{className:"text-bolt-elements-textPrimary",children:n.name})]}),p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:tag text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Version:"}),p.jsx("span",{className:"text-bolt-elements-textPrimary",children:n.version})]}),p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:certificate text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"License:"}),p.jsx("span",{className:"text-bolt-elements-textPrimary",children:n.license})]}),p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:cloud text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Environment:"}),p.jsx("span",{className:"text-bolt-elements-textPrimary",children:n.environment})]}),p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:node text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Node Version:"}),p.jsx("span",{className:"text-bolt-elements-textPrimary",children:n.runtimeInfo.nodeVersion})]})]})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"mb-4 text-base font-medium text-bolt-elements-textPrimary",children:"Git Information"}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:git-branch text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Branch:"}),p.jsx("span",{className:"text-bolt-elements-textPrimary",children:n.gitInfo.local.branch})]}),p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:git-commit text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Commit:"}),p.jsx("span",{className:"text-bolt-elements-textPrimary",children:n.gitInfo.local.commitHash})]}),p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:user text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Author:"}),p.jsx("span",{className:"text-bolt-elements-textPrimary",children:n.gitInfo.local.author})]}),p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:clock text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Commit Time:"}),p.jsx("span",{className:"text-bolt-elements-textPrimary",children:n.gitInfo.local.commitTime})]}),n.gitInfo.github&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-800",children:[p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:git-repository text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Repository:"}),p.jsxs("span",{className:"text-bolt-elements-textPrimary",children:[n.gitInfo.github.currentRepo.fullName,n.gitInfo.isForked&&" (fork)"]})]}),p.jsxs("div",{className:"mt-2 flex items-center gap-4 text-sm",children:[p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:star text-yellow-500 w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:n.gitInfo.github.currentRepo.stars})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:git-fork text-blue-500 w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:n.gitInfo.github.currentRepo.forks})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:warning-circle text-red-500 w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:n.gitInfo.github.currentRepo.openIssues})]})]})]}),n.gitInfo.github.upstream&&p.jsxs("div",{className:"mt-2",children:[p.jsxs("div",{className:"text-sm flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:git-fork text-bolt-elements-textSecondary w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Upstream:"}),p.jsx("span",{className:"text-bolt-elements-textPrimary",children:n.gitInfo.github.upstream.fullName})]}),p.jsxs("div",{className:"mt-2 flex items-center gap-4 text-sm",children:[p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:star text-yellow-500 w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:n.gitInfo.github.upstream.stars})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:git-fork text-blue-500 w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:n.gitInfo.github.upstream.forks})]})]})]})]})]})]})]}):p.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-bolt-elements-textSecondary",children:[p.jsx("div",{className:"i-ph:warning-circle w-8 h-8 mb-2"}),p.jsx("p",{children:"Failed to load WebApp information"}),p.jsx("button",{onClick:()=>g(),className:"mt-4 px-4 py-2 text-sm bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Retry"})]}),n&&p.jsxs("div",{className:"mt-6",children:[p.jsx("h3",{className:"mb-4 text-base font-medium text-bolt-elements-textPrimary",children:"Dependencies"}),p.jsxs("div",{className:"bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A] rounded-lg divide-y divide-[#E5E5E5] dark:divide-[#1A1A1A]",children:[p.jsx(jx,{title:"Production",deps:n.dependencies.production}),p.jsx(jx,{title:"Development",deps:n.dependencies.development}),p.jsx(jx,{title:"Peer",deps:n.dependencies.peer}),p.jsx(jx,{title:"Optional",deps:n.dependencies.optional})]})]})]})})]}),p.jsxs(_b,{open:l.errors,onOpenChange:C=>c(N=>({...N,errors:C})),className:"w-full",children:[p.jsx(xb,{className:"w-full",children:p.jsxs("div",{className:"flex items-center justify-between p-6 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A]",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"i-ph:warning text-red-500 w-5 h-5"}),p.jsx("h3",{className:"text-base font-medium text-bolt-elements-textPrimary",children:"Error Check"}),h.length>0&&p.jsxs(o5,{variant:"destructive",className:"ml-2",children:[h.length," Errors"]})]}),p.jsx("div",{className:Pe("i-ph:caret-down w-4 h-4 transform transition-transform duration-200",l.errors?"rotate-180":"")})]})}),p.jsx(wb,{children:p.jsx("div",{className:"p-6 mt-2 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A]",children:p.jsx(ZO,{className:"h-[300px]",children:p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"text-sm text-bolt-elements-textSecondary",children:["Checks for:",p.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[p.jsx("li",{children:"Unhandled JavaScript errors"}),p.jsx("li",{children:"Unhandled Promise rejections"}),p.jsx("li",{children:"Runtime exceptions"}),p.jsx("li",{children:"Network errors"})]})]}),p.jsxs("div",{className:"text-sm",children:[p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Status: "}),p.jsx("span",{className:"text-bolt-elements-textPrimary",children:o.errors?"Checking...":h.length>0?`${h.length} errors found`:"No errors found"})]}),h.length>0&&p.jsxs("div",{className:"mt-4",children:[p.jsx("div",{className:"text-sm font-medium text-bolt-elements-textPrimary mb-2",children:"Recent Errors:"}),p.jsx("div",{className:"space-y-2",children:h.map(C=>p.jsxs("div",{className:"text-sm text-red-500 dark:text-red-400 p-2 rounded bg-red-500/5",children:[p.jsx("div",{className:"font-medium",children:C.message}),C.source&&p.jsxs("div",{className:"text-xs mt-1 text-red-400",children:["Source: ",C.source,C.details?.lineNumber&&`:${C.details.lineNumber}`]}),C.stack&&p.jsx("div",{className:"text-xs mt-1 text-red-400 font-mono whitespace-pre-wrap",children:C.stack})]},C.id))})]})]})})})})]})]})}const Q7=[{value:"all",label:"All Types",icon:"i-ph:funnel",color:"#9333ea"},{value:"provider",label:"LLM",icon:"i-ph:robot",color:"#10b981"},{value:"api",label:"API",icon:"i-ph:cloud",color:"#3b82f6"},{value:"error",label:"Errors",icon:"i-ph:warning-circle",color:"#ef4444"},{value:"warning",label:"Warnings",icon:"i-ph:warning",color:"#f59e0b"},{value:"info",label:"Info",icon:"i-ph:info",color:"#3b82f6"},{value:"debug",label:"Debug",icon:"i-ph:bug",color:"#6b7280"}],NFe=({log:t,isExpanded:e,use24Hour:n,showTimestamp:r})=>{const[s,i]=T.useState(e);T.useEffect(()=>{i(e)},[e]);const o=T.useMemo(()=>new Date(t.timestamp).toLocaleTimeString("en-US",{hour12:!n}),[t.timestamp,n]),a=T.useMemo(()=>{if(t.category==="provider")return{icon:"i-ph:robot",color:"text-emerald-500 dark:text-emerald-400",bg:"hover:bg-emerald-500/10 dark:hover:bg-emerald-500/20",badge:"text-emerald-500 bg-emerald-50 dark:bg-emerald-500/10"};if(t.category==="api")return{icon:"i-ph:cloud",color:"text-blue-500 dark:text-blue-400",bg:"hover:bg-blue-500/10 dark:hover:bg-blue-500/20",badge:"text-blue-500 bg-blue-50 dark:bg-blue-500/10"};switch(t.level){case"error":return{icon:"i-ph:warning-circle",color:"text-red-500 dark:text-red-400",bg:"hover:bg-red-500/10 dark:hover:bg-red-500/20",badge:"text-red-500 bg-red-50 dark:bg-red-500/10"};case"warning":return{icon:"i-ph:warning",color:"text-yellow-500 dark:text-yellow-400",bg:"hover:bg-yellow-500/10 dark:hover:bg-yellow-500/20",badge:"text-yellow-500 bg-yellow-50 dark:bg-yellow-500/10"};case"debug":return{icon:"i-ph:bug",color:"text-gray-500 dark:text-gray-400",bg:"hover:bg-gray-500/10 dark:hover:bg-gray-500/20",badge:"text-gray-500 bg-gray-50 dark:bg-gray-500/10"};default:return{icon:"i-ph:info",color:"text-blue-500 dark:text-blue-400",bg:"hover:bg-blue-500/10 dark:hover:bg-blue-500/20",badge:"text-blue-500 bg-blue-50 dark:bg-blue-500/10"}}},[t.level,t.category]),l=c=>t.category==="provider"?p.jsxs("div",{className:"flex flex-col gap-2",children:[p.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400",children:[p.jsxs("span",{children:["Model: ",c.model]}),p.jsx("span",{children:""}),p.jsxs("span",{children:["Tokens: ",c.totalTokens]}),p.jsx("span",{children:""}),p.jsxs("span",{children:["Duration: ",c.duration,"ms"]})]}),c.prompt&&p.jsxs("div",{className:"flex flex-col gap-1",children:[p.jsx("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:"Prompt:"}),p.jsx("pre",{className:"text-xs text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-800/50 rounded p-2 whitespace-pre-wrap",children:c.prompt})]}),c.response&&p.jsxs("div",{className:"flex flex-col gap-1",children:[p.jsx("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:"Response:"}),p.jsx("pre",{className:"text-xs text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-800/50 rounded p-2 whitespace-pre-wrap",children:c.response})]})]}):t.category==="api"?p.jsxs("div",{className:"flex flex-col gap-2",children:[p.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400",children:[p.jsx("span",{className:c.method==="GET"?"text-green-500":"text-blue-500",children:c.method}),p.jsx("span",{children:""}),p.jsxs("span",{children:["Status: ",c.statusCode]}),p.jsx("span",{children:""}),p.jsxs("span",{children:["Duration: ",c.duration,"ms"]})]}),p.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 break-all",children:c.url}),c.request&&p.jsxs("div",{className:"flex flex-col gap-1",children:[p.jsx("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:"Request:"}),p.jsx("pre",{className:"text-xs text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-800/50 rounded p-2 whitespace-pre-wrap",children:JSON.stringify(c.request,null,2)})]}),c.response&&p.jsxs("div",{className:"flex flex-col gap-1",children:[p.jsx("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:"Response:"}),p.jsx("pre",{className:"text-xs text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-800/50 rounded p-2 whitespace-pre-wrap",children:JSON.stringify(c.response,null,2)})]}),c.error&&p.jsxs("div",{className:"flex flex-col gap-1",children:[p.jsx("div",{className:"text-xs font-medium text-red-500",children:"Error:"}),p.jsx("pre",{className:"text-xs text-red-400 bg-red-50 dark:bg-red-500/10 rounded p-2 whitespace-pre-wrap",children:JSON.stringify(c.error,null,2)})]})]}):p.jsx("pre",{className:"text-xs text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-800/50 rounded whitespace-pre-wrap",children:JSON.stringify(c,null,2)});return p.jsx(ot.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:Pe("flex flex-col gap-2","rounded-lg p-4","bg-[#FAFAFA] dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]",a.bg,"transition-all duration-200"),children:p.jsxs("div",{className:"flex items-start justify-between gap-4",children:[p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx("span",{className:Pe("text-lg",a.icon,a.color)}),p.jsxs("div",{className:"flex flex-col gap-1",children:[p.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.message}),t.details&&p.jsxs(p.Fragment,{children:[p.jsxs("button",{onClick:()=>i(!s),className:"text-xs text-gray-500 dark:text-gray-400 hover:text-purple-500 dark:hover:text-purple-400 transition-colors",children:[s?"Hide":"Show"," Details"]}),s&&l(t.details)]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:Pe("px-2 py-0.5 rounded text-xs font-medium uppercase",a.badge),children:t.level}),t.category&&p.jsx("div",{className:"px-2 py-0.5 rounded-full text-xs bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400",children:t.category})]})]})]}),r&&p.jsx("time",{className:"shrink-0 text-xs text-gray-500 dark:text-gray-400",children:o})]})})};function PFe(){const t=It(Lt.logs),[e,n]=T.useState("all"),[r,s]=T.useState(""),[i,o]=T.useState(!1),[a,l]=T.useState(!1),[c,u]=T.useState(!0),[d,h]=T.useState(!1),[f,g]=T.useState(!1),y=T.useRef(null),m=T.useMemo(()=>{const C=Object.values(t);return e==="all"?C.filter(N=>r?N.message.toLowerCase().includes(r.toLowerCase()):!0):C.filter(N=>{const O=N.category===e||N.level===e,P=r?N.message.toLowerCase().includes(r.toLowerCase()):!0;return O&&P})},[t,e,r]);T.useEffect(()=>{const C=performance.now();return Lt.logInfo("Event Logs tab mounted",{type:"component_mount",message:"Event Logs tab component mounted",component:"EventLogsTab"}),()=>{const N=performance.now()-C;Lt.logPerformanceMetric("EventLogsTab","mount-duration",N)}},[]);const b=T.useCallback(C=>{Lt.logInfo("Log level filter changed",{type:"filter_change",message:`Log level filter changed from ${e} to ${C}`,component:"EventLogsTab",previousLevel:e,newLevel:C}),n(C),h(!1)},[e]);T.useEffect(()=>{const C=setTimeout(()=>{r&&Lt.logInfo("Log search performed",{type:"search",message:`Search performed with query "${r}" (${m.length} results)`,component:"EventLogsTab",query:r,resultsCount:m.length})},1e3);return()=>clearTimeout(C)},[r,m.length]);const v=T.useCallback(async()=>{const C=performance.now();g(!0);try{await Lt.refreshLogs();const N=performance.now()-C;Lt.logSuccess("Logs refreshed successfully",{type:"refresh",message:`Successfully refreshed ${Object.keys(t).length} logs`,component:"EventLogsTab",duration:N,logsCount:Object.keys(t).length})}catch(N){Lt.logError("Failed to refresh logs",N,{type:"refresh_error",message:"Failed to refresh logs",component:"EventLogsTab"})}finally{setTimeout(()=>g(!1),500)}},[t]),_=T.useCallback((C,N)=>{switch(Lt.logInfo("Log preference changed",{type:"preference_change",message:`Log preference "${C}" changed to ${N}`,component:"EventLogsTab",preference:C,value:N}),C){case"timestamps":u(N);break;case"24hour":o(N);break;case"autoExpand":l(N);break}},[]);T.useEffect(()=>{const C=N=>{y.current&&!y.current.contains(N.target)&&h(!1)};return document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)}},[]);const E=Q7.find(C=>C.value===e),I=[{id:"json",label:"Export as JSON",icon:"i-ph:file-json",handler:()=>{try{const C={timestamp:new Date().toISOString(),logs:m,filters:{level:e,searchQuery:r},preferences:{use24Hour:i,showTimestamps:c,autoExpand:a}},N=new Blob([JSON.stringify(C,null,2)],{type:"application/json"}),O=window.URL.createObjectURL(N),P=document.createElement("a");P.href=O,P.download=`bolt-event-logs-${new Date().toISOString()}.json`,document.body.appendChild(P),P.click(),window.URL.revokeObjectURL(O),document.body.removeChild(P),ze.success("Event logs exported successfully as JSON")}catch(C){console.error("Failed to export JSON:",C),ze.error("Failed to export event logs as JSON")}}},{id:"csv",label:"Export as CSV",icon:"i-ph:file-csv",handler:()=>{try{const O=[["Timestamp","Level","Category","Message","Details"],...m.map(J=>[new Date(J.timestamp).toISOString(),J.level,J.category||"",J.message,J.details?JSON.stringify(J.details):""])].map(J=>J.map(Z=>`"${String(Z).replace(/"/g,'""')}"`).join(",")).join(`
`),P=new Blob([O],{type:"text/csv;charset=utf-8;"}),$=window.URL.createObjectURL(P),ee=document.createElement("a");ee.href=$,ee.download=`bolt-event-logs-${new Date().toISOString()}.csv`,document.body.appendChild(ee),ee.click(),window.URL.revokeObjectURL($),document.body.removeChild(ee),ze.success("Event logs exported successfully as CSV")}catch(C){console.error("Failed to export CSV:",C),ze.error("Failed to export event logs as CSV")}}},{id:"pdf",label:"Export as PDF",icon:"i-ph:file-pdf",handler:()=>{try{const C=new jt,N=7;let O=20;const P=20,$=C.internal.pageSize.getWidth(),ee=$-2*P,J=W=>{O>C.internal.pageSize.getHeight()-30&&(C.addPage(),O=P),C.setFillColor("#F3F4F6"),C.rect(P-2,O-5,$-2*(P-2),N+6,"F"),C.setFont("helvetica","bold"),C.setTextColor("#111827"),C.setFontSize(12),C.text(W.toUpperCase(),P,O),O+=N*2};C.setFillColor("#6366F1"),C.rect(0,0,$,50,"F"),C.setTextColor("#FFFFFF"),C.setFontSize(24),C.setFont("helvetica","bold"),C.text("Event Logs Report",P,35),C.setFontSize(12),C.setFont("helvetica","normal"),C.text("bolt.diy - AI Development Platform",P,45),O=70,J("Report Summary"),C.setFontSize(10),C.setFont("helvetica","normal"),C.setTextColor("#374151"),[{label:"Generated",value:new Date().toLocaleString()},{label:"Total Logs",value:m.length.toString()},{label:"Filter Applied",value:e==="all"?"All Types":e},{label:"Search Query",value:r||"None"},{label:"Time Format",value:i?"24-hour":"12-hour"}].forEach(W=>{C.setFont("helvetica","bold"),C.text(`${W.label}:`,P,O),C.setFont("helvetica","normal"),C.text(W.value,P+60,O),O+=N}),O+=N*2,J("Log Statistics");const M={error:m.filter(W=>W.level==="error").length,warning:m.filter(W=>W.level==="warning").length,info:m.filter(W=>W.level==="info").length,debug:m.filter(W=>W.level==="debug").length,provider:m.filter(W=>W.category==="provider").length,api:m.filter(W=>W.category==="api").length},F=[{label:"Error Logs",value:M.error,color:"#DC2626"},{label:"Warning Logs",value:M.warning,color:"#F59E0B"},{label:"Info Logs",value:M.info,color:"#3B82F6"}],G=[{label:"Debug Logs",value:M.debug,color:"#6B7280"},{label:"LLM Logs",value:M.provider,color:"#10B981"},{label:"API Logs",value:M.api,color:"#3B82F6"}],D=($-2*P)/2;F.forEach((W,re)=>{C.setTextColor(W.color),C.setFont("helvetica","bold"),C.text(W.value.toString(),P,O),C.setTextColor("#374151"),C.setFont("helvetica","normal"),C.text(W.label,P+20,O),G[re]&&(C.setTextColor(G[re].color),C.setFont("helvetica","bold"),C.text(G[re].value.toString(),P+D,O),C.setTextColor("#374151"),C.setFont("helvetica","normal"),C.text(G[re].label,P+D+20,O)),O+=N}),O+=N*2,J("Event Logs");const j=W=>{const re=20+(W.details?40:0);O+re>C.internal.pageSize.getHeight()-20&&(C.addPage(),O=P);const te=new Date(W.timestamp).toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!i}),Y={error:"#FEE2E2",warning:"#FEF3C7",info:"#DBEAFE",debug:"#F3F4F6"},de={error:"#DC2626",warning:"#F59E0B",info:"#3B82F6",debug:"#6B7280"},ye=C.getTextWidth(W.level.toUpperCase())+10;if(C.setFillColor(Y[W.level]||"#F3F4F6"),C.roundedRect(P,O-4,ye,N+4,1,1,"F"),C.setTextColor(de[W.level]||"#6B7280"),C.setFont("helvetica","bold"),C.setFontSize(8),C.text(W.level.toUpperCase(),P+5,O),C.setTextColor("#6B7280"),C.setFont("helvetica","normal"),C.setFontSize(9),C.text(te,P+ye+10,O),W.category){const Te=P+ye+C.getTextWidth(te)+20;C.setFillColor("#F3F4F6");const ke=C.getTextWidth(W.category)+10;C.roundedRect(Te,O-4,ke,N+4,2,2,"F"),C.setTextColor("#6B7280"),C.text(W.category,Te+5,O)}O+=N*1.5,C.setTextColor("#111827"),C.setFontSize(10);const Se=C.splitTextToSize(W.message,ee-10);if(C.text(Se,P+5,O),O+=Se.length*N,W.details){C.setTextColor("#6B7280"),C.setFontSize(8);const Te=JSON.stringify(W.details,null,2),ke=C.splitTextToSize(Te,ee-15);C.setFillColor("#F9FAFB"),C.roundedRect(P+5,O-2,ee-10,ke.length*N+8,1,1,"F"),C.text(ke,P+10,O+4),O+=ke.length*N+10}C.setDrawColor("#E5E7EB"),C.setLineWidth(.1),C.line(P,O,$-P,O),O+=N*1.5};m.forEach(W=>{j(W)});const V=C.internal.pages.length-1;for(let W=1;W<=V;W++){C.setPage(W),C.setFontSize(8),C.setTextColor("#9CA3AF"),C.text(`Page ${W} of ${V}`,$/2,C.internal.pageSize.getHeight()-10,{align:"center"}),C.text("Generated by bolt.diy",P,C.internal.pageSize.getHeight()-10);const re=new Date().toLocaleDateString();C.text(re,$-P,C.internal.pageSize.getHeight()-10,{align:"right"})}C.save(`bolt-event-logs-${new Date().toISOString()}.pdf`),ze.success("Event logs exported successfully as PDF")}catch(C){console.error("Failed to export PDF:",C),ze.error("Failed to export event logs as PDF")}}},{id:"txt",label:"Export as Text",icon:"i-ph:file-text",handler:()=>{try{const C=m.map($=>{let J=`[${new Date($.timestamp).toLocaleString()}] ${$.level.toUpperCase()}: ${$.message}
`;return $.category&&(J+=`Category: ${$.category}
`),$.details&&(J+=`Details:
${JSON.stringify($.details,null,2)}
`),J+"-".repeat(80)+`
`}).join(`
`),N=new Blob([C],{type:"text/plain"}),O=window.URL.createObjectURL(N),P=document.createElement("a");P.href=O,P.download=`bolt-event-logs-${new Date().toISOString()}.txt`,document.body.appendChild(P),P.click(),window.URL.revokeObjectURL(O),document.body.removeChild(P),ze.success("Event logs exported successfully as text file")}catch(C){console.error("Failed to export text file:",C),ze.error("Failed to export event logs as text file")}}}],R=()=>{const[C,N]=T.useState(!1),O=T.useCallback($=>{N($)},[]),P=T.useCallback($=>{$(),N(!1)},[]);return p.jsxs(jo,{open:C,onOpenChange:O,children:[p.jsxs("button",{onClick:()=>N(!0),className:Pe("group flex items-center gap-2","rounded-lg px-3 py-1.5","text-sm text-gray-900 dark:text-white","bg-[#FAFAFA] dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","hover:bg-purple-500/10 dark:hover:bg-purple-500/20","transition-all duration-200"),children:[p.jsx("span",{className:"i-ph:download text-lg text-gray-500 dark:text-gray-400 group-hover:text-purple-500 transition-colors"}),"Export"]}),p.jsx(qm,{showCloseButton:!0,children:p.jsxs("div",{className:"p-6",children:[p.jsxs(hf,{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:download w-5 h-5"}),"Export Event Logs"]}),p.jsx("div",{className:"mt-4 flex flex-col gap-2",children:I.map($=>p.jsxs("button",{onClick:()=>P($.handler),className:Pe("flex items-center gap-3 px-4 py-3 text-sm rounded-lg transition-colors w-full text-left","bg-white dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","hover:bg-purple-50 dark:hover:bg-[#1a1a1a]","hover:border-purple-200 dark:hover:border-purple-900/30","text-bolt-elements-textPrimary"),children:[p.jsx("div",{className:Pe($.icon,"w-5 h-5")}),p.jsxs("div",{children:[p.jsx("div",{className:"font-medium",children:$.label}),p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary mt-0.5",children:[$.id==="json"&&"Export as a structured JSON file",$.id==="csv"&&"Export as a CSV spreadsheet",$.id==="pdf"&&"Export as a formatted PDF document",$.id==="txt"&&"Export as a formatted text file"]})]})]},$.id))})]})})]})};return p.jsxs("div",{className:"flex h-full flex-col gap-6",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs(Uk,{open:d,onOpenChange:h,children:[p.jsx($k,{asChild:!0,children:p.jsxs("button",{className:Pe("flex items-center gap-2","rounded-lg px-3 py-1.5","text-sm text-gray-900 dark:text-white","bg-[#FAFAFA] dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","hover:bg-purple-500/10 dark:hover:bg-purple-500/20","transition-all duration-200"),children:[p.jsx("span",{className:Pe("text-lg",E?.icon||"i-ph:funnel"),style:{color:E?.color}}),E?.label||"All Types",p.jsx("span",{className:"i-ph:caret-down text-lg text-gray-500 dark:text-gray-400"})]})}),p.jsx(Hk,{children:p.jsx(zk,{className:"min-w-[200px] bg-white dark:bg-[#0A0A0A] rounded-lg shadow-lg py-1 z-[250] animate-in fade-in-0 zoom-in-95 border border-[#E5E5E5] dark:border-[#1A1A1A]",sideOffset:5,align:"start",side:"bottom",children:Q7.map(C=>p.jsxs(om,{className:"group flex items-center px-4 py-2.5 text-sm text-gray-700 dark:text-gray-200 hover:bg-purple-500/10 dark:hover:bg-purple-500/20 cursor-pointer transition-colors",onClick:()=>b(C.value),children:[p.jsx("div",{className:"mr-3 flex h-5 w-5 items-center justify-center",children:p.jsx("div",{className:Pe(C.icon,"text-lg group-hover:text-purple-500 transition-colors"),style:{color:C.color}})}),p.jsx("span",{className:"group-hover:text-purple-500 transition-colors",children:C.label})]},C.value))})})]}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Fo,{checked:c,onCheckedChange:C=>_("timestamps",C),className:"data-[state=checked]:bg-purple-500"}),p.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Show Timestamps"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Fo,{checked:i,onCheckedChange:C=>_("24hour",C),className:"data-[state=checked]:bg-purple-500"}),p.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"24h Time"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Fo,{checked:a,onCheckedChange:C=>_("autoExpand",C),className:"data-[state=checked]:bg-purple-500"}),p.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Auto Expand"})]}),p.jsx("div",{className:"w-px h-4 bg-gray-200 dark:bg-gray-700"}),p.jsxs("button",{onClick:v,className:Pe("group flex items-center gap-2","rounded-lg px-3 py-1.5","text-sm text-gray-900 dark:text-white","bg-[#FAFAFA] dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","hover:bg-purple-500/10 dark:hover:bg-purple-500/20","transition-all duration-200",{"animate-spin":f}),children:[p.jsx("span",{className:"i-ph:arrows-clockwise text-lg text-gray-500 dark:text-gray-400 group-hover:text-purple-500 transition-colors"}),"Refresh"]}),p.jsx(R,{})]})]}),p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsxs("div",{className:"relative",children:[p.jsx("input",{type:"text",placeholder:"Search logs...",value:r,onChange:C=>s(C.target.value),className:Pe("w-full px-4 py-2 pl-10 rounded-lg","bg-[#FAFAFA] dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400","focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500","transition-all duration-200")}),p.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:p.jsx("div",{className:"i-ph:magnifying-glass text-lg text-gray-500 dark:text-gray-400"})})]}),m.length===0?p.jsxs(ot.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:Pe("flex flex-col items-center justify-center gap-4","rounded-lg p-8 text-center","bg-[#FAFAFA] dark:bg-[#0A0A0A]","border border-[#E5E5E5] dark:border-[#1A1A1A]"),children:[p.jsx("span",{className:"i-ph:clipboard-text text-4xl text-gray-400 dark:text-gray-600"}),p.jsxs("div",{className:"flex flex-col gap-1",children:[p.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"No Logs Found"}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Try adjusting your search or filters"})]})]}):m.map(C=>p.jsx(NFe,{log:C,isExpanded:a,use24Hour:i,showTimestamp:c},C.id))]})]})}const IFe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,RFe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,LFe={};function e9(t,e){return(LFe.jsx?RFe:IFe).test(t)}const OFe=/[ \t\n\f\r]/g;function aC(t){return typeof t=="object"?t.type==="text"?t9(t.value):!1:t9(t)}function t9(t){return t.replace(OFe,"")===""}var Lne={},n9=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,DFe=/\n/g,MFe=/^\s*/,jFe=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,FFe=/^:\s*/,BFe=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,UFe=/^[;\s]*/,$Fe=/^\s+|\s+$/g,HFe=`
`,r9="/",s9="*",Eh="",zFe="comment",VFe="declaration",WFe=function(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var n=1,r=1;function s(g){var y=g.match(DFe);y&&(n+=y.length);var m=g.lastIndexOf(HFe);r=~m?g.length-m:r+g.length}function i(){var g={line:n,column:r};return function(y){return y.position=new o(g),c(),y}}function o(g){this.start=g,this.end={line:n,column:r},this.source=e.source}o.prototype.content=t;function a(g){var y=new Error(e.source+":"+n+":"+r+": "+g);if(y.reason=g,y.filename=e.source,y.line=n,y.column=r,y.source=t,!e.silent)throw y}function l(g){var y=g.exec(t);if(y){var m=y[0];return s(m),t=t.slice(m.length),y}}function c(){l(MFe)}function u(g){var y;for(g=g||[];y=d();)y!==!1&&g.push(y);return g}function d(){var g=i();if(!(r9!=t.charAt(0)||s9!=t.charAt(1))){for(var y=2;Eh!=t.charAt(y)&&(s9!=t.charAt(y)||r9!=t.charAt(y+1));)++y;if(y+=2,Eh===t.charAt(y-1))return a("End of comment missing");var m=t.slice(2,y-2);return r+=2,s(m),t=t.slice(y),r+=2,g({type:zFe,comment:m})}}function h(){var g=i(),y=l(jFe);if(y){if(d(),!l(FFe))return a("property missing ':'");var m=l(BFe),b=g({type:VFe,property:i9(y[0].replace(n9,Eh)),value:m?i9(m[0].replace(n9,Eh)):Eh});return l(UFe),b}}function f(){var g=[];u(g);for(var y;y=h();)y!==!1&&(g.push(y),u(g));return g}return c(),f()};function i9(t){return t?t.replace($Fe,Eh):Eh}var GFe=ii&&ii.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Lne,"__esModule",{value:!0});var o9=Lne.default=KFe,qFe=GFe(WFe);function KFe(t,e){var n=null;if(!t||typeof t!="string")return n;var r=(0,qFe.default)(t),s=typeof e=="function";return r.forEach(function(i){if(i.type==="declaration"){var o=i.property,a=i.value;s?e(o,a,i):a&&(n=n||{},n[o]=a)}}),n}const YFe=o9.default||o9;function dy(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?a9(t.position):"start"in t||"end"in t?a9(t):"line"in t||"column"in t?JP(t):""}function JP(t){return l9(t&&t.line)+":"+l9(t&&t.column)}function a9(t){return JP(t&&t.start)+"-"+JP(t&&t.end)}function l9(t){return t&&typeof t=="number"?t:1}class Gs extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",i={},o=!1;if(n&&("line"in n&&"column"in n?i={place:n}:"start"in n&&"end"in n?i={place:n}:"type"in n?i={ancestors:[n],place:n.position}:i={...n}),typeof e=="string"?s=e:!i.cause&&e&&(o=!0,s=e.message,i.cause=e),!i.ruleId&&!i.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?i.ruleId=r:(i.source=r.slice(0,l),i.ruleId=r.slice(l+1))}if(!i.place&&i.ancestors&&i.ancestors){const l=i.ancestors[i.ancestors.length-1];l&&(i.place=l.position)}const a=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=s,this.line=a?a.line:void 0,this.name=dy(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=o&&i.cause&&typeof i.cause.stack=="string"?i.cause.stack:"",this.actual,this.expected,this.note,this.url}}Gs.prototype.file="";Gs.prototype.name="";Gs.prototype.reason="";Gs.prototype.message="";Gs.prototype.stack="";Gs.prototype.column=void 0;Gs.prototype.line=void 0;Gs.prototype.ancestors=void 0;Gs.prototype.cause=void 0;Gs.prototype.fatal=void 0;Gs.prototype.place=void 0;Gs.prototype.ruleId=void 0;Gs.prototype.source=void 0;const n6={}.hasOwnProperty,XFe=new Map,JFe=/[A-Z]/g,ZFe=/-([a-z])/g,QFe=new Set(["table","tbody","thead","tfoot","tr"]),eBe=new Set(["td","th"]),One="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function tBe(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=cBe(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=lBe(n,e.jsx,e.jsxs)}const s={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?Ql:Bg,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},i=Dne(s,t,void 0);return i&&typeof i!="string"?i:s.create(t,s.Fragment,{children:i||void 0},void 0)}function Dne(t,e,n){if(e.type==="element")return nBe(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return rBe(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return iBe(t,e,n);if(e.type==="mdxjsEsm")return sBe(t,e);if(e.type==="root")return oBe(t,e,n);if(e.type==="text")return aBe(t,e)}function nBe(t,e,n){const r=t.schema;let s=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=Ql,t.schema=s),t.ancestors.push(e);const i=jne(t,e.tagName,!1),o=uBe(t,e);let a=s6(t,e);return QFe.has(e.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!aC(l):!0})),Mne(t,o,i,e),r6(o,a),t.ancestors.pop(),t.schema=r,t.create(e,i,o,n)}function rBe(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}m1(t,e.position)}function sBe(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);m1(t,e.position)}function iBe(t,e,n){const r=t.schema;let s=r;e.name==="svg"&&r.space==="html"&&(s=Ql,t.schema=s),t.ancestors.push(e);const i=e.name===null?t.Fragment:jne(t,e.name,!0),o=dBe(t,e),a=s6(t,e);return Mne(t,o,i,e),r6(o,a),t.ancestors.pop(),t.schema=r,t.create(e,i,o,n)}function oBe(t,e,n){const r={};return r6(r,s6(t,e)),t.create(e,t.Fragment,r,n)}function aBe(t,e){return e.value}function Mne(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function r6(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function lBe(t,e,n){return r;function r(s,i,o,a){const c=Array.isArray(o.children)?n:e;return a?c(i,o,a):c(i,o)}}function cBe(t,e){return n;function n(r,s,i,o){const a=Array.isArray(i.children),l=ec(r);return e(s,i,o,a,{columnNumber:l?l.column-1:void 0,fileName:t,lineNumber:l?l.line:void 0},void 0)}}function uBe(t,e){const n={};let r,s;for(s in e.properties)if(s!=="children"&&n6.call(e.properties,s)){const i=hBe(t,s,e.properties[s]);if(i){const[o,a]=i;t.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&eBe.has(e.tagName)?r=a:n[o]=a}}if(r){const i=n.style||(n.style={});i[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function dBe(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const i=r.data.estree.body[0];i.type;const o=i.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,t.evaluater.evaluateExpression(a.argument))}else m1(t,e.position);else{const s=r.name;let i;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const a=r.value.data.estree.body[0];a.type,i=t.evaluater.evaluateExpression(a.expression)}else m1(t,e.position);else i=r.value===null?!0:r.value;n[s]=i}return n}function s6(t,e){const n=[];let r=-1;const s=t.passKeys?new Map:XFe;for(;++r<e.children.length;){const i=e.children[r];let o;if(t.passKeys){const l=i.type==="element"?i.tagName:i.type==="mdxJsxFlowElement"||i.type==="mdxJsxTextElement"?i.name:void 0;if(l){const c=s.get(l)||0;o=l+"-"+c,s.set(l,c+1)}}const a=Dne(t,i,o);a!==void 0&&n.push(a)}return n}function hBe(t,e,n){const r=Rv(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?TO(n):NO(n)),r.property==="style"){let s=typeof n=="object"?n:fBe(t,String(n));return t.stylePropertyNameCase==="css"&&(s=pBe(s)),["style",s]}return[t.elementAttributeNameCase==="react"&&r.space?VIe[r.property]||r.property:r.attribute,n]}}function fBe(t,e){const n={};try{YFe(e,r)}catch(s){if(!t.ignoreInvalidStyle){const i=s,o=new Gs("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=t.filePath||void 0,o.url=One+"#cannot-parse-style-attribute",o}}return n;function r(s,i){let o=s;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(ZFe,gBe)),n[o]=i}}function jne(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const s=e.split(".");let i=-1,o;for(;++i<s.length;){const a=e9(s[i])?{type:"Identifier",name:s[i]}:{type:"Literal",value:s[i]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(i&&a.type==="Literal"),optional:!1}:a}r=o}else r=e9(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const s=r.value;return n6.call(t.components,s)?t.components[s]:s}if(t.evaluater)return t.evaluater.evaluateExpression(r);m1(t)}function m1(t,e){const n=new Gs("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=One+"#cannot-handle-mdx-estrees-without-createevaluater",n}function pBe(t){const e={};let n;for(n in t)n6.call(t,n)&&(e[mBe(n)]=t[n]);return e}function mBe(t){let e=t.replace(JFe,bBe);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function gBe(t,e){return e.toUpperCase()}function bBe(t){return"-"+t.toLowerCase()}const g5={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},yBe={tokenize:vBe};function vBe(t){const e=t.attempt(this.parser.constructs.contentInitial,r,s);let n;return e;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),vn(t,e,"linePrefix")}function s(a){return t.enter("paragraph"),i(a)}function i(a){const l=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(a)}function o(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return Mt(a)?(t.consume(a),t.exit("chunkText"),i):(t.consume(a),o)}}const _Be={tokenize:xBe},c9={tokenize:wBe};function xBe(t){const e=this,n=[];let r=0,s,i,o;return a;function a(_){if(r<n.length){const E=n[r];return e.containerState=E[1],t.attempt(E[0].continuation,l,c)(_)}return c(_)}function l(_){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,s&&v();const E=e.events.length;let w=E,S;for(;w--;)if(e.events[w][0]==="exit"&&e.events[w][1].type==="chunkFlow"){S=e.events[w][1].end;break}b(r);let k=E;for(;k<e.events.length;)e.events[k][1].end={...S},k++;return no(e.events,w+1,0,e.events.slice(E)),e.events.length=k,c(_)}return a(_)}function c(_){if(r===n.length){if(!s)return h(_);if(s.currentConstruct&&s.currentConstruct.concrete)return g(_);e.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(c9,u,d)(_)}function u(_){return s&&v(),b(r),h(_)}function d(_){return e.parser.lazy[e.now().line]=r!==n.length,o=e.now().offset,g(_)}function h(_){return e.containerState={},t.attempt(c9,f,g)(_)}function f(_){return r++,n.push([e.currentConstruct,e.containerState]),h(_)}function g(_){if(_===null){s&&v(),b(0),t.consume(_);return}return s=s||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:i}),y(_)}function y(_){if(_===null){m(t.exit("chunkFlow"),!0),b(0),t.consume(_);return}return Mt(_)?(t.consume(_),m(t.exit("chunkFlow")),r=0,e.interrupt=void 0,a):(t.consume(_),y)}function m(_,E){const w=e.sliceStream(_);if(E&&w.push(null),_.previous=i,i&&(i.next=_),i=_,s.defineSkip(_.start),s.write(w),e.parser.lazy[_.start.line]){let S=s.events.length;for(;S--;)if(s.events[S][1].start.offset<o&&(!s.events[S][1].end||s.events[S][1].end.offset>o))return;const k=e.events.length;let x=k,I,R;for(;x--;)if(e.events[x][0]==="exit"&&e.events[x][1].type==="chunkFlow"){if(I){R=e.events[x][1].end;break}I=!0}for(b(r),S=k;S<e.events.length;)e.events[S][1].end={...R},S++;no(e.events,x+1,0,e.events.slice(k)),e.events.length=S}}function b(_){let E=n.length;for(;E-- >_;){const w=n[E];e.containerState=w[1],w[0].exit.call(e,t)}n.length=_}function v(){s.write([null]),i=void 0,s=void 0,e.containerState._closeFlow=void 0}}function wBe(t,e,n){return vn(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}const EBe={tokenize:SBe};function SBe(t){const e=this,n=t.attempt(Dv,r,t.attempt(this.parser.constructs.flowInitial,s,vn(t,t.attempt(this.parser.constructs.flow,s,t.attempt(CMe,s)),"linePrefix")));return n;function r(i){if(i===null){t.consume(i);return}return t.enter("lineEndingBlank"),t.consume(i),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function s(i){if(i===null){t.consume(i);return}return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const kBe={resolveAll:Bne()},CBe=Fne("string"),ABe=Fne("text");function Fne(t){return{resolveAll:Bne(t==="text"?TBe:void 0),tokenize:e};function e(n){const r=this,s=this.parser.constructs[t],i=n.attempt(s,o,a);return o;function o(u){return c(u)?i(u):a(u)}function a(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),l}function l(u){return c(u)?(n.exit("data"),i(u)):(n.consume(u),l)}function c(u){if(u===null)return!0;const d=s[u];let h=-1;if(d)for(;++h<d.length;){const f=d[h];if(!f.previous||f.previous.call(r,r.previous))return!0}return!1}}}function Bne(t){return e;function e(n,r){let s=-1,i;for(;++s<=n.length;)i===void 0?n[s]&&n[s][1].type==="data"&&(i=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==i+2&&(n[i][1].end=n[s-1][1].end,n.splice(i+2,s-i-2),s=i+2),i=void 0);return t?t(n,r):n}}function TBe(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],s=e.sliceStream(r);let i=s.length,o=-1,a=0,l;for(;i--;){const c=s[i];if(typeof c=="string"){for(o=c.length;c.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(c===-2)l=!0,a++;else if(c!==-1){i++;break}}if(a){const c={type:n===t.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?o:r.start._bufferIndex+o,_index:r.start._index+i,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...c.start},r.start.offset===r.end.offset?Object.assign(r,c):(t.splice(n,0,["enter",c,e],["exit",c,e]),n+=2)}n++}return t}const NBe={42:Si,43:Si,45:Si,48:Si,49:Si,50:Si,51:Si,52:Si,53:Si,54:Si,55:Si,56:Si,57:Si,62:jte},PBe={91:IMe},IBe={[-2]:s5,[-1]:s5,32:s5},RBe={35:jMe,42:a2,45:[k7,a2],60:$Me,61:k7,95:a2,96:E7,126:E7},LBe={38:Bte,92:Fte},OBe={[-5]:i5,[-4]:i5,[-3]:i5,33:i8e,38:Bte,42:BP,60:[aMe,KMe],91:a8e,92:[DMe,Fte],93:HO,95:BP,96:_Me},DBe={null:[BP,kBe]},MBe={null:[42,95]},jBe={null:[]},FBe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:MBe,contentInitial:PBe,disable:jBe,document:NBe,flow:RBe,flowInitial:IBe,insideSpan:DBe,string:LBe,text:OBe},Symbol.toStringTag,{value:"Module"}));function BBe(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},i=[];let o=[],a=[];const l={attempt:k(w),check:k(S),consume:v,enter:_,exit:E,interrupt:k(S,{interrupt:!0})},c={code:null,containerState:{},defineSkip:y,events:[],now:g,parser:t,previous:null,sliceSerialize:h,sliceStream:f,write:d};let u=e.tokenize.call(c,l);return e.resolveAll&&i.push(e),c;function d(C){return o=No(o,C),m(),o[o.length-1]!==null?[]:(x(e,0),c.events=eC(i,c.events,c),c.events)}function h(C,N){return $Be(f(C),N)}function f(C){return UBe(o,C)}function g(){const{_bufferIndex:C,_index:N,line:O,column:P,offset:$}=r;return{_bufferIndex:C,_index:N,line:O,column:P,offset:$}}function y(C){s[C.line]=C.column,R()}function m(){let C;for(;r._index<o.length;){const N=o[r._index];if(typeof N=="string")for(C=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===C&&r._bufferIndex<N.length;)b(N.charCodeAt(r._bufferIndex));else b(N)}}function b(C){u=u(C)}function v(C){Mt(C)?(r.line++,r.column=1,r.offset+=C===-3?2:1,R()):C!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=C}function _(C,N){const O=N||{};return O.type=C,O.start=g(),c.events.push(["enter",O,c]),a.push(O),O}function E(C){const N=a.pop();return N.end=g(),c.events.push(["exit",N,c]),N}function w(C,N){x(C,N.from)}function S(C,N){N.restore()}function k(C,N){return O;function O(P,$,ee){let J,Z,M,F;return Array.isArray(P)?D(P):"tokenize"in P?D([P]):G(P);function G(re){return te;function te(Y){const de=Y!==null&&re[Y],ye=Y!==null&&re.null,Se=[...Array.isArray(de)?de:de?[de]:[],...Array.isArray(ye)?ye:ye?[ye]:[]];return D(Se)(Y)}}function D(re){return J=re,Z=0,re.length===0?ee:j(re[Z])}function j(re){return te;function te(Y){return F=I(),M=re,re.partial||(c.currentConstruct=re),re.name&&c.parser.constructs.disable.null.includes(re.name)?W():re.tokenize.call(N?Object.assign(Object.create(c),N):c,l,V,W)(Y)}}function V(re){return C(M,F),$}function W(re){return F.restore(),++Z<J.length?j(J[Z]):ee}}}function x(C,N){C.resolveAll&&!i.includes(C)&&i.push(C),C.resolve&&no(c.events,N,c.events.length-N,C.resolve(c.events.slice(N),c)),C.resolveTo&&(c.events=C.resolveTo(c.events,c))}function I(){const C=g(),N=c.previous,O=c.currentConstruct,P=c.events.length,$=Array.from(a);return{from:P,restore:ee};function ee(){r=C,c.previous=N,c.currentConstruct=O,c.events.length=P,a=$,R()}}function R(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function UBe(t,e){const n=e.start._index,r=e.start._bufferIndex,s=e.end._index,i=e.end._bufferIndex;let o;if(n===s)o=[t[n].slice(r,i)];else{if(o=t.slice(n,s),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}i>0&&o.push(t[s].slice(0,i))}return o}function $Be(t,e){let n=-1;const r=[];let s;for(;++n<t.length;){const i=t[n];let o;if(typeof i=="string")o=i;else switch(i){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&s)continue;o=" ";break}default:o=String.fromCharCode(i)}s=i===-2,r.push(o)}return r.join("")}function HBe(t){const r={constructs:Tte([FBe,...(t||{}).extensions||[]]),content:s(yBe),defined:[],document:s(_Be),flow:s(EBe),lazy:{},string:s(CBe),text:s(ABe)};return r;function s(i){return o;function o(a){return BBe(r,i,a)}}}function zBe(t){for(;!Ute(t););return t}const u9=/[\0\t\n\r]/g;function VBe(){let t=1,e="",n=!0,r;return s;function s(i,o,a){const l=[];let c,u,d,h,f;for(i=e+(typeof i=="string"?i.toString():new TextDecoder(o||void 0).decode(i)),d=0,e="",n&&(i.charCodeAt(0)===65279&&d++,n=void 0);d<i.length;){if(u9.lastIndex=d,c=u9.exec(i),h=c&&c.index!==void 0?c.index:i.length,f=i.charCodeAt(h),!c){e=i.slice(d);break}if(f===10&&d===h&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),d<h&&(l.push(i.slice(d,h)),t+=h-d),f){case 0:{l.push(65533),t++;break}case 9:{for(u=Math.ceil(t/4)*4,l.push(-2);t++<u;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:r=!0,t=1}d=h+1}return a&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}const Une={}.hasOwnProperty;function WBe(t,e,n){return typeof e!="string"&&(n=e,e=void 0),GBe(n)(zBe(HBe(n).document().write(VBe()(t,e,!0))))}function GBe(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(fe),autolinkProtocol:I,autolinkEmail:I,atxHeading:i(ge),blockQuote:i(ye),characterEscape:I,characterReference:I,codeFenced:i(Se),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:i(Se,o),codeText:i(Te,o),codeTextData:I,data:I,codeFlowValue:I,definition:i(ke),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:i(K),hardBreakEscape:i(ne),hardBreakTrailing:i(ne),htmlFlow:i(le,o),htmlFlowData:I,htmlText:i(le,o),htmlTextData:I,image:i(se),label:o,link:i(fe),listItem:i(Ie),listItemValue:h,listOrdered:i(Ce,d),listUnordered:i(Ce),paragraph:i(xe),reference:j,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:i(ge),strong:i($e),thematicBreak:i(Be)},exit:{atxHeading:l(),atxHeadingSequence:w,autolink:l(),autolinkEmail:de,autolinkProtocol:Y,blockQuote:l(),characterEscapeValue:R,characterReferenceMarkerHexadecimal:W,characterReferenceMarkerNumeric:W,characterReferenceValue:re,characterReference:te,codeFenced:l(m),codeFencedFence:y,codeFencedFenceInfo:f,codeFencedFenceMeta:g,codeFlowValue:R,codeIndented:l(b),codeText:l($),codeTextData:R,data:R,definition:l(),definitionDestinationString:E,definitionLabelString:v,definitionTitleString:_,emphasis:l(),hardBreakEscape:l(N),hardBreakTrailing:l(N),htmlFlow:l(O),htmlFlowData:R,htmlText:l(P),htmlTextData:R,image:l(J),label:M,labelText:Z,lineEnding:C,link:l(ee),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:V,resourceDestinationString:F,resourceTitleString:G,resource:D,setextHeading:l(x),setextHeadingLineSequence:k,setextHeadingText:S,strong:l(),thematicBreak:l()}};$ne(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(Ae){let Ye={type:"root",children:[]};const Xe={stack:[Ye],tokenStack:[],config:e,enter:a,exit:c,buffer:o,resume:u,data:n},tt=[];let ie=-1;for(;++ie<Ae.length;)if(Ae[ie][1].type==="listOrdered"||Ae[ie][1].type==="listUnordered")if(Ae[ie][0]==="enter")tt.push(ie);else{const z=tt.pop();ie=s(Ae,z,ie)}for(ie=-1;++ie<Ae.length;){const z=e[Ae[ie][0]];Une.call(z,Ae[ie][1].type)&&z[Ae[ie][1].type].call(Object.assign({sliceSerialize:Ae[ie][2].sliceSerialize},Xe),Ae[ie][1])}if(Xe.tokenStack.length>0){const z=Xe.tokenStack[Xe.tokenStack.length-1];(z[1]||d9).call(Xe,void 0,z[0])}for(Ye.position={start:Tu(Ae.length>0?Ae[0][1].start:{line:1,column:1,offset:0}),end:Tu(Ae.length>0?Ae[Ae.length-2][1].end:{line:1,column:1,offset:0})},ie=-1;++ie<e.transforms.length;)Ye=e.transforms[ie](Ye)||Ye;return Ye}function s(Ae,Ye,Xe){let tt=Ye-1,ie=-1,z=!1,X,pe,Le,Ue;for(;++tt<=Xe;){const We=Ae[tt];switch(We[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{We[0]==="enter"?ie++:ie--,Ue=void 0;break}case"lineEndingBlank":{We[0]==="enter"&&(X&&!Ue&&!ie&&!Le&&(Le=tt),Ue=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Ue=void 0}if(!ie&&We[0]==="enter"&&We[1].type==="listItemPrefix"||ie===-1&&We[0]==="exit"&&(We[1].type==="listUnordered"||We[1].type==="listOrdered")){if(X){let Rt=tt;for(pe=void 0;Rt--;){const At=Ae[Rt];if(At[1].type==="lineEnding"||At[1].type==="lineEndingBlank"){if(At[0]==="exit")continue;pe&&(Ae[pe][1].type="lineEndingBlank",z=!0),At[1].type="lineEnding",pe=Rt}else if(!(At[1].type==="linePrefix"||At[1].type==="blockQuotePrefix"||At[1].type==="blockQuotePrefixWhitespace"||At[1].type==="blockQuoteMarker"||At[1].type==="listItemIndent"))break}Le&&(!pe||Le<pe)&&(X._spread=!0),X.end=Object.assign({},pe?Ae[pe][1].start:We[1].end),Ae.splice(pe||tt,0,["exit",X,We[2]]),tt++,Xe++}if(We[1].type==="listItemPrefix"){const Rt={type:"listItem",_spread:!1,start:Object.assign({},We[1].start),end:void 0};X=Rt,Ae.splice(tt,0,["enter",Rt,We[2]]),tt++,Xe++,Le=void 0,Ue=!0}}}return Ae[Ye][1]._spread=z,Xe}function i(Ae,Ye){return Xe;function Xe(tt){a.call(this,Ae(tt),tt),Ye&&Ye.call(this,tt)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(Ae,Ye,Xe){this.stack[this.stack.length-1].children.push(Ae),this.stack.push(Ae),this.tokenStack.push([Ye,Xe||void 0]),Ae.position={start:Tu(Ye.start),end:void 0}}function l(Ae){return Ye;function Ye(Xe){Ae&&Ae.call(this,Xe),c.call(this,Xe)}}function c(Ae,Ye){const Xe=this.stack.pop(),tt=this.tokenStack.pop();if(tt)tt[0].type!==Ae.type&&(Ye?Ye.call(this,Ae,tt[0]):(tt[1]||d9).call(this,Ae,tt[0]));else throw new Error("Cannot close `"+Ae.type+"` ("+dy({start:Ae.start,end:Ae.end})+"): its not open");Xe.position.end=Tu(Ae.end)}function u(){return FO(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function h(Ae){if(this.data.expectingFirstListItemValue){const Ye=this.stack[this.stack.length-2];Ye.start=Number.parseInt(this.sliceSerialize(Ae),10),this.data.expectingFirstListItemValue=void 0}}function f(){const Ae=this.resume(),Ye=this.stack[this.stack.length-1];Ye.lang=Ae}function g(){const Ae=this.resume(),Ye=this.stack[this.stack.length-1];Ye.meta=Ae}function y(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function m(){const Ae=this.resume(),Ye=this.stack[this.stack.length-1];Ye.value=Ae.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function b(){const Ae=this.resume(),Ye=this.stack[this.stack.length-1];Ye.value=Ae.replace(/(\r?\n|\r)$/g,"")}function v(Ae){const Ye=this.resume(),Xe=this.stack[this.stack.length-1];Xe.label=Ye,Xe.identifier=Sa(this.sliceSerialize(Ae)).toLowerCase()}function _(){const Ae=this.resume(),Ye=this.stack[this.stack.length-1];Ye.title=Ae}function E(){const Ae=this.resume(),Ye=this.stack[this.stack.length-1];Ye.url=Ae}function w(Ae){const Ye=this.stack[this.stack.length-1];if(!Ye.depth){const Xe=this.sliceSerialize(Ae).length;Ye.depth=Xe}}function S(){this.data.setextHeadingSlurpLineEnding=!0}function k(Ae){const Ye=this.stack[this.stack.length-1];Ye.depth=this.sliceSerialize(Ae).codePointAt(0)===61?1:2}function x(){this.data.setextHeadingSlurpLineEnding=void 0}function I(Ae){const Xe=this.stack[this.stack.length-1].children;let tt=Xe[Xe.length-1];(!tt||tt.type!=="text")&&(tt=je(),tt.position={start:Tu(Ae.start),end:void 0},Xe.push(tt)),this.stack.push(tt)}function R(Ae){const Ye=this.stack.pop();Ye.value+=this.sliceSerialize(Ae),Ye.position.end=Tu(Ae.end)}function C(Ae){const Ye=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Xe=Ye.children[Ye.children.length-1];Xe.position.end=Tu(Ae.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(Ye.type)&&(I.call(this,Ae),R.call(this,Ae))}function N(){this.data.atHardBreak=!0}function O(){const Ae=this.resume(),Ye=this.stack[this.stack.length-1];Ye.value=Ae}function P(){const Ae=this.resume(),Ye=this.stack[this.stack.length-1];Ye.value=Ae}function $(){const Ae=this.resume(),Ye=this.stack[this.stack.length-1];Ye.value=Ae}function ee(){const Ae=this.stack[this.stack.length-1];if(this.data.inReference){const Ye=this.data.referenceType||"shortcut";Ae.type+="Reference",Ae.referenceType=Ye,delete Ae.url,delete Ae.title}else delete Ae.identifier,delete Ae.label;this.data.referenceType=void 0}function J(){const Ae=this.stack[this.stack.length-1];if(this.data.inReference){const Ye=this.data.referenceType||"shortcut";Ae.type+="Reference",Ae.referenceType=Ye,delete Ae.url,delete Ae.title}else delete Ae.identifier,delete Ae.label;this.data.referenceType=void 0}function Z(Ae){const Ye=this.sliceSerialize(Ae),Xe=this.stack[this.stack.length-2];Xe.label=IDe(Ye),Xe.identifier=Sa(Ye).toLowerCase()}function M(){const Ae=this.stack[this.stack.length-1],Ye=this.resume(),Xe=this.stack[this.stack.length-1];if(this.data.inReference=!0,Xe.type==="link"){const tt=Ae.children;Xe.children=tt}else Xe.alt=Ye}function F(){const Ae=this.resume(),Ye=this.stack[this.stack.length-1];Ye.url=Ae}function G(){const Ae=this.resume(),Ye=this.stack[this.stack.length-1];Ye.title=Ae}function D(){this.data.inReference=void 0}function j(){this.data.referenceType="collapsed"}function V(Ae){const Ye=this.resume(),Xe=this.stack[this.stack.length-1];Xe.label=Ye,Xe.identifier=Sa(this.sliceSerialize(Ae)).toLowerCase(),this.data.referenceType="full"}function W(Ae){this.data.characterReferenceType=Ae.type}function re(Ae){const Ye=this.sliceSerialize(Ae),Xe=this.data.characterReferenceType;let tt;Xe?(tt=Ate(Ye,Xe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):tt=UO(Ye);const ie=this.stack[this.stack.length-1];ie.value+=tt}function te(Ae){const Ye=this.stack.pop();Ye.position.end=Tu(Ae.end)}function Y(Ae){R.call(this,Ae);const Ye=this.stack[this.stack.length-1];Ye.url=this.sliceSerialize(Ae)}function de(Ae){R.call(this,Ae);const Ye=this.stack[this.stack.length-1];Ye.url="mailto:"+this.sliceSerialize(Ae)}function ye(){return{type:"blockquote",children:[]}}function Se(){return{type:"code",lang:null,meta:null,value:""}}function Te(){return{type:"inlineCode",value:""}}function ke(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function K(){return{type:"emphasis",children:[]}}function ge(){return{type:"heading",depth:0,children:[]}}function ne(){return{type:"break"}}function le(){return{type:"html",value:""}}function se(){return{type:"image",title:null,url:"",alt:null}}function fe(){return{type:"link",title:null,url:"",children:[]}}function Ce(Ae){return{type:"list",ordered:Ae.type==="listOrdered",start:null,spread:Ae._spread,children:[]}}function Ie(Ae){return{type:"listItem",spread:Ae._spread,checked:null,children:[]}}function xe(){return{type:"paragraph",children:[]}}function $e(){return{type:"strong",children:[]}}function je(){return{type:"text",value:""}}function Be(){return{type:"thematicBreak"}}}function Tu(t){return{line:t.line,column:t.column,offset:t.offset}}function $ne(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?$ne(t,r):qBe(t,r)}}function qBe(t,e){let n;for(n in e)if(Une.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function d9(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+dy({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+dy({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+dy({start:e.start,end:e.end})+") is still open")}function KBe(t){const e=this;e.parser=n;function n(r){return WBe(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function YBe(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function XBe(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function JBe(t,e){const n=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(s.data={meta:e.meta}),t.patch(e,s),s=t.applyData(e,s),s={type:"element",tagName:"pre",properties:{},children:[s]},t.patch(e,s),s}function ZBe(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function QBe(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function e7e(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),s=Vg(r.toLowerCase()),i=t.footnoteOrder.indexOf(r);let o,a=t.footnoteCounts.get(r);a===void 0?(a=0,t.footnoteOrder.push(r),o=t.footnoteOrder.length):o=i+1,a+=1,t.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,c),t.applyData(e,c)}function t7e(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function n7e(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function Hne(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const s=t.all(e),i=s[0];i&&i.type==="text"?i.value="["+i.value:s.unshift({type:"text",value:"["});const o=s[s.length-1];return o&&o.type==="text"?o.value+=r:s.push({type:"text",value:r}),s}function r7e(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return Hne(t,e);const s={src:Vg(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const i={type:"element",tagName:"img",properties:s,children:[]};return t.patch(e,i),t.applyData(e,i)}function s7e(t,e){const n={src:Vg(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function i7e(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function o7e(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return Hne(t,e);const s={href:Vg(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const i={type:"element",tagName:"a",properties:s,children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function a7e(t,e){const n={href:Vg(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function l7e(t,e,n){const r=t.all(e),s=n?c7e(n):zne(e),i={},o=[];if(typeof e.checked=="boolean"){const u=r[0];let d;u&&u.type==="element"&&u.tagName==="p"?d=u:(d={type:"element",tagName:"p",properties:{},children:[]},r.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const u=r[a];(s||a!==0||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!s?o.push(...u.children):o.push(u)}const l=r[r.length-1];l&&(s||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:i,children:o};return t.patch(e,c),t.applyData(e,c)}function c7e(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=zne(n[r])}return e}function zne(t){const e=t.spread;return e??t.children.length>1}function u7e(t,e){const n={},r=t.all(e);let s=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++s<r.length;){const o=r[s];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const i={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,i),t.applyData(e,i)}function d7e(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function h7e(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function f7e(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function p7e(t,e){const n=t.all(e),r=n.shift(),s=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],o),s.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},a=ec(e.children[1]),l=Xk(e.children[e.children.length-1]);a&&l&&(o.position={start:a,end:l}),s.push(o)}const i={type:"element",tagName:"table",properties:{},children:t.wrap(s,!0)};return t.patch(e,i),t.applyData(e,i)}function m7e(t,e,n){const r=n?n.children:void 0,i=(r?r.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:e.children.length;let l=-1;const c=[];for(;++l<a;){const d=e.children[l],h={},f=o?o[l]:void 0;f&&(h.align=f);let g={type:"element",tagName:i,properties:h,children:[]};d&&(g.children=t.all(d),t.patch(d,g),g=t.applyData(d,g)),c.push(g)}const u={type:"element",tagName:"tr",properties:{},children:t.wrap(c,!0)};return t.patch(e,u),t.applyData(e,u)}function g7e(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const h9=9,f9=32;function b7e(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),s=0;const i=[];for(;r;)i.push(p9(e.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(e);return i.push(p9(e.slice(s),s>0,!1)),i.join("")}function p9(t,e,n){let r=0,s=t.length;if(e){let i=t.codePointAt(r);for(;i===h9||i===f9;)r++,i=t.codePointAt(r)}if(n){let i=t.codePointAt(s-1);for(;i===h9||i===f9;)s--,i=t.codePointAt(s-1)}return s>r?t.slice(r,s):""}function y7e(t,e){const n={type:"text",value:b7e(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function v7e(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const _7e={blockquote:YBe,break:XBe,code:JBe,delete:ZBe,emphasis:QBe,footnoteReference:e7e,heading:t7e,html:n7e,imageReference:r7e,image:s7e,inlineCode:i7e,linkReference:o7e,link:a7e,listItem:l7e,list:u7e,paragraph:d7e,root:h7e,strong:f7e,table:p7e,tableCell:g7e,tableRow:m7e,text:y7e,thematicBreak:v7e,toml:Fx,yaml:Fx,definition:Fx,footnoteDefinition:Fx};function Fx(){}function x7e(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function w7e(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function E7e(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||x7e,r=t.options.footnoteBackLabel||w7e,s=t.options.footnoteLabel||"Footnotes",i=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<t.footnoteOrder.length;){const c=t.footnoteById.get(t.footnoteOrder[l]);if(!c)continue;const u=t.all(c),d=String(c.identifier).toUpperCase(),h=Vg(d.toLowerCase());let f=0;const g=[],y=t.footnoteCounts.get(d);for(;y!==void 0&&++f<=y;){g.length>0&&g.push({type:"text",value:" "});let v=typeof n=="string"?n:n(l,f);typeof v=="string"&&(v={type:"text",value:v}),g.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+h+(f>1?"-"+f:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,f),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const m=u[u.length-1];if(m&&m.type==="element"&&m.tagName==="p"){const v=m.children[m.children.length-1];v&&v.type==="text"?v.value+=" ":m.children.push({type:"text",value:" "}),m.children.push(...g)}else u.push(...g);const b={type:"element",tagName:"li",properties:{id:e+"fn-"+h},children:t.wrap(u,!0)};t.patch(c,b),a.push(b)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...vf(o),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(a,!0)},{type:"text",value:`
`}]}}const ZP={}.hasOwnProperty,S7e={};function k7e(t,e){const n=e||S7e,r=new Map,s=new Map,i=new Map,o={..._7e,...n.handlers},a={all:c,applyData:A7e,definitionById:r,footnoteById:s,footnoteCounts:i,footnoteOrder:[],handlers:o,one:l,options:n,patch:C7e,wrap:N7e};return Hg(t,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const d=u.type==="definition"?r:s,h=String(u.identifier).toUpperCase();d.has(h)||d.set(h,u)}}),a;function l(u,d){const h=u.type,f=a.handlers[h];if(ZP.call(a.handlers,h)&&f)return f(a,u,d);if(a.options.passThrough&&a.options.passThrough.includes(h)){if("children"in u){const{children:y,...m}=u,b=vf(m);return b.children=a.all(u),b}return vf(u)}return(a.options.unknownHandler||T7e)(a,u,d)}function c(u){const d=[];if("children"in u){const h=u.children;let f=-1;for(;++f<h.length;){const g=a.one(h[f],u);if(g){if(f&&h[f-1].type==="break"&&(!Array.isArray(g)&&g.type==="text"&&(g.value=m9(g.value)),!Array.isArray(g)&&g.type==="element")){const y=g.children[0];y&&y.type==="text"&&(y.value=m9(y.value))}Array.isArray(g)?d.push(...g):d.push(g)}}}return d}}function C7e(t,e){t.position&&(e.position=rte(t))}function A7e(t,e){let n=e;if(t&&t.data){const r=t.data.hName,s=t.data.hChildren,i=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&i&&Object.assign(n.properties,vf(i)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function T7e(t,e){const n=e.data||{},r="value"in e&&!(ZP.call(n,"hProperties")||ZP.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function N7e(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function m9(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function g9(t,e){const n=k7e(t,e),r=n.one(t,void 0),s=E7e(n),i=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&i.children.push({type:"text",value:`
`},s),i}function P7e(t,e){return t&&"run"in t?async function(n,r){const s=g9(n,{file:r,...e});await t.run(s,r)}:function(n,r){return g9(n,{file:r,...t||e})}}function b9(t){if(t)throw t}var h2=Object.prototype.hasOwnProperty,Vne=Object.prototype.toString,y9=Object.defineProperty,v9=Object.getOwnPropertyDescriptor,_9=function(e){return typeof Array.isArray=="function"?Array.isArray(e):Vne.call(e)==="[object Array]"},x9=function(e){if(!e||Vne.call(e)!=="[object Object]")return!1;var n=h2.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&h2.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;var s;for(s in e);return typeof s>"u"||h2.call(e,s)},w9=function(e,n){y9&&n.name==="__proto__"?y9(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},E9=function(e,n){if(n==="__proto__")if(h2.call(e,n)){if(v9)return v9(e,n).value}else return;return e[n]},I7e=function t(){var e,n,r,s,i,o,a=arguments[0],l=1,c=arguments.length,u=!1;for(typeof a=="boolean"&&(u=a,a=arguments[1]||{},l=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});l<c;++l)if(e=arguments[l],e!=null)for(n in e)r=E9(a,n),s=E9(e,n),a!==s&&(u&&s&&(x9(s)||(i=_9(s)))?(i?(i=!1,o=r&&_9(r)?r:[]):o=r&&x9(r)?r:{},w9(a,{name:n,newValue:t(u,o,s)})):typeof s<"u"&&w9(a,{name:n,newValue:s}));return a};const b5=ao(I7e);function QP(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function R7e(){const t=[],e={run:n,use:r};return e;function n(...s){let i=-1;const o=s.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...s);function a(l,...c){const u=t[++i];let d=-1;if(l){o(l);return}for(;++d<s.length;)(c[d]===null||c[d]===void 0)&&(c[d]=s[d]);s=c,u?L7e(u,a)(...c):o(null,...c)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return t.push(s),e}}function L7e(t,e){let n;return r;function r(...o){const a=t.length>o.length;let l;a&&o.push(s);try{l=t.apply(this,o)}catch(c){const u=c;if(a&&n)throw u;return s(u)}a||(l&&l.then&&typeof l.then=="function"?l.then(i,s):l instanceof Error?s(l):i(l))}function s(o,...a){n||(n=!0,e(o,...a))}function i(o){s(null,o)}}const pl={basename:O7e,dirname:D7e,extname:M7e,join:j7e,sep:"/"};function O7e(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');jv(t);let n=0,r=-1,s=t.length,i;if(e===void 0||e.length===0||e.length>t.length){for(;s--;)if(t.codePointAt(s)===47){if(i){n=s+1;break}}else r<0&&(i=!0,r=s+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,a=e.length-1;for(;s--;)if(t.codePointAt(s)===47){if(i){n=s+1;break}}else o<0&&(i=!0,o=s+1),a>-1&&(t.codePointAt(s)===e.codePointAt(a--)?a<0&&(r=s):(a=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function D7e(t){if(jv(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function M7e(t){jv(t);let e=t.length,n=-1,r=0,s=-1,i=0,o;for(;e--;){const a=t.codePointAt(e);if(a===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),a===46?s<0?s=e:i!==1&&(i=1):s>-1&&(i=-1)}return s<0||n<0||i===0||i===1&&s===n-1&&s===r+1?"":t.slice(s,n)}function j7e(...t){let e=-1,n;for(;++e<t.length;)jv(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":F7e(n)}function F7e(t){jv(t);const e=t.codePointAt(0)===47;let n=B7e(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function B7e(t,e){let n="",r=0,s=-1,i=0,o=-1,a,l;for(;++o<=t.length;){if(o<t.length)a=t.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(s===o-1||i===1))if(s!==o-1&&i===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),s=o,i=0;continue}}else if(n.length>0){n="",r=0,s=o,i=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(s+1,o):n=t.slice(s+1,o),r=o-s-1;s=o,i=0}else a===46&&i>-1?i++:i=-1}return n}function jv(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const U7e={cwd:$7e};function $7e(){return"/"}function e4(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function H7e(t){if(typeof t=="string")t=new URL(t);else if(!e4(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return z7e(t)}function z7e(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(e)}const y5=["history","path","basename","stem","extname","dirname"];class Wne{constructor(e){let n;e?e4(e)?n={path:e}:typeof e=="string"||V7e(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":U7e.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<y5.length;){const i=y5[r];i in n&&n[i]!==void 0&&n[i]!==null&&(this[i]=i==="history"?[...n[i]]:n[i])}let s;for(s in n)y5.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?pl.basename(this.path):void 0}set basename(e){_5(e,"basename"),v5(e,"basename"),this.path=pl.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?pl.dirname(this.path):void 0}set dirname(e){S9(this.basename,"dirname"),this.path=pl.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?pl.extname(this.path):void 0}set extname(e){if(v5(e,"extname"),S9(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=pl.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){e4(e)&&(e=H7e(e)),_5(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?pl.basename(this.path,this.extname):void 0}set stem(e){_5(e,"stem"),v5(e,"stem"),this.path=pl.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const s=this.message(e,n,r);throw s.fatal=!0,s}info(e,n,r){const s=this.message(e,n,r);return s.fatal=void 0,s}message(e,n,r){const s=new Gs(e,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function v5(t,e){if(t&&t.includes(pl.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+pl.sep+"`")}function _5(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function S9(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function V7e(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const W7e=function(t){const r=this.constructor.prototype,s=r[t],i=function(){return s.apply(i,arguments)};return Object.setPrototypeOf(i,r),i},G7e={}.hasOwnProperty;class i6 extends W7e{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=R7e()}copy(){const e=new i6;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(b5(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(E5("data",this.frozen),this.namespace[e]=n,this):G7e.call(this.namespace,e)&&this.namespace[e]||void 0:e?(E5("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(e,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=Bx(e),r=this.parser||this.Parser;return x5("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),x5("process",this.parser||this.Parser),w5("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(i,o){const a=Bx(e),l=r.parse(a);r.run(l,a,function(u,d,h){if(u||!d||!h)return c(u);const f=d,g=r.stringify(f,h);Y7e(g)?h.value=g:h.result=g,c(u,h)});function c(u,d){u||!d?o(u):i?i(d):n(void 0,d)}}}processSync(e){let n=!1,r;return this.freeze(),x5("processSync",this.parser||this.Parser),w5("processSync",this.compiler||this.Compiler),this.process(e,s),C9("processSync","process",n),r;function s(i,o){n=!0,b9(i),r=o}}run(e,n,r){k9(e),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?i(void 0,r):new Promise(i);function i(o,a){const l=Bx(n);s.run(e,l,c);function c(u,d,h){const f=d||e;u?a(u):o?o(f):r(void 0,f,h)}}}runSync(e,n){let r=!1,s;return this.run(e,n,i),C9("runSync","run",r),s;function i(o,a){b9(o),s=a,r=!0}}stringify(e,n){this.freeze();const r=Bx(n),s=this.compiler||this.Compiler;return w5("stringify",s),k9(e),s(e,r)}use(e,...n){const r=this.attachers,s=this.namespace;if(E5("use",this.frozen),e!=null)if(typeof e=="function")l(e,n);else if(typeof e=="object")Array.isArray(e)?a(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function i(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[u,...d]=c;l(u,d)}else o(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function o(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(c.plugins),c.settings&&(s.settings=b5(!0,s.settings,c.settings))}function a(c){let u=-1;if(c!=null)if(Array.isArray(c))for(;++u<c.length;){const d=c[u];i(d)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,u){let d=-1,h=-1;for(;++d<r.length;)if(r[d][0]===c){h=d;break}if(h===-1)r.push([c,...u]);else if(u.length>0){let[f,...g]=u;const y=r[h][1];QP(y)&&QP(f)&&(f=b5(!0,y,f)),r[h]=[c,f,...g]}}}}const q7e=new i6().freeze();function x5(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function w5(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function E5(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function k9(t){if(!QP(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function C9(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Bx(t){return K7e(t)?t:new Wne(t)}function K7e(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function Y7e(t){return typeof t=="string"||X7e(t)}function X7e(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const J7e="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",A9=[],T9={allowDangerousHtml:!0},Z7e=/^(https?|ircs?|mailto|xmpp)$/i,Q7e=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function e9e(t){const e=t.allowedElements,n=t.allowElement,r=t.children||"",s=t.className,i=t.components,o=t.disallowedElements,a=t.rehypePlugins||A9,l=t.remarkPlugins||A9,c=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...T9}:T9,u=t.skipHtml,d=t.unwrapDisallowed,h=t.urlTransform||t9e,f=q7e().use(KBe).use(l).use(P7e,c).use(a),g=new Wne;typeof r=="string"&&(g.value=r);for(const v of Q7e)Object.hasOwn(t,v.from)&&(""+v.from+(v.to?"use `"+v.to+"` instead":"remove it")+J7e+v.id,void 0);const y=f.parse(g);let m=f.runSync(y,g);return s&&(m={type:"element",tagName:"div",properties:{className:s},children:m.type==="root"?m.children:[m]}),Hg(m,b),tBe(m,{Fragment:p.Fragment,components:i,ignoreInvalidStyle:!0,jsx:p.jsx,jsxs:p.jsxs,passKeys:!0,passNode:!0});function b(v,_,E){if(v.type==="raw"&&E&&typeof _=="number")return u?E.children.splice(_,1):E.children[_]={type:"text",value:v.value},_;if(v.type==="element"){let w;for(w in g5)if(Object.hasOwn(g5,w)&&Object.hasOwn(v.properties,w)){const S=v.properties[w],k=g5[w];(k===null||k.includes(v.tagName))&&(v.properties[w]=h(String(S||""),w,v))}}if(v.type==="element"){let w=e?!e.includes(v.tagName):o?o.includes(v.tagName):!1;if(!w&&n&&typeof _=="number"&&(w=!n(v,_,E)),w&&E&&typeof _=="number")return d&&v.children?E.children.splice(_,1,...v.children):E.children.splice(_,1),_}}}function t9e(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),s=t.indexOf("/");return e===-1||s!==-1&&e>s||n!==-1&&e>n||r!==-1&&e>r||Z7e.test(t.slice(0,e))?t:""}const Gne=[{id:"abap",name:"ABAP",import:()=>ve(()=>import("./abap-DsBKuouk.js"),[])},{id:"actionscript-3",name:"ActionScript",import:()=>ve(()=>import("./actionscript-3-D_z4Izcz.js"),[])},{id:"ada",name:"Ada",import:()=>ve(()=>import("./ada-727ZlQH0.js"),[])},{id:"angular-html",name:"Angular HTML",import:()=>ve(()=>import("./angular-html-LfdN0zeE.js").then(t=>t.f),__vite__mapDeps([3,4,5,6]))},{id:"angular-ts",name:"Angular TypeScript",import:()=>ve(()=>import("./angular-ts-CKsD7JZE.js"),__vite__mapDeps([7,3,4,5,6,8]))},{id:"apache",name:"Apache Conf",import:()=>ve(()=>import("./apache-Dn00JSTd.js"),[])},{id:"apex",name:"Apex",import:()=>ve(()=>import("./apex-COJ4H7py.js"),[])},{id:"apl",name:"APL",import:()=>ve(()=>import("./apl-BBq3IX1j.js"),__vite__mapDeps([9,4,5,6,10,11,12]))},{id:"applescript",name:"AppleScript",import:()=>ve(()=>import("./applescript-Bu5BbsvL.js"),[])},{id:"ara",name:"Ara",import:()=>ve(()=>import("./ara-7O62HKoU.js"),[])},{id:"asciidoc",name:"AsciiDoc",aliases:["adoc"],import:()=>ve(()=>import("./asciidoc-BPT9niGB.js"),[])},{id:"asm",name:"Assembly",import:()=>ve(()=>import("./asm-Dhn9LcZ4.js"),[])},{id:"astro",name:"Astro",import:()=>ve(()=>import("./astro-CqkE3fuf.js"),__vite__mapDeps([13,12,5,14,6,15]))},{id:"awk",name:"AWK",import:()=>ve(()=>import("./awk-eg146-Ew.js"),[])},{id:"ballerina",name:"Ballerina",import:()=>ve(()=>import("./ballerina-Du268qiB.js"),[])},{id:"bat",name:"Batch File",aliases:["batch"],import:()=>ve(()=>import("./bat-fje9CFhw.js"),[])},{id:"beancount",name:"Beancount",import:()=>ve(()=>import("./beancount-BwXTMy5W.js"),[])},{id:"berry",name:"Berry",aliases:["be"],import:()=>ve(()=>import("./berry-3xVqZejG.js"),[])},{id:"bibtex",name:"BibTeX",import:()=>ve(()=>import("./bibtex-xW4inM5L.js"),[])},{id:"bicep",name:"Bicep",import:()=>ve(()=>import("./bicep-DHo0CJ0O.js"),[])},{id:"blade",name:"Blade",import:()=>ve(()=>import("./blade-a8OxSdnT.js"),__vite__mapDeps([16,4,5,6,10,11,17,12]))},{id:"bsl",name:"1C (Enterprise)",aliases:["1c"],import:()=>ve(()=>import("./bsl-Dgyn0ogV.js"),__vite__mapDeps([18,19]))},{id:"c",name:"C",import:()=>ve(()=>import("./c-C3t2pwGQ.js"),[])},{id:"cadence",name:"Cadence",aliases:["cdc"],import:()=>ve(()=>import("./cadence-DNquZEk8.js"),[])},{id:"cairo",name:"Cairo",import:()=>ve(()=>import("./cairo--RitsXJZ.js"),__vite__mapDeps([20,21]))},{id:"clarity",name:"Clarity",import:()=>ve(()=>import("./clarity-BHOwM8T6.js"),[])},{id:"clojure",name:"Clojure",aliases:["clj"],import:()=>ve(()=>import("./clojure-DxSadP1t.js"),[])},{id:"cmake",name:"CMake",import:()=>ve(()=>import("./cmake-DbXoA79R.js"),[])},{id:"cobol",name:"COBOL",import:()=>ve(()=>import("./cobol-PTqiYgYu.js"),__vite__mapDeps([22,4,5,6,11]))},{id:"codeowners",name:"CODEOWNERS",import:()=>ve(()=>import("./codeowners-Bp6g37R7.js"),[])},{id:"codeql",name:"CodeQL",aliases:["ql"],import:()=>ve(()=>import("./codeql-sacFqUAJ.js"),[])},{id:"coffee",name:"CoffeeScript",aliases:["coffeescript"],import:()=>ve(()=>import("./coffee-dyiR41kL.js"),__vite__mapDeps([23,5]))},{id:"common-lisp",name:"Common Lisp",aliases:["lisp"],import:()=>ve(()=>import("./common-lisp-C7gG9l05.js"),[])},{id:"coq",name:"Coq",import:()=>ve(()=>import("./coq-Dsg_Bt_b.js"),[])},{id:"cpp",name:"C++",aliases:["c++"],import:()=>ve(()=>import("./cpp-BksuvNSY.js"),__vite__mapDeps([24,25,26,27,17]))},{id:"crystal",name:"Crystal",import:()=>ve(()=>import("./crystal-DtDmRg-F.js"),__vite__mapDeps([28,4,5,6,17,27,29]))},{id:"csharp",name:"C#",aliases:["c#","cs"],import:()=>ve(()=>import("./csharp-D9R-vmeu.js"),[])},{id:"css",name:"CSS",import:()=>ve(()=>import("./css-BPhBrDlE.js"),[])},{id:"csv",name:"CSV",import:()=>ve(()=>import("./csv-B0qRVHPH.js"),[])},{id:"cue",name:"CUE",import:()=>ve(()=>import("./cue-DtFQj3wx.js"),[])},{id:"cypher",name:"Cypher",aliases:["cql"],import:()=>ve(()=>import("./cypher-m2LEI-9-.js"),[])},{id:"d",name:"D",import:()=>ve(()=>import("./d-BoXegm-a.js"),[])},{id:"dart",name:"Dart",import:()=>ve(()=>import("./dart-B9wLZaAG.js"),[])},{id:"dax",name:"DAX",import:()=>ve(()=>import("./dax-ClGRhx96.js"),[])},{id:"desktop",name:"Desktop",import:()=>ve(()=>import("./desktop-DEIpsLCJ.js"),[])},{id:"diff",name:"Diff",import:()=>ve(()=>import("./diff-BgYniUM_.js"),[])},{id:"docker",name:"Dockerfile",aliases:["dockerfile"],import:()=>ve(()=>import("./docker-COcR7UxN.js"),[])},{id:"dotenv",name:"dotEnv",import:()=>ve(()=>import("./dotenv-BjQB5zDj.js"),[])},{id:"dream-maker",name:"Dream Maker",import:()=>ve(()=>import("./dream-maker-C-nORZOA.js"),[])},{id:"edge",name:"Edge",import:()=>ve(()=>import("./edge-D5gP-w-T.js"),__vite__mapDeps([30,14,4,5,6,31]))},{id:"elixir",name:"Elixir",import:()=>ve(()=>import("./elixir-CLiX3zqd.js"),__vite__mapDeps([32,4,5,6]))},{id:"elm",name:"Elm",import:()=>ve(()=>import("./elm-CmHSxxaM.js"),__vite__mapDeps([33,26,27]))},{id:"emacs-lisp",name:"Emacs Lisp",aliases:["elisp"],import:()=>ve(()=>import("./emacs-lisp-BX77sIaO.js"),[])},{id:"erb",name:"ERB",import:()=>ve(()=>import("./erb-BYTLMnw6.js"),__vite__mapDeps([34,4,5,6,35,36,10,11,17,37,14,38,39,24,25,26,27,29,40,41]))},{id:"erlang",name:"Erlang",aliases:["erl"],import:()=>ve(()=>import("./erlang-B-DoSBHF.js"),[])},{id:"fennel",name:"Fennel",import:()=>ve(()=>import("./fennel-bCA53EVm.js"),[])},{id:"fish",name:"Fish",import:()=>ve(()=>import("./fish-w-ucz2PV.js"),[])},{id:"fluent",name:"Fluent",aliases:["ftl"],import:()=>ve(()=>import("./fluent-Dayu4EKP.js"),[])},{id:"fortran-fixed-form",name:"Fortran (Fixed Form)",aliases:["f","for","f77"],import:()=>ve(()=>import("./fortran-fixed-form-TqA4NnZg.js"),__vite__mapDeps([42,43]))},{id:"fortran-free-form",name:"Fortran (Free Form)",aliases:["f90","f95","f03","f08","f18"],import:()=>ve(()=>import("./fortran-free-form-DKXYxT9g.js"),[])},{id:"fsharp",name:"F#",aliases:["f#","fs"],import:()=>ve(()=>import("./fsharp-XplgxFYe.js"),__vite__mapDeps([44,45]))},{id:"gdresource",name:"GDResource",import:()=>ve(()=>import("./gdresource-BHYsBjWJ.js"),__vite__mapDeps([46,47,48]))},{id:"gdscript",name:"GDScript",import:()=>ve(()=>import("./gdscript-DfxzS6Rs.js"),[])},{id:"gdshader",name:"GDShader",import:()=>ve(()=>import("./gdshader-SKMF96pI.js"),[])},{id:"genie",name:"Genie",import:()=>ve(()=>import("./genie-ajMbGru0.js"),[])},{id:"gherkin",name:"Gherkin",import:()=>ve(()=>import("./gherkin--30QC5Em.js"),[])},{id:"git-commit",name:"Git Commit Message",import:()=>ve(()=>import("./git-commit-i4q6IMui.js"),__vite__mapDeps([49,50]))},{id:"git-rebase",name:"Git Rebase Message",import:()=>ve(()=>import("./git-rebase-B-v9cOL2.js"),__vite__mapDeps([51,29]))},{id:"gleam",name:"Gleam",import:()=>ve(()=>import("./gleam-B430Bg39.js"),[])},{id:"glimmer-js",name:"Glimmer JS",aliases:["gjs"],import:()=>ve(()=>import("./glimmer-js-D-cwc0-E.js"),__vite__mapDeps([52,5,14,6,4]))},{id:"glimmer-ts",name:"Glimmer TS",aliases:["gts"],import:()=>ve(()=>import("./glimmer-ts-pgjy16dm.js"),__vite__mapDeps([53,14,6,5,4]))},{id:"glsl",name:"GLSL",import:()=>ve(()=>import("./glsl-DBO2IWDn.js"),__vite__mapDeps([26,27]))},{id:"gnuplot",name:"Gnuplot",import:()=>ve(()=>import("./gnuplot-CM8KxXT1.js"),[])},{id:"go",name:"Go",import:()=>ve(()=>import("./go-B1SYOhNW.js"),[])},{id:"graphql",name:"GraphQL",aliases:["gql"],import:()=>ve(()=>import("./graphql-cDcHW_If.js"),__vite__mapDeps([37,5,14,38,39]))},{id:"groovy",name:"Groovy",import:()=>ve(()=>import("./groovy-DkBy-JyN.js"),[])},{id:"hack",name:"Hack",import:()=>ve(()=>import("./hack-D1yCygmZ.js"),__vite__mapDeps([54,4,5,6,17]))},{id:"haml",name:"Ruby Haml",import:()=>ve(()=>import("./haml-B2EZWmdv.js"),__vite__mapDeps([36,5,6]))},{id:"handlebars",name:"Handlebars",aliases:["hbs"],import:()=>ve(()=>import("./handlebars-BQGss363.js"),__vite__mapDeps([55,4,5,6,41]))},{id:"haskell",name:"Haskell",aliases:["hs"],import:()=>ve(()=>import("./haskell-BILxekzW.js"),[])},{id:"haxe",name:"Haxe",import:()=>ve(()=>import("./haxe-C5wWYbrZ.js"),[])},{id:"hcl",name:"HashiCorp HCL",import:()=>ve(()=>import("./hcl-HzYwdGDm.js"),[])},{id:"hjson",name:"Hjson",import:()=>ve(()=>import("./hjson-T-Tgc4AT.js"),[])},{id:"hlsl",name:"HLSL",import:()=>ve(()=>import("./hlsl-ifBTmRxC.js"),[])},{id:"html",name:"HTML",import:()=>ve(()=>import("./html-C2L_23MC.js"),__vite__mapDeps([4,5,6]))},{id:"html-derivative",name:"HTML (Derivative)",import:()=>ve(()=>import("./html-derivative-CSfWNPLT.js"),__vite__mapDeps([31,4,5,6]))},{id:"http",name:"HTTP",import:()=>ve(()=>import("./http-FRrOvY1W.js"),__vite__mapDeps([56,29,12,10,11,37,5,14,38,39]))},{id:"hxml",name:"HXML",import:()=>ve(()=>import("./hxml-TIA70rKU.js"),__vite__mapDeps([57,58]))},{id:"hy",name:"Hy",import:()=>ve(()=>import("./hy-BMj5Y0dO.js"),[])},{id:"imba",name:"Imba",import:()=>ve(()=>import("./imba-bv_oIlVt.js"),__vite__mapDeps([59,14]))},{id:"ini",name:"INI",aliases:["properties"],import:()=>ve(()=>import("./ini-BjABl1g7.js"),[])},{id:"java",name:"Java",import:()=>ve(()=>import("./java-xI-RfyKK.js"),[])},{id:"javascript",name:"JavaScript",aliases:["js"],import:()=>ve(()=>import("./javascript-ySlJ1b_l.js"),[])},{id:"jinja",name:"Jinja",import:()=>ve(()=>import("./jinja-DGy0s7-h.js"),__vite__mapDeps([60,4,5,6]))},{id:"jison",name:"Jison",import:()=>ve(()=>import("./jison-BqZprYcd.js"),__vite__mapDeps([61,5]))},{id:"json",name:"JSON",import:()=>ve(()=>import("./json-BQoSv7ci.js"),[])},{id:"json5",name:"JSON5",import:()=>ve(()=>import("./json5-w8dY5SsB.js"),[])},{id:"jsonc",name:"JSON with Comments",import:()=>ve(()=>import("./jsonc-TU54ms6u.js"),[])},{id:"jsonl",name:"JSON Lines",import:()=>ve(()=>import("./jsonl-DREVFZK8.js"),[])},{id:"jsonnet",name:"Jsonnet",import:()=>ve(()=>import("./jsonnet-BfivnA6A.js"),[])},{id:"jssm",name:"JSSM",aliases:["fsl"],import:()=>ve(()=>import("./jssm-P4WzXJd0.js"),[])},{id:"jsx",name:"JSX",import:()=>ve(()=>import("./jsx-BAng5TT0.js"),[])},{id:"julia",name:"Julia",aliases:["jl"],import:()=>ve(()=>import("./julia-BBuGR-5E.js"),__vite__mapDeps([62,24,25,26,27,17,21,5,63]))},{id:"kotlin",name:"Kotlin",aliases:["kt","kts"],import:()=>ve(()=>import("./kotlin-B5lbUyaz.js"),[])},{id:"kusto",name:"Kusto",aliases:["kql"],import:()=>ve(()=>import("./kusto-mebxcVVE.js"),[])},{id:"latex",name:"LaTeX",import:()=>ve(()=>import("./latex-C-cWTeAZ.js"),__vite__mapDeps([64,65,63]))},{id:"lean",name:"Lean 4",aliases:["lean4"],import:()=>ve(()=>import("./lean-XBlWyCtg.js"),[])},{id:"less",name:"Less",import:()=>ve(()=>import("./less-BfCpw3nA.js"),[])},{id:"liquid",name:"Liquid",import:()=>ve(()=>import("./liquid-D3W5UaiH.js"),__vite__mapDeps([66,4,5,6,12]))},{id:"log",name:"Log file",import:()=>ve(()=>import("./log-Cc5clBb7.js"),[])},{id:"logo",name:"Logo",import:()=>ve(()=>import("./logo-IuBKFhSY.js"),[])},{id:"lua",name:"Lua",import:()=>ve(()=>import("./lua-CvWAzNxB.js"),__vite__mapDeps([40,27]))},{id:"luau",name:"Luau",import:()=>ve(()=>import("./luau-Du5NY7AG.js"),[])},{id:"make",name:"Makefile",aliases:["makefile"],import:()=>ve(()=>import("./make-Bvotw-X0.js"),[])},{id:"markdown",name:"Markdown",aliases:["md"],import:()=>ve(()=>import("./markdown-UIAJJxZW.js"),[])},{id:"marko",name:"Marko",import:()=>ve(()=>import("./marko-z0MBrx5-.js"),__vite__mapDeps([67,6,68,8,5]))},{id:"matlab",name:"MATLAB",import:()=>ve(()=>import("./matlab-D9-PGadD.js"),[])},{id:"mdc",name:"MDC",import:()=>ve(()=>import("./mdc-DB_EDNY_.js"),__vite__mapDeps([69,45,41,31,4,5,6]))},{id:"mdx",name:"MDX",import:()=>ve(()=>import("./mdx-sdHcTMYB.js"),[])},{id:"mermaid",name:"Mermaid",aliases:["mmd"],import:()=>ve(()=>import("./mermaid-Ci6OQyBP.js"),[])},{id:"mipsasm",name:"MIPS Assembly",aliases:["mips"],import:()=>ve(()=>import("./mipsasm-BC5c_5Pe.js"),[])},{id:"mojo",name:"Mojo",import:()=>ve(()=>import("./mojo-Tz6hzZYG.js"),[])},{id:"move",name:"Move",import:()=>ve(()=>import("./move-DB_GagMm.js"),[])},{id:"narrat",name:"Narrat Language",aliases:["nar"],import:()=>ve(()=>import("./narrat-DLbgOhZU.js"),[])},{id:"nextflow",name:"Nextflow",aliases:["nf"],import:()=>ve(()=>import("./nextflow-B0XVJmRM.js"),[])},{id:"nginx",name:"Nginx",import:()=>ve(()=>import("./nginx-D_VnBJ67.js"),__vite__mapDeps([70,40,27]))},{id:"nim",name:"Nim",import:()=>ve(()=>import("./nim-ZlGxZxc3.js"),__vite__mapDeps([71,27,4,5,6,10,11,26,45]))},{id:"nix",name:"Nix",import:()=>ve(()=>import("./nix-shcSOmrb.js"),[])},{id:"nushell",name:"nushell",aliases:["nu"],import:()=>ve(()=>import("./nushell-D4Tzg5kh.js"),[])},{id:"objective-c",name:"Objective-C",aliases:["objc"],import:()=>ve(()=>import("./objective-c-Deuh7S70.js"),[])},{id:"objective-cpp",name:"Objective-C++",import:()=>ve(()=>import("./objective-cpp-BUEGK8hf.js"),[])},{id:"ocaml",name:"OCaml",import:()=>ve(()=>import("./ocaml-BNioltXt.js"),[])},{id:"pascal",name:"Pascal",import:()=>ve(()=>import("./pascal-JqZropPD.js"),[])},{id:"perl",name:"Perl",import:()=>ve(()=>import("./perl-CHQXSrWU.js"),__vite__mapDeps([72,4,5,6,10,11,17]))},{id:"php",name:"PHP",import:()=>ve(()=>import("./php-B5ebYQev.js"),__vite__mapDeps([73,4,5,6,10,11,17,12]))},{id:"plsql",name:"PL/SQL",import:()=>ve(()=>import("./plsql-LKU2TuZ1.js"),[])},{id:"po",name:"Gettext PO",aliases:["pot","potx"],import:()=>ve(()=>import("./po-BFLt1xDp.js"),[])},{id:"polar",name:"Polar",import:()=>ve(()=>import("./polar-DKykz6zU.js"),[])},{id:"postcss",name:"PostCSS",import:()=>ve(()=>import("./postcss-B3ZDOciz.js"),[])},{id:"powerquery",name:"PowerQuery",import:()=>ve(()=>import("./powerquery-CSHBycmS.js"),[])},{id:"powershell",name:"PowerShell",aliases:["ps","ps1"],import:()=>ve(()=>import("./powershell-BIEUsx6d.js"),[])},{id:"prisma",name:"Prisma",import:()=>ve(()=>import("./prisma-B48N-Iqd.js"),[])},{id:"prolog",name:"Prolog",import:()=>ve(()=>import("./prolog-BY-TUvya.js"),[])},{id:"proto",name:"Protocol Buffer 3",aliases:["protobuf"],import:()=>ve(()=>import("./proto-zocC4JxJ.js"),[])},{id:"pug",name:"Pug",aliases:["jade"],import:()=>ve(()=>import("./pug-CM9l7STV.js"),__vite__mapDeps([74,5,6,4]))},{id:"puppet",name:"Puppet",import:()=>ve(()=>import("./puppet-Cza_XSSt.js"),[])},{id:"purescript",name:"PureScript",import:()=>ve(()=>import("./purescript-Bg-kzb6g.js"),[])},{id:"python",name:"Python",aliases:["py"],import:()=>ve(()=>import("./python-DhUJRlN_.js"),[])},{id:"qml",name:"QML",import:()=>ve(()=>import("./qml-D8XfuvdV.js"),__vite__mapDeps([75,5]))},{id:"qmldir",name:"QML Directory",import:()=>ve(()=>import("./qmldir-C8lEn-DE.js"),[])},{id:"qss",name:"Qt Style Sheets",import:()=>ve(()=>import("./qss-DhMKtDLN.js"),[])},{id:"r",name:"R",import:()=>ve(()=>import("./r-CwjWoCRV.js"),[])},{id:"racket",name:"Racket",import:()=>ve(()=>import("./racket-CzouJOBO.js"),[])},{id:"raku",name:"Raku",aliases:["perl6"],import:()=>ve(()=>import("./raku-B1bQXN8T.js"),[])},{id:"razor",name:"ASP.NET Razor",import:()=>ve(()=>import("./razor-CNLDkMZG.js"),__vite__mapDeps([76,4,5,6,77]))},{id:"reg",name:"Windows Registry Script",import:()=>ve(()=>import("./reg-5LuOXUq_.js"),[])},{id:"regexp",name:"RegExp",aliases:["regex"],import:()=>ve(()=>import("./regexp-DWJ3fJO_.js"),[])},{id:"rel",name:"Rel",import:()=>ve(()=>import("./rel-DJlmqQ1C.js"),[])},{id:"riscv",name:"RISC-V",import:()=>ve(()=>import("./riscv-QhoSD0DR.js"),[])},{id:"rst",name:"reStructuredText",import:()=>ve(()=>import("./rst-4NLicBqY.js"),__vite__mapDeps([78,31,4,5,6,24,25,26,27,17,21,29,41,79,35,36,10,11,37,14,38,39,40]))},{id:"ruby",name:"Ruby",aliases:["rb"],import:()=>ve(()=>import("./ruby-DeZ3UC14.js"),__vite__mapDeps([35,4,5,6,36,10,11,17,37,14,38,39,24,25,26,27,29,40,41]))},{id:"rust",name:"Rust",aliases:["rs"],import:()=>ve(()=>import("./rust-Be6lgOlo.js"),[])},{id:"sas",name:"SAS",import:()=>ve(()=>import("./sas-BmTFh92c.js"),__vite__mapDeps([80,17]))},{id:"sass",name:"Sass",import:()=>ve(()=>import("./sass-BJ4Li9vH.js"),[])},{id:"scala",name:"Scala",import:()=>ve(()=>import("./scala-DQVVAn-B.js"),[])},{id:"scheme",name:"Scheme",import:()=>ve(()=>import("./scheme-BJGe-b2p.js"),[])},{id:"scss",name:"SCSS",import:()=>ve(()=>import("./scss-C31hgJw-.js"),__vite__mapDeps([8,6]))},{id:"sdbl",name:"1C (Query)",aliases:["1c-query"],import:()=>ve(()=>import("./sdbl-BLhTXw86.js"),[])},{id:"shaderlab",name:"ShaderLab",aliases:["shader"],import:()=>ve(()=>import("./shaderlab-B7qAK45m.js"),__vite__mapDeps([81,82]))},{id:"shellscript",name:"Shell",aliases:["bash","sh","shell","zsh"],import:()=>ve(()=>import("./shellscript-atvbtKCR.js"),[])},{id:"shellsession",name:"Shell Session",aliases:["console"],import:()=>ve(()=>import("./shellsession-C_rIy8kc.js"),__vite__mapDeps([83,29]))},{id:"smalltalk",name:"Smalltalk",import:()=>ve(()=>import("./smalltalk-DkLiglaE.js"),[])},{id:"solidity",name:"Solidity",import:()=>ve(()=>import("./solidity-C1w2a3ep.js"),[])},{id:"soy",name:"Closure Templates",aliases:["closure-templates"],import:()=>ve(()=>import("./soy-C-lX7w71.js"),__vite__mapDeps([84,4,5,6]))},{id:"sparql",name:"SPARQL",import:()=>ve(()=>import("./sparql-bYkjHRlG.js"),__vite__mapDeps([85,86]))},{id:"splunk",name:"Splunk Query Language",aliases:["spl"],import:()=>ve(()=>import("./splunk-Cf8iN4DR.js"),[])},{id:"sql",name:"SQL",import:()=>ve(()=>import("./sql-COK4E0Yg.js"),[])},{id:"ssh-config",name:"SSH Config",import:()=>ve(()=>import("./ssh-config-BknIz3MU.js"),[])},{id:"stata",name:"Stata",import:()=>ve(()=>import("./stata-DorPZHa4.js"),__vite__mapDeps([87,17]))},{id:"stylus",name:"Stylus",aliases:["styl"],import:()=>ve(()=>import("./stylus-BeQkCIfX.js"),[])},{id:"svelte",name:"Svelte",import:()=>ve(()=>import("./svelte-MSaWC3Je.js"),__vite__mapDeps([88,5,14,6,15]))},{id:"swift",name:"Swift",import:()=>ve(()=>import("./swift-BSxZ-RaX.js"),[])},{id:"system-verilog",name:"SystemVerilog",import:()=>ve(()=>import("./system-verilog-C7L56vO4.js"),[])},{id:"systemd",name:"Systemd Units",import:()=>ve(()=>import("./systemd-CUnW07Te.js"),[])},{id:"talonscript",name:"TalonScript",aliases:["talon"],import:()=>ve(()=>import("./talonscript-C1XDQQGZ.js"),[])},{id:"tasl",name:"Tasl",import:()=>ve(()=>import("./tasl-CQjiPCtT.js"),[])},{id:"tcl",name:"Tcl",import:()=>ve(()=>import("./tcl-DQ1-QYvQ.js"),[])},{id:"templ",name:"Templ",import:()=>ve(()=>import("./templ-dwX3ZSMB.js"),__vite__mapDeps([89,90,5,6]))},{id:"terraform",name:"Terraform",aliases:["tf","tfvars"],import:()=>ve(()=>import("./terraform-BbSNqyBO.js"),[])},{id:"tex",name:"TeX",import:()=>ve(()=>import("./tex-rYs2v40G.js"),__vite__mapDeps([65,63]))},{id:"toml",name:"TOML",import:()=>ve(()=>import("./toml-CB2ApiWb.js"),[])},{id:"ts-tags",name:"TypeScript with Tags",aliases:["lit"],import:()=>ve(()=>import("./ts-tags-CipyTH0X.js"),__vite__mapDeps([91,14,6,5,26,27,4,17,10,11]))},{id:"tsv",name:"TSV",import:()=>ve(()=>import("./tsv-B_m7g4N7.js"),[])},{id:"tsx",name:"TSX",import:()=>ve(()=>import("./tsx-B6W0miNI.js"),[])},{id:"turtle",name:"Turtle",import:()=>ve(()=>import("./turtle-BMR_PYu6.js"),[])},{id:"twig",name:"Twig",import:()=>ve(()=>import("./twig-NC5TFiHP.js"),__vite__mapDeps([92,6,5,8,73,4,10,11,17,12,21,35,36,37,14,38,39,24,25,26,27,29,40,41]))},{id:"typescript",name:"TypeScript",aliases:["ts"],import:()=>ve(()=>import("./typescript-Dj6nwHGl.js"),[])},{id:"typespec",name:"TypeSpec",aliases:["tsp"],import:()=>ve(()=>import("./typespec-BpWG_bgh.js"),[])},{id:"typst",name:"Typst",aliases:["typ"],import:()=>ve(()=>import("./typst-BVUVsWT6.js"),[])},{id:"v",name:"V",import:()=>ve(()=>import("./v-CAQ2eGtk.js"),[])},{id:"vala",name:"Vala",import:()=>ve(()=>import("./vala-BFOHcciG.js"),[])},{id:"vb",name:"Visual Basic",aliases:["cmd"],import:()=>ve(()=>import("./vb-CdO5JTpU.js"),[])},{id:"verilog",name:"Verilog",import:()=>ve(()=>import("./verilog-CJaU5se_.js"),[])},{id:"vhdl",name:"VHDL",import:()=>ve(()=>import("./vhdl-DYoNaHQp.js"),[])},{id:"viml",name:"Vim Script",aliases:["vim","vimscript"],import:()=>ve(()=>import("./viml-m4uW47V2.js"),[])},{id:"vue",name:"Vue",import:()=>ve(()=>import("./vue-BuYVFjOK.js"),__vite__mapDeps([93,4,5,6,14,12,31]))},{id:"vue-html",name:"Vue HTML",import:()=>ve(()=>import("./vue-html-xdeiXROB.js"),__vite__mapDeps([94,93,4,5,6,14,12,31]))},{id:"vyper",name:"Vyper",aliases:["vy"],import:()=>ve(()=>import("./vyper-nyqBNV6O.js"),[])},{id:"wasm",name:"WebAssembly",import:()=>ve(()=>import("./wasm-C6j12Q_x.js"),[])},{id:"wenyan",name:"Wenyan",aliases:[""],import:()=>ve(()=>import("./wenyan-7A4Fjokl.js"),[])},{id:"wgsl",name:"WGSL",import:()=>ve(()=>import("./wgsl-CB0Krxn9.js"),[])},{id:"wikitext",name:"Wikitext",aliases:["mediawiki","wiki"],import:()=>ve(()=>import("./wikitext-DCE3LsBG.js"),[])},{id:"wolfram",name:"Wolfram",aliases:["wl"],import:()=>ve(()=>import("./wolfram-C3FkfJm5.js"),[])},{id:"xml",name:"XML",import:()=>ve(()=>import("./xml-e3z08dGr.js"),__vite__mapDeps([10,11]))},{id:"xsl",name:"XSL",import:()=>ve(()=>import("./xsl-Dd0NUgwM.js"),__vite__mapDeps([95,10,11]))},{id:"yaml",name:"YAML",aliases:["yml"],import:()=>ve(()=>import("./yaml-CVw76BM1.js"),[])},{id:"zenscript",name:"ZenScript",import:()=>ve(()=>import("./zenscript-HnGAYVZD.js"),[])},{id:"zig",name:"Zig",import:()=>ve(()=>import("./zig-BVz_zdnA.js"),[])}],n9e=Object.fromEntries(Gne.map(t=>[t.id,t.import])),r9e=Object.fromEntries(Gne.flatMap(t=>t.aliases?.map(e=>[e,t.import])||[])),qne={...n9e,...r9e},s9e=[{id:"andromeeda",displayName:"Andromeeda",type:"dark",import:()=>ve(()=>import("./andromeeda-C3khCPGq.js"),[])},{id:"aurora-x",displayName:"Aurora X",type:"dark",import:()=>ve(()=>import("./aurora-x-D-2ljcwZ.js"),[])},{id:"ayu-dark",displayName:"Ayu Dark",type:"dark",import:()=>ve(()=>import("./ayu-dark-Cv9koXgw.js"),[])},{id:"catppuccin-frappe",displayName:"Catppuccin Frapp",type:"dark",import:()=>ve(()=>import("./catppuccin-frappe-CD_QflpE.js"),[])},{id:"catppuccin-latte",displayName:"Catppuccin Latte",type:"light",import:()=>ve(()=>import("./catppuccin-latte-DRW-0cLl.js"),[])},{id:"catppuccin-macchiato",displayName:"Catppuccin Macchiato",type:"dark",import:()=>ve(()=>import("./catppuccin-macchiato-C-_shW-Y.js"),[])},{id:"catppuccin-mocha",displayName:"Catppuccin Mocha",type:"dark",import:()=>ve(()=>import("./catppuccin-mocha-LGGdnPYs.js"),[])},{id:"dark-plus",displayName:"Dark Plus",type:"dark",import:()=>ve(()=>import("./dark-plus-C3mMm8J8.js"),[])},{id:"dracula",displayName:"Dracula Theme",type:"dark",import:()=>ve(()=>import("./dracula-BzJJZx-M.js"),[])},{id:"dracula-soft",displayName:"Dracula Theme Soft",type:"dark",import:()=>ve(()=>import("./dracula-soft-BXkSAIEj.js"),[])},{id:"everforest-dark",displayName:"Everforest Dark",type:"dark",import:()=>ve(()=>import("./everforest-dark-BgDCqdQA.js"),[])},{id:"everforest-light",displayName:"Everforest Light",type:"light",import:()=>ve(()=>import("./everforest-light-C8M2exoo.js"),[])},{id:"github-dark",displayName:"GitHub Dark",type:"dark",import:()=>ve(()=>import("./github-dark-DHJKELXO.js"),[])},{id:"github-dark-default",displayName:"GitHub Dark Default",type:"dark",import:()=>ve(()=>import("./github-dark-default-Cuk6v7N8.js"),[])},{id:"github-dark-dimmed",displayName:"GitHub Dark Dimmed",type:"dark",import:()=>ve(()=>import("./github-dark-dimmed-DH5Ifo-i.js"),[])},{id:"github-dark-high-contrast",displayName:"GitHub Dark High Contrast",type:"dark",import:()=>ve(()=>import("./github-dark-high-contrast-E3gJ1_iC.js"),[])},{id:"github-light",displayName:"GitHub Light",type:"light",import:()=>ve(()=>import("./github-light-DAi9KRSo.js"),[])},{id:"github-light-default",displayName:"GitHub Light Default",type:"light",import:()=>ve(()=>import("./github-light-default-D7oLnXFd.js"),[])},{id:"github-light-high-contrast",displayName:"GitHub Light High Contrast",type:"light",import:()=>ve(()=>import("./github-light-high-contrast-BfjtVDDH.js"),[])},{id:"houston",displayName:"Houston",type:"dark",import:()=>ve(()=>import("./houston-DnULxvSX.js"),[])},{id:"kanagawa-dragon",displayName:"Kanagawa Dragon",type:"dark",import:()=>ve(()=>import("./kanagawa-dragon-CkXjmgJE.js"),[])},{id:"kanagawa-lotus",displayName:"Kanagawa Lotus",type:"light",import:()=>ve(()=>import("./kanagawa-lotus-CfQXZHmo.js"),[])},{id:"kanagawa-wave",displayName:"Kanagawa Wave",type:"dark",import:()=>ve(()=>import("./kanagawa-wave-DWedfzmr.js"),[])},{id:"laserwave",displayName:"LaserWave",type:"dark",import:()=>ve(()=>import("./laserwave-DUszq2jm.js"),[])},{id:"light-plus",displayName:"Light Plus",type:"light",import:()=>ve(()=>import("./light-plus-B7mTdjB0.js"),[])},{id:"material-theme",displayName:"Material Theme",type:"dark",import:()=>ve(()=>import("./material-theme-D5KoaKCx.js"),[])},{id:"material-theme-darker",displayName:"Material Theme Darker",type:"dark",import:()=>ve(()=>import("./material-theme-darker-BfHTSMKl.js"),[])},{id:"material-theme-lighter",displayName:"Material Theme Lighter",type:"light",import:()=>ve(()=>import("./material-theme-lighter-B0m2ddpp.js"),[])},{id:"material-theme-ocean",displayName:"Material Theme Ocean",type:"dark",import:()=>ve(()=>import("./material-theme-ocean-CyktbL80.js"),[])},{id:"material-theme-palenight",displayName:"Material Theme Palenight",type:"dark",import:()=>ve(()=>import("./material-theme-palenight-Csfq5Kiy.js"),[])},{id:"min-dark",displayName:"Min Dark",type:"dark",import:()=>ve(()=>import("./min-dark-CafNBF8u.js"),[])},{id:"min-light",displayName:"Min Light",type:"light",import:()=>ve(()=>import("./min-light-CTRr51gU.js"),[])},{id:"monokai",displayName:"Monokai",type:"dark",import:()=>ve(()=>import("./monokai-D4h5O-jR.js"),[])},{id:"night-owl",displayName:"Night Owl",type:"dark",import:()=>ve(()=>import("./night-owl-C39BiMTA.js"),[])},{id:"nord",displayName:"Nord",type:"dark",import:()=>ve(()=>import("./nord-Ddv68eIx.js"),[])},{id:"one-dark-pro",displayName:"One Dark Pro",type:"dark",import:()=>ve(()=>import("./one-dark-pro-GBQ2dnAY.js"),[])},{id:"one-light",displayName:"One Light",type:"light",import:()=>ve(()=>import("./one-light-PoHY5YXO.js"),[])},{id:"plastic",displayName:"Plastic",type:"dark",import:()=>ve(()=>import("./plastic-3e1v2bzS.js"),[])},{id:"poimandres",displayName:"Poimandres",type:"dark",import:()=>ve(()=>import("./poimandres-CS3Unz2-.js"),[])},{id:"red",displayName:"Red",type:"dark",import:()=>ve(()=>import("./red-bN70gL4F.js"),[])},{id:"rose-pine",displayName:"Ros Pine",type:"dark",import:()=>ve(()=>import("./rose-pine-CmCqftbK.js"),[])},{id:"rose-pine-dawn",displayName:"Ros Pine Dawn",type:"light",import:()=>ve(()=>import("./rose-pine-dawn-Ds-gbosJ.js"),[])},{id:"rose-pine-moon",displayName:"Ros Pine Moon",type:"dark",import:()=>ve(()=>import("./rose-pine-moon-CjDtw9vr.js"),[])},{id:"slack-dark",displayName:"Slack Dark",type:"dark",import:()=>ve(()=>import("./slack-dark-BthQWCQV.js"),[])},{id:"slack-ochin",displayName:"Slack Ochin",type:"light",import:()=>ve(()=>import("./slack-ochin-DqwNpetd.js"),[])},{id:"snazzy-light",displayName:"Snazzy Light",type:"light",import:()=>ve(()=>import("./snazzy-light-Bw305WKR.js"),[])},{id:"solarized-dark",displayName:"Solarized Dark",type:"dark",import:()=>ve(()=>import("./solarized-dark-DXbdFlpD.js"),[])},{id:"solarized-light",displayName:"Solarized Light",type:"light",import:()=>ve(()=>import("./solarized-light-L9t79GZl.js"),[])},{id:"synthwave-84",displayName:"Synthwave '84",type:"dark",import:()=>ve(()=>import("./synthwave-84-CbfX1IO0.js"),[])},{id:"tokyo-night",displayName:"Tokyo Night",type:"dark",import:()=>ve(()=>import("./tokyo-night-DBQeEorK.js"),[])},{id:"vesper",displayName:"Vesper",type:"dark",import:()=>ve(()=>import("./vesper-BEBZ7ncR.js"),[])},{id:"vitesse-black",displayName:"Vitesse Black",type:"dark",import:()=>ve(()=>import("./vitesse-black-Bkuqu6BP.js"),[])},{id:"vitesse-dark",displayName:"Vitesse Dark",type:"dark",import:()=>ve(()=>import("./vitesse-dark-D0r3Knsf.js"),[])},{id:"vitesse-light",displayName:"Vitesse Light",type:"light",import:()=>ve(()=>import("./vitesse-light-CVO1_9PV.js"),[])}],i9e=Object.fromEntries(s9e.map(t=>[t.id,t.import]));let Wc=class extends Error{constructor(e){super(e),this.name="ShikiError"}},o6=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function o9e(){return 2147483648}function a9e(){return typeof performance<"u"?performance.now():Date.now()}const l9e=(t,e)=>t+(e-t%e)%e;async function c9e(t){let e,n;const r={};function s(f){n=f,r.HEAPU8=new Uint8Array(f),r.HEAPU32=new Uint32Array(f)}function i(f,g,y){r.HEAPU8.copyWithin(f,g,g+y)}function o(f){try{return e.grow(f-n.byteLength+65535>>>16),s(e.buffer),1}catch{}}function a(f){const g=r.HEAPU8.length;f=f>>>0;const y=o9e();if(f>y)return!1;for(let m=1;m<=4;m*=2){let b=g*(1+.2/m);b=Math.min(b,f+100663296);const v=Math.min(y,l9e(Math.max(f,b),65536));if(o(v))return!0}return!1}const l=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function c(f,g,y=1024){const m=g+y;let b=g;for(;f[b]&&!(b>=m);)++b;if(b-g>16&&f.buffer&&l)return l.decode(f.subarray(g,b));let v="";for(;g<b;){let _=f[g++];if(!(_&128)){v+=String.fromCharCode(_);continue}const E=f[g++]&63;if((_&224)===192){v+=String.fromCharCode((_&31)<<6|E);continue}const w=f[g++]&63;if((_&240)===224?_=(_&15)<<12|E<<6|w:_=(_&7)<<18|E<<12|w<<6|f[g++]&63,_<65536)v+=String.fromCharCode(_);else{const S=_-65536;v+=String.fromCharCode(55296|S>>10,56320|S&1023)}}return v}function u(f,g){return f?c(r.HEAPU8,f,g):""}const d={emscripten_get_now:a9e,emscripten_memcpy_big:i,emscripten_resize_heap:a,fd_write:()=>0};async function h(){const g=await t({env:d,wasi_snapshot_preview1:d});e=g.memory,s(e.buffer),Object.assign(r,g),r.UTF8ToString=u}return await h(),r}var u9e=Object.defineProperty,d9e=(t,e,n)=>e in t?u9e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Hr=(t,e,n)=>(d9e(t,typeof e!="symbol"?e+"":e,n),n);let ts=null;function h9e(t){throw new o6(t.UTF8ToString(t.getLastOnigError()))}class lC{constructor(e){Hr(this,"utf16Length"),Hr(this,"utf8Length"),Hr(this,"utf16Value"),Hr(this,"utf8Value"),Hr(this,"utf16OffsetToUtf8"),Hr(this,"utf8OffsetToUtf16");const n=e.length,r=lC._utf8ByteLength(e),s=r!==n,i=s?new Uint32Array(n+1):null;s&&(i[n]=r);const o=s?new Uint32Array(r+1):null;s&&(o[r]=n);const a=new Uint8Array(r);let l=0;for(let c=0;c<n;c++){const u=e.charCodeAt(c);let d=u,h=!1;if(u>=55296&&u<=56319&&c+1<n){const f=e.charCodeAt(c+1);f>=56320&&f<=57343&&(d=(u-55296<<10)+65536|f-56320,h=!0)}s&&(i[c]=l,h&&(i[c+1]=l),d<=127?o[l+0]=c:d<=2047?(o[l+0]=c,o[l+1]=c):d<=65535?(o[l+0]=c,o[l+1]=c,o[l+2]=c):(o[l+0]=c,o[l+1]=c,o[l+2]=c,o[l+3]=c)),d<=127?a[l++]=d:d<=2047?(a[l++]=192|(d&1984)>>>6,a[l++]=128|(d&63)>>>0):d<=65535?(a[l++]=224|(d&61440)>>>12,a[l++]=128|(d&4032)>>>6,a[l++]=128|(d&63)>>>0):(a[l++]=240|(d&1835008)>>>18,a[l++]=128|(d&258048)>>>12,a[l++]=128|(d&4032)>>>6,a[l++]=128|(d&63)>>>0),h&&c++}this.utf16Length=n,this.utf8Length=r,this.utf16Value=e,this.utf8Value=a,this.utf16OffsetToUtf8=i,this.utf8OffsetToUtf16=o}static _utf8ByteLength(e){let n=0;for(let r=0,s=e.length;r<s;r++){const i=e.charCodeAt(r);let o=i,a=!1;if(i>=55296&&i<=56319&&r+1<s){const l=e.charCodeAt(r+1);l>=56320&&l<=57343&&(o=(i-55296<<10)+65536|l-56320,a=!0)}o<=127?n+=1:o<=2047?n+=2:o<=65535?n+=3:n+=4,a&&r++}return n}createString(e){const n=e.omalloc(this.utf8Length);return e.HEAPU8.set(this.utf8Value,n),n}}const ul=class{constructor(t){if(Hr(this,"id",++ul.LAST_ID),Hr(this,"_onigBinding"),Hr(this,"content"),Hr(this,"utf16Length"),Hr(this,"utf8Length"),Hr(this,"utf16OffsetToUtf8"),Hr(this,"utf8OffsetToUtf16"),Hr(this,"ptr"),!ts)throw new o6("Must invoke loadWasm first.");this._onigBinding=ts,this.content=t;const e=new lC(t);this.utf16Length=e.utf16Length,this.utf8Length=e.utf8Length,this.utf16OffsetToUtf8=e.utf16OffsetToUtf8,this.utf8OffsetToUtf16=e.utf8OffsetToUtf16,this.utf8Length<1e4&&!ul._sharedPtrInUse?(ul._sharedPtr||(ul._sharedPtr=ts.omalloc(1e4)),ul._sharedPtrInUse=!0,ts.HEAPU8.set(e.utf8Value,ul._sharedPtr),this.ptr=ul._sharedPtr):this.ptr=e.createString(ts)}convertUtf8OffsetToUtf16(t){return this.utf8OffsetToUtf16?t<0?0:t>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[t]:t}convertUtf16OffsetToUtf8(t){return this.utf16OffsetToUtf8?t<0?0:t>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[t]:t}dispose(){this.ptr===ul._sharedPtr?ul._sharedPtrInUse=!1:this._onigBinding.ofree(this.ptr)}};let Fv=ul;Hr(Fv,"LAST_ID",0);Hr(Fv,"_sharedPtr",0);Hr(Fv,"_sharedPtrInUse",!1);class f9e{constructor(e){if(Hr(this,"_onigBinding"),Hr(this,"_ptr"),!ts)throw new o6("Must invoke loadWasm first.");const n=[],r=[];for(let a=0,l=e.length;a<l;a++){const c=new lC(e[a]);n[a]=c.createString(ts),r[a]=c.utf8Length}const s=ts.omalloc(4*e.length);ts.HEAPU32.set(n,s/4);const i=ts.omalloc(4*e.length);ts.HEAPU32.set(r,i/4);const o=ts.createOnigScanner(s,i,e.length);for(let a=0,l=e.length;a<l;a++)ts.ofree(n[a]);ts.ofree(i),ts.ofree(s),o===0&&h9e(ts),this._onigBinding=ts,this._ptr=o}dispose(){this._onigBinding.freeOnigScanner(this._ptr)}findNextMatchSync(e,n,r){let s=0;if(typeof r=="number"&&(s=r),typeof e=="string"){e=new Fv(e);const i=this._findNextMatchSync(e,n,!1,s);return e.dispose(),i}return this._findNextMatchSync(e,n,!1,s)}_findNextMatchSync(e,n,r,s){const i=this._onigBinding,o=i.findNextOnigScannerMatch(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(n),s);if(o===0)return null;const a=i.HEAPU32;let l=o/4;const c=a[l++],u=a[l++],d=[];for(let h=0;h<u;h++){const f=e.convertUtf8OffsetToUtf16(a[l++]),g=e.convertUtf8OffsetToUtf16(a[l++]);d[h]={start:f,end:g,length:g-f}}return{index:c,captureIndices:d}}}function p9e(t){return typeof t.instantiator=="function"}function m9e(t){return typeof t.default=="function"}function g9e(t){return typeof t.data<"u"}function b9e(t){return typeof Response<"u"&&t instanceof Response}function y9e(t){return typeof ArrayBuffer<"u"&&(t instanceof ArrayBuffer||ArrayBuffer.isView(t))||typeof bt<"u"&&bt.isBuffer?.(t)||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer||typeof Uint32Array<"u"&&t instanceof Uint32Array}let Ux;function v9e(t){if(Ux)return Ux;async function e(){ts=await c9e(async n=>{let r=t;return r=await r,typeof r=="function"&&(r=await r(n)),typeof r=="function"&&(r=await r(n)),p9e(r)?r=await r.instantiator(n):m9e(r)?r=await r.default(n):(g9e(r)&&(r=r.data),b9e(r)?typeof WebAssembly.instantiateStreaming=="function"?r=await _9e(r)(n):r=await x9e(r)(n):y9e(r)?r=await S5(r)(n):r instanceof WebAssembly.Module?r=await S5(r)(n):"default"in r&&r.default instanceof WebAssembly.Module&&(r=await S5(r.default)(n))),"instance"in r&&(r=r.instance),"exports"in r&&(r=r.exports),r})}return Ux=e(),Ux}function S5(t){return e=>WebAssembly.instantiate(t,e)}function _9e(t){return e=>WebAssembly.instantiateStreaming(t,e)}function x9e(t){return async e=>{const n=await t.arrayBuffer();return WebAssembly.instantiate(n,e)}}let w9e;function E9e(){return w9e}async function Kne(t){return t&&await v9e(t),{createScanner(e){return new f9e(e.map(n=>typeof n=="string"?n:n.source))},createString(e){return new Fv(e)}}}function S9e(t){return a6(t)}function a6(t){return Array.isArray(t)?k9e(t):t instanceof RegExp?t:typeof t=="object"?C9e(t):t}function k9e(t){let e=[];for(let n=0,r=t.length;n<r;n++)e[n]=a6(t[n]);return e}function C9e(t){let e={};for(let n in t)e[n]=a6(t[n]);return e}function Yne(t,...e){return e.forEach(n=>{for(let r in n)t[r]=n[r]}),t}function Xne(t){const e=~t.lastIndexOf("/")||~t.lastIndexOf("\\");return e===0?t:~e===t.length-1?Xne(t.substring(0,t.length-1)):t.substr(~e+1)}var k5=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,$x=class{static hasCaptures(t){return t===null?!1:(k5.lastIndex=0,k5.test(t))}static replaceCaptures(t,e,n){return t.replace(k5,(r,s,i,o)=>{let a=n[parseInt(s||i,10)];if(a){let l=e.substring(a.start,a.end);for(;l[0]===".";)l=l.substring(1);switch(o){case"downcase":return l.toLowerCase();case"upcase":return l.toUpperCase();default:return l}}else return r})}};function Jne(t,e){return t<e?-1:t>e?1:0}function Zne(t,e){if(t===null&&e===null)return 0;if(!t)return-1;if(!e)return 1;let n=t.length,r=e.length;if(n===r){for(let s=0;s<n;s++){let i=Jne(t[s],e[s]);if(i!==0)return i}return 0}return n-r}function N9(t){return!!(/^#[0-9a-f]{6}$/i.test(t)||/^#[0-9a-f]{8}$/i.test(t)||/^#[0-9a-f]{3}$/i.test(t)||/^#[0-9a-f]{4}$/i.test(t))}function Qne(t){return t.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var ere=class{constructor(t){this.fn=t}cache=new Map;get(t){if(this.cache.has(t))return this.cache.get(t);const e=this.fn(t);return this.cache.set(t,e),e}},ZE=class{constructor(t,e,n){this._colorMap=t,this._defaults=e,this._root=n}static createFromRawTheme(t,e){return this.createFromParsedTheme(N9e(t),e)}static createFromParsedTheme(t,e){return I9e(t,e)}_cachedMatchRoot=new ere(t=>this._root.match(t));getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(t){if(t===null)return this._defaults;const e=t.scopeName,r=this._cachedMatchRoot.get(e).find(s=>A9e(t.parent,s.parentScopes));return r?new tre(r.fontStyle,r.foreground,r.background):null}},C5=class f2{constructor(e,n){this.parent=e,this.scopeName=n}static push(e,n){for(const r of n)e=new f2(e,r);return e}static from(...e){let n=null;for(let r=0;r<e.length;r++)n=new f2(n,e[r]);return n}push(e){return new f2(this,e)}getSegments(){let e=this;const n=[];for(;e;)n.push(e.scopeName),e=e.parent;return n.reverse(),n}toString(){return this.getSegments().join(" ")}extends(e){return this===e?!0:this.parent===null?!1:this.parent.extends(e)}getExtensionIfDefined(e){const n=[];let r=this;for(;r&&r!==e;)n.push(r.scopeName),r=r.parent;return r===e?n.reverse():void 0}};function A9e(t,e){if(e.length===0)return!0;for(let n=0;n<e.length;n++){let r=e[n],s=!1;if(r===">"){if(n===e.length-1)return!1;r=e[++n],s=!0}for(;t&&!T9e(t.scopeName,r);){if(s)return!1;t=t.parent}if(!t)return!1;t=t.parent}return!0}function T9e(t,e){return e===t||t.startsWith(e)&&t[e.length]==="."}var tre=class{constructor(t,e,n){this.fontStyle=t,this.foregroundId=e,this.backgroundId=n}};function N9e(t){if(!t)return[];if(!t.settings||!Array.isArray(t.settings))return[];let e=t.settings,n=[],r=0;for(let s=0,i=e.length;s<i;s++){let o=e[s];if(!o.settings)continue;let a;if(typeof o.scope=="string"){let d=o.scope;d=d.replace(/^[,]+/,""),d=d.replace(/[,]+$/,""),a=d.split(",")}else Array.isArray(o.scope)?a=o.scope:a=[""];let l=-1;if(typeof o.settings.fontStyle=="string"){l=0;let d=o.settings.fontStyle.split(" ");for(let h=0,f=d.length;h<f;h++)switch(d[h]){case"italic":l=l|1;break;case"bold":l=l|2;break;case"underline":l=l|4;break;case"strikethrough":l=l|8;break}}let c=null;typeof o.settings.foreground=="string"&&N9(o.settings.foreground)&&(c=o.settings.foreground);let u=null;typeof o.settings.background=="string"&&N9(o.settings.background)&&(u=o.settings.background);for(let d=0,h=a.length;d<h;d++){let g=a[d].trim().split(" "),y=g[g.length-1],m=null;g.length>1&&(m=g.slice(0,g.length-1),m.reverse()),n[r++]=new P9e(y,m,s,l,c,u)}}return n}var P9e=class{constructor(t,e,n,r,s,i){this.scope=t,this.parentScopes=e,this.index=n,this.fontStyle=r,this.foreground=s,this.background=i}},$c=(t=>(t[t.NotSet=-1]="NotSet",t[t.None=0]="None",t[t.Italic=1]="Italic",t[t.Bold=2]="Bold",t[t.Underline=4]="Underline",t[t.Strikethrough=8]="Strikethrough",t))($c||{});function I9e(t,e){t.sort((l,c)=>{let u=Jne(l.scope,c.scope);return u!==0||(u=Zne(l.parentScopes,c.parentScopes),u!==0)?u:l.index-c.index});let n=0,r="#000000",s="#ffffff";for(;t.length>=1&&t[0].scope==="";){let l=t.shift();l.fontStyle!==-1&&(n=l.fontStyle),l.foreground!==null&&(r=l.foreground),l.background!==null&&(s=l.background)}let i=new R9e(e),o=new tre(n,i.getId(r),i.getId(s)),a=new O9e(new t4(0,null,-1,0,0),[]);for(let l=0,c=t.length;l<c;l++){let u=t[l];a.insert(0,u.scope,u.parentScopes,u.fontStyle,i.getId(u.foreground),i.getId(u.background))}return new ZE(i,o,a)}var R9e=class{_isFrozen;_lastColorId;_id2color;_color2id;constructor(t){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(t)){this._isFrozen=!0;for(let e=0,n=t.length;e<n;e++)this._color2id[t[e]]=e,this._id2color[e]=t[e]}else this._isFrozen=!1}getId(t){if(t===null)return 0;t=t.toUpperCase();let e=this._color2id[t];if(e)return e;if(this._isFrozen)throw new Error(`Missing color in color map - ${t}`);return e=++this._lastColorId,this._color2id[t]=e,this._id2color[e]=t,e}getColorMap(){return this._id2color.slice(0)}},L9e=Object.freeze([]),t4=class nre{scopeDepth;parentScopes;fontStyle;foreground;background;constructor(e,n,r,s,i){this.scopeDepth=e,this.parentScopes=n||L9e,this.fontStyle=r,this.foreground=s,this.background=i}clone(){return new nre(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let n=[];for(let r=0,s=e.length;r<s;r++)n[r]=e[r].clone();return n}acceptOverwrite(e,n,r,s){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,n!==-1&&(this.fontStyle=n),r!==0&&(this.foreground=r),s!==0&&(this.background=s)}},O9e=class n4{constructor(e,n=[],r={}){this._mainRule=e,this._children=r,this._rulesWithParentScopes=n}_rulesWithParentScopes;static _cmpBySpecificity(e,n){if(e.scopeDepth!==n.scopeDepth)return n.scopeDepth-e.scopeDepth;let r=0,s=0;for(;e.parentScopes[r]===">"&&r++,n.parentScopes[s]===">"&&s++,!(r>=e.parentScopes.length||s>=n.parentScopes.length);){const i=n.parentScopes[s].length-e.parentScopes[r].length;if(i!==0)return i;r++,s++}return n.parentScopes.length-e.parentScopes.length}match(e){if(e!==""){let r=e.indexOf("."),s,i;if(r===-1?(s=e,i=""):(s=e.substring(0,r),i=e.substring(r+1)),this._children.hasOwnProperty(s))return this._children[s].match(i)}const n=this._rulesWithParentScopes.concat(this._mainRule);return n.sort(n4._cmpBySpecificity),n}insert(e,n,r,s,i,o){if(n===""){this._doInsertHere(e,r,s,i,o);return}let a=n.indexOf("."),l,c;a===-1?(l=n,c=""):(l=n.substring(0,a),c=n.substring(a+1));let u;this._children.hasOwnProperty(l)?u=this._children[l]:(u=new n4(this._mainRule.clone(),t4.cloneArr(this._rulesWithParentScopes)),this._children[l]=u),u.insert(e+1,c,r,s,i,o)}_doInsertHere(e,n,r,s,i){if(n===null){this._mainRule.acceptOverwrite(e,r,s,i);return}for(let o=0,a=this._rulesWithParentScopes.length;o<a;o++){let l=this._rulesWithParentScopes[o];if(Zne(l.parentScopes,n)===0){l.acceptOverwrite(e,r,s,i);return}}r===-1&&(r=this._mainRule.fontStyle),s===0&&(s=this._mainRule.foreground),i===0&&(i=this._mainRule.background),this._rulesWithParentScopes.push(new t4(e,n,r,s,i))}},ug=class wo{static toBinaryStr(e){return e.toString(2).padStart(32,"0")}static print(e){const n=wo.getLanguageId(e),r=wo.getTokenType(e),s=wo.getFontStyle(e),i=wo.getForeground(e),o=wo.getBackground(e);console.log({languageId:n,tokenType:r,fontStyle:s,foreground:i,background:o})}static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static set(e,n,r,s,i,o,a){let l=wo.getLanguageId(e),c=wo.getTokenType(e),u=wo.containsBalancedBrackets(e)?1:0,d=wo.getFontStyle(e),h=wo.getForeground(e),f=wo.getBackground(e);return n!==0&&(l=n),r!==8&&(c=r),s!==null&&(u=s?1:0),i!==-1&&(d=i),o!==0&&(h=o),a!==0&&(f=a),(l<<0|c<<8|u<<10|d<<11|h<<15|f<<24)>>>0}};function QE(t,e){const n=[],r=D9e(t);let s=r.next();for(;s!==null;){let l=0;if(s.length===2&&s.charAt(1)===":"){switch(s.charAt(0)){case"R":l=1;break;case"L":l=-1;break;default:console.log(`Unknown priority ${s} in scope selector`)}s=r.next()}let c=o();if(n.push({matcher:c,priority:l}),s!==",")break;s=r.next()}return n;function i(){if(s==="-"){s=r.next();const l=i();return c=>!!l&&!l(c)}if(s==="("){s=r.next();const l=a();return s===")"&&(s=r.next()),l}if(P9(s)){const l=[];do l.push(s),s=r.next();while(P9(s));return c=>e(l,c)}return null}function o(){const l=[];let c=i();for(;c;)l.push(c),c=i();return u=>l.every(d=>d(u))}function a(){const l=[];let c=o();for(;c&&(l.push(c),s==="|"||s===",");){do s=r.next();while(s==="|"||s===",");c=o()}return u=>l.some(d=>d(u))}}function P9(t){return!!t&&!!t.match(/[\w\.:]+/)}function D9e(t){let e=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,n=e.exec(t);return{next:()=>{if(!n)return null;const r=n[0];return n=e.exec(t),r}}}function rre(t){typeof t.dispose=="function"&&t.dispose()}var g1=class{constructor(t){this.scopeName=t}toKey(){return this.scopeName}},M9e=class{constructor(t,e){this.scopeName=t,this.ruleName=e}toKey(){return`${this.scopeName}#${this.ruleName}`}},j9e=class{_references=[];_seenReferenceKeys=new Set;get references(){return this._references}visitedRule=new Set;add(t){const e=t.toKey();this._seenReferenceKeys.has(e)||(this._seenReferenceKeys.add(e),this._references.push(t))}},F9e=class{constructor(t,e){this.repo=t,this.initialScopeName=e,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new g1(this.initialScopeName)]}seenFullScopeRequests=new Set;seenPartialScopeRequests=new Set;Q;processQueue(){const t=this.Q;this.Q=[];const e=new j9e;for(const n of t)B9e(n,this.initialScopeName,this.repo,e);for(const n of e.references)if(n instanceof g1){if(this.seenFullScopeRequests.has(n.scopeName))continue;this.seenFullScopeRequests.add(n.scopeName),this.Q.push(n)}else{if(this.seenFullScopeRequests.has(n.scopeName)||this.seenPartialScopeRequests.has(n.toKey()))continue;this.seenPartialScopeRequests.add(n.toKey()),this.Q.push(n)}}};function B9e(t,e,n,r){const s=n.lookup(t.scopeName);if(!s){if(t.scopeName===e)throw new Error(`No grammar provided for <${e}>`);return}const i=n.lookup(e);t instanceof g1?p2({baseGrammar:i,selfGrammar:s},r):r4(t.ruleName,{baseGrammar:i,selfGrammar:s,repository:s.repository},r);const o=n.injections(t.scopeName);if(o)for(const a of o)r.add(new g1(a))}function r4(t,e,n){if(e.repository&&e.repository[t]){const r=e.repository[t];eS([r],e,n)}}function p2(t,e){t.selfGrammar.patterns&&Array.isArray(t.selfGrammar.patterns)&&eS(t.selfGrammar.patterns,{...t,repository:t.selfGrammar.repository},e),t.selfGrammar.injections&&eS(Object.values(t.selfGrammar.injections),{...t,repository:t.selfGrammar.repository},e)}function eS(t,e,n){for(const r of t){if(n.visitedRule.has(r))continue;n.visitedRule.add(r);const s=r.repository?Yne({},e.repository,r.repository):e.repository;Array.isArray(r.patterns)&&eS(r.patterns,{...e,repository:s},n);const i=r.include;if(!i)continue;const o=sre(i);switch(o.kind){case 0:p2({...e,selfGrammar:e.baseGrammar},n);break;case 1:p2(e,n);break;case 2:r4(o.ruleName,{...e,repository:s},n);break;case 3:case 4:const a=o.scopeName===e.selfGrammar.scopeName?e.selfGrammar:o.scopeName===e.baseGrammar.scopeName?e.baseGrammar:void 0;if(a){const l={baseGrammar:e.baseGrammar,selfGrammar:a,repository:s};o.kind===4?r4(o.ruleName,l,n):p2(l,n)}else o.kind===4?n.add(new M9e(o.scopeName,o.ruleName)):n.add(new g1(o.scopeName));break}}}var U9e=class{kind=0},$9e=class{kind=1},H9e=class{constructor(t){this.ruleName=t}kind=2},z9e=class{constructor(t){this.scopeName=t}kind=3},V9e=class{constructor(t,e){this.scopeName=t,this.ruleName=e}kind=4};function sre(t){if(t==="$base")return new U9e;if(t==="$self")return new $9e;const e=t.indexOf("#");if(e===-1)return new z9e(t);if(e===0)return new H9e(t.substring(1));{const n=t.substring(0,e),r=t.substring(e+1);return new V9e(n,r)}}var W9e=/\\(\d+)/,I9=/\\(\d+)/g,G9e=-1,ire=-2;var Bv=class{$location;id;_nameIsCapturing;_name;_contentNameIsCapturing;_contentName;constructor(e,n,r,s){this.$location=e,this.id=n,this._name=r||null,this._nameIsCapturing=$x.hasCaptures(this._name),this._contentName=s||null,this._contentNameIsCapturing=$x.hasCaptures(this._contentName)}get debugName(){const e=this.$location?`${Xne(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${e}`}getName(e,n){return!this._nameIsCapturing||this._name===null||e===null||n===null?this._name:$x.replaceCaptures(this._name,e,n)}getContentName(e,n){return!this._contentNameIsCapturing||this._contentName===null?this._contentName:$x.replaceCaptures(this._contentName,e,n)}},q9e=class extends Bv{retokenizeCapturedWithRuleId;constructor(t,e,n,r,s){super(t,e,n,r),this.retokenizeCapturedWithRuleId=s}dispose(){}collectPatterns(t,e){throw new Error("Not supported!")}compile(t,e){throw new Error("Not supported!")}compileAG(t,e,n,r){throw new Error("Not supported!")}},K9e=class extends Bv{_match;captures;_cachedCompiledPatterns;constructor(t,e,n,r,s){super(t,e,n,null),this._match=new b1(r,this.id),this.captures=s,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(t,e){e.push(this._match)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new y1,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},R9=class extends Bv{hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(t,e,n,r,s){super(t,e,n,r),this.patterns=s.patterns,this.hasMissingPatterns=s.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(t,e){for(const n of this.patterns)t.getRule(n).collectPatterns(t,e)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new y1,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},s4=class extends Bv{_begin;beginCaptures;_end;endHasBackReferences;endCaptures;applyEndPatternLast;hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(t,e,n,r,s,i,o,a,l,c){super(t,e,n,r),this._begin=new b1(s,this.id),this.beginCaptures=i,this._end=new b1(o||"",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=a,this.applyEndPatternLast=l||!1,this.patterns=c.patterns,this.hasMissingPatterns=c.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(t,e){return this._end.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t,e).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t,e).compileAG(t,n,r)}_getCachedCompiledPatterns(t,e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new y1;for(const n of this.patterns)t.getRule(n).collectPatterns(t,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,e):this._cachedCompiledPatterns.setSource(0,e)),this._cachedCompiledPatterns}},tS=class extends Bv{_begin;beginCaptures;whileCaptures;_while;whileHasBackReferences;hasMissingPatterns;patterns;_cachedCompiledPatterns;_cachedCompiledWhilePatterns;constructor(t,e,n,r,s,i,o,a,l){super(t,e,n,r),this._begin=new b1(s,this.id),this.beginCaptures=i,this.whileCaptures=a,this._while=new b1(o,ire),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=l.patterns,this.hasMissingPatterns=l.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(t,e){return this._while.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new y1;for(const e of this.patterns)t.getRule(e).collectPatterns(t,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(t,e){return this._getCachedCompiledWhilePatterns(t,e).compile(t)}compileWhileAG(t,e,n,r){return this._getCachedCompiledWhilePatterns(t,e).compileAG(t,n,r)}_getCachedCompiledWhilePatterns(t,e){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new y1,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,e||""),this._cachedCompiledWhilePatterns}},ore=class Rs{static createCaptureRule(e,n,r,s,i){return e.registerRule(o=>new q9e(n,o,r,s,i))}static getCompiledRuleId(e,n,r){return e.id||n.registerRule(s=>{if(e.id=s,e.match)return new K9e(e.$vscodeTextmateLocation,e.id,e.name,e.match,Rs._compileCaptures(e.captures,n,r));if(typeof e.begin>"u"){e.repository&&(r=Yne({},r,e.repository));let i=e.patterns;return typeof i>"u"&&e.include&&(i=[{include:e.include}]),new R9(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,Rs._compilePatterns(i,n,r))}return e.while?new tS(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,Rs._compileCaptures(e.beginCaptures||e.captures,n,r),e.while,Rs._compileCaptures(e.whileCaptures||e.captures,n,r),Rs._compilePatterns(e.patterns,n,r)):new s4(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,Rs._compileCaptures(e.beginCaptures||e.captures,n,r),e.end,Rs._compileCaptures(e.endCaptures||e.captures,n,r),e.applyEndPatternLast,Rs._compilePatterns(e.patterns,n,r))}),e.id}static _compileCaptures(e,n,r){let s=[];if(e){let i=0;for(const o in e){if(o==="$vscodeTextmateLocation")continue;const a=parseInt(o,10);a>i&&(i=a)}for(let o=0;o<=i;o++)s[o]=null;for(const o in e){if(o==="$vscodeTextmateLocation")continue;const a=parseInt(o,10);let l=0;e[o].patterns&&(l=Rs.getCompiledRuleId(e[o],n,r)),s[a]=Rs.createCaptureRule(n,e[o].$vscodeTextmateLocation,e[o].name,e[o].contentName,l)}}return s}static _compilePatterns(e,n,r){let s=[];if(e)for(let i=0,o=e.length;i<o;i++){const a=e[i];let l=-1;if(a.include){const c=sre(a.include);switch(c.kind){case 0:case 1:l=Rs.getCompiledRuleId(r[a.include],n,r);break;case 2:let u=r[c.ruleName];u&&(l=Rs.getCompiledRuleId(u,n,r));break;case 3:case 4:const d=c.scopeName,h=c.kind===4?c.ruleName:null,f=n.getExternalGrammar(d,r);if(f)if(h){let g=f.repository[h];g&&(l=Rs.getCompiledRuleId(g,n,f.repository))}else l=Rs.getCompiledRuleId(f.repository.$self,n,f.repository);break}}else l=Rs.getCompiledRuleId(a,n,r);if(l!==-1){const c=n.getRule(l);let u=!1;if((c instanceof R9||c instanceof s4||c instanceof tS)&&c.hasMissingPatterns&&c.patterns.length===0&&(u=!0),u)continue;s.push(l)}}return{patterns:s,hasMissingPatterns:(e?e.length:0)!==s.length}}},b1=class are{source;ruleId;hasAnchor;hasBackReferences;_anchorCache;constructor(e,n){if(e&&typeof e=="string"){const r=e.length;let s=0,i=[],o=!1;for(let a=0;a<r;a++)if(e.charAt(a)==="\\"&&a+1<r){const c=e.charAt(a+1);c==="z"?(i.push(e.substring(s,a)),i.push("$(?!\\n)(?<!\\n)"),s=a+2):(c==="A"||c==="G")&&(o=!0),a++}this.hasAnchor=o,s===0?this.source=e:(i.push(e.substring(s,r)),this.source=i.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=n,typeof this.source=="string"?this.hasBackReferences=W9e.test(this.source):this.hasBackReferences=!1}clone(){return new are(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,n){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let r=n.map(s=>e.substring(s.start,s.end));return I9.lastIndex=0,this.source.replace(I9,(s,i)=>Qne(r[parseInt(i,10)]||""))}_buildAnchorCache(){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let e=[],n=[],r=[],s=[],i,o,a,l;for(i=0,o=this.source.length;i<o;i++)a=this.source.charAt(i),e[i]=a,n[i]=a,r[i]=a,s[i]=a,a==="\\"&&i+1<o&&(l=this.source.charAt(i+1),l==="A"?(e[i+1]="",n[i+1]="",r[i+1]="A",s[i+1]="A"):l==="G"?(e[i+1]="",n[i+1]="G",r[i+1]="",s[i+1]="G"):(e[i+1]=l,n[i+1]=l,r[i+1]=l,s[i+1]=l),i++);return{A0_G0:e.join(""),A0_G1:n.join(""),A1_G0:r.join(""),A1_G1:s.join("")}}resolveAnchors(e,n){return!this.hasAnchor||!this._anchorCache||typeof this.source!="string"?this.source:e?n?this._anchorCache.A1_G1:this._anchorCache.A1_G0:n?this._anchorCache.A0_G1:this._anchorCache.A0_G0}},y1=class{_items;_hasAnchors;_cached;_anchorCache;constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(t){this._items.push(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}unshift(t){this._items.unshift(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}length(){return this._items.length}setSource(t,e){this._items[t].source!==e&&(this._disposeCaches(),this._items[t].setSource(e))}compile(t){if(!this._cached){let e=this._items.map(n=>n.source);this._cached=new L9(t,e,this._items.map(n=>n.ruleId))}return this._cached}compileAG(t,e,n){return this._hasAnchors?e?n?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G0):n?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G0):this.compile(t)}_resolveAnchors(t,e,n){let r=this._items.map(s=>s.resolveAnchors(e,n));return new L9(t,r,this._items.map(s=>s.ruleId))}},L9=class{constructor(t,e,n){this.regExps=e,this.rules=n,this.scanner=t.createOnigScanner(e)}scanner;dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const t=[];for(let e=0,n=this.rules.length;e<n;e++)t.push("   - "+this.rules[e]+": "+this.regExps[e]);return t.join(`
`)}findNextMatchSync(t,e,n){const r=this.scanner.findNextMatchSync(t,e,n);return r?{ruleId:this.rules[r.index],captureIndices:r.captureIndices}:null}},A5=class{constructor(t,e){this.languageId=t,this.tokenType=e}},Y9e=class i4{_defaultAttributes;_embeddedLanguagesMatcher;constructor(e,n){this._defaultAttributes=new A5(e,8),this._embeddedLanguagesMatcher=new X9e(Object.entries(n||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(e){return e===null?i4._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(e)}static _NULL_SCOPE_METADATA=new A5(0,0);_getBasicScopeAttributes=new ere(e=>{const n=this._scopeToLanguage(e),r=this._toStandardTokenType(e);return new A5(n,r)});_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(e){const n=e.match(i4.STANDARD_TOKEN_TYPE_REGEXP);if(!n)return 8;switch(n[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}static STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/},X9e=class{values;scopesRegExp;constructor(t){if(t.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(t);const e=t.map(([n,r])=>Qne(n));e.sort(),e.reverse(),this.scopesRegExp=new RegExp(`^((${e.join(")|(")}))($|\\.)`,"")}}match(t){if(!this.scopesRegExp)return;const e=t.match(this.scopesRegExp);if(e)return this.values.get(e[1])}},O9=class{constructor(t,e){this.stack=t,this.stoppedEarly=e}};function lre(t,e,n,r,s,i,o,a){const l=e.content.length;let c=!1,u=-1;if(o){const f=J9e(t,e,n,r,s,i);s=f.stack,r=f.linePos,n=f.isFirstLine,u=f.anchorPosition}const d=Date.now();for(;!c;){if(a!==0&&Date.now()-d>a)return new O9(s,!0);h()}return new O9(s,!1);function h(){const f=Z9e(t,e,n,r,s,u);if(!f){i.produce(s,l),c=!0;return}const g=f.captureIndices,y=f.matchedRuleId,m=g&&g.length>0?g[0].end>r:!1;if(y===G9e){const b=s.getRule(t);i.produce(s,g[0].start),s=s.withContentNameScopesList(s.nameScopesList),Eb(t,e,n,s,i,b.endCaptures,g),i.produce(s,g[0].end);const v=s;if(s=s.parent,u=v.getAnchorPos(),!m&&v.getEnterPos()===r){s=v,i.produce(s,l),c=!0;return}}else{const b=t.getRule(y);i.produce(s,g[0].start);const v=s,_=b.getName(e.content,g),E=s.contentNameScopesList.pushAttributed(_,t);if(s=s.push(y,r,u,g[0].end===l,null,E,E),b instanceof s4){const w=b;Eb(t,e,n,s,i,w.beginCaptures,g),i.produce(s,g[0].end),u=g[0].end;const S=w.getContentName(e.content,g),k=E.pushAttributed(S,t);if(s=s.withContentNameScopesList(k),w.endHasBackReferences&&(s=s.withEndRule(w.getEndWithResolvedBackReferences(e.content,g))),!m&&v.hasSameRuleAs(s)){s=s.pop(),i.produce(s,l),c=!0;return}}else if(b instanceof tS){const w=b;Eb(t,e,n,s,i,w.beginCaptures,g),i.produce(s,g[0].end),u=g[0].end;const S=w.getContentName(e.content,g),k=E.pushAttributed(S,t);if(s=s.withContentNameScopesList(k),w.whileHasBackReferences&&(s=s.withEndRule(w.getWhileWithResolvedBackReferences(e.content,g))),!m&&v.hasSameRuleAs(s)){s=s.pop(),i.produce(s,l),c=!0;return}}else if(Eb(t,e,n,s,i,b.captures,g),i.produce(s,g[0].end),s=s.pop(),!m){s=s.safePop(),i.produce(s,l),c=!0;return}}g[0].end>r&&(r=g[0].end,n=!1)}}function J9e(t,e,n,r,s,i){let o=s.beginRuleCapturedEOL?0:-1;const a=[];for(let l=s;l;l=l.pop()){const c=l.getRule(t);c instanceof tS&&a.push({rule:c,stack:l})}for(let l=a.pop();l;l=a.pop()){const{ruleScanner:c,findOptions:u}=tUe(l.rule,t,l.stack.endRule,n,r===o),d=c.findNextMatchSync(e,r,u);if(d){if(d.ruleId!==ire){s=l.stack.pop();break}d.captureIndices&&d.captureIndices.length&&(i.produce(l.stack,d.captureIndices[0].start),Eb(t,e,n,l.stack,i,l.rule.whileCaptures,d.captureIndices),i.produce(l.stack,d.captureIndices[0].end),o=d.captureIndices[0].end,d.captureIndices[0].end>r&&(r=d.captureIndices[0].end,n=!1))}else{s=l.stack.pop();break}}return{stack:s,linePos:r,anchorPosition:o,isFirstLine:n}}function Z9e(t,e,n,r,s,i){const o=Q9e(t,e,n,r,s,i),a=t.getInjections();if(a.length===0)return o;const l=eUe(a,t,e,n,r,s,i);if(!l)return o;if(!o)return l;const c=o.captureIndices[0].start,u=l.captureIndices[0].start;return u<c||l.priorityMatch&&u===c?l:o}function Q9e(t,e,n,r,s,i){const o=s.getRule(t),{ruleScanner:a,findOptions:l}=cre(o,t,s.endRule,n,r===i),c=a.findNextMatchSync(e,r,l);return c?{captureIndices:c.captureIndices,matchedRuleId:c.ruleId}:null}function eUe(t,e,n,r,s,i,o){let a=Number.MAX_VALUE,l=null,c,u=0;const d=i.contentNameScopesList.getScopeNames();for(let h=0,f=t.length;h<f;h++){const g=t[h];if(!g.matcher(d))continue;const y=e.getRule(g.ruleId),{ruleScanner:m,findOptions:b}=cre(y,e,null,r,s===o),v=m.findNextMatchSync(n,s,b);if(!v)continue;const _=v.captureIndices[0].start;if(!(_>=a)&&(a=_,l=v.captureIndices,c=v.ruleId,u=g.priority,a===s))break}return l?{priorityMatch:u===-1,captureIndices:l,matchedRuleId:c}:null}function cre(t,e,n,r,s){return{ruleScanner:t.compileAG(e,n,r,s),findOptions:0}}function tUe(t,e,n,r,s){return{ruleScanner:t.compileWhileAG(e,n,r,s),findOptions:0}}function Eb(t,e,n,r,s,i,o){if(i.length===0)return;const a=e.content,l=Math.min(i.length,o.length),c=[],u=o[0].end;for(let d=0;d<l;d++){const h=i[d];if(h===null)continue;const f=o[d];if(f.length===0)continue;if(f.start>u)break;for(;c.length>0&&c[c.length-1].endPos<=f.start;)s.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop();if(c.length>0?s.produceFromScopes(c[c.length-1].scopes,f.start):s.produce(r,f.start),h.retokenizeCapturedWithRuleId){const y=h.getName(a,o),m=r.contentNameScopesList.pushAttributed(y,t),b=h.getContentName(a,o),v=m.pushAttributed(b,t),_=r.push(h.retokenizeCapturedWithRuleId,f.start,-1,!1,null,m,v),E=t.createOnigString(a.substring(0,f.end));lre(t,E,n&&f.start===0,f.start,_,s,!1,0),rre(E);continue}const g=h.getName(a,o);if(g!==null){const m=(c.length>0?c[c.length-1].scopes:r.contentNameScopesList).pushAttributed(g,t);c.push(new nUe(m,f.end))}}for(;c.length>0;)s.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop()}var nUe=class{scopes;endPos;constructor(t,e){this.scopes=t,this.endPos=e}};function rUe(t,e,n,r,s,i,o,a){return new iUe(t,e,n,r,s,i,o,a)}function D9(t,e,n,r,s){const i=QE(e,nS),o=ore.getCompiledRuleId(n,r,s.repository);for(const a of i)t.push({debugSelector:e,matcher:a.matcher,ruleId:o,grammar:s,priority:a.priority})}function nS(t,e){if(e.length<t.length)return!1;let n=0;return t.every(r=>{for(let s=n;s<e.length;s++)if(sUe(e[s],r))return n=s+1,!0;return!1})}function sUe(t,e){if(!t)return!1;if(t===e)return!0;const n=e.length;return t.length>n&&t.substr(0,n)===e&&t[n]==="."}var iUe=class{constructor(t,e,n,r,s,i,o,a){if(this._rootScopeName=t,this.balancedBracketSelectors=i,this._onigLib=a,this._basicScopeAttributesProvider=new Y9e(n,r),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=o,this._grammar=M9(e,null),this._injections=null,this._tokenTypeMatchers=[],s)for(const l of Object.keys(s)){const c=QE(l,nS);for(const u of c)this._tokenTypeMatchers.push({matcher:u.matcher,type:s[l]})}}_rootId;_lastRuleId;_ruleId2desc;_includedGrammars;_grammarRepository;_grammar;_injections;_basicScopeAttributesProvider;_tokenTypeMatchers;get themeProvider(){return this._grammarRepository}dispose(){for(const t of this._ruleId2desc)t&&t.dispose()}createOnigScanner(t){return this._onigLib.createOnigScanner(t)}createOnigString(t){return this._onigLib.createOnigString(t)}getMetadataForScope(t){return this._basicScopeAttributesProvider.getBasicScopeAttributes(t)}_collectInjections(){const t={lookup:s=>s===this._rootScopeName?this._grammar:this.getExternalGrammar(s),injections:s=>this._grammarRepository.injections(s)},e=[],n=this._rootScopeName,r=t.lookup(n);if(r){const s=r.injections;if(s)for(let o in s)D9(e,o,s[o],this,r);const i=this._grammarRepository.injections(n);i&&i.forEach(o=>{const a=this.getExternalGrammar(o);if(a){const l=a.injectionSelector;l&&D9(e,l,a,this,a)}})}return e.sort((s,i)=>s.priority-i.priority),e}getInjections(){return this._injections===null&&(this._injections=this._collectInjections()),this._injections}registerRule(t){const e=++this._lastRuleId,n=t(e);return this._ruleId2desc[e]=n,n}getRule(t){return this._ruleId2desc[t]}getExternalGrammar(t,e){if(this._includedGrammars[t])return this._includedGrammars[t];if(this._grammarRepository){const n=this._grammarRepository.lookup(t);if(n)return this._includedGrammars[t]=M9(n,e&&e.$base),this._includedGrammars[t]}}tokenizeLine(t,e,n=0){const r=this._tokenize(t,e,!1,n);return{tokens:r.lineTokens.getResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}tokenizeLine2(t,e,n=0){const r=this._tokenize(t,e,!0,n);return{tokens:r.lineTokens.getBinaryResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}_tokenize(t,e,n,r){this._rootId===-1&&(this._rootId=ore.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections());let s;if(!e||e===o4.NULL){s=!0;const c=this._basicScopeAttributesProvider.getDefaultAttributes(),u=this.themeProvider.getDefaults(),d=ug.set(0,c.languageId,c.tokenType,null,u.fontStyle,u.foregroundId,u.backgroundId),h=this.getRule(this._rootId).getName(null,null);let f;h?f=hy.createRootAndLookUpScopeName(h,d,this):f=hy.createRoot("unknown",d),e=new o4(null,this._rootId,-1,-1,!1,null,f,f)}else s=!1,e.reset();t=t+`
`;const i=this.createOnigString(t),o=i.content.length,a=new aUe(n,t,this._tokenTypeMatchers,this.balancedBracketSelectors),l=lre(this,i,s,0,e,a,!0,r);return rre(i),{lineLength:o,lineTokens:a,ruleStack:l.stack,stoppedEarly:l.stoppedEarly}}};function M9(t,e){return t=S9e(t),t.repository=t.repository||{},t.repository.$self={$vscodeTextmateLocation:t.$vscodeTextmateLocation,patterns:t.patterns,name:t.scopeName},t.repository.$base=e||t.repository.$self,t}var hy=class dl{constructor(e,n,r){this.parent=e,this.scopePath=n,this.tokenAttributes=r}static fromExtension(e,n){let r=e,s=e?.scopePath??null;for(const i of n)s=C5.push(s,i.scopeNames),r=new dl(r,s,i.encodedTokenAttributes);return r}static createRoot(e,n){return new dl(null,new C5(null,e),n)}static createRootAndLookUpScopeName(e,n,r){const s=r.getMetadataForScope(e),i=new C5(null,e),o=r.themeProvider.themeMatch(i),a=dl.mergeAttributes(n,s,o);return new dl(null,i,a)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(e){return dl.equals(this,e)}static equals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.scopeName!==n.scopeName||e.tokenAttributes!==n.tokenAttributes)return!1;e=e.parent,n=n.parent}while(!0)}static mergeAttributes(e,n,r){let s=-1,i=0,o=0;return r!==null&&(s=r.fontStyle,i=r.foregroundId,o=r.backgroundId),ug.set(e,n.languageId,n.tokenType,null,s,i,o)}pushAttributed(e,n){if(e===null)return this;if(e.indexOf(" ")===-1)return dl._pushAttributed(this,e,n);const r=e.split(/ /g);let s=this;for(const i of r)s=dl._pushAttributed(s,i,n);return s}static _pushAttributed(e,n,r){const s=r.getMetadataForScope(n),i=e.scopePath.push(n),o=r.themeProvider.themeMatch(i),a=dl.mergeAttributes(e.tokenAttributes,s,o);return new dl(e,i,a)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(e){const n=[];let r=this;for(;r&&r!==e;)n.push({encodedTokenAttributes:r.tokenAttributes,scopeNames:r.scopePath.getExtensionIfDefined(r.parent?.scopePath??null)}),r=r.parent;return r===e?n.reverse():void 0}},o4=class gh{constructor(e,n,r,s,i,o,a,l){this.parent=e,this.ruleId=n,this.beginRuleCapturedEOL=i,this.endRule=o,this.nameScopesList=a,this.contentNameScopesList=l,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=r,this._anchorPos=s}_stackElementBrand=void 0;static NULL=new gh(null,0,0,0,!1,null,null,null);_enterPos;_anchorPos;depth;equals(e){return e===null?!1:gh._equals(this,e)}static _equals(e,n){return e===n?!0:this._structuralEquals(e,n)?hy.equals(e.contentNameScopesList,n.contentNameScopesList):!1}static _structuralEquals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.depth!==n.depth||e.ruleId!==n.ruleId||e.endRule!==n.endRule)return!1;e=e.parent,n=n.parent}while(!0)}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){gh._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(e,n,r,s,i,o,a){return new gh(this,e,n,r,s,i,o,a)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){const e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,n){return this.parent&&(n=this.parent._writeString(e,n)),e[n++]=`(${this.ruleId}, ${this.nameScopesList?.toString()}, ${this.contentNameScopesList?.toString()})`,n}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(e){return this.endRule===e?this:new gh(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,e,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let n=this;for(;n&&n._enterPos===e._enterPos;){if(n.ruleId===e.ruleId)return!0;n=n.parent}return!1}toStateStackFrame(){return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:this.nameScopesList?.getExtensionIfDefined(this.parent?.nameScopesList??null)??[],contentNameScopesList:this.contentNameScopesList?.getExtensionIfDefined(this.nameScopesList)??[]}}static pushFrame(e,n){const r=hy.fromExtension(e?.nameScopesList??null,n.nameScopesList);return new gh(e,n.ruleId,n.enterPos??-1,n.anchorPos??-1,n.beginRuleCapturedEOL,n.endRule,r,hy.fromExtension(r,n.contentNameScopesList))}},oUe=class{balancedBracketScopes;unbalancedBracketScopes;allowAny=!1;constructor(t,e){this.balancedBracketScopes=t.flatMap(n=>n==="*"?(this.allowAny=!0,[]):QE(n,nS).map(r=>r.matcher)),this.unbalancedBracketScopes=e.flatMap(n=>QE(n,nS).map(r=>r.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(t){for(const e of this.unbalancedBracketScopes)if(e(t))return!1;for(const e of this.balancedBracketScopes)if(e(t))return!0;return this.allowAny}},aUe=class{constructor(t,e,n,r){this.balancedBracketSelectors=r,this._emitBinaryTokens=t,this._tokenTypeOverrides=n,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}_emitBinaryTokens;_lineText;_tokens;_binaryTokens;_lastTokenEndIndex;_tokenTypeOverrides;produce(t,e){this.produceFromScopes(t.contentNameScopesList,e)}produceFromScopes(t,e){if(this._lastTokenEndIndex>=e)return;if(this._emitBinaryTokens){let r=t?.tokenAttributes??0,s=!1;if(this.balancedBracketSelectors?.matchesAlways&&(s=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const i=t?.getScopeNames()??[];for(const o of this._tokenTypeOverrides)o.matcher(i)&&(r=ug.set(r,0,o.type,null,-1,0,0));this.balancedBracketSelectors&&(s=this.balancedBracketSelectors.match(i))}if(s&&(r=ug.set(r,0,8,s,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===r){this._lastTokenEndIndex=e;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(r),this._lastTokenEndIndex=e;return}const n=t?.getScopeNames()??[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:e,scopes:n}),this._lastTokenEndIndex=e}getResult(t,e){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===e-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(t,e){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===e-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._binaryTokens[this._binaryTokens.length-2]=0);const n=new Uint32Array(this._binaryTokens.length);for(let r=0,s=this._binaryTokens.length;r<s;r++)n[r]=this._binaryTokens[r];return n}},lUe=class{constructor(t,e){this._onigLib=e,this._theme=t}_grammars=new Map;_rawGrammars=new Map;_injectionGrammars=new Map;_theme;dispose(){for(const t of this._grammars.values())t.dispose()}setTheme(t){this._theme=t}getColorMap(){return this._theme.getColorMap()}addGrammar(t,e){this._rawGrammars.set(t.scopeName,t),e&&this._injectionGrammars.set(t.scopeName,e)}lookup(t){return this._rawGrammars.get(t)}injections(t){return this._injectionGrammars.get(t)}getDefaults(){return this._theme.getDefaults()}themeMatch(t){return this._theme.match(t)}grammarForScopeName(t,e,n,r,s){if(!this._grammars.has(t)){let i=this._rawGrammars.get(t);if(!i)return null;this._grammars.set(t,rUe(t,i,e,n,r,s,this,this._onigLib))}return this._grammars.get(t)}},cUe=class{_options;_syncRegistry;_ensureGrammarCache;constructor(e){this._options=e,this._syncRegistry=new lUe(ZE.createFromRawTheme(e.theme,e.colorMap),e.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(e,n){this._syncRegistry.setTheme(ZE.createFromRawTheme(e,n))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(e,n,r){return this.loadGrammarWithConfiguration(e,n,{embeddedLanguages:r})}loadGrammarWithConfiguration(e,n,r){return this._loadGrammar(e,n,r.embeddedLanguages,r.tokenTypes,new oUe(r.balancedBracketSelectors||[],r.unbalancedBracketSelectors||[]))}loadGrammar(e){return this._loadGrammar(e,0,null,null,null)}_loadGrammar(e,n,r,s,i){const o=new F9e(this._syncRegistry,e);for(;o.Q.length>0;)o.Q.map(a=>this._loadSingleGrammar(a.scopeName)),o.processQueue();return this._grammarForScopeName(e,n,r,s,i)}_loadSingleGrammar(e){this._ensureGrammarCache.has(e)||(this._doLoadSingleGrammar(e),this._ensureGrammarCache.set(e,!0))}_doLoadSingleGrammar(e){const n=this._options.loadGrammar(e);if(n){const r=typeof this._options.getInjections=="function"?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(n,r)}}addGrammar(e,n=[],r=0,s=null){return this._syncRegistry.addGrammar(e,n),this._grammarForScopeName(e.scopeName,r,s)}_grammarForScopeName(e,n=0,r=null,s=null,i=null){return this._syncRegistry.grammarForScopeName(e,n,r,s,i)}},a4=o4.NULL;const uUe=/["&'<>`]/g,dUe=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,hUe=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,fUe=/[|\\{}()[\]^$+*?.]/g,j9=new WeakMap;function pUe(t,e){if(t=t.replace(e.subset?mUe(e.subset):uUe,r),e.subset||e.escapeOnly)return t;return t.replace(dUe,n).replace(hUe,r);function n(s,i,o){return e.format((s.charCodeAt(0)-55296)*1024+s.charCodeAt(1)-56320+65536,o.charCodeAt(i+2),e)}function r(s,i,o){return e.format(s.charCodeAt(0),o.charCodeAt(i+1),e)}}function mUe(t){let e=j9.get(t);return e||(e=gUe(t),j9.set(t,e)),e}function gUe(t){const e=[];let n=-1;for(;++n<t.length;)e.push(t[n].replace(fUe,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}const bUe=/[\dA-Fa-f]/;function yUe(t,e,n){const r="&#x"+t.toString(16).toUpperCase();return n&&e&&!bUe.test(String.fromCharCode(e))?r:r+";"}const vUe=/\d/;function _Ue(t,e,n){const r="&#"+String(t);return n&&e&&!vUe.test(String.fromCharCode(e))?r:r+";"}const xUe=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],T5={nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",fnof:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",bull:"",hellip:"",prime:"",Prime:"",oline:"",frasl:"",weierp:"",image:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",quot:'"',amp:"&",lt:"<",gt:">",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",permil:"",lsaquo:"",rsaquo:"",euro:""},wUe=["cent","copy","divide","gt","lt","not","para","times"],ure={}.hasOwnProperty,l4={};let Hx;for(Hx in T5)ure.call(T5,Hx)&&(l4[T5[Hx]]=Hx);const EUe=/[^\dA-Za-z]/;function SUe(t,e,n,r){const s=String.fromCharCode(t);if(ure.call(l4,s)){const i=l4[s],o="&"+i;return n&&xUe.includes(i)&&!wUe.includes(i)&&(!r||e&&e!==61&&EUe.test(String.fromCharCode(e)))?o:o+";"}return""}function kUe(t,e,n){let r=yUe(t,e,n.omitOptionalSemicolons),s;if((n.useNamedReferences||n.useShortestReferences)&&(s=SUe(t,e,n.omitOptionalSemicolons,n.attribute)),(n.useShortestReferences||!s)&&n.useShortestReferences){const i=_Ue(t,e,n.omitOptionalSemicolons);i.length<r.length&&(r=i)}return s&&(!n.useShortestReferences||s.length<r.length)?s:r}function Nm(t,e){return pUe(t,Object.assign({format:kUe},e))}const CUe=/^>|^->|<!--|-->|--!>|<!-$/g,AUe=[">"],TUe=["<",">"];function NUe(t,e,n,r){return r.settings.bogusComments?"<?"+Nm(t.value,Object.assign({},r.settings.characterReferences,{subset:AUe}))+">":"<!--"+t.value.replace(CUe,s)+"-->";function s(i){return Nm(i,Object.assign({},r.settings.characterReferences,{subset:TUe}))}}function PUe(t,e,n,r){return"<!"+(r.settings.upperDoctype?"DOCTYPE":"doctype")+(r.settings.tightDoctype?"":" ")+"html>"}const Xr=hre(1),dre=hre(-1),IUe=[];function hre(t){return e;function e(n,r,s){const i=n?n.children:IUe;let o=(r||0)+t,a=i[o];if(!s)for(;a&&aC(a);)o+=t,a=i[o];return a}}const RUe={}.hasOwnProperty;function fre(t){return e;function e(n,r,s){return RUe.call(t,n.tagName)&&t[n.tagName](n,r,s)}}const l6=fre({body:OUe,caption:N5,colgroup:N5,dd:FUe,dt:jUe,head:N5,html:LUe,li:MUe,optgroup:BUe,option:UUe,p:DUe,rp:F9,rt:F9,tbody:HUe,td:B9,tfoot:zUe,th:B9,thead:$Ue,tr:VUe});function N5(t,e,n){const r=Xr(n,e,!0);return!r||r.type!=="comment"&&!(r.type==="text"&&aC(r.value.charAt(0)))}function LUe(t,e,n){const r=Xr(n,e);return!r||r.type!=="comment"}function OUe(t,e,n){const r=Xr(n,e);return!r||r.type!=="comment"}function DUe(t,e,n){const r=Xr(n,e);return r?r.type==="element"&&(r.tagName==="address"||r.tagName==="article"||r.tagName==="aside"||r.tagName==="blockquote"||r.tagName==="details"||r.tagName==="div"||r.tagName==="dl"||r.tagName==="fieldset"||r.tagName==="figcaption"||r.tagName==="figure"||r.tagName==="footer"||r.tagName==="form"||r.tagName==="h1"||r.tagName==="h2"||r.tagName==="h3"||r.tagName==="h4"||r.tagName==="h5"||r.tagName==="h6"||r.tagName==="header"||r.tagName==="hgroup"||r.tagName==="hr"||r.tagName==="main"||r.tagName==="menu"||r.tagName==="nav"||r.tagName==="ol"||r.tagName==="p"||r.tagName==="pre"||r.tagName==="section"||r.tagName==="table"||r.tagName==="ul"):!n||!(n.type==="element"&&(n.tagName==="a"||n.tagName==="audio"||n.tagName==="del"||n.tagName==="ins"||n.tagName==="map"||n.tagName==="noscript"||n.tagName==="video"))}function MUe(t,e,n){const r=Xr(n,e);return!r||r.type==="element"&&r.tagName==="li"}function jUe(t,e,n){const r=Xr(n,e);return!!(r&&r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd"))}function FUe(t,e,n){const r=Xr(n,e);return!r||r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd")}function F9(t,e,n){const r=Xr(n,e);return!r||r.type==="element"&&(r.tagName==="rp"||r.tagName==="rt")}function BUe(t,e,n){const r=Xr(n,e);return!r||r.type==="element"&&r.tagName==="optgroup"}function UUe(t,e,n){const r=Xr(n,e);return!r||r.type==="element"&&(r.tagName==="option"||r.tagName==="optgroup")}function $Ue(t,e,n){const r=Xr(n,e);return!!(r&&r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot"))}function HUe(t,e,n){const r=Xr(n,e);return!r||r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot")}function zUe(t,e,n){return!Xr(n,e)}function VUe(t,e,n){const r=Xr(n,e);return!r||r.type==="element"&&r.tagName==="tr"}function B9(t,e,n){const r=Xr(n,e);return!r||r.type==="element"&&(r.tagName==="td"||r.tagName==="th")}const WUe=fre({body:KUe,colgroup:YUe,head:qUe,html:GUe,tbody:XUe});function GUe(t){const e=Xr(t,-1);return!e||e.type!=="comment"}function qUe(t){const e=new Set;for(const r of t.children)if(r.type==="element"&&(r.tagName==="base"||r.tagName==="title")){if(e.has(r.tagName))return!1;e.add(r.tagName)}const n=t.children[0];return!n||n.type==="element"}function KUe(t){const e=Xr(t,-1,!0);return!e||e.type!=="comment"&&!(e.type==="text"&&aC(e.value.charAt(0)))&&!(e.type==="element"&&(e.tagName==="meta"||e.tagName==="link"||e.tagName==="script"||e.tagName==="style"||e.tagName==="template"))}function YUe(t,e,n){const r=dre(n,e),s=Xr(t,-1,!0);return n&&r&&r.type==="element"&&r.tagName==="colgroup"&&l6(r,n.children.indexOf(r),n)?!1:!!(s&&s.type==="element"&&s.tagName==="col")}function XUe(t,e,n){const r=dre(n,e),s=Xr(t,-1);return n&&r&&r.type==="element"&&(r.tagName==="thead"||r.tagName==="tbody")&&l6(r,n.children.indexOf(r),n)?!1:!!(s&&s.type==="element"&&s.tagName==="tr")}const zx={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function JUe(t,e,n,r){const s=r.schema,i=s.space==="svg"?!1:r.settings.omitOptionalTags;let o=s.space==="svg"?r.settings.closeEmptyElements:r.settings.voids.includes(t.tagName.toLowerCase());const a=[];let l;s.space==="html"&&t.tagName==="svg"&&(r.schema=Ql);const c=ZUe(r,t.properties),u=r.all(s.space==="html"&&t.tagName==="template"?t.content:t);return r.schema=s,u&&(o=!1),(c||!i||!WUe(t,e,n))&&(a.push("<",t.tagName,c?" "+c:""),o&&(s.space==="svg"||r.settings.closeSelfClosing)&&(l=c.charAt(c.length-1),(!r.settings.tightSelfClosing||l==="/"||l&&l!=='"'&&l!=="'")&&a.push(" "),a.push("/")),a.push(">")),a.push(u),!o&&(!i||!l6(t,e,n))&&a.push("</"+t.tagName+">"),a.join("")}function ZUe(t,e){const n=[];let r=-1,s;if(e){for(s in e)if(e[s]!==null&&e[s]!==void 0){const i=QUe(t,s,e[s]);i&&n.push(i)}}for(;++r<n.length;){const i=t.settings.tightAttributes?n[r].charAt(n[r].length-1):void 0;r!==n.length-1&&i!=='"'&&i!=="'"&&(n[r]+=" ")}return n.join("")}function QUe(t,e,n){const r=Rv(t.schema,e),s=t.settings.allowParseErrors&&t.schema.space==="html"?0:1,i=t.settings.allowDangerousCharacters?0:1;let o=t.quote,a;if(r.overloadedBoolean&&(n===r.attribute||n==="")?n=!0:(r.boolean||r.overloadedBoolean)&&(typeof n!="string"||n===r.attribute||n==="")&&(n=!!n),n==null||n===!1||typeof n=="number"&&Number.isNaN(n))return"";const l=Nm(r.attribute,Object.assign({},t.settings.characterReferences,{subset:zx.name[s][i]}));return n===!0||(n=Array.isArray(n)?(r.commaSeparated?TO:NO)(n,{padLeft:!t.settings.tightCommaSeparatedLists}):String(n),t.settings.collapseEmptyAttributes&&!n)?l:(t.settings.preferUnquoted&&(a=Nm(n,Object.assign({},t.settings.characterReferences,{attribute:!0,subset:zx.unquoted[s][i]}))),a!==n&&(t.settings.quoteSmart&&WE(n,o)>WE(n,t.alternative)&&(o=t.alternative),a=o+Nm(n,Object.assign({},t.settings.characterReferences,{subset:(o==="'"?zx.single:zx.double)[s][i],attribute:!0}))+o),l+(a&&"="+a))}const e$e=["<","&"];function pre(t,e,n,r){return n&&n.type==="element"&&(n.tagName==="script"||n.tagName==="style")?t.value:Nm(t.value,Object.assign({},r.settings.characterReferences,{subset:e$e}))}function t$e(t,e,n,r){return r.settings.allowDangerousHtml?t.value:pre(t,e,n,r)}function n$e(t,e,n,r){return r.all(t)}const r$e=IO("type",{invalid:s$e,unknown:i$e,handlers:{comment:NUe,doctype:PUe,element:JUe,raw:t$e,root:n$e,text:pre}});function s$e(t){throw new Error("Expected node, not `"+t+"`")}function i$e(t){const e=t;throw new Error("Cannot compile unknown node `"+e.type+"`")}const o$e={},a$e={},l$e=[];function c$e(t,e){const n=o$e,r=n.quote||'"',s=r==='"'?"'":'"';if(r!=='"'&&r!=="'")throw new Error("Invalid quote `"+r+"`, expected `'` or `\"`");return{one:u$e,all:d$e,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||kee,characterReferences:n.characterReferences||a$e,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:n.space==="svg"?Ql:Bg,quote:r,alternative:s}.one(Array.isArray(t)?{type:"root",children:t}:t,void 0,void 0)}function u$e(t,e,n){return r$e(t,e,n,this)}function d$e(t){const e=[],n=t&&t.children||l$e;let r=-1;for(;++r<n.length;)e[r]=this.one(n[r],r,t);return e.join("")}function h$e(t){return Array.isArray(t)?t:[t]}function cC(t,e=!1){const n=t.split(/(\r?\n)/g);let r=0;const s=[];for(let i=0;i<n.length;i+=2){const o=e?n[i]+(n[i+1]||""):n[i];s.push([o,r]),r+=n[i].length,r+=n[i+1]?.length||0}return s}function c6(t){return!t||["plaintext","txt","text","plain"].includes(t)}function u6(t){return t==="ansi"||c6(t)}function d6(t){return t==="none"}function mre(t){return d6(t)}function gre(t,e){if(!e)return t;t.properties||={},t.properties.class||=[],typeof t.properties.class=="string"&&(t.properties.class=t.properties.class.split(/\s+/g)),Array.isArray(t.properties.class)||(t.properties.class=[]);const n=Array.isArray(e)?e:e.split(/\s+/g);for(const r of n)r&&!t.properties.class.includes(r)&&t.properties.class.push(r);return t}function f$e(t,e){let n=0;const r=[];for(const s of e)s>n&&r.push({...t,content:t.content.slice(n,s),offset:t.offset+n}),n=s;return n<t.content.length&&r.push({...t,content:t.content.slice(n),offset:t.offset+n}),r}function p$e(t,e){const n=Array.from(e instanceof Set?e:new Set(e)).sort((r,s)=>r-s);return n.length?t.map(r=>r.flatMap(s=>{const i=n.filter(o=>s.offset<o&&o<s.offset+s.content.length).map(o=>o-s.offset).sort((o,a)=>o-a);return i.length?f$e(s,i):s})):t}async function bre(t){return Promise.resolve(typeof t=="function"?t():t).then(e=>e.default||e)}function rS(t,e){const n=typeof t=="string"?{}:{...t.colorReplacements},r=typeof t=="string"?t:t.name;for(const[s,i]of Object.entries(e?.colorReplacements||{}))typeof i=="string"?n[s]=i:s===r&&Object.assign(n,i);return n}function Ih(t,e){return t&&(e?.[t?.toLowerCase()]||t)}function yre(t){const e={};return t.color&&(e.color=t.color),t.bgColor&&(e["background-color"]=t.bgColor),t.fontStyle&&(t.fontStyle&$c.Italic&&(e["font-style"]="italic"),t.fontStyle&$c.Bold&&(e["font-weight"]="bold"),t.fontStyle&$c.Underline&&(e["text-decoration"]="underline")),e}function m$e(t){return typeof t=="string"?t:Object.entries(t).map(([e,n])=>`${e}:${n}`).join(";")}function g$e(t){const e=cC(t,!0).map(([s])=>s);function n(s){if(s===t.length)return{line:e.length-1,character:e[e.length-1].length};let i=s,o=0;for(const a of e){if(i<a.length)break;i-=a.length,o++}return{line:o,character:i}}function r(s,i){let o=0;for(let a=0;a<s;a++)o+=e[a].length;return o+=i,o}return{lines:e,indexToPos:n,posToIndex:r}}class ni extends Error{constructor(e){super(e),this.name="ShikiError"}}const vre=new WeakMap;function uC(t,e){vre.set(t,e)}function v1(t){return vre.get(t)}class Wg{_stacks={};lang;get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(e,n){return new Wg(Object.fromEntries(h$e(n).map(r=>[r,a4])),e)}constructor(...e){if(e.length===2){const[n,r]=e;this.lang=r,this._stacks=n}else{const[n,r,s]=e;this.lang=r,this._stacks={[s]:n}}}getInternalStack(e=this.theme){return this._stacks[e]}get scopes(){return U9(this._stacks[this.theme])}getScopes(e=this.theme){return U9(this._stacks[e])}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.scopes}}}function U9(t){const e=[],n=new Set;function r(s){if(n.has(s))return;n.add(s);const i=s?.nameScopesList?.scopeName;i&&e.push(i),s.parent&&r(s.parent)}return r(t),e}function b$e(t,e){if(!(t instanceof Wg))throw new ni("Invalid grammar state");return t.getInternalStack(e)}function y$e(){const t=new WeakMap;function e(n){if(!t.has(n.meta)){let r=function(o){if(typeof o=="number"){if(o<0||o>n.source.length)throw new ni(`Invalid decoration offset: ${o}. Code length: ${n.source.length}`);return{...s.indexToPos(o),offset:o}}else{const a=s.lines[o.line];if(a===void 0)throw new ni(`Invalid decoration position ${JSON.stringify(o)}. Lines length: ${s.lines.length}`);if(o.character<0||o.character>a.length)throw new ni(`Invalid decoration position ${JSON.stringify(o)}. Line ${o.line} length: ${a.length}`);return{...o,offset:s.posToIndex(o.line,o.character)}}};const s=g$e(n.source),i=(n.options.decorations||[]).map(o=>({...o,start:r(o.start),end:r(o.end)}));v$e(i),t.set(n.meta,{decorations:i,converter:s,source:n.source})}return t.get(n.meta)}return{name:"shiki:decorations",tokens(n){if(!this.options.decorations?.length)return;const s=e(this).decorations.flatMap(o=>[o.start.offset,o.end.offset]);return p$e(n,s)},code(n){if(!this.options.decorations?.length)return;const r=e(this),s=Array.from(n.children).filter(u=>u.type==="element"&&u.tagName==="span");if(s.length!==r.converter.lines.length)throw new ni(`Number of lines in code element (${s.length}) does not match the number of lines in the source (${r.converter.lines.length}). Failed to apply decorations.`);function i(u,d,h,f){const g=s[u];let y="",m=-1,b=-1;if(d===0&&(m=0),h===0&&(b=0),h===Number.POSITIVE_INFINITY&&(b=g.children.length),m===-1||b===-1)for(let _=0;_<g.children.length;_++)y+=_re(g.children[_]),m===-1&&y.length===d&&(m=_+1),b===-1&&y.length===h&&(b=_+1);if(m===-1)throw new ni(`Failed to find start index for decoration ${JSON.stringify(f.start)}`);if(b===-1)throw new ni(`Failed to find end index for decoration ${JSON.stringify(f.end)}`);const v=g.children.slice(m,b);if(!f.alwaysWrap&&v.length===g.children.length)a(g,f,"line");else if(!f.alwaysWrap&&v.length===1&&v[0].type==="element")a(v[0],f,"token");else{const _={type:"element",tagName:"span",properties:{},children:v};a(_,f,"wrapper"),g.children.splice(m,v.length,_)}}function o(u,d){s[u]=a(s[u],d,"line")}function a(u,d,h){const f=d.properties||{},g=d.transform||(y=>y);return u.tagName=d.tagName||"span",u.properties={...u.properties,...f,class:u.properties.class},d.properties?.class&&gre(u,d.properties.class),u=g(u,h)||u,u}const l=[],c=r.decorations.sort((u,d)=>d.start.offset-u.start.offset);for(const u of c){const{start:d,end:h}=u;if(d.line===h.line)i(d.line,d.character,h.character,u);else if(d.line<h.line){i(d.line,d.character,Number.POSITIVE_INFINITY,u);for(let f=d.line+1;f<h.line;f++)l.unshift(()=>o(f,u));i(h.line,0,h.character,u)}}l.forEach(u=>u())}}}function v$e(t){for(let e=0;e<t.length;e++){const n=t[e];if(n.start.offset>n.end.offset)throw new ni(`Invalid decoration range: ${JSON.stringify(n.start)} - ${JSON.stringify(n.end)}`);for(let r=e+1;r<t.length;r++){const s=t[r],i=n.start.offset<s.start.offset&&s.start.offset<n.end.offset,o=n.start.offset<s.end.offset&&s.end.offset<n.end.offset,a=s.start.offset<n.start.offset&&n.start.offset<s.end.offset,l=s.start.offset<n.end.offset&&n.end.offset<s.end.offset;if(i||o||a||l){if(o&&o||a&&l)continue;throw new ni(`Decorations ${JSON.stringify(n.start)} and ${JSON.stringify(s.start)} intersect.`)}}}}function _re(t){return t.type==="text"?t.value:t.type==="element"?t.children.map(_re).join(""):""}const _$e=[y$e()];function sS(t){return[...t.transformers||[],..._$e]}var Rh=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],P5={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",9:"strikethrough"};function x$e(t,e){const n=t.indexOf("\x1B[",e);if(n!==-1){const r=t.indexOf("m",n);return{sequence:t.substring(n+2,r).split(";"),startPosition:n,position:r+1}}return{position:t.length}}function $9(t,e){let n=1;const r=t[e+n++];let s;if(r==="2"){const i=[t[e+n++],t[e+n++],t[e+n]].map(o=>Number.parseInt(o));i.length===3&&!i.some(o=>Number.isNaN(o))&&(s={type:"rgb",rgb:i})}else if(r==="5"){const i=Number.parseInt(t[e+n]);Number.isNaN(i)||(s={type:"table",index:Number(i)})}return[n,s]}function w$e(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n],s=Number.parseInt(r);if(!Number.isNaN(s))if(s===0)e.push({type:"resetAll"});else if(s<=9)P5[s]&&e.push({type:"setDecoration",value:P5[s]});else if(s<=29){const i=P5[s-20];i&&e.push({type:"resetDecoration",value:i})}else if(s<=37)e.push({type:"setForegroundColor",value:{type:"named",name:Rh[s-30]}});else if(s===38){const[i,o]=$9(t,n);o&&e.push({type:"setForegroundColor",value:o}),n+=i}else if(s===39)e.push({type:"resetForegroundColor"});else if(s<=47)e.push({type:"setBackgroundColor",value:{type:"named",name:Rh[s-40]}});else if(s===48){const[i,o]=$9(t,n);o&&e.push({type:"setBackgroundColor",value:o}),n+=i}else s===49?e.push({type:"resetBackgroundColor"}):s>=90&&s<=97?e.push({type:"setForegroundColor",value:{type:"named",name:Rh[s-90+8]}}):s>=100&&s<=107&&e.push({type:"setBackgroundColor",value:{type:"named",name:Rh[s-100+8]}})}return e}function E$e(){let t=null,e=null,n=new Set;return{parse(r){const s=[];let i=0;do{const o=x$e(r,i),a=o.sequence?r.substring(i,o.startPosition):r.substring(i);if(a.length>0&&s.push({value:a,foreground:t,background:e,decorations:new Set(n)}),o.sequence){const l=w$e(o.sequence);for(const c of l)c.type==="resetAll"?(t=null,e=null,n.clear()):c.type==="resetForegroundColor"?t=null:c.type==="resetBackgroundColor"?e=null:c.type==="resetDecoration"&&n.delete(c.value);for(const c of l)c.type==="setForegroundColor"?t=c.value:c.type==="setBackgroundColor"?e=c.value:c.type==="setDecoration"&&n.add(c.value)}i=o.position}while(i<r.length);return s}}}var S$e={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function k$e(t=S$e){function e(a){return t[a]}function n(a){return`#${a.map(l=>Math.max(0,Math.min(l,255)).toString(16).padStart(2,"0")).join("")}`}let r;function s(){if(r)return r;r=[];for(let c=0;c<Rh.length;c++)r.push(e(Rh[c]));let a=[0,95,135,175,215,255];for(let c=0;c<6;c++)for(let u=0;u<6;u++)for(let d=0;d<6;d++)r.push(n([a[c],a[u],a[d]]));let l=8;for(let c=0;c<24;c++,l+=10)r.push(n([l,l,l]));return r}function i(a){return s()[a]}function o(a){switch(a.type){case"named":return e(a.name);case"rgb":return n(a.rgb);case"table":return i(a.index)}}return{value:o}}function C$e(t,e,n){const r=rS(t,n),s=cC(e),i=k$e(Object.fromEntries(Rh.map(a=>[a,t.colors?.[`terminal.ansi${a[0].toUpperCase()}${a.substring(1)}`]]))),o=E$e();return s.map(a=>o.parse(a[0]).map(l=>{let c,u;l.decorations.has("reverse")?(c=l.background?i.value(l.background):t.bg,u=l.foreground?i.value(l.foreground):t.fg):(c=l.foreground?i.value(l.foreground):t.fg,u=l.background?i.value(l.background):void 0),c=Ih(c,r),u=Ih(u,r),l.decorations.has("dim")&&(c=A$e(c));let d=$c.None;return l.decorations.has("bold")&&(d|=$c.Bold),l.decorations.has("italic")&&(d|=$c.Italic),l.decorations.has("underline")&&(d|=$c.Underline),{content:l.value,offset:a[1],color:c,bgColor:u,fontStyle:d}}))}function A$e(t){const e=t.match(/#([0-9a-f]{3})([0-9a-f]{3})?([0-9a-f]{2})?/);if(e)if(e[3]){const r=Math.round(Number.parseInt(e[3],16)/2).toString(16).padStart(2,"0");return`#${e[1]}${e[2]}${r}`}else return e[2]?`#${e[1]}${e[2]}80`:`#${Array.from(e[1]).map(r=>`${r}${r}`).join("")}80`;const n=t.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return n?`var(${n[1]}-dim)`:t}function h6(t,e,n={}){const{lang:r="text",theme:s=t.getLoadedThemes()[0]}=n;if(c6(r)||d6(s))return cC(e).map(l=>[{content:l[0],offset:l[1]}]);const{theme:i,colorMap:o}=t.setTheme(s);if(r==="ansi")return C$e(i,e,n);const a=t.getLanguage(r);if(n.grammarState){if(n.grammarState.lang!==a.name)throw new Wc(`Grammar state language "${n.grammarState.lang}" does not match highlight language "${a.name}"`);if(!n.grammarState.themes.includes(i.name))throw new Wc(`Grammar state themes "${n.grammarState.themes}" do not contain highlight theme "${i.name}"`)}return N$e(e,a,i,o,n)}function T$e(...t){if(t.length===2)return v1(t[1]);const[e,n,r={}]=t,{lang:s="text",theme:i=e.getLoadedThemes()[0]}=r;if(c6(s)||d6(i))throw new Wc("Plain language does not have grammar state");if(s==="ansi")throw new Wc("ANSI language does not have grammar state");const{theme:o,colorMap:a}=e.setTheme(i),l=e.getLanguage(s);return new Wg(iS(n,l,o,a,r).stateStack,l.name,o.name)}function N$e(t,e,n,r,s){const i=iS(t,e,n,r,s),o=new Wg(iS(t,e,n,r,s).stateStack,e.name,n.name);return uC(i.tokens,o),i.tokens}function iS(t,e,n,r,s){const i=rS(n,s),{tokenizeMaxLineLength:o=0,tokenizeTimeLimit:a=500}=s,l=cC(t);let c=s.grammarState?b$e(s.grammarState,n.name)??a4:s.grammarContextCode!=null?iS(s.grammarContextCode,e,n,r,{...s,grammarState:void 0,grammarContextCode:void 0}).stateStack:a4,u=[];const d=[];for(let h=0,f=l.length;h<f;h++){const[g,y]=l[h];if(g===""){u=[],d.push([]);continue}if(o>0&&g.length>=o){u=[],d.push([{content:g,offset:y,color:"",fontStyle:0}]);continue}let m,b,v;s.includeExplanation&&(m=e.tokenizeLine(g,c),b=m.tokens,v=0);const _=e.tokenizeLine2(g,c,a),E=_.tokens.length/2;for(let w=0;w<E;w++){const S=_.tokens[2*w],k=w+1<E?_.tokens[2*w+2]:g.length;if(S===k)continue;const x=_.tokens[2*w+1],I=Ih(r[ug.getForeground(x)],i),R=ug.getFontStyle(x),C={content:g.substring(S,k),offset:y+S,color:I,fontStyle:R};if(s.includeExplanation){const N=[];if(s.includeExplanation!=="scopeName")for(const P of n.settings){let $;switch(typeof P.scope){case"string":$=P.scope.split(/,/).map(ee=>ee.trim());break;case"object":$=P.scope;break;default:continue}N.push({settings:P,selectors:$.map(ee=>ee.split(/ /))})}C.explanation=[];let O=0;for(;S+O<k;){const P=b[v],$=g.substring(P.startIndex,P.endIndex);O+=$.length,C.explanation.push({content:$,scopes:s.includeExplanation==="scopeName"?P$e(P.scopes):I$e(N,P.scopes)}),v+=1}}u.push(C)}d.push(u),u=[],c=_.ruleStack}return{tokens:d,stateStack:c}}function P$e(t){return t.map(e=>({scopeName:e}))}function I$e(t,e){const n=[];for(let r=0,s=e.length;r<s;r++){const i=e[r];n[r]={scopeName:i,themeMatches:L$e(t,i,e.slice(0,r))}}return n}function H9(t,e){return t===e||e.substring(0,t.length)===t&&e[t.length]==="."}function R$e(t,e,n){if(!H9(t[t.length-1],e))return!1;let r=t.length-2,s=n.length-1;for(;r>=0&&s>=0;)H9(t[r],n[s])&&(r-=1),s-=1;return r===-1}function L$e(t,e,n){const r=[];for(const{selectors:s,settings:i}of t)for(const o of s)if(R$e(o,e,n)){r.push(i);break}return r}function xre(t,e,n){const r=Object.entries(n.themes).filter(l=>l[1]).map(l=>({color:l[0],theme:l[1]})),s=r.map(l=>{const c=h6(t,e,{...n,theme:l.theme}),u=v1(c),d=typeof l.theme=="string"?l.theme:l.theme.name;return{tokens:c,state:u,theme:d}}),i=O$e(...s.map(l=>l.tokens)),o=i[0].map((l,c)=>l.map((u,d)=>{const h={content:u.content,variants:{},offset:u.offset};return"includeExplanation"in n&&n.includeExplanation&&(h.explanation=u.explanation),i.forEach((f,g)=>{const{content:y,explanation:m,offset:b,...v}=f[c][d];h.variants[r[g].color]=v}),h})),a=s[0].state?new Wg(Object.fromEntries(s.map(l=>[l.theme,l.state?.getInternalStack(l.theme)])),s[0].state.lang):void 0;return a&&uC(o,a),o}function O$e(...t){const e=t.map(()=>[]),n=t.length;for(let r=0;r<t[0].length;r++){const s=t.map(l=>l[r]),i=e.map(()=>[]);e.forEach((l,c)=>l.push(i[c]));const o=s.map(()=>0),a=s.map(l=>l[0]);for(;a.every(l=>l);){const l=Math.min(...a.map(c=>c.content.length));for(let c=0;c<n;c++){const u=a[c];u.content.length===l?(i[c].push(u),o[c]+=1,a[c]=s[c][o[c]]):(i[c].push({...u,content:u.content.slice(0,l)}),a[c]={...u,content:u.content.slice(l),offset:u.offset+l})}}}return e}function oS(t,e,n){let r,s,i,o,a,l;if("themes"in n){const{defaultColor:c="light",cssVariablePrefix:u="--shiki-"}=n,d=Object.entries(n.themes).filter(m=>m[1]).map(m=>({color:m[0],theme:m[1]})).sort((m,b)=>m.color===c?-1:b.color===c?1:0);if(d.length===0)throw new Wc("`themes` option must not be empty");const h=xre(t,e,n);if(l=v1(h),c&&!d.find(m=>m.color===c))throw new Wc(`\`themes\` option must contain the defaultColor key \`${c}\``);const f=d.map(m=>t.getTheme(m.theme)),g=d.map(m=>m.color);i=h.map(m=>m.map(b=>D$e(b,g,u,c))),l&&uC(i,l);const y=d.map(m=>rS(m.theme,n));s=d.map((m,b)=>(b===0&&c?"":`${u+m.color}:`)+(Ih(f[b].fg,y[b])||"inherit")).join(";"),r=d.map((m,b)=>(b===0&&c?"":`${u+m.color}-bg:`)+(Ih(f[b].bg,y[b])||"inherit")).join(";"),o=`shiki-themes ${f.map(m=>m.name).join(" ")}`,a=c?void 0:[s,r].join(";")}else if("theme"in n){const c=rS(n.theme,n);i=h6(t,e,n);const u=t.getTheme(n.theme);r=Ih(u.bg,c),s=Ih(u.fg,c),o=u.name,l=v1(i)}else throw new Wc("Invalid options, either `theme` or `themes` must be provided");return{tokens:i,fg:s,bg:r,themeName:o,rootStyle:a,grammarState:l}}function D$e(t,e,n,r){const s={content:t.content,explanation:t.explanation,offset:t.offset},i=e.map(l=>yre(t.variants[l])),o=new Set(i.flatMap(l=>Object.keys(l))),a={};return i.forEach((l,c)=>{for(const u of o){const d=l[u]||"inherit";if(c===0&&r)a[u]=d;else{const h=u==="color"?"":u==="background-color"?"-bg":`-${u}`,f=n+e[c]+(u==="color"?"":h);a[f]=d}}}),s.htmlStyle=a,s}function aS(t,e,n,r={meta:{},options:n,codeToHast:(s,i)=>aS(t,s,i),codeToTokens:(s,i)=>oS(t,s,i)}){let s=e;for(const f of sS(n))s=f.preprocess?.call(r,s,n)||s;let{tokens:i,fg:o,bg:a,themeName:l,rootStyle:c,grammarState:u}=oS(t,s,n);const{mergeWhitespaces:d=!0}=n;d===!0?i=j$e(i):d==="never"&&(i=F$e(i));const h={...r,get source(){return s}};for(const f of sS(n))i=f.tokens?.call(h,i)||i;return M$e(i,{...n,fg:o,bg:a,themeName:l,rootStyle:c},h,u)}function M$e(t,e,n,r=v1(t)){const s=sS(e),i=[],o={type:"root",children:[]},{structure:a="classic",tabindex:l="0"}=e;let c={type:"element",tagName:"pre",properties:{class:`shiki ${e.themeName||""}`,style:e.rootStyle||`background-color:${e.bg};color:${e.fg}`,...l!==!1&&l!=null?{tabindex:l.toString()}:{},...Object.fromEntries(Array.from(Object.entries(e.meta||{})).filter(([g])=>!g.startsWith("_")))},children:[]},u={type:"element",tagName:"code",properties:{},children:i};const d=[],h={...n,structure:a,addClassToHast:gre,get source(){return n.source},get tokens(){return t},get options(){return e},get root(){return o},get pre(){return c},get code(){return u},get lines(){return d}};if(t.forEach((g,y)=>{y&&(a==="inline"?o.children.push({type:"element",tagName:"br",properties:{},children:[]}):a==="classic"&&i.push({type:"text",value:`
`}));let m={type:"element",tagName:"span",properties:{class:"line"},children:[]},b=0;for(const v of g){let _={type:"element",tagName:"span",properties:{...v.htmlAttrs},children:[{type:"text",value:v.content}]};v.htmlStyle;const E=m$e(v.htmlStyle||yre(v));E&&(_.properties.style=E);for(const w of s)_=w?.span?.call(h,_,y+1,b,m,v)||_;a==="inline"?o.children.push(_):a==="classic"&&m.children.push(_),b+=v.content.length}if(a==="classic"){for(const v of s)m=v?.line?.call(h,m,y+1)||m;d.push(m),i.push(m)}}),a==="classic"){for(const g of s)u=g?.code?.call(h,u)||u;c.children.push(u);for(const g of s)c=g?.pre?.call(h,c)||c;o.children.push(c)}let f=o;for(const g of s)f=g?.root?.call(h,f)||f;return r&&uC(f,r),f}function j$e(t){return t.map(e=>{const n=[];let r="",s=0;return e.forEach((i,o)=>{const l=!(i.fontStyle&&i.fontStyle&$c.Underline);l&&i.content.match(/^\s+$/)&&e[o+1]?(s||(s=i.offset),r+=i.content):r?(l?n.push({...i,offset:s,content:r+i.content}):n.push({content:r,offset:s},i),s=0,r=""):n.push(i)}),n})}function F$e(t){return t.map(e=>e.flatMap(n=>{if(n.content.match(/^\s+$/))return n;const r=n.content.match(/^(\s*)(.*?)(\s*)$/);if(!r)return n;const[,s,i,o]=r;if(!s&&!o)return n;const a=[{...n,offset:n.offset+s.length,content:i}];return s&&a.unshift({content:s,offset:n.offset}),o&&a.push({content:o,offset:n.offset+s.length+i.length}),a}))}function B$e(t,e,n){const r={meta:{},options:n,codeToHast:(i,o)=>aS(t,i,o),codeToTokens:(i,o)=>oS(t,i,o)};let s=c$e(aS(t,e,n,r));for(const i of sS(n))s=i.postprocess?.call(r,s,n)||s;return s}const z9={light:"#333333",dark:"#bbbbbb"},V9={light:"#fffffe",dark:"#1e1e1e"},W9="__shiki_resolved";function f6(t){if(t?.[W9])return t;const e={...t};e.tokenColors&&!e.settings&&(e.settings=e.tokenColors,delete e.tokenColors),e.type||="dark",e.colorReplacements={...e.colorReplacements},e.settings||=[];let{bg:n,fg:r}=e;if(!n||!r){const a=e.settings?e.settings.find(l=>!l.name&&!l.scope):void 0;a?.settings?.foreground&&(r=a.settings.foreground),a?.settings?.background&&(n=a.settings.background),!r&&e?.colors?.["editor.foreground"]&&(r=e.colors["editor.foreground"]),!n&&e?.colors?.["editor.background"]&&(n=e.colors["editor.background"]),r||(r=e.type==="light"?z9.light:z9.dark),n||(n=e.type==="light"?V9.light:V9.dark),e.fg=r,e.bg=n}e.settings[0]&&e.settings[0].settings&&!e.settings[0].scope||e.settings.unshift({settings:{foreground:e.fg,background:e.bg}});let s=0;const i=new Map;function o(a){if(i.has(a))return i.get(a);s+=1;const l=`#${s.toString(16).padStart(8,"0").toLowerCase()}`;return e.colorReplacements?.[`#${l}`]?o(a):(i.set(a,l),l)}e.settings=e.settings.map(a=>{const l=a.settings?.foreground&&!a.settings.foreground.startsWith("#"),c=a.settings?.background&&!a.settings.background.startsWith("#");if(!l&&!c)return a;const u={...a,settings:{...a.settings}};if(l){const d=o(a.settings.foreground);e.colorReplacements[d]=a.settings.foreground,u.settings.foreground=d}if(c){const d=o(a.settings.background);e.colorReplacements[d]=a.settings.background,u.settings.background=d}return u});for(const a of Object.keys(e.colors||{}))if((a==="editor.foreground"||a==="editor.background"||a.startsWith("terminal.ansi"))&&!e.colors[a]?.startsWith("#")){const l=o(e.colors[a]);e.colorReplacements[l]=e.colors[a],e.colors[a]=l}return Object.defineProperty(e,W9,{enumerable:!1,writable:!1,value:!0}),e}async function wre(t){return Array.from(new Set((await Promise.all(t.filter(e=>!u6(e)).map(async e=>await bre(e).then(n=>Array.isArray(n)?n:[n])))).flat()))}async function Ere(t){return(await Promise.all(t.map(async n=>mre(n)?null:f6(await bre(n))))).filter(n=>!!n)}let U$e=class extends cUe{constructor(e,n,r,s={}){super(e),this._resolver=e,this._themes=n,this._langs=r,this._alias=s,this._themes.map(i=>this.loadTheme(i)),this.loadLanguages(this._langs)}_resolvedThemes=new Map;_resolvedGrammars=new Map;_langMap=new Map;_langGraph=new Map;_textmateThemeCache=new WeakMap;_loadedThemesCache=null;_loadedLanguagesCache=null;getTheme(e){return typeof e=="string"?this._resolvedThemes.get(e):this.loadTheme(e)}loadTheme(e){const n=f6(e);return n.name&&(this._resolvedThemes.set(n.name,n),this._loadedThemesCache=null),n}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(e){let n=this._textmateThemeCache.get(e);n||(n=ZE.createFromRawTheme(e),this._textmateThemeCache.set(e,n)),this._syncRegistry.setTheme(n)}getGrammar(e){if(this._alias[e]){const n=new Set([e]);for(;this._alias[e];){if(e=this._alias[e],n.has(e))throw new ni(`Circular alias \`${Array.from(n).join(" -> ")} -> ${e}\``);n.add(e)}}return this._resolvedGrammars.get(e)}loadLanguage(e){if(this.getGrammar(e.name))return;const n=new Set([...this._langMap.values()].filter(i=>i.embeddedLangsLazy?.includes(e.name)));this._resolver.addLanguage(e);const r={balancedBracketSelectors:e.balancedBracketSelectors||["*"],unbalancedBracketSelectors:e.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(e.scopeName,e);const s=this.loadGrammarWithConfiguration(e.scopeName,1,r);if(s.name=e.name,this._resolvedGrammars.set(e.name,s),e.aliases&&e.aliases.forEach(i=>{this._alias[i]=e.name}),this._loadedLanguagesCache=null,n.size)for(const i of n)this._resolvedGrammars.delete(i.name),this._loadedLanguagesCache=null,this._syncRegistry?._injectionGrammars?.delete(i.scopeName),this._syncRegistry?._grammars?.delete(i.scopeName),this.loadLanguage(this._langMap.get(i.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(e){for(const s of e)this.resolveEmbeddedLanguages(s);const n=Array.from(this._langGraph.entries()),r=n.filter(([s,i])=>!i);if(r.length){const s=n.filter(([i,o])=>o&&o.embeddedLangs?.some(a=>r.map(([l])=>l).includes(a))).filter(i=>!r.includes(i));throw new ni(`Missing languages ${r.map(([i])=>`\`${i}\``).join(", ")}, required by ${s.map(([i])=>`\`${i}\``).join(", ")}`)}for(const[s,i]of n)this._resolver.addLanguage(i);for(const[s,i]of n)this.loadLanguage(i)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(e){if(this._langMap.set(e.name,e),this._langGraph.set(e.name,e),e.embeddedLangs)for(const n of e.embeddedLangs)this._langGraph.set(n,this._langMap.get(n))}};class $$e{_langs=new Map;_scopeToLang=new Map;_injections=new Map;_onigLib;constructor(e,n){this._onigLib={createOnigScanner:r=>e.createScanner(r),createOnigString:r=>e.createString(r)},n.forEach(r=>this.addLanguage(r))}get onigLib(){return this._onigLib}getLangRegistration(e){return this._langs.get(e)}loadGrammar(e){return this._scopeToLang.get(e)}addLanguage(e){this._langs.set(e.name,e),e.aliases&&e.aliases.forEach(n=>{this._langs.set(n,e)}),this._scopeToLang.set(e.scopeName,e),e.injectTo&&e.injectTo.forEach(n=>{this._injections.get(n)||this._injections.set(n,[]),this._injections.get(n).push(e.scopeName)})}getInjections(e){const n=e.split(".");let r=[];for(let s=1;s<=n.length;s++){const i=n.slice(0,s).join(".");r=[...r,...this._injections.get(i)||[]]}return r}}let W0=0;function H$e(t){W0+=1,t.warnings!==!1&&W0>=10&&W0%10===0&&console.warn(`[Shiki] ${W0} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let e=!1;if(!t.engine)throw new ni("`engine` option is required for synchronous mode");const n=(t.langs||[]).flat(1),r=(t.themes||[]).flat(1).map(f6),s=new $$e(t.engine,n),i=new U$e(s,r,n,t.langAlias);let o;function a(v){m();const _=i.getGrammar(typeof v=="string"?v:v.name);if(!_)throw new ni(`Language \`${v}\` not found, you may need to load it first`);return _}function l(v){if(v==="none")return{bg:"",fg:"",name:"none",settings:[],type:"dark"};m();const _=i.getTheme(v);if(!_)throw new ni(`Theme \`${v}\` not found, you may need to load it first`);return _}function c(v){m();const _=l(v);o!==v&&(i.setTheme(_),o=v);const E=i.getColorMap();return{theme:_,colorMap:E}}function u(){return m(),i.getLoadedThemes()}function d(){return m(),i.getLoadedLanguages()}function h(...v){m(),i.loadLanguages(v.flat(1))}async function f(...v){return h(await wre(v))}function g(...v){m();for(const _ of v.flat(1))i.loadTheme(_)}async function y(...v){return m(),g(await Ere(v))}function m(){if(e)throw new ni("Shiki instance has been disposed")}function b(){e||(e=!0,i.dispose(),W0-=1)}return{setTheme:c,getTheme:l,getLanguage:a,getLoadedThemes:u,getLoadedLanguages:d,loadLanguage:f,loadLanguageSync:h,loadTheme:y,loadThemeSync:g,dispose:b,[Symbol.dispose]:b}}async function z$e(t={}){t.loadWasm;const[e,n,r]=await Promise.all([Ere(t.themes||[]),wre(t.langs||[]),t.engine||Kne(t.loadWasm||E9e())]);return H$e({...t,themes:e,langs:n,engine:r})}async function V$e(t={}){const e=await z$e(t);return{getLastGrammarState:(...n)=>T$e(e,...n),codeToTokensBase:(n,r)=>h6(e,n,r),codeToTokensWithThemes:(n,r)=>xre(e,n,r),codeToTokens:(n,r)=>oS(e,n,r),codeToHast:(n,r)=>aS(e,n,r),codeToHtml:(n,r)=>B$e(e,n,r),...e,getInternalContext:()=>e}}function W$e(t,e,n){let r,s,i;{const a=t;r=a.langs,s=a.themes,i=a.engine}async function o(a){function l(f){if(typeof f=="string"){if(u6(f))return[];const g=r[f];if(!g)throw new Wc(`Language \`${f}\` is not included in this bundle. You may want to load it from external source.`);return g}return f}function c(f){if(mre(f))return"none";if(typeof f=="string"){const g=s[f];if(!g)throw new Wc(`Theme \`${f}\` is not included in this bundle. You may want to load it from external source.`);return g}return f}const u=(a.themes??[]).map(f=>c(f)),d=(a.langs??[]).map(f=>l(f)),h=await V$e({engine:a.engine??i(),...a,themes:u,langs:d});return{...h,loadLanguage(...f){return h.loadLanguage(...f.map(l))},loadTheme(...f){return h.loadTheme(...f.map(c))}}}return o}function G$e(t){let e;async function n(r={}){if(e){const s=await e;return await Promise.all([s.loadTheme(...r.themes||[]),s.loadLanguage(...r.langs||[])]),s}else return e=t({...r,themes:r.themes||[],langs:r.langs||[]}),e}return n}function q$e(t){const e=G$e(t);return{getSingletonHighlighter(n){return e(n)},async codeToHtml(n,r){return(await e({langs:[r.lang],themes:"theme"in r?[r.theme]:Object.values(r.themes)})).codeToHtml(n,r)},async codeToHast(n,r){return(await e({langs:[r.lang],themes:"theme"in r?[r.theme]:Object.values(r.themes)})).codeToHast(n,r)},async codeToTokens(n,r){return(await e({langs:[r.lang],themes:"theme"in r?[r.theme]:Object.values(r.themes)})).codeToTokens(n,r)},async codeToTokensBase(n,r){return(await e({langs:[r.lang],themes:[r.theme]})).codeToTokensBase(n,r)},async codeToTokensWithThemes(n,r){return(await e({langs:[r.lang],themes:Object.values(r.themes).filter(Boolean)})).codeToTokensWithThemes(n,r)},async getLastGrammarState(n,r){return(await e({langs:[r.lang],themes:[r.theme]})).getLastGrammarState(n,r)}}}const p6=W$e({langs:qne,themes:i9e,engine:()=>Kne(ve(()=>import("./wasm-CG6Dc4jp.js"),[]))}),{codeToHtml:K$e}=q$e(p6),Y$e=t=>p6(t),X$e={langs:["shell"],themes:["light-plus","dark-plus"]},J$e=await p6(X$e),Z$e=T.memo(({messageId:t})=>{const e=T.useRef(!1),[n,r]=T.useState(!1),[s,i]=T.useState(!1),a=It(St.artifacts)[t],l=It(iR(a.runner.actions,u=>Object.values(u))),c=()=>{e.current=!0,r(!n)};return T.useEffect(()=>{if(l.length&&!n&&!e.current&&r(!0),l.length!==0&&a.type==="bundled"){const u=!l.find(d=>d.status!=="complete");s!==u&&i(u)}},[l]),p.jsxs("div",{className:"artifact border border-bolt-elements-borderColor flex flex-col overflow-hidden rounded-lg w-full transition-border duration-150",children:[p.jsxs("div",{className:"flex",children:[p.jsxs("button",{className:"flex items-stretch bg-bolt-elements-artifacts-background hover:bg-bolt-elements-artifacts-backgroundHover w-full overflow-hidden",onClick:()=>{const u=St.showWorkbench.get();St.showWorkbench.set(!u)},children:[a.type=="bundled"&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"p-4",children:s?p.jsx("div",{className:"i-ph:files-light",style:{fontSize:"2rem"}}):p.jsx("div",{className:"i-svg-spinners:90-ring-with-bg",style:{fontSize:"2rem"}})}),p.jsx("div",{className:"bg-bolt-elements-artifacts-borderColor w-[1px]"})]}),p.jsxs("div",{className:"px-5 p-3.5 w-full text-left",children:[p.jsx("div",{className:"w-full text-bolt-elements-textPrimary font-medium leading-5 text-sm",children:a?.title}),p.jsx("div",{className:"w-full w-full text-bolt-elements-textSecondary text-xs mt-0.5",children:"Click to open Workbench"})]})]}),p.jsx("div",{className:"bg-bolt-elements-artifacts-borderColor w-[1px]"}),p.jsx(zl,{children:l.length&&a.type!=="bundled"&&p.jsx(ot.button,{initial:{width:0},animate:{width:"auto"},exit:{width:0},transition:{duration:.15,ease:so},className:"bg-bolt-elements-artifacts-background hover:bg-bolt-elements-artifacts-backgroundHover",onClick:c,children:p.jsx("div",{className:"p-4",children:p.jsx("div",{className:n?"i-ph:caret-up-bold":"i-ph:caret-down-bold"})})})})]}),p.jsx(zl,{children:a.type!=="bundled"&&n&&l.length>0&&p.jsxs(ot.div,{className:"actions",initial:{height:0},animate:{height:"auto"},exit:{height:"0px"},transition:{duration:.15},children:[p.jsx("div",{className:"bg-bolt-elements-artifacts-borderColor h-[1px]"}),p.jsx("div",{className:"p-5 text-left bg-bolt-elements-actions-background",children:p.jsx(nHe,{actions:l})})]})})]})});function Q$e({classsName:t,code:e}){return p.jsx("div",{className:Pe("text-xs",t),dangerouslySetInnerHTML:{__html:J$e.codeToHtml(e,{lang:"shell",theme:"dark-plus"})}})}const eHe={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};function tHe(t){St.currentView.get()!=="code"&&St.currentView.set("code"),St.setSelectedFile(`${Zc}/${t}`)}const nHe=T.memo(({actions:t})=>p.jsx(ot.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},children:p.jsx("ul",{className:"list-none space-y-2.5",children:t.map((e,n)=>{const{status:r,type:s,content:i}=e,o=n===t.length-1;return p.jsxs(ot.li,{variants:eHe,initial:"hidden",animate:"visible",transition:{duration:.2,ease:so},children:[p.jsxs("div",{className:"flex items-center gap-1.5 text-sm",children:[p.jsx("div",{className:Pe("text-lg",rHe(e.status)),children:r==="running"?p.jsx(p.Fragment,{children:s!=="start"?p.jsx("div",{className:"i-svg-spinners:90-ring-with-bg"}):p.jsx("div",{className:"i-ph:terminal-window-duotone"})}):r==="pending"?p.jsx("div",{className:"i-ph:circle-duotone"}):r==="complete"?p.jsx("div",{className:"i-ph:check"}):r==="failed"||r==="aborted"?p.jsx("div",{className:"i-ph:x"}):null}),s==="file"?p.jsxs("div",{children:["Create"," ",p.jsx("code",{className:"bg-bolt-elements-artifacts-inlineCode-background text-bolt-elements-artifacts-inlineCode-text px-1.5 py-1 rounded-md text-bolt-elements-item-contentAccent hover:underline cursor-pointer",onClick:()=>tHe(e.filePath),children:e.filePath})]}):s==="shell"?p.jsx("div",{className:"flex items-center w-full min-h-[28px]",children:p.jsx("span",{className:"flex-1",children:"Run command"})}):s==="start"?p.jsx("a",{onClick:a=>{a.preventDefault(),St.currentView.set("preview")},className:"flex items-center w-full min-h-[28px]",children:p.jsx("span",{className:"flex-1",children:"Start Application"})}):null]}),(s==="shell"||s==="start")&&p.jsx(Q$e,{classsName:Pe("mt-1",{"mb-3.5":!o}),code:i})]},n)})})}));function rHe(t){switch(t){case"pending":return"text-bolt-elements-textTertiary";case"running":return"text-bolt-elements-loader-progress";case"complete":return"text-bolt-elements-icon-success";case"aborted":return"text-bolt-elements-textSecondary";case"failed":return"text-bolt-elements-icon-error";default:return}}const sHe="y",iHe={CopyButtonContainer:sHe},G9=Di("CodeBlock"),oHe=T.memo(({className:t,code:e,language:n="plaintext",theme:r="dark-plus",disableCopy:s=!1})=>{const[i,o]=T.useState(void 0),[a,l]=T.useState(!1),c=()=>{a||(navigator.clipboard.writeText(e),l(!0),setTimeout(()=>{l(!1)},2e3))};return T.useEffect(()=>{n&&!u6(n)&&!(n in qne)&&G9.warn(`Unsupported language '${n}'`),G9.trace(`Language = ${n}`),(async()=>{o(await K$e(e,{lang:n,theme:r}))})()},[e]),p.jsxs("div",{className:Pe("relative group text-left",t),children:[p.jsx("div",{className:Pe(iHe.CopyButtonContainer,"bg-transparant absolute top-[10px] right-[10px] rounded-md z-10 text-lg flex items-center justify-center opacity-0 group-hover:opacity-100",{"rounded-l-0 opacity-100":a}),children:!s&&p.jsx("button",{className:Pe("flex items-center bg-accent-500 p-[6px] justify-center before:bg-white before:rounded-l-md before:text-gray-500 before:border-r before:border-gray-300 rounded-md transition-theme",{"before:opacity-0":!a,"before:opacity-100":a}),title:"Copy Code",onClick:()=>c(),children:p.jsx("div",{className:"i-ph:clipboard-text-duotone"})})}),p.jsx("div",{dangerouslySetInnerHTML:{__html:i??""}})]})}),aHe="x",lHe={MarkdownContent:aHe},cHe=({title:t,children:e})=>{const[n,r]=T.useState(!1);return p.jsxs("div",{onClick:()=>r(!n),className:`
        bg-bolt-elements-background-depth-2
        shadow-md 
        rounded-lg 
        cursor-pointer 
        transition-all 
        duration-300
        ${n?"max-h-96":"max-h-13"}
        overflow-auto
        border border-bolt-elements-borderColor
      `,children:[p.jsxs("div",{className:"p-4 flex items-center gap-4 rounded-lg  text-bolt-elements-textSecondary font-medium leading-5 text-sm  border border-bolt-elements-borderColor",children:[p.jsx("div",{className:"i-ph:brain-thin text-2xl"}),p.jsxs("div",{className:"div",children:[p.jsxs("span",{children:[" ",t]})," ",!n&&p.jsx("span",{className:"text-bolt-elements-textTertiary",children:" - Click to expand"})]})]}),p.jsx("div",{className:`
        transition-opacity 
        duration-300
        p-4 
        rounded-lg 
        ${n?"opacity-100":"opacity-0"}
      `,children:e})]})},q9=Di("MarkdownComponent"),dg=T.memo(({children:t,html:e=!1,limitedMarkdown:n=!1})=>{q9.trace("Render");const r=T.useMemo(()=>({div:({className:s,children:i,node:o,...a})=>{if(s?.includes("__boltArtifact__")){const l=o?.properties.dataMessageId;return l||q9.error(`Invalid message id ${l}`),p.jsx(Z$e,{messageId:l})}return s?.includes("__boltThought__")?p.jsx(cHe,{title:"Thought process",children:i}):p.jsx("div",{className:s,...a,children:i})},pre:s=>{const{children:i,node:o,...a}=s,[l]=o?.children??[];if(l&&l.type==="element"&&l.tagName==="code"&&l.children[0].type==="text"){const{className:c,...u}=l.properties,[,d="plaintext"]=/language-(\w+)/.exec(String(c)||"")??[];return p.jsx(oHe,{code:l.children[0].value,language:d,...u})}return p.jsx("pre",{...a,children:i})}}),[]);return p.jsx(e9e,{allowedElements:zO,className:lHe.MarkdownContent,components:r,remarkPlugins:tje(n),rehypePlugins:nje(e),children:uHe(t)})}),uHe=t=>{if(!t||!t.includes("__boltArtifact__"))return t;const e=t.split(`
`),n=e.findIndex(r=>r.includes("__boltArtifact__"));return n===-1?t:(n>0&&e[n-1]?.trim().match(/^```\w*$/)&&(e[n-1]=""),n<e.length-1&&e[n+1]?.trim().match(/^```$/)&&(e[n+1]=""),e.join(`
`))},dHe=({progress:t})=>p.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden",children:p.jsx(ot.div,{className:"h-full bg-blue-500",initial:{width:0},animate:{width:`${t}%`},transition:{duration:.3}})}),hHe=({progress:t})=>p.jsxs("div",{className:"mt-4 space-y-2",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-sm font-medium",children:t.message}),p.jsxs("span",{className:"text-sm text-gray-500",children:[t.progress,"%"]})]}),p.jsx(dHe,{progress:t.progress||0}),t.details&&p.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[t.details.changedFiles&&t.details.changedFiles.length>0&&p.jsxs("div",{className:"mt-4",children:[p.jsx("div",{className:"font-medium mb-2",children:"Changed Files:"}),p.jsx("div",{className:"space-y-2",children:["Modified","Added","Deleted"].map(e=>{const n=t.details?.changedFiles?.filter(r=>r.startsWith(e))||[];return n.length===0?null:p.jsxs("div",{className:"space-y-1",children:[p.jsxs("div",{className:Pe("text-sm font-medium",{"text-blue-500":e==="Modified","text-green-500":e==="Added","text-red-500":e==="Deleted"}),children:[e," (",n.length,")"]}),p.jsx("div",{className:"pl-4 space-y-1",children:n.map((r,s)=>{const i=r.split(": ")[1];return p.jsxs("div",{className:"text-sm text-bolt-elements-textSecondary flex items-center gap-2",children:[p.jsx("div",{className:Pe("w-4 h-4",{"i-ph:pencil-simple":e==="Modified","i-ph:plus":e==="Added","i-ph:trash":e==="Deleted","text-blue-500":e==="Modified","text-green-500":e==="Added","text-red-500":e==="Deleted"})}),p.jsx("span",{className:"font-mono text-xs",children:i})]},s)})})]},e)})})]}),t.details.totalSize&&p.jsxs("div",{className:"mt-1",children:["Total size: ",t.details.totalSize]}),t.details.additions!==void 0&&t.details.deletions!==void 0&&p.jsxs("div",{className:"mt-1",children:["Changes: ",p.jsxs("span",{className:"text-green-600",children:["+",t.details.additions]})," ",p.jsxs("span",{className:"text-red-600",children:["-",t.details.deletions]})]}),t.details.currentCommit&&t.details.remoteCommit&&p.jsxs("div",{className:"mt-1",children:["Updating from ",t.details.currentCommit," to ",t.details.remoteCommit]})]})]}),fHe=()=>{const{isLatestBranch:t}=jd(),[e,n]=T.useState(!1),[r,s]=T.useState(null),[i,o]=T.useState(()=>{const f=localStorage.getItem("update_settings");return f?JSON.parse(f):{autoUpdate:!1,notifyInApp:!0,checkInterval:24}}),[a,l]=T.useState(!1),[c,u]=T.useState(null);T.useEffect(()=>{localStorage.setItem("update_settings",JSON.stringify(i))},[i]);const d=async()=>{console.log("Starting update check..."),n(!0),s(null),u(null);try{const g=await fetch("/api/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({branch:t?"main":"stable",autoUpdate:i.autoUpdate})});if(!g.ok)throw new Error(`Update check failed: ${g.statusText}`);const y=g.body?.getReader();if(!y)throw new Error("No response stream available");for(;;){const{done:m,value:b}=await y.read();if(m)break;const _=new TextDecoder().decode(b).split(`
`).filter(Boolean);for(const E of _)try{const w=JSON.parse(E);u(w),w.error&&s(w.error),w.stage==="complete"&&(n(!1),w.error||(ze.success("Update check completed"),w.details?.changedFiles?.length&&w.details.updateReady&&l(!0)))}catch(w){console.error("Error parsing progress update:",w)}}}catch(f){s(f instanceof Error?f.message:"Unknown error occurred"),Lt.logWarning("Update Check Failed",{type:"update",message:f instanceof Error?f.message:"Unknown error occurred"})}finally{n(!1)}},h=async()=>{l(!1);try{const g=await fetch("/api/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({branch:t?"main":"stable",autoUpdate:!0})});if(!g.ok)throw new Error(`Update failed: ${g.statusText}`);const y=g.body?.getReader();if(!y)throw new Error("No response stream available");for(;;){const{done:m,value:b}=await y.read();if(m)break;const _=new TextDecoder().decode(b).split(`
`).filter(Boolean);for(const E of _)try{const w=JSON.parse(E);u(w),w.error&&(s(w.error),ze.error("Update failed")),w.stage==="complete"&&!w.error&&ze.success("Update completed successfully")}catch(w){console.error("Error parsing update progress:",w)}}}catch(f){s(f instanceof Error?f.message:"Unknown error occurred"),ze.error("Update failed")}};return p.jsxs("div",{className:"flex flex-col gap-6",children:[p.jsxs(ot.div,{className:"flex items-center gap-3",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},children:[p.jsx("div",{className:"i-ph:arrow-circle-up text-xl text-blue-500"})," ",p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:"Updates"}),p.jsx("p",{className:"text-sm text-bolt-elements-textSecondary",children:"Check for and manage application updates"})]})]}),p.jsxs(ot.div,{className:"p-6 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A]",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},children:[p.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[p.jsx("div",{className:"i-ph:gear text-blue-500 w-5 h-5"})," ",p.jsx("h3",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:"Update Settings"})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("span",{className:"text-sm text-bolt-elements-textPrimary",children:"Automatic Updates"}),p.jsx("p",{className:"text-xs text-bolt-elements-textSecondary",children:"Automatically check and apply updates when available"})]}),p.jsx("button",{onClick:()=>o(f=>({...f,autoUpdate:!f.autoUpdate})),className:Pe("relative inline-flex h-6 w-11 items-center rounded-full transition-colors",i.autoUpdate?"bg-blue-500":"bg-gray-200 dark:bg-gray-700"),children:p.jsx("span",{className:Pe("inline-block h-4 w-4 transform rounded-full bg-white transition-transform",i.autoUpdate?"translate-x-6":"translate-x-1")})})]}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("span",{className:"text-sm text-bolt-elements-textPrimary",children:"In-App Notifications"}),p.jsx("p",{className:"text-xs text-bolt-elements-textSecondary",children:"Show notifications when updates are available"})]}),p.jsx("button",{onClick:()=>o(f=>({...f,notifyInApp:!f.notifyInApp})),className:Pe("relative inline-flex h-6 w-11 items-center rounded-full transition-colors",i.notifyInApp?"bg-blue-500":"bg-gray-200 dark:bg-gray-700"),children:p.jsx("span",{className:Pe("inline-block h-4 w-4 transform rounded-full bg-white transition-transform",i.notifyInApp?"translate-x-6":"translate-x-1")})})]}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("span",{className:"text-sm text-bolt-elements-textPrimary",children:"Check Interval"}),p.jsx("p",{className:"text-xs text-bolt-elements-textSecondary",children:"How often to check for updates"})]}),p.jsxs("select",{value:i.checkInterval,onChange:f=>o(g=>({...g,checkInterval:Number(f.target.value)})),className:Pe("px-3 py-2 rounded-lg text-sm","bg-[#F5F5F5] dark:bg-[#1A1A1A]","border border-[#E5E5E5] dark:border-[#1A1A1A]","text-bolt-elements-textPrimary","hover:bg-[#E5E5E5] dark:hover:bg-[#2A2A2A]","transition-colors duration-200"),children:[p.jsx("option",{value:"6",children:"6 hours"}),p.jsx("option",{value:"12",children:"12 hours"}),p.jsx("option",{value:"24",children:"24 hours"}),p.jsx("option",{value:"48",children:"48 hours"})]})]})]})]}),p.jsxs(ot.div,{className:"p-6 rounded-xl bg-white dark:bg-[#0A0A0A] border border-[#E5E5E5] dark:border-[#1A1A1A]",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},children:[p.jsxs("div",{className:"flex items-center justify-between mb-6",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"i-ph:arrows-clockwise text-blue-500 w-5 h-5"})," ",p.jsx("h3",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:"Update Status"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[c?.details?.updateReady&&!i.autoUpdate&&p.jsxs("button",{onClick:h,className:Pe("flex items-center gap-2 px-4 py-2 rounded-lg text-sm","bg-blue-500 text-white","hover:bg-blue-600","transition-colors duration-200"),children:[p.jsx("div",{className:"i-ph:arrow-circle-up w-4 h-4"}),"Update Now"]}),p.jsx("button",{onClick:()=>{s(null),d()},className:Pe("flex items-center gap-2 px-4 py-2 rounded-lg text-sm","bg-[#F5F5F5] dark:bg-[#1A1A1A]","hover:bg-blue-500/10 hover:text-blue-500","dark:hover:bg-blue-500/20 dark:hover:text-blue-500","text-bolt-elements-textPrimary","transition-colors duration-200","disabled:opacity-50 disabled:cursor-not-allowed"),disabled:e,children:e?p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(ot.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"i-ph:arrows-clockwise w-4 h-4"}),"Checking..."]}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"i-ph:arrows-clockwise w-4 h-4"}),"Check for Updates"]})})]})]}),c&&p.jsx(hHe,{progress:c}),r&&p.jsx("div",{className:"mt-4 p-4 bg-red-100 text-red-700 rounded",children:r}),c?.details?.currentCommit&&c?.details?.remoteCommit&&p.jsxs("div",{className:"mt-4 text-sm text-bolt-elements-textSecondary",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsxs("p",{children:["Updates are fetched from: ",p.jsx("span",{className:"font-mono",children:"stackblitz-labs/bolt.diy"})," (",t?"main":"stable"," branch)"]}),p.jsxs("p",{className:"mt-1",children:["Current version: ",p.jsx("span",{className:"font-mono",children:c.details.currentCommit}),p.jsx("span",{className:"mx-2",children:""}),"Latest version: ",p.jsx("span",{className:"font-mono",children:c.details.remoteCommit})]})]}),c?.details?.compareUrl&&p.jsxs("a",{href:c.details.compareUrl,target:"_blank",rel:"noopener noreferrer",className:Pe("flex items-center gap-2 px-4 py-2 rounded-lg text-sm","bg-[#F5F5F5] dark:bg-[#1A1A1A]","hover:bg-blue-500/10 hover:text-blue-500","dark:hover:bg-blue-500/20 dark:hover:text-blue-500","text-bolt-elements-textPrimary","transition-colors duration-200","w-fit"),children:[p.jsx("div",{className:"i-ph:github-logo w-4 h-4"}),"View Changes on GitHub"]})]}),c?.details?.additions!==void 0&&c?.details?.deletions!==void 0&&p.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:git-diff text-blue-500 w-4 h-4"})," ","Changes: ",p.jsxs("span",{className:"text-green-600",children:["+",c.details.additions]})," ",p.jsxs("span",{className:"text-red-600",children:["-",c.details.deletions]})]})]}),c?.details?.changelog&&p.jsxs("div",{className:"mb-6",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx("div",{className:"i-ph:scroll text-blue-500 w-5 h-5"})," ",p.jsx("p",{className:"font-medium",children:"Changelog"})]}),p.jsx("div",{className:"bg-[#F5F5F5] dark:bg-[#1A1A1A] rounded-lg p-4 overflow-auto max-h-[300px]",children:p.jsx("div",{className:"prose dark:prose-invert prose-sm max-w-none",children:p.jsx(dg,{children:c.details.changelog})})})]}),c?.details?.compareUrl&&p.jsx("div",{className:"mt-4",children:p.jsxs("a",{href:c.details.compareUrl,target:"_blank",rel:"noopener noreferrer",className:Pe("flex items-center gap-2 px-4 py-2 rounded-lg text-sm","bg-[#F5F5F5] dark:bg-[#1A1A1A]","hover:bg-blue-500/10 hover:text-blue-500","dark:hover:bg-blue-500/20 dark:hover:text-blue-500","text-bolt-elements-textPrimary","transition-colors duration-200","w-fit"),children:[p.jsx("div",{className:"i-ph:github-logo w-4 h-4"}),"View Changes on GitHub"]})}),c?.details?.commitMessages&&c.details.commitMessages.length>0&&p.jsxs("div",{className:"mb-6",children:[p.jsx("p",{className:"font-medium mb-2",children:"Changes in this Update:"}),p.jsx("div",{className:"bg-[#F5F5F5] dark:bg-[#1A1A1A] rounded-lg p-4 overflow-auto max-h-[400px]",children:p.jsx("div",{className:"prose dark:prose-invert prose-sm max-w-none",children:c.details.commitMessages.map((f,g)=>p.jsx(dg,{children:f},g))})})]})]}),p.jsx(jo,{open:a,onOpenChange:l,children:p.jsxs(qm,{children:[p.jsx(hf,{children:"Update Available"}),p.jsx(Uq,{children:p.jsxs("div",{className:"mt-4",children:[p.jsxs("p",{className:"text-sm text-bolt-elements-textSecondary mb-4",children:["A new version is available from ",p.jsx("span",{className:"font-mono",children:"stackblitz-labs/bolt.diy"})," (",t?"main":"stable"," branch)"]}),c?.details?.compareUrl&&p.jsx("div",{className:"mb-6",children:p.jsxs("a",{href:c.details.compareUrl,target:"_blank",rel:"noopener noreferrer",className:Pe("flex items-center gap-2 px-4 py-2 rounded-lg text-sm","bg-[#F5F5F5] dark:bg-[#1A1A1A]","hover:bg-blue-500/10 hover:text-blue-500","dark:hover:bg-blue-500/20 dark:hover:text-blue-500","text-bolt-elements-textPrimary","transition-colors duration-200","w-fit"),children:[p.jsx("div",{className:"i-ph:github-logo w-4 h-4"}),"View Changes on GitHub"]})}),c?.details?.commitMessages&&c.details.commitMessages.length>0&&p.jsxs("div",{className:"mb-6",children:[p.jsx("p",{className:"font-medium mb-2",children:"Commit Messages:"}),p.jsx("div",{className:"bg-[#F5F5F5] dark:bg-[#1A1A1A] rounded-lg p-3 space-y-2",children:c.details.commitMessages.map((f,g)=>p.jsxs("div",{className:"text-sm text-bolt-elements-textSecondary flex items-start gap-2",children:[p.jsx("div",{className:"i-ph:git-commit text-blue-500 w-4 h-4 mt-0.5 flex-shrink-0"})," ",p.jsx("span",{children:f})]},g))})]}),c?.details?.totalSize&&p.jsxs("div",{className:"flex items-center gap-4 text-sm text-bolt-elements-textSecondary",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:file text-blue-500 w-4 h-4"})," ","Total size: ",c.details.totalSize]}),c?.details?.additions!==void 0&&c?.details?.deletions!==void 0&&p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:git-diff text-blue-500 w-4 h-4"})," ","Changes: ",p.jsxs("span",{className:"text-green-600",children:["+",c.details.additions]})," ",p.jsxs("span",{className:"text-red-600",children:["-",c.details.deletions]})]})]})]})}),p.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[p.jsx(V2,{type:"secondary",onClick:()=>l(!1),children:"Cancel"}),p.jsx(V2,{type:"primary",onClick:h,children:"Update Now"})]})]})})]})};function pHe(){const[t,e]=T.useState({user:null,token:"",tokenType:"classic"}),[n,r]=T.useState(!0),[s,i]=T.useState(!1),[o,a]=T.useState(!1),[l,c]=T.useState(!1),u=async g=>{try{a(!0);const y=await fetch("https://api.github.com/user/repos?sort=updated&per_page=10&affiliation=owner,organization_member,collaborator",{headers:{Authorization:`Bearer ${g}`}});if(!y.ok)throw new Error("Failed to fetch repositories");const m=await y.json(),b=await fetch("https://api.github.com/user/orgs",{headers:{Authorization:`Bearer ${g}`}});if(!b.ok)throw new Error("Failed to fetch organizations");const v=await b.json(),_=await fetch("https://api.github.com/users/"+t.user?.login+"/events/public",{headers:{Authorization:`Bearer ${g}`}});if(!_.ok)throw new Error("Failed to fetch events");const E=(await _.json()).slice(0,5),w=m.map(C=>fetch(C.languages_url,{headers:{Authorization:`Bearer ${g}`}}).then(N=>N.json())),S=await Promise.all(w),k={};S.forEach(C=>{Object.entries(C).forEach(([N,O])=>{k[N]=(k[N]||0)+O})});const x=m.reduce((C,N)=>C+N.stargazers_count,0),I=m.reduce((C,N)=>C+N.forks_count,0),R=t.user?.public_gists||0;e(C=>({...C,stats:{repos:m,totalStars:x,totalForks:I,organizations:v,recentActivity:E,languages:k,totalGists:R}}))}catch(y){Lt.logError("Failed to fetch GitHub stats",{error:y}),ze.error("Failed to fetch GitHub statistics")}finally{a(!1)}};if(T.useEffect(()=>{const g=localStorage.getItem("github_connection");if(g){const y=JSON.parse(g);y.tokenType||(y.tokenType="classic"),e(y),y.user&&y.token&&u(y.token)}r(!1)},[]),n||s||o)return p.jsx(mHe,{});const d=async g=>{try{i(!0);const y=await fetch("https://api.github.com/user",{headers:{Authorization:`Bearer ${g}`}});if(!y.ok)throw new Error("Invalid token or unauthorized");const m=await y.json(),b={user:m,token:g,tokenType:t.tokenType};localStorage.setItem("github_connection",JSON.stringify(b)),ur.set("githubToken",g),ur.set("githubUsername",m.login),ur.set("git:github.com",JSON.stringify({username:g,password:"x-oauth-basic"})),e(b),await u(g),ze.success("Successfully connected to GitHub")}catch(y){Lt.logError("Failed to authenticate with GitHub",{error:y}),ze.error("Failed to connect to GitHub"),e({user:null,token:"",tokenType:"classic"})}finally{i(!1)}},h=async g=>{g.preventDefault(),await d(t.token)},f=()=>{localStorage.removeItem("github_connection"),e({user:null,token:"",tokenType:"classic"}),ze.success("Disconnected from GitHub")};return p.jsx(ot.div,{className:"bg-[#FFFFFF] dark:bg-[#0A0A0A] rounded-lg border border-[#E5E5E5] dark:border-[#1A1A1A]",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:p.jsxs("div",{className:"p-6 space-y-6",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:github-logo w-5 h-5 text-bolt-elements-textPrimary"}),p.jsx("h3",{className:"text-base font-medium text-bolt-elements-textPrimary",children:"GitHub Connection"})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm text-bolt-elements-textSecondary mb-2",children:"Token Type"}),p.jsxs("select",{value:t.tokenType,onChange:g=>e(y=>({...y,tokenType:g.target.value})),disabled:s||!!t.user,className:Pe("w-full px-3 py-2 rounded-lg text-sm","bg-[#F8F8F8] dark:bg-[#1A1A1A]","border border-[#E5E5E5] dark:border-[#333333]","text-bolt-elements-textPrimary","focus:outline-none focus:ring-1 focus:ring-purple-500","disabled:opacity-50"),children:[p.jsx("option",{value:"classic",children:"Personal Access Token (Classic)"}),p.jsx("option",{value:"fine-grained",children:"Fine-grained Token"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm text-bolt-elements-textSecondary mb-2",children:t.tokenType==="classic"?"Personal Access Token":"Fine-grained Token"}),p.jsx("input",{type:"password",value:t.token,onChange:g=>e(y=>({...y,token:g.target.value})),disabled:s||!!t.user,placeholder:`Enter your GitHub ${t.tokenType==="classic"?"personal access token":"fine-grained token"}`,className:Pe("w-full px-3 py-2 rounded-lg text-sm","bg-[#F8F8F8] dark:bg-[#1A1A1A]","border border-[#E5E5E5] dark:border-[#333333]","text-bolt-elements-textPrimary placeholder-bolt-elements-textTertiary","focus:outline-none focus:ring-1 focus:ring-purple-500","disabled:opacity-50")}),p.jsxs("div",{className:"mt-2 text-sm text-bolt-elements-textSecondary",children:[p.jsxs("a",{href:`https://github.com/settings/tokens${t.tokenType==="fine-grained"?"/beta":"/new"}`,target:"_blank",rel:"noopener noreferrer",className:"text-purple-500 hover:underline inline-flex items-center gap-1",children:["Get your token",p.jsx("div",{className:"i-ph:arrow-square-out w-10 h-5"})]}),p.jsx("span",{className:"mx-2",children:""}),p.jsxs("span",{children:["Required scopes:"," ",t.tokenType==="classic"?"repo, read:org, read:user":"Repository access, Organization access"]})]})]})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[t.user?p.jsxs("button",{onClick:f,className:Pe("px-4 py-2 rounded-lg text-sm flex items-center gap-2","bg-red-500 text-white","hover:bg-red-600"),children:[p.jsx("div",{className:"i-ph:plug-x w-4 h-4"}),"Disconnect"]}):p.jsx("button",{onClick:h,disabled:s||!t.token,className:Pe("px-4 py-2 rounded-lg text-sm flex items-center gap-2","bg-purple-500 text-white","hover:bg-purple-600","disabled:opacity-50 disabled:cursor-not-allowed"),children:s?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"i-ph:spinner-gap animate-spin"}),"Connecting..."]}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"i-ph:plug-charging w-4 h-4"}),"Connect"]})}),t.user&&p.jsxs("span",{className:"text-sm text-bolt-elements-textSecondary flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:check-circle w-4 h-4"}),"Connected to GitHub"]})]}),t.user&&t.stats&&p.jsxs("div",{className:"mt-6 border-t border-[#E5E5E5] dark:border-[#1A1A1A] pt-6",children:[p.jsx("button",{onClick:()=>c(!l),className:"w-full bg-transparent",children:p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("img",{src:t.user.avatar_url,alt:t.user.login,className:"w-16 h-16 rounded-full"}),p.jsxs("div",{className:"flex-1",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h3",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:t.user.name||t.user.login}),p.jsx("div",{className:Pe("i-ph:caret-down w-4 h-4 text-bolt-elements-textSecondary transition-transform",l?"rotate-180":"")})]}),t.user.bio&&p.jsx("p",{className:"text-sm text-start text-bolt-elements-textSecondary",children:t.user.bio}),p.jsxs("div",{className:"flex gap-4 mt-2 text-sm text-bolt-elements-textSecondary",children:[p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:users w-4 h-4"}),t.user.followers," followers"]}),p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:book-bookmark w-4 h-4"}),t.user.public_repos," public repos"]}),p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:star w-4 h-4"}),t.stats.totalStars," stars"]}),p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:git-fork w-4 h-4"}),t.stats.totalForks," forks"]})]})]})]})}),l&&p.jsxs("div",{className:"pt-4",children:[t.stats.organizations.length>0&&p.jsxs("div",{className:"mb-6",children:[p.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary mb-3",children:"Organizations"}),p.jsx("div",{className:"flex flex-wrap gap-3",children:t.stats.organizations.map(g=>p.jsxs("a",{href:g.html_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-2 rounded-lg bg-[#F8F8F8] dark:bg-[#1A1A1A] hover:bg-[#F0F0F0] dark:hover:bg-[#252525] transition-colors",children:[p.jsx("img",{src:g.avatar_url,alt:g.login,className:"w-6 h-6 rounded-md"}),p.jsx("span",{className:"text-sm text-bolt-elements-textPrimary",children:g.login})]},g.login))})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary mb-3",children:"Top Languages"}),p.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(t.stats.languages).sort(([,g],[,y])=>y-g).slice(0,5).map(([g])=>p.jsx("span",{className:"px-3 py-1 text-xs rounded-full bg-purple-500/10 text-purple-500 dark:bg-purple-500/20",children:g},g))})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary mb-3",children:"Recent Activity"}),p.jsx("div",{className:"space-y-3",children:t.stats.recentActivity.map(g=>p.jsxs("div",{className:"p-3 rounded-lg bg-[#F8F8F8] dark:bg-[#1A1A1A] text-sm",children:[p.jsxs("div",{className:"flex items-center gap-2 text-bolt-elements-textPrimary",children:[p.jsx("div",{className:"i-ph:git-commit w-4 h-4 text-bolt-elements-textSecondary"}),p.jsx("span",{className:"font-medium",children:g.type.replace("Event","")}),p.jsx("span",{children:"on"}),p.jsx("a",{href:`https://github.com/${g.repo.name}`,target:"_blank",rel:"noopener noreferrer",className:"text-purple-500 hover:underline",children:g.repo.name})]}),p.jsxs("div",{className:"mt-1 text-xs text-bolt-elements-textSecondary",children:[new Date(g.created_at).toLocaleDateString()," at"," ",new Date(g.created_at).toLocaleTimeString()]})]},g.id))})]}),p.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[p.jsxs("div",{className:"p-4 rounded-lg bg-[#F8F8F8] dark:bg-[#1A1A1A]",children:[p.jsx("div",{className:"text-sm text-bolt-elements-textSecondary",children:"Member Since"}),p.jsx("div",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:new Date(t.user.created_at).toLocaleDateString()})]}),p.jsxs("div",{className:"p-4 rounded-lg bg-[#F8F8F8] dark:bg-[#1A1A1A]",children:[p.jsx("div",{className:"text-sm text-bolt-elements-textSecondary",children:"Public Gists"}),p.jsx("div",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:t.stats.totalGists})]}),p.jsxs("div",{className:"p-4 rounded-lg bg-[#F8F8F8] dark:bg-[#1A1A1A]",children:[p.jsx("div",{className:"text-sm text-bolt-elements-textSecondary",children:"Organizations"}),p.jsx("div",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:t.stats.organizations.length})]}),p.jsxs("div",{className:"p-4 rounded-lg bg-[#F8F8F8] dark:bg-[#1A1A1A]",children:[p.jsx("div",{className:"text-sm text-bolt-elements-textSecondary",children:"Languages"}),p.jsx("div",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:Object.keys(t.stats.languages).length})]})]}),p.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary mb-3",children:"Recent Repositories"}),p.jsx("div",{className:"space-y-3",children:t.stats.repos.map(g=>p.jsx("a",{href:g.html_url,target:"_blank",rel:"noopener noreferrer",className:"block p-3 rounded-lg bg-[#F8F8F8] dark:bg-[#1A1A1A] hover:bg-[#F0F0F0] dark:hover:bg-[#252525] transition-colors",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsxs("h5",{className:"text-sm font-medium text-bolt-elements-textPrimary flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:git-repository w-4 h-4 text-bolt-elements-textSecondary"}),g.name]}),g.description&&p.jsx("p",{className:"text-xs text-bolt-elements-textSecondary mt-1",children:g.description}),p.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-bolt-elements-textSecondary",children:[p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:git-branch w-3 h-3"}),g.default_branch]}),p.jsx("span",{children:""}),p.jsxs("span",{children:["Updated ",new Date(g.updated_at).toLocaleDateString()]})]})]}),p.jsxs("div",{className:"flex items-center gap-3 text-xs text-bolt-elements-textSecondary",children:[p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:star w-3 h-3"}),g.stargazers_count]}),p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:git-fork w-3 h-3"}),g.forks_count]})]})]})},g.full_name))})]})]})]})})}function mHe(){return p.jsx("div",{className:"flex items-center justify-center p-4",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:spinner-gap-bold animate-spin w-4 h-4"}),p.jsx("span",{className:"text-bolt-elements-textSecondary",children:"Loading..."})]})})}const K9=typeof window<"u"?localStorage.getItem("netlify_connection"):null,gHe=K9?JSON.parse(K9):{user:null,token:"",stats:void 0},hg=tr(gHe),I5=tr(!1),c4=tr(!1),Sb=t=>{const n={...hg.get(),...t};hg.set(n),typeof window<"u"&&localStorage.setItem("netlify_connection",JSON.stringify(n))};async function u4(t){try{c4.set(!0);const e=await fetch("https://api.netlify.com/api/v1/sites",{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!e.ok)throw new Error(`Failed to fetch sites: ${e.status}`);const n=await e.json(),r=hg.get();Sb({...r,stats:{sites:n,totalSites:n.length}})}catch(e){console.error("Netlify API Error:",e),Lt.logError("Failed to fetch Netlify stats",{error:e}),ze.error("Failed to fetch Netlify statistics")}finally{c4.set(!1)}}function bHe(){const t=It(hg),e=It(I5),n=It(c4),[r,s]=T.useState(!1);T.useEffect(()=>{(async()=>{t.user&&t.token&&await u4(t.token)})()},[t.user,t.token]);const i=async a=>{a.preventDefault(),I5.set(!0);try{const l=await fetch("https://api.netlify.com/api/v1/user",{headers:{Authorization:`Bearer ${t.token}`,"Content-Type":"application/json"}});if(!l.ok)throw new Error("Invalid token or unauthorized");const c=await l.json();Sb({user:c,token:t.token}),await u4(t.token),ze.success("Successfully connected to Netlify")}catch(l){console.error("Auth error:",l),Lt.logError("Failed to authenticate with Netlify",{error:l}),ze.error("Failed to connect to Netlify"),Sb({user:null,token:""})}finally{I5.set(!1)}},o=()=>{Sb({user:null,token:""}),ze.success("Disconnected from Netlify")};return p.jsx(ot.div,{className:"bg-[#FFFFFF] dark:bg-[#0A0A0A] rounded-lg border border-[#E5E5E5] dark:border-[#1A1A1A]",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:p.jsxs("div",{className:"p-6 space-y-6",children:[p.jsx("div",{className:"flex items-center justify-between",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("img",{className:"w-5 h-5",height:"24",width:"24",crossOrigin:"anonymous",src:"https://cdn.simpleicons.org/netlify"}),p.jsx("h3",{className:"text-base font-medium text-bolt-elements-textPrimary",children:"Netlify Connection"})]})}),t.user?p.jsxs("div",{className:"space-y-6",children:[p.jsx("div",{className:"flex items-center justify-between",children:p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs("button",{onClick:o,className:Pe("px-4 py-2 rounded-lg text-sm flex items-center gap-2","bg-red-500 text-white","hover:bg-red-600"),children:[p.jsx("div",{className:"i-ph:plug w-4 h-4"}),"Disconnect"]}),p.jsxs("span",{className:"text-sm text-bolt-elements-textSecondary flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:check-circle w-4 h-4 text-green-500"}),"Connected to Netlify"]})]})}),p.jsxs("div",{className:"flex items-center gap-4 p-4 bg-[#F8F8F8] dark:bg-[#1A1A1A] rounded-lg",children:[p.jsx("img",{src:t.user.avatar_url,referrerPolicy:"no-referrer",crossOrigin:"anonymous",alt:t.user.full_name,className:"w-12 h-12 rounded-full border-2 border-[#00AD9F]"}),p.jsxs("div",{children:[p.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:t.user.full_name}),p.jsx("p",{className:"text-sm text-bolt-elements-textSecondary",children:t.user.email})]})]}),n?p.jsxs("div",{className:"flex items-center gap-2 text-sm text-bolt-elements-textSecondary",children:[p.jsx("div",{className:"i-ph:spinner-gap w-4 h-4 animate-spin"}),"Fetching Netlify sites..."]}):p.jsxs("div",{children:[p.jsxs("button",{onClick:()=>s(!r),className:"w-full bg-transparent text-left text-sm font-medium text-bolt-elements-textPrimary mb-3 flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:buildings w-4 h-4"}),"Your Sites (",t.stats?.totalSites||0,")",p.jsx("div",{className:Pe("i-ph:caret-down w-4 h-4 ml-auto transition-transform",r?"rotate-180":"")})]}),r&&t.stats?.sites?.length?p.jsx("div",{className:"grid gap-3",children:t.stats.sites.map(a=>p.jsx("a",{href:a.admin_url,target:"_blank",rel:"noopener noreferrer",className:"block p-4 rounded-lg border border-[#E5E5E5] dark:border-[#1A1A1A] hover:border-[#00AD9F] dark:hover:border-[#00AD9F] transition-colors",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsxs("h5",{className:"text-sm font-medium text-bolt-elements-textPrimary flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:globe w-4 h-4 text-[#00AD9F]"}),a.name]}),p.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-bolt-elements-textSecondary",children:[p.jsx("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#00AD9F]",children:a.url}),a.published_deploy&&p.jsxs(p.Fragment,{children:[p.jsx("span",{children:""}),p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:clock w-3 h-3"}),new Date(a.published_deploy.published_at).toLocaleDateString()]})]})]})]}),a.build_settings?.provider&&p.jsx("div",{className:"text-xs text-bolt-elements-textSecondary px-2 py-1 rounded-md bg-[#F0F0F0] dark:bg-[#252525]",children:p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:git-branch w-3 h-3"}),a.build_settings.provider]})})]})},a.id))}):r?p.jsxs("div",{className:"text-sm text-bolt-elements-textSecondary flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:info w-4 h-4"}),"No sites found in your Netlify account"]}):null]})]}):p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm text-bolt-elements-textSecondary mb-2",children:"Personal Access Token"}),p.jsx("input",{type:"password",value:t.token,onChange:a=>Sb({...t,token:a.target.value}),disabled:e,placeholder:"Enter your Netlify personal access token",className:Pe("w-full px-3 py-2 rounded-lg text-sm","bg-[#F8F8F8] dark:bg-[#1A1A1A]","border border-[#E5E5E5] dark:border-[#333333]","text-bolt-elements-textPrimary placeholder-bolt-elements-textTertiary","focus:outline-none focus:ring-1 focus:ring-[#00AD9F]","disabled:opacity-50")}),p.jsx("div",{className:"mt-2 text-sm text-bolt-elements-textSecondary",children:p.jsxs("a",{href:"https://app.netlify.com/user/applications#personal-access-tokens",target:"_blank",rel:"noopener noreferrer",className:"text-[#00AD9F] hover:underline inline-flex items-center gap-1",children:["Get your token",p.jsx("div",{className:"i-ph:arrow-square-out w-4 h-4"})]})})]}),p.jsx("button",{onClick:i,disabled:e||!t.token,className:Pe("px-4 py-2 rounded-lg text-sm flex items-center gap-2","bg-[#00AD9F] text-white","hover:bg-[#00968A]","disabled:opacity-50 disabled:cursor-not-allowed"),children:e?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"i-ph:spinner-gap animate-spin"}),"Connecting..."]}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"i-ph:plug-charging w-4 h-4"}),"Connect"]})})]})]})})}function yHe(){return p.jsxs("div",{className:"space-y-4",children:[p.jsxs(ot.div,{className:"flex items-center gap-2 mb-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[p.jsx("div",{className:"i-ph:plugs-connected w-5 h-5 text-purple-500"}),p.jsx("h2",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:"Connection Settings"})]}),p.jsx("p",{className:"text-sm text-bolt-elements-textSecondary mb-6",children:"Manage your external service connections and integrations"}),p.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[p.jsx(pHe,{}),p.jsx(bHe,{})]})]})}function Sre(t){return Yr({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M.045 18.02c.072-.116.187-.124.348-.022 3.636 2.11 7.594 3.166 11.87 3.166 2.852 0 5.668-.533 8.447-1.595l.315-.14c.138-.06.234-.1.293-.13.226-.088.39-.046.525.13.12.174.09.336-.12.48-.256.19-.6.41-1.006.654-1.244.743-2.64 1.316-4.185 1.726a17.617 17.617 0 01-10.951-.577 17.88 17.88 0 01-5.43-3.35c-.1-.074-.151-.15-.151-.22 0-.047.021-.09.051-.13zm6.565-6.218c0-1.005.247-1.863.743-2.577.495-.71 1.17-1.25 2.04-1.615.796-.335 1.756-.575 2.912-.72.39-.046 1.033-.103 1.92-.174v-.37c0-.93-.105-1.558-.3-1.875-.302-.43-.78-.65-1.44-.65h-.182c-.48.046-.896.196-1.246.46-.35.27-.575.63-.675 1.096-.06.3-.206.465-.435.51l-2.52-.315c-.248-.06-.372-.18-.372-.39 0-.046.007-.09.022-.15.247-1.29.855-2.25 1.82-2.88.976-.616 2.1-.975 3.39-1.05h.54c1.65 0 2.957.434 3.888 1.29.135.15.27.3.405.48.12.165.224.314.283.45.075.134.15.33.195.57.06.254.105.42.135.51.03.104.062.3.076.615.01.313.02.493.02.553v5.28c0 .376.06.72.165 1.036.105.313.21.54.315.674l.51.674c.09.136.136.256.136.36 0 .12-.06.226-.18.314-1.2 1.05-1.86 1.62-1.963 1.71-.165.135-.375.15-.63.045a6.062 6.062 0 01-.526-.496l-.31-.347a9.391 9.391 0 01-.317-.42l-.3-.435c-.81.886-1.603 1.44-2.4 1.665-.494.15-1.093.227-1.83.227-1.11 0-2.04-.343-2.76-1.034-.72-.69-1.08-1.665-1.08-2.94l-.05-.076zm3.753-.438c0 .566.14 1.02.425 1.364.285.34.675.512 1.155.512.045 0 .106-.007.195-.02.09-.016.134-.023.166-.023.614-.16 1.08-.553 1.424-1.178.165-.28.285-.58.36-.91.09-.32.12-.59.135-.8.015-.195.015-.54.015-1.005v-.54c-.84 0-1.484.06-1.92.18-1.275.36-1.92 1.17-1.92 2.43l-.035-.02zm9.162 7.027c.03-.06.075-.11.132-.17.362-.243.714-.41 1.05-.5a8.094 8.094 0 011.612-.24c.14-.012.28 0 .41.03.65.06 1.05.168 1.172.33.063.09.099.228.099.39v.15c0 .51-.149 1.11-.424 1.8-.278.69-.664 1.248-1.156 1.68-.073.06-.14.09-.197.09-.03 0-.06 0-.09-.012-.09-.044-.107-.12-.064-.24.54-1.26.806-2.143.806-2.64 0-.15-.03-.27-.087-.344-.145-.166-.55-.257-1.224-.257-.243 0-.533.016-.87.046-.363.045-.7.09-1 .135-.09 0-.148-.014-.18-.044-.03-.03-.036-.047-.02-.077 0-.017.006-.03.02-.063v-.06z"},child:[]}]})(t)}function kre(t){return Yr({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"},child:[]}]})(t)}function Cre(t){return Yr({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M1.4446 11.5059c0 1.1021.1673 2.1585.4847 3.1563-.0378-.0028-.0691-.0058-.1058-.0058-.4209 0-.8015.16-1.0704.4512-.3454.3737-.4984.8335-.4316 1.293a1.576 1.576 0 0 0 .2148.5978c-.2319.1864-.4018.4456-.4844.7578-.0646.2448-.131.7543.2149 1.2794a1.4552 1.4552 0 0 0-.0625.1055c-.208.3923-.2207.8372-.0371 1.25.2783.6258.9696 1.1175 2.3126 1.6467.8356.3292 1.5988.5411 1.6056.543 1.1046.2847 2.104.4277 2.969.4277 1.4173 0 2.4754-.3849 3.1525-1.1446 1.538.2651 2.791.1403 3.592.006.6773.7555 1.7332 1.1387 3.1467 1.1387.8649 0 1.8643-.143 2.969-.4278.0068-.0019.77-.2138 1.6056-.543 1.343-.5292 2.0343-1.0208 2.3126-1.6466.1836-.4129.171-.8577-.037-1.25a1.4685 1.4685 0 0 0-.0626-.1056c.346-.525.2795-1.0346.2149-1.2793-.0826-.3122-.2525-.5714-.4844-.7579.11-.1816.1831-.3788.2148-.5977.0669-.4595-.0862-.9193-.4316-1.293-.2688-.2913-.6495-.4513-1.0704-.4513-.0209 0-.0376.0008-.0588.0018.3162-.9966.4846-2.0518.4846-3.1523 0-5.807-4.7362-10.5144-10.5789-10.5144-5.8426 0-10.5788 4.7073-10.5788 10.5144Zm10.5788-9.4831c5.2727 0 9.5476 4.246 9.5476 9.483a9.4201 9.4201 0 0 1-.2696 2.2365c-.0039-.0047-.0079-.011-.0117-.0156-.274-.3255-.6679-.5059-1.1075-.5059-.352 0-.714.1155-1.0763.3438-.2403.1517-.5058.422-.7793.7598-.2534-.3492-.608-.5832-1.0137-.6465a1.5174 1.5174 0 0 0-.2344-.0176c-.9263 0-1.4828.7993-1.6935 1.5177-.1046.2426-.6065 1.3482-1.3614 2.0978-1.1681 1.1601-1.4458 2.3534-.8396 3.6382-.843.1029-1.5836.0927-2.365-.006.5906-1.212.3626-2.4388-.8426-3.6322-.755-.7496-1.2568-1.8552-1.3614-2.0978-.2107-.7184-.7673-1.5177-1.6935-1.5177-.078 0-.1568.0054-.2344.0176-.4057.0633-.7604.2973-1.0137.6465-.2735-.3379-.539-.6081-.7794-.7598-.3622-.2283-.7243-.3438-1.0762-.3438-.4266 0-.8094.171-1.0821.4786a9.4208 9.4208 0 0 1-.2598-2.1936c0-5.237 4.2749-9.483 9.5475-9.483zM8.6443 7.0036c-.4838.0043-.9503.2667-1.1934.7227-.3536.6633-.1006 1.4873.5645 1.84.351.1862.4883-.5261.836-.6485.3107-.1095.841.399 1.0078.086.3536-.6634.1025-1.4874-.5625-1.84a1.3659 1.3659 0 0 0-.6524-.1602Zm6.8403 0c-.2199-.002-.4426.05-.6504.1602-.665.3526-.9181 1.1766-.5645 1.84.1669.313.6971-.1955 1.0079-.086.3476.1224.4867.8347.838.6485.6649-.3527.916-1.1767.5624-1.84-.243-.456-.7096-.7184-1.1934-.7227Zm-9.7565 1.418a.8768.8768 0 0 0-.877.877c0 .4846.3925.877.877.877a.8768.8768 0 0 0 .877-.877.8768.8768 0 0 0-.877-.877zm12.6434 0c-.4845 0-.879.3925-.879.877 0 .4846.3945.877.879.877a.8768.8768 0 0 0 .877-.877.8768.8768 0 0 0-.877-.877zM8.7927 11.459c-.179-.003-.2793.1107-.2793.416 0 .8097.3874 2.125 1.4279 2.924.207-.7123 1.3453-1.2832 1.5079-1.2012.2315.1167.2191.4417.6074.7266.3884-.285.374-.6098.6056-.7266.1627-.082 1.3009.4889 1.5079 1.2012 1.0404-.799 1.4278-2.1144 1.4278-2.924 0-1.2212-1.583.6402-3.5413.6485-1.4686-.0061-2.7266-1.0558-3.2639-1.0645zM4.312 14.4768c.5792.365 1.6964 2.2751 2.1056 3.0177.1371.2488.371.3536.582.3536.4188 0 .7465-.4138.0391-.9395-1.0636-.791-.6914-2.0846-.1836-2.1642a.4302.4302 0 0 1 .0664-.004c.4616 0 .666.7892.666.7892s.5959 1.4898 1.6213 2.508c.942.9356 1.062 1.703.4961 2.6661-.0164-.004-.0159.0236-.1484.2149-.1853.2673-.4322.4688-.7188.6152-.5062.2269-1.1397.2696-1.7833.2696-1.037 0-2.1017-.1824-2.6975-.336-.0293-.0075-3.6505-.9567-3.1916-1.8224.0771-.1454.2033-.2031.3633-.2031.6463 0 1.823.9551 2.3283.9551.113 0 .196-.0865.2285-.2031.2249-.8045-3.2787-1.0522-2.9846-2.1642.0519-.1967.193-.2757.3907-.2754.854 0 2.7704 1.4923 3.172 1.4923.0307 0 .0525-.0085.0645-.0274.2012-.3227.1096-.5865-1.3087-1.4395-1.4182-.8533-2.4315-1.329-1.8653-1.9416.0651-.0707.1574-.1015.2695-.1015.8611.0002 2.8948 1.84 2.8948 1.84s.5487.5683.8809.5683c.0762 0 .1416-.0315.1855-.1054.2355-.3946-2.1858-2.2183-2.3224-2.971-.0926-.51.0641-.7676.3555-.7676-.0006.008.1701-.0285.4942.1759zm16.2257.5918c-.1366.7526-2.5579 2.5764-2.3224 2.9709.044.074.1092.1055.1855.1055.3321 0 .881-.5684.881-.5684s2.0336-1.8397 2.8947-1.84c.1121 0 .2044.0308.2695.1016.5662.6125-.447 1.0882-1.8653 1.9415-1.4183.853-1.51 1.1168-1.3087 1.4396.012.0188.0337.0273.0644.0273.4016 0 2.3181-1.4923 3.1721-1.4923.1977-.0002.3388.0787.3907.2754.294 1.112-3.2095 1.3597-2.9846 2.1642.0325.1166.1156.2032.2285.2032.5054 0 1.682-.9552 2.3283-.9552.16 0 .2862.0577.3633.2032.459.8656-3.1623 1.8149-3.1916 1.8224-.5958.1535-1.6605.336-2.6975.336-.6351 0-1.261-.0409-1.7638-.2599-.2949-.1472-.5488-.3516-.7383-.625-.0411-.0682-.1026-.1476-.1426-.205-.5726-.9679-.455-1.7371.4903-2.676 1.0254-1.0182 1.6212-2.508 1.6212-2.508s.2044-.7891.666-.7891a.4318.4318 0 0 1 .0665.0039c.5078.0796.88 1.3732-.1836 2.1642-.7074.5257-.3797.9395.039.9395.211 0 .445-.1047.5821-.3535.4092-.7426 1.5264-2.6527 2.1056-3.0178.5588-.3524.99-.1816.8497.5918z"},child:[]}]})(t)}function Are(t){return Yr({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M22.2819 9.8211a5.9847 5.9847 0 0 0-.5157-4.9108 6.0462 6.0462 0 0 0-6.5098-2.9A6.0651 6.0651 0 0 0 4.9807 4.1818a5.9847 5.9847 0 0 0-3.9977 2.9 6.0462 6.0462 0 0 0 .7427 7.0966 5.98 5.98 0 0 0 .511 4.9107 6.051 6.051 0 0 0 6.5146 2.9001A5.9847 5.9847 0 0 0 13.2599 24a6.0557 6.0557 0 0 0 5.7718-4.2058 5.9894 5.9894 0 0 0 3.9977-2.9001 6.0557 6.0557 0 0 0-.7475-7.0729zm-9.022 12.6081a4.4755 4.4755 0 0 1-2.8764-1.0408l.1419-.0804 4.7783-2.7582a.7948.7948 0 0 0 .3927-.6813v-6.7369l2.02 1.1686a.071.071 0 0 1 .038.052v5.5826a4.504 4.504 0 0 1-4.4945 4.4944zm-9.6607-4.1254a4.4708 4.4708 0 0 1-.5346-3.0137l.142.0852 4.783 2.7582a.7712.7712 0 0 0 .7806 0l5.8428-3.3685v2.3324a.0804.0804 0 0 1-.0332.0615L9.74 19.9502a4.4992 4.4992 0 0 1-6.1408-1.6464zM2.3408 7.8956a4.485 4.485 0 0 1 2.3655-1.9728V11.6a.7664.7664 0 0 0 .3879.6765l5.8144 3.3543-2.0201 1.1685a.0757.0757 0 0 1-.071 0l-4.8303-2.7865A4.504 4.504 0 0 1 2.3408 7.872zm16.5963 3.8558L13.1038 8.364 15.1192 7.2a.0757.0757 0 0 1 .071 0l4.8303 2.7913a4.4944 4.4944 0 0 1-.6765 8.1042v-5.6772a.79.79 0 0 0-.407-.667zm2.0107-3.0231l-.142-.0852-4.7735-2.7818a.7759.7759 0 0 0-.7854 0L9.409 9.2297V6.8974a.0662.0662 0 0 1 .0284-.0615l4.8303-2.7866a4.4992 4.4992 0 0 1 6.6802 4.66zM8.3065 12.863l-2.02-1.1638a.0804.0804 0 0 1-.038-.0567V6.0742a4.4992 4.4992 0 0 1 7.3757-3.4537l-.142.0805L8.704 5.459a.7948.7948 0 0 0-.3927.6813zm1.0976-2.3654l2.602-1.4998 2.6069 1.4998v2.9994l-2.5974 1.4997-2.6067-1.4997Z"},child:[]}]})(t)}function Tre(t){return Yr({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M22.3977 7.0896h-2.3106V.0676l-7.5094 6.3542V.1577h-1.1554v6.1966L4.4904 0v7.0896H1.6023v10.3976h2.8882V24l6.932-6.3591v6.2005h1.1554v-6.0469l6.9318 6.1807v-6.4879h2.8882V7.0896zm-3.4657-4.531v4.531h-5.355l5.355-4.531zm-13.2862.0676 4.8691 4.4634H5.6458V2.6262zM2.7576 16.332V8.245h7.8476l-6.1149 6.1147v1.9723H2.7576zm2.8882 5.0404v-3.8852h.0001v-2.6488l5.7763-5.7764v7.0111l-5.7764 5.2993zm12.7086.0248-5.7766-5.1509V9.0618l5.7766 5.7766v6.5588zm2.8882-5.0652h-1.733v-1.9723L13.3948 8.245h7.8478v8.087z"},child:[]}]})(t)}function vHe(t){return Yr({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"},child:[]}]})(t)}function lS(t){return Yr({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M4.406 3.342A5.53 5.53 0 0 1 8 2c2.69 0 4.923 2 5.166 4.579C14.758 6.804 16 8.137 16 9.773 16 11.569 14.502 13 12.687 13H3.781C1.708 13 0 11.366 0 9.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383m.653.757c-.757.653-1.153 1.44-1.153 2.056v.448l-.445.049C2.064 6.805 1 7.952 1 9.318 1 10.785 2.23 12 3.781 12h8.906C13.98 12 15 10.988 15 9.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 4.825 10.328 3 8 3a4.53 4.53 0 0 0-2.941 1.1z"},child:[]}]})(t)}function _He(t){return Yr({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4m.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2"},child:[]}]})(t)}function xf(t){return Yr({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M6 12.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5M3 8.062C3 6.76 4.235 5.765 5.53 5.886a26.6 26.6 0 0 0 4.94 0C11.765 5.765 13 6.76 13 8.062v1.157a.93.93 0 0 1-.765.935c-.845.147-2.34.346-4.235.346s-3.39-.2-4.235-.346A.93.93 0 0 1 3 9.219zm4.542-.827a.25.25 0 0 0-.217.068l-.92.9a25 25 0 0 1-1.871-.183.25.25 0 0 0-.068.495c.55.076 1.232.149 2.02.193a.25.25 0 0 0 .189-.071l.754-.736.847 1.71a.25.25 0 0 0 .404.062l.932-.97a25 25 0 0 0 1.922-.188.25.25 0 0 0-.068-.495c-.538.074-1.207.145-1.98.189a.25.25 0 0 0-.166.076l-.754.785-.842-1.7a.25.25 0 0 0-.182-.135"},child:[]},{tag:"path",attr:{d:"M8.5 1.866a1 1 0 1 0-1 0V3h-2A4.5 4.5 0 0 0 1 7.5V8a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1v1a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-1a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1v-.5A4.5 4.5 0 0 0 10.5 3h-2zM14 7.5V13a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7.5A3.5 3.5 0 0 1 5.5 4h5A3.5 3.5 0 0 1 14 7.5"},child:[]}]})(t)}function Y9(t){return Yr({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293z"},child:[]}]})(t)}function m6(t){return Yr({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M9 9h6v6H9z"},child:[]},{tag:"path",attr:{d:"M20 6c0-1.103-.897-2-2-2h-2V2h-2v2h-4V2H8v2H6c-1.103 0-2 .897-2 2v2H2v2h2v4H2v2h2v2c0 1.103.897 2 2 2h2v2h2v-2h4v2h2v-2h2c1.103 0 2-.897 2-2v-2h2v-2h-2v-4h2V8h-2V6zM6 18V6h12l.002 12H6z"},child:[]}]})(t)}function Nre(t){return Yr({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20 3H4c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h16c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2zM4 19V7h16l.002 12H4z"},child:[]},{tag:"path",attr:{d:"M9.293 9.293 5.586 13l3.707 3.707 1.414-1.414L8.414 13l2.293-2.293zm5.414 0-1.414 1.414L15.586 13l-2.293 2.293 1.414 1.414L18.414 13z"},child:[]}]})(t)}function Pre(t){return Yr({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M208 0c-29.9 0-54.7 20.5-61.8 48.2-.8 0-1.4-.2-2.2-.2-35.3 0-64 28.7-64 64 0 4.8.6 9.5 1.7 14C52.5 138 32 166.6 32 200c0 12.6 3.2 24.3 8.3 34.9C16.3 248.7 0 274.3 0 304c0 33.3 20.4 61.9 49.4 73.9-.9 4.6-1.4 9.3-1.4 14.1 0 39.8 32.2 72 72 72 4.1 0 8.1-.5 12-1.2 9.6 28.5 36.2 49.2 68 49.2 39.8 0 72-32.2 72-72V64c0-35.3-28.7-64-64-64zm368 304c0-29.7-16.3-55.3-40.3-69.1 5.2-10.6 8.3-22.3 8.3-34.9 0-33.4-20.5-62-49.7-74 1-4.5 1.7-9.2 1.7-14 0-35.3-28.7-64-64-64-.8 0-1.5.2-2.2.2C422.7 20.5 397.9 0 368 0c-35.3 0-64 28.6-64 64v376c0 39.8 32.2 72 72 72 31.8 0 58.4-20.7 68-49.2 3.9.7 7.9 1.2 12 1.2 39.8 0 72-32.2 72-72 0-4.8-.5-9.5-1.4-14.1 29-12 49.4-40.6 49.4-73.9z"},child:[]}]})(t)}function Ire(t){return Yr({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M537.6 226.6c4.1-10.7 6.4-22.4 6.4-34.6 0-53-43-96-96-96-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32c-88.4 0-160 71.6-160 160 0 2.7.1 5.4.2 8.1C40.2 219.8 0 273.2 0 336c0 79.5 64.5 144 144 144h368c70.7 0 128-57.3 128-128 0-61.9-44-113.6-102.4-125.4z"},child:[]}]})(t)}const xHe={AmazonBedrock:Sre,Anthropic:Pre,Cohere:m6,Deepseek:Nre,Google:kre,Groq:lS,HuggingFace:Cre,Hyperbolic:UJ,Mistral:BJ,OpenAI:Are,OpenRouter:Ire,Perplexity:Tre,Together:lS,XAI:xf},wHe={Anthropic:"Access Claude and other Anthropic models",OpenAI:"Use GPT-4, GPT-3.5, and other OpenAI models"},EHe=()=>{const t=jd(),[e,n]=T.useState(null),[r,s]=T.useState([]),[i,o]=T.useState(!1);T.useEffect(()=>{const u=Object.entries(t.providers||{}).filter(([f])=>!["Ollama","LMStudio","OpenAILike"].includes(f)).map(([f,g])=>({name:f,settings:g.settings,staticModels:g.staticModels||[],getDynamicModels:g.getDynamicModels,getApiKeyLink:g.getApiKeyLink,labelForGetApiKey:g.labelForGetApiKey,icon:g.icon})),d=u.sort((f,g)=>f.name.localeCompare(g.name));s(d);const h=u.every(f=>f.settings.enabled);o(h)},[t.providers]);const a=T.useCallback(u=>{r.forEach(d=>{t.updateProviderSettings(d.name,{...d.settings,enabled:u})}),o(u),ze.success(u?"All cloud providers enabled":"All cloud providers disabled")},[r,t]),l=T.useCallback((u,d)=>{t.updateProviderSettings(u.name,{...u.settings,enabled:d}),d?(Lt.logProvider(`Provider ${u.name} enabled`,{provider:u.name}),ze.success(`${u.name} enabled`)):(Lt.logProvider(`Provider ${u.name} disabled`,{provider:u.name}),ze.success(`${u.name} disabled`))},[t]),c=T.useCallback((u,d)=>{const h=d.trim()||void 0;t.updateProviderSettings(u.name,{...u.settings,baseUrl:h}),Lt.logProvider(`Base URL updated for ${u.name}`,{provider:u.name,baseUrl:h}),ze.success(`${u.name} base URL updated`),n(null)},[t]);return p.jsx("div",{className:"space-y-6",children:p.jsxs(ot.div,{className:"space-y-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[p.jsxs("div",{className:"flex items-center justify-between gap-4 mt-8 mb-4",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:Pe("w-8 h-8 flex items-center justify-center rounded-lg","bg-bolt-elements-background-depth-3","text-blue-500"),children:p.jsx(UJ,{className:"w-5 h-5"})}),p.jsxs("div",{children:[p.jsx("h4",{className:"text-md font-medium text-bolt-elements-textPrimary",children:"Cloud Providers"}),p.jsx("p",{className:"text-sm text-bolt-elements-textSecondary",children:"Connect to cloud-based AI models and services"})]})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:"Enable All Cloud"}),p.jsx(Fo,{checked:i,onCheckedChange:a})]})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map((u,d)=>p.jsxs(ot.div,{className:Pe("rounded-lg border bg-bolt-elements-background text-bolt-elements-textPrimary shadow-sm","bg-bolt-elements-background-depth-2","hover:bg-bolt-elements-background-depth-3","transition-all duration-200","relative overflow-hidden group","flex flex-col"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:d*.1},whileHover:{scale:1.02},children:[p.jsx("div",{className:"absolute top-0 right-0 p-2 flex gap-1",children:Zb.includes(u.name)&&p.jsx(ot.span,{className:"px-2 py-0.5 text-xs rounded-full bg-blue-500/10 text-blue-500 font-medium",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Configurable"})}),p.jsxs("div",{className:"flex items-start gap-4 p-4",children:[p.jsx(ot.div,{className:Pe("w-10 h-10 flex items-center justify-center rounded-xl","bg-bolt-elements-background-depth-3 group-hover:bg-bolt-elements-background-depth-4","transition-all duration-200",u.settings.enabled?"text-blue-500":"text-bolt-elements-textSecondary"),whileHover:{scale:1.1},whileTap:{scale:.9},children:p.jsx("div",{className:Pe("w-6 h-6","transition-transform duration-200","group-hover:rotate-12"),children:ut.createElement(xHe[u.name]||xf,{className:"w-full h-full","aria-label":`${u.name} logo`})})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsxs("div",{className:"flex items-center justify-between gap-4 mb-2",children:[p.jsxs("div",{children:[p.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary group-hover:text-blue-500 transition-colors",children:u.name}),p.jsx("p",{className:"text-xs text-bolt-elements-textSecondary mt-0.5",children:wHe[u.name]||(Zb.includes(u.name)?"Configure custom endpoint for this provider":"Standard AI provider integration")})]}),p.jsx(Fo,{checked:u.settings.enabled,onCheckedChange:h=>l(u,h)})]}),u.settings.enabled&&Zb.includes(u.name)&&p.jsxs(ot.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:[p.jsx("div",{className:"flex items-center gap-2 mt-4",children:e===u.name?p.jsx("input",{type:"text",defaultValue:u.settings.baseUrl,placeholder:`Enter ${u.name} base URL`,className:Pe("flex-1 px-3 py-1.5 rounded-lg text-sm","bg-bolt-elements-background-depth-3 border border-bolt-elements-borderColor","text-bolt-elements-textPrimary placeholder-bolt-elements-textTertiary","focus:outline-none focus:ring-2 focus:ring-blue-500/30","transition-all duration-200"),onKeyDown:h=>{h.key==="Enter"?c(u,h.currentTarget.value):h.key==="Escape"&&n(null)},onBlur:h=>c(u,h.target.value),autoFocus:!0}):p.jsx("div",{className:"flex-1 px-3 py-1.5 rounded-lg text-sm cursor-pointer group/url",onClick:()=>n(u.name),children:p.jsxs("div",{className:"flex items-center gap-2 text-bolt-elements-textSecondary",children:[p.jsx("div",{className:"i-ph:link text-sm"}),p.jsx("span",{className:"group-hover/url:text-blue-500 transition-colors",children:u.settings.baseUrl||"Click to set base URL"})]})})}),ML[u.name]?.baseUrlKey&&p.jsx("div",{className:"mt-2 text-xs text-green-500",children:p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:info"}),p.jsx("span",{children:"Environment URL set in .env file"})]})})]})]})]}),p.jsx(ot.div,{className:"absolute inset-0 border-2 border-blue-500/0 rounded-lg pointer-events-none",animate:{borderColor:u.settings.enabled?"rgba(59, 130, 246, 0.2)":"rgba(59, 130, 246, 0)",scale:u.settings.enabled?1:.98},transition:{duration:.2}})]},u.name))})]})})};function g6(){const t=T.useCallback((r,s={})=>{const{type:i="info",duration:o=3e3}=s;ze[i](r,{position:"bottom-right",autoClose:o,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark"})},[]),e=T.useCallback((r,s={})=>{t(r,{...s,type:"success"})},[t]),n=T.useCallback((r,s={})=>{t(r,{...s,type:"error"})},[t]);return{toast:t,success:e,error:n}}const SHe={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},Vx={OpenAI:{statusUrl:"https://status.openai.com/",apiUrl:"https://api.openai.com/v1/models",headers:{Authorization:"Bearer $OPENAI_API_KEY"},testModel:"gpt-3.5-turbo"},Anthropic:{statusUrl:"https://status.anthropic.com/",apiUrl:"https://api.anthropic.com/v1/messages",headers:{"x-api-key":"$ANTHROPIC_API_KEY","anthropic-version":"2024-02-29"},testModel:"claude-3-sonnet-20240229"},Cohere:{statusUrl:"https://status.cohere.com/",apiUrl:"https://api.cohere.ai/v1/models",headers:{Authorization:"Bearer $COHERE_API_KEY"},testModel:"command"},Google:{statusUrl:"https://status.cloud.google.com/",apiUrl:"https://generativelanguage.googleapis.com/v1/models",headers:{"x-goog-api-key":"$GOOGLE_API_KEY"},testModel:"gemini-pro"},HuggingFace:{statusUrl:"https://status.huggingface.co/",apiUrl:"https://api-inference.huggingface.co/models",headers:{Authorization:"Bearer $HUGGINGFACE_API_KEY"},testModel:"mistralai/Mixtral-8x7B-Instruct-v0.1"},Mistral:{statusUrl:"https://status.mistral.ai/",apiUrl:"https://api.mistral.ai/v1/models",headers:{Authorization:"Bearer $MISTRAL_API_KEY"},testModel:"mistral-tiny"},Perplexity:{statusUrl:"https://status.perplexity.com/",apiUrl:"https://api.perplexity.ai/v1/models",headers:{Authorization:"Bearer $PERPLEXITY_API_KEY"},testModel:"pplx-7b-chat"},Together:{statusUrl:"https://status.together.ai/",apiUrl:"https://api.together.xyz/v1/models",headers:{Authorization:"Bearer $TOGETHER_API_KEY"},testModel:"mistralai/Mixtral-8x7B-Instruct-v0.1"},AmazonBedrock:{statusUrl:"https://health.aws.amazon.com/health/status",apiUrl:"https://bedrock.us-east-1.amazonaws.com/models",headers:{Authorization:"Bearer $AWS_BEDROCK_CONFIG"},testModel:"anthropic.claude-3-sonnet-20240229-v1:0"},Groq:{statusUrl:"https://groqstatus.com/",apiUrl:"https://api.groq.com/v1/models",headers:{Authorization:"Bearer $GROQ_API_KEY"},testModel:"mixtral-8x7b-32768"},OpenRouter:{statusUrl:"https://status.openrouter.ai/",apiUrl:"https://openrouter.ai/api/v1/models",headers:{Authorization:"Bearer $OPEN_ROUTER_API_KEY"},testModel:"anthropic/claude-3-sonnet"},XAI:{statusUrl:"https://status.x.ai/",apiUrl:"https://api.x.ai/v1/models",headers:{Authorization:"Bearer $XAI_API_KEY"},testModel:"grok-1"},Deepseek:{statusUrl:"https://status.deepseek.com/",apiUrl:"https://api.deepseek.com/v1/models",headers:{Authorization:"Bearer $DEEPSEEK_API_KEY"},testModel:"deepseek-chat"}},Wx={AmazonBedrock:Sre,Anthropic:Pre,Cohere:m6,Google:kre,Groq:lS,HuggingFace:Cre,Mistral:BJ,OpenAI:Are,OpenRouter:Ire,Perplexity:Tre,Together:lS,XAI:xf,Deepseek:Nre},Rre=()=>{const[t,e]=T.useState([]),[n,r]=T.useState(!0),[s,i]=T.useState(new Date),[o,a]=T.useState(""),[l,c]=T.useState(""),[u,d]=T.useState("idle"),h=jd(),{success:f,error:g}=g6(),y=T.useCallback(x=>{if(!h.providers)return null;const R={OpenAI:"OPENAI_API_KEY",Anthropic:"ANTHROPIC_API_KEY",Cohere:"COHERE_API_KEY",Google:"GOOGLE_GENERATIVE_AI_API_KEY",HuggingFace:"HuggingFace_API_KEY",Mistral:"MISTRAL_API_KEY",Perplexity:"PERPLEXITY_API_KEY",Together:"TOGETHER_API_KEY",AmazonBedrock:"AWS_BEDROCK_CONFIG",Groq:"GROQ_API_KEY",OpenRouter:"OPEN_ROUTER_API_KEY",XAI:"XAI_API_KEY",Deepseek:"DEEPSEEK_API_KEY"}[x];if(!R)return null;const C=SHe[R]||null;return x==="Together"&&C?null:C},[h.providers]),m=T.useCallback(x=>{const I=Vx[x];return I?{...I}:null},[]),b=T.useCallback(async(x,I,R)=>{try{const C=new AbortController,N=setTimeout(()=>C.abort(),1e4),O=performance.now(),P={"Content-Type":"application/json",...I},$=await fetch(x,{method:"GET",headers:P,signal:C.signal}),J=performance.now()-O;clearTimeout(N);const Z=await $.json();if(!$.ok){let F=`API returned status: ${$.status}`;return Z.error?.message?F=Z.error.message:Z.message&&(F=Z.message),{ok:!1,status:$.status,message:F,responseTime:J}}let M=[];return Array.isArray(Z)?M=Z.map(F=>F.id||F.name||""):Z.data&&Array.isArray(Z.data)?M=Z.data.map(F=>F.id||F.name||""):Z.models&&Array.isArray(Z.models)?M=Z.models.map(F=>F.id||F.name||""):Z.model&&(M=[Z.model]),!R||M.length>0?{ok:!0,status:$.status,responseTime:J,message:"API key is valid"}:R&&!M.includes(R)?{ok:!0,status:"model_not_found",message:`API key is valid (test model ${R} not found in ${M.length} available models)`,responseTime:J}:{ok:!0,status:$.status,message:"API key is valid",responseTime:J}}catch(C){return console.error(`Error checking API endpoint ${x}:`,C),{ok:!1,status:C instanceof Error?C.message:"Unknown error",message:C instanceof Error?`Connection failed: ${C.message}`:"Connection failed",responseTime:0}}},[y]),v=T.useCallback(async x=>{try{const I=async R=>{try{return(await fetch(R,{mode:"no-cors",headers:{Accept:"text/html"}})).type==="opaque"?"reachable":"unreachable"}catch(C){return console.error(`Error checking ${R}:`,C),"unreachable"}};switch(x){case"HuggingFace":{const R=await I("https://status.huggingface.co/"),N=await I("https://api-inference.huggingface.co/models");return{status:R==="reachable"&&N==="reachable"?"operational":"degraded",message:`Status page: ${R}, API: ${N}`,incidents:["Note: Limited status information due to CORS restrictions"]}}case"OpenAI":{const R=await I("https://status.openai.com/"),N=await I("https://api.openai.com/v1/models");return{status:R==="reachable"&&N==="reachable"?"operational":"degraded",message:`Status page: ${R}, API: ${N}`,incidents:["Note: Limited status information due to CORS restrictions"]}}case"Google":{const R=await I("https://status.cloud.google.com/"),N=await I("https://generativelanguage.googleapis.com/v1/models");return{status:R==="reachable"&&N==="reachable"?"operational":"degraded",message:`Status page: ${R}, API: ${N}`,incidents:["Note: Limited status information due to CORS restrictions"]}}default:return{status:"operational",message:"Basic reachability check only",incidents:["Note: Limited status information due to CORS restrictions"]}}}catch(I){return console.error(`Error fetching status for ${x}:`,I),{status:"degraded",message:"Unable to fetch status due to CORS restrictions",incidents:["Error: Unable to check service status"]}}},[]),_=T.useCallback(async(x,I)=>{const N=async O=>{try{if(["Anthropic","OpenAI","Google","HuggingFace","Mistral","Groq","Perplexity","Together"].includes(x)){const G=await v(x);return{provider:x,status:G.status,lastChecked:new Date().toISOString(),statusUrl:I.statusUrl,icon:Wx[x],message:G.message,incidents:G.incidents}}const $=y(x),ee=m(x);if(!$||!ee)return{provider:x,status:"operational",lastChecked:new Date().toISOString(),statusUrl:I.statusUrl,icon:Wx[x],message:$?"Status operational (configuration needed for usage)":"Status operational (API key needed for usage)",incidents:[]};const{ok:J,status:Z,message:M,responseTime:F}=await b(ee.apiUrl,ee.headers,ee.testModel);return!J&&O<2?(await new Promise(G=>setTimeout(G,2e3)),N(O+1)):{provider:x,status:J?"operational":"degraded",lastChecked:new Date().toISOString(),statusUrl:ee.statusUrl,icon:Wx[x],message:J?"Service and API operational":`Service operational (API: ${M||Z})`,responseTime:F,incidents:[]}}catch(P){return console.error(`Error fetching status for ${x} (attempt ${O}):`,P),O<2?(await new Promise($=>setTimeout($,2e3)),N(O+1)):{provider:x,status:"degraded",lastChecked:new Date().toISOString(),statusUrl:I.statusUrl,icon:Wx[x],message:"Service operational (Status check error)",responseTime:0,incidents:[]}}};return N(1)},[b,y,m,v]),E=T.useCallback(async()=>{try{r(!0);const x=await Promise.all(Object.entries(Vx).map(([I,R])=>_(I,R)));e(x.sort((I,R)=>I.provider.localeCompare(R.provider))),i(new Date),f("Service statuses updated successfully")}catch(x){console.error("Error fetching all statuses:",x),g("Failed to update service statuses")}finally{r(!1)}},[_,f,g]);T.useEffect(()=>{E();const x=setInterval(E,2*60*1e3);return()=>clearInterval(x)},[E]);const w=T.useCallback(async(x,I)=>{try{d("testing");const R=Vx[x];if(!R)throw new Error("Provider configuration not found");const C={...R.headers};switch(Object.keys(C).forEach(P=>{C[P].startsWith("$")&&(C[P]=C[P].replace(/\$.*/,I))}),x){case"Anthropic":C["anthropic-version"]="2024-02-29";break;case"OpenAI":C.Authorization?.startsWith("Bearer ")||(C.Authorization=`Bearer ${I}`);break;case"Google":{const P=`${R.apiUrl}?key=${I}`,$=await b(P,{},R.testModel);$.ok?(d("success"),f("API key is valid!")):(d("error"),g(`API key test failed: ${$.message}`));return}}const{ok:N,message:O}=await b(R.apiUrl,C,R.testModel);N?(d("success"),f("API key is valid!")):(d("error"),g(`API key test failed: ${O}`))}catch(R){d("error"),g("Failed to test API key: "+(R instanceof Error?R.message:"Unknown error"))}finally{setTimeout(()=>d("idle"),3e3)}},[b,f,g]),S=x=>{switch(x){case"operational":return"text-green-500";case"degraded":return"text-yellow-500";case"down":return"text-red-500";default:return"text-gray-500"}},k=x=>{switch(x){case"operational":return p.jsx(vHe,{className:"w-4 h-4"});case"degraded":return p.jsx(_He,{className:"w-4 h-4"});case"down":return p.jsx(Y9,{className:"w-4 h-4"});default:return p.jsx(Y9,{className:"w-4 h-4"})}};return p.jsx("div",{className:"space-y-6",children:p.jsxs(ot.div,{className:"space-y-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[p.jsxs("div",{className:"flex items-center justify-between gap-2 mt-8 mb-4",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:Pe("w-8 h-8 flex items-center justify-center rounded-lg","bg-bolt-elements-background-depth-3","text-blue-500"),children:p.jsx(MAe,{className:"w-5 h-5"})}),p.jsxs("div",{children:[p.jsx("h4",{className:"text-md font-medium text-bolt-elements-textPrimary",children:"Service Status"}),p.jsx("p",{className:"text-sm text-bolt-elements-textSecondary",children:"Monitor and test the operational status of cloud LLM providers"})]})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("span",{className:"text-sm text-bolt-elements-textSecondary",children:["Last updated: ",s.toLocaleTimeString()]}),p.jsxs("button",{onClick:()=>E(),className:Pe("px-3 py-1.5 rounded-lg text-sm","bg-bolt-elements-background-depth-3 hover:bg-bolt-elements-background-depth-4","text-bolt-elements-textPrimary","transition-all duration-200","flex items-center gap-2",n?"opacity-50 cursor-not-allowed":""),disabled:n,children:[p.jsx("div",{className:`i-ph:arrows-clockwise w-4 h-4 ${n?"animate-spin":""}`}),p.jsx("span",{children:n?"Refreshing...":"Refresh"})]})]})]}),p.jsxs("div",{className:"p-4 bg-bolt-elements-background-depth-2 rounded-lg",children:[p.jsx("h5",{className:"text-sm font-medium text-bolt-elements-textPrimary mb-2",children:"Test API Key"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs("select",{value:l,onChange:x=>c(x.target.value),className:Pe("flex-1 px-3 py-1.5 rounded-lg text-sm max-w-[200px]","bg-bolt-elements-background-depth-3 border border-bolt-elements-borderColor","text-bolt-elements-textPrimary","focus:outline-none focus:ring-2 focus:ring-blue-500/30"),children:[p.jsx("option",{value:"",children:"Select Provider"}),Object.keys(Vx).map(x=>p.jsx("option",{value:x,children:x},x))]}),p.jsx("input",{type:"password",value:o,onChange:x=>a(x.target.value),placeholder:"Enter API key to test",className:Pe("flex-1 px-3 py-1.5 rounded-lg text-sm","bg-bolt-elements-background-depth-3 border border-bolt-elements-borderColor","text-bolt-elements-textPrimary placeholder-bolt-elements-textTertiary","focus:outline-none focus:ring-2 focus:ring-blue-500/30")}),p.jsx("button",{onClick:()=>l&&o&&w(l,o),disabled:!l||!o||u==="testing",className:Pe("px-4 py-1.5 rounded-lg text-sm","bg-blue-500 hover:bg-blue-600","text-white","transition-all duration-200","flex items-center gap-2",!l||!o||u==="testing"?"opacity-50 cursor-not-allowed":""),children:u==="testing"?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"i-ph:spinner-gap w-4 h-4 animate-spin"}),p.jsx("span",{children:"Testing..."})]}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"i-ph:key w-4 h-4"}),p.jsx("span",{children:"Test Key"})]})})]})]}),n&&t.length===0?p.jsx("div",{className:"text-center py-8 text-bolt-elements-textSecondary",children:"Loading service statuses..."}):p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map((x,I)=>p.jsx(ot.div,{className:Pe("bg-bolt-elements-background-depth-2","hover:bg-bolt-elements-background-depth-3","transition-all duration-200","relative overflow-hidden rounded-lg"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:I*.1},whileHover:{scale:1.02},children:p.jsxs("div",{className:Pe("block p-4",x.statusUrl?"cursor-pointer":""),onClick:()=>x.statusUrl&&window.open(x.statusUrl,"_blank"),children:[p.jsxs("div",{className:"flex items-center justify-between gap-4",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[x.icon&&p.jsx("div",{className:Pe("w-8 h-8 flex items-center justify-center rounded-lg","bg-bolt-elements-background-depth-3",S(x.status)),children:ut.createElement(x.icon,{className:"w-5 h-5"})}),p.jsxs("div",{children:[p.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:x.provider}),p.jsxs("div",{className:"space-y-1",children:[p.jsxs("p",{className:"text-xs text-bolt-elements-textSecondary",children:["Last checked: ",new Date(x.lastChecked).toLocaleTimeString()]}),x.responseTime&&p.jsxs("p",{className:"text-xs text-bolt-elements-textTertiary",children:["Response time: ",Math.round(x.responseTime),"ms"]}),x.message&&p.jsx("p",{className:"text-xs text-bolt-elements-textTertiary",children:x.message})]})]})]}),p.jsxs("div",{className:Pe("flex items-center gap-2",S(x.status)),children:[p.jsx("span",{className:"text-sm capitalize",children:x.status}),k(x.status)]})]}),x.incidents&&x.incidents.length>0&&p.jsxs("div",{className:"mt-2 border-t border-bolt-elements-borderColor pt-2",children:[p.jsx("p",{className:"text-xs font-medium text-bolt-elements-textSecondary mb-1",children:"Recent Incidents:"}),p.jsx("ul",{className:"text-xs text-bolt-elements-textTertiary space-y-1",children:x.incidents.map((R,C)=>p.jsx("li",{children:R},C))})]})]})},x.provider))})]})})};Rre.tabMetadata={icon:"i-ph:activity-bold",description:"Monitor and test LLM provider service status",category:"services"};const X9=[{name:"deepseek-coder:6.7b",desc:"DeepSeek's code generation model",size:"4.1GB",tags:["coding","popular"]},{name:"llama2:7b",desc:"Meta's Llama 2 (7B parameters)",size:"3.8GB",tags:["general","popular"]},{name:"mistral:7b",desc:"Mistral's 7B model",size:"4.1GB",tags:["general","popular"]},{name:"gemma:7b",desc:"Google's Gemma model",size:"4.0GB",tags:["general","new"]},{name:"codellama:7b",desc:"Meta's Code Llama model",size:"4.1GB",tags:["coding","popular"]},{name:"neural-chat:7b",desc:"Intel's Neural Chat model",size:"4.1GB",tags:["chat","popular"]},{name:"phi:latest",desc:"Microsoft's Phi-2 model",size:"2.7GB",tags:["small","fast"]},{name:"qwen:7b",desc:"Alibaba's Qwen model",size:"4.1GB",tags:["general"]},{name:"solar:10.7b",desc:"Upstage's Solar model",size:"6.1GB",tags:["large","powerful"]},{name:"openchat:7b",desc:"Open-source chat model",size:"4.1GB",tags:["chat","popular"]},{name:"dolphin-phi:2.7b",desc:"Lightweight chat model",size:"1.6GB",tags:["small","fast"]},{name:"stable-code:3b",desc:"Lightweight coding model",size:"1.8GB",tags:["coding","small"]}];function kb(t){if(t===0)return"0 B";const e=1024,n=["B","KB","MB","GB"],r=Math.floor(Math.log(t)/Math.log(e));return`${parseFloat((t/Math.pow(e,r)).toFixed(1))} ${n[r]}`}function J9(t){return`${kb(t)}/s`}function R5({className:t}){return p.jsx("svg",{viewBox:"0 0 1024 1024",className:t,fill:"currentColor",children:p.jsx("path",{d:"M684.3 322.2H339.8c-9.5.1-17.7 6.8-19.6 16.1-8.2 41.4-12.4 83.5-12.4 125.7 0 42.2 4.2 84.3 12.4 125.7 1.9 9.3 10.1 16 19.6 16.1h344.5c9.5-.1 17.7-6.8 19.6-16.1 8.2-41.4 12.4-83.5 12.4-125.7 0-42.2-4.2-84.3-12.4-125.7-1.9-9.3-10.1-16-19.6-16.1zM512 640c-176.7 0-320-143.3-320-320S335.3 0 512 0s320 143.3 320 320-143.3 320-320 320z"})})}function kHe({onModelInstalled:t}){const[e,n]=T.useState(""),[r,s]=T.useState(""),[i,o]=T.useState(!1),[a,l]=T.useState(!1),[c,u]=T.useState(null),[d,h]=T.useState([]),[f,g]=T.useState(X9),{toast:y}=g6(),{providers:m}=jd(),b=m?.Ollama?.settings?.baseUrl||"http://127.0.0.1:11434",v=async()=>{try{const x=await fetch(`${b}/api/tags`,{method:"GET"});if(!x.ok)throw new Error("Failed to fetch installed models");const R=(await x.json()).models||[];g(C=>C.map(N=>{const O=R.find(P=>P.name.toLowerCase()===N.name.toLowerCase());return O?{...N,installedVersion:O.digest.substring(0,8),needsUpdate:O.digest!==O.latest,latestVersion:O.latest?.substring(0,8)}:N}))}catch(x){console.error("Error checking installed models:",x)}};T.useEffect(()=>{v()},[b]);const _=async()=>{l(!0);try{await v(),y("Model versions checked")}catch(x){console.error("Failed to check model versions:",x),y("Failed to check model versions")}finally{l(!1)}},E=f.filter(x=>{const I=r===""||x.name.toLowerCase().includes(r.toLowerCase())||x.desc.toLowerCase().includes(r.toLowerCase()),R=d.length===0||d.some(C=>x.tags.includes(C));return I&&R}),w=async x=>{if(x)try{o(!0),u({status:"Starting download...",progress:0,downloadedSize:"0 B",totalSize:"Calculating...",speed:"0 B/s"}),n(""),s("");const I=await fetch(`${b}/api/pull`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:x})});if(!I.ok)throw new Error(`HTTP error! status: ${I.status}`);const R=I.body?.getReader();if(!R)throw new Error("Failed to get response reader");let C=Date.now(),N=0;for(;;){const{done:O,value:P}=await R.read();if(O)break;const ee=new TextDecoder().decode(P).split(`
`).filter(Boolean);for(const J of ee)try{const Z=JSON.parse(J);if("status"in Z){const M=Date.now(),F=(M-C)/1e3,D=((Z.completed||0)-N)/F;u({status:Z.status,progress:Z.completed&&Z.total?Z.completed/Z.total*100:0,downloadedSize:kb(Z.completed||0),totalSize:Z.total?kb(Z.total):"Calculating...",speed:J9(D)}),C=M,N=Z.completed||0}}catch(Z){console.error("Error parsing progress:",Z)}}y("Successfully installed "+x+". The model list will refresh automatically."),setTimeout(()=>{t()},1e3)}catch(I){const R=I instanceof Error?I.message:"Unknown error occurred";console.error(`Error installing ${x}:`,R),y(`Failed to install ${x}. ${R}`)}finally{o(!1),u(null)}},S=async x=>{try{g(O=>O.map(P=>P.name===x?{...P,status:"updating"}:P));const I=await fetch(`${b}/api/pull`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:x})});if(!I.ok)throw new Error(`HTTP error! status: ${I.status}`);const R=I.body?.getReader();if(!R)throw new Error("Failed to get response reader");let C=Date.now(),N=0;for(;;){const{done:O,value:P}=await R.read();if(O)break;const ee=new TextDecoder().decode(P).split(`
`).filter(Boolean);for(const J of ee)try{const Z=JSON.parse(J);if("status"in Z){const M=Date.now(),F=(M-C)/1e3,D=((Z.completed||0)-N)/F;u({status:Z.status,progress:Z.completed&&Z.total?Z.completed/Z.total*100:0,downloadedSize:kb(Z.completed||0),totalSize:Z.total?kb(Z.total):"Calculating...",speed:J9(D)}),C=M,N=Z.completed||0}}catch(Z){console.error("Error parsing progress:",Z)}}y("Successfully updated "+x),await v()}catch(I){const R=I instanceof Error?I.message:"Unknown error occurred";console.error(`Error updating ${x}:`,R),y(`Failed to update ${x}. ${R}`),g(C=>C.map(N=>N.name===x?{...N,status:"error"}:N))}finally{u(null)}},k=Array.from(new Set(X9.flatMap(x=>x.tags)));return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex items-center justify-between pt-6",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(R5,{className:"w-8 h-8 text-purple-500"}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-bolt-elements-textPrimary",children:"Ollama Models"}),p.jsx("p",{className:"text-sm text-bolt-elements-textSecondary mt-1",children:"Install and manage your Ollama models"})]})]}),p.jsxs(ot.button,{onClick:_,disabled:a,className:Pe("px-4 py-2 rounded-lg","bg-purple-500/10 text-purple-500","hover:bg-purple-500/20","transition-all duration-200","flex items-center gap-2"),whileHover:{scale:1.02},whileTap:{scale:.98},children:[a?p.jsx("div",{className:"i-ph:spinner-gap-bold animate-spin"}):p.jsx("div",{className:"i-ph:arrows-clockwise"}),"Check Updates"]})]}),p.jsxs("div",{className:"flex gap-4",children:[p.jsx("div",{className:"flex-1",children:p.jsxs("div",{className:"space-y-1",children:[p.jsx("input",{type:"text",className:Pe("w-full px-4 py-3 rounded-xl","bg-bolt-elements-background-depth-2 border border-bolt-elements-borderColor","text-bolt-elements-textPrimary placeholder-bolt-elements-textTertiary","focus:outline-none focus:ring-2 focus:ring-purple-500/30","transition-all duration-200"),placeholder:"Search models or enter custom model name...",value:r||e,onChange:x=>{const I=x.target.value;s(I),n(I)},disabled:i}),p.jsxs("p",{className:"text-sm text-bolt-elements-textSecondary px-1",children:["Browse models at"," ",p.jsxs("a",{href:"https://ollama.com/library",target:"_blank",rel:"noopener noreferrer",className:"text-purple-500 hover:underline inline-flex items-center gap-1 text-base font-medium",children:["ollama.com/library",p.jsx("div",{className:"i-ph:arrow-square-out text-sm"})]})," ","and copy model names to install"]})]})}),p.jsx(ot.button,{onClick:()=>w(e),disabled:!e||i,className:Pe("rounded-lg px-4 py-2","bg-purple-500 text-white text-sm","hover:bg-purple-600","transition-all duration-200","flex items-center gap-2",{"opacity-50 cursor-not-allowed":!e||i}),whileHover:{scale:1.02},whileTap:{scale:.98},children:i?p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:spinner-gap-bold animate-spin w-4 h-4"}),p.jsx("span",{children:"Installing..."})]}):p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(R5,{className:"w-4 h-4"}),p.jsx("span",{children:"Install Model"})]})})]}),p.jsx("div",{className:"flex flex-wrap gap-2",children:k.map(x=>p.jsx("button",{onClick:()=>{h(I=>I.includes(x)?I.filter(R=>R!==x):[...I,x])},className:Pe("px-3 py-1 rounded-full text-xs font-medium transition-all duration-200",d.includes(x)?"bg-purple-500 text-white":"bg-bolt-elements-background-depth-3 text-bolt-elements-textSecondary hover:bg-bolt-elements-background-depth-4"),children:x},x))}),p.jsx("div",{className:"grid grid-cols-1 gap-2",children:E.map(x=>p.jsxs(ot.div,{className:Pe("flex items-start gap-2 p-3 rounded-lg","bg-bolt-elements-background-depth-3","hover:bg-bolt-elements-background-depth-4","transition-all duration-200","relative group"),children:[p.jsx(R5,{className:"w-5 h-5 text-purple-500 mt-0.5 flex-shrink-0"}),p.jsxs("div",{className:"flex-1 space-y-1.5",children:[p.jsxs("div",{className:"flex items-start justify-between",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-bolt-elements-textPrimary font-mono text-sm",children:x.name}),p.jsx("p",{className:"text-xs text-bolt-elements-textSecondary mt-0.5",children:x.desc})]}),p.jsxs("div",{className:"text-right",children:[p.jsx("span",{className:"text-xs text-bolt-elements-textTertiary",children:x.size}),x.installedVersion&&p.jsxs("div",{className:"mt-0.5 flex flex-col items-end gap-0.5",children:[p.jsxs("span",{className:"text-xs text-bolt-elements-textTertiary",children:["v",x.installedVersion]}),x.needsUpdate&&x.latestVersion&&p.jsxs("span",{className:"text-xs text-purple-500",children:["v",x.latestVersion," available"]})]})]})]}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("div",{className:"flex flex-wrap gap-1",children:x.tags.map(I=>p.jsx("span",{className:"px-1.5 py-0.5 rounded-full text-[10px] bg-bolt-elements-background-depth-4 text-bolt-elements-textTertiary",children:I},I))}),p.jsx("div",{className:"flex gap-2",children:x.installedVersion?x.needsUpdate?p.jsxs(ot.button,{onClick:()=>S(x.name),className:Pe("px-2 py-0.5 rounded-lg text-xs","bg-purple-500 text-white","hover:bg-purple-600","transition-all duration-200","flex items-center gap-1"),whileHover:{scale:1.02},whileTap:{scale:.98},children:[p.jsx("div",{className:"i-ph:arrows-clockwise text-xs"}),"Update"]}):p.jsx("span",{className:"px-2 py-0.5 rounded-lg text-xs text-green-500 bg-green-500/10",children:"Up to date"}):p.jsxs(ot.button,{onClick:()=>w(x.name),className:Pe("px-2 py-0.5 rounded-lg text-xs","bg-purple-500 text-white","hover:bg-purple-600","transition-all duration-200","flex items-center gap-1"),whileHover:{scale:1.02},whileTap:{scale:.98},children:[p.jsx("div",{className:"i-ph:download text-xs"}),"Install"]})})]})]})]},x.name))}),c&&p.jsxs(ot.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-2",children:[p.jsxs("div",{className:"flex justify-between text-sm",children:[p.jsx("span",{className:"text-bolt-elements-textSecondary",children:c.status}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsxs("span",{className:"text-bolt-elements-textTertiary",children:[c.downloadedSize," / ",c.totalSize]}),p.jsx("span",{className:"text-bolt-elements-textTertiary",children:c.speed}),p.jsxs("span",{className:"text-bolt-elements-textSecondary",children:[Math.round(c.progress),"%"]})]})]}),p.jsx(tC,{value:c.progress,className:"h-1"})]})]})}const CHe={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},Z9={Ollama:xf,LMStudio:xf,OpenAILike:jAe},Q9={Ollama:"Run open-source models locally on your machine",LMStudio:"Local model inference with LM Studio",OpenAILike:"Connect to OpenAI-compatible API endpoints"},Gx="http://127.0.0.1:11434",AHe=t=>typeof t=="object"&&t!==null&&"status"in t&&typeof t.status=="string";function THe(){const{providers:t,updateProviderSettings:e}=jd(),[n,r]=T.useState([]),[s,i]=T.useState(!1),[o,a]=T.useState([]),[l,c]=T.useState(!1),[u,d]=T.useState(null),{toast:h}=g6();T.useEffect(()=>{const k=Object.entries(t||{}).filter(([x])=>[...jL,"OpenAILike"].includes(x)).map(([x,I])=>{const R=I,C=ML[x]?.baseUrlKey,N=C?CHe[C]:void 0;return N&&!R.settings.baseUrl&&e(x,{...R.settings,baseUrl:N}),{name:x,settings:{...R.settings,baseUrl:R.settings.baseUrl||N},staticModels:R.staticModels||[],getDynamicModels:R.getDynamicModels,getApiKeyLink:R.getApiKeyLink,labelForGetApiKey:R.labelForGetApiKey,icon:R.icon}}).sort((x,I)=>x.name==="LMStudio"?-1:I.name==="LMStudio"||x.name==="OpenAILike"?1:I.name==="OpenAILike"?-1:x.name.localeCompare(I.name));r(k)},[t,e]),T.useEffect(()=>{const S=n.every(k=>k.settings.enabled);i(S)},[n]),T.useEffect(()=>{n.find(k=>k.name==="Ollama")?.settings.enabled&&f()},[n]);const f=async()=>{try{c(!0);const k=await(await fetch("http://127.0.0.1:11434/api/tags")).json();a(k.models.map(x=>({...x,status:"idle"})))}catch(S){console.error("Error fetching Ollama models:",S)}finally{c(!1)}},g=async S=>{try{const k=await fetch(`${Gx}/api/pull`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:S})});if(!k.ok)throw new Error(`Failed to update ${S}`);const x=k.body?.getReader();if(!x)throw new Error("No response reader available");for(;;){const{done:N,value:O}=await x.read();if(N)break;const $=new TextDecoder().decode(O).split(`
`).filter(Boolean);for(const ee of $){const J=JSON.parse(ee);if(!AHe(J)){console.error("Invalid response format:",J);continue}a(Z=>Z.map(M=>M.name===S?{...M,progress:{current:J.completed||0,total:J.total||0,status:J.status},newDigest:J.digest}:M))}}return(await(await fetch("http://127.0.0.1:11434/api/tags")).json()).models.find(N=>N.name===S)!==void 0}catch(k){return console.error(`Error updating ${S}:`,k),!1}},y=T.useCallback(async S=>{n.forEach(k=>{e(k.name,{...k.settings,enabled:S})}),h(S?"All local providers enabled":"All local providers disabled")},[n,e]),m=(S,k)=>{e(S.name,{...S.settings,enabled:k}),k?(Lt.logProvider(`Provider ${S.name} enabled`,{provider:S.name}),h(`${S.name} enabled`)):(Lt.logProvider(`Provider ${S.name} disabled`,{provider:S.name}),h(`${S.name} disabled`))},b=(S,k)=>{e(S.name,{...S.settings,baseUrl:k}),h(`${S.name} base URL updated`),d(null)},v=async S=>{const k=await g(S);h(k?`Updated ${S}`:`Failed to update ${S}`)},_=async S=>{try{if(!(await fetch(`${Gx}/api/delete`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:S})})).ok)throw new Error(`Failed to delete ${S}`);a(x=>x.filter(I=>I.name!==S)),h(`Deleted ${S}`)}catch(k){const x=k instanceof Error?k.message:"Unknown error occurred";console.error(`Error deleting ${S}:`,x),h(`Failed to delete ${S}`)}},E=({model:S})=>p.jsxs("div",{className:"flex items-center gap-3 text-xs text-bolt-elements-textSecondary",children:[p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:code text-purple-500"}),p.jsx("span",{children:S.digest.substring(0,7)})]}),S.details&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:database text-purple-500"}),p.jsx("span",{children:S.details.parameter_size})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:cube text-purple-500"}),p.jsx("span",{children:S.details.quantization_level})]})]})]}),w=({model:S,onUpdate:k,onDelete:x})=>p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(ot.button,{onClick:k,disabled:S.status==="updating",className:Pe("rounded-lg p-2","bg-purple-500/10 text-purple-500","hover:bg-purple-500/20","transition-all duration-200",{"opacity-50 cursor-not-allowed":S.status==="updating"}),whileHover:{scale:1.05},whileTap:{scale:.95},title:"Update model",children:S.status==="updating"?p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:spinner-gap-bold animate-spin w-4 h-4"}),p.jsx("span",{className:"text-sm",children:"Updating..."})]}):p.jsx("div",{className:"i-ph:arrows-clockwise text-lg"})}),p.jsx(ot.button,{onClick:x,disabled:S.status==="updating",className:Pe("rounded-lg p-2","bg-red-500/10 text-red-500","hover:bg-red-500/20","transition-all duration-200",{"opacity-50 cursor-not-allowed":S.status==="updating"}),whileHover:{scale:1.05},whileTap:{scale:.95},title:"Delete model",children:p.jsx("div",{className:"i-ph:trash text-lg"})})]});return p.jsx("div",{className:Pe("rounded-lg bg-bolt-elements-background text-bolt-elements-textPrimary shadow-sm p-4","hover:bg-bolt-elements-background-depth-2","transition-all duration-200"),role:"region","aria-label":"Local Providers Configuration",children:p.jsxs(ot.div,{className:"space-y-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[p.jsxs("div",{className:"flex items-center justify-between gap-4 border-b border-bolt-elements-borderColor pb-4",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(ot.div,{className:Pe("w-10 h-10 flex items-center justify-center rounded-xl","bg-purple-500/10 text-purple-500"),whileHover:{scale:1.05},children:p.jsx(m6,{className:"w-6 h-6"})}),p.jsxs("div",{children:[p.jsx("div",{className:"flex items-center gap-2",children:p.jsx("h2",{className:"text-lg font-semibold text-bolt-elements-textPrimary",children:"Local AI Models"})}),p.jsx("p",{className:"text-sm text-bolt-elements-textSecondary",children:"Configure and manage your local AI providers"})]})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:"Enable All"}),p.jsx(Fo,{checked:s,onCheckedChange:y,"aria-label":"Toggle all local providers"})]})]}),n.filter(S=>S.name==="Ollama").map(S=>p.jsxs(ot.div,{className:Pe("bg-bolt-elements-background-depth-2 rounded-xl","hover:bg-bolt-elements-background-depth-3","transition-all duration-200 p-5","relative overflow-hidden group"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.01},children:[p.jsxs("div",{className:"flex items-start justify-between gap-4",children:[p.jsxs("div",{className:"flex items-start gap-4",children:[p.jsx(ot.div,{className:Pe("w-12 h-12 flex items-center justify-center rounded-xl","bg-bolt-elements-background-depth-3",S.settings.enabled?"text-purple-500":"text-bolt-elements-textSecondary"),whileHover:{scale:1.1,rotate:5},children:ut.createElement(Z9[S.name]||xf,{className:"w-7 h-7","aria-label":`${S.name} icon`})}),p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("h3",{className:"text-md font-semibold text-bolt-elements-textPrimary",children:S.name}),p.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-green-500/10 text-green-500",children:"Local"})]}),p.jsx("p",{className:"text-sm text-bolt-elements-textSecondary mt-1",children:Q9[S.name]})]})]}),p.jsx(Fo,{checked:S.settings.enabled,onCheckedChange:k=>m(S,k),"aria-label":`Toggle ${S.name} provider`})]}),p.jsx(zl,{children:S.settings.enabled&&p.jsx(ot.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4",children:p.jsxs("div",{className:"flex flex-col gap-2",children:[p.jsx("label",{className:"text-sm text-bolt-elements-textSecondary",children:"API Endpoint"}),u===S.name?p.jsx("input",{type:"text",defaultValue:S.settings.baseUrl||Gx,placeholder:"Enter Ollama base URL",className:Pe("w-full px-3 py-2 rounded-lg text-sm","bg-bolt-elements-background-depth-3 border border-bolt-elements-borderColor","text-bolt-elements-textPrimary placeholder-bolt-elements-textTertiary","focus:outline-none focus:ring-2 focus:ring-purple-500/30","transition-all duration-200"),onKeyDown:k=>{k.key==="Enter"?b(S,k.currentTarget.value):k.key==="Escape"&&d(null)},onBlur:k=>b(S,k.target.value),autoFocus:!0}):p.jsx("div",{onClick:()=>d(S.name),className:Pe("w-full px-3 py-2 rounded-lg text-sm cursor-pointer","bg-bolt-elements-background-depth-3 border border-bolt-elements-borderColor","hover:border-purple-500/30 hover:bg-bolt-elements-background-depth-4","transition-all duration-200"),children:p.jsxs("div",{className:"flex items-center gap-2 text-bolt-elements-textSecondary",children:[p.jsx("div",{className:"i-ph:link text-sm"}),p.jsx("span",{children:S.settings.baseUrl||Gx})]})})]})})}),S.settings.enabled&&p.jsxs(ot.div,{initial:{opacity:0},animate:{opacity:1},className:"mt-6 space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:cube-duotone text-purple-500"}),p.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:"Installed Models"})]}),l?p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:spinner-gap-bold animate-spin w-4 h-4"}),p.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:"Loading models..."})]}):p.jsxs("span",{className:"text-sm text-bolt-elements-textSecondary",children:[o.length," models available"]})]}),p.jsx("div",{className:"space-y-3",children:l?p.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((k,x)=>p.jsx("div",{className:"h-20 w-full bg-bolt-elements-background-depth-3 rounded-lg animate-pulse"},x))}):o.length===0?p.jsxs("div",{className:"text-center py-8 text-bolt-elements-textSecondary",children:[p.jsx("div",{className:"i-ph:cube-transparent text-4xl mx-auto mb-2"}),p.jsx("p",{children:"No models installed yet"}),p.jsxs("p",{className:"text-sm text-bolt-elements-textTertiary px-1",children:["Browse models at"," ",p.jsxs("a",{href:"https://ollama.com/library",target:"_blank",rel:"noopener noreferrer",className:"text-purple-500 hover:underline inline-flex items-center gap-0.5 text-base font-medium",children:["ollama.com/library",p.jsx("div",{className:"i-ph:arrow-square-out text-xs"})]})," ","and copy model names to install"]})]}):o.map(k=>p.jsxs(ot.div,{className:Pe("p-4 rounded-xl","bg-bolt-elements-background-depth-3","hover:bg-bolt-elements-background-depth-4","transition-all duration-200"),whileHover:{scale:1.01},children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("h5",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:k.name}),p.jsx(NHe,{status:k.status})]}),p.jsx(E,{model:k})]}),p.jsx(w,{model:k,onUpdate:()=>v(k.name),onDelete:()=>{window.confirm(`Are you sure you want to delete ${k.name}?`)&&_(k.name)}})]}),k.progress&&p.jsxs("div",{className:"mt-3",children:[p.jsx(tC,{value:Math.round(k.progress.current/k.progress.total*100),className:"h-1"}),p.jsxs("div",{className:"flex justify-between mt-1 text-xs text-bolt-elements-textSecondary",children:[p.jsx("span",{children:k.progress.status}),p.jsxs("span",{children:[Math.round(k.progress.current/k.progress.total*100),"%"]})]})]})]},k.name))}),p.jsx(kHe,{onModelInstalled:f})]})]},S.name)),p.jsxs("div",{className:"border-t border-bolt-elements-borderColor pt-6 mt-8",children:[p.jsx("h3",{className:"text-lg font-semibold text-bolt-elements-textPrimary mb-4",children:"Other Local Providers"}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:n.filter(S=>S.name!=="Ollama").map((S,k)=>p.jsxs(ot.div,{className:Pe("bg-bolt-elements-background-depth-2 rounded-xl","hover:bg-bolt-elements-background-depth-3","transition-all duration-200 p-5","relative overflow-hidden group"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:k*.1},whileHover:{scale:1.01},children:[p.jsxs("div",{className:"flex items-start justify-between gap-4",children:[p.jsxs("div",{className:"flex items-start gap-4",children:[p.jsx(ot.div,{className:Pe("w-12 h-12 flex items-center justify-center rounded-xl","bg-bolt-elements-background-depth-3",S.settings.enabled?"text-purple-500":"text-bolt-elements-textSecondary"),whileHover:{scale:1.1,rotate:5},children:ut.createElement(Z9[S.name]||xf,{className:"w-7 h-7","aria-label":`${S.name} icon`})}),p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("h3",{className:"text-md font-semibold text-bolt-elements-textPrimary",children:S.name}),p.jsxs("div",{className:"flex gap-1",children:[p.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-green-500/10 text-green-500",children:"Local"}),Zb.includes(S.name)&&p.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-purple-500/10 text-purple-500",children:"Configurable"})]})]}),p.jsx("p",{className:"text-sm text-bolt-elements-textSecondary mt-1",children:Q9[S.name]})]})]}),p.jsx(Fo,{checked:S.settings.enabled,onCheckedChange:x=>m(S,x),"aria-label":`Toggle ${S.name} provider`})]}),p.jsx(zl,{children:S.settings.enabled&&Zb.includes(S.name)&&p.jsx(ot.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4",children:p.jsxs("div",{className:"flex flex-col gap-2",children:[p.jsx("label",{className:"text-sm text-bolt-elements-textSecondary",children:"API Endpoint"}),u===S.name?p.jsx("input",{type:"text",defaultValue:S.settings.baseUrl,placeholder:`Enter ${S.name} base URL`,className:Pe("w-full px-3 py-2 rounded-lg text-sm","bg-bolt-elements-background-depth-3 border border-bolt-elements-borderColor","text-bolt-elements-textPrimary placeholder-bolt-elements-textTertiary","focus:outline-none focus:ring-2 focus:ring-purple-500/30","transition-all duration-200"),onKeyDown:x=>{x.key==="Enter"?b(S,x.currentTarget.value):x.key==="Escape"&&d(null)},onBlur:x=>b(S,x.target.value),autoFocus:!0}):p.jsx("div",{onClick:()=>d(S.name),className:Pe("w-full px-3 py-2 rounded-lg text-sm cursor-pointer","bg-bolt-elements-background-depth-3 border border-bolt-elements-borderColor","hover:border-purple-500/30 hover:bg-bolt-elements-background-depth-4","transition-all duration-200"),children:p.jsxs("div",{className:"flex items-center gap-2 text-bolt-elements-textSecondary",children:[p.jsx("div",{className:"i-ph:link text-sm"}),p.jsx("span",{children:S.settings.baseUrl||"Click to set base URL"})]})})]})})})]},S.name))})]})]})})}function NHe({status:t}){if(!t||t==="idle")return null;const n={updating:{bg:"bg-yellow-500/10",text:"text-yellow-500",label:"Updating"},updated:{bg:"bg-green-500/10",text:"text-green-500",label:"Updated"},error:{bg:"bg-red-500/10",text:"text-red-500",label:"Error"}}[t];return n?p.jsx("span",{className:Pe("px-2 py-0.5 rounded-full text-xs font-medium",n.bg,n.text),children:n.label}):null}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Uv(t){return t+.5|0}const Qu=(t,e,n)=>Math.max(Math.min(t,n),e);function Cb(t){return Qu(Uv(t*2.55),0,255)}function cd(t){return Qu(Uv(t*255),0,255)}function Cc(t){return Qu(Uv(t/2.55)/100,0,1)}function eU(t){return Qu(Uv(t*100),0,100)}const xo={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},d4=[..."0123456789ABCDEF"],PHe=t=>d4[t&15],IHe=t=>d4[(t&240)>>4]+d4[t&15],qx=t=>(t&240)>>4===(t&15),RHe=t=>qx(t.r)&&qx(t.g)&&qx(t.b)&&qx(t.a);function LHe(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&xo[t[1]]*17,g:255&xo[t[2]]*17,b:255&xo[t[3]]*17,a:e===5?xo[t[4]]*17:255}:(e===7||e===9)&&(n={r:xo[t[1]]<<4|xo[t[2]],g:xo[t[3]]<<4|xo[t[4]],b:xo[t[5]]<<4|xo[t[6]],a:e===9?xo[t[7]]<<4|xo[t[8]]:255})),n}const OHe=(t,e)=>t<255?e(t):"";function DHe(t){var e=RHe(t)?PHe:IHe;return t?"#"+e(t.r)+e(t.g)+e(t.b)+OHe(t.a,e):void 0}const MHe=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Lre(t,e,n){const r=e*Math.min(n,1-n),s=(i,o=(i+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function jHe(t,e,n){const r=(s,i=(s+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function FHe(t,e,n){const r=Lre(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)r[s]*=1-e-n,r[s]+=e;return r}function BHe(t,e,n,r,s){return t===s?(e-n)/r+(e<n?6:0):e===s?(n-t)/r+2:(t-e)/r+4}function b6(t){const n=t.r/255,r=t.g/255,s=t.b/255,i=Math.max(n,r,s),o=Math.min(n,r,s),a=(i+o)/2;let l,c,u;return i!==o&&(u=i-o,c=a>.5?u/(2-i-o):u/(i+o),l=BHe(n,r,s,u,i),l=l*60+.5),[l|0,c||0,a]}function y6(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(cd)}function v6(t,e,n){return y6(Lre,t,e,n)}function UHe(t,e,n){return y6(FHe,t,e,n)}function $He(t,e,n){return y6(jHe,t,e,n)}function Ore(t){return(t%360+360)%360}function HHe(t){const e=MHe.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Cb(+e[5]):cd(+e[5]));const s=Ore(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=UHe(s,i,o):e[1]==="hsv"?r=$He(s,i,o):r=v6(s,i,o),{r:r[0],g:r[1],b:r[2],a:n}}function zHe(t,e){var n=b6(t);n[0]=Ore(n[0]+e),n=v6(n),t.r=n[0],t.g=n[1],t.b=n[2]}function VHe(t){if(!t)return;const e=b6(t),n=e[0],r=eU(e[1]),s=eU(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${s}%, ${Cc(t.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const tU={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},nU={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function WHe(){const t={},e=Object.keys(nU),n=Object.keys(tU);let r,s,i,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],s=0;s<n.length;s++)i=n[s],a=a.replace(i,tU[i]);i=parseInt(nU[o],16),t[a]=[i>>16&255,i>>8&255,i&255]}return t}let Kx;function GHe(t){Kx||(Kx=WHe(),Kx.transparent=[0,0,0,0]);const e=Kx[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const qHe=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function KHe(t){const e=qHe.exec(t);let n=255,r,s,i;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Cb(o):Qu(o*255,0,255)}return r=+e[1],s=+e[3],i=+e[5],r=255&(e[2]?Cb(r):Qu(r,0,255)),s=255&(e[4]?Cb(s):Qu(s,0,255)),i=255&(e[6]?Cb(i):Qu(i,0,255)),{r,g:s,b:i,a:n}}}function YHe(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Cc(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const L5=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Fp=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function XHe(t,e,n){const r=Fp(Cc(t.r)),s=Fp(Cc(t.g)),i=Fp(Cc(t.b));return{r:cd(L5(r+n*(Fp(Cc(e.r))-r))),g:cd(L5(s+n*(Fp(Cc(e.g))-s))),b:cd(L5(i+n*(Fp(Cc(e.b))-i))),a:t.a+n*(e.a-t.a)}}function Yx(t,e,n){if(t){let r=b6(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=v6(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function Dre(t,e){return t&&Object.assign(e||{},t)}function rU(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=cd(t[3]))):(e=Dre(t,{r:0,g:0,b:0,a:1}),e.a=cd(e.a)),e}function JHe(t){return t.charAt(0)==="r"?KHe(t):HHe(t)}class _1{constructor(e){if(e instanceof _1)return e;const n=typeof e;let r;n==="object"?r=rU(e):n==="string"&&(r=LHe(e)||GHe(e)||JHe(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=Dre(this._rgb);return e&&(e.a=Cc(e.a)),e}set rgb(e){this._rgb=rU(e)}rgbString(){return this._valid?YHe(this._rgb):void 0}hexString(){return this._valid?DHe(this._rgb):void 0}hslString(){return this._valid?VHe(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,s=e.rgb;let i;const o=n===i?.5:n,a=2*o-1,l=r.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;i=1-c,r.r=255&c*r.r+i*s.r+.5,r.g=255&c*r.g+i*s.g+.5,r.b=255&c*r.b+i*s.b+.5,r.a=o*r.a+(1-o)*s.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=XHe(this._rgb,e._rgb,n)),this}clone(){return new _1(this.rgb)}alpha(e){return this._rgb.a=cd(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Uv(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Yx(this._rgb,2,e),this}darken(e){return Yx(this._rgb,2,-e),this}saturate(e){return Yx(this._rgb,1,e),this}desaturate(e){return Yx(this._rgb,1,-e),this}rotate(e){return zHe(this._rgb,e),this}}/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function yc(){}const ZHe=(()=>{let t=0;return()=>t++})();function yr(t){return t==null}function ss(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Rn(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Wo(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function el(t,e){return Wo(t)?t:e}function bn(t,e){return typeof t>"u"?e:t}const QHe=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Zn(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function jn(t,e,n,r){let s,i,o;if(ss(t))for(i=t.length,s=0;s<i;s++)e.call(n,t[s],s);else if(Rn(t))for(o=Object.keys(t),i=o.length,s=0;s<i;s++)e.call(n,t[o[s]],o[s])}function cS(t,e){let n,r,s,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(s=t[n],i=e[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function uS(t){if(ss(t))return t.map(uS);if(Rn(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let s=0;for(;s<r;++s)e[n[s]]=uS(t[n[s]]);return e}return t}function Mre(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function eze(t,e,n,r){if(!Mre(t))return;const s=e[t],i=n[t];Rn(s)&&Rn(i)?x1(s,i,r):e[t]=uS(i)}function x1(t,e,n){const r=ss(e)?e:[e],s=r.length;if(!Rn(t))return t;n=n||{};const i=n.merger||eze;let o;for(let a=0;a<s;++a){if(o=r[a],!Rn(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)i(l[c],t,o,n)}return t}function fy(t,e){return x1(t,e,{merger:tze})}function tze(t,e,n){if(!Mre(t))return;const r=e[t],s=n[t];Rn(r)&&Rn(s)?fy(r,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=uS(s))}const sU={"":t=>t,x:t=>t.x,y:t=>t.y};function nze(t){const e=t.split("."),n=[];let r="";for(const s of e)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function rze(t){const e=nze(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function dS(t,e){return(sU[e]||(sU[e]=rze(e)))(t)}function _6(t){return t.charAt(0).toUpperCase()+t.slice(1)}const hS=t=>typeof t<"u",kd=t=>typeof t=="function",iU=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function sze(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const as=Math.PI,$l=2*as,ize=$l+as,fS=Number.POSITIVE_INFINITY,oze=as/180,_a=as/2,sh=as/4,oU=as*2/3,jre=Math.log10,fg=Math.sign;function py(t,e,n){return Math.abs(t-e)<n}function aU(t){const e=Math.round(t);t=py(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(jre(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function aze(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((s,i)=>s-i).pop(),e}function w1(t){return!isNaN(parseFloat(t))&&isFinite(t)}function lze(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function cze(t,e,n){let r,s,i;for(r=0,s=t.length;r<s;r++)i=t[r][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function Lh(t){return t*(as/180)}function uze(t){return t*(180/as)}function lU(t){if(!Wo(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function dze(t,e){const n=e.x-t.x,r=e.y-t.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*as&&(i+=$l),{angle:i,distance:s}}function h4(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function hze(t,e){return(t-e+ize)%$l-as}function Bu(t){return(t%$l+$l)%$l}function Fre(t,e,n,r){const s=Bu(t),i=Bu(e),o=Bu(n),a=Bu(i-s),l=Bu(o-s),c=Bu(s-i),u=Bu(s-o);return s===i||s===o||r&&i===o||a>l&&c<u}function Ro(t,e,n){return Math.max(e,Math.min(n,t))}function fze(t){return Ro(t,-32768,32767)}function Ab(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function x6(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,s=0,i;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const Oh=(t,e,n,r)=>x6(t,n,r?s=>{const i=t[s][e];return i<n||i===n&&t[s+1][e]===n}:s=>t[s][e]<n),pze=(t,e,n)=>x6(t,n,r=>t[r][e]>=n);function mze(t,e,n){let r=0,s=t.length;for(;r<s&&t[r]<e;)r++;for(;s>r&&t[s-1]>n;)s--;return r>0||s<t.length?t.slice(r,s):t}const Bre=["push","pop","shift","splice","unshift"];function gze(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Bre.forEach(n=>{const r="_onData"+_6(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=s.apply(this,i);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...i)}),o}})})}function cU(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(e);s!==-1&&r.splice(s,1),!(r.length>0)&&(Bre.forEach(i=>{delete t[i]}),delete t._chartjs)}function bze(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Ure=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function $re(t,e){let n=[],r=!1;return function(...s){n=s,r||(r=!0,Ure.call(window,()=>{r=!1,t.apply(e,n)}))}}function yze(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const w6=t=>t==="start"?"left":t==="end"?"right":"center",Os=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,vze=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function _ze(t,e,n){const r=e.length;let s=0,i=r;if(t._sorted){const{iScale:o,_parsed:a}=t,l=o.axis,{min:c,max:u,minDefined:d,maxDefined:h}=o.getUserBounds();d&&(s=Ro(Math.min(Oh(a,l,c).lo,n?r:Oh(e,l,o.getPixelForValue(c)).lo),0,r-1)),h?i=Ro(Math.max(Oh(a,o.axis,u,!0).hi+1,n?0:Oh(e,l,o.getPixelForValue(u),!0).hi+1),s,r)-s:i=r-s}return{start:s,count:i}}function xze(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,s={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=s,!0;const i=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,s),i}const Xx=t=>t===0||t===1,uU=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*$l/n)),dU=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*$l/n)+1,my={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*_a)+1,easeOutSine:t=>Math.sin(t*_a),easeInOutSine:t=>-.5*(Math.cos(as*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Xx(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Xx(t)?t:uU(t,.075,.3),easeOutElastic:t=>Xx(t)?t:dU(t,.075,.3),easeInOutElastic(t){return Xx(t)?t:t<.5?.5*uU(t*2,.1125,.45):.5+.5*dU(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-my.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?my.easeInBounce(t*2)*.5:my.easeOutBounce(t*2-1)*.5+.5};function E6(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function hU(t){return E6(t)?t:new _1(t)}function O5(t){return E6(t)?t:new _1(t).saturate(.5).darken(.1).hexString()}const wze=["x","y","borderWidth","radius","tension"],Eze=["color","borderColor","backgroundColor"];function Sze(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:Eze},numbers:{type:"number",properties:wze}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function kze(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const fU=new Map;function Cze(t,e){e=e||{};const n=t+JSON.stringify(e);let r=fU.get(n);return r||(r=new Intl.NumberFormat(t,e),fU.set(n,r)),r}function Hre(t,e,n){return Cze(e,n).format(t)}const Aze={values(t){return ss(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let s,i=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),i=Tze(t,n)}const o=jre(Math.abs(i)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Hre(t,r,l)}};function Tze(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var zre={formatters:Aze};function Nze(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:zre.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const wf=Object.create(null),f4=Object.create(null);function gy(t,e){if(!e)return t;const n=e.split(".");for(let r=0,s=n.length;r<s;++r){const i=n[r];t=t[i]||(t[i]=Object.create(null))}return t}function D5(t,e,n){return typeof e=="string"?x1(gy(t,e),n):x1(gy(t,""),e)}class Pze{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>O5(s.backgroundColor),this.hoverBorderColor=(r,s)=>O5(s.borderColor),this.hoverColor=(r,s)=>O5(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return D5(this,e,n)}get(e){return gy(this,e)}describe(e,n){return D5(f4,e,n)}override(e,n){return D5(wf,e,n)}route(e,n,r,s){const i=gy(this,e),o=gy(this,r),a="_"+n;Object.defineProperties(i,{[a]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[s];return Rn(l)?Object.assign({},c,l):bn(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Ir=new Pze({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Sze,kze,Nze]);function Ize(t){return!t||yr(t.size)||yr(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function pU(t,e,n,r,s){let i=e[s];return i||(i=e[s]=t.measureText(s).width,n.push(s)),i>r&&(r=i),r}function ih(t,e,n){const r=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*r)/r+s}function mU(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function p4(t,e,n,r){Vre(t,e,n,r,null)}function Vre(t,e,n,r,s){let i,o,a,l,c,u,d,h;const f=e.pointStyle,g=e.rotation,y=e.radius;let m=(g||0)*oze;if(f&&typeof f=="object"&&(i=f.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(m),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),t.restore();return}if(!(isNaN(y)||y<=0)){switch(t.beginPath(),f){default:s?t.ellipse(n,r,s/2,y,0,0,$l):t.arc(n,r,y,0,$l),t.closePath();break;case"triangle":u=s?s/2:y,t.moveTo(n+Math.sin(m)*u,r-Math.cos(m)*y),m+=oU,t.lineTo(n+Math.sin(m)*u,r-Math.cos(m)*y),m+=oU,t.lineTo(n+Math.sin(m)*u,r-Math.cos(m)*y),t.closePath();break;case"rectRounded":c=y*.516,l=y-c,o=Math.cos(m+sh)*l,d=Math.cos(m+sh)*(s?s/2-c:l),a=Math.sin(m+sh)*l,h=Math.sin(m+sh)*(s?s/2-c:l),t.arc(n-d,r-a,c,m-as,m-_a),t.arc(n+h,r-o,c,m-_a,m),t.arc(n+d,r+a,c,m,m+_a),t.arc(n-h,r+o,c,m+_a,m+as),t.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*y,u=s?s/2:l,t.rect(n-u,r-l,2*u,2*l);break}m+=sh;case"rectRot":d=Math.cos(m)*(s?s/2:y),o=Math.cos(m)*y,a=Math.sin(m)*y,h=Math.sin(m)*(s?s/2:y),t.moveTo(n-d,r-a),t.lineTo(n+h,r-o),t.lineTo(n+d,r+a),t.lineTo(n-h,r+o),t.closePath();break;case"crossRot":m+=sh;case"cross":d=Math.cos(m)*(s?s/2:y),o=Math.cos(m)*y,a=Math.sin(m)*y,h=Math.sin(m)*(s?s/2:y),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+h,r-o),t.lineTo(n-h,r+o);break;case"star":d=Math.cos(m)*(s?s/2:y),o=Math.cos(m)*y,a=Math.sin(m)*y,h=Math.sin(m)*(s?s/2:y),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+h,r-o),t.lineTo(n-h,r+o),m+=sh,d=Math.cos(m)*(s?s/2:y),o=Math.cos(m)*y,a=Math.sin(m)*y,h=Math.sin(m)*(s?s/2:y),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+h,r-o),t.lineTo(n-h,r+o);break;case"line":o=s?s/2:Math.cos(m)*y,a=Math.sin(m)*y,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(m)*(s?s/2:y),r+Math.sin(m)*y);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function E1(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function S6(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function k6(t){t.restore()}function Rze(t,e,n,r,s){if(!e)return t.lineTo(n.x,n.y);if(s==="middle"){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else s==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function Lze(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function Oze(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),yr(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Dze(t,e,n,r,s){if(s.strikethrough||s.underline){const i=t.measureText(r),o=e-i.actualBoundingBoxLeft,a=e+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function Mze(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function S1(t,e,n,r,s,i={}){const o=ss(e)?e:[e],a=i.strokeWidth>0&&i.strokeColor!=="";let l,c;for(t.save(),t.font=s.string,Oze(t,i),l=0;l<o.length;++l)c=o[l],i.backdrop&&Mze(t,i.backdrop),a&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),yr(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(c,n,r,i.maxWidth)),t.fillText(c,n,r,i.maxWidth),Dze(t,n,r,c,i),r+=Number(s.lineHeight);t.restore()}function m4(t,e){const{x:n,y:r,w:s,h:i,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*as,as,!0),t.lineTo(n,r+i-o.bottomLeft),t.arc(n+o.bottomLeft,r+i-o.bottomLeft,o.bottomLeft,as,_a,!0),t.lineTo(n+s-o.bottomRight,r+i),t.arc(n+s-o.bottomRight,r+i-o.bottomRight,o.bottomRight,_a,0,!0),t.lineTo(n+s,r+o.topRight),t.arc(n+s-o.topRight,r+o.topRight,o.topRight,0,-_a,!0),t.lineTo(n+o.topLeft,r)}const jze=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Fze=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Bze(t,e){const n=(""+t).match(jze);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const Uze=t=>+t||0;function Wre(t,e){const n={},r=Rn(e),s=r?Object.keys(e):e,i=Rn(t)?r?o=>bn(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=Uze(i(o));return n}function $ze(t){return Wre(t,{top:"y",right:"x",bottom:"y",left:"x"})}function by(t){return Wre(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Go(t){const e=$ze(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Hs(t,e){t=t||{},e=e||Ir.font;let n=bn(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=bn(t.style,e.style);r&&!(""+r).match(Fze)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:bn(t.family,e.family),lineHeight:Bze(bn(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:bn(t.weight,e.weight),string:""};return s.string=Ize(s),s}function Jx(t,e,n,r){let s,i,o;for(s=0,i=t.length;s<i;++s)if(o=t[s],o!==void 0&&o!==void 0)return o}function Hze(t,e,n){const{min:r,max:s}=t,i=QHe(e,(s-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(i)),max:o(s,i)}}function Gf(t,e){return Object.assign(Object.create(t),e)}function C6(t,e=[""],n,r,s=()=>t[0]){const i=n||t;typeof r>"u"&&(r=Yre("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:r,_getTarget:s,override:a=>C6([a,...t],e,i,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return qre(a,l,()=>Xze(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return bU(a).includes(l)},ownKeys(a){return bU(a)},set(a,l,c){const u=a._storage||(a._storage=s());return a[l]=u[l]=c,delete a._keys,!0}})}function pg(t,e,n,r){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:Gre(t,r),setContext:i=>pg(t,i,n,r),override:i=>pg(t.override(i),e,n,r)};return new Proxy(s,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,a){return qre(i,o,()=>Vze(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,a){return t[o]=a,delete i[o],!0}})}function Gre(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:r,isScriptable:kd(n)?n:()=>n,isIndexable:kd(r)?r:()=>r}}const zze=(t,e)=>t?t+_6(e):e,A6=(t,e)=>Rn(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function qre(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function Vze(t,e,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:o}=t;let a=r[e];return kd(a)&&o.isScriptable(e)&&(a=Wze(e,a,t,n)),ss(a)&&a.length&&(a=Gze(e,a,t,o.isIndexable)),A6(e,a)&&(a=pg(a,s,i&&i[e],o)),a}function Wze(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(i,o||r);return a.delete(t),A6(t,l)&&(l=T6(s._scopes,s,t,l)),l}function Gze(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_descriptors:a}=n;if(typeof i.index<"u"&&r(t))return e[i.index%e.length];if(Rn(e[0])){const l=e,c=s._scopes.filter(u=>u!==l);e=[];for(const u of l){const d=T6(c,s,t,u);e.push(pg(d,i,o&&o[t],a))}}return e}function Kre(t,e,n){return kd(t)?t(e,n):t}const qze=(t,e)=>t===!0?e:typeof t=="string"?dS(e,t):void 0;function Kze(t,e,n,r,s){for(const i of e){const o=qze(n,i);if(o){t.add(o);const a=Kre(o._fallback,n,s);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function T6(t,e,n,r){const s=e._rootScopes,i=Kre(e._fallback,n,r),o=[...t,...s],a=new Set;a.add(r);let l=gU(a,o,n,i||n,r);return l===null||typeof i<"u"&&i!==n&&(l=gU(a,o,i,l,r),l===null)?!1:C6(Array.from(a),[""],s,i,()=>Yze(e,n,r))}function gU(t,e,n,r,s){for(;n;)n=Kze(t,e,n,r,s);return n}function Yze(t,e,n){const r=t._getTarget();e in r||(r[e]={});const s=r[e];return ss(s)&&Rn(n)?n:s||{}}function Xze(t,e,n,r){let s;for(const i of e)if(s=Yre(zze(i,t),n),typeof s<"u")return A6(t,s)?T6(n,r,t,s):s}function Yre(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function bU(t){let e=t._keys;return e||(e=t._keys=Jze(t._scopes)),e}function Jze(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(r);return Array.from(e)}const Zze=Number.EPSILON||1e-14,mg=(t,e)=>e<t.length&&!t[e].skip&&t[e],Xre=t=>t==="x"?"y":"x";function Qze(t,e,n,r){const s=t.skip?e:t,i=e,o=n.skip?e:n,a=h4(i,s),l=h4(o,i);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=r*c,h=r*u;return{previous:{x:i.x-d*(o.x-s.x),y:i.y-d*(o.y-s.y)},next:{x:i.x+h*(o.x-s.x),y:i.y+h*(o.y-s.y)}}}function eVe(t,e,n){const r=t.length;let s,i,o,a,l,c=mg(t,0);for(let u=0;u<r-1;++u)if(l=c,c=mg(t,u+1),!(!l||!c)){if(py(e[u],0,Zze)){n[u]=n[u+1]=0;continue}s=n[u]/e[u],i=n[u+1]/e[u],a=Math.pow(s,2)+Math.pow(i,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=s*o*e[u],n[u+1]=i*o*e[u])}}function tVe(t,e,n="x"){const r=Xre(n),s=t.length;let i,o,a,l=mg(t,0);for(let c=0;c<s;++c){if(o=a,a=l,l=mg(t,c+1),!a)continue;const u=a[n],d=a[r];o&&(i=(u-o[n])/3,a[`cp1${n}`]=u-i,a[`cp1${r}`]=d-i*e[c]),l&&(i=(l[n]-u)/3,a[`cp2${n}`]=u+i,a[`cp2${r}`]=d+i*e[c])}}function nVe(t,e="x"){const n=Xre(e),r=t.length,s=Array(r).fill(0),i=Array(r);let o,a,l,c=mg(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=mg(t,o+1),!!l){if(c){const u=c[e]-l[e];s[o]=u!==0?(c[n]-l[n])/u:0}i[o]=a?c?fg(s[o-1])!==fg(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}eVe(t,s,i),tVe(t,i,e)}function Zx(t,e,n){return Math.max(Math.min(t,n),e)}function rVe(t,e){let n,r,s,i,o,a=E1(t[0],e);for(n=0,r=t.length;n<r;++n)o=i,i=a,a=n<r-1&&E1(t[n+1],e),i&&(s=t[n],o&&(s.cp1x=Zx(s.cp1x,e.left,e.right),s.cp1y=Zx(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=Zx(s.cp2x,e.left,e.right),s.cp2y=Zx(s.cp2y,e.top,e.bottom)))}function sVe(t,e,n,r,s){let i,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")nVe(t,s);else{let c=r?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)a=t[i],l=Qze(c,a,t[Math.min(i+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&rVe(t,n)}function N6(){return typeof window<"u"&&typeof document<"u"}function P6(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function pS(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const dC=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function iVe(t,e){return dC(t).getPropertyValue(e)}const oVe=["top","right","bottom","left"];function rf(t,e,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=oVe[s];r[i]=parseFloat(t[e+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const aVe=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function lVe(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:s,offsetY:i}=r;let o=!1,a,l;if(aVe(s,i,t.target))a=s,l=i;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function bh(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,s=dC(n),i=s.boxSizing==="border-box",o=rf(s,"padding"),a=rf(s,"border","width"),{x:l,y:c,box:u}=lVe(t,n),d=o.left+(u&&a.left),h=o.top+(u&&a.top);let{width:f,height:g}=e;return i&&(f-=o.width+a.width,g-=o.height+a.height),{x:Math.round((l-d)/f*n.width/r),y:Math.round((c-h)/g*n.height/r)}}function cVe(t,e,n){let r,s;if(e===void 0||n===void 0){const i=t&&P6(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),a=dC(i),l=rf(a,"border","width"),c=rf(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=pS(a.maxWidth,i,"clientWidth"),s=pS(a.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:r||fS,maxHeight:s||fS}}const Qx=t=>Math.round(t*10)/10;function uVe(t,e,n,r){const s=dC(t),i=rf(s,"margin"),o=pS(s.maxWidth,t,"clientWidth")||fS,a=pS(s.maxHeight,t,"clientHeight")||fS,l=cVe(t,e,n);let{width:c,height:u}=l;if(s.boxSizing==="content-box"){const h=rf(s,"border","width"),f=rf(s,"padding");c-=f.width+h.width,u-=f.height+h.height}return c=Math.max(0,c-i.width),u=Math.max(0,r?c/r:u-i.height),c=Qx(Math.min(c,o,l.maxWidth)),u=Qx(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Qx(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&u>l.height&&(u=l.height,c=Qx(Math.floor(u*r))),{width:c,height:u}}function yU(t,e,n){const r=e||1,s=Math.floor(t.height*r),i=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==s||o.width!==i?(t.currentDevicePixelRatio=r,o.height=s,o.width=i,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const dVe=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};N6()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function vU(t,e){const n=iVe(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function yh(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function hVe(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function fVe(t,e,n,r){const s={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=yh(t,s,n),a=yh(s,i,n),l=yh(i,e,n),c=yh(o,a,n),u=yh(a,l,n);return yh(c,u,n)}const pVe=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},mVe=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Pm(t,e,n){return t?pVe(e,n):mVe()}function Jre(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function Zre(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Qre(t){return t==="angle"?{between:Fre,compare:hze,normalize:Bu}:{between:Ab,compare:(e,n)=>e-n,normalize:e=>e}}function _U({start:t,end:e,count:n,loop:r,style:s}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:s}}function gVe(t,e,n){const{property:r,start:s,end:i}=n,{between:o,normalize:a}=Qre(r),l=e.length;let{start:c,end:u,loop:d}=t,h,f;if(d){for(c+=l,u+=l,h=0,f=l;h<f&&o(a(e[c%l][r]),s,i);++h)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:t.style}}function bVe(t,e,n){if(!n)return[t];const{property:r,start:s,end:i}=n,o=e.length,{compare:a,between:l,normalize:c}=Qre(r),{start:u,end:d,loop:h,style:f}=gVe(t,e,n),g=[];let y=!1,m=null,b,v,_;const E=()=>l(s,_,b)&&a(s,_)!==0,w=()=>a(i,b)===0||l(i,_,b),S=()=>y||E(),k=()=>!y||w();for(let x=u,I=u;x<=d;++x)v=e[x%o],!v.skip&&(b=c(v[r]),b!==_&&(y=l(b,s,i),m===null&&S()&&(m=a(b,s)===0?x:I),m!==null&&k()&&(g.push(_U({start:m,end:x,loop:h,count:o,style:f})),m=null),I=x,_=b));return m!==null&&g.push(_U({start:m,end:d,loop:h,count:o,style:f})),g}function yVe(t,e){const n=[],r=t.segments;for(let s=0;s<r.length;s++){const i=bVe(r[s],t.points,e);i.length&&n.push(...i)}return n}function vVe(t,e,n,r){let s=0,i=e-1;if(n&&!r)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(i+=s);i>s&&t[i%e].skip;)i--;return i%=e,{start:s,end:i}}function _Ve(t,e,n,r){const s=t.length,i=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%s];c.skip||c.stop?a.skip||(r=!1,i.push({start:e%s,end:(l-1)%s,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&i.push({start:e%s,end:o%s,loop:r}),i}function xVe(t,e){const n=t.points,r=t.options.spanGaps,s=n.length;if(!s)return[];const i=!!t._loop,{start:o,end:a}=vVe(n,s,i,r);if(r===!0)return xU(t,[{start:o,end:a,loop:i}],n,e);const l=a<o?a+s:a,c=!!t._fullLoop&&o===0&&a===s-1;return xU(t,_Ve(n,o,l,c),n,e)}function xU(t,e,n,r){return!r||!r.setContext||!n?e:wVe(t,e,n,r)}function wVe(t,e,n,r){const s=t._chart.getContext(),i=wU(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=i,d=e[0].start,h=d;function f(g,y,m,b){const v=a?-1:1;if(g!==y){for(g+=l;n[g%l].skip;)g-=v;for(;n[y%l].skip;)y+=v;g%l!==y%l&&(c.push({start:g%l,end:y%l,loop:m,style:b}),u=b,d=y%l)}}for(const g of e){d=a?d:g.start;let y=n[d%l],m;for(h=d+1;h<=g.end;h++){const b=n[h%l];m=wU(r.setContext(Gf(s,{type:"segment",p0:y,p1:b,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:o}))),EVe(m,u)&&f(d,h-1,g.loop,u),y=b,u=m}d<h-1&&f(d,h-1,g.loop,u)}return c}function wU(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function EVe(t,e){if(!e)return!1;const n=[],r=function(s,i){return E6(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(t,r)!==JSON.stringify(e,r)}/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class SVe{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,s){const i=n.listeners[s],o=n.duration;i.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Ure.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const i=r.items;let o=i.length-1,a=!1,l;for(;o>=0;--o)l=i[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(s.draw(),this._notify(s,r,e,"progress")),i.length||(r.running=!1,this._notify(s,r,e,"complete"),r.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var xc=new SVe;const EU="transparent",kVe={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=hU(t||EU),s=r.valid&&hU(e||EU);return s&&s.valid?s.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class CVe{constructor(e,n,r,s){const i=n[r];s=Jx([e.to,s,i,e.from]);const o=Jx([e.from,i,s]);this._active=!0,this._fn=e.fn||kVe[e.type||typeof o],this._easing=my[e.easing]||my.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],i=r-this._start,o=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=Jx([e.to,n,s,e.from]),this._from=Jx([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,s=this._prop,i=this._from,o=this._loop,a=this._to;let l;if(this._active=i!==a&&(o||n<r),!this._active){this._target[s]=a,this._notify(!0);return}if(n<0){this._target[s]=i;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(i,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class ese{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Rn(e))return;const n=Object.keys(Ir.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const i=e[s];if(!Rn(i))return;const o={};for(const a of n)o[a]=i[a];(ss(i.properties)&&i.properties||[s]).forEach(a=>{(a===s||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,s=TVe(e,r);if(!s)return[];const i=this._createAnimations(s,r);return r.$shared&&AVe(e.options.$animations,r).then(()=>{e.options=r},()=>{}),i}_createAnimations(e,n){const r=this._properties,s=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,n));continue}const u=n[c];let d=i[c];const h=r.get(c);if(d)if(h&&d.active()){d.update(h,u,a);continue}else d.cancel();if(!h||!h.duration){e[c]=u;continue}i[c]=d=new CVe(h,e,c,u),s.push(d)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return xc.add(this._chart,r),!0}}function AVe(t,e){const n=[],r=Object.keys(e);for(let s=0;s<r.length;s++){const i=t[r[s]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function TVe(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function SU(t,e){const n=t&&t.options||{},r=n.reverse,s=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:r?i:s,end:r?s:i}}function NVe(t,e,n){if(n===!1)return!1;const r=SU(t,n),s=SU(e,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function PVe(t){let e,n,r,s;return Rn(t)?(e=t.top,n=t.right,r=t.bottom,s=t.left):e=n=r=s=t,{top:e,right:n,bottom:r,left:s,disabled:t===!1}}function tse(t,e){const n=[],r=t._getSortedDatasetMetas(e);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function kU(t,e,n,r={}){const s=t.keys,i=r.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===n){if(u=!0,r.all)continue;break}c=t.values[l],Wo(c)&&(i||e===0||fg(e)===fg(c))&&(e+=c)}return!u&&!r.all?0:e}function IVe(t,e){const{iScale:n,vScale:r}=e,s=n.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[s]:u,[i]:t[u]};return a}function M5(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function RVe(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function LVe(t){const{min:e,max:n,minDefined:r,maxDefined:s}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function OVe(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function CU(t,e,n,r){for(const s of e.getMatchingVisibleMetas(r).reverse()){const i=t[s.index];if(n&&i>0||!n&&i<0)return s.index}return null}function AU(t,e){const{chart:n,_cachedMeta:r}=t,s=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:a}=r,l=i.axis,c=o.axis,u=RVe(i,o,r),d=e.length;let h;for(let f=0;f<d;++f){const g=e[f],{[l]:y,[c]:m}=g,b=g._stacks||(g._stacks={});h=b[c]=OVe(s,u,y),h[a]=m,h._top=CU(h,o,!0,r.type),h._bottom=CU(h,o,!1,r.type);const v=h._visualValues||(h._visualValues={});v[a]=m}}function j5(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function DVe(t,e){return Gf(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function MVe(t,e,n){return Gf(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function G0(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const s of e){const i=s._stacks;if(!i||i[r]===void 0||i[r][n]===void 0)return;delete i[r][n],i[r]._visualValues!==void 0&&i[r]._visualValues[n]!==void 0&&delete i[r]._visualValues[n]}}}const F5=t=>t==="reset"||t==="none",TU=(t,e)=>e?t:Object.assign({},t),jVe=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:tse(n,!0),values:null};class nse{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=M5(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&G0(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(d,h,f,g)=>d==="x"?h:d==="r"?g:f,i=n.xAxisID=bn(r.xAxisID,j5(e,"x")),o=n.yAxisID=bn(r.yAxisID,j5(e,"y")),a=n.rAxisID=bn(r.rAxisID,j5(e,"r")),l=n.indexAxis,c=n.iAxisID=s(l,i,o,a),u=n.vAxisID=s(l,o,i,a);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&cU(this._data,this),e._stacked&&G0(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(Rn(n)){const s=this._cachedMeta;this._data=IVe(n,s)}else if(r!==n){if(r){cU(r,this);const s=this._cachedMeta;G0(s),s._parsed=[]}n&&Object.isExtensible(n)&&gze(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const i=n._stacked;n._stacked=M5(n.vScale,n),n.stack!==r.stack&&(s=!0,G0(n),n.stack=r.stack),this._resyncElements(e),(s||i!==n._stacked)&&(AU(this,n._parsed),n._stacked=M5(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:s}=this,{iScale:i,_stacked:o}=r,a=i.axis;let l=e===0&&n===s.length?!0:r._sorted,c=e>0&&r._parsed[e-1],u,d,h;if(this._parsing===!1)r._parsed=s,r._sorted=!0,h=s;else{ss(s[e])?h=this.parseArrayData(r,s,e,n):Rn(s[e])?h=this.parseObjectData(r,s,e,n):h=this.parsePrimitiveData(r,s,e,n);const f=()=>d[a]===null||c&&d[a]<c[a];for(u=0;u<n;++u)r._parsed[u+e]=d=h[u],l&&(f()&&(l=!1),c=d);r._sorted=l}o&&AU(this,h)}parsePrimitiveData(e,n,r,s){const{iScale:i,vScale:o}=e,a=i.axis,l=o.axis,c=i.getLabels(),u=i===o,d=new Array(s);let h,f,g;for(h=0,f=s;h<f;++h)g=h+r,d[h]={[a]:u||i.parse(c[g],g),[l]:o.parse(n[g],g)};return d}parseArrayData(e,n,r,s){const{xScale:i,yScale:o}=e,a=new Array(s);let l,c,u,d;for(l=0,c=s;l<c;++l)u=l+r,d=n[u],a[l]={x:i.parse(d[0],u),y:o.parse(d[1],u)};return a}parseObjectData(e,n,r,s){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let u,d,h,f;for(u=0,d=s;u<d;++u)h=u+r,f=n[h],c[u]={x:i.parse(dS(f,a),h),y:o.parse(dS(f,l),h)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const s=this.chart,i=this._cachedMeta,o=n[e.axis],a={keys:tse(s,!0),values:n._stacks[e.axis]._visualValues};return kU(a,o,i.index,{mode:r})}updateRangeFromParsed(e,n,r,s){const i=r[n.axis];let o=i===null?NaN:i;const a=s&&r._stacks[n.axis];s&&a&&(s.values=a,o=kU(s,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,s=r._parsed,i=r._sorted&&e===r.iScale,o=s.length,a=this._getOtherScale(e),l=jVe(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=LVe(a);let h,f;function g(){f=s[h];const y=f[a.axis];return!Wo(f[e.axis])||u>y||d<y}for(h=0;h<o&&!(!g()&&(this.updateRangeFromParsed(c,e,f,l),i));++h);if(i){for(h=o-1;h>=0;--h)if(!g()){this.updateRangeFromParsed(c,e,f,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let s,i,o;for(s=0,i=n.length;s<i;++s)o=n[s][e.axis],Wo(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,s=n.vScale,i=this.getParsed(e);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=PVe(bn(this.options.clip,NVe(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],i=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(e,i,a,l),u=a;u<a+l;++u){const d=s[u];d.hidden||(d.active&&c?o.push(d):d.draw(e,i))}for(u=0;u<o.length;++u)o[u].draw(e,i)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const s=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=MVe(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=s.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=DVe(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=r,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const s=n==="active",i=this._cachedDataOpts,o=e+"-"+n,a=i[o],l=this.enableOptionSharing&&hS(r);if(a)return TU(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),d=s?[`${e}Hover`,"hover",e,""]:[e,""],h=c.getOptionScopes(this.getDataset(),u),f=Object.keys(Ir.elements[e]),g=()=>this.getContext(r,s,n),y=c.resolveNamedOptions(h,f,g,d);return y.$shared&&(y.$shared=l,i[o]=Object.freeze(TU(y,l))),y}_resolveAnimations(e,n,r){const s=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,a=i[o];if(a)return a;let l;if(s.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,n),h=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(h,this.getContext(e,r,n))}const c=new ese(s,l&&l.animations);return l&&l._cacheable&&(i[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||F5(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,i=this.getSharedOptions(r),o=this.includeOptions(n,i)||i!==s;return this.updateSharedOptions(i,n,r),{sharedOptions:i,includeOptions:o}}updateElement(e,n,r,s){F5(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!F5(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;const i=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=r.length,i=n.length,o=Math.min(i,s);o&&this.parse(0,o),i>s?this._insertElements(s,i-s,e):i<s&&this._removeElements(i,s-i)}_insertElements(e,n,r=!0){const s=this._cachedMeta,i=s.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,n),r&&this.updateElements(i,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,n);r._stacked&&G0(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}class FVe extends nse{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:s=[],_dataset:i}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=_ze(n,s,o);this._drawStart=a,this._drawCount=l,xze(n)&&(a=0,l=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!i._decimated,r.points=s;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(s,a,l,e)}updateElements(e,n,r,s){const i=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:d}=this._getSharedOptions(n,s),h=o.axis,f=a.axis,{spanGaps:g,segment:y}=this.options,m=w1(g)?g:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||i||s==="none",v=n+r,_=e.length;let E=n>0&&this.getParsed(n-1);for(let w=0;w<_;++w){const S=e[w],k=b?S:{};if(w<n||w>=v){k.skip=!0;continue}const x=this.getParsed(w),I=yr(x[f]),R=k[h]=o.getPixelForValue(x[h],w),C=k[f]=i||I?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,x,l):x[f],w);k.skip=isNaN(R)||isNaN(C)||I,k.stop=w>0&&Math.abs(x[h]-E[h])>m,y&&(k.parsed=x,k.raw=c.data[w]),d&&(k.options=u||this.resolveDataElementOptions(w,S.active?"active":s)),b||this.updateElement(S,w,k,s),E=x}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return r;const i=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function oh(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class I6{static override(e){Object.assign(I6.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return oh()}parse(){return oh()}format(){return oh()}add(){return oh()}diff(){return oh()}startOf(){return oh()}endOf(){return oh()}}var BVe={_date:I6};function UVe(t,e,n,r){const{controller:s,data:i,_sorted:o}=t,a=s._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&i.length){const l=a._reversePixels?pze:Oh;if(r){if(s._sharedOptions){const c=i[0],u=typeof c.getRange=="function"&&c.getRange(e);if(u){const d=l(i,e,n-u),h=l(i,e,n+u);return{lo:d.lo,hi:h.hi}}}}else return l(i,e,n)}return{lo:0,hi:i.length-1}}function hC(t,e,n,r,s){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=i.length;a<l;++a){const{index:c,data:u}=i[a],{lo:d,hi:h}=UVe(i[a],e,o,s);for(let f=d;f<=h;++f){const g=u[f];g.skip||r(g,c,f)}}}function $Ve(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,s){const i=e?Math.abs(r.x-s.x):0,o=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function B5(t,e,n,r,s){const i=[];return!s&&!t.isPointInArea(e)||hC(t,n,e,function(a,l,c){!s&&!E1(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&i.push({element:a,datasetIndex:l,index:c})},!0),i}function HVe(t,e,n,r){let s=[];function i(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:d}=dze(o,{x:e.x,y:e.y});Fre(d,c,u)&&s.push({element:o,datasetIndex:a,index:l})}return hC(t,n,e,i),s}function zVe(t,e,n,r,s,i){let o=[];const a=$Ve(n);let l=Number.POSITIVE_INFINITY;function c(u,d,h){const f=u.inRange(e.x,e.y,s);if(r&&!f)return;const g=u.getCenterPoint(s);if(!(!!i||t.isPointInArea(g))&&!f)return;const m=a(e,g);m<l?(o=[{element:u,datasetIndex:d,index:h}],l=m):m===l&&o.push({element:u,datasetIndex:d,index:h})}return hC(t,n,e,c),o}function U5(t,e,n,r,s,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!r?HVe(t,e,n,s):zVe(t,e,n,r,s,i)}function NU(t,e,n,r,s){const i=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return hC(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],s)&&(i.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,s))}),r&&!a?[]:i}var VVe={modes:{index(t,e,n,r){const s=bh(e,t),i=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?B5(t,s,i,r,o):U5(t,s,i,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,r){const s=bh(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?B5(t,s,i,r,o):U5(t,s,i,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,r){const s=bh(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return B5(t,s,i,r,o)},nearest(t,e,n,r){const s=bh(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return U5(t,s,i,n.intersect,r,o)},x(t,e,n,r){const s=bh(e,t);return NU(t,s,"x",n.intersect,r)},y(t,e,n,r){const s=bh(e,t);return NU(t,s,"y",n.intersect,r)}}};const rse=["left","top","right","bottom"];function q0(t,e){return t.filter(n=>n.pos===e)}function PU(t,e){return t.filter(n=>rse.indexOf(n.pos)===-1&&n.box.axis===e)}function K0(t,e){return t.sort((n,r)=>{const s=e?r:n,i=e?n:r;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function WVe(t){const e=[];let n,r,s,i,o,a;for(n=0,r=(t||[]).length;n<r;++n)s=t[n],{position:i,options:{stack:o,stackWeight:a=1}}=s,e.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&i+o,stackWeight:a});return e}function GVe(t){const e={};for(const n of t){const{stack:r,pos:s,stackWeight:i}=n;if(!r||!rse.includes(s))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function qVe(t,e){const n=GVe(t),{vBoxMaxWidth:r,hBoxMaxHeight:s}=e;let i,o,a;for(i=0,o=t.length;i<o;++i){a=t[i];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*r:l&&e.availableWidth,a.height=s):(a.width=r,a.height=u?u*s:l&&e.availableHeight)}return n}function KVe(t){const e=WVe(t),n=K0(e.filter(c=>c.box.fullSize),!0),r=K0(q0(e,"left"),!0),s=K0(q0(e,"right")),i=K0(q0(e,"top"),!0),o=K0(q0(e,"bottom")),a=PU(e,"x"),l=PU(e,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:q0(e,"chartArea"),vertical:r.concat(s).concat(l),horizontal:i.concat(o).concat(a)}}function IU(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function sse(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function YVe(t,e,n,r){const{pos:s,box:i}=n,o=t.maxPadding;if(!Rn(s)){n.size&&(t[s]-=n.size);const d=r[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?i.height:i.width),n.size=d.size/d.count,t[s]+=n.size}i.getPadding&&sse(o,i.getPadding());const a=Math.max(0,e.outerWidth-IU(o,t,"left","right")),l=Math.max(0,e.outerHeight-IU(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function XVe(t){const e=t.maxPadding;function n(r){const s=Math.max(e[r]-t[r],0);return t[r]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function JVe(t,e){const n=e.maxPadding;function r(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return r(t?["left","right"]:["top","bottom"])}function Tb(t,e,n,r){const s=[];let i,o,a,l,c,u;for(i=0,o=t.length,c=0;i<o;++i){a=t[i],l=a.box,l.update(a.width||e.w,a.height||e.h,JVe(a.horizontal,e));const{same:d,other:h}=YVe(e,n,a,r);c|=d&&s.length,u=u||h,l.fullSize||s.push(a)}return c&&Tb(s,e,n,r)||u}function ew(t,e,n,r,s){t.top=n,t.left=e,t.right=e+r,t.bottom=n+s,t.width=r,t.height=s}function RU(t,e,n,r){const s=n.padding;let{x:i,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*u,h=c.size||l.height;hS(c.start)&&(o=c.start),l.fullSize?ew(l,s.left,o,n.outerWidth-s.right-s.left,h):ew(l,e.left+c.placed,o,d,h),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*u,h=c.size||l.width;hS(c.start)&&(i=c.start),l.fullSize?ew(l,i,s.top,h,n.outerHeight-s.bottom-s.top):ew(l,i,e.top+c.placed,h,d),c.start=i,c.placed+=d,i=l.right}}e.x=i,e.y=o}var Lo={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const s=Go(t.options.layout.padding),i=Math.max(e-s.width,0),o=Math.max(n-s.height,0),a=KVe(t.boxes),l=a.vertical,c=a.horizontal;jn(t.boxes,y=>{typeof y.beforeLayout=="function"&&y.beforeLayout()});const u=l.reduce((y,m)=>m.box.options&&m.box.options.display===!1?y:y+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/u,hBoxMaxHeight:o/2}),h=Object.assign({},s);sse(h,Go(r));const f=Object.assign({maxPadding:h,w:i,h:o,x:s.left,y:s.top},s),g=qVe(l.concat(c),d);Tb(a.fullSize,f,d,g),Tb(l,f,d,g),Tb(c,f,d,g)&&Tb(l,f,d,g),XVe(f),RU(a.leftAndTop,f,d,g),f.x+=f.w,f.y+=f.h,RU(a.rightAndBottom,f,d,g),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},jn(a.chartArea,y=>{const m=y.box;Object.assign(m,t.chartArea),m.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class ise{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,s){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(e){return!0}updateConfig(e){}}class ZVe extends ise{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const m2="$chartjs",QVe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},LU=t=>t===null||t==="";function eWe(t,e){const n=t.style,r=t.getAttribute("height"),s=t.getAttribute("width");if(t[m2]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",LU(s)){const i=vU(t,"width");i!==void 0&&(t.width=i)}if(LU(r))if(t.style.height==="")t.height=t.width/(e||2);else{const i=vU(t,"height");i!==void 0&&(t.height=i)}return t}const ose=dVe?{passive:!0}:!1;function tWe(t,e,n){t&&t.addEventListener(e,n,ose)}function nWe(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,ose)}function rWe(t,e){const n=QVe[t.type]||t.type,{x:r,y:s}=bh(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:s!==void 0?s:null}}function mS(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function sWe(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||mS(a.addedNodes,r),o=o&&!mS(a.removedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function iWe(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||mS(a.removedNodes,r),o=o&&!mS(a.addedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const k1=new Map;let OU=0;function ase(){const t=window.devicePixelRatio;t!==OU&&(OU=t,k1.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function oWe(t,e){k1.size||window.addEventListener("resize",ase),k1.set(t,e)}function aWe(t){k1.delete(t),k1.size||window.removeEventListener("resize",ase)}function lWe(t,e,n){const r=t.canvas,s=r&&P6(r);if(!s)return;const i=$re((a,l)=>{const c=s.clientWidth;n(a,l),c<s.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||i(c,u)});return o.observe(s),oWe(t,i),o}function $5(t,e,n){n&&n.disconnect(),e==="resize"&&aWe(t)}function cWe(t,e,n){const r=t.canvas,s=$re(i=>{t.ctx!==null&&n(rWe(i,t))},t);return tWe(r,e,s),s}class uWe extends ise{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(eWe(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[m2])return!1;const r=n[m2].initial;["height","width"].forEach(i=>{const o=r[i];yr(o)?n.removeAttribute(i):n.setAttribute(i,o)});const s=r.style||{};return Object.keys(s).forEach(i=>{n.style[i]=s[i]}),n.width=n.width,delete n[m2],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:sWe,detach:iWe,resize:lWe}[n]||cWe;s[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),s=r[n];if(!s)return;({attach:$5,detach:$5,resize:$5}[n]||nWe)(e,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,s){return uVe(e,n,r,s)}isAttached(e){const n=e&&P6(e);return!!(n&&n.isConnected)}}function dWe(t){return!N6()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?ZVe:uWe}let qf=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return w1(this.x)&&w1(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const s={};return e.forEach(i=>{s[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),s}};function hWe(t,e){const n=t.options.ticks,r=fWe(t),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?mWe(e):[],o=i.length,a=i[0],l=i[o-1],c=[];if(o>s)return gWe(e,c,i,o/s),c;const u=pWe(i,e,s);if(o>0){let d,h;const f=o>1?Math.round((l-a)/(o-1)):null;for(tw(e,c,u,yr(f)?0:a-f,a),d=0,h=o-1;d<h;d++)tw(e,c,u,i[d],i[d+1]);return tw(e,c,u,l,yr(f)?e.length:l+f),c}return tw(e,c,u),c}function fWe(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(r,s))}function pWe(t,e,n){const r=bWe(t),s=e.length/n;if(!r)return Math.max(s,1);const i=aze(r);for(let o=0,a=i.length-1;o<a;o++){const l=i[o];if(l>s)return l}return Math.max(s,1)}function mWe(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function gWe(t,e,n,r){let s=0,i=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===i&&(e.push(t[o]),s++,i=n[s*r])}function tw(t,e,n,r,s){const i=bn(r,0),o=Math.min(bn(s,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),s&&(l=s-r,n=l/Math.floor(l/n)),u=i;u<0;)a++,u=Math.round(i+a*n);for(c=Math.max(i,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(i+a*n))}function bWe(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const yWe=t=>t==="left"?"right":t==="right"?"left":t,DU=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,MU=(t,e)=>Math.min(e||t,t);function jU(t,e){const n=[],r=t.length/e,s=t.length;let i=0;for(;i<s;i+=r)n.push(t[Math.floor(i)]);return n}function vWe(t,e,n){const r=t.ticks.length,s=Math.min(e,r-1),i=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(s),c;if(!(n&&(r===1?c=Math.max(l-i,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<i-a||l>o+a)))return l}function _We(t,e){jn(t,n=>{const r=n.gc,s=r.length/2;let i;if(s>e){for(i=0;i<s;++i)delete n.data[r[i]];r.splice(0,s)}})}function Y0(t){return t.drawTicks?t.tickLength:0}function FU(t,e){if(!t.display)return 0;const n=Hs(t.font,e),r=Go(t.padding);return(ss(t.text)?t.text.length:1)*n.lineHeight+r.height}function xWe(t,e){return Gf(t,{scale:e,type:"scale"})}function wWe(t,e,n){return Gf(t,{tick:n,index:e,type:"tick"})}function EWe(t,e,n){let r=w6(t);return(n&&e!=="right"||!n&&e==="right")&&(r=yWe(r)),r}function SWe(t,e,n,r){const{top:s,left:i,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let d=0,h,f,g;const y=o-s,m=a-i;if(t.isHorizontal()){if(f=Os(r,i,a),Rn(n)){const b=Object.keys(n)[0],v=n[b];g=u[b].getPixelForValue(v)+y-e}else n==="center"?g=(c.bottom+c.top)/2+y-e:g=DU(t,n,e);h=a-i}else{if(Rn(n)){const b=Object.keys(n)[0],v=n[b];f=u[b].getPixelForValue(v)-m+e}else n==="center"?f=(c.left+c.right)/2-m+e:f=DU(t,n,e);g=Os(r,o,s),d=n==="left"?-_a:_a}return{titleX:f,titleY:g,maxWidth:h,rotation:d}}class Gg extends qf{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return e=el(e,Number.POSITIVE_INFINITY),n=el(n,Number.NEGATIVE_INFINITY),r=el(r,Number.POSITIVE_INFINITY),s=el(s,Number.NEGATIVE_INFINITY),{min:el(e,r),max:el(n,s),minDefined:Wo(e),maxDefined:Wo(n)}}getMinMax(e){let{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds(),o;if(s&&i)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),i||(r=Math.max(r,o.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:el(n,el(r,n)),max:el(r,el(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Zn(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:s,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Hze(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?jU(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=hWe(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Zn(this.options.afterUpdate,[this])}beforeSetDimensions(){Zn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Zn(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Zn(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Zn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r],i.label=Zn(n.callback,[i.value,r,e],this)}afterTickToLabelConversion(){Zn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Zn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=MU(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,i=n.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!n.display||s>=i||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const u=this._getLabelSizes(),d=u.widest.width,h=u.highest.height,f=Ro(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/r:f/(r-1),d+6>a&&(a=f/(r-(e.offset?.5:1)),l=this.maxHeight-Y0(e.grid)-n.padding-FU(e.title,this.chart.options.font),c=Math.sqrt(d*d+h*h),o=uze(Math.min(Math.asin(Ro((u.highest.height+6)/a,-1,1)),Math.asin(Ro(l/c,-1,1))-Math.asin(Ro(h/c,-1,1)))),o=Math.max(s,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){Zn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Zn(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=FU(s,n.options.font);if(a?(e.width=this.maxWidth,e.height=Y0(i)+l):(e.height=this.maxHeight,e.width=Y0(i)+l),r.display&&this.ticks.length){const{first:c,last:u,widest:d,highest:h}=this._getLabelSizes(),f=r.padding*2,g=Lh(this.labelRotation),y=Math.cos(g),m=Math.sin(g);if(a){const b=r.mirror?0:m*d.width+y*h.height;e.height=Math.min(this.maxHeight,e.height+b+f)}else{const b=r.mirror?0:y*d.width+m*h.height;e.width=Math.min(this.maxWidth,e.width+b+f)}this._calculatePadding(c,u,m,y)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,s){const{ticks:{align:i,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,f=0;l?c?(h=s*e.width,f=r*n.height):(h=r*e.height,f=s*n.width):i==="start"?f=n.width:i==="end"?h=e.width:i!=="inner"&&(h=e.width/2,f=n.width/2),this.paddingLeft=Math.max((h-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-d+o)*this.width/(this.width-d),0)}else{let u=n.height/2,d=e.height/2;i==="start"?(u=0,d=e.height):i==="end"&&(u=n.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Zn(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)yr(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=jU(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:s,_longestTextCache:i}=this,o=[],a=[],l=Math.floor(n/MU(n,r));let c=0,u=0,d,h,f,g,y,m,b,v,_,E,w;for(d=0;d<n;d+=l){if(g=e[d].label,y=this._resolveTickFontOptions(d),s.font=m=y.string,b=i[m]=i[m]||{data:{},gc:[]},v=y.lineHeight,_=E=0,!yr(g)&&!ss(g))_=pU(s,b.data,b.gc,_,g),E=v;else if(ss(g))for(h=0,f=g.length;h<f;++h)w=g[h],!yr(w)&&!ss(w)&&(_=pU(s,b.data,b.gc,_,w),E+=v);o.push(_),a.push(E),c=Math.max(_,c),u=Math.max(E,u)}_We(i,n);const S=o.indexOf(c),k=a.indexOf(u),x=I=>({width:o[I]||0,height:a[I]||0});return{first:x(0),last:x(n-1),widest:x(S),highest:x(k),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return fze(this._alignToPixels?ih(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=wWe(this.getContext(),e,r))}return this.$context||(this.$context=xWe(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Lh(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,l=i?i.highest.height+o:0;return this.isHorizontal()?l*r>a*s?a/r:l/s:l*s<a*r?l/r:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,s=this.options,{grid:i,position:o,border:a}=s,l=i.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),h=Y0(i),f=[],g=a.setContext(this.getContext()),y=g.display?g.width:0,m=y/2,b=function(ee){return ih(r,ee,y)};let v,_,E,w,S,k,x,I,R,C,N,O;if(o==="top")v=b(this.bottom),k=this.bottom-h,I=v-m,C=b(e.top)+m,O=e.bottom;else if(o==="bottom")v=b(this.top),C=e.top,O=b(e.bottom)-m,k=v+m,I=this.top+h;else if(o==="left")v=b(this.right),S=this.right-h,x=v-m,R=b(e.left)+m,N=e.right;else if(o==="right")v=b(this.left),R=e.left,N=b(e.right)-m,S=v+m,x=this.left+h;else if(n==="x"){if(o==="center")v=b((e.top+e.bottom)/2+.5);else if(Rn(o)){const ee=Object.keys(o)[0],J=o[ee];v=b(this.chart.scales[ee].getPixelForValue(J))}C=e.top,O=e.bottom,k=v+m,I=k+h}else if(n==="y"){if(o==="center")v=b((e.left+e.right)/2);else if(Rn(o)){const ee=Object.keys(o)[0],J=o[ee];v=b(this.chart.scales[ee].getPixelForValue(J))}S=v-m,x=S-h,R=e.left,N=e.right}const P=bn(s.ticks.maxTicksLimit,d),$=Math.max(1,Math.ceil(d/P));for(_=0;_<d;_+=$){const ee=this.getContext(_),J=i.setContext(ee),Z=a.setContext(ee),M=J.lineWidth,F=J.color,G=Z.dash||[],D=Z.dashOffset,j=J.tickWidth,V=J.tickColor,W=J.tickBorderDash||[],re=J.tickBorderDashOffset;E=vWe(this,_,l),E!==void 0&&(w=ih(r,E,M),c?S=x=R=N=w:k=I=C=O=w,f.push({tx1:S,ty1:k,tx2:x,ty2:I,x1:R,y1:C,x2:N,y2:O,width:M,color:F,borderDash:G,borderDashOffset:D,tickWidth:j,tickColor:V,tickBorderDash:W,tickBorderDashOffset:re}))}return this._ticksLength=d,this._borderValue=v,f}_computeLabelItems(e){const n=this.axis,r=this.options,{position:s,ticks:i}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=i,h=Y0(r.grid),f=h+u,g=d?-u:f,y=-Lh(this.labelRotation),m=[];let b,v,_,E,w,S,k,x,I,R,C,N,O="middle";if(s==="top")S=this.bottom-g,k=this._getXAxisLabelAlignment();else if(s==="bottom")S=this.top+g,k=this._getXAxisLabelAlignment();else if(s==="left"){const $=this._getYAxisLabelAlignment(h);k=$.textAlign,w=$.x}else if(s==="right"){const $=this._getYAxisLabelAlignment(h);k=$.textAlign,w=$.x}else if(n==="x"){if(s==="center")S=(e.top+e.bottom)/2+f;else if(Rn(s)){const $=Object.keys(s)[0],ee=s[$];S=this.chart.scales[$].getPixelForValue(ee)+f}k=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")w=(e.left+e.right)/2-f;else if(Rn(s)){const $=Object.keys(s)[0],ee=s[$];w=this.chart.scales[$].getPixelForValue(ee)}k=this._getYAxisLabelAlignment(h).textAlign}n==="y"&&(l==="start"?O="top":l==="end"&&(O="bottom"));const P=this._getLabelSizes();for(b=0,v=a.length;b<v;++b){_=a[b],E=_.label;const $=i.setContext(this.getContext(b));x=this.getPixelForTick(b)+i.labelOffset,I=this._resolveTickFontOptions(b),R=I.lineHeight,C=ss(E)?E.length:1;const ee=C/2,J=$.color,Z=$.textStrokeColor,M=$.textStrokeWidth;let F=k;o?(w=x,k==="inner"&&(b===v-1?F=this.options.reverse?"left":"right":b===0?F=this.options.reverse?"right":"left":F="center"),s==="top"?c==="near"||y!==0?N=-C*R+R/2:c==="center"?N=-P.highest.height/2-ee*R+R:N=-P.highest.height+R/2:c==="near"||y!==0?N=R/2:c==="center"?N=P.highest.height/2-ee*R:N=P.highest.height-C*R,d&&(N*=-1),y!==0&&!$.showLabelBackdrop&&(w+=R/2*Math.sin(y))):(S=x,N=(1-C)*R/2);let G;if($.showLabelBackdrop){const D=Go($.backdropPadding),j=P.heights[b],V=P.widths[b];let W=N-D.top,re=0-D.left;switch(O){case"middle":W-=j/2;break;case"bottom":W-=j;break}switch(k){case"center":re-=V/2;break;case"right":re-=V;break;case"inner":b===v-1?re-=V:b>0&&(re-=V/2);break}G={left:re,top:W,width:V+D.width,height:j+D.height,color:$.backdropColor}}m.push({label:E,font:I,textOffset:N,options:{rotation:y,color:J,strokeColor:Z,strokeWidth:M,textAlign:F,textBaseline:O,translation:[w,S],backdrop:G}})}return m}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Lh(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:s,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,l=o.widest.width;let c,u;return n==="left"?s?(u=this.right+i,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?s?(u=this.left+i,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:s,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,s,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(i=>i.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(l,c,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(i=0,o=s.length;i<o;++i){const l=s[i];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:s}}=this,i=r.setContext(this.getContext()),o=r.display?i.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,d,h;this.isHorizontal()?(c=ih(e,this.left,o)-o/2,u=ih(e,this.right,a)+a/2,d=h=l):(d=ih(e,this.top,o)-o/2,h=ih(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(c,d),n.lineTo(u,h),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&S6(r,s);const i=this.getLabelItems(e);for(const o of i){const a=o.options,l=o.font,c=o.label,u=o.textOffset;S1(r,c,0,u,l,a)}s&&k6(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const i=Hs(r.font),o=Go(r.padding),a=r.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||Rn(n)?(l+=o.bottom,ss(r.text)&&(l+=i.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:d,rotation:h}=SWe(this,l,n,a);S1(e,r.text,0,0,i,{color:r.color,maxWidth:d,rotation:h,textAlign:EWe(a,n,s),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=bn(e.grid&&e.grid.z,-1),s=bn(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Gg.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let i,o;for(i=0,o=n.length;i<o;++i){const a=n[i];a[r]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Hs(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class nw{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;AWe(n)&&(r=this.register(n));const s=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in s||(s[i]=e,kWe(e,o,r),this.override&&Ir.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,s=this.scope;r in n&&delete n[r],s&&r in Ir[s]&&(delete Ir[s][r],this.override&&delete wf[r])}}function kWe(t,e,n){const r=x1(Object.create(null),[n?Ir.get(n):{},Ir.get(e),t.defaults]);Ir.set(e,r),t.defaultRoutes&&CWe(e,t.defaultRoutes),t.descriptors&&Ir.describe(e,t.descriptors)}function CWe(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),s=r.pop(),i=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Ir.route(i,s,l,a)})}function AWe(t){return"id"in t&&"defaults"in t}class TWe{constructor(){this.controllers=new nw(nse,"datasets",!0),this.elements=new nw(qf,"elements"),this.plugins=new nw(Object,"plugins"),this.scales=new nw(Gg,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(s=>{const i=r||this._getRegistryForType(s);r||i.isForType(s)||i===this.plugins&&s.id?this._exec(e,i,s):jn(s,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const s=_6(e);Zn(r["before"+s],[],r),n[e](r),Zn(r["after"+s],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return s}}var ml=new TWe;class NWe{constructor(){this._init=[]}notify(e,n,r,s){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(i,e,n,r);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,s){s=s||{};for(const i of e){const o=i.plugin,a=o[r],l=[n,s,i.options];if(Zn(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){yr(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,s=bn(r.options&&r.options.plugins,{}),i=PWe(r);return s===!1&&!n?[]:RWe(e,i,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,s=(i,o)=>i.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(n,r),e,"stop"),this._notify(s(r,n),e,"start")}}function PWe(t){const e={},n=[],r=Object.keys(ml.plugins.items);for(let i=0;i<r.length;i++)n.push(ml.getPlugin(r[i]));const s=t.plugins||[];for(let i=0;i<s.length;i++){const o=s[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function IWe(t,e){return!e&&t===!1?null:t===!0?{}:t}function RWe(t,{plugins:e,localIds:n},r,s){const i=[],o=t.getContext();for(const a of e){const l=a.id,c=IWe(r[l],s);c!==null&&i.push({plugin:a,options:LWe(t.config,{plugin:a,local:n[l]},c,o)})}return i}function LWe(t,{plugin:e,local:n},r,s){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(r,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function g4(t,e){const n=Ir.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function OWe(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function DWe(t,e){return t===e?"_index_":"_value_"}function BU(t){if(t==="x"||t==="y"||t==="r")return t}function MWe(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function b4(t,...e){if(BU(t))return t;for(const n of e){const r=n.axis||MWe(n.position)||t.length>1&&BU(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function UU(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function jWe(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return UU(t,"x",n[0])||UU(t,"y",n[0])}return{}}function FWe(t,e){const n=wf[t.type]||{scales:{}},r=e.scales||{},s=g4(t.type,e),i=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!Rn(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=b4(o,a,jWe(o,t),Ir.scales[a.type]),c=DWe(l,s),u=n.scales||{};i[o]=fy(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||g4(a,e),u=(wf[a]||{}).scales||{};Object.keys(u).forEach(d=>{const h=OWe(d,l),f=o[h+"AxisID"]||h;i[f]=i[f]||Object.create(null),fy(i[f],[{axis:h},r[f],u[d]])})}),Object.keys(i).forEach(o=>{const a=i[o];fy(a,[Ir.scales[a.type],Ir.scale])}),i}function lse(t){const e=t.options||(t.options={});e.plugins=bn(e.plugins,{}),e.scales=FWe(t,e)}function cse(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function BWe(t){return t=t||{},t.data=cse(t.data),lse(t),t}const $U=new Map,use=new Set;function rw(t,e){let n=$U.get(t);return n||(n=e(),$U.set(t,n),use.add(n)),n}const X0=(t,e,n)=>{const r=dS(e,n);r!==void 0&&t.add(r)};let UWe=class{constructor(e){this._config=BWe(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=cse(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),lse(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return rw(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return rw(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return rw(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return rw(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let s=r.get(e);return(!s||n)&&(s=new Map,r.set(e,s)),s}getOptionScopes(e,n,r){const{options:s,type:i}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(d=>X0(l,e,d))),u.forEach(d=>X0(l,s,d)),u.forEach(d=>X0(l,wf[i]||{},d)),u.forEach(d=>X0(l,Ir,d)),u.forEach(d=>X0(l,f4,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),use.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,wf[n]||{},Ir.datasets[n]||{},{type:n},Ir,f4]}resolveNamedOptions(e,n,r,s=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=HU(this._resolverCache,e,s);let l=o;if(HWe(o,n)){i.$shared=!1,r=kd(r)?r():r;const c=this.createResolver(e,r,a);l=pg(o,r,c)}for(const c of n)i[c]=l[c];return i}createResolver(e,n,r=[""],s){const{resolver:i}=HU(this._resolverCache,e,r);return Rn(n)?pg(i,n,void 0,s):i}};function HU(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const s=n.join();let i=r.get(s);return i||(i={resolver:C6(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(s,i)),i}const $We=t=>Rn(t)&&Object.getOwnPropertyNames(t).some(e=>kd(t[e]));function HWe(t,e){const{isScriptable:n,isIndexable:r}=Gre(t);for(const s of e){const i=n(s),o=r(s),a=(o||i)&&t[s];if(i&&(kd(a)||$We(a))||o&&ss(a))return!0}return!1}var zWe="4.4.7";const VWe=["top","bottom","left","right","chartArea"];function zU(t,e){return t==="top"||t==="bottom"||VWe.indexOf(t)===-1&&e==="x"}function VU(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function WU(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Zn(n&&n.onComplete,[t],e)}function WWe(t){const e=t.chart,n=e.options.animation;Zn(n&&n.onProgress,[t],e)}function dse(t){return N6()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const g2={},GU=t=>{const e=dse(t);return Object.values(g2).filter(n=>n.canvas===e).pop()};function GWe(t,e,n){const r=Object.keys(t);for(const s of r){const i=+s;if(i>=e){const o=t[s];delete t[s],(n>0||i>e)&&(t[i+n]=o)}}}function qWe(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}function sw(t,e,n){return t.options.clip?t[n]:e[n]}function KWe(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:sw(n,e,"left"),right:sw(n,e,"right"),top:sw(r,e,"top"),bottom:sw(r,e,"bottom")}:e}let fC=class{static defaults=Ir;static instances=g2;static overrides=wf;static registry=ml;static version=zWe;static getChart=GU;static register(...e){ml.add(...e),qU()}static unregister(...e){ml.remove(...e),qU()}constructor(e,n){const r=this.config=new UWe(n),s=dse(e),i=GU(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||dWe(s)),this.platform.updateConfig(r);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=ZHe(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new NWe,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=yze(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],g2[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}xc.listen(this,"complete",WU),xc.listen(this,"progress",WWe),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:s,_aspectRatio:i}=this;return yr(e)?n&&i?i:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return ml}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():yU(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return mU(this.canvas,this.ctx),this}stop(){return xc.stop(this),this}resize(e,n){xc.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,s=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,i),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,yU(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Zn(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};jn(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,s=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const a=n[o],l=b4(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),jn(i,o=>{const a=o.options,l=a.id,c=b4(l,a),u=bn(a.type,o.dtype);(a.position===void 0||zU(a.position,c)!==zU(o.dposition))&&(a.position=o.dposition),s[l]=!0;let d=null;if(l in r&&r[l].type===u)d=r[l];else{const h=ml.getScale(u);d=new h({id:l,type:u,ctx:this.ctx,chart:this}),r[d.id]=d}d.init(a,e)}),jn(s,(o,a)=>{o||delete r[a]}),jn(r,o=>{Lo.configure(this,o,o.options),Lo.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((s,i)=>s.index-i.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(VU("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,s)=>{n.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const i=n[r];let o=this.getDatasetMeta(r);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=i.indexAxis||g4(a,this.options),o.order=i.order||0,o.index=r,o.label=""+i.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=ml.getController(a),{datasetElementType:c,dataElementType:u}=Ir.datasets[a];Object.assign(l,{dataElementType:ml.getElement(u),datasetElementType:c&&ml.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){jn(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:d}=this.getDatasetMeta(c),h=!s&&i.indexOf(d)===-1;d.buildOrUpdateElements(h),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),s||jn(i,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(VU("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){jn(this.scales,e=>{Lo.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!iU(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:i}of n){const o=r==="_removeElements"?-i:i;GWe(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=i=>new Set(e.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),s=r(0);for(let i=1;i<n;i++)if(!iU(s,r(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Lo.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],jn(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,kd(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(xc.has(this)?this.attached&&!xc.running(this)&&xc.start(this):(this.draw(),WU({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let s,i;for(s=0,i=n.length;s<i;++s){const o=n[s];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r=e._clip,s=!r.disabled,i=KWe(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(s&&S6(n,{left:r.left===!1?0:i.left-r.left,right:r.right===!1?this.width:i.right+r.right,top:r.top===!1?0:i.top-r.top,bottom:r.bottom===!1?this.height:i.bottom+r.bottom}),e.controller.draw(),s&&k6(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return E1(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,s){const i=VVe.modes[n];return typeof i=="function"?i(this,e,r,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let s=r.filter(i=>i&&i._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=Gf(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const s=r?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,s);hS(n)?(i.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(i,{visible:r}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),xc.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),mU(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete g2[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},s=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};jn(this.options.events,i=>r(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},i=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),r("resize",i),r("detach",o)};o=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){jn(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},jn(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const s=r?"set":"remove";let i,o,a,l;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!cS(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const s=this.options.hover,i=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),o=i(n,e),a=r?e:i(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const i=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(i||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:s=[],options:i}=this,o=n,a=this._getActiveElements(e,s,r,o),l=sze(e),c=qWe(e,this._lastEvent,r,l);r&&(this._lastEvent=null,Zn(i.onHover,[e,a,this],this),l&&Zn(i.onClick,[e,a,this],this));const u=!cS(a,s);return(u||n)&&(this._active=a,this._updateHoverStyles(a,s,n)),this._lastEvent=c,u}_getActiveElements(e,n,r,s){if(e.type==="mouseout")return[];if(!r)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,s)}};function qU(){return jn(fC.instances,t=>t._plugins.invalidate())}function hse(t,e,n=e){t.lineCap=bn(n.borderCapStyle,e.borderCapStyle),t.setLineDash(bn(n.borderDash,e.borderDash)),t.lineDashOffset=bn(n.borderDashOffset,e.borderDashOffset),t.lineJoin=bn(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=bn(n.borderWidth,e.borderWidth),t.strokeStyle=bn(n.borderColor,e.borderColor)}function YWe(t,e,n){t.lineTo(n.x,n.y)}function XWe(t){return t.stepped?Rze:t.tension||t.cubicInterpolationMode==="monotone"?Lze:YWe}function fse(t,e,n={}){const r=t.length,{start:s=0,end:i=r-1}=n,{start:o,end:a}=e,l=Math.max(s,o),c=Math.min(i,a),u=s<o&&i<o||s>a&&i>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!u?r+c-l:c-l}}function JWe(t,e,n,r){const{points:s,options:i}=e,{count:o,start:a,loop:l,ilen:c}=fse(s,n,r),u=XWe(i);let{move:d=!0,reverse:h}=r||{},f,g,y;for(f=0;f<=c;++f)g=s[(a+(h?c-f:f))%o],!g.skip&&(d?(t.moveTo(g.x,g.y),d=!1):u(t,y,g,h,i.stepped),y=g);return l&&(g=s[(a+(h?c:0))%o],u(t,y,g,h,i.stepped)),!!l}function ZWe(t,e,n,r){const s=e.points,{count:i,start:o,ilen:a}=fse(s,n,r),{move:l=!0,reverse:c}=r||{};let u=0,d=0,h,f,g,y,m,b;const v=E=>(o+(c?a-E:E))%i,_=()=>{y!==m&&(t.lineTo(u,m),t.lineTo(u,y),t.lineTo(u,b))};for(l&&(f=s[v(0)],t.moveTo(f.x,f.y)),h=0;h<=a;++h){if(f=s[v(h)],f.skip)continue;const E=f.x,w=f.y,S=E|0;S===g?(w<y?y=w:w>m&&(m=w),u=(d*u+E)/++d):(_(),t.lineTo(E,w),g=S,d=0,y=m=w),b=w}_()}function y4(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?ZWe:JWe}function QWe(t){return t.stepped?hVe:t.tension||t.cubicInterpolationMode==="monotone"?fVe:yh}function eGe(t,e,n,r){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,r)&&s.closePath()),hse(t,e.options),t.stroke(s)}function tGe(t,e,n,r){const{segments:s,options:i}=e,o=y4(e);for(const a of s)hse(t,i,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const nGe=typeof Path2D=="function";function rGe(t,e,n,r){nGe&&!e.options.segment?eGe(t,e,n,r):tGe(t,e,n,r)}class sGe extends qf{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const s=r.spanGaps?this._loop:this._fullLoop;sVe(this._points,r,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=xVe(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,s=e[n],i=this.points,o=yVe(this,{property:n,start:s,end:s});if(!o.length)return;const a=[],l=QWe(r);let c,u;for(c=0,u=o.length;c<u;++c){const{start:d,end:h}=o[c],f=i[d],g=i[h];if(f===g){a.push(f);continue}const y=Math.abs((s-f[n])/(g[n]-f[n])),m=l(f,g,y,r.stepped);m[n]=e[n],a.push(m)}return a.length===1?a[0]:a}pathSegment(e,n,r){return y4(this)(e,this,n,r)}path(e,n,r){const s=this.segments,i=y4(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of s)o&=i(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,s){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),rGe(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function KU(t,e,n,r){const s=t.options,{[n]:i}=t.getProps([n],r);return Math.abs(e-i)<s.radius+s.hitRadius}class iGe extends qf{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,r){const s=this.options,{x:i,y:o}=this.getProps(["x","y"],r);return Math.pow(e-i,2)+Math.pow(n-o,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,n){return KU(this,e,"x",n)}inYRange(e,n){return KU(this,e,"y",n)}getCenterPoint(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}size(e){e=e||this.options||{};let n=e.radius||0;n=Math.max(n,n&&e.hoverRadius||0);const r=n&&e.borderWidth||0;return(n+r)*2}draw(e,n){const r=this.options;this.skip||r.radius<.1||!E1(this,n,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,p4(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}const YU=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},oGe=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class XU extends qf{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Zn(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,s)=>e.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,s=Hs(r.font),i=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=YU(r,i);let c,u;n.font=s.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,i,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,s){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=s+a;let d=e;i.textAlign="left",i.textBaseline="middle";let h=-1,f=-u;return this.legendItems.forEach((g,y)=>{const m=r+n/2+i.measureText(g.text).width;(y===0||c[c.length-1]+m+2*a>o)&&(d+=u,c[c.length-(y>0?0:1)]=0,f+=u,h++),l[y]={left:0,top:f,row:h,width:m,height:s},c[c.length-1]+=m+a}),d}_fitCols(e,n,r,s){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let d=a,h=0,f=0,g=0,y=0;return this.legendItems.forEach((m,b)=>{const{itemWidth:v,itemHeight:_}=aGe(r,n,i,m,s);b>0&&f+_+2*a>u&&(d+=h+a,c.push({width:h,height:f}),g+=h+a,y++,h=f=0),l[b]={left:g,top:f,col:y,width:v,height:_},h=Math.max(h,v),f+=_+a}),d+=h,c.push({width:h,height:f}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:i}}=this,o=Pm(i,this.left,this.width);if(this.isHorizontal()){let a=0,l=Os(r,this.left+s,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Os(r,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=Os(r,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Os(r,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;S6(e,this),this._draw(),k6(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:s}=this,{align:i,labels:o}=e,a=Ir.color,l=Pm(e.rtl,this.left,this.width),c=Hs(o.font),{padding:u}=o,d=c.size,h=d/2;let f;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:g,boxHeight:y,itemHeight:m}=YU(o,d),b=function(S,k,x){if(isNaN(g)||g<=0||isNaN(y)||y<0)return;s.save();const I=bn(x.lineWidth,1);if(s.fillStyle=bn(x.fillStyle,a),s.lineCap=bn(x.lineCap,"butt"),s.lineDashOffset=bn(x.lineDashOffset,0),s.lineJoin=bn(x.lineJoin,"miter"),s.lineWidth=I,s.strokeStyle=bn(x.strokeStyle,a),s.setLineDash(bn(x.lineDash,[])),o.usePointStyle){const R={radius:y*Math.SQRT2/2,pointStyle:x.pointStyle,rotation:x.rotation,borderWidth:I},C=l.xPlus(S,g/2),N=k+h;Vre(s,R,C,N,o.pointStyleWidth&&g)}else{const R=k+Math.max((d-y)/2,0),C=l.leftForLtr(S,g),N=by(x.borderRadius);s.beginPath(),Object.values(N).some(O=>O!==0)?m4(s,{x:C,y:R,w:g,h:y,radius:N}):s.rect(C,R,g,y),s.fill(),I!==0&&s.stroke()}s.restore()},v=function(S,k,x){S1(s,x.text,S,k+m/2,c,{strikethrough:x.hidden,textAlign:l.textAlign(x.textAlign)})},_=this.isHorizontal(),E=this._computeTitleHeight();_?f={x:Os(i,this.left+u,this.right-r[0]),y:this.top+u+E,line:0}:f={x:this.left+u,y:Os(i,this.top+E+u,this.bottom-n[0].height),line:0},Jre(this.ctx,e.textDirection);const w=m+u;this.legendItems.forEach((S,k)=>{s.strokeStyle=S.fontColor,s.fillStyle=S.fontColor;const x=s.measureText(S.text).width,I=l.textAlign(S.textAlign||(S.textAlign=o.textAlign)),R=g+h+x;let C=f.x,N=f.y;l.setWidth(this.width),_?k>0&&C+R+u>this.right&&(N=f.y+=w,f.line++,C=f.x=Os(i,this.left+u,this.right-r[f.line])):k>0&&N+w>this.bottom&&(C=f.x=C+n[f.line].width+u,f.line++,N=f.y=Os(i,this.top+E+u,this.bottom-n[f.line].height));const O=l.x(C);if(b(O,N,S),C=vze(I,C+g+h,_?C+R:this.right,e.rtl),v(l.x(C),N,S),_)f.x+=R+u;else if(typeof S.text!="string"){const P=c.lineHeight;f.y+=pse(S,P)+u}else f.y+=w}),Zre(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=Hs(n.font),s=Go(n.padding);if(!n.display)return;const i=Pm(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=s.top+l;let u,d=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+c,d=Os(e.align,d,this.right-h);else{const g=this.columnSizes.reduce((y,m)=>Math.max(y,m.height),0);u=c+Os(e.align,this.top,this.bottom-g-e.labels.padding-this._computeTitleHeight())}const f=Os(a,d,d+h);o.textAlign=i.textAlign(w6(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,S1(o,n.text,f,u,r)}_computeTitleHeight(){const e=this.options.title,n=Hs(e.font),r=Go(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,s,i;if(Ab(e,this.left,this.right)&&Ab(n,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(s=i[r],Ab(e,s.left,s.left+s.width)&&Ab(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!uGe(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,i=oGe(s,r);s&&!i&&Zn(n.onLeave,[e,s,this],this),this._hoveredItem=r,r&&!i&&Zn(n.onHover,[e,r,this],this)}else r&&Zn(n.onClick,[e,r,this],this)}}function aGe(t,e,n,r,s){const i=lGe(r,t,e,n),o=cGe(s,r,e.lineHeight);return{itemWidth:i,itemHeight:o}}function lGe(t,e,n,r){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+r.measureText(s).width}function cGe(t,e,n){let r=t;return typeof e.text!="string"&&(r=pse(e,n)),r}function pse(t,e){const n=t.text?t.text.length:0;return e*n}function uGe(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var dGe={id:"legend",_element:XU,start(t,e,n){const r=t.legend=new XU({ctx:t.ctx,options:n,chart:t});Lo.configure(t,r,n),Lo.addBox(t,r)},stop(t){Lo.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;Lo.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),e.hidden=!0):(s.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=Go(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class mse extends qf{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const s=ss(r.text)?r.text.length:1;this._padding=Go(r.padding);const i=s*Hs(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:s,right:i,options:o}=this,a=o.align;let l=0,c,u,d;return this.isHorizontal()?(u=Os(a,r,i),d=n+e,c=i-r):(o.position==="left"?(u=r+e,d=Os(a,s,n),l=as*-.5):(u=i-e,d=Os(a,n,s),l=as*.5),c=s-n),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=Hs(n.font),i=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(i);S1(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:w6(n.align),textBaseline:"middle",translation:[o,a]})}}function hGe(t,e){const n=new mse({ctx:t.ctx,options:e,chart:t});Lo.configure(t,n,e),Lo.addBox(t,n),t.titleBlock=n}var fGe={id:"title",_element:mse,start(t,e,n){hGe(t,n)},stop(t){const e=t.titleBlock;Lo.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;Lo.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Nb={average(t){if(!t.length)return!1;let e,n,r=new Set,s=0,i=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),s+=l.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:s/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,s=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=t.length;i<o;++i){const l=t[i].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=h4(e,c);u<s&&(s=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function hl(t,e){return e&&(ss(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function wc(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function pGe(t,e){const{element:n,datasetIndex:r,index:s}=e,i=t.getDatasetMeta(r).controller,{label:o,value:a}=i.getLabelAndValue(s);return{chart:t,label:o,parsed:i.getParsed(s),raw:t.data.datasets[r].data[s],formattedValue:a,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function JU(t,e){const n=t.chart.ctx,{body:r,footer:s,title:i}=t,{boxWidth:o,boxHeight:a}=e,l=Hs(e.bodyFont),c=Hs(e.titleFont),u=Hs(e.footerFont),d=i.length,h=s.length,f=r.length,g=Go(e.padding);let y=g.height,m=0,b=r.reduce((E,w)=>E+w.before.length+w.lines.length+w.after.length,0);if(b+=t.beforeBody.length+t.afterBody.length,d&&(y+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),b){const E=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;y+=f*E+(b-f)*l.lineHeight+(b-1)*e.bodySpacing}h&&(y+=e.footerMarginTop+h*u.lineHeight+(h-1)*e.footerSpacing);let v=0;const _=function(E){m=Math.max(m,n.measureText(E).width+v)};return n.save(),n.font=c.string,jn(t.title,_),n.font=l.string,jn(t.beforeBody.concat(t.afterBody),_),v=e.displayColors?o+2+e.boxPadding:0,jn(r,E=>{jn(E.before,_),jn(E.lines,_),jn(E.after,_)}),v=0,n.font=u.string,jn(t.footer,_),n.restore(),m+=g.width,{width:m,height:y}}function mGe(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function gGe(t,e,n,r){const{x:s,width:i}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&s+i+o>e.width||t==="right"&&s-i-o<0)return!0}function bGe(t,e,n,r){const{x:s,width:i}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=s<=(a+l)/2?"left":"right":s<=i/2?c="left":s>=o-i/2&&(c="right"),gGe(c,t,e,n)&&(c="center"),c}function ZU(t,e,n){const r=n.yAlign||e.yAlign||mGe(t,n);return{xAlign:n.xAlign||e.xAlign||bGe(t,e,n,r),yAlign:r}}function yGe(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function vGe(t,e,n){let{y:r,height:s}=t;return e==="top"?r+=n:e==="bottom"?r-=s+n:r-=s/2,r}function QU(t,e,n,r){const{caretSize:s,caretPadding:i,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=s+i,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=by(o);let g=yGe(e,a);const y=vGe(e,l,c);return l==="center"?a==="left"?g+=c:a==="right"&&(g-=c):a==="left"?g-=Math.max(u,h)+s:a==="right"&&(g+=Math.max(d,f)+s),{x:Ro(g,0,r.width-e.width),y:Ro(y,0,r.height-e.height)}}function iw(t,e,n){const r=Go(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function e$(t){return hl([],wc(t))}function _Ge(t,e,n){return Gf(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function t$(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const gse={beforeTitle:yc,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:yc,beforeBody:yc,beforeLabel:yc,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return yr(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:yc,afterBody:yc,beforeFooter:yc,footer:yc,afterFooter:yc};function Ei(t,e,n,r){const s=t[e].call(n,r);return typeof s>"u"?gse[e].call(n,r):s}class n$ extends qf{static positioners=Nb;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,i=new ese(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=_Ge(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,s=Ei(r,"beforeTitle",this,e),i=Ei(r,"title",this,e),o=Ei(r,"afterTitle",this,e);let a=[];return a=hl(a,wc(s)),a=hl(a,wc(i)),a=hl(a,wc(o)),a}getBeforeBody(e,n){return e$(Ei(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,s=[];return jn(e,i=>{const o={before:[],lines:[],after:[]},a=t$(r,i);hl(o.before,wc(Ei(a,"beforeLabel",this,i))),hl(o.lines,Ei(a,"label",this,i)),hl(o.after,wc(Ei(a,"afterLabel",this,i))),s.push(o)}),s}getAfterBody(e,n){return e$(Ei(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,s=Ei(r,"beforeFooter",this,e),i=Ei(r,"footer",this,e),o=Ei(r,"afterFooter",this,e);let a=[];return a=hl(a,wc(s)),a=hl(a,wc(i)),a=hl(a,wc(o)),a}_createItems(e){const n=this._active,r=this.chart.data,s=[],i=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(pGe(this.chart,n[l]));return e.filter&&(a=a.filter((u,d,h)=>e.filter(u,d,h,r))),e.itemSort&&(a=a.sort((u,d)=>e.itemSort(u,d,r))),jn(a,u=>{const d=t$(e.callbacks,u);s.push(Ei(d,"labelColor",this,u)),i.push(Ei(d,"labelPointStyle",this,u)),o.push(Ei(d,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),s=this._active;let i,o=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const a=Nb[r.position].call(this,s,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=JU(this,r),c=Object.assign({},a,l),u=ZU(this.chart,r,c),d=QU(r,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){const i=this.getCaretPosition(e,r,s);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,r){const{xAlign:s,yAlign:i}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:d}=by(a),{x:h,y:f}=e,{width:g,height:y}=n;let m,b,v,_,E,w;return i==="center"?(E=f+y/2,s==="left"?(m=h,b=m-o,_=E+o,w=E-o):(m=h+g,b=m+o,_=E-o,w=E+o),v=m):(s==="left"?b=h+Math.max(l,u)+o:s==="right"?b=h+g-Math.max(c,d)-o:b=this.caretX,i==="top"?(_=f,E=_-o,m=b-o,v=b+o):(_=f+y,E=_+o,m=b+o,v=b-o),w=_),{x1:m,x2:b,x3:v,y1:_,y2:E,y3:w}}drawTitle(e,n,r){const s=this.title,i=s.length;let o,a,l;if(i){const c=Pm(r.rtl,this.x,this.width);for(e.x=iw(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=Hs(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<i;++l)n.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===i&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,s,i){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=i,u=Hs(i.bodyFont),d=iw(this,"left",i),h=s.x(d),f=l<u.lineHeight?(u.lineHeight-l)/2:0,g=n.y+f;if(i.usePointStyle){const y={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},m=s.leftForLtr(h,c)+c/2,b=g+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,p4(e,y,m,b),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,p4(e,y,m,b)}else{e.lineWidth=Rn(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const y=s.leftForLtr(h,c),m=s.leftForLtr(s.xPlus(h,1),c-2),b=by(o.borderRadius);Object.values(b).some(v=>v!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,m4(e,{x:y,y:g,w:c,h:l,radius:b}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),m4(e,{x:m,y:g+1,w:c-2,h:l-2,radius:b}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(y,g,c,l),e.strokeRect(y,g,c,l),e.fillStyle=o.backgroundColor,e.fillRect(m,g+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:s}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=r,d=Hs(r.bodyFont);let h=d.lineHeight,f=0;const g=Pm(r.rtl,this.x,this.width),y=function(x){n.fillText(x,g.x(e.x+f),e.y+h/2),e.y+=h+i},m=g.textAlign(o);let b,v,_,E,w,S,k;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=iw(this,m,r),n.fillStyle=r.bodyColor,jn(this.beforeBody,y),f=a&&m!=="right"?o==="center"?c/2+u:c+2+u:0,E=0,S=s.length;E<S;++E){for(b=s[E],v=this.labelTextColors[E],n.fillStyle=v,jn(b.before,y),_=b.lines,a&&_.length&&(this._drawColorBox(n,e,E,g,r),h=Math.max(d.lineHeight,l)),w=0,k=_.length;w<k;++w)y(_[w]),h=d.lineHeight;jn(b.after,y)}f=0,h=d.lineHeight,jn(this.afterBody,y),e.y-=i}drawFooter(e,n,r){const s=this.footer,i=s.length;let o,a;if(i){const l=Pm(r.rtl,this.x,this.width);for(e.x=iw(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=Hs(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<i;++a)n.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){const{xAlign:i,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=r,{topLeft:d,topRight:h,bottomLeft:f,bottomRight:g}=by(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,r,s),n.lineTo(a+c-h,l),n.quadraticCurveTo(a+c,l,a+c,l+h),o==="center"&&i==="right"&&this.drawCaret(e,n,r,s),n.lineTo(a+c,l+u-g),n.quadraticCurveTo(a+c,l+u,a+c-g,l+u),o==="bottom"&&this.drawCaret(e,n,r,s),n.lineTo(a+f,l+u),n.quadraticCurveTo(a,l+u,a,l+u-f),o==="center"&&i==="left"&&this.drawCaret(e,n,r,s),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,s=r&&r.x,i=r&&r.y;if(s||i){const o=Nb[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=JU(this,e),l=Object.assign({},o,this._size),c=ZU(n,e,l),u=QU(e,l,c,n);(s._to!==u.x||i._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=Go(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(i,e,s,n),Jre(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),Zre(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,s=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),i=!cS(r,s),o=this._positionChanged(s,n);(i||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,r),a=this._positionChanged(o,e),l=n||!cS(o,i)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,s){const i=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,r);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:s,options:i}=this,o=Nb[i.position].call(this,e,n);return o!==!1&&(r!==o.x||s!==o.y)}}var xGe={id:"tooltip",_element:n$,positioners:Nb,afterInit(t,e,n){n&&(t.tooltip=new n$({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:gse},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const wGe=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function EGe(t,e,n,r){const s=t.indexOf(e);if(s===-1)return wGe(t,e,n,r);const i=t.lastIndexOf(e);return s!==i?n:s}const SGe=(t,e)=>t===null?null:Ro(Math.round(t),0,e);function r$(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class kGe extends Gg{static id="category";static defaults={ticks:{callback:r$}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:s,label:i}of n)r[s]===i&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(yr(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:EGe(r,e,bn(n,e),this._addedLabels),SGe(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,s=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)s.push({value:o});return s}getLabelForValue(e){return r$.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function CGe(t,e){const n=[],{bounds:s,step:i,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:h}=t,f=i||1,g=u-1,{min:y,max:m}=e,b=!yr(o),v=!yr(a),_=!yr(c),E=(m-y)/(d+1);let w=aU((m-y)/g/f)*f,S,k,x,I;if(w<1e-14&&!b&&!v)return[{value:y},{value:m}];I=Math.ceil(m/w)-Math.floor(y/w),I>g&&(w=aU(I*w/g/f)*f),yr(l)||(S=Math.pow(10,l),w=Math.ceil(w*S)/S),s==="ticks"?(k=Math.floor(y/w)*w,x=Math.ceil(m/w)*w):(k=y,x=m),b&&v&&i&&lze((a-o)/i,w/1e3)?(I=Math.round(Math.min((a-o)/w,u)),w=(a-o)/I,k=o,x=a):_?(k=b?o:k,x=v?a:x,I=c-1,w=(x-k)/I):(I=(x-k)/w,py(I,Math.round(I),w/1e3)?I=Math.round(I):I=Math.ceil(I));const R=Math.max(lU(w),lU(k));S=Math.pow(10,yr(l)?R:l),k=Math.round(k*S)/S,x=Math.round(x*S)/S;let C=0;for(b&&(h&&k!==o?(n.push({value:o}),k<o&&C++,py(Math.round((k+C*w)*S)/S,o,s$(o,E,t))&&C++):k<o&&C++);C<I;++C){const N=Math.round((k+C*w)*S)/S;if(v&&N>a)break;n.push({value:N})}return v&&h&&x!==a?n.length&&py(n[n.length-1].value,a,s$(a,E,t))?n[n.length-1].value=a:n.push({value:a}):(!v||x===a)&&n.push({value:x}),n}function s$(t,e,{horizontal:n,minRotation:r}){const s=Lh(r),i=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class AGe extends Gg{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return yr(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:s,max:i}=this;const o=l=>s=n?s:l,a=l=>i=r?i:l;if(e){const l=fg(s),c=fg(i);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===i){let l=i===0?1:Math.abs(i*.05);a(i+l),e||o(s-l)}this.min=s,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=CGe(s,i);return e.bounds==="ticks"&&cze(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const s=(r-n)/Math.max(e.length-1,1)/2;n-=s,r+=s}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return Hre(e,this.chart.options.locale,this.options.ticks.format)}}class TGe extends AGe{static id="linear";static defaults={ticks:{callback:zre.formatters.numeric}};determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Wo(e)?e:0,this.max=Wo(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=Lh(this.options.ticks.minRotation),s=(e?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const pC={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Pi=Object.keys(pC);function i$(t,e){return t-e}function o$(t,e){if(yr(e))return null;const n=t._adapter,{parser:r,round:s,isoWeekday:i}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),Wo(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(w1(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,s)),+o)}function a$(t,e,n,r){const s=Pi.length;for(let i=Pi.indexOf(t);i<s-1;++i){const o=pC[Pi[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return Pi[i]}return Pi[s-1]}function NGe(t,e,n,r,s){for(let i=Pi.length-1;i>=Pi.indexOf(n);i--){const o=Pi[i];if(pC[o].common&&t._adapter.diff(s,r,o)>=e-1)return o}return Pi[n?Pi.indexOf(n):0]}function PGe(t){for(let e=Pi.indexOf(t)+1,n=Pi.length;e<n;++e)if(pC[Pi[e]].common)return Pi[e]}function l$(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:s}=x6(n,e),i=n[r]>=e?n[r]:n[s];t[i]=!0}}function IGe(t,e,n,r){const s=t._adapter,i=+s.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=i;a<=o;a=+s.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function c$(t,e,n){const r=[],s={},i=e.length;let o,a;for(o=0;o<i;++o)a=e[o],s[a]=o,r.push({value:a,major:!1});return i===0||!n?r:IGe(t,r,s,n)}class u$ extends Gg{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),s=this._adapter=new BVe._date(e.adapters.date);s.init(n),fy(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:o$(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:s,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(i=Math.max(i,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=Wo(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),i=Wo(i)&&!isNaN(i)?i:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,o=this.max,a=mze(s,i,o);return this._unit=n.unit||(r.autoSkip?a$(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):NGe(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:PGe(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),c$(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,s,i;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?r=i:r=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Ro(n,0,o),r=Ro(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,s=this.options,i=s.time,o=i.unit||a$(i.minUnit,n,r,this._getLabelCapacity(n)),a=bn(s.ticks.stepSize,1),l=o==="week"?i.isoWeekday:!1,c=w1(l)||l===!0,u={};let d=n,h,f;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const g=s.ticks.source==="data"&&this.getDataTimestamps();for(h=d,f=0;h<r;h=+e.add(h,a,o),f++)l$(u,h,g);return(h===r||s.bounds==="ticks"||f===1)&&l$(u,h,g),Object.keys(u).sort(i$).map(y=>+y)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,i=this._unit,o=n||s[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,s){const i=this.options,o=i.ticks.callback;if(o)return Zn(o,[e,n,r],this);const a=i.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],d=c&&a[c],h=r[n],f=c&&d&&h&&h.major;return this._adapter.format(e,s||(f?d:u))}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,s=Lh(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:r*i+a*o,h:r*o+a*i}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,i=this._tickFormatFunction(e,0,c$(this,[e],this._majorUnit),s),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push(o$(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return bze(e.sort(i$))}}function ow(t,e,n){let r=0,s=t.length-1,i,o,a,l;n?(e>=t[r].pos&&e<=t[s].pos&&({lo:r,hi:s}=Oh(t,"pos",e)),{pos:i,time:a}=t[r],{pos:o,time:l}=t[s]):(e>=t[r].time&&e<=t[s].time&&({lo:r,hi:s}=Oh(t,"time",e)),{time:i,pos:a}=t[r],{time:o,pos:l}=t[s]);const c=o-i;return c?a+(l-a)*(e-i)/c:a}class lft extends u${static id="timeseries";static defaults=u$.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=ow(n,this.min),this._tableRange=ow(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,s=[],i=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&s.push(c);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=s.length;o<a;++o)u=s[o+1],l=s[o-1],c=s[o],Math.round((u+l)/2)!==c&&i.push({time:c,pos:o/(a-1)});return i}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,i)=>s-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(ow(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return ow(this._table,r*this._tableRange+this._minPos,!0)}}const bse="label";function d$(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function RGe(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function yse(t,e){t.labels=e}function vse(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:bse;const r=[];t.datasets=e.map(s=>{const i=t.datasets.find(o=>o[n]===s[n]);return!i||!s.data||r.includes(i)?{...s}:(r.push(i),Object.assign(i,s),i)})}function LGe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:bse;const n={labels:[],datasets:[]};return yse(n,t.labels),vse(n,t.datasets,e),n}function OGe(t,e){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:i,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:d,...h}=t,f=T.useRef(null),g=T.useRef(null),y=()=>{f.current&&(g.current=new fC(f.current,{type:o,data:LGe(a,i),options:l&&{...l},plugins:c}),d$(e,g.current))},m=()=>{d$(e,null),g.current&&(g.current.destroy(),g.current=null)};return T.useEffect(()=>{!s&&g.current&&l&&RGe(g.current,l)},[s,l]),T.useEffect(()=>{!s&&g.current&&yse(g.current.config.data,a.labels)},[s,a.labels]),T.useEffect(()=>{!s&&g.current&&a.datasets&&vse(g.current.config.data,a.datasets,i)},[s,a.datasets]),T.useEffect(()=>{g.current&&(s?(m(),setTimeout(y)):g.current.update(d))},[s,l,a.labels,a.datasets,d]),T.useEffect(()=>{g.current&&(m(),setTimeout(y))},[o]),T.useEffect(()=>(y(),()=>m()),[]),ut.createElement("canvas",{ref:f,role:"img",height:n,width:r,...h},u)}const DGe=T.forwardRef(OGe);function MGe(t,e){return fC.register(e),T.forwardRef((n,r)=>ut.createElement(DGe,{...n,ref:r,type:t}))}const jGe=MGe("line",FVe),h$={userTabs:[],developerTabs:[]},FGe=TJ((t,e)=>({...h$,get:()=>({userTabs:e().userTabs,developerTabs:e().developerTabs}),set:n=>t(n),reset:()=>t(h$)}));fC.register(kGe,TGe,iGe,sGe,fGe,xGe,dGe);const zu={normal:{metrics:1e3},energySaver:{metrics:5e3}},Qs={cpu:{warning:70,critical:90},memory:{warning:80,critical:95},fps:{warning:30,critical:15}},BGe={update:.1},J0=[{name:"Performance",description:"Maximum performance with frequent updates",settings:{updateInterval:zu.normal.metrics,enableAnimations:!0,backgroundProcessing:!0,networkThrottling:!1}},{name:"Balanced",description:"Optimal balance between performance and energy efficiency",settings:{updateInterval:2e3,enableAnimations:!0,backgroundProcessing:!0,networkThrottling:!1}},{name:"Energy Saver",description:"Maximum energy efficiency with reduced updates",settings:{updateInterval:zu.energySaver.metrics,enableAnimations:!1,backgroundProcessing:!1,networkThrottling:!0}}],f$={cpu:{usage:0,cores:[]},memory:{used:0,total:0,percentage:0,heap:{used:0,total:0,limit:0}},uptime:0,network:{downlink:0,latency:0,type:"unknown",bytesReceived:0,bytesSent:0},performance:{fps:0,pageLoad:0,domReady:0,resources:{total:0,size:0,loadTime:0},timing:{ttfb:0,fcp:0,lcp:0}},health:{score:0,issues:[],suggestions:[]}},p$={timestamps:Array(10).fill(new Date().toLocaleTimeString()),cpu:Array(10).fill(0),memory:Array(10).fill(0),battery:Array(10).fill(0),network:Array(10).fill(0)},UGe=20,Z0=10,$Ge=()=>{const[t,e]=T.useState(()=>f$),[n,r]=T.useState(()=>p$),[s,i]=T.useState(!1),[o,a]=T.useState(!1),[l,c]=T.useState(()=>({updatesReduced:0,timeInSaverMode:0,estimatedEnergySaved:0})),[u,d]=T.useState(()=>J0[1]),[h,f]=T.useState([]),g=T.useRef(null),{hasUpdate:y}=xZ(),m=AJ(FGe),b=T.useCallback(()=>(m.reset(),m.get()),[m]);T.useEffect(()=>{const $=setInterval(()=>{const ee=m.get(),J=["debug","update"],Z=ee.userTabs.map(M=>J.includes(M.id)?{...M,visible:M.id==="debug"?t.cpu.usage>80:y}:M);m.set({...ee,userTabs:Z})},5e3);return()=>{clearInterval($)}},[t.cpu.usage,y,m]),T.useEffect(()=>{const P=()=>{console.log("TaskManagerTab: Resetting to defaults"),e(f$),r(p$),i(!1),a(!1),c({updatesReduced:0,timeInSaverMode:0,estimatedEnergySaved:0}),d(J0[1]),f([]),g.current=null;const J=b();console.log("TaskManagerTab: Reset tab configuration:",J)},$=J=>{J instanceof StorageEvent?J.key==="tabConfiguration"&&J.newValue===null&&P():J instanceof CustomEvent&&J.type==="tabConfigReset"&&P()},ee=async()=>{try{const J=localStorage.getItem("energySaverMode"),Z=localStorage.getItem("autoEnergySaver"),M=localStorage.getItem("selectedProfile");if(J&&i(JSON.parse(J)),Z&&a(JSON.parse(Z)),M){const F=J0.find(G=>G.name===M);F&&d(F)}await I()}catch(J){console.error("Failed to initialize TaskManagerTab:",J),P()}};return window.addEventListener("storage",$),window.addEventListener("tabConfigReset",$),ee(),()=>{window.removeEventListener("storage",$),window.removeEventListener("tabConfigReset",$)}},[]);const v=async()=>{try{const P=await S(),$=performance.getEntriesByType("navigation")[0],ee=$.loadEventEnd-$.startTime,J=$.domContentLoadedEventEnd-$.startTime,Z=performance.getEntriesByType("resource"),M={total:Z.length,size:Z.reduce((V,W)=>V+(W.transferSize||0),0),loadTime:Math.max(0,...Z.map(V=>V.duration))},F=$.responseStart-$.requestStart,D=performance.getEntriesByType("paint").find(V=>V.name==="first-contentful-paint")?.startTime||0,j=await k();return{fps:P,pageLoad:ee,domReady:J,resources:M,timing:{ttfb:F,fcp:D,lcp:j?.startTime||0}}}catch(P){return console.error("Failed to get performance metrics:",P),{}}};T.useEffect(()=>{let P=!0;const $=async()=>{if(P)try{await I()}catch(J){console.error("Failed to update metrics:",J)}};$();const ee=setInterval($,s?zu.energySaver.metrics:zu.normal.metrics);return()=>{P=!1,clearInterval(ee)}},[s]);const _=P=>{i(P),localStorage.setItem("energySaverMode",JSON.stringify(P)),ze.success(P?"Energy Saver mode enabled":"Energy Saver mode disabled")},E=P=>{a(P),localStorage.setItem("autoEnergySaver",JSON.stringify(P)),ze.success(P?"Auto Energy Saver enabled":"Auto Energy Saver disabled"),P||(i(!1),localStorage.setItem("energySaverMode","false"))},w=T.useCallback(()=>{if(!s){g.current=null,c({updatesReduced:0,timeInSaverMode:0,estimatedEnergySaved:0});return}g.current||(g.current=Date.now());const P=Math.max(0,(Date.now()-(g.current||Date.now()))/1e3),$=60/(zu.normal.metrics/1e3),ee=60/(zu.energySaver.metrics/1e3),J=Math.floor(($-ee)*(P/60)),Z=BGe.update,M=J*Z/3600;c({updatesReduced:J,timeInSaverMode:P,estimatedEnergySaved:M})},[s]);T.useEffect(()=>{const P=setInterval(w,1e3);return()=>clearInterval(P)},[w]);const S=async()=>new Promise(P=>{const $={value:0},ee=performance.now(),J=Z=>{$.value++,Z-ee>=1e3?P(Math.round($.value*1e3/(Z-ee))):requestAnimationFrame(J)};requestAnimationFrame(J)}),k=async()=>new Promise(P=>{new PerformanceObserver($=>{const ee=$.getEntries();P(ee[ee.length-1])}).observe({entryTypes:["largest-contentful-paint"]}),setTimeout(()=>P(void 0),3e3)}),x=P=>{const $=[],ee=[];let J=100;return P.cpu.usage>Qs.cpu.critical?(J-=30,$.push("Critical CPU usage"),ee.push("Consider closing resource-intensive applications")):P.cpu.usage>Qs.cpu.warning&&(J-=15,$.push("High CPU usage"),ee.push("Monitor system processes for unusual activity")),P.memory.percentage>Qs.memory.critical?(J-=30,$.push("Critical memory usage"),ee.push("Close unused applications to free up memory")):P.memory.percentage>Qs.memory.warning&&(J-=15,$.push("High memory usage"),ee.push("Consider freeing up memory by closing background applications")),P.performance.fps<Qs.fps.critical?(J-=20,$.push("Very low frame rate"),ee.push("Disable animations or switch to power saver mode")):P.performance.fps<Qs.fps.warning&&(J-=10,$.push("Low frame rate"),ee.push("Consider reducing visual effects")),P.battery&&!P.battery.charging&&P.battery.level<20&&(J-=10,$.push("Low battery"),ee.push("Connect to power source or enable power saver mode")),{score:Math.max(0,J),issues:$,suggestions:ee}},I=async()=>{try{const P=performance.memory||{jsHeapSizeLimit:0,totalJSHeapSize:0,usedJSHeapSize:0},$=P.totalJSHeapSize/(1024*1024),ee=P.usedJSHeapSize/(1024*1024),J=ee/$*100,Z=await R();let M;try{const W=await navigator.getBattery();M={level:W.level*100,charging:W.charging,timeRemaining:W.charging?W.chargingTime:W.dischargingTime}}catch{console.log("Battery API not available")}const F=navigator.connection||navigator.mozConnection||navigator.webkitConnection,G={downlink:F?.downlink||0,uplink:F?.uplink,latency:F?.rtt||0,type:F?.type||"unknown",activeConnections:F?.activeConnections,bytesReceived:F?.bytesReceived||0,bytesSent:F?.bytesSent||0},D=await v(),j={cpu:{usage:Z,cores:[],temperature:void 0,frequency:void 0},memory:{used:Math.round(ee),total:Math.round($),percentage:Math.round(J),heap:{used:Math.round(ee),total:Math.round($),limit:Math.round($)}},uptime:performance.now()/1e3,battery:M,network:G,performance:D,health:{score:0,issues:[],suggestions:[]}};j.health=x(j),O(j),e(j);const V=new Date().toLocaleTimeString();r(W=>{const re=[...W.timestamps,V].slice(-Z0),te=[...W.cpu,j.cpu.usage].slice(-Z0),Y=[...W.memory,j.memory.percentage].slice(-Z0),de=[...W.battery,M?.level||0].slice(-Z0),ye=[...W.network,G.downlink].slice(-Z0);return{timestamps:re,cpu:te,memory:Y,battery:de,network:ye}})}catch(P){console.error("Failed to update system metrics:",P)}},R=async()=>{try{const P=performance.now();let $=0;for(let F=0;F<1e4;F++)$+=Math.random();$<0&&console.log("Unexpected negative result");const J=performance.now()-P,Z=50;return 100-Math.max(0,Math.min(100,(Z-J)/Z*100))}catch(P){return console.error("Failed to get CPU usage:",P),0}};T.useEffect(()=>{const P=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(!P)return;const $=()=>{e(ee=>({...ee,network:{downlink:P.downlink||0,latency:P.rtt||0,type:P.type||"unknown",bytesReceived:P.bytesReceived||0,bytesSent:P.bytesSent||0}}))};return P.addEventListener("change",$),()=>P.removeEventListener("change",$)},[]),T.useEffect(()=>{const P=setInterval(()=>{s||I()},s?zu.energySaver.metrics:zu.normal.metrics);return()=>{clearInterval(P)}},[s]);const C=P=>P>80?"text-red-500":P>50?"text-yellow-500":"text-gray-500",N=(P,$,ee)=>{const J={labels:n.timestamps,datasets:[{label:$,data:P,borderColor:ee,fill:!1,tension:.4}]},Z={responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,max:100,grid:{color:"rgba(255, 255, 255, 0.1)"}},x:{grid:{display:!1}}},plugins:{legend:{display:!1}},animation:{duration:0}};return p.jsx("div",{className:"h-32",children:p.jsx(jGe,{data:J,options:Z})})};T.useEffect(()=>{if(!o){i(!1);return}const P=async()=>{try{const ee=await navigator.getBattery(),J=!ee.charging&&ee.level*100<=UGe;i(J)}catch{console.log("Battery API not available")}};P();const $=setInterval(P,6e4);return()=>clearInterval($)},[o]);const O=P=>{const $=[];P.cpu.usage>Qs.cpu.critical&&$.push({type:"error",message:"Critical CPU usage detected",timestamp:Date.now(),metric:"cpu",threshold:Qs.cpu.critical,value:P.cpu.usage}),P.memory.percentage>Qs.memory.critical&&$.push({type:"error",message:"Critical memory usage detected",timestamp:Date.now(),metric:"memory",threshold:Qs.memory.critical,value:P.memory.percentage}),P.performance.fps<Qs.fps.critical&&$.push({type:"warning",message:"Very low frame rate detected",timestamp:Date.now(),metric:"fps",threshold:Qs.fps.critical,value:P.performance.fps}),$.length>0&&(f(ee=>[...ee,...$]),$.forEach(ee=>{ze.warning(ee.message)}))};return p.jsxs("div",{className:"flex flex-col gap-6",children:[p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h3",{className:"text-base font-medium text-bolt-elements-textPrimary",children:"Power Management"}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"checkbox",id:"autoEnergySaver",checked:o,onChange:P=>E(P.target.checked),className:"form-checkbox h-4 w-4 text-purple-600 rounded border-gray-300 dark:border-gray-700"}),p.jsx("div",{className:"i-ph:gauge-duotone w-4 h-4 text-bolt-elements-textSecondary"}),p.jsx("label",{htmlFor:"autoEnergySaver",className:"text-sm text-bolt-elements-textSecondary",children:"Auto Energy Saver"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"checkbox",id:"energySaver",checked:s,onChange:P=>!o&&_(P.target.checked),disabled:o,className:"form-checkbox h-4 w-4 text-purple-600 rounded border-gray-300 dark:border-gray-700 disabled:opacity-50"}),p.jsx("div",{className:"i-ph:leaf-duotone w-4 h-4 text-bolt-elements-textSecondary"}),p.jsxs("label",{htmlFor:"energySaver",className:Pe("text-sm text-bolt-elements-textSecondary",{"opacity-50":o}),children:["Energy Saver",s&&p.jsx("span",{className:"ml-2 text-xs text-bolt-elements-textSecondary",children:"Active"})]})]}),p.jsxs("div",{className:"relative",children:[p.jsx("select",{value:u.name,onChange:P=>{const $=J0.find(ee=>ee.name===P.target.value);$&&(d($),ze.success(`Switched to ${$.name} power profile`))},className:"pl-8 pr-8 py-1.5 rounded-md bg-bolt-background-secondary dark:bg-[#1E1E1E] border border-bolt-border dark:border-bolt-borderDark text-sm text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimaryDark hover:border-bolt-action-primary dark:hover:border-bolt-action-primary focus:outline-none focus:ring-1 focus:ring-bolt-action-primary appearance-none min-w-[160px] cursor-pointer transition-colors duration-150",style:{WebkitAppearance:"none",MozAppearance:"none"},children:J0.map(P=>p.jsx("option",{value:P.name,className:"py-2 px-3 bg-bolt-background-secondary dark:bg-[#1E1E1E] text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimaryDark hover:bg-bolt-background-tertiary dark:hover:bg-bolt-backgroundDark-tertiary cursor-pointer",children:P.name},P.name))}),p.jsx("div",{className:"absolute left-2 top-1/2 -translate-y-1/2 pointer-events-none",children:p.jsx("div",{className:Pe("w-4 h-4 text-bolt-elements-textSecondary",{"i-ph:lightning-fill text-yellow-500":u.name==="Performance","i-ph:scales-fill text-blue-500":u.name==="Balanced","i-ph:leaf-fill text-green-500":u.name==="Energy Saver"})})}),p.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none",children:p.jsx("div",{className:"i-ph:caret-down w-4 h-4 text-bolt-elements-textSecondary opacity-75"})})]})]})]}),p.jsx("div",{className:"text-sm text-bolt-elements-textSecondary",children:u.description})]}),p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsx("h3",{className:"text-base font-medium text-bolt-elements-textPrimary",children:"System Health"}),p.jsx("div",{className:"grid grid-cols-1 gap-4",children:p.jsxs("div",{className:"flex flex-col gap-2 rounded-lg bg-[#F8F8F8] dark:bg-[#141414] p-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:"Health Score"}),p.jsxs("span",{className:Pe("text-lg font-medium",{"text-green-500":t.health.score>=80,"text-yellow-500":t.health.score>=60&&t.health.score<80,"text-red-500":t.health.score<60}),children:[t.health.score,"%"]})]}),t.health.issues.length>0&&p.jsxs("div",{className:"mt-2",children:[p.jsx("div",{className:"text-sm font-medium text-bolt-elements-textSecondary mb-1",children:"Issues:"}),p.jsx("ul",{className:"text-sm text-bolt-elements-textSecondary space-y-1",children:t.health.issues.map((P,$)=>p.jsxs("li",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:warning-circle-fill text-yellow-500 w-4 h-4"}),P]},$))})]}),t.health.suggestions.length>0&&p.jsxs("div",{className:"mt-2",children:[p.jsx("div",{className:"text-sm font-medium text-bolt-elements-textSecondary mb-1",children:"Suggestions:"}),p.jsx("ul",{className:"text-sm text-bolt-elements-textSecondary space-y-1",children:t.health.suggestions.map((P,$)=>p.jsxs("li",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:lightbulb-fill text-purple-500 w-4 h-4"}),P]},$))})]})]})})]}),p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsx("h3",{className:"text-base font-medium text-bolt-elements-textPrimary",children:"System Metrics"}),p.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[p.jsxs("div",{className:"flex flex-col gap-2 rounded-lg bg-[#F8F8F8] dark:bg-[#141414] p-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:"CPU Usage"}),p.jsxs("span",{className:Pe("text-sm font-medium",C(t.cpu.usage)),children:[Math.round(t.cpu.usage),"%"]})]}),N(n.cpu,"CPU","#9333ea"),t.cpu.temperature&&p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary mt-2",children:["Temperature: ",t.cpu.temperature,"C"]}),t.cpu.frequency&&p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary",children:["Frequency: ",(t.cpu.frequency/1e3).toFixed(1)," GHz"]})]}),p.jsxs("div",{className:"flex flex-col gap-2 rounded-lg bg-[#F8F8F8] dark:bg-[#141414] p-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:"Memory Usage"}),p.jsxs("span",{className:Pe("text-sm font-medium",C(t.memory.percentage)),children:[Math.round(t.memory.percentage),"%"]})]}),N(n.memory,"Memory","#2563eb"),p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary mt-2",children:["Used: ",ah(t.memory.used)]}),p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary",children:["Total: ",ah(t.memory.total)]}),p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary",children:["Heap: ",ah(t.memory.heap.used)," / ",ah(t.memory.heap.total)]})]}),p.jsxs("div",{className:"flex flex-col gap-2 rounded-lg bg-[#F8F8F8] dark:bg-[#141414] p-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:"Performance"}),p.jsxs("span",{className:Pe("text-sm font-medium",{"text-red-500":t.performance.fps<Qs.fps.critical,"text-yellow-500":t.performance.fps<Qs.fps.warning,"text-green-500":t.performance.fps>=Qs.fps.warning}),children:[Math.round(t.performance.fps)," FPS"]})]}),p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary mt-2",children:["Page Load: ",(t.performance.pageLoad/1e3).toFixed(2),"s"]}),p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary",children:["DOM Ready: ",(t.performance.domReady/1e3).toFixed(2),"s"]}),p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary",children:["TTFB: ",(t.performance.timing.ttfb/1e3).toFixed(2),"s"]}),p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary",children:["Resources: ",t.performance.resources.total," (",ah(t.performance.resources.size),")"]})]}),p.jsxs("div",{className:"flex flex-col gap-2 rounded-lg bg-[#F8F8F8] dark:bg-[#141414] p-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:"Network"}),p.jsxs("span",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:[t.network.downlink.toFixed(1)," Mbps"]})]}),N(n.network,"Network","#f59e0b"),p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary mt-2",children:["Type: ",t.network.type]}),p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary",children:["Latency: ",t.network.latency,"ms"]}),p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary",children:["Received: ",ah(t.network.bytesReceived)]}),p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary",children:["Sent: ",ah(t.network.bytesSent)]})]})]}),t.battery&&p.jsxs("div",{className:"flex flex-col gap-2 rounded-lg bg-[#F8F8F8] dark:bg-[#141414] p-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:"Battery"}),p.jsxs("div",{className:"flex items-center gap-2",children:[t.battery.charging&&p.jsx("div",{className:"i-ph:lightning-fill w-4 h-4 text-bolt-action-primary"}),p.jsxs("span",{className:Pe("text-sm font-medium",t.battery.level>20?"text-bolt-elements-textPrimary":"text-red-500"),children:[Math.round(t.battery.level),"%"]})]})]}),N(n.battery,"Battery","#22c55e"),t.battery.timeRemaining&&p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary mt-2",children:[t.battery.charging?"Time to full: ":"Time remaining: ",zGe(t.battery.timeRemaining)]}),t.battery.temperature&&p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary",children:["Temperature: ",t.battery.temperature,"C"]}),t.battery.cycles&&p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary",children:["Charge cycles: ",t.battery.cycles]}),t.battery.health&&p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary",children:["Battery health: ",t.battery.health,"%"]})]}),h.length>0&&p.jsxs("div",{className:"flex flex-col gap-2 rounded-lg bg-[#F8F8F8] dark:bg-[#141414] p-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:"Recent Alerts"}),p.jsx("button",{onClick:()=>f([]),className:"text-xs text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary",children:"Clear All"})]}),p.jsx("div",{className:"space-y-2",children:h.slice(-5).map((P,$)=>p.jsxs("div",{className:Pe("flex items-center gap-2 text-sm",{"text-red-500":P.type==="error","text-yellow-500":P.type==="warning","text-blue-500":P.type==="info"}),children:[p.jsx("div",{className:Pe("w-4 h-4",{"i-ph:warning-circle-fill":P.type==="warning","i-ph:x-circle-fill":P.type==="error","i-ph:info-fill":P.type==="info"})}),p.jsx("span",{children:P.message}),p.jsx("span",{className:"text-xs text-bolt-elements-textSecondary ml-auto",children:new Date(P.timestamp).toLocaleTimeString()})]},$))})]}),s&&p.jsxs("div",{className:"flex flex-col gap-2 rounded-lg bg-[#F8F8F8] dark:bg-[#141414] p-4",children:[p.jsx("h4",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:"Energy Savings"}),p.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[p.jsxs("div",{children:[p.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:"Updates Reduced"}),p.jsx("p",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:l.updatesReduced})]}),p.jsxs("div",{children:[p.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:"Time in Saver Mode"}),p.jsxs("p",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:[Math.floor(l.timeInSaverMode/60),"m ",Math.floor(l.timeInSaverMode%60),"s"]})]}),p.jsxs("div",{children:[p.jsx("span",{className:"text-sm text-bolt-elements-textSecondary",children:"Energy Saved"}),p.jsxs("p",{className:"text-lg font-medium text-bolt-elements-textPrimary",children:[l.estimatedEnergySaved.toFixed(2)," mWh"]})]})]})]})]})]})},HGe=T.memo($Ge),ah=t=>{if(t===0)return"0 B";const e=1024,n=["B","KB","MB","GB","TB"],r=Math.floor(Math.log(t)/Math.log(e));return`${parseFloat((t/Math.pow(e,r)).toFixed(2))} ${n[r]}`},zGe=t=>{if(!isFinite(t)||t===0)return"Unknown";const e=Math.floor(t/3600),n=Math.floor(t%3600/60);return e>0?`${e}h ${n}m`:`${n}m`},VGe={profile:"Manage your profile and account settings",settings:"Configure application preferences",notifications:"View and manage your notifications",features:"Explore new and upcoming features",data:"Manage your data and storage","cloud-providers":"Configure cloud AI providers and models","local-providers":"Configure local AI providers and models","service-status":"Monitor cloud LLM service status",connection:"Check connection status and settings",debug:"Debug tools and system information","event-logs":"View system events and logs",update:"Check for updates and release notes","task-manager":"Monitor system resources and processes","tab-management":"Configure visible tabs and their order"},WGe=new Set(["task-manager","service-status","update","local-providers"]),GGe=()=>p.jsx("div",{className:"absolute top-2 right-2 px-1.5 py-0.5 rounded-full bg-blue-500/10 dark:bg-blue-900/10",children:p.jsx("span",{className:"text-[10px] font-medium text-blue-600 dark:text-blue-300",children:"BETA"})}),qGe=({checked:t,onCheckedChange:e,id:n,label:r})=>p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs(YR,{id:n,checked:t,onCheckedChange:e,className:Pe("relative inline-flex h-6 w-11 items-center rounded-full","transition-all duration-300 ease-[cubic-bezier(0.87,_0,_0.13,_1)]","bg-gray-200 dark:bg-gray-700","data-[state=checked]:bg-blue-500","focus:outline-none focus:ring-2 focus:ring-blue-500/20","cursor-pointer","group"),children:[p.jsx(ot.span,{className:Pe("absolute left-[2px] top-[2px]","inline-block h-5 w-5 rounded-full","bg-white shadow-lg","transition-shadow duration-300","group-hover:shadow-md group-active:shadow-sm","group-hover:scale-95 group-active:scale-90"),initial:!1,transition:{type:"spring",stiffness:500,damping:30,duration:.2},animate:{x:t?"1.25rem":"0rem"},children:p.jsx(ot.div,{className:"absolute inset-0 rounded-full bg-white",initial:!1,animate:{scale:t?1:.8},transition:{duration:.2}})}),p.jsxs("span",{className:"sr-only",children:["Toggle ",r]})]}),p.jsx("div",{className:"flex items-center gap-2",children:p.jsx("label",{htmlFor:n,className:"text-sm text-gray-500 dark:text-gray-400 select-none cursor-pointer whitespace-nowrap w-[88px]",children:r})})]}),KGe=({open:t,onClose:e})=>{const[n,r]=T.useState(null),[s,i]=T.useState(null),[o,a]=T.useState(!1),l=It(ad),c=It(MJ),u=It(ld),{hasUpdate:d,currentVersion:h,acknowledgeUpdate:f}=xZ(),{hasNewFeatures:g,unviewedFeatures:y,acknowledgeAllFeatures:m}=o5e(),{hasUnreadNotifications:b,unreadNotifications:v,markAllAsRead:_}=a5e(),{hasConnectionIssues:E,currentIssue:w,acknowledgeIssue:S}=d5e(),{hasActiveWarnings:k,activeIssues:x,acknowledgeAllIssues:I}=p5e(),R=T.useMemo(()=>new Map(tg.map(G=>[G.id,G])),[]),C=T.useMemo(()=>{if(!l?.userTabs||!Array.isArray(l.userTabs))return console.warn("Invalid tab configuration, resetting to defaults"),DJ(),[];const G=u?.preferences?.notifications===!1;if(c){const D=new Set,j=[],V=W=>{D.has(W.id)||(D.add(W.id),j.push({id:W.id,visible:!0,window:"developer",order:W.order||j.length}))};return l.developerTabs?.forEach(W=>V(W)),l.userTabs.forEach(W=>V(W)),tg.forEach(W=>V(W)),j.push({id:"tab-management",visible:!0,window:"developer",order:j.length,isExtraDevTab:!0}),j.sort((W,re)=>W.order-re.order)}return l.userTabs.filter(D=>!D?.id||D.id==="notifications"&&G?!1:D.visible&&D.window==="user").sort((D,j)=>D.order-j.order)},[l,c,u?.preferences?.notifications,R]),N={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05,delayChildren:.1}}},O={hidden:{opacity:0,scale:.8},visible:{opacity:1,scale:1,transition:{type:"spring",stiffness:200,damping:20,mass:.6}}};T.useEffect(()=>{t?r(null):(r(null),i(null),a(!1))},[t]);const P=()=>{r(null),i(null),a(!1),e()},$=()=>{o?a(!1):n&&r(null)},ee=G=>{console.log("Developer mode changed:",G),AAe(G)};T.useEffect(()=>{console.log("Current developer mode:",c)},[c]);const J=G=>{if(G==="tab-management")return p.jsx(XF,{});switch(G){case"profile":return p.jsx(F3e,{});case"settings":return p.jsx(B3e,{});case"notifications":return p.jsx(lPe,{});case"features":return p.jsx(lje,{});case"data":return p.jsx(cje,{});case"cloud-providers":return p.jsx(EHe,{});case"local-providers":return p.jsx(THe,{});case"connection":return p.jsx(yHe,{});case"debug":return p.jsx(TFe,{});case"event-logs":return p.jsx(PFe,{});case"update":return p.jsx(fHe,{});case"task-manager":return p.jsx(HGe,{});case"service-status":return p.jsx(Rre,{});default:return null}},Z=G=>{switch(G){case"update":return d;case"features":return g;case"notifications":return b;case"connection":return E;case"debug":return k;default:return!1}},M=G=>{switch(G){case"update":return`New update available (v${h})`;case"features":return`${y.length} new feature${y.length===1?"":"s"} to explore`;case"notifications":return`${v.length} unread notification${v.length===1?"":"s"}`;case"connection":return w==="disconnected"?"Connection lost":w==="high-latency"?"High latency detected":"Connection issues detected";case"debug":{const D=x.filter(V=>V.type==="warning").length,j=x.filter(V=>V.type==="error").length;return`${D} warning${D===1?"":"s"}, ${j} error${j===1?"":"s"}`}default:return""}},F=G=>{switch(i(G),r(G),a(!1),G){case"update":f();break;case"features":m();break;case"notifications":_();break;case"connection":S();break;case"debug":I();break}setTimeout(()=>i(null),500)};return p.jsx(jo,{open:t,children:p.jsx(qh,{children:p.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-[100]",children:[p.jsx(Kh,{asChild:!0,children:p.jsx(ot.div,{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2}})}),p.jsx(Yh,{"aria-describedby":void 0,onEscapeKeyDown:P,onPointerDownOutside:P,className:"relative z-[101]",children:p.jsxs(ot.div,{className:Pe("w-[1200px] h-[90vh]","bg-[#FAFAFA] dark:bg-[#0A0A0A]","rounded-2xl shadow-2xl","border border-[#E5E5E5] dark:border-[#1A1A1A]","flex flex-col overflow-hidden","relative"),initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.2},children:[p.jsx("div",{className:"absolute inset-0 overflow-hidden rounded-2xl",children:p.jsx(j3e,{})}),p.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[p.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[p.jsxs("div",{className:"flex items-center space-x-4",children:[(n||o)&&p.jsx("button",{onClick:$,className:"flex items-center justify-center w-8 h-8 rounded-full bg-transparent hover:bg-blue-500/10 dark:hover:bg-blue-900/10 group transition-all duration-200",children:p.jsx("div",{className:"i-ph:arrow-left w-4 h-4 text-gray-500 dark:text-gray-400 group-hover:text-blue-500 transition-colors"})}),p.jsx(hf,{className:"text-xl font-semibold text-gray-900 dark:text-white",children:o?"Tab Management":n?Jb[n]:"Control Panel"})]}),p.jsxs("div",{className:"flex items-center gap-6",children:[p.jsx("div",{className:"flex items-center gap-2 min-w-[140px] border-r border-gray-200 dark:border-gray-800 pr-6",children:p.jsx(qGe,{id:"developer-mode",checked:c,onCheckedChange:ee,label:c?"Developer Mode":"User Mode"})}),p.jsx("div",{className:"border-l border-gray-200 dark:border-gray-800 pl-6",children:p.jsx(C3e,{onSelectTab:F})}),p.jsx("button",{onClick:P,className:"flex items-center justify-center w-8 h-8 rounded-full bg-transparent hover:bg-blue-500/10 dark:hover:bg-blue-900/10 group transition-all duration-200",children:p.jsx("div",{className:"i-ph:x w-4 h-4 text-gray-500 dark:text-gray-400 group-hover:text-blue-500 transition-colors"})})]})]}),p.jsx("div",{className:Pe("flex-1","overflow-y-auto","hover:overflow-y-auto","scrollbar scrollbar-w-2","scrollbar-track-transparent","scrollbar-thumb-[#E5E5E5] hover:scrollbar-thumb-[#CCCCCC]","dark:scrollbar-thumb-[#333333] dark:hover:scrollbar-thumb-[#444444]","will-change-scroll","touch-auto"),children:p.jsx(ot.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"p-6",children:o?p.jsx(XF,{}):n?J(n):p.jsx(ot.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 relative",variants:N,initial:"hidden",animate:"visible",children:p.jsx(zl,{mode:"popLayout",children:C.map(G=>p.jsx(ot.div,{layout:!0,variants:O,className:"aspect-[1.5/1]",children:p.jsx(t5e,{tab:G,onClick:()=>F(G.id),isActive:n===G.id,hasUpdate:Z(G.id),statusMessage:M(G.id),description:VGe[G.id],isLoading:s===G.id,className:"h-full relative hover:bg-blue-500/10 dark:hover:bg-blue-900/10 !important",children:WGe.has(G.id)&&p.jsx(GGe,{})})},G.id))})})},n||"home")})]})]})})]})})})},YGe=T.memo(({onClick:t})=>p.jsx(dr,{onClick:t,icon:"i-ph:gear",size:"xl",title:"Settings",className:"text-[#666] hover:text-bolt-elements-textPrimary hover:bg-bolt-elements-item-backgroundActive/10 transition-colors"})),Ef=T.forwardRef(({tooltip:t,children:e,sideOffset:n=5,className:r="",arrowClassName:s="",tooltipStyle:i={},position:o="top",maxWidth:a=250,delay:l=0},c)=>p.jsxs(eO,{delayDuration:l,children:[p.jsx(tO,{asChild:!0,children:e}),p.jsx(nO,{children:p.jsxs(rO,{side:o,className:`
              z-[2000]
              px-2.5
              py-1.5
              max-h-[300px]
              select-none
              rounded-md
              bg-bolt-elements-background-depth-3
              text-bolt-elements-textPrimary
              text-sm
              leading-tight
              shadow-lg
              animate-in
              fade-in-0
              zoom-in-95
              data-[state=closed]:animate-out
              data-[state=closed]:fade-out-0
              data-[state=closed]:zoom-out-95
              ${r}
            `,sideOffset:n,style:{maxWidth:a,...i},children:[p.jsx("div",{className:"break-words",children:t}),p.jsx(sO,{className:`
                fill-bolt-elements-background-depth-3
                ${s}
              `,width:12,height:6})]})})]})),aw="<boltArtifact",m$="</boltArtifact>",XGe="<boltAction",g$="</boltAction>",lw=Di("MessageParser");function b$(t){const e=/^\s*```\w*\n([\s\S]*?)\n\s*```\s*$/,n=t.match(e);return n?n[1]:t}function y$(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">")}class JGe{constructor(e={}){this._options=e}#t=new Map;parse(e,n){let r=this.#t.get(e);r||(r={position:0,insideAction:!1,insideArtifact:!1,currentAction:{content:""},actionId:0},this.#t.set(e,r));let s="",i=r.position,o=!1;for(;i<n.length;){if(r.insideArtifact){const a=r.currentArtifact;if(a===void 0&&Co("Artifact not initialized"),r.insideAction){const l=n.indexOf(g$,i),c=r.currentAction;if(l!==-1){c.content+=n.slice(i,l);let u=c.content.trim();"type"in c&&c.type==="file"&&(c.filePath.endsWith(".md")||(u=b$(u),u=y$(u)),u+=`
`),c.content=u,this._options.callbacks?.onActionClose?.({artifactId:a.id,messageId:e,actionId:String(r.actionId-1),action:c}),r.insideAction=!1,r.currentAction={content:""},i=l+g$.length}else{if("type"in c&&c.type==="file"){let u=n.slice(i);c.filePath.endsWith(".md")||(u=b$(u),u=y$(u)),this._options.callbacks?.onActionStream?.({artifactId:a.id,messageId:e,actionId:String(r.actionId-1),action:{...c,content:u,filePath:c.filePath}})}break}}else{const l=n.indexOf(XGe,i),c=n.indexOf(m$,i);if(l!==-1&&(c===-1||l<c)){const u=n.indexOf(">",l);if(u!==-1)r.insideAction=!0,r.currentAction=this.#n(n,l,u),this._options.callbacks?.onActionOpen?.({artifactId:a.id,messageId:e,actionId:String(r.actionId++),action:r.currentAction}),i=u+1;else break}else if(c!==-1)this._options.callbacks?.onArtifactClose?.({messageId:e,...a}),r.insideArtifact=!1,r.currentArtifact=void 0,i=c+m$.length;else break}}else if(n[i]==="<"&&n[i+1]!=="/"){let a=i,l="";for(;a<n.length&&l.length<aw.length;){if(l+=n[a],l===aw){const c=n[a+1];if(c&&c!==">"&&c!==" "){s+=n.slice(i,a+1),i=a+1;break}const u=n.indexOf(">",a);if(u!==-1){const d=n.slice(i,u+1),h=this.#e(d,"title"),f=this.#e(d,"type"),g=this.#e(d,"id");h||lw.warn("Artifact title missing"),g||lw.warn("Artifact id missing"),r.insideArtifact=!0;const y={id:g,title:h,type:f};r.currentArtifact=y,this._options.callbacks?.onArtifactOpen?.({messageId:e,...y});const m=this._options.artifactElement??ZGe;s+=m({messageId:e}),i=u+1}else o=!0;break}else if(!aw.startsWith(l)){s+=n.slice(i,a+1),i=a+1;break}a++}if(a===n.length&&aw.startsWith(l))break}else s+=n[i],i++;if(o)break}return r.position=i,s}reset(){this.#t.clear()}#n(e,n,r){const s=e.slice(n,r+1),i=this.#e(s,"type"),o={type:i,content:""};if(i==="file"){const a=this.#e(s,"filePath");a||lw.debug("File path not specified"),o.filePath=a}else["shell","start"].includes(i)||lw.warn(`Unknown action type '${i}'`);return o}#e(e,n){const r=e.match(new RegExp(`${n}="([^"]*)"`,"i"));return r?r[1]:void 0}}const ZGe=t=>`<div ${['class="__boltArtifact__"',...Object.entries(t).map(([n,r])=>`data-${QGe(n)}=${JSON.stringify(r)}`)].join(" ")}></div>`;function QGe(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}const Q0=Di("useMessageParser"),eqe=new JGe({callbacks:{onArtifactOpen:t=>{Q0.trace("onArtifactOpen",t),St.showWorkbench.set(!0),St.addArtifact(t)},onArtifactClose:t=>{Q0.trace("onArtifactClose"),St.updateArtifact(t,{closed:!0})},onActionOpen:t=>{Q0.trace("onActionOpen",t.action),t.action.type==="file"&&St.addAction(t)},onActionClose:t=>{Q0.trace("onActionClose",t.action),t.action.type!=="file"&&St.addAction(t),St.runAction(t)},onActionStream:t=>{Q0.trace("onActionStream",t.action),St.runAction(t,!0)}}}),tqe=t=>Array.isArray(t.content)?t.content.find(e=>e.type==="text")?.text||"":t.content;function nqe(){const[t,e]=T.useState({}),n=T.useCallback((r,s)=>{for(const[i,o]of r.entries())if(o.role==="assistant"||o.role==="user"){const a=eqe.parse(o.id,tqe(o));e(l=>({...l,[i]:(l[i]||"")+a}))}},[]);return{parsedMessages:t,parseMessages:n}}const v$=Di("usePromptEnhancement");function rqe(){const[t,e]=T.useState(!1),[n,r]=T.useState(!1);return{enhancingPrompt:t,promptEnhanced:n,enhancePrompt:async(o,a,l,c,u)=>{e(!0),r(!1);const d={message:o,model:l,provider:c};u&&(d.apiKeys=u);const f=(await fetch("/api/enhancer",{method:"POST",body:JSON.stringify(d)})).body?.getReader(),g=o;if(f){const y=new TextDecoder;let m="",b;try{for(a("");;){const{value:v,done:_}=await f.read();if(_)break;m+=y.decode(v),v$.trace("Set input",m),a(m)}}catch(v){b=v,a(g)}finally{b&&v$.error(b),e(!1),r(!0),setTimeout(()=>{a(m)})}}},resetEnhancer:()=>{e(!1),r(!1)}}}const sqe=["input","textarea"];class iqe{#t=new EventTarget;dispatch(e){this.#t.dispatchEvent(new Event(e))}on(e,n){return this.#t.addEventListener(e,n),()=>{this.#t.removeEventListener(e,n)}}}const _se=new iqe;function oqe(){const t=It(gAe);T.useEffect(()=>{const e=n=>{if(!(document.activeElement&&sqe.includes(document.activeElement.tagName.toLowerCase())&&!n.altKey&&!n.metaKey&&!n.ctrlKey))for(const[r,s]of Object.entries(t)){const i=s.key.toLowerCase()===n.key.toLowerCase()||`Key${s.key.toUpperCase()}`===n.code,a=(s.ctrlOrMetaKey?DE&&n.metaKey||!DE&&n.ctrlKey:!0)&&(s.ctrlKey===void 0||s.ctrlKey===n.ctrlKey)&&(s.metaKey===void 0||s.metaKey===n.metaKey)&&(s.shiftKey===void 0||s.shiftKey===n.shiftKey)&&(s.altKey===void 0||s.altKey===n.altKey);if(i&&a){s.isPreventDefault&&(n.preventDefault(),n.stopPropagation()),_se.dispatch(r),s.action();break}}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[t])}function aqe(t={}){const{duration:e=800,easing:n="ease-in-out",cubicBezier:r=[.42,0,.58,1],bottomThreshold:s=50}=t,i=T.useRef(!0),o=T.useRef(),a=T.useRef(),l=T.useRef(),c=T.useRef(),u=T.useRef(0),d=T.useCallback((y,m,b,v)=>{const _=y.scrollTop,E=m-_,w=performance.now(),S=v==="cubic-bezier"?r:[.42,0,.58,1],k=I=>{const[,R,,C]=S,N=3*R,O=3*(C-R)-N,P=1-N-O;return(ee=>((P*ee+O)*ee+N)*ee)(I)},x=I=>{const R=I-w,C=Math.min(R/b,1),N=k(C),O=_+E*N;i.current&&(y.scrollTop=O),C<1&&i.current&&(c.current=requestAnimationFrame(x))};c.current&&cancelAnimationFrame(c.current),c.current=requestAnimationFrame(x)},[r]),h=T.useCallback(y=>{const{scrollTop:m,scrollHeight:b,clientHeight:v}=y;return b-m-v<=s},[s]),f=T.useCallback(y=>{if(y){const m=new ResizeObserver(()=>{if(i.current&&o.current){const{scrollHeight:b,clientHeight:v}=o.current,_=b-v;d(o.current,_,e,n)}});m.observe(y),l.current=m}else l.current?.disconnect(),l.current=void 0,c.current&&(cancelAnimationFrame(c.current),c.current=void 0)},[e,n,d]),g=T.useCallback(y=>{y?(a.current=()=>{const{scrollTop:m}=y;m<u.current?i.current=!1:h(y)&&(i.current=!0),u.current=m},y.addEventListener("scroll",a.current),o.current=y):(a.current&&o.current&&o.current.removeEventListener("scroll",a.current),c.current&&(cancelAnimationFrame(c.current),c.current=void 0),o.current=void 0,a.current=void 0)},[h]);return[f,g]}function xse({initialDescription:t=El.get(),customChatId:e,syncWithGlobalStore:n}){const r=It(ya),[s,i]=T.useState(!1),[o,a]=T.useState(t),[l,c]=T.useState();T.useEffect(()=>{c(e||r)},[e,r]),T.useEffect(()=>{a(t)},[t]);const u=T.useCallback(()=>i(b=>!b),[]),d=T.useCallback(b=>{a(b.target.value)},[]),h=T.useCallback(async()=>{if(!mn||!l)return t;try{return(await ig(mn,l))?.description||t}catch(b){return console.error("Failed to fetch latest description:",b),t}},[mn,l,t]),f=T.useCallback(async()=>{const b=await h();a(b),u()},[h,u]),g=T.useCallback(b=>{const v=b.trim();if(v===t)return u(),!1;const _=v.length>0&&v.length<=100,E=/^[a-zA-Z0-9\s\-_.,!?()[\]{}'"]+$/.test(v);return _?E?!0:(ze.error("Description can only contain letters, numbers, spaces, and basic punctuation."),!1):(ze.error("Description must be between 1 and 100 characters."),!1)},[]),y=T.useCallback(async b=>{if(b.preventDefault(),!!g(o)){try{if(!mn){ze.error("Chat persistence is not available");return}if(!l){ze.error("Chat Id is not available");return}await bPe(mn,l,o),n&&El.set(o),ze.success("Chat description updated successfully")}catch(v){ze.error("Failed to update chat description: "+v.message)}u()}},[o,mn,l,t,e]),m=T.useCallback(async b=>{b.key==="Escape"&&await f()},[f]);return{editing:s,handleChange:d,handleBlur:f,handleSubmit:y,handleKeyDown:m,currentDescription:o,toggleEditMode:u}}const wse=(t=1024)=>{const[e,n]=T.useState(window.innerWidth<t);return T.useEffect(()=>{const r=()=>n(window.innerWidth<t);return window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}},[t]),e};function lqe({item:t,onDelete:e,onDuplicate:n,exportChat:r}){const{id:s}=mde(),i=s===t.urlId,{editing:o,handleChange:a,handleBlur:l,handleSubmit:c,handleKeyDown:u,currentDescription:d,toggleEditMode:h}=xse({initialDescription:t.description,customChatId:t.id,syncWithGlobalStore:i});return p.jsx("div",{className:Pe("group rounded-lg text-sm text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50/80 dark:hover:bg-gray-800/30 overflow-hidden flex justify-between items-center px-3 py-2 transition-colors",{"text-gray-900 dark:text-white bg-gray-50/80 dark:bg-gray-800/30":i}),children:o?p.jsxs("form",{onSubmit:c,className:"flex-1 flex items-center gap-2",children:[p.jsx("input",{type:"text",className:"flex-1 bg-white dark:bg-gray-900 text-gray-900 dark:text-white rounded-md px-3 py-1.5 text-sm border border-gray-200 dark:border-gray-800 focus:outline-none focus:ring-1 focus:ring-blue-500/50",autoFocus:!0,value:d,onChange:a,onBlur:l,onKeyDown:u}),p.jsx("button",{type:"submit",className:"i-ph:check h-4 w-4 text-gray-500 hover:text-blue-500 transition-colors",onMouseDown:c})]}):p.jsxs("a",{href:`/chat/${t.urlId}`,className:"flex w-full relative truncate block",children:[p.jsx(Ef,{tooltip:d,children:p.jsx("span",{className:"truncate pr-24",children:d})}),p.jsx("div",{className:Pe("absolute right-0 top-0 bottom-0 flex items-center bg-white dark:bg-gray-950 group-hover:bg-gray-50/80 dark:group-hover:bg-gray-800/30 px-2",{"bg-gray-50/80 dark:bg-gray-800/30":i}),children:p.jsxs("div",{className:"flex items-center gap-2.5 text-gray-400 dark:text-gray-500 opacity-0 group-hover:opacity-100 transition-opacity",children:[p.jsx(cw,{toolTipContent:"Export",icon:"i-ph:download-simple h-4 w-4",onClick:f=>{f.preventDefault(),r(t.id)}}),n&&p.jsx(cw,{toolTipContent:"Duplicate",icon:"i-ph:copy h-4 w-4",onClick:()=>n?.(t.id)}),p.jsx(cw,{toolTipContent:"Rename",icon:"i-ph:pencil-fill h-4 w-4",onClick:f=>{f.preventDefault(),h()}}),p.jsx(q0e,{asChild:!0,children:p.jsx(cw,{toolTipContent:"Delete",icon:"i-ph:trash h-4 w-4",className:"hover:text-red-500",onClick:f=>{f.preventDefault(),e?.(f)}})})]})})]})})}const cw=T.forwardRef(({toolTipContent:t,icon:e,className:n,onClick:r},s)=>p.jsx(Ef,{tooltip:t,position:"bottom",sideOffset:4,children:p.jsx("button",{ref:s,type:"button",className:`text-gray-400 dark:text-gray-500 hover:text-blue-500 dark:hover:text-blue-400 transition-colors ${e} ${n||""}`,onClick:r})}));function cqe(t){const e=t.toSorted((s,i)=>Date.parse(i.timestamp)-Date.parse(s.timestamp)),n={},r=[];return e.forEach(s=>{const i=uqe(new Date(s.timestamp));if(i in n)n[i].items.push(s);else{const o={category:i,items:[s]};n[i]=o,r.push(o)}}),r}function uqe(t){if(oPe(t))return"Today";if(aPe(t))return"Yesterday";if(sPe(t))return $T(t,"EEE");const e=NQ(new Date,30);return tPe(t,e)?"Past 30 Days":iPe(t)?$T(t,"LLL"):$T(t,"LLL yyyy")}function dqe({items:t=[],searchFields:e=["description"],debounceMs:n=300}){const[r,s]=T.useState(""),i=T.useCallback(Tv(s,n),[]),o=T.useCallback(l=>{i(l.target.value)},[i]),a=T.useMemo(()=>{if(!r.trim())return t;const l=r.toLowerCase();return t.filter(c=>e.some(u=>{const d=c[u];return typeof d=="string"?d.toLowerCase().includes(l):!1}))},[t,r,e]);return{searchQuery:r,filteredItems:a,handleSearchChange:o}}const hqe={closed:{opacity:0,visibility:"hidden",left:"-340px",transition:{duration:.2,ease:so}},open:{opacity:1,visibility:"initial",left:0,transition:{duration:.2,ease:so}}};function fqe(){const[t,e]=T.useState(new Date);return T.useEffect(()=>{const n=setInterval(()=>{e(new Date)},6e4);return()=>clearInterval(n)},[]),p.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 text-sm text-gray-600 dark:text-gray-400 border-b border-gray-100 dark:border-gray-800/50",children:[p.jsx("div",{className:"h-4 w-4 i-lucide:clock opacity-80"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("span",{children:t.toLocaleDateString()}),p.jsx("span",{children:t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})}const pqe=()=>{const{duplicateCurrentChat:t,exportChat:e}=cee(),n=T.useRef(null),[r,s]=T.useState([]),[i,o]=T.useState(!1),[a,l]=T.useState(null),[c,u]=T.useState(!1),d=It(ld),{filteredItems:h,handleSearchChange:f}=dqe({items:r,searchFields:["description"]}),g=T.useCallback(()=>{mn&&t2(mn).then(w=>w.filter(S=>S.urlId&&S.description)).then(s).catch(w=>ze.error(w.message))},[]),y=T.useCallback((w,S)=>{w.preventDefault(),mn&&vP(mn,S.id).then(()=>{g(),ya.get()===S.id&&(window.location.pathname="/")}).catch(k=>{ze.error("Failed to delete conversation"),sR.error(k)})},[]),m=()=>{l(null)};T.useEffect(()=>{i&&g()},[i]),T.useEffect(()=>{function k(x){c||(x.pageX<40&&o(!0),n.current&&x.clientX>n.current.getBoundingClientRect().right+40&&o(!1))}return window.addEventListener("mousemove",k),()=>{window.removeEventListener("mousemove",k)}},[c]);const b=(w,S)=>{w.preventDefault(),l({type:"delete",item:S})},v=async w=>{await t(w),g()},_=()=>{u(!0),o(!1)},E=()=>{u(!1)};return p.jsxs(p.Fragment,{children:[p.jsxs(ot.div,{ref:n,initial:"closed",animate:i?"open":"closed",variants:hqe,style:{width:"340px"},className:Pe("flex selection-accent flex-col side-menu fixed top-0 h-full","bg-white dark:bg-gray-950 border-r border-gray-100 dark:border-gray-800/50","shadow-sm text-sm",c?"z-40":"z-sidebar"),children:[p.jsxs("div",{className:"h-12 flex items-center justify-between px-4 border-b border-gray-100 dark:border-gray-800/50 bg-gray-50/50 dark:bg-gray-900/50",children:[p.jsx("div",{className:"text-gray-900 dark:text-white font-medium"}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("span",{className:"font-medium text-sm text-gray-900 dark:text-white truncate",children:d?.username||"Guest User"}),p.jsx("div",{className:"flex items-center justify-center w-[32px] h-[32px] overflow-hidden bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-500 rounded-full shrink-0",children:d?.avatar?p.jsx("img",{src:d.avatar,alt:d?.username||"User",className:"w-full h-full object-cover",loading:"eager",decoding:"sync"}):p.jsx("div",{className:"i-ph:user-fill text-lg"})})]})]}),p.jsx(fqe,{}),p.jsxs("div",{className:"flex-1 flex flex-col h-full w-full overflow-hidden",children:[p.jsxs("div",{className:"p-4 space-y-3",children:[p.jsxs("a",{href:"/",className:"flex gap-2 items-center bg-blue-50 dark:bg-blue-900/10 text-blue-600 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/20 rounded-lg px-4 py-2 transition-colors",children:[p.jsx("span",{className:"inline-block i-lucide:message-square h-4 w-4"}),p.jsx("span",{className:"text-sm font-medium",children:"Start new chat"})]}),p.jsxs("div",{className:"relative w-full",children:[p.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:p.jsx("span",{className:"i-lucide:search h-4 w-4 text-gray-400 dark:text-gray-500"})}),p.jsx("input",{className:"w-full bg-gray-50 dark:bg-gray-900 relative pl-9 pr-3 py-2 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500/50 text-sm text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-500 border border-gray-200 dark:border-gray-800",type:"search",placeholder:"Search chats...",onChange:f,"aria-label":"Search chats"})]})]}),p.jsx("div",{className:"text-gray-600 dark:text-gray-400 text-sm font-medium px-4 py-2",children:"Your Chats"}),p.jsxs("div",{className:"flex-1 overflow-auto px-3 pb-3",children:[h.length===0&&p.jsx("div",{className:"px-4 text-gray-500 dark:text-gray-400 text-sm",children:r.length===0?"No previous conversations":"No matches found"}),p.jsxs(jo,{open:a!==null,children:[cqe(h).map(({category:w,items:S})=>p.jsxs("div",{className:"mt-2 first:mt-0 space-y-1",children:[p.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 sticky top-0 z-1 bg-white dark:bg-gray-950 px-4 py-1",children:w}),p.jsx("div",{className:"space-y-0.5 pr-1",children:S.map(k=>p.jsx(lqe,{item:k,exportChat:e,onDelete:x=>b(x,k),onDuplicate:()=>v(k.id)},k.id))})]},w)),p.jsx(qm,{onBackdrop:m,onClose:m,children:a?.type==="delete"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"p-6 bg-white dark:bg-gray-950",children:[p.jsx(hf,{className:"text-gray-900 dark:text-white",children:"Delete Chat?"}),p.jsxs(Uq,{className:"mt-2 text-gray-600 dark:text-gray-400",children:[p.jsxs("p",{children:["You are about to delete"," ",p.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:a.item.description})]}),p.jsx("p",{className:"mt-2",children:"Are you sure you want to delete this chat?"})]})]}),p.jsxs("div",{className:"flex justify-end gap-3 px-6 py-4 bg-gray-50 dark:bg-gray-900 border-t border-gray-100 dark:border-gray-800",children:[p.jsx(V2,{type:"secondary",onClick:m,children:"Cancel"}),p.jsx(V2,{type:"danger",onClick:w=>{y(w,a.item),m()},children:"Delete"})]})]})})]})]}),p.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200 dark:border-gray-800 px-4 py-3",children:[p.jsx(YGe,{onClick:_}),p.jsx(Q0e,{})]})]})]}),p.jsx(KGe,{open:c,onClose:E})]})},Ese=typeof document<"u"?ut.useLayoutEffect:()=>{};function mqe(t){const e=T.useRef(null);return Ese(()=>{e.current=t},[t]),T.useCallback((...n)=>{const r=e.current;return r?.(...n)},[])}const $v=t=>{var e;return(e=t?.ownerDocument)!==null&&e!==void 0?e:document},Dh=t=>t&&"window"in t&&t.window===t?t:$v(t).defaultView||window;function gqe(t){var e;return typeof window>"u"||window.navigator==null?!1:((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.brands.some(n=>t.test(n.brand)))||t.test(window.navigator.userAgent)}function bqe(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function Sse(t){let e=null;return()=>(e==null&&(e=t()),e)}const yqe=Sse(function(){return bqe(/^Mac/i)}),vqe=Sse(function(){return gqe(/Android/i)});function _qe(t){return t.mozInputSource===0&&t.isTrusted?!0:vqe()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}class xqe{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(e,n){this.nativeEvent=n,this.target=n.target,this.currentTarget=n.currentTarget,this.relatedTarget=n.relatedTarget,this.bubbles=n.bubbles,this.cancelable=n.cancelable,this.defaultPrevented=n.defaultPrevented,this.eventPhase=n.eventPhase,this.isTrusted=n.isTrusted,this.timeStamp=n.timeStamp,this.type=e}}function kse(t){let e=T.useRef({isFocused:!1,observer:null});Ese(()=>{const r=e.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let n=mqe(r=>{t?.(r)});return T.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){e.current.isFocused=!0;let s=r.target,i=o=>{e.current.isFocused=!1,s.disabled&&n(new xqe("blur",o)),e.current.observer&&(e.current.observer.disconnect(),e.current.observer=null)};s.addEventListener("focusout",i,{once:!0}),e.current.observer=new MutationObserver(()=>{if(e.current.isFocused&&s.disabled){var o;(o=e.current.observer)===null||o===void 0||o.disconnect();let a=s===document.activeElement?null:document.activeElement;s.dispatchEvent(new FocusEvent("blur",{relatedTarget:a})),s.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:a}))}}),e.current.observer.observe(s,{attributes:!0,attributeFilter:["disabled"]})}},[n])}function wqe(t){let{isDisabled:e,onFocus:n,onBlur:r,onFocusChange:s}=t;const i=T.useCallback(l=>{if(l.target===l.currentTarget)return r&&r(l),s&&s(!1),!0},[r,s]),o=kse(i),a=T.useCallback(l=>{const c=$v(l.target);l.target===l.currentTarget&&c.activeElement===l.target&&(n&&n(l),s&&s(!0),o(l))},[s,n,o]);return{focusProps:{onFocus:!e&&(n||s||r)?a:void 0,onBlur:!e&&(r||s)?i:void 0}}}let Hv=null,v4=new Set,yy=new Map,Sf=!1,_4=!1;const Eqe={Tab:!0,Escape:!0};function R6(t,e){for(let n of v4)n(t,e)}function Sqe(t){return!(t.metaKey||!yqe()&&t.altKey||t.ctrlKey||t.key==="Control"||t.key==="Shift"||t.key==="Meta")}function gS(t){Sf=!0,Sqe(t)&&(Hv="keyboard",R6("keyboard",t))}function Po(t){Hv="pointer",(t.type==="mousedown"||t.type==="pointerdown")&&(Sf=!0,R6("pointer",t))}function Cse(t){_qe(t)&&(Sf=!0,Hv="virtual")}function Ase(t){t.target===window||t.target===document||(!Sf&&!_4&&(Hv="virtual",R6("virtual",t)),Sf=!1,_4=!1)}function Tse(){Sf=!1,_4=!0}function x4(t){if(typeof window>"u"||yy.get(Dh(t)))return;const e=Dh(t),n=$v(t);let r=e.HTMLElement.prototype.focus;e.HTMLElement.prototype.focus=function(){Sf=!0,r.apply(this,arguments)},n.addEventListener("keydown",gS,!0),n.addEventListener("keyup",gS,!0),n.addEventListener("click",Cse,!0),e.addEventListener("focus",Ase,!0),e.addEventListener("blur",Tse,!1),typeof PointerEvent<"u"?(n.addEventListener("pointerdown",Po,!0),n.addEventListener("pointermove",Po,!0),n.addEventListener("pointerup",Po,!0)):(n.addEventListener("mousedown",Po,!0),n.addEventListener("mousemove",Po,!0),n.addEventListener("mouseup",Po,!0)),e.addEventListener("beforeunload",()=>{Nse(t)},{once:!0}),yy.set(e,{focus:r})}const Nse=(t,e)=>{const n=Dh(t),r=$v(t);e&&r.removeEventListener("DOMContentLoaded",e),yy.has(n)&&(n.HTMLElement.prototype.focus=yy.get(n).focus,r.removeEventListener("keydown",gS,!0),r.removeEventListener("keyup",gS,!0),r.removeEventListener("click",Cse,!0),n.removeEventListener("focus",Ase,!0),n.removeEventListener("blur",Tse,!1),typeof PointerEvent<"u"?(r.removeEventListener("pointerdown",Po,!0),r.removeEventListener("pointermove",Po,!0),r.removeEventListener("pointerup",Po,!0)):(r.removeEventListener("mousedown",Po,!0),r.removeEventListener("mousemove",Po,!0),r.removeEventListener("mouseup",Po,!0)),yy.delete(n))};function kqe(t){const e=$v(t);let n;return e.readyState!=="loading"?x4(t):(n=()=>{x4(t)},e.addEventListener("DOMContentLoaded",n)),()=>Nse(t,n)}typeof document<"u"&&kqe();function Pse(){return Hv!=="pointer"}const Cqe=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function Aqe(t,e,n){var r;const s=typeof window<"u"?Dh(n?.target).HTMLInputElement:HTMLInputElement,i=typeof window<"u"?Dh(n?.target).HTMLTextAreaElement:HTMLTextAreaElement,o=typeof window<"u"?Dh(n?.target).HTMLElement:HTMLElement,a=typeof window<"u"?Dh(n?.target).KeyboardEvent:KeyboardEvent;return t=t||n?.target instanceof s&&!Cqe.has(n==null||(r=n.target)===null||r===void 0?void 0:r.type)||n?.target instanceof i||n?.target instanceof o&&n?.target.isContentEditable,!(t&&e==="keyboard"&&n instanceof a&&!Eqe[n.key])}function Tqe(t,e,n){x4(),T.useEffect(()=>{let r=(s,i)=>{Aqe(!!n?.isTextInput,s,i)&&t(Pse())};return v4.add(r),()=>{v4.delete(r)}},e)}function Nqe(t){let{isDisabled:e,onBlurWithin:n,onFocusWithin:r,onFocusWithinChange:s}=t,i=T.useRef({isFocusWithin:!1}),o=T.useCallback(c=>{i.current.isFocusWithin&&!c.currentTarget.contains(c.relatedTarget)&&(i.current.isFocusWithin=!1,n&&n(c),s&&s(!1))},[n,s,i]),a=kse(o),l=T.useCallback(c=>{!i.current.isFocusWithin&&document.activeElement===c.target&&(r&&r(c),s&&s(!0),i.current.isFocusWithin=!0,a(c))},[r,s,a]);return e?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:l,onBlur:o}}}let bS=!1,H5=0;function w4(){bS=!0,setTimeout(()=>{bS=!1},50)}function _$(t){t.pointerType==="touch"&&w4()}function Pqe(){if(!(typeof document>"u"))return typeof PointerEvent<"u"?document.addEventListener("pointerup",_$):document.addEventListener("touchend",w4),H5++,()=>{H5--,!(H5>0)&&(typeof PointerEvent<"u"?document.removeEventListener("pointerup",_$):document.removeEventListener("touchend",w4))}}function Iqe(t){let{onHoverStart:e,onHoverChange:n,onHoverEnd:r,isDisabled:s}=t,[i,o]=T.useState(!1),a=T.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;T.useEffect(Pqe,[]);let{hoverProps:l,triggerHoverEnd:c}=T.useMemo(()=>{let u=(f,g)=>{if(a.pointerType=g,s||g==="touch"||a.isHovered||!f.currentTarget.contains(f.target))return;a.isHovered=!0;let y=f.currentTarget;a.target=y,e&&e({type:"hoverstart",target:y,pointerType:g}),n&&n(!0),o(!0)},d=(f,g)=>{if(a.pointerType="",a.target=null,g==="touch"||!a.isHovered)return;a.isHovered=!1;let y=f.currentTarget;r&&r({type:"hoverend",target:y,pointerType:g}),n&&n(!1),o(!1)},h={};return typeof PointerEvent<"u"?(h.onPointerEnter=f=>{bS&&f.pointerType==="mouse"||u(f,f.pointerType)},h.onPointerLeave=f=>{!s&&f.currentTarget.contains(f.target)&&d(f,f.pointerType)}):(h.onTouchStart=()=>{a.ignoreEmulatedMouseEvents=!0},h.onMouseEnter=f=>{!a.ignoreEmulatedMouseEvents&&!bS&&u(f,"mouse"),a.ignoreEmulatedMouseEvents=!1},h.onMouseLeave=f=>{!s&&f.currentTarget.contains(f.target)&&d(f,"mouse")}),{hoverProps:h,triggerHoverEnd:d}},[e,n,r,s,a]);return T.useEffect(()=>{s&&c({currentTarget:a.target},a.pointerType)},[s]),{hoverProps:l,isHovered:i}}function Rqe(t={}){let{autoFocus:e=!1,isTextInput:n,within:r}=t,s=T.useRef({isFocused:!1,isFocusVisible:e||Pse()}),[i,o]=T.useState(!1),[a,l]=T.useState(()=>s.current.isFocused&&s.current.isFocusVisible),c=T.useCallback(()=>l(s.current.isFocused&&s.current.isFocusVisible),[]),u=T.useCallback(f=>{s.current.isFocused=f,o(f),c()},[c]);Tqe(f=>{s.current.isFocusVisible=f,c()},[],{isTextInput:n});let{focusProps:d}=wqe({isDisabled:r,onFocusChange:u}),{focusWithinProps:h}=Nqe({isDisabled:!r,onFocusWithinChange:u});return{isFocused:i,isFocusVisible:a,focusProps:r?h:d}}var Lqe=Object.defineProperty,Oqe=(t,e,n)=>e in t?Lqe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,z5=(t,e,n)=>(Oqe(t,typeof e!="symbol"?e+"":e,n),n);let Dqe=class{constructor(){z5(this,"current",this.detect()),z5(this,"handoffState","pending"),z5(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},sf=new Dqe;function zv(t){return sf.isServer?null:t instanceof Node?t.ownerDocument:t!=null&&t.hasOwnProperty("current")&&t.current instanceof Node?t.current.ownerDocument:document}function Ise(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function Kf(){let t=[],e={addEventListener(n,r,s,i){return n.addEventListener(r,s,i),e.add(()=>n.removeEventListener(r,s,i))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return e.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return e.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return Ise(()=>{r.current&&n[0]()}),e.add(()=>{r.current=!1})},style(n,r,s){let i=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:s}),this.add(()=>{Object.assign(n.style,{[r]:i})})},group(n){let r=Kf();return n(r),this.add(()=>r.dispose())},add(n){return t.includes(n)||t.push(n),()=>{let r=t.indexOf(n);if(r>=0)for(let s of t.splice(r,1))s()}},dispose(){for(let n of t.splice(0))n()}};return e}function mC(){let[t]=T.useState(Kf);return T.useEffect(()=>()=>t.dispose(),[t]),t}let ls=(t,e)=>{sf.isServer?T.useEffect(t,e):T.useLayoutEffect(t,e)};function nu(t){let e=T.useRef(t);return ls(()=>{e.current=t},[t]),e}let dn=function(t){let e=nu(t);return ut.useCallback((...n)=>e.current(...n),[e])};function Mqe(t){let e=t.width/2,n=t.height/2;return{top:t.clientY-n,right:t.clientX+e,bottom:t.clientY+n,left:t.clientX-e}}function jqe(t,e){return!(!t||!e||t.right<e.left||t.left>e.right||t.bottom<e.top||t.top>e.bottom)}function Fqe({disabled:t=!1}={}){let e=T.useRef(null),[n,r]=T.useState(!1),s=mC(),i=dn(()=>{e.current=null,r(!1),s.dispose()}),o=dn(a=>{if(s.dispose(),e.current===null){e.current=a.currentTarget,r(!0);{let l=zv(a.currentTarget);s.addEventListener(l,"pointerup",i,!1),s.addEventListener(l,"pointermove",c=>{if(e.current){let u=Mqe(c);r(jqe(u,e.current.getBoundingClientRect()))}},!1),s.addEventListener(l,"pointercancel",i,!1)}}});return{pressed:n,pressProps:t?{}:{onPointerDown:o,onPointerUp:i,onClick:i}}}function E4(...t){return Array.from(new Set(t.flatMap(e=>typeof e=="string"?e.split(" "):[]))).filter(Boolean).join(" ")}function qo(t,e,...n){if(t in e){let s=e[t];return typeof s=="function"?s(...n):s}let r=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(s=>`"${s}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,qo),r}var gg=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(gg||{}),ed=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(ed||{});function Fa(){let t=Uqe();return T.useCallback(e=>Bqe({mergeRefs:t,...e}),[t])}function Bqe({ourProps:t,theirProps:e,slot:n,defaultTag:r,features:s,visible:i=!0,name:o,mergeRefs:a}){a=a??$qe;let l=Rse(e,t);if(i)return uw(l,n,r,o,a);let c=s??0;if(c&2){let{static:u=!1,...d}=l;if(u)return uw(d,n,r,o,a)}if(c&1){let{unmount:u=!0,...d}=l;return qo(u?0:1,{0(){return null},1(){return uw({...d,hidden:!0,style:{display:"none"}},n,r,o,a)}})}return uw(l,n,r,o,a)}function uw(t,e={},n,r,s){let{as:i=n,children:o,refName:a="ref",...l}=V5(t,["unmount","static"]),c=t.ref!==void 0?{[a]:t.ref}:{},u=typeof o=="function"?o(e):o;"className"in l&&l.className&&typeof l.className=="function"&&(l.className=l.className(e)),l["aria-labelledby"]&&l["aria-labelledby"]===l.id&&(l["aria-labelledby"]=void 0);let d={};if(e){let h=!1,f=[];for(let[g,y]of Object.entries(e))typeof y=="boolean"&&(h=!0),y===!0&&f.push(g.replace(/([A-Z])/g,m=>`-${m.toLowerCase()}`));if(h){d["data-headlessui-state"]=f.join(" ");for(let g of f)d[`data-${g}`]=""}}if(i===T.Fragment&&(Object.keys(vh(l)).length>0||Object.keys(vh(d)).length>0))if(!T.isValidElement(u)||Array.isArray(u)&&u.length>1){if(Object.keys(vh(l)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(vh(l)).concat(Object.keys(vh(d))).map(h=>`  - ${h}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(h=>`  - ${h}`).join(`
`)].join(`
`))}else{let h=u.props,f=h?.className,g=typeof f=="function"?(...b)=>E4(f(...b),l.className):E4(f,l.className),y=g?{className:g}:{},m=Rse(u.props,vh(V5(l,["ref"])));for(let b in d)b in m&&delete d[b];return T.cloneElement(u,Object.assign({},m,d,c,{ref:s(Hqe(u),c.ref)},y))}return T.createElement(i,Object.assign({},V5(l,["ref"]),i!==T.Fragment&&c,i!==T.Fragment&&d),u)}function Uqe(){let t=T.useRef([]),e=T.useCallback(n=>{for(let r of t.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return t.current=n,e}}function $qe(...t){return t.every(e=>e==null)?void 0:e=>{for(let n of t)n!=null&&(typeof n=="function"?n(e):n.current=e)}}function Rse(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let s in r)s.startsWith("on")&&typeof r[s]=="function"?(n[s]!=null||(n[s]=[]),n[s].push(r[s])):e[s]=r[s];if(e.disabled||e["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[s=>{var i;return(i=s?.preventDefault)==null?void 0:i.call(s)}]);for(let r in n)Object.assign(e,{[r](s,...i){let o=n[r];for(let a of o){if((s instanceof Event||s?.nativeEvent instanceof Event)&&s.defaultPrevented)return;a(s,...i)}}});return e}function S4(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let s in r)s.startsWith("on")&&typeof r[s]=="function"?(n[s]!=null||(n[s]=[]),n[s].push(r[s])):e[s]=r[s];for(let r in n)Object.assign(e,{[r](...s){let i=n[r];for(let o of i)o?.(...s)}});return e}function uo(t){var e;return Object.assign(T.forwardRef(t),{displayName:(e=t.displayName)!=null?e:t.name})}function vh(t){let e=Object.assign({},t);for(let n in e)e[n]===void 0&&delete e[n];return e}function V5(t,e=[]){let n=Object.assign({},t);for(let r of e)r in n&&delete n[r];return n}function Hqe(t){return ut.version.split(".")[0]>="19"?t.props.ref:t.ref}let zqe="span";var C1=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(C1||{});function Vqe(t,e){var n;let{features:r=1,...s}=t,i={ref:e,"aria-hidden":(r&2)===2?!0:(n=s["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return Fa()({ourProps:i,theirProps:s,slot:{},defaultTag:zqe,name:"Hidden"})}let yS=uo(Vqe);function Lse(t){let e=t.parentElement,n=null;for(;e&&!(e instanceof HTMLFieldSetElement);)e instanceof HTMLLegendElement&&(n=e),e=e.parentElement;let r=e?.getAttribute("disabled")==="";return r&&Wqe(n)?!1:r}function Wqe(t){if(!t)return!1;let e=t.previousElementSibling;for(;e!==null;){if(e instanceof HTMLLegendElement)return!1;e=e.previousElementSibling}return!0}let Ose=Symbol();function Dse(t,e=!0){return Object.assign(t,{[Ose]:e})}function Ia(...t){let e=T.useRef(t);T.useEffect(()=>{e.current=t},[t]);let n=dn(r=>{for(let s of e.current)s!=null&&(typeof s=="function"?s(r):s.current=r)});return t.every(r=>r==null||r?.[Ose])?void 0:n}var Vu=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(Vu||{});let Gqe=T.createContext(()=>{});function qqe({value:t,children:e}){return ut.createElement(Gqe.Provider,{value:t},e)}function Kqe(t){if(t===null)return{width:0,height:0};let{width:e,height:n}=t.getBoundingClientRect();return{width:e,height:n}}function Yqe(t,e=!1){let[n,r]=T.useReducer(()=>({}),{}),s=T.useMemo(()=>Kqe(t),[t,n]);return ls(()=>{if(!t)return;let i=new ResizeObserver(r);return i.observe(t),()=>{i.disconnect()}},[t]),e?{width:`${s.width}px`,height:`${s.height}px`}:s}let Xqe=class extends Map{constructor(e){super(),this.factory=e}get(e){let n=super.get(e);return n===void 0&&(n=this.factory(e),this.set(e,n)),n}};function Mse(t,e){let n=t(),r=new Set;return{getSnapshot(){return n},subscribe(s){return r.add(s),()=>r.delete(s)},dispatch(s,...i){let o=e[s].call(n,...i);o&&(n=o,r.forEach(a=>a()))}}}function jse(t){return T.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getSnapshot)}let Jqe=new Xqe(()=>Mse(()=>[],{ADD(t){return this.includes(t)?this:[...this,t]},REMOVE(t){let e=this.indexOf(t);if(e===-1)return this;let n=this.slice();return n.splice(e,1),n}}));function Fse(t,e){let n=Jqe.get(e),r=T.useId(),s=jse(n);if(ls(()=>{if(t)return n.dispatch("ADD",r),()=>n.dispatch("REMOVE",r)},[n,t]),!t)return!1;let i=s.indexOf(r),o=s.length;return i===-1&&(i=o,o+=1),i===o-1}function Zqe(t,e,n){let r=nu(s=>{let i=s.getBoundingClientRect();i.x===0&&i.y===0&&i.width===0&&i.height===0&&n()});T.useEffect(()=>{if(!t)return;let s=e===null?null:e instanceof HTMLElement?e:e.current;if(!s)return;let i=Kf();if(typeof ResizeObserver<"u"){let o=new ResizeObserver(()=>r.current(s));o.observe(s),i.add(()=>o.disconnect())}if(typeof IntersectionObserver<"u"){let o=new IntersectionObserver(()=>r.current(s));o.observe(s),i.add(()=>o.disconnect())}return()=>i.dispose()},[e,r,t])}let k4=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(","),Qqe=["[data-autofocus]"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var Hc=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t[t.AutoFocus=64]="AutoFocus",t))(Hc||{}),vS=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(vS||{}),eKe=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(eKe||{});function gC(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(k4)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function tKe(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(Qqe)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var L6=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(L6||{});function Bse(t,e=0){var n;return t===((n=zv(t))==null?void 0:n.body)?!1:qo(e,{0(){return t.matches(k4)},1(){let r=t;for(;r!==null;){if(r.matches(k4))return!0;r=r.parentElement}return!1}})}var nKe=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(nKe||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));let rKe=["textarea","input"].join(",");function sKe(t){var e,n;return(n=(e=t?.matches)==null?void 0:e.call(t,rKe))!=null?n:!1}function iKe(t,e=n=>n){return t.slice().sort((n,r)=>{let s=e(n),i=e(r);if(s===null||i===null)return 0;let o=s.compareDocumentPosition(i);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Mh(t,e,{sorted:n=!0,relativeTo:r=null,skipElements:s=[]}={}){let i=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t.ownerDocument,o=Array.isArray(t)?n?iKe(t):t:e&64?tKe(t):gC(t);s.length>0&&o.length>1&&(o=o.filter(f=>!s.some(g=>g!=null&&"current"in g?g?.current===f:g===f))),r=r??i.activeElement;let a=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),l=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,o.indexOf(r))-1;if(e&4)return Math.max(0,o.indexOf(r))+1;if(e&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=e&32?{preventScroll:!0}:{},u=0,d=o.length,h;do{if(u>=d||u+d<=0)return 0;let f=l+u;if(e&16)f=(f+d)%d;else{if(f<0)return 3;if(f>=d)return 1}h=o[f],h?.focus(c),u+=a}while(h!==i.activeElement);return e&6&&sKe(h)&&h.select(),2}function Use(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function oKe(){return/Android/gi.test(window.navigator.userAgent)}function aKe(){return Use()||oKe()}function eb(t,e,n,r){let s=nu(n);T.useEffect(()=>{if(!t)return;function i(o){s.current(o)}return document.addEventListener(e,i,r),()=>document.removeEventListener(e,i,r)},[t,e,r])}function $se(t,e,n,r){let s=nu(n);T.useEffect(()=>{if(!t)return;function i(o){s.current(o)}return window.addEventListener(e,i,r),()=>window.removeEventListener(e,i,r)},[t,e,r])}const x$=30;function lKe(t,e,n){let r=Fse(t,"outside-click"),s=nu(n),i=T.useCallback(function(l,c){if(l.defaultPrevented)return;let u=c(l);if(u===null||!u.getRootNode().contains(u)||!u.isConnected)return;let d=function h(f){return typeof f=="function"?h(f()):Array.isArray(f)||f instanceof Set?f:[f]}(e);for(let h of d)if(h!==null&&(h.contains(u)||l.composed&&l.composedPath().includes(h)))return;return!Bse(u,L6.Loose)&&u.tabIndex!==-1&&l.preventDefault(),s.current(l,u)},[s,e]),o=T.useRef(null);eb(r,"pointerdown",l=>{var c,u;o.current=((u=(c=l.composedPath)==null?void 0:c.call(l))==null?void 0:u[0])||l.target},!0),eb(r,"mousedown",l=>{var c,u;o.current=((u=(c=l.composedPath)==null?void 0:c.call(l))==null?void 0:u[0])||l.target},!0),eb(r,"click",l=>{aKe()||o.current&&(i(l,()=>o.current),o.current=null)},!0);let a=T.useRef({x:0,y:0});eb(r,"touchstart",l=>{a.current.x=l.touches[0].clientX,a.current.y=l.touches[0].clientY},!0),eb(r,"touchend",l=>{let c={x:l.changedTouches[0].clientX,y:l.changedTouches[0].clientY};if(!(Math.abs(c.x-a.current.x)>=x$||Math.abs(c.y-a.current.y)>=x$))return i(l,()=>l.target instanceof HTMLElement?l.target:null)},!0),$se(r,"blur",l=>i(l,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function qg(...t){return T.useMemo(()=>zv(...t),[...t])}function cKe(t,e,n,r){let s=nu(n);T.useEffect(()=>{t=t??window;function i(o){s.current(o)}return t.addEventListener(e,i,r),()=>t.removeEventListener(e,i,r)},[t,e,r])}function uKe(t,e){return T.useMemo(()=>{var n;if(t.type)return t.type;let r=(n=t.as)!=null?n:"button";if(typeof r=="string"&&r.toLowerCase()==="button"||e?.tagName==="BUTTON"&&!e.hasAttribute("type"))return"button"},[t.type,t.as,e])}function dKe(){let t;return{before({doc:e}){var n;let r=e.documentElement,s=(n=e.defaultView)!=null?n:window;t=Math.max(0,s.innerWidth-r.clientWidth)},after({doc:e,d:n}){let r=e.documentElement,s=Math.max(0,r.clientWidth-r.offsetWidth),i=Math.max(0,t-s);n.style(r,"paddingRight",`${i}px`)}}}function hKe(){return Use()?{before({doc:t,d:e,meta:n}){function r(s){return n.containers.flatMap(i=>i()).some(i=>i.contains(s))}e.microTask(()=>{var s;if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let a=Kf();a.style(t.documentElement,"scrollBehavior","auto"),e.add(()=>e.microTask(()=>a.dispose()))}let i=(s=window.scrollY)!=null?s:window.pageYOffset,o=null;e.addEventListener(t,"click",a=>{if(a.target instanceof HTMLElement)try{let l=a.target.closest("a");if(!l)return;let{hash:c}=new URL(l.href),u=t.querySelector(c);u&&!r(u)&&(o=u)}catch{}},!0),e.addEventListener(t,"touchstart",a=>{if(a.target instanceof HTMLElement)if(r(a.target)){let l=a.target;for(;l.parentElement&&r(l.parentElement);)l=l.parentElement;e.style(l,"overscrollBehavior","contain")}else e.style(a.target,"touchAction","none")}),e.addEventListener(t,"touchmove",a=>{if(a.target instanceof HTMLElement){if(a.target.tagName==="INPUT")return;if(r(a.target)){let l=a.target;for(;l.parentElement&&l.dataset.headlessuiPortal!==""&&!(l.scrollHeight>l.clientHeight||l.scrollWidth>l.clientWidth);)l=l.parentElement;l.dataset.headlessuiPortal===""&&a.preventDefault()}else a.preventDefault()}},{passive:!1}),e.add(()=>{var a;let l=(a=window.scrollY)!=null?a:window.pageYOffset;i!==l&&window.scrollTo(0,i),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function fKe(){return{before({doc:t,d:e}){e.style(t.documentElement,"overflow","hidden")}}}function pKe(t){let e={};for(let n of t)Object.assign(e,n(e));return e}let jh=Mse(()=>new Map,{PUSH(t,e){var n;let r=(n=this.get(t))!=null?n:{doc:t,count:0,d:Kf(),meta:new Set};return r.count++,r.meta.add(e),this.set(t,r),this},POP(t,e){let n=this.get(t);return n&&(n.count--,n.meta.delete(e)),this},SCROLL_PREVENT({doc:t,d:e,meta:n}){let r={doc:t,d:e,meta:pKe(n)},s=[hKe(),dKe(),fKe()];s.forEach(({before:i})=>i?.(r)),s.forEach(({after:i})=>i?.(r))},SCROLL_ALLOW({d:t}){t.dispose()},TEARDOWN({doc:t}){this.delete(t)}});jh.subscribe(()=>{let t=jh.getSnapshot(),e=new Map;for(let[n]of t)e.set(n,n.documentElement.style.overflow);for(let n of t.values()){let r=e.get(n.doc)==="hidden",s=n.count!==0;(s&&!r||!s&&r)&&jh.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&jh.dispatch("TEARDOWN",n)}});function mKe(t,e,n=()=>({containers:[]})){let r=jse(jh),s=e?r.get(e):void 0,i=s?s.count>0:!1;return ls(()=>{if(!(!e||!t))return jh.dispatch("PUSH",e,n),()=>jh.dispatch("POP",e,n)},[t,e]),i}function gKe(t,e,n=()=>[document.body]){let r=Fse(t,"scroll-lock");mKe(r,e,s=>{var i;return{containers:[...(i=s.containers)!=null?i:[],n]}})}function bKe(t=0){let[e,n]=T.useState(t),r=T.useCallback(l=>n(l),[e]),s=T.useCallback(l=>n(c=>c|l),[e]),i=T.useCallback(l=>(e&l)===l,[e]),o=T.useCallback(l=>n(c=>c&~l),[n]),a=T.useCallback(l=>n(c=>c^l),[n]);return{flags:e,setFlag:r,addFlag:s,hasFlag:i,removeFlag:o,toggleFlag:a}}var yKe={},w$,E$;typeof An<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((w$=An==null?void 0:yKe)==null?void 0:w$.NODE_ENV)==="test"&&typeof((E$=Element?.prototype)==null?void 0:E$.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var vKe=(t=>(t[t.None=0]="None",t[t.Closed=1]="Closed",t[t.Enter=2]="Enter",t[t.Leave=4]="Leave",t))(vKe||{});function O6(t){let e={};for(let n in t)t[n]===!0&&(e[`data-${n}`]="");return e}function D6(t,e,n,r){let[s,i]=T.useState(n),{hasFlag:o,addFlag:a,removeFlag:l}=bKe(t&&s?3:0),c=T.useRef(!1),u=T.useRef(!1),d=mC();return ls(()=>{var h;if(t){if(n&&i(!0),!e){n&&a(3);return}return(h=r?.start)==null||h.call(r,n),_Ke(e,{inFlight:c,prepare(){u.current?u.current=!1:u.current=c.current,c.current=!0,!u.current&&(n?(a(3),l(4)):(a(4),l(2)))},run(){u.current?n?(l(3),a(4)):(l(4),a(3)):n?l(1):a(1)},done(){var f;u.current&&typeof e.getAnimations=="function"&&e.getAnimations().length>0||(c.current=!1,l(7),n||i(!1),(f=r?.end)==null||f.call(r,n))}})}},[t,n,e,d]),t?[s,{closed:o(1),enter:o(2),leave:o(4),transition:o(2)||o(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function _Ke(t,{prepare:e,run:n,done:r,inFlight:s}){let i=Kf();return wKe(t,{prepare:e,inFlight:s}),i.nextFrame(()=>{n(),i.requestAnimationFrame(()=>{i.add(xKe(t,r))})}),i.dispose}function xKe(t,e){var n,r;let s=Kf();if(!t)return s.dispose;let i=!1;s.add(()=>{i=!0});let o=(r=(n=t.getAnimations)==null?void 0:n.call(t).filter(a=>a instanceof CSSTransition))!=null?r:[];return o.length===0?(e(),s.dispose):(Promise.allSettled(o.map(a=>a.finished)).then(()=>{i||e()}),s.dispose)}function wKe(t,{inFlight:e,prepare:n}){if(e!=null&&e.current){n();return}let r=t.style.transition;t.style.transition="none",n(),t.offsetHeight,t.style.transition=r}function EKe(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}const Hse={...$m},SKe=Hse.useInsertionEffect,kKe=SKe||(t=>t());function zse(t){const e=T.useRef(()=>{});return kKe(()=>{e.current=t}),T.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}var C4=typeof document<"u"?T.useLayoutEffect:T.useEffect;let S$=!1,CKe=0;const k$=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+CKe++;function AKe(){const[t,e]=T.useState(()=>S$?k$():void 0);return C4(()=>{t==null&&e(k$())},[]),T.useEffect(()=>{S$=!0},[]),t}const TKe=Hse.useId,NKe=TKe||AKe;function PKe(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(s=>s(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(s=>s!==n))||[])}}}const IKe=T.createContext(null),RKe=T.createContext(null),LKe=()=>{var t;return((t=T.useContext(IKe))==null?void 0:t.id)||null},OKe=()=>T.useContext(RKe),DKe="data-floating-ui-focusable";function MKe(t){const{open:e=!1,onOpenChange:n,elements:r}=t,s=NKe(),i=T.useRef({}),[o]=T.useState(()=>PKe()),a=LKe()!=null,[l,c]=T.useState(r.reference),u=zse((f,g,y)=>{i.current.openEvent=f?g:void 0,o.emit("openchange",{open:f,event:g,reason:y,nested:a}),n?.(f,g,y)}),d=T.useMemo(()=>({setPositionReference:c}),[]),h=T.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return T.useMemo(()=>({dataRef:i,open:e,onOpenChange:u,elements:h,events:o,floatingId:s,refs:d}),[e,u,h,o,s,d])}function jKe(t){t===void 0&&(t={});const{nodeId:e}=t,n=MKe({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,s=r.elements,[i,o]=T.useState(null),[a,l]=T.useState(null),u=s?.domReference||i,d=T.useRef(null),h=OKe();C4(()=>{u&&(d.current=u)},[u]);const f=ZJ({...t,elements:{...s,...a&&{reference:a}}}),g=T.useCallback(_=>{const E=li(_)?{getBoundingClientRect:()=>_.getBoundingClientRect(),contextElement:_}:_;l(E),f.refs.setReference(E)},[f.refs]),y=T.useCallback(_=>{(li(_)||_===null)&&(d.current=_,o(_)),(li(f.refs.reference.current)||f.refs.reference.current===null||_!==null&&!li(_))&&f.refs.setReference(_)},[f.refs]),m=T.useMemo(()=>({...f.refs,setReference:y,setPositionReference:g,domReference:d}),[f.refs,y,g]),b=T.useMemo(()=>({...f.elements,domReference:u}),[f.elements,u]),v=T.useMemo(()=>({...f,...r,refs:m,elements:b,nodeId:e}),[f,m,b,e,r]);return C4(()=>{r.dataRef.current.floatingContext=v;const _=h?.nodesRef.current.find(E=>E.id===e);_&&(_.context=v)}),T.useMemo(()=>({...f,context:v,refs:m,elements:b}),[f,m,b,v])}const C$="active",A$="selected";function W5(t,e,n){const r=new Map,s=n==="item";let i=t;if(s&&t){const{[C$]:o,[A$]:a,...l}=t;i=l}return{...n==="floating"&&{tabIndex:-1,[DKe]:""},...i,...e.map(o=>{const a=o?o[n]:null;return typeof a=="function"?t?a(t):null:a}).concat(t).reduce((o,a)=>(a&&Object.entries(a).forEach(l=>{let[c,u]=l;if(!(s&&[C$,A$].includes(c)))if(c.indexOf("on")===0){if(r.has(c)||r.set(c,[]),typeof u=="function"){var d;(d=r.get(c))==null||d.push(u),o[c]=function(){for(var h,f=arguments.length,g=new Array(f),y=0;y<f;y++)g[y]=arguments[y];return(h=r.get(c))==null?void 0:h.map(m=>m(...g)).find(m=>m!==void 0)}}}else o[c]=u}),o),{})}}function FKe(t){t===void 0&&(t=[]);const e=t.map(a=>a?.reference),n=t.map(a=>a?.floating),r=t.map(a=>a?.item),s=T.useCallback(a=>W5(a,t,"reference"),e),i=T.useCallback(a=>W5(a,t,"floating"),n),o=T.useCallback(a=>W5(a,t,"item"),r);return T.useMemo(()=>({getReferenceProps:s,getFloatingProps:i,getItemProps:o}),[s,i,o])}function T$(t,e){return{...t,rects:{...t.rects,floating:{...t.rects.floating,height:e}}}}const BKe=t=>({name:"inner",options:t,async fn(e){const{listRef:n,overflowRef:r,onFallbackChange:s,offset:i=0,index:o=0,minItemsVisible:a=4,referenceOverflowThreshold:l=0,scrollRef:c,...u}=Gl(t,e),{rects:d,elements:{floating:h}}=e,f=n.current[o],g=c?.current||h,y=h.clientTop||g.clientTop,m=h.clientTop!==0,b=g.clientTop!==0,v=h===g;if(!f)return{};const _={...e,...await WL(-f.offsetTop-h.clientTop-d.reference.height/2-f.offsetHeight/2-i).fn(e)},E=await DT(T$(_,g.scrollHeight+y+h.clientTop),u),w=await DT(_,{...u,elementContext:"reference"}),S=js(0,E.top),k=_.y+S,R=(g.scrollHeight>g.clientHeight?C=>C:o1)(js(0,g.scrollHeight+(m&&v||b?y*2:0)-S-js(0,E.bottom)));if(g.style.maxHeight=R+"px",g.scrollTop=S,s){const C=g.offsetHeight<f.offsetHeight*Qc(a,n.current.length)-1||w.top>=-l||w.bottom>=-l;Hm.flushSync(()=>s(C))}return r&&(r.current=await DT(T$({..._,y:k},g.offsetHeight+y+h.clientTop),u)),{y:k}}});function UKe(t,e){const{open:n,elements:r}=t,{enabled:s=!0,overflowRef:i,scrollRef:o,onChange:a}=e,l=zse(a),c=T.useRef(!1),u=T.useRef(null),d=T.useRef(null);T.useEffect(()=>{if(!s)return;function f(y){if(y.ctrlKey||!g||i.current==null)return;const m=y.deltaY,b=i.current.top>=-.5,v=i.current.bottom>=-.5,_=g.scrollHeight-g.clientHeight,E=m<0?-1:1,w=m<0?"max":"min";g.scrollHeight<=g.clientHeight||(!b&&m>0||!v&&m<0?(y.preventDefault(),Hm.flushSync(()=>{l(S=>S+Math[w](m,_*E))})):/firefox/i.test(EKe())&&(g.scrollTop+=m))}const g=o?.current||r.floating;if(n&&g)return g.addEventListener("wheel",f),requestAnimationFrame(()=>{u.current=g.scrollTop,i.current!=null&&(d.current={...i.current})}),()=>{u.current=null,d.current=null,g.removeEventListener("wheel",f)}},[s,n,r.floating,i,o,l]);const h=T.useMemo(()=>({onKeyDown(){c.current=!0},onWheel(){c.current=!1},onPointerMove(){c.current=!1},onScroll(){const f=o?.current||r.floating;if(!(!i.current||!f||!c.current)){if(u.current!==null){const g=f.scrollTop-u.current;(i.current.bottom<-.5&&g<-1||i.current.top<-.5&&g>1)&&Hm.flushSync(()=>l(y=>y+g))}requestAnimationFrame(()=>{u.current=f.scrollTop})}}}),[r.floating,l,i,o]);return T.useMemo(()=>s?{floating:h}:{},[s,h])}let Vv=T.createContext({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});Vv.displayName="FloatingContext";let M6=T.createContext(null);M6.displayName="PlacementContext";function $Ke(t){return T.useMemo(()=>t?typeof t=="string"?{to:t}:t:null,[t])}function HKe(){return T.useContext(Vv).setReference}function zKe(){let{getFloatingProps:t,slot:e}=T.useContext(Vv);return T.useCallback((...n)=>Object.assign({},t(...n),{"data-anchor":e.anchor}),[t,e])}function VKe(t=null){t===!1&&(t=null),typeof t=="string"&&(t={to:t});let e=T.useContext(M6),n=T.useMemo(()=>t,[JSON.stringify(t,(s,i)=>{var o;return(o=i?.outerHTML)!=null?o:i})]);ls(()=>{e?.(n??null)},[e,n]);let r=T.useContext(Vv);return T.useMemo(()=>[r.setFloating,t?r.styles:{}],[r.setFloating,t,r.styles])}let N$=4;function WKe({children:t,enabled:e=!0}){let[n,r]=T.useState(null),[s,i]=T.useState(0),o=T.useRef(null),[a,l]=T.useState(null);GKe(a);let c=e&&n!==null&&a!==null,{to:u="bottom",gap:d=0,offset:h=0,padding:f=0,inner:g}=qKe(n,a),[y,m="center"]=u.split(" ");ls(()=>{c&&i(0)},[c]);let{refs:b,floatingStyles:v,context:_}=jKe({open:c,placement:y==="selection"?m==="center"?"bottom":`bottom-${m}`:m==="center"?`${y}`:`${y}-${m}`,strategy:"absolute",transform:!1,middleware:[WL({mainAxis:y==="selection"?0:d,crossAxis:h}),QJ({padding:f}),y!=="selection"&&eZ({padding:f}),y==="selection"&&g?BKe({...g,padding:f,overflowRef:o,offset:s,minItemsVisible:N$,referenceOverflowThreshold:f,onFallbackChange(C){var N,O;if(!C)return;let P=_.elements.floating;if(!P)return;let $=parseFloat(getComputedStyle(P).scrollPaddingBottom)||0,ee=Math.min(N$,P.childElementCount),J=0,Z=0;for(let M of(O=(N=_.elements.floating)==null?void 0:N.childNodes)!=null?O:[])if(M instanceof HTMLElement){let F=M.offsetTop,G=F+M.clientHeight+$,D=P.scrollTop,j=D+P.clientHeight;if(F>=D&&G<=j)ee--;else{Z=Math.max(0,Math.min(G,j)-Math.max(F,D)),J=M.clientHeight;break}}ee>=1&&i(M=>{let F=J*ee-Z+$;return M>=F?M:F})}}):null,tZ({padding:f,apply({availableWidth:C,availableHeight:N,elements:O}){Object.assign(O.floating.style,{overflow:"auto",maxWidth:`${C}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${N}px)`})}})].filter(Boolean),whileElementsMounted:XJ}),[E=y,w=m]=_.placement.split("-");y==="selection"&&(E="selection");let S=T.useMemo(()=>({anchor:[E,w].filter(Boolean).join(" ")}),[E,w]),k=UKe(_,{overflowRef:o,onChange:i}),{getReferenceProps:x,getFloatingProps:I}=FKe([k]),R=dn(C=>{l(C),b.setFloating(C)});return T.createElement(M6.Provider,{value:r},T.createElement(Vv.Provider,{value:{setFloating:R,setReference:b.setReference,styles:v,getReferenceProps:x,getFloatingProps:I,slot:S}},t))}function GKe(t){ls(()=>{if(!t)return;let e=new MutationObserver(()=>{let n=window.getComputedStyle(t).maxHeight,r=parseFloat(n);if(isNaN(r))return;let s=parseInt(n);isNaN(s)||r!==s&&(t.style.maxHeight=`${Math.ceil(r)}px`)});return e.observe(t,{attributes:!0,attributeFilter:["style"]}),()=>{e.disconnect()}},[t])}function qKe(t,e){var n,r,s;let i=G5((n=t?.gap)!=null?n:"var(--anchor-gap, 0)",e),o=G5((r=t?.offset)!=null?r:"var(--anchor-offset, 0)",e),a=G5((s=t?.padding)!=null?s:"var(--anchor-padding, 0)",e);return{...t,gap:i,offset:o,padding:a}}function G5(t,e,n=void 0){let r=mC(),s=dn((l,c)=>{if(l==null)return[n,null];if(typeof l=="number")return[l,null];if(typeof l=="string"){if(!c)return[n,null];let u=P$(l,c);return[u,d=>{let h=Vse(l);{let f=h.map(g=>window.getComputedStyle(c).getPropertyValue(g));r.requestAnimationFrame(function g(){r.nextFrame(g);let y=!1;for(let[b,v]of h.entries()){let _=window.getComputedStyle(c).getPropertyValue(v);if(f[b]!==_){f[b]=_,y=!0;break}}if(!y)return;let m=P$(l,c);u!==m&&(d(m),u=m)})}return r.dispose}]}return[n,null]}),i=T.useMemo(()=>s(t,e)[0],[t,e]),[o=i,a]=T.useState();return ls(()=>{let[l,c]=s(t,e);if(a(l),!!c)return c(a)},[t,e]),o}function Vse(t){let e=/var\((.*)\)/.exec(t);if(e){let n=e[1].indexOf(",");if(n===-1)return[e[1]];let r=e[1].slice(0,n).trim(),s=e[1].slice(n+1).trim();return s?[r,...Vse(s)]:[r]}return[]}function P$(t,e){let n=document.createElement("div");e.appendChild(n),n.style.setProperty("margin-top","0px","important"),n.style.setProperty("margin-top",t,"important");let r=parseFloat(window.getComputedStyle(n).marginTop)||0;return e.removeChild(n),r}let bC=T.createContext(null);bC.displayName="OpenClosedContext";var Yi=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(Yi||{});function yC(){return T.useContext(bC)}function Wse({value:t,children:e}){return ut.createElement(bC.Provider,{value:t},e)}function KKe({children:t}){return ut.createElement(bC.Provider,{value:null},t)}function YKe(t){let e=dn(t),n=T.useRef(!1);T.useEffect(()=>(n.current=!1,()=>{n.current=!0,Ise(()=>{n.current&&e()})}),[e])}function XKe(){let t=typeof document>"u";return"useSyncExternalStore"in $m?(e=>e.useSyncExternalStore)($m)(()=>()=>{},()=>!1,()=>!t):!1}function j6(){let t=XKe(),[e,n]=T.useState(sf.isHandoffComplete);return e&&sf.isHandoffComplete===!1&&n(!1),T.useEffect(()=>{e!==!0&&n(!0)},[e]),T.useEffect(()=>sf.handoff(),[]),t?!1:e}let JKe=T.createContext(!1);function ZKe(){return T.useContext(JKe)}function QKe(t){let e=ZKe(),n=T.useContext(qse),r=qg(t),[s,i]=T.useState(()=>{var o;if(!e&&n!==null)return(o=n.current)!=null?o:null;if(sf.isServer)return null;let a=r?.getElementById("headlessui-portal-root");if(a)return a;if(r===null)return null;let l=r.createElement("div");return l.setAttribute("id","headlessui-portal-root"),r.body.appendChild(l)});return T.useEffect(()=>{s!==null&&(r!=null&&r.body.contains(s)||r==null||r.body.appendChild(s))},[s,r]),T.useEffect(()=>{e||n!==null&&i(n.current)},[n,i,e]),s}let Gse=T.Fragment,eYe=uo(function(t,e){let n=t,r=T.useRef(null),s=Ia(Dse(d=>{r.current=d}),e),i=qg(r),o=QKe(r),[a]=T.useState(()=>{var d;return sf.isServer?null:(d=i?.createElement("div"))!=null?d:null}),l=T.useContext(A4),c=j6();ls(()=>{!o||!a||o.contains(a)||(a.setAttribute("data-headlessui-portal",""),o.appendChild(a))},[o,a]),ls(()=>{if(a&&l)return l.register(a)},[l,a]),YKe(()=>{var d;!o||!a||(a instanceof Node&&o.contains(a)&&o.removeChild(a),o.childNodes.length<=0&&((d=o.parentElement)==null||d.removeChild(o)))});let u=Fa();return c?!o||!a?null:Hm.createPortal(u({ourProps:{ref:s},theirProps:n,slot:{},defaultTag:Gse,name:"Portal"}),a):null});function tYe(t,e){let n=Ia(e),{enabled:r=!0,...s}=t,i=Fa();return r?ut.createElement(eYe,{...s,ref:n}):i({ourProps:{ref:n},theirProps:s,slot:{},defaultTag:Gse,name:"Portal"})}let nYe=T.Fragment,qse=T.createContext(null);function rYe(t,e){let{target:n,...r}=t,s={ref:Ia(e)},i=Fa();return ut.createElement(qse.Provider,{value:n},i({ourProps:s,theirProps:r,defaultTag:nYe,name:"Popover.Group"}))}let A4=T.createContext(null);function sYe(){let t=T.useContext(A4),e=T.useRef([]),n=dn(i=>(e.current.push(i),t&&t.register(i),()=>r(i))),r=dn(i=>{let o=e.current.indexOf(i);o!==-1&&e.current.splice(o,1),t&&t.unregister(i)}),s=T.useMemo(()=>({register:n,unregister:r,portals:e}),[n,r,e]);return[e,T.useMemo(()=>function({children:i}){return ut.createElement(A4.Provider,{value:s},i)},[s])]}let iYe=uo(tYe),oYe=uo(rYe),aYe=Object.assign(iYe,{Group:oYe});function lYe({defaultContainers:t=[],portals:e,mainTreeNode:n}={}){let r=qg(n),s=dn(()=>{var i,o;let a=[];for(let l of t)l!==null&&(l instanceof HTMLElement?a.push(l):"current"in l&&l.current instanceof HTMLElement&&a.push(l.current));if(e!=null&&e.current)for(let l of e.current)a.push(l);for(let l of(i=r?.querySelectorAll("html > *, body > *"))!=null?i:[])l!==document.body&&l!==document.head&&l instanceof HTMLElement&&l.id!=="headlessui-portal-root"&&(n&&(l.contains(n)||l.contains((o=n?.getRootNode())==null?void 0:o.host))||a.some(c=>l.contains(c))||a.push(l));return a});return{resolveContainers:s,contains:dn(i=>s().some(o=>o.contains(i)))}}let Kse=T.createContext(null);function Yse({children:t,node:e}){let[n,r]=T.useState(null),s=Xse(e??n);return ut.createElement(Kse.Provider,{value:s},t,s===null&&ut.createElement(yS,{features:C1.Hidden,ref:i=>{var o,a;if(i){for(let l of(a=(o=zv(i))==null?void 0:o.querySelectorAll("html > *, body > *"))!=null?a:[])if(l!==document.body&&l!==document.head&&l instanceof HTMLElement&&l!=null&&l.contains(i)){r(l);break}}}}))}function Xse(t=null){var e;return(e=T.useContext(Kse))!=null?e:t}function cYe(){let t=T.useRef(!1);return ls(()=>(t.current=!0,()=>{t.current=!1}),[]),t}var zc=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(zc||{});function Jse(){let t=T.useRef(0);return $se(!0,"keydown",e=>{e.key==="Tab"&&(t.current=e.shiftKey?1:0)},!0),t}function Zse(t){var e;return!!(t.enter||t.enterFrom||t.enterTo||t.leave||t.leaveFrom||t.leaveTo)||((e=t.as)!=null?e:eie)!==T.Fragment||ut.Children.count(t.children)===1}let vC=T.createContext(null);vC.displayName="TransitionContext";var uYe=(t=>(t.Visible="visible",t.Hidden="hidden",t))(uYe||{});function dYe(){let t=T.useContext(vC);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}function hYe(){let t=T.useContext(_C);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}let _C=T.createContext(null);_C.displayName="NestingContext";function xC(t){return"children"in t?xC(t.children):t.current.filter(({el:e})=>e.current!==null).filter(({state:e})=>e==="visible").length>0}function Qse(t,e){let n=nu(t),r=T.useRef([]),s=cYe(),i=mC(),o=dn((f,g=ed.Hidden)=>{let y=r.current.findIndex(({el:m})=>m===f);y!==-1&&(qo(g,{[ed.Unmount](){r.current.splice(y,1)},[ed.Hidden](){r.current[y].state="hidden"}}),i.microTask(()=>{var m;!xC(r)&&s.current&&((m=n.current)==null||m.call(n))}))}),a=dn(f=>{let g=r.current.find(({el:y})=>y===f);return g?g.state!=="visible"&&(g.state="visible"):r.current.push({el:f,state:"visible"}),()=>o(f,ed.Unmount)}),l=T.useRef([]),c=T.useRef(Promise.resolve()),u=T.useRef({enter:[],leave:[]}),d=dn((f,g,y)=>{l.current.splice(0),e&&(e.chains.current[g]=e.chains.current[g].filter(([m])=>m!==f)),e?.chains.current[g].push([f,new Promise(m=>{l.current.push(m)})]),e?.chains.current[g].push([f,new Promise(m=>{Promise.all(u.current[g].map(([b,v])=>v)).then(()=>m())})]),g==="enter"?c.current=c.current.then(()=>e?.wait.current).then(()=>y(g)):y(g)}),h=dn((f,g,y)=>{Promise.all(u.current[g].splice(0).map(([m,b])=>b)).then(()=>{var m;(m=l.current.shift())==null||m()}).then(()=>y(g))});return T.useMemo(()=>({children:r,register:a,unregister:o,onStart:d,onStop:h,wait:c,chains:u}),[a,o,r,d,h,u,c])}let eie=T.Fragment,tie=gg.RenderStrategy;function fYe(t,e){var n,r;let{transition:s=!0,beforeEnter:i,afterEnter:o,beforeLeave:a,afterLeave:l,enter:c,enterFrom:u,enterTo:d,entered:h,leave:f,leaveFrom:g,leaveTo:y,...m}=t,[b,v]=T.useState(null),_=T.useRef(null),E=Zse(t),w=Ia(...E?[_,e,v]:e===null?[]:[e]),S=(n=m.unmount)==null||n?ed.Unmount:ed.Hidden,{show:k,appear:x,initial:I}=dYe(),[R,C]=T.useState(k?"visible":"hidden"),N=hYe(),{register:O,unregister:P}=N;ls(()=>O(_),[O,_]),ls(()=>{if(S===ed.Hidden&&_.current){if(k&&R!=="visible"){C("visible");return}return qo(R,{hidden:()=>P(_),visible:()=>O(_)})}},[R,_,O,P,k,S]);let $=j6();ls(()=>{if(E&&$&&R==="visible"&&_.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[_,R,$,E]);let ee=I&&!x,J=x&&k&&I,Z=T.useRef(!1),M=Qse(()=>{Z.current||(C("hidden"),P(_))},N),F=dn(te=>{Z.current=!0;let Y=te?"enter":"leave";M.onStart(_,Y,de=>{de==="enter"?i?.():de==="leave"&&a?.()})}),G=dn(te=>{let Y=te?"enter":"leave";Z.current=!1,M.onStop(_,Y,de=>{de==="enter"?o?.():de==="leave"&&l?.()}),Y==="leave"&&!xC(M)&&(C("hidden"),P(_))});T.useEffect(()=>{E&&s||(F(k),G(k))},[k,E,s]);let D=!(!s||!E||!$||ee),[,j]=D6(D,b,k,{start:F,end:G}),V=vh({ref:w,className:((r=E4(m.className,J&&c,J&&u,j.enter&&c,j.enter&&j.closed&&u,j.enter&&!j.closed&&d,j.leave&&f,j.leave&&!j.closed&&g,j.leave&&j.closed&&y,!j.transition&&k&&h))==null?void 0:r.trim())||void 0,...O6(j)}),W=0;R==="visible"&&(W|=Yi.Open),R==="hidden"&&(W|=Yi.Closed),j.enter&&(W|=Yi.Opening),j.leave&&(W|=Yi.Closing);let re=Fa();return ut.createElement(_C.Provider,{value:M},ut.createElement(Wse,{value:W},re({ourProps:V,theirProps:m,defaultTag:eie,features:tie,visible:R==="visible",name:"Transition.Child"})))}function pYe(t,e){let{show:n,appear:r=!1,unmount:s=!0,...i}=t,o=T.useRef(null),a=Zse(t),l=Ia(...a?[o,e]:e===null?[]:[e]);j6();let c=yC();if(n===void 0&&c!==null&&(n=(c&Yi.Open)===Yi.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,d]=T.useState(n?"visible":"hidden"),h=Qse(()=>{n||d("hidden")}),[f,g]=T.useState(!0),y=T.useRef([n]);ls(()=>{f!==!1&&y.current[y.current.length-1]!==n&&(y.current.push(n),g(!1))},[y,n]);let m=T.useMemo(()=>({show:n,appear:r,initial:f}),[n,r,f]);ls(()=>{n?d("visible"):!xC(h)&&o.current!==null&&d("hidden")},[n,h]);let b={unmount:s},v=dn(()=>{var w;f&&g(!1),(w=t.beforeEnter)==null||w.call(t)}),_=dn(()=>{var w;f&&g(!1),(w=t.beforeLeave)==null||w.call(t)}),E=Fa();return ut.createElement(_C.Provider,{value:h},ut.createElement(vC.Provider,{value:m},E({ourProps:{...b,as:T.Fragment,children:ut.createElement(nie,{ref:l,...b,...i,beforeEnter:v,beforeLeave:_})},theirProps:{},defaultTag:T.Fragment,features:tie,visible:u==="visible",name:"Transition"})))}function mYe(t,e){let n=T.useContext(vC)!==null,r=yC()!==null;return ut.createElement(ut.Fragment,null,!n&&r?ut.createElement(T4,{ref:e,...t}):ut.createElement(nie,{ref:e,...t}))}let T4=uo(pYe),nie=uo(fYe),gYe=uo(mYe),bYe=Object.assign(T4,{Child:gYe,Root:T4});var yYe=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(yYe||{}),vYe=(t=>(t[t.TogglePopover=0]="TogglePopover",t[t.ClosePopover=1]="ClosePopover",t[t.SetButton=2]="SetButton",t[t.SetButtonId=3]="SetButtonId",t[t.SetPanel=4]="SetPanel",t[t.SetPanelId=5]="SetPanelId",t))(vYe||{});let _Ye={0:t=>({...t,popoverState:qo(t.popoverState,{0:1,1:0}),__demoMode:!1}),1(t){return t.popoverState===1?t:{...t,popoverState:1,__demoMode:!1}},2(t,e){return t.button===e.button?t:{...t,button:e.button}},3(t,e){return t.buttonId===e.buttonId?t:{...t,buttonId:e.buttonId}},4(t,e){return t.panel===e.panel?t:{...t,panel:e.panel}},5(t,e){return t.panelId===e.panelId?t:{...t,panelId:e.panelId}}},F6=T.createContext(null);F6.displayName="PopoverContext";function wC(t){let e=T.useContext(F6);if(e===null){let n=new Error(`<${t} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,wC),n}return e}let EC=T.createContext(null);EC.displayName="PopoverAPIContext";function B6(t){let e=T.useContext(EC);if(e===null){let n=new Error(`<${t} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,B6),n}return e}let U6=T.createContext(null);U6.displayName="PopoverGroupContext";function rie(){return T.useContext(U6)}let SC=T.createContext(null);SC.displayName="PopoverPanelContext";function xYe(){return T.useContext(SC)}function wYe(t,e){return qo(e.type,_Ye,t,e)}let EYe="div";function SYe(t,e){var n;let{__demoMode:r=!1,...s}=t,i=T.useRef(null),o=Ia(e,Dse(M=>{i.current=M})),a=T.useRef([]),l=T.useReducer(wYe,{__demoMode:r,popoverState:r?0:1,buttons:a,button:null,buttonId:null,panel:null,panelId:null,beforePanelSentinel:T.createRef(),afterPanelSentinel:T.createRef(),afterButtonSentinel:T.createRef()}),[{popoverState:c,button:u,buttonId:d,panel:h,panelId:f,beforePanelSentinel:g,afterPanelSentinel:y,afterButtonSentinel:m},b]=l,v=qg((n=i.current)!=null?n:u),_=T.useMemo(()=>{if(!u||!h)return!1;for(let W of document.querySelectorAll("body > *"))if(Number(W?.contains(u))^Number(W?.contains(h)))return!0;let M=gC(),F=M.indexOf(u),G=(F+M.length-1)%M.length,D=(F+1)%M.length,j=M[G],V=M[D];return!h.contains(j)&&!h.contains(V)},[u,h]),E=nu(d),w=nu(f),S=T.useMemo(()=>({buttonId:E,panelId:w,close:()=>b({type:1})}),[E,w,b]),k=rie(),x=k?.registerPopover,I=dn(()=>{var M;return(M=k?.isFocusWithinPopoverGroup())!=null?M:v?.activeElement&&(u?.contains(v.activeElement)||h?.contains(v.activeElement))});T.useEffect(()=>x?.(S),[x,S]);let[R,C]=sYe(),N=Xse(u),O=lYe({mainTreeNode:N,portals:R,defaultContainers:[u,h]});cKe(v?.defaultView,"focus",M=>{var F,G,D,j,V,W;M.target!==window&&M.target instanceof HTMLElement&&c===0&&(I()||u&&h&&(O.contains(M.target)||(G=(F=g.current)==null?void 0:F.contains)!=null&&G.call(F,M.target)||(j=(D=y.current)==null?void 0:D.contains)!=null&&j.call(D,M.target)||(W=(V=m.current)==null?void 0:V.contains)!=null&&W.call(V,M.target)||b({type:1})))},!0),lKe(c===0,O.resolveContainers,(M,F)=>{b({type:1}),Bse(F,L6.Loose)||(M.preventDefault(),u?.focus())});let P=dn(M=>{b({type:1});let F=M?M instanceof HTMLElement?M:"current"in M&&M.current instanceof HTMLElement?M.current:u:u;F?.focus()}),$=T.useMemo(()=>({close:P,isPortalled:_}),[P,_]),ee=T.useMemo(()=>({open:c===0,close:P}),[c,P]),J={ref:o},Z=Fa();return ut.createElement(Yse,{node:N},ut.createElement(WKe,null,ut.createElement(SC.Provider,{value:null},ut.createElement(F6.Provider,{value:l},ut.createElement(EC.Provider,{value:$},ut.createElement(qqe,{value:P},ut.createElement(Wse,{value:qo(c,{0:Yi.Open,1:Yi.Closed})},ut.createElement(C,null,Z({ourProps:J,theirProps:s,slot:ee,defaultTag:EYe,name:"Popover"})))))))))}let kYe="button";function CYe(t,e){let n=T.useId(),{id:r=`headlessui-popover-button-${n}`,disabled:s=!1,autoFocus:i=!1,...o}=t,[a,l]=wC("Popover.Button"),{isPortalled:c}=B6("Popover.Button"),u=T.useRef(null),d=`headlessui-focus-sentinel-${T.useId()}`,h=rie(),f=h?.closeOthers,g=xYe()!==null;T.useEffect(()=>{if(!g)return l({type:3,buttonId:r}),()=>{l({type:3,buttonId:null})}},[g,r,l]);let[y]=T.useState(()=>Symbol()),m=Ia(u,e,HKe(),dn(F=>{if(!g){if(F)a.buttons.current.push(y);else{let G=a.buttons.current.indexOf(y);G!==-1&&a.buttons.current.splice(G,1)}a.buttons.current.length>1&&console.warn("You are already using a <Popover.Button /> but only 1 <Popover.Button /> is supported."),F&&l({type:2,button:F})}})),b=Ia(u,e),v=qg(u),_=dn(F=>{var G,D,j;if(g){if(a.popoverState===1)return;switch(F.key){case Vu.Space:case Vu.Enter:F.preventDefault(),(D=(G=F.target).click)==null||D.call(G),l({type:1}),(j=a.button)==null||j.focus();break}}else switch(F.key){case Vu.Space:case Vu.Enter:F.preventDefault(),F.stopPropagation(),a.popoverState===1&&f?.(a.buttonId),l({type:0});break;case Vu.Escape:if(a.popoverState!==0)return f?.(a.buttonId);if(!u.current||v!=null&&v.activeElement&&!u.current.contains(v.activeElement))return;F.preventDefault(),F.stopPropagation(),l({type:1});break}}),E=dn(F=>{g||F.key===Vu.Space&&F.preventDefault()}),w=dn(F=>{var G,D;Lse(F.currentTarget)||s||(g?(l({type:1}),(G=a.button)==null||G.focus()):(F.preventDefault(),F.stopPropagation(),a.popoverState===1&&f?.(a.buttonId),l({type:0}),(D=a.button)==null||D.focus()))}),S=dn(F=>{F.preventDefault(),F.stopPropagation()}),{isFocusVisible:k,focusProps:x}=Rqe({autoFocus:i}),{isHovered:I,hoverProps:R}=Iqe({isDisabled:s}),{pressed:C,pressProps:N}=Fqe({disabled:s}),O=a.popoverState===0,P=T.useMemo(()=>({open:O,active:C||O,disabled:s,hover:I,focus:k,autofocus:i}),[O,I,k,C,s,i]),$=uKe(t,a.button),ee=S4(g?{ref:b,type:$,onKeyDown:_,onClick:w,disabled:s||void 0,autoFocus:i}:{ref:m,id:a.buttonId,type:$,"aria-expanded":a.popoverState===0,"aria-controls":a.panel?a.panelId:void 0,disabled:s||void 0,autoFocus:i,onKeyDown:_,onKeyUp:E,onClick:w,onMouseDown:S},x,R,N),J=Jse(),Z=dn(()=>{let F=a.panel;if(!F)return;function G(){qo(J.current,{[zc.Forwards]:()=>Mh(F,Hc.First),[zc.Backwards]:()=>Mh(F,Hc.Last)})===vS.Error&&Mh(gC().filter(D=>D.dataset.headlessuiFocusGuard!=="true"),qo(J.current,{[zc.Forwards]:Hc.Next,[zc.Backwards]:Hc.Previous}),{relativeTo:a.button})}G()}),M=Fa();return ut.createElement(ut.Fragment,null,M({ourProps:ee,theirProps:o,slot:P,defaultTag:kYe,name:"Popover.Button"}),O&&!g&&c&&ut.createElement(yS,{id:d,ref:a.afterButtonSentinel,features:C1.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:Z}))}let AYe="div",TYe=gg.RenderStrategy|gg.Static;function sie(t,e){let n=T.useId(),{id:r=`headlessui-popover-backdrop-${n}`,transition:s=!1,...i}=t,[{popoverState:o},a]=wC("Popover.Backdrop"),[l,c]=T.useState(null),u=Ia(e,c),d=yC(),[h,f]=D6(s,l,d!==null?(d&Yi.Open)===Yi.Open:o===0),g=dn(b=>{if(Lse(b.currentTarget))return b.preventDefault();a({type:1})}),y=T.useMemo(()=>({open:o===0}),[o]),m={ref:u,id:r,"aria-hidden":!0,onClick:g,...O6(f)};return Fa()({ourProps:m,theirProps:i,slot:y,defaultTag:AYe,features:TYe,visible:h,name:"Popover.Backdrop"})}let NYe="div",PYe=gg.RenderStrategy|gg.Static;function IYe(t,e){let n=T.useId(),{id:r=`headlessui-popover-panel-${n}`,focus:s=!1,anchor:i,portal:o=!1,modal:a=!1,transition:l=!1,...c}=t,[u,d]=wC("Popover.Panel"),{close:h,isPortalled:f}=B6("Popover.Panel"),g=`headlessui-focus-sentinel-before-${n}`,y=`headlessui-focus-sentinel-after-${n}`,m=T.useRef(null),b=$Ke(i),[v,_]=VKe(b),E=zKe();b&&(o=!0);let[w,S]=T.useState(null),k=Ia(m,e,b?v:null,dn(F=>d({type:4,panel:F})),S),x=qg(m);ls(()=>(d({type:5,panelId:r}),()=>{d({type:5,panelId:null})}),[r,d]);let I=yC(),[R,C]=D6(l,w,I!==null?(I&Yi.Open)===Yi.Open:u.popoverState===0);Zqe(R,u.button,()=>{d({type:1})});let N=u.__demoMode?!1:a&&R;gKe(N,x);let O=dn(F=>{var G;switch(F.key){case Vu.Escape:if(u.popoverState!==0||!m.current||x!=null&&x.activeElement&&!m.current.contains(x.activeElement))return;F.preventDefault(),F.stopPropagation(),d({type:1}),(G=u.button)==null||G.focus();break}});T.useEffect(()=>{var F;t.static||u.popoverState===1&&((F=t.unmount)==null||F)&&d({type:4,panel:null})},[u.popoverState,t.unmount,t.static,d]),T.useEffect(()=>{if(u.__demoMode||!s||u.popoverState!==0||!m.current)return;let F=x?.activeElement;m.current.contains(F)||Mh(m.current,Hc.First)},[u.__demoMode,s,m.current,u.popoverState]);let P=T.useMemo(()=>({open:u.popoverState===0,close:h}),[u.popoverState,h]),$=S4(b?E():{},{ref:k,id:r,onKeyDown:O,onBlur:s&&u.popoverState===0?F=>{var G,D,j,V,W;let re=F.relatedTarget;re&&m.current&&((G=m.current)!=null&&G.contains(re)||(d({type:1}),((j=(D=u.beforePanelSentinel.current)==null?void 0:D.contains)!=null&&j.call(D,re)||(W=(V=u.afterPanelSentinel.current)==null?void 0:V.contains)!=null&&W.call(V,re))&&re.focus({preventScroll:!0})))}:void 0,tabIndex:-1,style:{...c.style,..._,"--button-width":Yqe(u.button,!0).width},...O6(C)}),ee=Jse(),J=dn(()=>{let F=m.current;if(!F)return;function G(){qo(ee.current,{[zc.Forwards]:()=>{var D;Mh(F,Hc.First)===vS.Error&&((D=u.afterPanelSentinel.current)==null||D.focus())},[zc.Backwards]:()=>{var D;(D=u.button)==null||D.focus({preventScroll:!0})}})}G()}),Z=dn(()=>{let F=m.current;if(!F)return;function G(){qo(ee.current,{[zc.Forwards]:()=>{if(!u.button)return;let D=gC(),j=D.indexOf(u.button),V=D.slice(0,j+1),W=[...D.slice(j+1),...V];for(let re of W.slice())if(re.dataset.headlessuiFocusGuard==="true"||w!=null&&w.contains(re)){let te=W.indexOf(re);te!==-1&&W.splice(te,1)}Mh(W,Hc.First,{sorted:!1})},[zc.Backwards]:()=>{var D;Mh(F,Hc.Previous)===vS.Error&&((D=u.button)==null||D.focus())}})}G()}),M=Fa();return ut.createElement(KKe,null,ut.createElement(SC.Provider,{value:r},ut.createElement(EC.Provider,{value:{close:h,isPortalled:f}},ut.createElement(aYe,{enabled:o?t.static||R:!1},R&&f&&ut.createElement(yS,{id:g,ref:u.beforePanelSentinel,features:C1.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:J}),M({ourProps:$,theirProps:c,slot:P,defaultTag:NYe,features:PYe,visible:R,name:"Popover.Panel"}),R&&f&&ut.createElement(yS,{id:y,ref:u.afterPanelSentinel,features:C1.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:Z})))))}let RYe="div";function LYe(t,e){let n=T.useRef(null),r=Ia(n,e),[s,i]=T.useState([]),o=dn(y=>{i(m=>{let b=m.indexOf(y);if(b!==-1){let v=m.slice();return v.splice(b,1),v}return m})}),a=dn(y=>(i(m=>[...m,y]),()=>o(y))),l=dn(()=>{var y;let m=zv(n);if(!m)return!1;let b=m.activeElement;return(y=n.current)!=null&&y.contains(b)?!0:s.some(v=>{var _,E;return((_=m.getElementById(v.buttonId.current))==null?void 0:_.contains(b))||((E=m.getElementById(v.panelId.current))==null?void 0:E.contains(b))})}),c=dn(y=>{for(let m of s)m.buttonId.current!==y&&m.close()}),u=T.useMemo(()=>({registerPopover:a,unregisterPopover:o,isFocusWithinPopoverGroup:l,closeOthers:c}),[a,o,l,c]),d=T.useMemo(()=>({}),[]),h=t,f={ref:r},g=Fa();return ut.createElement(Yse,null,ut.createElement(U6.Provider,{value:u},g({ourProps:f,theirProps:h,slot:d,defaultTag:RYe,name:"Popover.Group"})))}let OYe=uo(SYe),DYe=uo(CYe),MYe=uo(sie),jYe=uo(sie),FYe=uo(IYe),BYe=uo(LYe),q5=Object.assign(OYe,{Button:DYe,Backdrop:jYe,Overlay:MYe,Panel:FYe,Group:BYe});const iie=t=>({js:"javascript",jsx:"jsx",ts:"typescript",tsx:"tsx",json:"json",html:"html",css:"css",py:"python",java:"java",rb:"ruby",cpp:"cpp",c:"c",cs:"csharp",go:"go",rs:"rust",php:"php",swift:"swift",md:"plaintext",sh:"bash"})[t]||"typescript",UYe=T.memo(({onClick:t,isFullscreen:e})=>p.jsx("button",{onClick:t,className:"ml-4 p-1 rounded hover:bg-bolt-elements-background-depth-3 text-bolt-elements-textTertiary hover:text-bolt-elements-textPrimary transition-colors",title:e?"Exit Fullscreen":"Enter Fullscreen",children:p.jsx("div",{className:e?"i-ph:corners-in":"i-ph:corners-out"})})),$Ye=T.memo(({isFullscreen:t,children:e})=>t?p.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/50 flex items-center justify-center p-6",children:p.jsx("div",{className:"w-full h-full max-w-[90vw] max-h-[90vh] bg-bolt-elements-background-depth-2 rounded-lg border border-bolt-elements-borderColor shadow-xl overflow-hidden",children:e})}):p.jsx(p.Fragment,{children:e})),HYe=1024*1024,zYe=/[\x00-\x08\x0E-\x1F]/,I$=t=>t.length>HYe||zYe.test(t),VYe=(t,e)=>{try{if(I$(t)||I$(e))return{beforeLines:[],afterLines:[],hasChanges:!1,lineChanges:{before:new Set,after:new Set},unifiedBlocks:[],isBinary:!0};const n=u=>u.replace(/\r\n/g,`
`).split(`
`).map(d=>d.trimEnd()),r=n(t),s=n(e);if(r.join(`
`)===s.join(`
`))return{beforeLines:r,afterLines:s,hasChanges:!1,lineChanges:{before:new Set,after:new Set},unifiedBlocks:[],isBinary:!1};const i={before:new Set,after:new Set},o=[];let a=0,l=0;for(;a<r.length||l<s.length;)if(a<r.length&&l<s.length&&r[a]===s[l])o.push({lineNumber:l,content:s[l],type:"unchanged",correspondingLine:a}),a++,l++;else{let u=!1;const d=3;for(let h=1;h<=d&&a+h<r.length&&l+h<s.length;h++)if(r[a+h]===s[l]){for(let f=0;f<h;f++)i.before.add(a+f),o.push({lineNumber:a+f,content:r[a+f],type:"removed",correspondingLine:l,charChanges:[{value:r[a+f],type:"removed"}]});a+=h,u=!0;break}else if(r[a]===s[l+h]){for(let f=0;f<h;f++)i.after.add(l+f),o.push({lineNumber:l+f,content:s[l+f],type:"added",correspondingLine:a,charChanges:[{value:s[l+f],type:"added"}]});l+=h,u=!0;break}if(!u)if(a<r.length&&l<s.length){const h=r[a],f=s[l];let g=0;for(;g<h.length&&g<f.length&&h[g]===f[g];)g++;let y=0;for(;y<h.length-g&&y<f.length-g&&h[h.length-1-y]===f[f.length-1-y];)y++;const m=h.slice(0,g),b=h.slice(g,h.length-y),v=f.slice(g,f.length-y),_=h.slice(h.length-y);b||v?(b&&(i.before.add(a),o.push({lineNumber:a,content:h,type:"removed",correspondingLine:l,charChanges:[{value:m,type:"unchanged"},{value:b,type:"removed"},{value:_,type:"unchanged"}]}),a++),v&&(i.after.add(l),o.push({lineNumber:l,content:f,type:"added",correspondingLine:a-1,charChanges:[{value:m,type:"unchanged"},{value:v,type:"added"},{value:_,type:"unchanged"}]}),l++)):(a<r.length&&(i.before.add(a),o.push({lineNumber:a,content:r[a],type:"removed",correspondingLine:l,charChanges:[{value:r[a],type:"removed"}]}),a++),l<s.length&&(i.after.add(l),o.push({lineNumber:l,content:s[l],type:"added",correspondingLine:a-1,charChanges:[{value:s[l],type:"added"}]}),l++))}else a<r.length&&(i.before.add(a),o.push({lineNumber:a,content:r[a],type:"removed",correspondingLine:l,charChanges:[{value:r[a],type:"removed"}]}),a++),l<s.length&&(i.after.add(l),o.push({lineNumber:l,content:s[l],type:"added",correspondingLine:a-1,charChanges:[{value:s[l],type:"added"}]}),l++)}const c=o.sort((u,d)=>u.lineNumber-d.lineNumber);return{beforeLines:r,afterLines:s,hasChanges:i.before.size>0||i.after.size>0,lineChanges:i,unifiedBlocks:c,isBinary:!1}}catch(n){return console.error("Error processing changes:",n),{beforeLines:[],afterLines:[],hasChanges:!1,lineChanges:{before:new Set,after:new Set},unifiedBlocks:[],error:!0,isBinary:!1}}},oie="w-9 shrink-0 pl-2 py-1 text-left font-mono text-bolt-elements-textTertiary border-r border-bolt-elements-borderColor bg-bolt-elements-background-depth-1",aie="px-1 py-1 font-mono whitespace-pre flex-1 group-hover:bg-bolt-elements-background-depth-2 text-bolt-elements-textPrimary",WYe="h-full overflow-auto diff-panel-content",GYe={added:"bg-green-500/10 dark:bg-green-500/20 border-l-4 border-green-500",removed:"bg-red-500/10 dark:bg-red-500/20 border-l-4 border-red-500",unchanged:""},qYe={added:"text-green-700 dark:text-green-500 bg-green-500/10 dark:bg-green-500/20",removed:"text-red-700 dark:text-red-500 bg-red-500/10 dark:bg-red-500/20",unchanged:"text-bolt-elements-textPrimary"},KYe=t=>p.jsx("div",{className:"h-full flex items-center justify-center p-4",children:p.jsxs("div",{className:"text-center text-bolt-elements-textTertiary",children:[p.jsx("div",{className:`i-ph:${t==="binary"?"file-x":"warning-circle"} text-4xl text-red-400 mb-2 mx-auto`}),p.jsx("p",{className:"font-medium text-bolt-elements-textPrimary",children:t==="binary"?"Binary file detected":"Error processing file"}),p.jsx("p",{className:"text-sm mt-1",children:t==="binary"?"Diff view is not available for binary files":"Could not generate diff preview"})]})}),YYe=T.memo(({beforeCode:t,language:e,highlighter:n,theme:r})=>p.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-4",children:[p.jsxs("div",{className:"text-center text-bolt-elements-textTertiary",children:[p.jsx("div",{className:"i-ph:files text-4xl text-green-400 mb-2 mx-auto"}),p.jsx("p",{className:"font-medium text-bolt-elements-textPrimary",children:"Files are identical"}),p.jsx("p",{className:"text-sm mt-1",children:"Both versions match exactly"})]}),p.jsxs("div",{className:"mt-4 w-full max-w-2xl bg-bolt-elements-background-depth-1 rounded-lg border border-bolt-elements-borderColor overflow-hidden",children:[p.jsx("div",{className:"p-2 text-xs font-bold text-bolt-elements-textTertiary border-b border-bolt-elements-borderColor",children:"Current Content"}),p.jsx("div",{className:"overflow-auto max-h-96",children:t.split(`
`).map((s,i)=>p.jsxs("div",{className:"flex group min-w-fit",children:[p.jsx("div",{className:oie,children:i+1}),p.jsxs("div",{className:aie,children:[p.jsx("span",{className:"mr-2",children:" "}),p.jsx("span",{dangerouslySetInnerHTML:{__html:n?n.codeToHtml(s,{lang:e,theme:r==="dark"?"github-dark":"github-light"}).replace(/<\/?pre[^>]*>/g,"").replace(/<\/?code[^>]*>/g,""):s}})]})]},i))})]})]})),XYe=(t,e)=>T.useMemo(()=>VYe(t,e),[t,e]),JYe=T.memo(({lineNumber:t,content:e,type:n,highlighter:r,language:s,block:i,theme:o})=>{const a=GYe[n],l=()=>{if(n==="unchanged"||!i.charChanges){const c=r?r.codeToHtml(e,{lang:s,theme:o==="dark"?"github-dark":"github-light"}).replace(/<\/?pre[^>]*>/g,"").replace(/<\/?code[^>]*>/g,""):e;return p.jsx("span",{dangerouslySetInnerHTML:{__html:c}})}return p.jsx(p.Fragment,{children:i.charChanges.map((c,u)=>{const d=qYe[c.type],h=r?r.codeToHtml(c.value,{lang:s,theme:o==="dark"?"github-dark":"github-light"}).replace(/<\/?pre[^>]*>/g,"").replace(/<\/?code[^>]*>/g,""):c.value;return p.jsx("span",{className:d,dangerouslySetInnerHTML:{__html:h}},u)})})};return p.jsxs("div",{className:"flex group min-w-fit",children:[p.jsx("div",{className:oie,children:t+1}),p.jsxs("div",{className:`${aie} ${a}`,children:[p.jsxs("span",{className:"mr-2 text-bolt-elements-textTertiary",children:[n==="added"&&p.jsx("span",{className:"text-green-700 dark:text-green-500",children:"+"}),n==="removed"&&p.jsx("span",{className:"text-red-700 dark:text-red-500",children:"-"}),n==="unchanged"&&" "]}),l()]})]})}),ZYe=T.memo(({filename:t,hasChanges:e,onToggleFullscreen:n,isFullscreen:r,beforeCode:s,afterCode:i})=>{const{additions:o,deletions:a}=T.useMemo(()=>e?og(s,i,{newlineIsToken:!1,ignoreWhitespace:!0,ignoreCase:!1}).reduce((u,d)=>(d.added&&(u.additions+=d.value.split(`
`).length),d.removed&&(u.deletions+=d.value.split(`
`).length),u),{additions:0,deletions:0}):{additions:0,deletions:0},[e,s,i]),l=o>0||a>0;return p.jsxs("div",{className:"flex items-center bg-bolt-elements-background-depth-1 p-2 text-sm text-bolt-elements-textPrimary shrink-0",children:[p.jsx("div",{className:"i-ph:file mr-2 h-4 w-4 shrink-0"}),p.jsx("span",{className:"truncate",children:t}),p.jsxs("span",{className:"ml-auto shrink-0 flex items-center gap-2",children:[e?p.jsxs(p.Fragment,{children:[l&&p.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[o>0&&p.jsxs("span",{className:"text-green-700 dark:text-green-500",children:["+",o]}),a>0&&p.jsxs("span",{className:"text-red-700 dark:text-red-500",children:["-",a]})]}),p.jsx("span",{className:"text-yellow-600 dark:text-yellow-400",children:"Modified"}),p.jsx("span",{className:"text-bolt-elements-textTertiary text-xs",children:new Date().toLocaleTimeString()})]}):p.jsx("span",{className:"text-green-700 dark:text-green-400",children:"No Changes"}),p.jsx(UYe,{onClick:n,isFullscreen:r})]})]})}),QYe=T.memo(({beforeCode:t,afterCode:e,filename:n,language:r})=>{const[s,i]=T.useState(!1),[o,a]=T.useState(null),l=It(Ly),c=T.useCallback(()=>{i(g=>!g)},[]),{unifiedBlocks:u,hasChanges:d,isBinary:h,error:f}=XYe(t,e);return T.useEffect(()=>{Y$e({themes:["github-dark","github-light"],langs:["typescript","javascript","json","html","css","jsx","tsx"]}).then(a)},[]),h||f?KYe(h?"binary":"error"):p.jsx($Ye,{isFullscreen:s,children:p.jsxs("div",{className:"w-full h-full flex flex-col",children:[p.jsx(ZYe,{filename:n,hasChanges:d,onToggleFullscreen:c,isFullscreen:s,beforeCode:t,afterCode:e}),p.jsx("div",{className:WYe,children:d?p.jsx("div",{className:"overflow-x-auto min-w-full",children:u.map((g,y)=>p.jsx(JYe,{lineNumber:g.lineNumber,content:g.content,type:g.type,highlighter:o,language:r,block:g,theme:l},`${g.lineNumber}-${y}`))}):p.jsx(YYe,{beforeCode:t,language:r,highlighter:o,theme:l})})]})})}),eXe=T.memo(({fileHistory:t,setFileHistory:e})=>{const n=It(St.files),r=It(St.selectedFile),s=It(St.currentDocument),i=It(St.unsavedFiles);if(T.useEffect(()=>{if(r&&s){const h=n[r];if(!h||!("content"in h))return;const f=t[r],g=s.value,y=g.replace(/\r\n/g,`
`).trim(),m=(f?.originalContent||h.content).replace(/\r\n/g,`
`).trim();if(!f){if(y!==m){const w=og(h.content,g);e(S=>({...S,[r]:{originalContent:h.content,lastModified:Date.now(),changes:w,versions:[{timestamp:Date.now(),content:g}],changeSource:"auto-save"}}))}return}const v=f.versions[f.versions.length-1]?.content.replace(/\r\n/g,`
`).trim();if(y===v)return;const _=ty(r);if(WQ(_,f.originalContent,g)){const w=og(f.originalContent,g);if(w.some(k=>(k.added||k.removed)&&k.value.trim().length>0)){const k={originalContent:f.originalContent,lastModified:Date.now(),changes:[...f.changes,...w].slice(-100),versions:[...f.versions,{timestamp:Date.now(),content:g}].slice(-10),changeSource:"auto-save"};e(x=>({...x,[r]:k}))}}}},[r,s?.value,n,e,i]),!r||!s)return p.jsx("div",{className:"flex w-full h-full justify-center items-center bg-bolt-elements-background-depth-1 text-bolt-elements-textPrimary",children:"Select a file to view differences"});const o=n[r],a=o&&"content"in o?o.content:"",l=s.value,u=t[r]?.originalContent||a,d=iie(r.split(".").pop()||"");try{return p.jsx("div",{className:"h-full overflow-hidden",children:p.jsx(QYe,{beforeCode:u,afterCode:l,language:d,filename:r,lightTheme:"github-light",darkTheme:"github-dark"})})}catch(h){return console.error("DiffView render error:",h),p.jsx("div",{className:"flex w-full h-full justify-center items-center bg-bolt-elements-background-depth-1 text-red-400",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"i-ph:warning-circle text-4xl mb-2"}),p.jsx("p",{children:"Failed to render diff view"})]})})}});let N4=[],lie=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?lie:N4).push(n=n+t[e])})();function tXe(t){if(t<768)return!1;for(let e=0,n=N4.length;;){let r=e+n>>1;if(t<N4[r])n=r;else if(t>=lie[r])e=r+1;else return!0;if(e==n)return!1}}function R$(t){return t>=127462&&t<=127487}const L$=8205;function nXe(t,e,n=!0,r=!0){return(n?cie:rXe)(t,e,r)}function cie(t,e,n){if(e==t.length)return e;e&&uie(t.charCodeAt(e))&&die(t.charCodeAt(e-1))&&e--;let r=K5(t,e);for(e+=O$(r);e<t.length;){let s=K5(t,e);if(r==L$||s==L$||n&&tXe(s))e+=O$(s),r=s;else if(R$(s)){let i=0,o=e-2;for(;o>=0&&R$(K5(t,o));)i++,o-=2;if(i%2==0)break;e+=2}else break}return e}function rXe(t,e,n){for(;e>0;){let r=cie(t,e-2,n);if(r<e)return r;e--}return 0}function K5(t,e){let n=t.charCodeAt(e);if(!die(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return uie(r)?(n-55296<<10)+(r-56320)+65536:n}function uie(t){return t>=56320&&t<57344}function die(t){return t>=55296&&t<56320}function O$(t){return t<65536?1:2}let Cn=class hie{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,r){[e,n]=bg(this,e,n);let s=[];return this.decompose(0,e,s,2),r.length&&r.decompose(0,r.length,s,3),this.decompose(n,this.length,s,1),Sl.from(s,this.length-(n-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=bg(this,e,n);let r=[];return this.decompose(e,n,r,0),Sl.from(r,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),s=new vy(this),i=new vy(e);for(let o=n,a=n;;){if(s.next(o),i.next(o),o=0,s.lineBreak!=i.lineBreak||s.done!=i.done||s.value!=i.value)return!1;if(a+=s.value.length,s.done||a>=r)return!0}}iter(e=1){return new vy(this,e)}iterRange(e,n=this.length){return new fie(this,e,n)}iterLines(e,n){let r;if(e==null)r=this.iter();else{n==null&&(n=this.lines+1);let s=this.line(e).from;r=this.iterRange(s,Math.max(s,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new pie(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?hie.empty:e.length<=32?new Cr(e):Sl.from(Cr.split(e,[]))}};class Cr extends Cn{constructor(e,n=sXe(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,r,s){for(let i=0;;i++){let o=this.text[i],a=s+o.length;if((n?r:a)>=e)return new iXe(s,a,r,o);s=a+1,r++}}decompose(e,n,r,s){let i=e<=0&&n>=this.length?this:new Cr(D$(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(s&1){let o=r.pop(),a=b2(i.text,o.text.slice(),0,i.length);if(a.length<=32)r.push(new Cr(a,o.length+i.length));else{let l=a.length>>1;r.push(new Cr(a.slice(0,l)),new Cr(a.slice(l)))}}else r.push(i)}replace(e,n,r){if(!(r instanceof Cr))return super.replace(e,n,r);[e,n]=bg(this,e,n);let s=b2(this.text,b2(r.text,D$(this.text,0,e)),n),i=this.length+r.length-(n-e);return s.length<=32?new Cr(s,i):Sl.from(Cr.split(s,[]),i)}sliceString(e,n=this.length,r=`
`){[e,n]=bg(this,e,n);let s="";for(let i=0,o=0;i<=n&&o<this.text.length;o++){let a=this.text[o],l=i+a.length;i>e&&o&&(s+=r),e<l&&n>i&&(s+=a.slice(Math.max(0,e-i),n-i)),i=l+1}return s}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let r=[],s=-1;for(let i of e)r.push(i),s+=i.length+1,r.length==32&&(n.push(new Cr(r,s)),r=[],s=-1);return s>-1&&n.push(new Cr(r,s)),n}}class Sl extends Cn{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,n,r,s){for(let i=0;;i++){let o=this.children[i],a=s+o.length,l=r+o.lines-1;if((n?l:a)>=e)return o.lineInner(e,n,r,s);s=a+1,r=l+1}}decompose(e,n,r,s){for(let i=0,o=0;o<=n&&i<this.children.length;i++){let a=this.children[i],l=o+a.length;if(e<=l&&n>=o){let c=s&((o<=e?1:0)|(l>=n?2:0));o>=e&&l<=n&&!c?r.push(a):a.decompose(e-o,n-o,r,c)}o=l+1}}replace(e,n,r){if([e,n]=bg(this,e,n),r.lines<this.lines)for(let s=0,i=0;s<this.children.length;s++){let o=this.children[s],a=i+o.length;if(e>=i&&n<=a){let l=o.replace(e-i,n-i,r),c=this.lines-o.lines+l.lines;if(l.lines<c>>4&&l.lines>c>>6){let u=this.children.slice();return u[s]=l,new Sl(u,this.length-(n-e)+r.length)}return super.replace(i,a,l)}i=a+1}return super.replace(e,n,r)}sliceString(e,n=this.length,r=`
`){[e,n]=bg(this,e,n);let s="";for(let i=0,o=0;i<this.children.length&&o<=n;i++){let a=this.children[i],l=o+a.length;o>e&&i&&(s+=r),e<l&&n>o&&(s+=a.sliceString(e-o,n-o,r)),o=l+1}return s}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof Sl))return 0;let r=0,[s,i,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;s+=n,i+=n){if(s==o||i==a)return r;let l=this.children[s],c=e.children[i];if(l!=c)return r+l.scanIdentical(c,n);r+=l.length+1}}static from(e,n=e.reduce((r,s)=>r+s.length+1,-1)){let r=0;for(let f of e)r+=f.lines;if(r<32){let f=[];for(let g of e)g.flatten(f);return new Cr(f,n)}let s=Math.max(32,r>>5),i=s<<1,o=s>>1,a=[],l=0,c=-1,u=[];function d(f){let g;if(f.lines>i&&f instanceof Sl)for(let y of f.children)d(y);else f.lines>o&&(l>o||!l)?(h(),a.push(f)):f instanceof Cr&&l&&(g=u[u.length-1])instanceof Cr&&f.lines+g.lines<=32?(l+=f.lines,c+=f.length+1,u[u.length-1]=new Cr(g.text.concat(f.text),g.length+1+f.length)):(l+f.lines>s&&h(),l+=f.lines,c+=f.length+1,u.push(f))}function h(){l!=0&&(a.push(u.length==1?u[0]:Sl.from(u,c)),c=-1,l=u.length=0)}for(let f of e)d(f);return h(),a.length==1?a[0]:new Sl(a,n)}}Cn.empty=new Cr([""],0);function sXe(t){let e=-1;for(let n of t)e+=n.length+1;return e}function b2(t,e,n=0,r=1e9){for(let s=0,i=0,o=!0;i<t.length&&s<=r;i++){let a=t[i],l=s+a.length;l>=n&&(l>r&&(a=a.slice(0,r-s)),s<n&&(a=a.slice(n-s)),o?(e[e.length-1]+=a,o=!1):e.push(a)),s=l+1}return e}function D$(t,e,n){return b2(t,[""],e,n)}class vy{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof Cr?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,s=this.nodes[r],i=this.offsets[r],o=i>>1,a=s instanceof Cr?s.text.length:s.children.length;if(o==(n>0?a:0)){if(r==0)return this.done=!0,this.value="",this;n>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((i&1)==(n>0?0:1)){if(this.offsets[r]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(s instanceof Cr){let l=s.text[o+(n<0?-1:0)];if(this.offsets[r]+=n,l.length>Math.max(0,e))return this.value=e==0?l:n>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=s.children[o+(n<0?-1:0)];e>l.length?(e-=l.length,this.offsets[r]+=n):(n<0&&this.offsets[r]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof Cr?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class fie{constructor(e,n,r){this.value="",this.done=!1,this.cursor=new vy(e,n>r?-1:1),this.pos=n>r?e.length:0,this.from=Math.min(n,r),this.to=Math.max(n,r)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let r=n<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:s}=this.cursor.next(e);return this.pos+=(s.length+e)*n,this.value=s.length<=r?s:n<0?s.slice(s.length-r):s.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class pie{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:r,value:s}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=s,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Cn.prototype[Symbol.iterator]=function(){return this.iter()},vy.prototype[Symbol.iterator]=fie.prototype[Symbol.iterator]=pie.prototype[Symbol.iterator]=function(){return this});class iXe{constructor(e,n,r,s){this.from=e,this.to=n,this.number=r,this.text=s}get length(){return this.to-this.from}}function bg(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function _s(t,e,n=!0,r=!0){return nXe(t,e,n,r)}function oXe(t){return t>=56320&&t<57344}function aXe(t){return t>=55296&&t<56320}function ga(t,e){let n=t.charCodeAt(e);if(!aXe(n)||e+1==t.length)return n;let r=t.charCodeAt(e+1);return oXe(r)?(n-55296<<10)+(r-56320)+65536:n}function $6(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function Dc(t){return t<65536?1:2}const P4=/\r\n?|\n/;var Bs=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(Bs||(Bs={}));class Hl{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n+1];e+=r<0?this.sections[n]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,r=0,s=0;n<this.sections.length;){let i=this.sections[n++],o=this.sections[n++];o<0?(e(r,s,i),s+=i):s+=o,r+=i}}iterChangedRanges(e,n=!1){I4(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let r=this.sections[n++],s=this.sections[n++];s<0?e.push(r,s):e.push(s,r)}return new Hl(e)}composeDesc(e){return this.empty?e:e.empty?this:mie(this,e)}mapDesc(e,n=!1){return e.empty?this:R4(this,e,n)}mapPos(e,n=-1,r=Bs.Simple){let s=0,i=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],c=s+a;if(l<0){if(c>e)return i+(e-s);i+=a}else{if(r!=Bs.Simple&&c>=e&&(r==Bs.TrackDel&&s<e&&c>e||r==Bs.TrackBefore&&s<e||r==Bs.TrackAfter&&c>e))return null;if(c>e||c==e&&n<0&&!a)return e==s||n<0?i:i+l;i+=l}s=c}if(e>s)throw new RangeError(`Position ${e} is out of range for changeset of length ${s}`);return i}touchesRange(e,n=e){for(let r=0,s=0;r<this.sections.length&&s<=n;){let i=this.sections[r++],o=this.sections[r++],a=s+i;if(o>=0&&s<=n&&a>=e)return s<e&&a>n?"cover":!0;s=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let r=this.sections[n++],s=this.sections[n++];e+=(e?" ":"")+r+(s>=0?":"+s:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Hl(e)}static create(e){return new Hl(e)}}class zr extends Hl{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return I4(this,(n,r,s,i,o)=>e=e.replace(s,s+(r-n),o),!1),e}mapDesc(e,n=!1){return R4(this,e,n,!0)}invert(e){let n=this.sections.slice(),r=[];for(let s=0,i=0;s<n.length;s+=2){let o=n[s],a=n[s+1];if(a>=0){n[s]=a,n[s+1]=o;let l=s>>1;for(;r.length<l;)r.push(Cn.empty);r.push(o?e.slice(i,i+o):Cn.empty)}i+=o}return new zr(n,r)}compose(e){return this.empty?e:e.empty?this:mie(this,e,!0)}map(e,n=!1){return e.empty?this:R4(this,e,n,!0)}iterChanges(e,n=!1){I4(this,e,n)}get desc(){return Hl.create(this.sections)}filter(e){let n=[],r=[],s=[],i=new A1(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&i.len==0;){if(i.done)break e;let u=Math.min(i.len,l-a);Ms(s,u,-1);let d=i.ins==-1?-1:i.off==0?i.ins:0;Ms(n,u,d),d>0&&td(r,n,i.text),i.forward(u),a+=u}let c=e[o++];for(;a<c;){if(i.done)break e;let u=Math.min(i.len,c-a);Ms(n,u,-1),Ms(s,u,i.ins==-1?-1:i.off==0?i.ins:0),i.forward(u),a+=u}}return{changes:new zr(n,r),filtered:Hl.create(s)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let r=this.sections[n],s=this.sections[n+1];s<0?e.push(r):s==0?e.push([r]):e.push([r].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,r){let s=[],i=[],o=0,a=null;function l(u=!1){if(!u&&!s.length)return;o<n&&Ms(s,n-o,-1);let d=new zr(s,i);a=a?a.compose(d.map(a)):d,s=[],i=[],o=0}function c(u){if(Array.isArray(u))for(let d of u)c(d);else if(u instanceof zr){if(u.length!=n)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${n})`);l(),a=a?a.compose(u.map(a)):u}else{let{from:d,to:h=d,insert:f}=u;if(d>h||d<0||h>n)throw new RangeError(`Invalid change range ${d} to ${h} (in doc of length ${n})`);let g=f?typeof f=="string"?Cn.of(f.split(r||P4)):f:Cn.empty,y=g.length;if(d==h&&y==0)return;d<o&&l(),d>o&&Ms(s,d-o,-1),Ms(s,h-d,y),td(i,s,g),o=h}}return c(e),l(!a),a}static empty(e){return new zr(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],r=[];for(let s=0;s<e.length;s++){let i=e[s];if(typeof i=="number")n.push(i,-1);else{if(!Array.isArray(i)||typeof i[0]!="number"||i.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(i.length==1)n.push(i[0],0);else{for(;r.length<s;)r.push(Cn.empty);r[s]=Cn.of(i.slice(1)),n.push(i[0],r[s].length)}}}return new zr(n,r)}static createSet(e,n){return new zr(e,n)}}function Ms(t,e,n,r=!1){if(e==0&&n<=0)return;let s=t.length-2;s>=0&&n<=0&&n==t[s+1]?t[s]+=e:s>=0&&e==0&&t[s]==0?t[s+1]+=n:r?(t[s]+=e,t[s+1]+=n):t.push(e,n)}function td(t,e,n){if(n.length==0)return;let r=e.length-2>>1;if(r<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<r;)t.push(Cn.empty);t.push(n)}}function I4(t,e,n){let r=t.inserted;for(let s=0,i=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)s+=a,i+=a;else{let c=s,u=i,d=Cn.empty;for(;c+=a,u+=l,l&&r&&(d=d.append(r[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(s,c,i,u,d),s=c,i=u}}}function R4(t,e,n,r=!1){let s=[],i=r?[]:null,o=new A1(t),a=new A1(e);for(let l=-1;;){if(o.done&&a.len||a.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&a.ins==-1){let c=Math.min(o.len,a.len);Ms(s,c,-1),o.forward(c),a.forward(c)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!n))){let c=a.len;for(Ms(s,a.ins,-1);c;){let u=Math.min(o.len,c);o.ins>=0&&l<o.i&&o.len<=u&&(Ms(s,0,o.ins),i&&td(i,s,o.text),l=o.i),o.forward(u),c-=u}a.next()}else if(o.ins>=0){let c=0,u=o.len;for(;u;)if(a.ins==-1){let d=Math.min(u,a.len);c+=d,u-=d,a.forward(d)}else if(a.ins==0&&a.len<u)u-=a.len,a.next();else break;Ms(s,c,l<o.i?o.ins:0),i&&l<o.i&&td(i,s,o.text),l=o.i,o.forward(o.len-u)}else{if(o.done&&a.done)return i?zr.createSet(s,i):Hl.create(s);throw new Error("Mismatched change set lengths")}}}function mie(t,e,n=!1){let r=[],s=n?[]:null,i=new A1(t),o=new A1(e);for(let a=!1;;){if(i.done&&o.done)return s?zr.createSet(r,s):Hl.create(r);if(i.ins==0)Ms(r,i.len,0,a),i.next();else if(o.len==0&&!o.done)Ms(r,0,o.ins,a),s&&td(s,r,o.text),o.next();else{if(i.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(i.len2,o.len),c=r.length;if(i.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;Ms(r,l,u,a),s&&u&&td(s,r,o.text)}else o.ins==-1?(Ms(r,i.off?0:i.len,l,a),s&&td(s,r,i.textBit(l))):(Ms(r,i.off?0:i.len,o.off?0:o.ins,a),s&&!o.off&&td(s,r,o.text));a=(i.ins>l||o.ins>=0&&o.len>l)&&(a||r.length>c),i.forward2(l),o.forward(l)}}}}class A1{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?Cn.empty:e[n]}textBit(e){let{inserted:n}=this.set,r=this.i-2>>1;return r>=n.length&&!e?Cn.empty:n[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Fh{constructor(e,n,r){this.from=e,this.to=n,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let r,s;return this.empty?r=s=e.mapPos(this.from,n):(r=e.mapPos(this.from,1),s=e.mapPos(this.to,-1)),r==this.from&&s==this.to?this:new Fh(r,s,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return st.range(e,n);let r=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return st.range(this.anchor,r)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return st.range(e.anchor,e.head)}static create(e,n,r){return new Fh(e,n,r)}}class st{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:st.create(this.ranges.map(r=>r.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new st([this.main],0)}addRange(e,n=!0){return st.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let r=this.ranges.slice();return r[n]=e,st.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new st(e.ranges.map(n=>Fh.fromJSON(n)),e.main)}static single(e,n=e){return new st([st.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,s=0;s<e.length;s++){let i=e[s];if(i.empty?i.from<=r:i.from<r)return st.normalized(e.slice(),n);r=i.to}return new st(e,n)}static cursor(e,n=0,r,s){return Fh.create(e,e,(n==0?0:n<0?8:16)|(r==null?7:Math.min(6,r))|(s??16777215)<<6)}static range(e,n,r,s){let i=(r??16777215)<<6|(s==null?7:Math.min(6,s));return n<e?Fh.create(n,e,48|i):Fh.create(e,n,(n>e?8:0)|i)}static normalized(e,n=0){let r=e[n];e.sort((s,i)=>s.from-i.from),n=e.indexOf(r);for(let s=1;s<e.length;s++){let i=e[s],o=e[s-1];if(i.empty?i.from<=o.to:i.from<o.to){let a=o.from,l=Math.max(i.to,o.to);s<=n&&n--,e.splice(--s,2,i.anchor>i.head?st.range(l,a):st.range(a,l))}}return new st(e,n)}}function gie(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let H6=0;class Ct{constructor(e,n,r,s,i){this.combine=e,this.compareInput=n,this.compare=r,this.isStatic=s,this.id=H6++,this.default=e([]),this.extensions=typeof i=="function"?i(this):i}get reader(){return this}static define(e={}){return new Ct(e.combine||(n=>n),e.compareInput||((n,r)=>n===r),e.compare||(e.combine?(n,r)=>n===r:z6),!!e.static,e.enables)}of(e){return new y2([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new y2(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new y2(e,this,2,n)}from(e,n){return n||(n=r=>r),this.compute([e],r=>n(r.field(e)))}}function z6(t,e){return t==e||t.length==e.length&&t.every((n,r)=>n===e[r])}class y2{constructor(e,n,r,s){this.dependencies=e,this.facet=n,this.type=r,this.value=s,this.id=H6++}dynamicSlot(e){var n;let r=this.value,s=this.facet.compareInput,i=this.id,o=e[i]>>1,a=this.type==2,l=!1,c=!1,u=[];for(let d of this.dependencies)d=="doc"?l=!0:d=="selection"?c=!0:((n=e[d.id])!==null&&n!==void 0?n:1)&1||u.push(e[d.id]);return{create(d){return d.values[o]=r(d),1},update(d,h){if(l&&h.docChanged||c&&(h.docChanged||h.selection)||L4(d,u)){let f=r(d);if(a?!M$(f,d.values[o],s):!s(f,d.values[o]))return d.values[o]=f,1}return 0},reconfigure:(d,h)=>{let f,g=h.config.address[i];if(g!=null){let y=xS(h,g);if(this.dependencies.every(m=>m instanceof Ct?h.facet(m)===d.facet(m):m instanceof cs?h.field(m,!1)==d.field(m,!1):!0)||(a?M$(f=r(d),y,s):s(f=r(d),y)))return d.values[o]=y,0}else f=r(d);return d.values[o]=f,1}}}}function M$(t,e,n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function L4(t,e){let n=!1;for(let r of e)_y(t,r)&1&&(n=!0);return n}function lXe(t,e,n){let r=n.map(l=>t[l.id]),s=n.map(l=>l.type),i=r.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let c=[];for(let u=0;u<r.length;u++){let d=xS(l,r[u]);if(s[u]==2)for(let h of d)c.push(h);else c.push(d)}return e.combine(c)}return{create(l){for(let c of r)_y(l,c);return l.values[o]=a(l),1},update(l,c){if(!L4(l,i))return 0;let u=a(l);return e.compare(u,l.values[o])?0:(l.values[o]=u,1)},reconfigure(l,c){let u=L4(l,r),d=c.config.facets[e.id],h=c.facet(e);if(d&&!u&&z6(n,d))return l.values[o]=h,0;let f=a(l);return e.compare(f,h)?(l.values[o]=h,0):(l.values[o]=f,1)}}}const dw=Ct.define({static:!0});class cs{constructor(e,n,r,s,i){this.id=e,this.createF=n,this.updateF=r,this.compareF=s,this.spec=i,this.provides=void 0}static define(e){let n=new cs(H6++,e.create,e.update,e.compare||((r,s)=>r===s),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(dw).find(r=>r.field==this);return(n?.create||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:r=>(r.values[n]=this.create(r),1),update:(r,s)=>{let i=r.values[n],o=this.updateF(i,s);return this.compareF(i,o)?0:(r.values[n]=o,1)},reconfigure:(r,s)=>{let i=r.facet(dw),o=s.facet(dw),a;return(a=i.find(l=>l.field==this))&&a!=o.find(l=>l.field==this)?(r.values[n]=a.create(r),1):s.config.address[this.id]!=null?(r.values[n]=s.field(this),0):(r.values[n]=this.create(r),1)}}}init(e){return[this,dw.of({field:this,create:e})]}get extension(){return this}}const Sh={lowest:4,low:3,default:2,high:1,highest:0};function tb(t){return e=>new bie(e,t)}const Bd={highest:tb(Sh.highest),high:tb(Sh.high),default:tb(Sh.default),low:tb(Sh.low),lowest:tb(Sh.lowest)};class bie{constructor(e,n){this.inner=e,this.prec=n}}class Kg{of(e){return new O4(this,e)}reconfigure(e){return Kg.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class O4{constructor(e,n){this.compartment=e,this.inner=n}}class _S{constructor(e,n,r,s,i,o){for(this.base=e,this.compartments=n,this.dynamicSlots=r,this.address=s,this.staticValues=i,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,r){let s=[],i=Object.create(null),o=new Map;for(let h of cXe(e,n,o))h instanceof cs?s.push(h):(i[h.facet.id]||(i[h.facet.id]=[])).push(h);let a=Object.create(null),l=[],c=[];for(let h of s)a[h.id]=c.length<<1,c.push(f=>h.slot(f));let u=r?.config.facets;for(let h in i){let f=i[h],g=f[0].facet,y=u&&u[h]||[];if(f.every(m=>m.type==0))if(a[g.id]=l.length<<1|1,z6(y,f))l.push(r.facet(g));else{let m=g.combine(f.map(b=>b.value));l.push(r&&g.compare(m,r.facet(g))?r.facet(g):m)}else{for(let m of f)m.type==0?(a[m.id]=l.length<<1|1,l.push(m.value)):(a[m.id]=c.length<<1,c.push(b=>m.dynamicSlot(b)));a[g.id]=c.length<<1,c.push(m=>lXe(m,g,f))}}let d=c.map(h=>h(a));return new _S(e,o,d,a,l,i)}}function cXe(t,e,n){let r=[[],[],[],[],[]],s=new Map;function i(o,a){let l=s.get(o);if(l!=null){if(l<=a)return;let c=r[l].indexOf(o);c>-1&&r[l].splice(c,1),o instanceof O4&&n.delete(o.compartment)}if(s.set(o,a),Array.isArray(o))for(let c of o)i(c,a);else if(o instanceof O4){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;n.set(o.compartment,c),i(c,a)}else if(o instanceof bie)i(o.inner,o.prec);else if(o instanceof cs)r[a].push(o),o.provides&&i(o.provides,a);else if(o instanceof y2)r[a].push(o),o.facet.extensions&&i(o.facet.extensions,Sh.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);i(c,a)}}return i(t,Sh.default),r.reduce((o,a)=>o.concat(a))}function _y(t,e){if(e&1)return 2;let n=e>>1,r=t.status[n];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;t.status[n]=4;let s=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|s}function xS(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const yie=Ct.define(),D4=Ct.define({combine:t=>t.some(e=>e),static:!0}),vie=Ct.define({combine:t=>t.length?t[0]:void 0,static:!0}),_ie=Ct.define(),xie=Ct.define(),wie=Ct.define(),Eie=Ct.define({combine:t=>t.length?t[0]:!1});class lu{constructor(e,n){this.type=e,this.value=n}static define(){return new uXe}}class uXe{of(e){return new lu(this,e)}}class dXe{constructor(e){this.map=e}of(e){return new nn(this,e)}}class nn{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new nn(this.type,n)}is(e){return this.type==e}static define(e={}){return new dXe(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let r=[];for(let s of e){let i=s.map(n);i&&r.push(i)}return r}}nn.reconfigure=nn.define();nn.appendConfig=nn.define();class Fr{constructor(e,n,r,s,i,o){this.startState=e,this.changes=n,this.selection=r,this.effects=s,this.annotations=i,this.scrollIntoView=o,this._doc=null,this._state=null,r&&gie(r,n.newLength),i.some(a=>a.type==Fr.time)||(this.annotations=i.concat(Fr.time.of(Date.now())))}static create(e,n,r,s,i,o){return new Fr(e,n,r,s,i,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(Fr.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}Fr.time=lu.define();Fr.userEvent=lu.define();Fr.addToHistory=lu.define();Fr.remote=lu.define();function hXe(t,e){let n=[];for(let r=0,s=0;;){let i,o;if(r<t.length&&(s==e.length||e[s]>=t[r]))i=t[r++],o=t[r++];else if(s<e.length)i=e[s++],o=e[s++];else return n;!n.length||n[n.length-1]<i?n.push(i,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function Sie(t,e,n){var r;let s,i,o;return n?(s=e.changes,i=zr.empty(e.changes.length),o=t.changes.compose(e.changes)):(s=e.changes.map(t.changes),i=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(s)),{changes:o,selection:e.selection?e.selection.map(i):(r=t.selection)===null||r===void 0?void 0:r.map(s),effects:nn.mapEffects(t.effects,s).concat(nn.mapEffects(e.effects,i)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function M4(t,e,n){let r=e.selection,s=Im(e.annotations);return e.userEvent&&(s=s.concat(Fr.userEvent.of(e.userEvent))),{changes:e.changes instanceof zr?e.changes:zr.of(e.changes||[],n,t.facet(vie)),selection:r&&(r instanceof st?r:st.single(r.anchor,r.head)),effects:Im(e.effects),annotations:s,scrollIntoView:!!e.scrollIntoView}}function kie(t,e,n){let r=M4(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let i=1;i<e.length;i++){e[i].filter===!1&&(n=!1);let o=!!e[i].sequential;r=Sie(r,M4(t,e[i],o?r.changes.newLength:t.doc.length),o)}let s=Fr.create(t,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return pXe(n?fXe(s):s)}function fXe(t){let e=t.startState,n=!0;for(let s of e.facet(_ie)){let i=s(t);if(i===!1){n=!1;break}Array.isArray(i)&&(n=n===!0?i:hXe(n,i))}if(n!==!0){let s,i;if(n===!1)i=t.changes.invertedDesc,s=zr.empty(e.doc.length);else{let o=t.changes.filter(n);s=o.changes,i=o.filtered.mapDesc(o.changes).invertedDesc}t=Fr.create(e,s,t.selection&&t.selection.map(i),nn.mapEffects(t.effects,i),t.annotations,t.scrollIntoView)}let r=e.facet(xie);for(let s=r.length-1;s>=0;s--){let i=r[s](t);i instanceof Fr?t=i:Array.isArray(i)&&i.length==1&&i[0]instanceof Fr?t=i[0]:t=kie(e,Im(i),!1)}return t}function pXe(t){let e=t.startState,n=e.facet(wie),r=t;for(let s=n.length-1;s>=0;s--){let i=n[s](t);i&&Object.keys(i).length&&(r=Sie(r,M4(e,i,t.changes.newLength),!0))}return r==t?t:Fr.create(e,t.changes,t.selection,r.effects,r.annotations,r.scrollIntoView)}const mXe=[];function Im(t){return t==null?mXe:Array.isArray(t)?t:[t]}var Br=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(Br||(Br={}));const gXe=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let j4;try{j4=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function bXe(t){if(j4)return j4.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||gXe.test(n)))return!0}return!1}function yXe(t){return e=>{if(!/\S/.test(e))return Br.Space;if(bXe(e))return Br.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return Br.Word;return Br.Other}}class gn{constructor(e,n,r,s,i,o){this.config=e,this.doc=n,this.selection=r,this.values=s,this.status=e.statusTemplate.slice(),this.computeSlot=i,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)_y(this,a<<1);this.computeSlot=null}field(e,n=!0){let r=this.config.address[e.id];if(r==null){if(n)throw new RangeError("Field is not present in this state");return}return _y(this,r),xS(this,r)}update(...e){return kie(this,e,!0)}applyTransaction(e){let n=this.config,{base:r,compartments:s}=n;for(let a of e.effects)a.is(Kg.reconfigure)?(n&&(s=new Map,n.compartments.forEach((l,c)=>s.set(c,l)),n=null),s.set(a.value.compartment,a.value.extension)):a.is(nn.reconfigure)?(n=null,r=a.value):a.is(nn.appendConfig)&&(n=null,r=Im(r).concat(a.value));let i;n?i=e.startState.values.slice():(n=_S.resolve(r,s,this),i=new gn(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(l,c)=>c.reconfigure(l,this),null).values);let o=e.startState.facet(D4)?e.newSelection:e.newSelection.asSingle();new gn(n,e.newDoc,o,i,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:st.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,r=e(n.ranges[0]),s=this.changes(r.changes),i=[r.range],o=Im(r.effects);for(let a=1;a<n.ranges.length;a++){let l=e(n.ranges[a]),c=this.changes(l.changes),u=c.map(s);for(let h=0;h<a;h++)i[h]=i[h].map(u);let d=s.mapDesc(c,!0);i.push(l.range.map(d)),s=s.compose(u),o=nn.mapEffects(o,u).concat(nn.mapEffects(Im(l.effects),d))}return{changes:s,selection:st.create(i,n.mainIndex),effects:o}}changes(e=[]){return e instanceof zr?e:zr.of(e,this.doc.length,this.facet(gn.lineSeparator))}toText(e){return Cn.of(e.split(this.facet(gn.lineSeparator)||P4))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(_y(this,n),xS(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let s=e[r];s instanceof cs&&this.config.address[s.id]!=null&&(n[r]=s.spec.toJSON(this.field(e[r]),this))}return n}static fromJSON(e,n={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let s=[];if(r){for(let i in r)if(Object.prototype.hasOwnProperty.call(e,i)){let o=r[i],a=e[i];s.push(o.init(l=>o.spec.fromJSON(a,l)))}}return gn.create({doc:e.doc,selection:st.fromJSON(e.selection),extensions:n.extensions?s.concat([n.extensions]):s})}static create(e={}){let n=_S.resolve(e.extensions||[],new Map),r=e.doc instanceof Cn?e.doc:Cn.of((e.doc||"").split(n.staticFacet(gn.lineSeparator)||P4)),s=e.selection?e.selection instanceof st?e.selection:st.single(e.selection.anchor,e.selection.head):st.single(0);return gie(s,r.length),n.staticFacet(D4)||(s=s.asSingle()),new gn(n,r,s,n.dynamicSlots.map(()=>null),(i,o)=>o.create(i),null)}get tabSize(){return this.facet(gn.tabSize)}get lineBreak(){return this.facet(gn.lineSeparator)||`
`}get readOnly(){return this.facet(Eie)}phrase(e,...n){for(let r of this.facet(gn.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(r,s)=>{if(s=="$")return"$";let i=+(s||1);return!i||i>n.length?r:n[i-1]})),e}languageDataAt(e,n,r=-1){let s=[];for(let i of this.facet(yie))for(let o of i(this,n,r))Object.prototype.hasOwnProperty.call(o,e)&&s.push(o[e]);return s}charCategorizer(e){return yXe(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:r,length:s}=this.doc.lineAt(e),i=this.charCategorizer(e),o=e-r,a=e-r;for(;o>0;){let l=_s(n,o,!1);if(i(n.slice(l,o))!=Br.Word)break;o=l}for(;a<s;){let l=_s(n,a);if(i(n.slice(a,l))!=Br.Word)break;a=l}return o==a?null:st.range(o+r,a+r)}}gn.allowMultipleSelections=D4;gn.tabSize=Ct.define({combine:t=>t.length?t[0]:4});gn.lineSeparator=vie;gn.readOnly=Eie;gn.phrases=Ct.define({compare(t,e){let n=Object.keys(t),r=Object.keys(e);return n.length==r.length&&n.every(s=>t[s]==e[s])}});gn.languageData=yie;gn.changeFilter=_ie;gn.transactionFilter=xie;gn.transactionExtender=wie;Kg.reconfigure=nn.define();function Yf(t,e,n={}){let r={};for(let s of t)for(let i of Object.keys(s)){let o=s[i],a=r[i];if(a===void 0)r[i]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(n,i))r[i]=n[i](a,o);else throw new Error("Config merge conflict for field "+i)}for(let s in e)r[s]===void 0&&(r[s]=e[s]);return r}class kf{eq(e){return this==e}range(e,n=e){return F4.create(e,n,this)}}kf.prototype.startSide=kf.prototype.endSide=0;kf.prototype.point=!1;kf.prototype.mapMode=Bs.TrackDel;let F4=class Cie{constructor(e,n,r){this.from=e,this.to=n,this.value=r}static create(e,n,r){return new Cie(e,n,r)}};function B4(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class V6{constructor(e,n,r,s){this.from=e,this.to=n,this.value=r,this.maxPoint=s}get length(){return this.to[this.to.length-1]}findIndex(e,n,r,s=0){let i=r?this.to:this.from;for(let o=s,a=i.length;;){if(o==a)return o;let l=o+a>>1,c=i[l]-e||(r?this.value[l].endSide:this.value[l].startSide)-n;if(l==o)return c>=0?o:a;c>=0?a=l:o=l+1}}between(e,n,r,s){for(let i=this.findIndex(n,-1e9,!0),o=this.findIndex(r,1e9,!1,i);i<o;i++)if(s(this.from[i]+e,this.to[i]+e,this.value[i])===!1)return!1}map(e,n){let r=[],s=[],i=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],u=this.from[l]+e,d=this.to[l]+e,h,f;if(u==d){let g=n.mapPos(u,c.startSide,c.mapMode);if(g==null||(h=f=g,c.startSide!=c.endSide&&(f=n.mapPos(u,c.endSide),f<h)))continue}else if(h=n.mapPos(u,c.startSide),f=n.mapPos(d,c.endSide),h>f||h==f&&c.startSide>0&&c.endSide<=0)continue;(f-h||c.endSide-c.startSide)<0||(o<0&&(o=h),c.point&&(a=Math.max(a,f-h)),r.push(c),s.push(h-o),i.push(f-o))}return{mapped:r.length?new V6(s,i,r,a):null,pos:o}}}class Sn{constructor(e,n,r,s){this.chunkPos=e,this.chunk=n,this.nextLayer=r,this.maxPoint=s}static create(e,n,r,s){return new Sn(e,n,r,s)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:r=!1,filterFrom:s=0,filterTo:i=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(r&&(n=n.slice().sort(B4)),this.isEmpty)return n.length?Sn.of(n):this;let a=new Aie(this,null,-1).goto(0),l=0,c=[],u=new Cf;for(;a.value||l<n.length;)if(l<n.length&&(a.from-n[l].from||a.startSide-n[l].value.startSide)>=0){let d=n[l++];u.addInner(d.from,d.to,d.value)||c.push(d)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(a.chunkIndex)<n[l].from)&&(!o||s>this.chunkEnd(a.chunkIndex)||i<this.chunkPos[a.chunkIndex])&&u.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||s>a.to||i<a.from||o(a.from,a.to,a.value))&&(u.addInner(a.from,a.to,a.value)||c.push(F4.create(a.from,a.to,a.value))),a.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?Sn.empty:this.nextLayer.update({add:c,filter:o,filterFrom:s,filterTo:i}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],r=[],s=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],c=e.touchesRange(a,a+l.length);if(c===!1)s=Math.max(s,l.maxPoint),n.push(l),r.push(e.mapPos(a));else if(c===!0){let{mapped:u,pos:d}=l.map(a,e);u&&(s=Math.max(s,u.maxPoint),n.push(u),r.push(d))}}let i=this.nextLayer.map(e);return n.length==0?i:new Sn(r,n,i||Sn.empty,s)}between(e,n,r){if(!this.isEmpty){for(let s=0;s<this.chunk.length;s++){let i=this.chunkPos[s],o=this.chunk[s];if(n>=i&&e<=i+o.length&&o.between(i,e-i,n-i,r)===!1)return}this.nextLayer.between(e,n,r)}}iter(e=0){return T1.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return T1.from(e).goto(n)}static compare(e,n,r,s,i=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=i),a=n.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=i),l=j$(o,a,r),c=new nb(o,l,i),u=new nb(a,l,i);r.iterGaps((d,h,f)=>F$(c,d,u,h,f,s)),r.empty&&r.length==0&&F$(c,0,u,0,0,s)}static eq(e,n,r=0,s){s==null&&(s=999999999);let i=e.filter(u=>!u.isEmpty&&n.indexOf(u)<0),o=n.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(i.length!=o.length)return!1;if(!i.length)return!0;let a=j$(i,o),l=new nb(i,a,0).goto(r),c=new nb(o,a,0).goto(r);for(;;){if(l.to!=c.to||!U4(l.active,c.active)||l.point&&(!c.point||!l.point.eq(c.point)))return!1;if(l.to>s)return!0;l.next(),c.next()}}static spans(e,n,r,s,i=-1){let o=new nb(e,null,i).goto(n),a=n,l=o.openStart;for(;;){let c=Math.min(o.to,r);if(o.point){let u=o.activeForPoint(o.to),d=o.pointFrom<n?u.length+1:o.point.startSide<0?u.length:Math.min(u.length,l);s.point(a,c,o.point,u,d,o.pointRank),l=Math.min(o.openEnd(c),u.length)}else c>a&&(s.span(a,c,o.active,l),l=o.openEnd(c));if(o.to>r)return l+(o.point&&o.to>r?1:0);a=o.to,o.next()}}static of(e,n=!1){let r=new Cf;for(let s of e instanceof F4?[e]:n?vXe(e):e)r.add(s.from,s.to,s.value);return r.finish()}static join(e){if(!e.length)return Sn.empty;let n=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let s=e[r];s!=Sn.empty;s=s.nextLayer)n=new Sn(s.chunkPos,s.chunk,n,Math.max(s.maxPoint,n.maxPoint));return n}}Sn.empty=new Sn([],[],null,-1);function vXe(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let r=t[n];if(B4(e,r)>0)return t.slice().sort(B4);e=r}return t}Sn.empty.nextLayer=Sn.empty;class Cf{finishChunk(e){this.chunks.push(new V6(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,r){this.addInner(e,n,r)||(this.nextLayer||(this.nextLayer=new Cf)).add(e,n,r)}addInner(e,n,r){let s=e-this.lastTo||r.startSide-this.last.endSide;if(s<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return s<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=n,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let r=n.value.length-1;return this.last=n.value[r],this.lastFrom=n.from[r]+e,this.lastTo=n.to[r]+e,!0}finish(){return this.finishInner(Sn.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=Sn.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function j$(t,e,n){let r=new Map;for(let i of t)for(let o=0;o<i.chunk.length;o++)i.chunk[o].maxPoint<=0&&r.set(i.chunk[o],i.chunkPos[o]);let s=new Set;for(let i of e)for(let o=0;o<i.chunk.length;o++){let a=r.get(i.chunk[o]);a!=null&&(n?n.mapPos(a):a)==i.chunkPos[o]&&!n?.touchesRange(a,a+i.chunk[o].length)&&s.add(i.chunk[o])}return s}class Aie{constructor(e,n,r,s=0){this.layer=e,this.skip=n,this.minPoint=r,this.rank=s}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,r){for(;this.chunkIndex<this.layer.chunk.length;){let s=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(s)||this.layer.chunkEnd(this.chunkIndex)<e||s.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let s=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!r||this.rangeIndex<s)&&this.setRangeIndex(s)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],r=e+n.from[this.rangeIndex];if(this.from=r,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class T1{constructor(e){this.heap=e}static from(e,n=null,r=-1){let s=[];for(let i=0;i<e.length;i++)for(let o=e[i];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&s.push(new Aie(o,n,r,i));return s.length==1?s[0]:new T1(s)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let r of this.heap)r.goto(e,n);for(let r=this.heap.length>>1;r>=0;r--)Y5(this.heap,r);return this.next(),this}forward(e,n){for(let r of this.heap)r.forward(e,n);for(let r=this.heap.length>>1;r>=0;r--)Y5(this.heap,r);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Y5(this.heap,0)}}}function Y5(t,e){for(let n=t[e];;){let r=(e<<1)+1;if(r>=t.length)break;let s=t[r];if(r+1<t.length&&s.compare(t[r+1])>=0&&(s=t[r+1],r++),n.compare(s)<0)break;t[r]=n,t[e]=s,e=r}}class nb{constructor(e,n,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=T1.from(e,n,r)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){hw(this.active,e),hw(this.activeTo,e),hw(this.activeRank,e),this.minActive=B$(this.active,this.activeTo)}addActive(e){let n=0,{value:r,to:s,rank:i}=this.cursor;for(;n<this.activeRank.length&&(i-this.activeRank[n]||s-this.activeTo[n])>0;)n++;fw(this.active,n,r),fw(this.activeTo,n,s),fw(this.activeRank,n,i),e&&fw(e,n,this.cursor.from),this.minActive=B$(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),r&&hw(r,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let i=this.cursor.value;if(!i.point)this.addActive(r),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=i,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=i.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let s=r.length-1;s>=0&&r[s]<e;s--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&n.push(this.active[r]);return n.reverse()}openEnd(e){let n=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)n++;return n}}function F$(t,e,n,r,s,i){t.goto(e),n.goto(r);let o=r+s,a=r,l=r-e;for(;;){let c=t.to+l-n.to,u=c||t.endSide-n.endSide,d=u<0?t.to+l:n.to,h=Math.min(d,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&U4(t.activeForPoint(t.to),n.activeForPoint(n.to))||i.comparePoint(a,h,t.point,n.point):h>a&&!U4(t.active,n.active)&&i.compareRange(a,h,t.active,n.active),d>o)break;(c||t.openEnd!=n.openEnd)&&i.boundChange&&i.boundChange(d),a=d,u<=0&&t.next(),u>=0&&n.next()}}function U4(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function hw(t,e){for(let n=e,r=t.length-1;n<r;n++)t[n]=t[n+1];t.pop()}function fw(t,e,n){for(let r=t.length-1;r>=e;r--)t[r+1]=t[r];t[e]=n}function B$(t,e){let n=-1,r=1e9;for(let s=0;s<e.length;s++)(e[s]-r||t[s].endSide-t[n].endSide)<0&&(n=s,r=e[s]);return n}function kC(t,e,n=t.length){let r=0;for(let s=0;s<n&&s<t.length;)t.charCodeAt(s)==9?(r+=e-r%e,s++):(r++,s=_s(t,s));return r}function _Xe(t,e,n,r){for(let s=0,i=0;;){if(i>=e)return s;if(s==t.length)break;i+=t.charCodeAt(s)==9?n-i%n:1,s=_s(t,s)}return t.length}const $4="",U$=typeof Symbol>"u"?"__"+$4:Symbol.for($4),H4=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),$$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Cd{constructor(e,n){this.rules=[];let{finish:r}=n||{};function s(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function i(o,a,l,c){let u=[],d=/^@(\w+)\b/.exec(o[0]),h=d&&d[1]=="keyframes";if(d&&a==null)return l.push(o[0]+";");for(let f in a){let g=a[f];if(/&/.test(f))i(f.split(/,\s*/).map(y=>o.map(m=>y.replace(/&/,m))).reduce((y,m)=>y.concat(m)),g,l);else if(g&&typeof g=="object"){if(!d)throw new RangeError("The value of a property ("+f+") should be a primitive value.");i(s(f),g,u,h)}else g!=null&&u.push(f.replace(/_.*/,"").replace(/[A-Z]/g,y=>"-"+y.toLowerCase())+": "+g+";")}(u.length||h)&&l.push((r&&!d&&!c?o.map(r):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)i(s(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=$$[U$]||1;return $$[U$]=e+1,$4+e.toString(36)}static mount(e,n,r){let s=e[H4],i=r&&r.nonce;s?i&&s.setNonce(i):s=new xXe(e,i),s.mount(Array.isArray(n)?n:[n],e)}}let H$=new Map;class xXe{constructor(e,n){let r=e.ownerDocument||e,s=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&s.CSSStyleSheet){let i=H$.get(r);if(i)return e[H4]=i;this.sheet=new s.CSSStyleSheet,H$.set(r,this)}else this.styleTag=r.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[H4]=this}mount(e,n){let r=this.sheet,s=0,i=0;for(let o=0;o<e.length;o++){let a=e[o],l=this.modules.indexOf(a);if(l<i&&l>-1&&(this.modules.splice(l,1),i--,l=-1),l==-1){if(this.modules.splice(i++,0,a),r)for(let c=0;c<a.rules.length;c++)r.insertRule(a.rules[c],s++)}else{for(;i<l;)s+=this.modules[i++].rules.length;s+=a.rules.length,i++}}if(r)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let a=n.head||n;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Ad={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},N1={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},wXe=typeof navigator<"u"&&/Mac/.test(navigator.platform),EXe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var ys=0;ys<10;ys++)Ad[48+ys]=Ad[96+ys]=String(ys);for(var ys=1;ys<=24;ys++)Ad[ys+111]="F"+ys;for(var ys=65;ys<=90;ys++)Ad[ys]=String.fromCharCode(ys+32),N1[ys]=String.fromCharCode(ys);for(var X5 in Ad)N1.hasOwnProperty(X5)||(N1[X5]=Ad[X5]);function SXe(t){var e=wXe&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||EXe&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?N1:Ad)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function P1(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function z4(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function v2(t,e){if(!e.anchorNode)return!1;try{return z4(t,e.anchorNode)}catch{return!1}}function I1(t){return t.nodeType==3?Tf(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function xy(t,e,n,r){return n?z$(t,e,n,r,-1)||z$(t,e,n,r,1):!1}function Af(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function wS(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function z$(t,e,n,r,s){for(;;){if(t==n&&e==r)return!0;if(e==(s<0?0:Kl(t))){if(t.nodeName=="DIV")return!1;let i=t.parentNode;if(!i||i.nodeType!=1)return!1;e=Af(t)+(s<0?0:1),t=i}else if(t.nodeType==1){if(t=t.childNodes[e+(s<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=s<0?Kl(t):0}else return!1}}function Kl(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function CC(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function kXe(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function Tie(t,e){let n=e.width/t.offsetWidth,r=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-t.offsetHeight)<1)&&(r=1),{scaleX:n,scaleY:r}}function CXe(t,e,n,r,s,i,o,a){let l=t.ownerDocument,c=l.defaultView||window;for(let u=t,d=!1;u&&!d;)if(u.nodeType==1){let h,f=u==l.body,g=1,y=1;if(f)h=kXe(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(d=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let v=u.getBoundingClientRect();({scaleX:g,scaleY:y}=Tie(u,v)),h={left:v.left,right:v.left+u.clientWidth*g,top:v.top,bottom:v.top+u.clientHeight*y}}let m=0,b=0;if(s=="nearest")e.top<h.top?(b=-(h.top-e.top+o),n>0&&e.bottom>h.bottom+b&&(b=e.bottom-h.bottom+b+o)):e.bottom>h.bottom&&(b=e.bottom-h.bottom+o,n<0&&e.top-b<h.top&&(b=-(h.top+b-e.top+o)));else{let v=e.bottom-e.top,_=h.bottom-h.top;b=(s=="center"&&v<=_?e.top+v/2-_/2:s=="start"||s=="center"&&n<0?e.top-o:e.bottom-_+o)-h.top}if(r=="nearest"?e.left<h.left?(m=-(h.left-e.left+i),n>0&&e.right>h.right+m&&(m=e.right-h.right+m+i)):e.right>h.right&&(m=e.right-h.right+i,n<0&&e.left<h.left+m&&(m=-(h.left+m-e.left+i))):m=(r=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:r=="start"==a?e.left-i:e.right-(h.right-h.left)+i)-h.left,m||b)if(f)c.scrollBy(m,b);else{let v=0,_=0;if(b){let E=u.scrollTop;u.scrollTop+=b/y,_=(u.scrollTop-E)*y}if(m){let E=u.scrollLeft;u.scrollLeft+=m/g,v=(u.scrollLeft-E)*g}e={left:e.left-v,top:e.top-_,right:e.right-v,bottom:e.bottom-_},v&&Math.abs(v-m)<1&&(r="nearest"),_&&Math.abs(_-b)<1&&(s="nearest")}if(f)break;u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function AXe(t){let e=t.ownerDocument,n,r;for(let s=t.parentNode;s&&!(s==e.body||n&&r);)if(s.nodeType==1)!r&&s.scrollHeight>s.clientHeight&&(r=s),!n&&s.scrollWidth>s.clientWidth&&(n=s),s=s.assignedSlot||s.parentNode;else if(s.nodeType==11)s=s.host;else break;return{x:n,y:r}}class TXe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:r}=e;this.set(n,Math.min(e.anchorOffset,n?Kl(n):0),r,Math.min(e.focusOffset,r?Kl(r):0))}set(e,n,r,s){this.anchorNode=e,this.anchorOffset=n,this.focusNode=r,this.focusOffset=s}}let Bp=null;function Nie(t){if(t.setActive)return t.setActive();if(Bp)return t.focus(Bp);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(Bp==null?{get preventScroll(){return Bp={preventScroll:!0},!0}}:void 0),!Bp){Bp=!1;for(let n=0;n<e.length;){let r=e[n++],s=e[n++],i=e[n++];r.scrollTop!=s&&(r.scrollTop=s),r.scrollLeft!=i&&(r.scrollLeft=i)}}}let V$;function Tf(t,e,n=e){let r=V$||(V$=document.createRange());return r.setEnd(t,n),r.setStart(t,e),r}function Rm(t,e,n,r){let s={key:e,code:e,keyCode:n,which:n,cancelable:!0};r&&({altKey:s.altKey,ctrlKey:s.ctrlKey,shiftKey:s.shiftKey,metaKey:s.metaKey}=r);let i=new KeyboardEvent("keydown",s);i.synthetic=!0,t.dispatchEvent(i);let o=new KeyboardEvent("keyup",s);return o.synthetic=!0,t.dispatchEvent(o),i.defaultPrevented||o.defaultPrevented}function NXe(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function Pie(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function PXe(t,e){let n=e.focusNode,r=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=r)return!1;for(r=Math.min(r,Kl(n));;)if(r){if(n.nodeType!=1)return!1;let s=n.childNodes[r-1];s.contentEditable=="false"?r--:(n=s,r=Kl(n))}else{if(n==t)return!0;r=Af(n),n=n.parentNode}}function Iie(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function Rie(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r>0)return{node:n,offset:r};if(n.nodeType==1&&r>0){if(n.contentEditable=="false")return null;n=n.childNodes[r-1],r=Kl(n)}else if(n.parentNode&&!wS(n))r=Af(n),n=n.parentNode;else return null}}function Lie(t,e){for(let n=t,r=e;;){if(n.nodeType==3&&r<n.nodeValue.length)return{node:n,offset:r};if(n.nodeType==1&&r<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[r],r=0}else if(n.parentNode&&!wS(n))r=Af(n)+1,n=n.parentNode;else return null}}class Us{constructor(e,n,r=!0){this.node=e,this.offset=n,this.precise=r}static before(e,n){return new Us(e.parentNode,Af(e),n)}static after(e,n){return new Us(e.parentNode,Af(e)+1,n)}}const W6=[];class qn{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let r of this.children){if(r==e)return n;n+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let r=this.dom,s=null,i;for(let o of this.children){if(o.flags&7){if(!o.dom&&(i=s?s.nextSibling:r.firstChild)){let a=qn.get(i);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(i)}o.sync(e,n),o.flags&=-8}if(i=s?s.nextSibling:r.firstChild,n&&!n.written&&n.node==r&&i!=o.dom&&(n.written=!0),o.dom.parentNode==r)for(;i&&i!=o.dom;)i=W$(i);else r.insertBefore(o.dom,i);s=o.dom}for(i=s?s.nextSibling:r.firstChild,i&&n&&n.node==r&&(n.written=!0);i;)i=W$(i)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,n),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let r;if(e==this.dom)r=this.dom.childNodes[n];else{let s=Kl(e)==0?0:n==0?-1:1;for(;;){let i=e.parentNode;if(i==this.dom)break;s==0&&i.firstChild!=i.lastChild&&(e==i.firstChild?s=-1:s=1),e=i}s<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!qn.get(r);)r=r.nextSibling;if(!r)return this.length;for(let s=0,i=0;;s++){let o=this.children[s];if(o.dom==r)return i;i+=o.length+o.breakAfter}}domBoundsAround(e,n,r=0){let s=-1,i=-1,o=-1,a=-1;for(let l=0,c=r,u=r;l<this.children.length;l++){let d=this.children[l],h=c+d.length;if(c<e&&h>n)return d.domBoundsAround(e,n,c);if(h>=e&&s==-1&&(s=l,i=c),c>n&&d.dom.parentNode==this.dom){o=l,a=u;break}u=h,c=h+d.breakAfter}return{from:i,to:a<0?r+this.length:a,startDOM:(s?this.children[s-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,r=W6){this.markDirty();for(let s=e;s<n;s++){let i=this.children[s];i.parent==this&&r.indexOf(i)<0&&i.destroy()}r.length<250?this.children.splice(e,n-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(n));for(let s=0;s<r.length;s++)r[s].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Oie(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,r,s,i,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}qn.prototype.breakAfter=0;function W$(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class Oie{constructor(e,n,r){this.children=e,this.pos=n,this.i=r,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function Die(t,e,n,r,s,i,o,a,l){let{children:c}=t,u=c.length?c[e]:null,d=i.length?i[i.length-1]:null,h=d?d.breakAfter:o;if(!(e==r&&u&&!o&&!h&&i.length<2&&u.merge(n,s,i.length?d:null,n==0,a,l))){if(r<c.length){let f=c[r];f&&(s<f.length||f.breakAfter&&d?.breakAfter)?(e==r&&(f=f.split(s),s=0),!h&&d&&f.merge(0,s,d,!0,0,l)?i[i.length-1]=f:((s||f.children.length&&!f.children[0].length)&&f.merge(0,s,null,!1,0,l),i.push(f))):f?.breakAfter&&(d?d.breakAfter=1:o=1),r++}for(u&&(u.breakAfter=o,n>0&&(!o&&i.length&&u.merge(n,u.length,i[0],!1,a,0)?u.breakAfter=i.shift().breakAfter:(n<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(n,u.length,null,!1,a,0),e++));e<r&&i.length;)if(c[r-1].become(i[i.length-1]))r--,i.pop(),l=i.length?0:a;else if(c[e].become(i[0]))e++,i.shift(),a=i.length?0:l;else break;!i.length&&e&&r<c.length&&!c[e-1].breakAfter&&c[r].merge(0,0,c[e-1],!1,a,l)&&e--,(e<r||i.length)&&t.replaceChildren(e,r,i)}}function Mie(t,e,n,r,s,i){let o=t.childCursor(),{i:a,off:l}=o.findPos(n,1),{i:c,off:u}=o.findPos(e,-1),d=e-n;for(let h of r)d+=h.length;t.length+=d,Die(t,c,u,a,l,r,0,s,i)}let Ti=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},V4=typeof document<"u"?document:{documentElement:{style:{}}};const W4=/Edge\/(\d+)/.exec(Ti.userAgent),jie=/MSIE \d/.test(Ti.userAgent),G4=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ti.userAgent),AC=!!(jie||G4||W4),G$=!AC&&/gecko\/(\d+)/i.test(Ti.userAgent),J5=!AC&&/Chrome\/(\d+)/.exec(Ti.userAgent),q$="webkitFontSmoothing"in V4.documentElement.style,Fie=!AC&&/Apple Computer/.test(Ti.vendor),K$=Fie&&(/Mobile\/\w+/.test(Ti.userAgent)||Ti.maxTouchPoints>2);var xt={mac:K$||/Mac/.test(Ti.platform),windows:/Win/.test(Ti.platform),linux:/Linux|X11/.test(Ti.platform),ie:AC,ie_version:jie?V4.documentMode||6:G4?+G4[1]:W4?+W4[1]:0,gecko:G$,gecko_version:G$?+(/Firefox\/(\d+)/.exec(Ti.userAgent)||[0,0])[1]:0,chrome:!!J5,chrome_version:J5?+J5[1]:0,ios:K$,android:/Android\b/.test(Ti.userAgent),webkit:q$,safari:Fie,webkit_version:q$?+(/\bAppleWebKit\/(\d+)/.exec(Ti.userAgent)||[0,0])[1]:0,tabSize:V4.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const IXe=256;class Ra extends qn{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,r){return this.flags&8||r&&(!(r instanceof Ra)||this.length-(n-e)+r.length>IXe||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new Ra(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new Us(this.dom,e)}domBoundsAround(e,n,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return RXe(this.dom,e,n)}}class ru extends qn{constructor(e,n=[],r=0){super(),this.mark=e,this.children=n,this.length=r;for(let s of n)s.setParent(this)}setAttrs(e){if(Pie(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,r,s,i,o){return r&&(!(r instanceof ru&&r.mark.eq(this.mark))||e&&i<=0||n<this.length&&o<=0)?!1:(Mie(this,e,n,r?r.children.slice():[],i-1,o-1),this.markDirty(),!0)}split(e){let n=[],r=0,s=-1,i=0;for(let a of this.children){let l=r+a.length;l>e&&n.push(r<e?a.split(e-r):a),s<0&&r>=e&&(s=i),r=l,i++}let o=this.length-e;return this.length=e,s>-1&&(this.children.length=s,this.markDirty()),new ru(this.mark,n,o)}domAtPos(e){return Bie(this,e)}coordsAt(e,n){return $ie(this,e,n)}}function RXe(t,e,n){let r=t.nodeValue.length;e>r&&(e=r);let s=e,i=e,o=0;e==0&&n<0||e==r&&n>=0?xt.chrome||xt.gecko||(e?(s--,o=1):i<r&&(i++,o=-1)):n<0?s--:i<r&&i++;let a=Tf(t,s,i).getClientRects();if(!a.length)return null;let l=a[(o?o<0:n>=0)?0:a.length-1];return xt.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,c=>c.width)||l),o?CC(l,o<0):l||null}class Bh extends qn{static create(e,n,r){return new Bh(e,n,r)}constructor(e,n,r){super(),this.widget=e,this.length=n,this.side=r,this.prevWidget=null}split(e){let n=Bh.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,r,s,i,o){return r&&(!(r instanceof Bh)||!this.widget.compare(r.widget)||e>0&&i<=0||n<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}become(e){return e instanceof Bh&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Cn.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,r=n&&n.state.doc,s=this.posAtStart;return r?r.slice(s,s+this.length):Cn.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Us.before(this.dom):Us.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);if(r)return r;let s=this.dom.getClientRects(),i=null;if(!s.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?s.length-1:0;i=s[a],!(e>0?a==0:a==s.length-1||i.top<i.bottom);a+=o?-1:1);return CC(i,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class yg extends qn{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof yg&&e.side==this.side}split(){return new yg(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Us.before(this.dom):Us.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Cn.empty}get isHidden(){return!0}}Ra.prototype.children=Bh.prototype.children=yg.prototype.children=W6;function Bie(t,e){let n=t.dom,{children:r}=t,s=0;for(let i=0;s<r.length;s++){let o=r[s],a=i+o.length;if(!(a==i&&o.getSide()<=0)){if(e>i&&e<a&&o.dom.parentNode==n)return o.domAtPos(e-i);if(e<=i)break;i=a}}for(let i=s;i>0;i--){let o=r[i-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let i=s;i<r.length;i++){let o=r[i];if(o.dom.parentNode==n)return o.domAtPos(0)}return new Us(n,0)}function Uie(t,e,n){let r,{children:s}=t;n>0&&e instanceof ru&&s.length&&(r=s[s.length-1])instanceof ru&&r.mark.eq(e.mark)?Uie(r,e.children[0],n-1):(s.push(e),e.setParent(t)),t.length+=e.length}function $ie(t,e,n){let r=null,s=-1,i=null,o=-1;function a(c,u){for(let d=0,h=0;d<c.children.length&&h<=u;d++){let f=c.children[d],g=h+f.length;g>=u&&(f.children.length?a(f,u-h):(!i||i.isHidden&&n>0)&&(g>u||h==g&&f.getSide()>0)?(i=f,o=u-h):(h<u||h==g&&f.getSide()<0&&!f.isHidden)&&(r=f,s=u-h)),h=g}}a(t,e);let l=(n<0?r:i)||r||i;return l?l.coordsAt(Math.max(0,l==r?s:o),n):LXe(t)}function LXe(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=I1(e);return n[n.length-1]||null}function q4(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const Y$=Object.create(null);function ES(t,e,n){if(t==e)return!0;t||(t=Y$),e||(e=Y$);let r=Object.keys(t),s=Object.keys(e);if(r.length-(n&&r.indexOf(n)>-1?1:0)!=s.length-(n&&s.indexOf(n)>-1?1:0))return!1;for(let i of r)if(i!=n&&(s.indexOf(i)==-1||t[i]!==e[i]))return!1;return!0}function K4(t,e,n){let r=!1;if(e)for(let s in e)n&&s in n||(r=!0,s=="style"?t.style.cssText="":t.removeAttribute(s));if(n)for(let s in n)e&&e[s]==n[s]||(r=!0,s=="style"?t.style.cssText=n[s]:t.setAttribute(s,n[s]));return r}function OXe(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let r=t.attributes[n];e[r.name]=r.value}return e}class Yg{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var ci=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(ci||(ci={}));class _n extends kf{constructor(e,n,r,s){super(),this.startSide=e,this.endSide=n,this.widget=r,this.spec=s}get heightRelevant(){return!1}static mark(e){return new Wv(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return n+=r&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new Td(e,n,n,r,e.widget||null,!1)}static replace(e){let n=!!e.block,r,s;if(e.isBlockGap)r=-5e8,s=4e8;else{let{start:i,end:o}=Hie(e,n);r=(i?n?-3e8:-1:5e8)-1,s=(o?n?2e8:1:-6e8)+1}return new Td(e,r,s,n,e.widget||null,!0)}static line(e){return new Gv(e)}static set(e,n=!1){return Sn.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}_n.none=Sn.empty;class Wv extends _n{constructor(e){let{start:n,end:r}=Hie(e);super(n?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,r;return this==e||e instanceof Wv&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&ES(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}Wv.prototype.point=!1;class Gv extends _n{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Gv&&this.spec.class==e.spec.class&&ES(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}Gv.prototype.mapMode=Bs.TrackBefore;Gv.prototype.point=!0;class Td extends _n{constructor(e,n,r,s,i,o){super(n,r,i,e),this.block=s,this.isReplace=o,this.mapMode=s?n<=0?Bs.TrackBefore:Bs.TrackAfter:Bs.TrackDel}get type(){return this.startSide!=this.endSide?ci.WidgetRange:this.startSide<=0?ci.WidgetBefore:ci.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Td&&DXe(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}Td.prototype.point=!0;function Hie(t,e=!1){let{inclusiveStart:n,inclusiveEnd:r}=t;return n==null&&(n=t.inclusive),r==null&&(r=t.inclusive),{start:n??e,end:r??e}}function DXe(t,e){return t==e||!!(t&&e&&t.compare(e))}function _2(t,e,n,r=0){let s=n.length-1;s>=0&&n[s]+r>=t?n[s]=Math.max(n[s],e):n.push(t,e)}class jr extends qn{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,r,s,i,o){if(r){if(!(r instanceof jr))return!1;this.dom||r.transferDOM(this)}return s&&this.setDeco(r?r.attrs:null),Mie(this,e,n,r?r.children.slice():[],i,o),!0}split(e){let n=new jr;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i:r,off:s}=this.childPos(e);s&&(n.append(this.children[r].split(s),0),this.children[r].merge(s,this.children[r].length,null,!1,0,0),r++);for(let i=r;i<this.children.length;i++)n.append(this.children[i],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){ES(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){Uie(this,e,n)}addLineDeco(e){let n=e.spec.attributes,r=e.spec.class;n&&(this.attrs=q4(n,this.attrs||{})),r&&(this.attrs=q4({class:r},this.attrs||{}))}domAtPos(e){return Bie(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var r;this.dom?this.flags&4&&(Pie(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(K4(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let s=this.dom.lastChild;for(;s&&qn.get(s)instanceof ru;)s=s.lastChild;if(!s||!this.length||s.nodeName!="BR"&&((r=qn.get(s))===null||r===void 0?void 0:r.isEditable)==!1&&(!xt.ios||!this.children.some(i=>i instanceof Ra))){let i=document.createElement("BR");i.cmIgnore=!0,this.dom.appendChild(i)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let r of this.children){if(!(r instanceof Ra)||/[^ -~]/.test(r.text))return null;let s=I1(r.dom);if(s.length!=1)return null;e+=s[0].width,n=s[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let r=$ie(this,e,n);if(!this.children.length&&r&&this.parent){let{heightOracle:s}=this.parent.view.viewState,i=r.bottom-r.top;if(Math.abs(i-s.lineHeight)<2&&s.textHeight<i){let o=(i-s.textHeight)/2;return{top:r.top+o,bottom:r.bottom-o,left:r.left,right:r.left}}}return r}become(e){return e instanceof jr&&this.children.length==0&&e.children.length==0&&ES(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let r=0,s=0;r<e.children.length;r++){let i=e.children[r],o=s+i.length;if(o>=n){if(i instanceof jr)return i;if(o>n)break}s=o+i.breakAfter}return null}}class Gc extends qn{constructor(e,n,r){super(),this.widget=e,this.length=n,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,n,r,s,i,o){return r&&(!(r instanceof Gc)||!this.widget.compare(r.widget)||e>0&&i<=0||n<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?Us.before(this.dom):Us.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let r=new Gc(this.widget,n,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return W6}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Cn.empty}domBoundsAround(){return null}become(e){return e instanceof Gc&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let r=this.widget.coordsAt(this.dom,e,n);return r||(this.widget instanceof Y4?null:CC(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:r}=this.deco;return n==r?!1:e<0?n<0:r>0}}class Y4 extends Yg{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class wy{constructor(e,n,r,s){this.doc=e,this.pos=n,this.end=r,this.disallowBlockEffectsFor=s,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Gc&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new jr),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(pw(new yg(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Gc)&&this.getLine()}buildText(e,n,r){for(;e>0;){if(this.textOff==this.text.length){let{value:i,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=i,this.textOff=0}let s=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-r)),this.getLine().append(pw(new Ra(this.text.slice(this.textOff,this.textOff+s)),n),r),this.atCursorPos=!0,this.textOff+=s,e-=s,r=0}}span(e,n,r,s){this.buildText(n-e,r,s),this.pos=n,this.openStart<0&&(this.openStart=s)}point(e,n,r,s,i,o){if(this.disallowBlockEffectsFor[o]&&r instanceof Td){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=n-e;if(r instanceof Td)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Gc(r.widget||vg.block,a,r));else{let l=Bh.create(r.widget||vg.inline,a,a?0:r.startSide),c=this.atCursorPos&&!l.isEditable&&i<=s.length&&(e<n||r.startSide>0),u=!l.isEditable&&(e<n||i>s.length||r.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!c&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(s),c&&(d.append(pw(new yg(1),s),i),i=s.length+Math.max(0,i-s.length)),d.append(pw(l,s),i),this.atCursorPos=u,this.pendingBuffer=u?e<n||i>s.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=s.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=i)}static build(e,n,r,s,i){let o=new wy(e,n,r,i);return o.openEnd=Sn.spans(s,n,r,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function pw(t,e){for(let n of e)t=new ru(n,[t],t.length);return t}class vg extends Yg{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}vg.inline=new vg("span");vg.block=new vg("div");var or=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(or||(or={}));const Nf=or.LTR,G6=or.RTL;function zie(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const MXe=zie("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),jXe=zie("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),X4=Object.create(null),tl=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);X4[e]=n,X4[n]=-e}function Vie(t){return t<=247?MXe[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?jXe[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const FXe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class nd{get dir(){return this.level%2?G6:Nf}constructor(e,n,r){this.from=e,this.to=n,this.level=r}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,r,s){let i=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==r)return o;(i<0||(s!=0?s<0?a.from<n:a.to>n:e[i].level>a.level))&&(i=o)}}if(i<0)throw new RangeError("Index out of range");return i}}function Wie(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],s=e[n];if(r.from!=s.from||r.to!=s.to||r.direction!=s.direction||!Wie(r.inner,s.inner))return!1}return!0}const Gn=[];function BXe(t,e,n,r,s){for(let i=0;i<=r.length;i++){let o=i?r[i-1].to:e,a=i<r.length?r[i].from:n,l=i?256:s;for(let c=o,u=l,d=l;c<a;c++){let h=Vie(t.charCodeAt(c));h==512?h=u:h==8&&d==4&&(h=16),Gn[c]=h==4?2:h,h&7&&(d=h),u=h}for(let c=o,u=l,d=l;c<a;c++){let h=Gn[c];if(h==128)c<a-1&&u==Gn[c+1]&&u&24?h=Gn[c]=u:Gn[c]=256;else if(h==64){let f=c+1;for(;f<a&&Gn[f]==64;)f++;let g=c&&u==8||f<n&&Gn[f]==8?d==1?1:8:256;for(let y=c;y<f;y++)Gn[y]=g;c=f-1}else h==8&&d==1&&(Gn[c]=1);u=h,h&7&&(d=h)}}}function UXe(t,e,n,r,s){let i=s==1?2:1;for(let o=0,a=0,l=0;o<=r.length;o++){let c=o?r[o-1].to:e,u=o<r.length?r[o].from:n;for(let d=c,h,f,g;d<u;d++)if(f=X4[h=t.charCodeAt(d)])if(f<0){for(let y=a-3;y>=0;y-=3)if(tl[y+1]==-f){let m=tl[y+2],b=m&2?s:m&4?m&1?i:s:0;b&&(Gn[d]=Gn[tl[y]]=b),a=y;break}}else{if(tl.length==189)break;tl[a++]=d,tl[a++]=h,tl[a++]=l}else if((g=Gn[d])==2||g==1){let y=g==s;l=y?0:1;for(let m=a-3;m>=0;m-=3){let b=tl[m+2];if(b&2)break;if(y)tl[m+2]|=2;else{if(b&4)break;tl[m+2]|=4}}}}}function $Xe(t,e,n,r){for(let s=0,i=r;s<=n.length;s++){let o=s?n[s-1].to:t,a=s<n.length?n[s].from:e;for(let l=o;l<a;){let c=Gn[l];if(c==256){let u=l+1;for(;;)if(u==a){if(s==n.length)break;u=n[s++].to,a=s<n.length?n[s].from:e}else if(Gn[u]==256)u++;else break;let d=i==1,h=(u<e?Gn[u]:r)==1,f=d==h?d?1:2:r;for(let g=u,y=s,m=y?n[y-1].to:t;g>l;)g==m&&(g=n[--y].from,m=y?n[y-1].to:t),Gn[--g]=f;l=u}else i=c,l++}}}function J4(t,e,n,r,s,i,o){let a=r%2?2:1;if(r%2==s%2)for(let l=e,c=0;l<n;){let u=!0,d=!1;if(c==i.length||l<i[c].from){let y=Gn[l];y!=a&&(u=!1,d=y==16)}let h=!u&&a==1?[]:null,f=u?r:r+1,g=l;e:for(;;)if(c<i.length&&g==i[c].from){if(d)break e;let y=i[c];if(!u)for(let m=y.to,b=c+1;;){if(m==n)break e;if(b<i.length&&i[b].from==m)m=i[b++].to;else{if(Gn[m]==a)break e;break}}if(c++,h)h.push(y);else{y.from>l&&o.push(new nd(l,y.from,f));let m=y.direction==Nf!=!(f%2);Z4(t,m?r+1:r,s,y.inner,y.from,y.to,o),l=y.to}g=y.to}else{if(g==n||(u?Gn[g]!=a:Gn[g]==a))break;g++}h?J4(t,l,g,r+1,s,h,o):l<g&&o.push(new nd(l,g,f)),l=g}else for(let l=n,c=i.length;l>e;){let u=!0,d=!1;if(!c||l>i[c-1].to){let y=Gn[l-1];y!=a&&(u=!1,d=y==16)}let h=!u&&a==1?[]:null,f=u?r:r+1,g=l;e:for(;;)if(c&&g==i[c-1].to){if(d)break e;let y=i[--c];if(!u)for(let m=y.from,b=c;;){if(m==e)break e;if(b&&i[b-1].to==m)m=i[--b].from;else{if(Gn[m-1]==a)break e;break}}if(h)h.push(y);else{y.to<l&&o.push(new nd(y.to,l,f));let m=y.direction==Nf!=!(f%2);Z4(t,m?r+1:r,s,y.inner,y.from,y.to,o),l=y.from}g=y.from}else{if(g==e||(u?Gn[g-1]!=a:Gn[g-1]==a))break;g--}h?J4(t,g,l,r+1,s,h,o):g<l&&o.push(new nd(g,l,f)),l=g}}function Z4(t,e,n,r,s,i,o){let a=e%2?2:1;BXe(t,s,i,r,a),UXe(t,s,i,r,a),$Xe(s,i,r,a),J4(t,s,i,e,n,r,o)}function HXe(t,e,n){if(!t)return[new nd(0,0,e==G6?1:0)];if(e==Nf&&!n.length&&!FXe.test(t))return Gie(t.length);if(n.length)for(;t.length>Gn.length;)Gn[Gn.length]=256;let r=[],s=e==Nf?0:1;return Z4(t,s,s,n,0,t.length,r),r}function Gie(t){return[new nd(0,t,0)]}let qie="";function zXe(t,e,n,r,s){var i;let o=r.head-t.from,a=nd.find(e,o,(i=r.bidiLevel)!==null&&i!==void 0?i:-1,r.assoc),l=e[a],c=l.side(s,n);if(o==c){let h=a+=s?1:-1;if(h<0||h>=e.length)return null;l=e[a=h],o=l.side(!s,n),c=l.side(s,n)}let u=_s(t.text,o,l.forward(s,n));(u<l.from||u>l.to)&&(u=c),qie=t.text.slice(Math.min(o,u),Math.max(o,u));let d=a==(s?e.length-1:0)?null:e[a+(s?1:-1)];return d&&u==c&&d.level+(s?0:1)<l.level?st.cursor(d.side(!s,n)+t.from,d.forward(s,n)?1:-1,d.level):st.cursor(u+t.from,l.forward(s,n)?-1:1,l.level)}function VXe(t,e,n){for(let r=e;r<n;r++){let s=Vie(t.charCodeAt(r));if(s==1)return Nf;if(s==2||s==4)return G6}return Nf}const Kie=Ct.define(),Yie=Ct.define(),Xie=Ct.define(),Jie=Ct.define(),Q4=Ct.define(),Zie=Ct.define(),Qie=Ct.define(),q6=Ct.define(),K6=Ct.define(),eoe=Ct.define({combine:t=>t.some(e=>e)}),toe=Ct.define({combine:t=>t.some(e=>e)}),noe=Ct.define();class Lm{constructor(e,n="nearest",r="nearest",s=5,i=5,o=!1){this.range=e,this.y=n,this.x=r,this.yMargin=s,this.xMargin=i,this.isSnapshot=o}map(e){return e.empty?this:new Lm(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Lm(st.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const mw=nn.define({map:(t,e)=>t.map(e)}),roe=nn.define();function Xi(t,e,n){let r=t.facet(Jie);r.length?r[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const Mc=Ct.define({combine:t=>t.length?t[0]:!0});let WXe=0;const Pb=Ct.define();class ws{constructor(e,n,r,s,i){this.id=e,this.create=n,this.domEventHandlers=r,this.domEventObservers=s,this.extension=i(this)}static define(e,n){const{eventHandlers:r,eventObservers:s,provide:i,decorations:o}=n||{};return new ws(WXe++,e,r,s,a=>{let l=[Pb.of(a)];return o&&l.push(R1.of(c=>{let u=c.plugin(a);return u?o(u):_n.none})),i&&l.push(i(a)),l})}static fromClass(e,n){return ws.define(r=>new e(r),n)}}class Z5{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(r){if(Xi(n.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(n){Xi(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(r){Xi(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const soe=Ct.define(),TC=Ct.define(),R1=Ct.define(),ioe=Ct.define(),Y6=Ct.define(),ooe=Ct.define();function X$(t,e){let n=t.state.facet(ooe);if(!n.length)return n;let r=n.map(i=>i instanceof Function?i(t):i),s=[];return Sn.spans(r,e.from,e.to,{point(){},span(i,o,a,l){let c=i-e.from,u=o-e.from,d=s;for(let h=a.length-1;h>=0;h--,l--){let f=a[h].spec.bidiIsolate,g;if(f==null&&(f=VXe(e.text,c,u)),l>0&&d.length&&(g=d[d.length-1]).to==c&&g.direction==f)g.to=u,d=g.inner;else{let y={from:c,to:u,direction:f,inner:[]};d.push(y),d=y.inner}}}}),s}const aoe=Ct.define();function X6(t){let e=0,n=0,r=0,s=0;for(let i of t.state.facet(aoe)){let o=i(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(r=Math.max(r,o.top)),o.bottom!=null&&(s=Math.max(s,o.bottom)))}return{left:e,right:n,top:r,bottom:s}}const Ib=Ct.define();class $o{constructor(e,n,r,s){this.fromA=e,this.toA=n,this.fromB=r,this.toB=s}join(e){return new $o(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,r=this;for(;n>0;n--){let s=e[n-1];if(!(s.fromA>r.toA)){if(s.toA<r.fromA)break;r=r.join(s),e.splice(n-1,1)}}return e.splice(n,0,r),e}static extendWithRanges(e,n){if(n.length==0)return e;let r=[];for(let s=0,i=0,o=0,a=0;;s++){let l=s==e.length?null:e[s],c=o-a,u=l?l.fromB:1e9;for(;i<n.length&&n[i]<u;){let d=n[i],h=n[i+1],f=Math.max(a,d),g=Math.min(u,h);if(f<=g&&new $o(f+c,g+c,f,g).addToSet(r),h>u)break;i+=2}if(!l)return r;new $o(l.fromA,l.toA,l.fromB,l.toB).addToSet(r),o=l.toA,a=l.toB}}}class SS{constructor(e,n,r){this.view=e,this.state=n,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=zr.empty(this.startState.doc.length);for(let i of r)this.changes=this.changes.compose(i.changes);let s=[];this.changes.iterChangedRanges((i,o,a,l)=>s.push(new $o(i,o,a,l))),this.changedRanges=s}static create(e,n,r){return new SS(e,n,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class J$ extends qn{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=_n.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new jr],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new $o(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:c,toA:u})=>u<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let s=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?s=this.domChanged.newSel.head:!ZXe(e.changes,this.hasComposition)&&!e.selectionSet&&(s=e.state.selection.main.head));let i=s>-1?qXe(this.view,e.changes,s):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:c,to:u}=this.hasComposition;r=new $o(c,u,e.changes.mapPos(c,-1),e.changes.mapPos(u,1)).addToSet(r.slice())}this.hasComposition=i?{from:i.range.fromB,to:i.range.toB}:null,(xt.ie||xt.chrome)&&!i&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),l=XXe(o,a,e.changes);return r=$o.extendWithRanges(r,l),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,i),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,r);let{observer:s}=this.view;s.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=xt.chrome||xt.ios?{node:s.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||s.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let i=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Gc&&o.widget instanceof Y4&&i.push(o.dom);s.updateGaps(i)}updateChildren(e,n,r){let s=r?r.range.addToSet(e.slice()):e,i=this.childCursor(n);for(let o=s.length-1;;o--){let a=o>=0?s[o]:null;if(!a)break;let{fromA:l,toA:c,fromB:u,toB:d}=a,h,f,g,y;if(r&&r.range.fromB<d&&r.range.toB>u){let E=wy.build(this.view.state.doc,u,r.range.fromB,this.decorations,this.dynamicDecorationMap),w=wy.build(this.view.state.doc,r.range.toB,d,this.decorations,this.dynamicDecorationMap);f=E.breakAtStart,g=E.openStart,y=w.openEnd;let S=this.compositionView(r);w.breakAtStart?S.breakAfter=1:w.content.length&&S.merge(S.length,S.length,w.content[0],!1,w.openStart,0)&&(S.breakAfter=w.content[0].breakAfter,w.content.shift()),E.content.length&&S.merge(0,0,E.content[E.content.length-1],!0,0,E.openEnd)&&E.content.pop(),h=E.content.concat(S).concat(w.content)}else({content:h,breakAtStart:f,openStart:g,openEnd:y}=wy.build(this.view.state.doc,u,d,this.decorations,this.dynamicDecorationMap));let{i:m,off:b}=i.findPos(c,1),{i:v,off:_}=i.findPos(l,-1);Die(this,v,_,m,b,h,f,g,y)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let r of n.effects)r.is(roe)&&(this.editContextFormatting=r.value)}compositionView(e){let n=new Ra(e.text.nodeValue);n.flags|=8;for(let{deco:s}of e.marks)n=new ru(s,[n],n.length);let r=new jr;return r.append(n,0),r}fixCompositionDOM(e){let n=(i,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let a=qn.get(i);a&&a!=o&&(a.dom=null),o.setDOM(i)},r=this.childPos(e.range.fromB,1),s=this.children[r.i];n(e.line,s);for(let i=e.marks.length-1;i>=-1;i--)r=s.childPos(r.off,1),s=s.children[r.i],n(i>=0?e.marks[i].node:e.text,s)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,s=r==this.dom,i=!s&&!(this.view.state.facet(Mc)||this.dom.tabIndex>-1)&&v2(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(s||n||i))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),c=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(xt.gecko&&a.empty&&!this.hasComposition&&GXe(l)){let d=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(d,l.node.childNodes[l.offset]||null)),l=c=new Us(d,0),o=!0}let u=this.view.observer.selectionRange;(o||!u.focusNode||(!xy(l.node,l.offset,u.anchorNode,u.anchorOffset)||!xy(c.node,c.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,a))&&(this.view.observer.ignore(()=>{xt.android&&xt.chrome&&this.dom.contains(u.focusNode)&&JXe(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=P1(this.view.root);if(d)if(a.empty){if(xt.gecko){let h=KXe(l.node,l.offset);if(h&&h!=3){let f=(h==1?Rie:Lie)(l.node,l.offset);f&&(l=new Us(f.node,f.offset))}}d.collapse(l.node,l.offset),a.bidiLevel!=null&&d.caretBidiLevel!==void 0&&(d.caretBidiLevel=a.bidiLevel)}else if(d.extend){d.collapse(l.node,l.offset);try{d.extend(c.node,c.offset)}catch{}}else{let h=document.createRange();a.anchor>a.head&&([l,c]=[c,l]),h.setEnd(c.node,c.offset),h.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(h)}i&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(l,c)),this.impreciseAnchor=l.precise?null:new Us(u.anchorNode,u.anchorOffset),this.impreciseHead=c.precise?null:new Us(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&xy(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,r=P1(e.root),{anchorNode:s,anchorOffset:i}=e.observer.selectionRange;if(!r||!n.empty||!n.assoc||!r.modify)return;let o=jr.find(this,n.head);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let l=this.coordsAt(n.head,-1),c=this.coordsAt(n.head,1);if(!l||!c||l.bottom>c.top)return;let u=this.domAtPos(n.head+n.assoc);r.collapse(u.node,u.offset),r.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=n.from&&r.collapse(s,i)}moveToLine(e){let n=this.dom,r;if(e.node!=n)return e;for(let s=e.offset;!r&&s<n.childNodes.length;s++){let i=qn.get(n.childNodes[s]);i instanceof jr&&(r=i.domAtPos(0))}for(let s=e.offset-1;!r&&s>=0;s--){let i=qn.get(n.childNodes[s]);i instanceof jr&&(r=i.domAtPos(i.length))}return r?new Us(r.node,r.offset,!0):e}nearest(e){for(let n=e;n;){let r=qn.get(n);if(r&&r.rootView==this)return r;n=n.parentNode}return null}posFromDOM(e,n){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,n)+r.posAtStart}domAtPos(e){let{i:n,off:r}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let s=this.children[n];if(r<s.length||s instanceof jr)break;n++,r=0}return this.children[n].domAtPos(r)}coordsAt(e,n){let r=null,s=0;for(let i=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],l=i-a.breakAfter,c=l-a.length;if(l<e)break;if(c<=e&&(c<e||a.covers(-1))&&(l>e||a.covers(1))&&(!r||a instanceof jr&&!(r instanceof jr&&n>=0)))r=a,s=c;else if(r&&c==e&&l==e&&a instanceof Gc&&Math.abs(n)<2){if(a.deco.startSide<0)break;o&&(r=null)}i=c}return r?r.coordsAt(e-s,n):null}coordsForChar(e){let{i:n,off:r}=this.childPos(e,1),s=this.children[n];if(!(s instanceof jr))return null;for(;s.children.length;){let{i:a,off:l}=s.childPos(r,1);for(;;a++){if(a==s.children.length)return null;if((s=s.children[a]).length)break}r=l}if(!(s instanceof Ra))return null;let i=_s(s.text,r);if(i==r)return null;let o=Tf(s.dom,r,i).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(a==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let n=[],{from:r,to:s}=e,i=this.view.contentDOM.clientWidth,o=i>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==or.LTR;for(let c=0,u=0;u<this.children.length;u++){let d=this.children[u],h=c+d.length;if(h>s)break;if(c>=r){let f=d.dom.getBoundingClientRect();if(n.push(f.height),o){let g=d.dom.lastChild,y=g?I1(g):[];if(y.length){let m=y[y.length-1],b=l?m.right-f.left:f.right-m.left;b>a&&(a=b,this.minWidth=i,this.minWidthFrom=c,this.minWidthTo=h)}}}c=h+d.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?or.RTL:or.LTR}measureTextSize(){for(let i of this.children)if(i instanceof jr){let o=i.measureTextSize();if(o)return o}let e=document.createElement("div"),n,r,s;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let i=I1(e.firstChild)[0];n=e.getBoundingClientRect().height,r=i?i.width/27:7,s=i?i.height:n,e.remove()}),{lineHeight:n,charWidth:r,textHeight:s}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new Oie(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let r=0,s=0;;s++){let i=s==n.viewports.length?null:n.viewports[s],o=i?i.from-1:this.length;if(o>r){let a=(n.lineBlockAt(o).bottom-n.lineBlockAt(r).top)/this.view.scaleY;e.push(_n.replace({widget:new Y4(a),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!i)break;r=i.to+1}return _n.set(e)}updateDeco(){let e=1,n=this.view.state.facet(R1).map(i=>(this.dynamicDecorationMap[e++]=typeof i=="function")?i(this.view):i),r=!1,s=this.view.state.facet(ioe).map((i,o)=>{let a=typeof i=="function";return a&&(r=!0),a?i(this.view):i});for(s.length&&(this.dynamicDecorationMap[e++]=r,n.push(Sn.join(s))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let c=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=c.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let c of this.view.state.facet(noe))try{if(c(this.view,e.range,e))return!0}catch(u){Xi(this.view.state,u,"scroll handler")}let{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),s;if(!r)return;!n.empty&&(s=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,s.left),top:Math.min(r.top,s.top),right:Math.max(r.right,s.right),bottom:Math.max(r.bottom,s.bottom)});let i=X6(this.view),o={left:r.left-i.left,top:r.top-i.top,right:r.right+i.right,bottom:r.bottom+i.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;CXe(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==or.LTR)}}function GXe(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function loe(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let r=Rie(n.focusNode,n.focusOffset),s=Lie(n.focusNode,n.focusOffset),i=r||s;if(s&&r&&s.node!=r.node){let a=qn.get(s.node);if(!a||a instanceof Ra&&a.text!=s.node.nodeValue)i=s;else if(t.docView.lastCompositionAfterCursor){let l=qn.get(r.node);!l||l instanceof Ra&&l.text!=r.node.nodeValue||(i=s)}}if(t.docView.lastCompositionAfterCursor=i!=r,!i)return null;let o=e-i.offset;return{from:o,to:o+i.node.nodeValue.length,node:i.node}}function qXe(t,e,n){let r=loe(t,n);if(!r)return null;let{node:s,from:i,to:o}=r,a=s.nodeValue;if(/[\n\r]/.test(a)||t.state.doc.sliceString(r.from,r.to)!=a)return null;let l=e.invertedDesc,c=new $o(l.mapPos(i),l.mapPos(o),i,o),u=[];for(let d=s.parentNode;;d=d.parentNode){let h=qn.get(d);if(h instanceof ru)u.push({node:d,deco:h.mark});else{if(h instanceof jr||d.nodeName=="DIV"&&d.parentNode==t.contentDOM)return{range:c,text:s,marks:u,line:d};if(d!=t.contentDOM)u.push({node:d,deco:new Wv({inclusive:!0,attributes:OXe(d),tagName:d.tagName.toLowerCase()})});else return null}}}function KXe(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let YXe=class{constructor(){this.changes=[]}compareRange(e,n){_2(e,n,this.changes)}comparePoint(e,n){_2(e,n,this.changes)}boundChange(e){_2(e,e,this.changes)}};function XXe(t,e,n){let r=new YXe;return Sn.compare(t,e,n,r),r.changes}function JXe(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function ZXe(t,e){let n=!1;return e&&t.iterChangedRanges((r,s)=>{r<e.to&&s>e.from&&(n=!0)}),n}function QXe(t,e,n=1){let r=t.charCategorizer(e),s=t.doc.lineAt(e),i=e-s.from;if(s.length==0)return st.cursor(e);i==0?n=1:i==s.length&&(n=-1);let o=i,a=i;n<0?o=_s(s.text,i,!1):a=_s(s.text,i);let l=r(s.text.slice(o,a));for(;o>0;){let c=_s(s.text,o,!1);if(r(s.text.slice(c,o))!=l)break;o=c}for(;a<s.length;){let c=_s(s.text,a);if(r(s.text.slice(a,c))!=l)break;a=c}return st.range(o+s.from,a+s.from)}function eJe(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function tJe(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function Q5(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function Z$(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function Q$(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function eI(t,e,n){let r,s,i,o,a=!1,l,c,u,d;for(let g=t.firstChild;g;g=g.nextSibling){let y=I1(g);for(let m=0;m<y.length;m++){let b=y[m];s&&Q5(s,b)&&(b=Z$(Q$(b,s.bottom),s.top));let v=eJe(e,b),_=tJe(n,b);if(v==0&&_==0)return g.nodeType==3?eH(g,e,n):eI(g,e,n);if(!r||o>_||o==_&&i>v){r=g,s=b,i=v,o=_;let E=_?n<b.top?-1:1:v?e<b.left?-1:1:0;a=!E||(E>0?m<y.length-1:m>0)}v==0?n>b.bottom&&(!u||u.bottom<b.bottom)?(l=g,u=b):n<b.top&&(!d||d.top>b.top)&&(c=g,d=b):u&&Q5(u,b)?u=Q$(u,b.bottom):d&&Q5(d,b)&&(d=Z$(d,b.top))}}if(u&&u.bottom>=n?(r=l,s=u):d&&d.top<=n&&(r=c,s=d),!r)return{node:t,offset:0};let h=Math.max(s.left,Math.min(s.right,e));if(r.nodeType==3)return eH(r,h,n);if(a&&r.contentEditable!="false")return eI(r,h,n);let f=Array.prototype.indexOf.call(t.childNodes,r)+(e>=(s.left+s.right)/2?1:0);return{node:t,offset:f}}function eH(t,e,n){let r=t.nodeValue.length,s=-1,i=1e9,o=0;for(let a=0;a<r;a++){let l=Tf(t,a,a+1).getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(u.top==u.bottom)continue;o||(o=e-u.left);let d=(u.top>n?u.top-n:n-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&d<i){let h=e>=(u.left+u.right)/2,f=h;if((xt.chrome||xt.gecko)&&Tf(t,a).getBoundingClientRect().left==u.right&&(f=!h),d<=0)return{node:t,offset:a+(f?1:0)};s=a+(f?1:0),i=d}}}return{node:t,offset:s>-1?s:o>0?t.nodeValue.length:0}}function coe(t,e,n,r=-1){var s,i;let o=t.contentDOM.getBoundingClientRect(),a=o.top+t.viewState.paddingTop,l,{docHeight:c}=t.viewState,{x:u,y:d}=e,h=d-a;if(h<0)return 0;if(h>c)return t.state.doc.length;for(let E=t.viewState.heightOracle.textHeight/2,w=!1;l=t.elementAtHeight(h),l.type!=ci.Text;)for(;h=r>0?l.bottom+E:l.top-E,!(h>=0&&h<=c);){if(w)return n?null:0;w=!0,r=-r}d=a+h;let f=l.from;if(f<t.viewport.from)return t.viewport.from==0?0:n?null:tH(t,o,l,u,d);if(f>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:tH(t,o,l,u,d);let g=t.dom.ownerDocument,y=t.root.elementFromPoint?t.root:g,m=y.elementFromPoint(u,d);m&&!t.contentDOM.contains(m)&&(m=null),m||(u=Math.max(o.left+1,Math.min(o.right-1,u)),m=y.elementFromPoint(u,d),m&&!t.contentDOM.contains(m)&&(m=null));let b,v=-1;if(m&&((s=t.docView.nearest(m))===null||s===void 0?void 0:s.isEditable)!=!1){if(g.caretPositionFromPoint){let E=g.caretPositionFromPoint(u,d);E&&({offsetNode:b,offset:v}=E)}else if(g.caretRangeFromPoint){let E=g.caretRangeFromPoint(u,d);E&&({startContainer:b,startOffset:v}=E,(!t.contentDOM.contains(b)||xt.safari&&nJe(b,v,u)||xt.chrome&&rJe(b,v,u))&&(b=void 0))}b&&(v=Math.min(Kl(b),v))}if(!b||!t.docView.dom.contains(b)){let E=jr.find(t.docView,f);if(!E)return h>l.top+l.height/2?l.to:l.from;({node:b,offset:v}=eI(E.dom,u,d))}let _=t.docView.nearest(b);if(!_)return null;if(_.isWidget&&((i=_.dom)===null||i===void 0?void 0:i.nodeType)==1){let E=_.dom.getBoundingClientRect();return e.y<E.top||e.y<=E.bottom&&e.x<=(E.left+E.right)/2?_.posAtStart:_.posAtEnd}else return _.localPosFromDOM(b,v)+_.posAtStart}function tH(t,e,n,r,s){let i=Math.round((r-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,l=Math.floor((s-n.top-(t.defaultLineHeight-a)*.5)/a);i+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+_Xe(o,i,t.state.tabSize)}function nJe(t,e,n){let r;if(t.nodeType!=3||e!=(r=t.nodeValue.length))return!1;for(let s=t.nextSibling;s;s=s.nextSibling)if(s.nodeType!=1||s.nodeName!="BR")return!1;return Tf(t,r-1,r).getBoundingClientRect().left>n}function rJe(t,e,n){if(e!=0)return!1;for(let s=t;;){let i=s.parentNode;if(!i||i.nodeType!=1||i.firstChild!=s)return!1;if(i.classList.contains("cm-line"))break;s=i}let r=t.nodeType==1?t.getBoundingClientRect():Tf(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}function tI(t,e){let n=t.lineBlockAt(e);if(Array.isArray(n.type)){for(let r of n.type)if(r.to>e||r.to==e&&(r.to==n.to||r.type==ci.Text))return r}return n}function sJe(t,e,n,r){let s=tI(t,e.head),i=!r||s.type!=ci.Text||!(t.lineWrapping||s.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>s.from?e.head-1:e.head);if(i){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(s.from),l=t.posAtCoords({x:n==(a==or.LTR)?o.right-1:o.left+1,y:(i.top+i.bottom)/2});if(l!=null)return st.cursor(l,n?-1:1)}return st.cursor(n?s.to:s.from,n?-1:1)}function nH(t,e,n,r){let s=t.state.doc.lineAt(e.head),i=t.bidiSpans(s),o=t.textDirectionAt(s.from);for(let a=e,l=null;;){let c=zXe(s,i,o,a,n),u=qie;if(!c){if(s.number==(n?t.state.doc.lines:1))return a;u=`
`,s=t.state.doc.line(s.number+(n?1:-1)),i=t.bidiSpans(s),c=t.visualLineSide(s,!n)}if(l){if(!l(u))return a}else{if(!r)return c;l=r(u)}a=c}}function iJe(t,e,n){let r=t.state.charCategorizer(e),s=r(n);return i=>{let o=r(i);return s==Br.Space&&(s=o),s==o}}function oJe(t,e,n,r){let s=e.head,i=n?1:-1;if(s==(n?t.state.doc.length:0))return st.cursor(s,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(s,e.assoc||-1),u=t.documentTop;if(c)o==null&&(o=c.left-l.left),a=i<0?c.top:c.bottom;else{let f=t.viewState.lineBlockAt(s);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(s-f.from))),a=(i<0?f.top:f.bottom)+u}let d=l.left+o,h=r??t.viewState.heightOracle.textHeight>>1;for(let f=0;;f+=10){let g=a+(h+f)*i,y=coe(t,{x:d,y:g},!1,i);if(g<l.top||g>l.bottom||(i<0?y<s:y>s)){let m=t.docView.coordsForChar(y),b=!m||g<m.top?-1:1;return st.cursor(y,b,void 0,o)}}}function x2(t,e,n){for(;;){let r=0;for(let s of t)s.between(e-1,e+1,(i,o,a)=>{if(e>i&&e<o){let l=r||n||(e-i<o-e?-1:1);e=l<0?i:o,r=l}});if(!r)return e}}function e3(t,e,n){let r=x2(t.state.facet(Y6).map(s=>s(t)),n.from,e.head>n.from?-1:1);return r==n.from?n:st.cursor(r,r<n.from?1:-1)}const Rb="";class aJe{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(gn.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Rb}readRange(e,n){if(!e)return this;let r=e.parentNode;for(let s=e;;){this.findPointBefore(r,s);let i=this.text.length;this.readNode(s);let o=s.nextSibling;if(o==n)break;let a=qn.get(s),l=qn.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:wS(s))||wS(o)&&(s.nodeName!="BR"||s.cmIgnore)&&this.text.length>i)&&this.lineBreak(),s=o}return this.findPointBefore(r,n),this}readTextNode(e){let n=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,n.length));for(let r=0,s=this.lineSeparator?null:/\r\n?|\n/g;;){let i=-1,o=1,a;if(this.lineSeparator?(i=n.indexOf(this.lineSeparator,r),o=this.lineSeparator.length):(a=s.exec(n))&&(i=a.index,o=a[0].length),this.append(n.slice(r,i<0?n.length:i)),i<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);r=i+o}}readNode(e){if(e.cmIgnore)return;let n=qn.get(e),r=n&&n.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let s=r.iter();!s.next().done;)s.lineBreak?this.lineBreak():this.append(s.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==n&&(r.pos=this.text.length)}findPointInside(e,n){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(lJe(e,r.node,r.offset)?n:0))}}function lJe(t,e,n){for(;;){if(!e||n<Kl(e))return!1;if(e==t)return!0;n=Af(e)+1,e=e.parentNode}}class rH{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class cJe{constructor(e,n,r,s){this.typeOver=s,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:i,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,r,0))){let a=i||o?[]:hJe(e),l=new aJe(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=fJe(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=i&&i.node==a.focusNode&&i.offset==a.focusOffset||!z4(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),c=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!z4(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),u=e.viewport;if((xt.ios||xt.chrome)&&e.state.selection.main.empty&&l!=c&&(u.from>0||u.to<e.state.doc.length)){let d=Math.min(l,c),h=Math.max(l,c),f=u.from-d,g=u.to-h;(f==0||f==1||d==0)&&(g==0||g==-1||h==e.state.doc.length)&&(l=0,c=e.state.doc.length)}this.newSel=st.single(c,l)}}}function uoe(t,e){let n,{newSel:r}=e,s=t.state.selection.main,i=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=s.from,c=null;(i===8||xt.android&&e.text.length<a-o)&&(l=s.to,c="end");let u=dJe(t.state.doc.sliceString(o,a,Rb),e.text,l-o,c);u&&(xt.chrome&&i==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==Rb+Rb&&u.toB--,n={from:o+u.from,to:o+u.toA,insert:Cn.of(e.text.slice(u.from,u.toB).split(Rb))})}else r&&(!t.hasFocus&&t.state.facet(Mc)||r.main.eq(s))&&(r=null);if(!n&&!r)return!1;if(!n&&e.typeOver&&!s.empty&&r&&r.main.empty?n={from:s.from,to:s.to,insert:t.state.doc.slice(s.from,s.to)}:(xt.mac||xt.android)&&n&&n.from==n.to&&n.from==s.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(r&&n.insert.length==2&&(r=st.single(r.main.anchor-1,r.main.head-1)),n={from:n.from,to:n.to,insert:Cn.of([n.insert.toString().replace("."," ")])}):n&&n.from>=s.from&&n.to<=s.to&&(n.from!=s.from||n.to!=s.to)&&s.to-s.from-(n.to-n.from)<=4?n={from:s.from,to:s.to,insert:t.state.doc.slice(s.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,s.to))}:xt.chrome&&n&&n.from==n.to&&n.from==s.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(r&&(r=st.single(r.main.anchor-1,r.main.head-1)),n={from:s.from,to:s.to,insert:Cn.of([" "])}),n)return J6(t,n,r,i);if(r&&!r.main.eq(s)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin),t.dispatch({selection:r,scrollIntoView:o,userEvent:a}),!0}else return!1}function J6(t,e,n,r=-1){if(xt.ios&&t.inputState.flushIOSKey(e))return!0;let s=t.state.selection.main;if(xt.android&&(e.to==s.to&&(e.from==s.from||e.from==s.from-1&&t.state.sliceDoc(e.from,s.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Rm(t.contentDOM,"Enter",13)||(e.from==s.from-1&&e.to==s.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>s.head)&&Rm(t.contentDOM,"Backspace",8)||e.from==s.from&&e.to==s.to+1&&e.insert.length==0&&Rm(t.contentDOM,"Delete",46)))return!0;let i=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let o,a=()=>o||(o=uJe(t,e,n));return t.state.facet(Zie).some(l=>l(t,e.from,e.to,i,a))||t.dispatch(a()),!0}function uJe(t,e,n){let r,s=t.state,i=s.selection.main;if(e.from>=i.from&&e.to<=i.to&&e.to-e.from>=(i.to-i.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=i.from<e.from?s.sliceDoc(i.from,e.from):"",l=i.to>e.to?s.sliceDoc(e.to,i.to):"";r=s.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+l))}else{let a=s.changes(e),l=n&&n.main.to<=a.newLength?n.main:void 0;if(s.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=i.to&&e.to>=i.to-10){let c=t.state.sliceDoc(e.from,e.to),u,d=n&&loe(t,n.main.head);if(d){let g=e.insert.length-(e.to-e.from);u={from:d.from,to:d.to-g}}else u=t.state.doc.lineAt(i.head);let h=i.to-e.to,f=i.to-i.from;r=s.changeByRange(g=>{if(g.from==i.from&&g.to==i.to)return{changes:a,range:l||g.map(a)};let y=g.to-h,m=y-c.length;if(g.to-g.from!=f||t.state.sliceDoc(m,y)!=c||g.to>=u.from&&g.from<=u.to)return{range:g};let b=s.changes({from:m,to:y,insert:e.insert}),v=g.to-i.to;return{changes:b,range:l?st.range(Math.max(0,l.anchor+v),Math.max(0,l.head+v)):g.map(b)}})}else r={changes:a,selection:l&&s.selection.replaceRange(l)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),s.update(r,{userEvent:o,scrollIntoView:!0})}function dJe(t,e,n,r){let s=Math.min(t.length,e.length),i=0;for(;i<s&&t.charCodeAt(i)==e.charCodeAt(i);)i++;if(i==s&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(r=="end"){let l=Math.max(0,i-Math.min(o,a));n-=o+l-i}if(o<i&&t.length<e.length){let l=n<=i&&n>=o?i-n:0;i-=l,a=i+(a-o),o=i}else if(a<i){let l=n<=i&&n>=a?i-n:0;i-=l,o=i+(o-a),a=i}return{from:i,toA:o,toB:a}}function hJe(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:i}=t.observer.selectionRange;return n&&(e.push(new rH(n,r)),(s!=n||i!=r)&&e.push(new rH(s,i))),e}function fJe(t,e){if(t.length==0)return null;let n=t[0].pos,r=t.length==2?t[1].pos:n;return n>-1&&r>-1?st.single(n+e,r+e):null}class pJe{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,xt.safari&&e.contentDOM.addEventListener("input",()=>null),xt.gecko&&PJe(e.contentDOM.ownerDocument)}handleEvent(e){!wJe(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,n){let r=this.handlers[e];if(r){for(let s of r.observers)s(this.view,n);for(let s of r.handlers){if(n.defaultPrevented)break;if(s(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=mJe(e),r=this.handlers,s=this.view.contentDOM;for(let i in n)if(i!="scroll"){let o=!n[i].handlers.length,a=r[i];a&&o!=!a.handlers.length&&(s.removeEventListener(i,this.handleEvent),a=null),a||s.addEventListener(i,this.handleEvent,{passive:o})}for(let i in r)i!="scroll"&&!n[i]&&s.removeEventListener(i,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&hoe.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),xt.android&&xt.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return xt.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=doe.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||gJe.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Rm(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:xt.safari&&!xt.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function sH(t,e){return(n,r)=>{try{return e.call(t,r,n)}catch(s){Xi(n.state,s)}}}function mJe(t){let e=Object.create(null);function n(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of t){let s=r.spec;if(s&&s.domEventHandlers)for(let i in s.domEventHandlers){let o=s.domEventHandlers[i];o&&n(i).handlers.push(sH(r.value,o))}if(s&&s.domEventObservers)for(let i in s.domEventObservers){let o=s.domEventObservers[i];o&&n(i).observers.push(sH(r.value,o))}}for(let r in La)n(r).handlers.push(La[r]);for(let r in Ko)n(r).observers.push(Ko[r]);return e}const doe=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],gJe="dthko",hoe=[16,17,18,20,91,92,224,225],gw=6;function bw(t){return Math.max(0,t)*.7+8}function bJe(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class yJe{constructor(e,n,r,s){this.view=e,this.startEvent=n,this.style=r,this.mustSelect=s,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=AXe(e.contentDOM),this.atoms=e.state.facet(Y6).map(o=>o(e));let i=e.contentDOM.ownerDocument;i.addEventListener("mousemove",this.move=this.move.bind(this)),i.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(gn.allowMultipleSelections)&&vJe(e,n),this.dragging=xJe(e,n)&&moe(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&bJe(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,r=0,s=0,i=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:s,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:i,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=X6(this.view);e.clientX-l.left<=s+gw?n=-bw(s-e.clientX):e.clientX+l.right>=o-gw&&(n=bw(e.clientX-o)),e.clientY-l.top<=i+gw?r=-bw(i-e.clientY):e.clientY+l.bottom>=a-gw&&(r=bw(e.clientY-a)),this.setScrollSpeed(n,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let r=0;r<e.ranges.length;r++){let s=e.ranges[r],i=null;if(s.empty){let o=x2(this.atoms,s.from,0);o!=s.from&&(i=st.cursor(o,-1))}else{let o=x2(this.atoms,s.from,-1),a=x2(this.atoms,s.to,1);(o!=s.from||a!=s.to)&&(i=st.range(s.from==s.anchor?o:a,s.from==s.head?o:a))}i&&(n||(n=e.ranges.slice()),n[r]=i)}return n?st.create(n,e.mainIndex):e}select(e){let{view:n}=this,r=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function vJe(t,e){let n=t.state.facet(Kie);return n.length?n[0](e):xt.mac?e.metaKey:e.ctrlKey}function _Je(t,e){let n=t.state.facet(Yie);return n.length?n[0](e):xt.mac?!e.altKey:!e.ctrlKey}function xJe(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let r=P1(t.root);if(!r||r.rangeCount==0)return!0;let s=r.getRangeAt(0).getClientRects();for(let i=0;i<s.length;i++){let o=s[i];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function wJe(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,r;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(r=qn.get(n))&&r.ignoreEvent(e))return!1;return!0}const La=Object.create(null),Ko=Object.create(null),foe=xt.ie&&xt.ie_version<15||xt.ios&&xt.webkit_version<604;function EJe(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),poe(t,n.value)},50)}function NC(t,e,n){for(let r of t.facet(e))n=r(n,t);return n}function poe(t,e){e=NC(t.state,q6,e);let{state:n}=t,r,s=1,i=n.toText(e),o=i.lines==n.selection.ranges.length;if(nI!=null&&n.selection.ranges.every(l=>l.empty)&&nI==i.toString()){let l=-1;r=n.changeByRange(c=>{let u=n.doc.lineAt(c.from);if(u.from==l)return{range:c};l=u.from;let d=n.toText((o?i.line(s++).text:e)+n.lineBreak);return{changes:{from:u.from,insert:d},range:st.cursor(c.from+d.length)}})}else o?r=n.changeByRange(l=>{let c=i.line(s++);return{changes:{from:l.from,to:l.to,insert:c.text},range:st.cursor(l.from+c.length)}}):r=n.replaceSelection(i);t.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}Ko.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};La.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);Ko.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Ko.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};La.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let r of t.state.facet(Xie))if(n=r(t,e),n)break;if(!n&&e.button==0&&(n=CJe(t,e)),n){let r=!t.hasFocus;t.inputState.startMouseSelection(new yJe(t,e,n,r)),r&&t.observer.ignore(()=>{Nie(t.contentDOM);let i=t.root.activeElement;i&&!i.contains(t.contentDOM)&&i.blur()});let s=t.inputState.mouseSelection;if(s)return s.start(e),s.dragging===!1}return!1};function iH(t,e,n,r){if(r==1)return st.cursor(e,n);if(r==2)return QXe(t.state,e,n);{let s=jr.find(t.docView,e),i=t.state.doc.lineAt(s?s.posAtEnd:e),o=s?s.posAtStart:i.from,a=s?s.posAtEnd:i.to;return a<t.state.doc.length&&a==i.to&&a++,st.range(o,a)}}let oH=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function SJe(t,e,n,r){let s=jr.find(t.docView,e);if(!s)return 1;let i=e-s.posAtStart;if(i==0)return 1;if(i==s.length)return-1;let o=s.coordsAt(i,-1);if(o&&oH(n,r,o))return-1;let a=s.coordsAt(i,1);return a&&oH(n,r,a)?1:o&&o.bottom>=r?-1:1}function aH(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:SJe(t,n,e.clientX,e.clientY)}}const kJe=xt.ie&&xt.ie_version<=11;let lH=null,cH=0,uH=0;function moe(t){if(!kJe)return t.detail;let e=lH,n=uH;return lH=t,uH=Date.now(),cH=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(cH+1)%3:1}function CJe(t,e){let n=aH(t,e),r=moe(e),s=t.state.selection;return{update(i){i.docChanged&&(n.pos=i.changes.mapPos(n.pos),s=s.map(i.changes))},get(i,o,a){let l=aH(t,i),c,u=iH(t,l.pos,l.bias,r);if(n.pos!=l.pos&&!o){let d=iH(t,n.pos,n.bias,r),h=Math.min(d.from,u.from),f=Math.max(d.to,u.to);u=h<u.from?st.range(h,f):st.range(f,h)}return o?s.replaceRange(s.main.extend(u.from,u.to)):a&&r==1&&s.ranges.length>1&&(c=AJe(s,l.pos))?c:a?s.addRange(u):st.create([u])}}}function AJe(t,e){for(let n=0;n<t.ranges.length;n++){let{from:r,to:s}=t.ranges[n];if(r<=e&&s>=e)return st.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}La.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let s=t.docView.nearest(e.target);if(s&&s.isWidget){let i=s.posAtStart,o=i+s.length;(i>=n.to||o<=n.from)&&(n=st.range(i,o))}}let{inputState:r}=t;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",NC(t.state,K6,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};La.dragend=t=>(t.inputState.draggedContent=null,!1);function dH(t,e,n,r){if(n=NC(t.state,q6,n),!n)return;let s=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:i}=t.inputState,o=r&&i&&_Je(t,e)?{from:i.from,to:i.to}:null,a={from:s,insert:n},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(s,-1),head:l.mapPos(s,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}La.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let r=Array(n.length),s=0,i=()=>{++s==n.length&&dH(t,e,r.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let a=new FileReader;a.onerror=i,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(r[o]=a.result),i()},a.readAsText(n[o])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return dH(t,e,r,!0),!0}return!1};La.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=foe?null:e.clipboardData;return n?(poe(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(EJe(t),!1)};function TJe(t,e){let n=t.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),t.focus()},50)}function NJe(t){let e=[],n=[],r=!1;for(let s of t.selection.ranges)s.empty||(e.push(t.sliceDoc(s.from,s.to)),n.push(s));if(!e.length){let s=-1;for(let{from:i}of t.selection.ranges){let o=t.doc.lineAt(i);o.number>s&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),s=o.number}r=!0}return{text:NC(t,K6,e.join(t.lineBreak)),ranges:n,linewise:r}}let nI=null;La.copy=La.cut=(t,e)=>{let{text:n,ranges:r,linewise:s}=NJe(t.state);if(!n&&!s)return!1;nI=s?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let i=foe?null:e.clipboardData;return i?(i.clearData(),i.setData("text/plain",n),!0):(TJe(t,n),!1)};const goe=lu.define();function boe(t,e){let n=[];for(let r of t.facet(Qie)){let s=r(t,e);s&&n.push(s)}return n?t.update({effects:n,annotations:goe.of(!0)}):null}function yoe(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=boe(t.state,e);n?t.dispatch(n):t.update([])}},10)}Ko.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),yoe(t)};Ko.blur=t=>{t.observer.clearSelectionRange(),yoe(t)};Ko.compositionstart=Ko.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};Ko.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,xt.chrome&&xt.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};Ko.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};La.beforeinput=(t,e)=>{var n,r;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let i=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),o=e.getTargetRanges();if(i&&o.length){let a=o[0],l=t.posAtDOM(a.startContainer,a.startOffset),c=t.posAtDOM(a.endContainer,a.endOffset);return J6(t,{from:l,to:c,insert:t.state.toText(i)},null),!0}}let s;if(xt.chrome&&xt.android&&(s=doe.find(i=>i.inputType==e.inputType))&&(t.observer.delayAndroidKey(s.key,s.keyCode),s.key=="Backspace"||s.key=="Delete")){let i=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>i+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return xt.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),xt.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>Ko.compositionend(t,e),20),!1};const hH=new Set;function PJe(t){hH.has(t)||(hH.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const fH=["pre-wrap","normal","pre-line","break-spaces"];let _g=!1;function pH(){_g=!1}class IJe{constructor(e){this.lineWrapping=e,this.doc=Cn.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let r=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((n-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return fH.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let r=0;r<e.length;r++){let s=e[r];s<0?r++:this.heightSamples[Math.floor(s*10)]||(n=!0,this.heightSamples[Math.floor(s*10)]=!0)}return n}refresh(e,n,r,s,i,o){let a=fH.indexOf(e)>-1,l=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=n,this.charWidth=r,this.textHeight=s,this.lineLength=i,l){this.heightSamples={};for(let c=0;c<o.length;c++){let u=o[c];u<0?c++:this.heightSamples[Math.floor(u*10)]=!0}}return l}}class RJe{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class kl{constructor(e,n,r,s,i){this.from=e,this.length=n,this.top=r,this.height=s,this._content=i}get type(){return typeof this._content=="number"?ci.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Td?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new kl(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var Qn=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(Qn||(Qn={}));const w2=.001;class ui{constructor(e,n,r=2){this.length=e,this.height=n,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>w2&&(_g=!0),this.height=e)}replace(e,n,r){return ui.of(r)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,r,s){let i=this,o=r.doc;for(let a=s.length-1;a>=0;a--){let{fromA:l,toA:c,fromB:u,toB:d}=s[a],h=i.lineAt(l,Qn.ByPosNoHeight,r.setDoc(n),0,0),f=h.to>=c?h:i.lineAt(c,Qn.ByPosNoHeight,r,0,0);for(d+=f.to-c,c=f.to;a>0&&h.from<=s[a-1].toA;)l=s[a-1].fromA,u=s[a-1].fromB,a--,l<h.from&&(h=i.lineAt(l,Qn.ByPosNoHeight,r,0,0));u+=h.from-l,l=h.from;let g=Z6.build(r.setDoc(o),e,u,d);i=kS(i,i.replace(l,c,g))}return i.updateHeight(r,0)}static empty(){return new Vi(0,0)}static of(e){if(e.length==1)return e[0];let n=0,r=e.length,s=0,i=0;for(;;)if(n==r)if(s>i*2){let a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),r+=1+a.break,s-=a.size}else if(i>s*2){let a=e[r];a.break?e.splice(r,1,a.left,null,a.right):e.splice(r,1,a.left,a.right),r+=2+a.break,i-=a.size}else break;else if(s<i){let a=e[n++];a&&(s+=a.size)}else{let a=e[--r];a&&(i+=a.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,r++),new LJe(ui.of(e.slice(0,n)),o,ui.of(e.slice(r)))}}function kS(t,e){return t==e?t:(t.constructor!=e.constructor&&(_g=!0),e)}ui.prototype.size=1;class voe extends ui{constructor(e,n,r){super(e,n),this.deco=r}blockAt(e,n,r,s){return new kl(s,this.length,r,this.height,this.deco||0)}lineAt(e,n,r,s,i){return this.blockAt(0,r,s,i)}forEachLine(e,n,r,s,i,o){e<=i+this.length&&n>=i&&o(this.blockAt(0,r,s,i))}updateHeight(e,n=0,r=!1,s){return s&&s.from<=n&&s.more&&this.setHeight(s.heights[s.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Vi extends voe{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,r,s){return new kl(s,this.length,r,this.height,this.breaks)}replace(e,n,r){let s=r[0];return r.length==1&&(s instanceof Vi||s instanceof bs&&s.flags&4)&&Math.abs(this.length-s.length)<10?(s instanceof bs?s=new Vi(s.length,this.height):s.height=this.height,this.outdated||(s.outdated=!1),s):ui.of(r)}updateHeight(e,n=0,r=!1,s){return s&&s.from<=n&&s.more?this.setHeight(s.heights[s.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class bs extends ui{constructor(e){super(e,0)}heightMetrics(e,n){let r=e.doc.lineAt(n).number,s=e.doc.lineAt(n+this.length).number,i=s-r+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*i);o=l/i,this.length>i+1&&(a=(this.height-l)/(this.length-i-1))}else o=this.height/i;return{firstLine:r,lastLine:s,perLine:o,perChar:a}}blockAt(e,n,r,s){let{firstLine:i,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(n,s);if(n.lineWrapping){let c=s+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),u=n.doc.lineAt(c),d=a+u.length*l,h=Math.max(r,e-d/2);return new kl(u.from,u.length,h,d,0)}else{let c=Math.max(0,Math.min(o-i,Math.floor((e-r)/a))),{from:u,length:d}=n.doc.line(i+c);return new kl(u,d,r+a*c,a,0)}}lineAt(e,n,r,s,i){if(n==Qn.ByHeight)return this.blockAt(e,r,s,i);if(n==Qn.ByPosNoHeight){let{from:f,to:g}=r.doc.lineAt(e);return new kl(f,g-f,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(r,i),c=r.doc.lineAt(e),u=a+c.length*l,d=c.number-o,h=s+a*d+l*(c.from-i-d);return new kl(c.from,c.length,Math.max(s,Math.min(h,s+this.height-u)),u,0)}forEachLine(e,n,r,s,i,o){e=Math.max(e,i),n=Math.min(n,i+this.length);let{firstLine:a,perLine:l,perChar:c}=this.heightMetrics(r,i);for(let u=e,d=s;u<=n;){let h=r.doc.lineAt(u);if(u==e){let g=h.number-a;d+=l*g+c*(e-i-g)}let f=l+c*h.length;o(new kl(h.from,h.length,d,f,0)),d+=f,u=h.to+1}}replace(e,n,r){let s=this.length-n;if(s>0){let i=r[r.length-1];i instanceof bs?r[r.length-1]=new bs(i.length+s):r.push(null,new bs(s-1))}if(e>0){let i=r[0];i instanceof bs?r[0]=new bs(e+i.length):r.unshift(new bs(e-1),null)}return ui.of(r)}decomposeLeft(e,n){n.push(new bs(e-1),null)}decomposeRight(e,n){n.push(null,new bs(this.length-e-1))}updateHeight(e,n=0,r=!1,s){let i=n+this.length;if(s&&s.from<=n+this.length&&s.more){let o=[],a=Math.max(n,s.from),l=-1;for(s.from>n&&o.push(new bs(s.from-n-1).updateHeight(e,n));a<=i&&s.more;){let u=e.doc.lineAt(a).length;o.length&&o.push(null);let d=s.heights[s.index++];l==-1?l=d:Math.abs(d-l)>=w2&&(l=-2);let h=new Vi(u,d);h.outdated=!1,o.push(h),a+=u+1}a<=i&&o.push(null,new bs(i-a).updateHeight(e,a));let c=ui.of(o);return(l<0||Math.abs(c.height-this.height)>=w2||Math.abs(l-this.heightMetrics(e,n).perLine)>=w2)&&(_g=!0),kS(this,c)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class LJe extends ui{constructor(e,n,r){super(e.length+n+r.length,e.height+r.height,n|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,n,r,s){let i=r+this.left.height;return e<i?this.left.blockAt(e,n,r,s):this.right.blockAt(e,n,i,s+this.left.length+this.break)}lineAt(e,n,r,s,i){let o=s+this.left.height,a=i+this.left.length+this.break,l=n==Qn.ByHeight?e<o:e<a,c=l?this.left.lineAt(e,n,r,s,i):this.right.lineAt(e,n,r,o,a);if(this.break||(l?c.to<a:c.from>a))return c;let u=n==Qn.ByPosNoHeight?Qn.ByPosNoHeight:Qn.ByPos;return l?c.join(this.right.lineAt(a,u,r,o,a)):this.left.lineAt(a,u,r,s,i).join(c)}forEachLine(e,n,r,s,i,o){let a=s+this.left.height,l=i+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,n,r,s,i,o),n>=l&&this.right.forEachLine(e,n,r,a,l,o);else{let c=this.lineAt(l,Qn.ByPos,r,s,i);e<c.from&&this.left.forEachLine(e,c.from-1,r,s,i,o),c.to>=e&&c.from<=n&&o(c),n>c.to&&this.right.forEachLine(c.to+1,n,r,a,l,o)}}replace(e,n,r){let s=this.left.length+this.break;if(n<s)return this.balanced(this.left.replace(e,n,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-s,n-s,r));let i=[];e>0&&this.decomposeLeft(e,i);let o=i.length;for(let a of r)i.push(a);if(e>0&&mH(i,o-1),n<this.length){let a=i.length;this.decomposeRight(n,i),mH(i,a)}return ui.of(i)}decomposeLeft(e,n){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(r++,e>=r&&n.push(null)),e>r&&this.right.decomposeLeft(e-r,n)}decomposeRight(e,n){let r=this.left.length,s=r+this.break;if(e>=s)return this.right.decomposeRight(e-s,n);e<r&&this.left.decomposeRight(e,n),this.break&&e<s&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?ui.of(this.break?[e,null,n]:[e,n]):(this.left=kS(this.left,e),this.right=kS(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,r=!1,s){let{left:i,right:o}=this,a=n+i.length+this.break,l=null;return s&&s.from<=n+i.length&&s.more?l=i=i.updateHeight(e,n,r,s):i.updateHeight(e,n,r),s&&s.from<=a+o.length&&s.more?l=o=o.updateHeight(e,a,r,s):o.updateHeight(e,a,r),l?this.balanced(i,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function mH(t,e){let n,r;t[e]==null&&(n=t[e-1])instanceof bs&&(r=t[e+1])instanceof bs&&t.splice(e-1,3,new bs(n.length+1+r.length))}const OJe=5;class Z6{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let r=Math.min(n,this.lineEnd),s=this.nodes[this.nodes.length-1];s instanceof Vi?s.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new Vi(r-this.pos,-1)),this.writtenTo=r,n>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,r){if(e<n||r.heightRelevant){let s=r.widget?r.widget.estimatedHeight:0,i=r.widget?r.widget.lineBreaks:0;s<0&&(s=this.oracle.lineHeight);let o=n-e;r.block?this.addBlock(new voe(o,s,r)):(o||i||s>=OJe)&&this.addLineDeco(s,i,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Vi(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let r=new bs(n-e);return this.oracle.doc.lineAt(e).to==n&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Vi)return e;let n=new Vi(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,r){let s=this.ensureLine();s.length+=r,s.collapsed+=r,s.widgetHeight=Math.max(s.widgetHeight,e),s.breaks+=n,this.writtenTo=this.pos=this.pos+r}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof Vi)&&!this.isCovered?this.nodes.push(new Vi(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let s of this.nodes)s instanceof Vi&&s.updateHeight(this.oracle,r),r+=s?s.length:1;return this.nodes}static build(e,n,r,s){let i=new Z6(r,e);return Sn.spans(n,r,s,i,0),i.finish(r)}}function DJe(t,e,n){let r=new MJe;return Sn.compare(t,e,n,r,0),r.changes}class MJe{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,r,s){(e<n||r&&r.heightRelevant||s&&s.heightRelevant)&&_2(e,n,this.changes,5)}}function jJe(t,e){let n=t.getBoundingClientRect(),r=t.ownerDocument,s=r.defaultView||window,i=Math.max(0,n.left),o=Math.min(s.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(s.innerHeight,n.bottom);for(let c=t.parentNode;c&&c!=r.body;)if(c.nodeType==1){let u=c,d=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&d.overflow!="visible"){let h=u.getBoundingClientRect();i=Math.max(i,h.left),o=Math.min(o,h.right),a=Math.max(a,h.top),l=Math.min(c==t.parentNode?s.innerHeight:l,h.bottom)}c=d.position=="absolute"||d.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:i-n.left,right:Math.max(i,o)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function FJe(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function BJe(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class t3{constructor(e,n,r,s){this.from=e,this.to=n,this.size=r,this.displaySize=s}static same(e,n){if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){let s=e[r],i=n[r];if(s.from!=i.from||s.to!=i.to||s.size!=i.size)return!1}return!0}draw(e,n){return _n.replace({widget:new UJe(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class UJe extends Yg{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class gH{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=bH,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=or.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(TC).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new IJe(n),this.stateDeco=e.facet(R1).filter(r=>typeof r!="function"),this.heightMap=ui.empty().applyChanges(this.stateDeco,Cn.empty,this.heightOracle.setDoc(e.doc),[new $o(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=_n.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let r=0;r<=1;r++){let s=r?n.head:n.anchor;if(!e.some(({from:i,to:o})=>s>=i&&s<=o)){let{from:i,to:o}=this.lineBlockAt(s);e.push(new yw(i,o))}}return this.viewports=e.sort((r,s)=>r.from-s.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?bH:new Q6(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Lb(e,this.scaler))})}update(e,n=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(R1).filter(u=>typeof u!="function");let s=e.changedRanges,i=$o.extendWithRanges(s,DJe(r,this.stateDeco,e?e.changes:zr.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);pH(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),i),(this.heightMap.height!=o||_g)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=i.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<l.from||n.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,n));let c=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(c||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(toe)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,r=window.getComputedStyle(n),s=this.heightOracle,i=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?or.RTL:or.LTR;let o=this.heightOracle.mustRefreshForWrapping(i),a=n.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let c=0,u=0;if(a.width&&a.height){let{scaleX:E,scaleY:w}=Tie(n,a);(E>.005&&Math.abs(this.scaleX-E)>.005||w>.005&&Math.abs(this.scaleY-w)>.005)&&(this.scaleX=E,this.scaleY=w,c|=16,o=l=!0)}let d=(parseInt(r.paddingTop)||0)*this.scaleY,h=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=d||this.paddingBottom!=h)&&(this.paddingTop=d,this.paddingBottom=h,c|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(s.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=16);let f=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=f&&(this.scrollAnchorHeight=-1,this.scrollTop=f),this.scrolledToBottom=Iie(e.scrollDOM);let g=(this.printing?BJe:jJe)(n,this.paddingTop),y=g.top-this.pixelViewport.top,m=g.bottom-this.pixelViewport.bottom;this.pixelViewport=g;let b=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(b!=this.inView&&(this.inView=b,b&&(l=!0)),!this.inView&&!this.scrollTarget&&!FJe(e.dom))return 0;let v=a.width;if((this.contentDOMWidth!=v||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,c|=16),l){let E=e.docView.measureVisibleLineHeights(this.viewport);if(s.mustRefreshForHeights(E)&&(o=!0),o||s.lineWrapping&&Math.abs(v-this.contentDOMWidth)>s.charWidth){let{lineHeight:w,charWidth:S,textHeight:k}=e.docView.measureTextSize();o=w>0&&s.refresh(i,w,S,k,v/S,E),o&&(e.docView.minWidth=0,c|=16)}y>0&&m>0?u=Math.max(y,m):y<0&&m<0&&(u=Math.min(y,m)),pH();for(let w of this.viewports){let S=w.from==this.viewport.from?E:e.docView.measureVisibleLineHeights(w);this.heightMap=(o?ui.empty().applyChanges(this.stateDeco,Cn.empty,this.heightOracle,[new $o(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(s,0,o,new RJe(w.from,S))}_g&&(c|=2)}let _=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return _&&(c&2&&(c|=this.updateScaler()),this.viewport=this.getViewport(u,this.scrollTarget),c|=this.updateForViewport()),(c&2||_)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),s=this.heightMap,i=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new yw(s.lineAt(o-r*1e3,Qn.ByHeight,i,0,0).from,s.lineAt(a+(1-r)*1e3,Qn.ByHeight,i,0,0).to);if(n){let{head:c}=n.range;if(c<l.from||c>l.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=s.lineAt(c,Qn.ByPos,i,0,0),h;n.y=="center"?h=(d.top+d.bottom)/2-u/2:n.y=="start"||n.y=="nearest"&&c<l.from?h=d.top:h=d.bottom-u,l=new yw(s.lineAt(h-1e3/2,Qn.ByHeight,i,0,0).from,s.lineAt(h+u+1e3/2,Qn.ByHeight,i,0,0).to)}}return l}mapViewport(e,n){let r=n.mapPos(e.from,-1),s=n.mapPos(e.to,1);return new yw(this.heightMap.lineAt(r,Qn.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(s,Qn.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},r=0){if(!this.inView)return!0;let{top:s}=this.heightMap.lineAt(e,Qn.ByPos,this.heightOracle,0,0),{bottom:i}=this.heightMap.lineAt(n,Qn.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||s<=o-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||i>=a+Math.max(10,Math.min(r,250)))&&s>o-2*1e3&&i<a+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let r=[];for(let s of e)n.touchesRange(s.from,s.to)||r.push(new t3(n.mapPos(s.from),n.mapPos(s.to),s.size,s.displaySize));return r}ensureLineGaps(e,n){let r=this.heightOracle.lineWrapping,s=r?1e4:2e3,i=s>>1,o=s<<1;if(this.defaultTextDirection!=or.LTR&&!r)return[];let a=[],l=(u,d,h,f)=>{if(d-u<i)return;let g=this.state.selection.main,y=[g.from];g.empty||y.push(g.to);for(let b of y)if(b>u&&b<d){l(u,b-10,h,f),l(b+10,d,h,f);return}let m=HJe(e,b=>b.from>=h.from&&b.to<=h.to&&Math.abs(b.from-u)<i&&Math.abs(b.to-d)<i&&!y.some(v=>b.from<v&&b.to>v));if(!m){if(d<h.to&&n&&r&&n.visibleRanges.some(_=>_.from<=d&&_.to>=d)){let _=n.moveToLineBoundary(st.cursor(d),!1,!0).head;_>u&&(d=_)}let b=this.gapSize(h,u,d,f),v=r||b<2e6?b:2e6;m=new t3(u,d,b,v)}a.push(m)},c=u=>{if(u.length<o||u.type!=ci.Text)return;let d=$Je(u.from,u.to,this.stateDeco);if(d.total<o)return;let h=this.scrollTarget?this.scrollTarget.range.head:null,f,g;if(r){let y=s/this.heightOracle.lineLength*this.heightOracle.lineHeight,m,b;if(h!=null){let v=_w(d,h),_=((this.visibleBottom-this.visibleTop)/2+y)/u.height;m=v-_,b=v+_}else m=(this.visibleTop-u.top-y)/u.height,b=(this.visibleBottom-u.top+y)/u.height;f=vw(d,m),g=vw(d,b)}else{let y=d.total*this.heightOracle.charWidth,m=s*this.heightOracle.charWidth,b=0;if(y>2e6)for(let S of e)S.from>=u.from&&S.from<u.to&&S.size!=S.displaySize&&S.from*this.heightOracle.charWidth+b<this.pixelViewport.left&&(b=S.size-S.displaySize);let v=this.pixelViewport.left+b,_=this.pixelViewport.right+b,E,w;if(h!=null){let S=_w(d,h),k=((_-v)/2+m)/y;E=S-k,w=S+k}else E=(v-m)/y,w=(_+m)/y;f=vw(d,E),g=vw(d,w)}f>u.from&&l(u.from,f,u,d),g<u.to&&l(g,u.to,u,d)};for(let u of this.viewportLines)Array.isArray(u.type)?u.type.forEach(c):c(u);return a}gapSize(e,n,r,s){let i=_w(s,r)-_w(s,n);return this.heightOracle.lineWrapping?e.height*i:s.total*this.heightOracle.charWidth*i}updateLineGaps(e){t3.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=_n.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let r=[];Sn.spans(n,this.viewport.from,this.viewport.to,{span(i,o){r.push({from:i,to:o})},point(){}},20);let s=0;if(r.length!=this.visibleRanges.length)s=12;else for(let i=0;i<r.length&&!(s&8);i++){let o=this.visibleRanges[i],a=r[i];(o.from!=a.from||o.to!=a.to)&&(s|=4,e&&e.mapPos(o.from,-1)==a.from&&e.mapPos(o.to,1)==a.to||(s|=8))}return this.visibleRanges=r,s}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||Lb(this.heightMap.lineAt(e,Qn.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||Lb(this.heightMap.lineAt(this.scaler.fromDOM(e),Qn.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return Lb(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class yw{constructor(e,n){this.from=e,this.to=n}}function $Je(t,e,n){let r=[],s=t,i=0;return Sn.spans(n,t,e,{span(){},point(o,a){o>s&&(r.push({from:s,to:o}),i+=o-s),s=a}},20),s<e&&(r.push({from:s,to:e}),i+=e-s),{total:i,ranges:r}}function vw({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let r=Math.floor(t*n);for(let s=0;;s++){let{from:i,to:o}=e[s],a=o-i;if(r<=a)return i+r;r-=a}}function _w(t,e){let n=0;for(let{from:r,to:s}of t.ranges){if(e<=s){n+=e-r;break}n+=s-r}return n/t.total}function HJe(t,e){for(let n of t)if(e(n))return n}const bH={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class Q6{constructor(e,n,r){let s=0,i=0,o=0;this.viewports=r.map(({from:a,to:l})=>{let c=n.lineAt(a,Qn.ByPos,e,0,0).top,u=n.lineAt(l,Qn.ByPos,e,0,0).bottom;return s+=u-c,{from:a,to:l,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-s)/(n.height-s);for(let a of this.viewports)a.domTop=o+(a.top-i)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),i=a.bottom}toDOM(e){for(let n=0,r=0,s=0;;n++){let i=n<this.viewports.length?this.viewports[n]:null;if(!i||e<i.top)return s+(e-r)*this.scale;if(e<=i.bottom)return i.domTop+(e-i.top);r=i.bottom,s=i.domBottom}}fromDOM(e){for(let n=0,r=0,s=0;;n++){let i=n<this.viewports.length?this.viewports[n]:null;if(!i||e<i.domTop)return r+(e-s)/this.scale;if(e<=i.domBottom)return i.top+(e-i.domTop);r=i.bottom,s=i.domBottom}}eq(e){return e instanceof Q6?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,r)=>n.from==e.viewports[r].from&&n.to==e.viewports[r].to):!1}}function Lb(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),r=e.toDOM(t.bottom);return new kl(t.from,t.length,n,r-n,Array.isArray(t._content)?t._content.map(s=>Lb(s,e)):t._content)}const xw=Ct.define({combine:t=>t.join(" ")}),rI=Ct.define({combine:t=>t.indexOf(!0)>-1}),sI=Cd.newName(),_oe=Cd.newName(),xoe=Cd.newName(),woe={"&light":"."+_oe,"&dark":"."+xoe};function iI(t,e,n){return new Cd(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,s=>{if(s=="&")return t;if(!n||!n[s])throw new RangeError(`Unsupported selector: ${s}`);return n[s]}):t+" "+r}})}const zJe=iI("."+sI,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},woe),VJe={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},n3=xt.ie&&xt.ie_version<=11;class WJe{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new TXe,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let r of n)this.queue.push(r);(xt.ie&&xt.ie_version<=11||xt.ios&&e.composing)&&n.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(xt.chrome&&xt.chrome_version<126)&&(this.editContext=new qJe(e),e.state.facet(Mc)&&(e.contentDOM.editContext=this.editContext.editContext)),n3&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,r)=>n!=e[r]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,s=this.selectionRange;if(r.state.facet(Mc)?r.root.activeElement!=this.dom:!v2(this.dom,s))return;let i=s.anchorNode&&r.docView.nearest(s.anchorNode);if(i&&i.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(xt.ie&&xt.ie_version<=11||xt.android&&xt.chrome)&&!r.state.selection.main.empty&&s.focusNode&&xy(s.focusNode,s.focusOffset,s.anchorNode,s.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=P1(e.root);if(!n)return!1;let r=xt.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&GJe(this.view,n)||n;if(!r||this.selectionRange.eq(r))return!1;let s=v2(this.dom,r);return s&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&PXe(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),s&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let r=this.dom;r;)if(r.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=n)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,VJe),n3&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),n3&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var r;if(!this.delayedAndroidKey){let s=()=>{let i=this.delayedAndroidKey;i&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=i.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&i.force&&Rm(this.dom,i.key,i.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(s)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,r=-1,s=!1;for(let i of e){let o=this.readMutation(i);o&&(o.typeOver&&(s=!0),n==-1?{from:n,to:r}=o:(n=Math.min(o.from,n),r=Math.max(o.to,r)))}return{from:n,to:r,typeOver:s}}readChange(){let{from:e,to:n,typeOver:r}=this.processRecords(),s=this.selectionChanged&&v2(this.dom,this.selectionRange);if(e<0&&!s)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let i=new cJe(this.view,e,n,r);return this.view.docView.domChanged={newSel:i.newSel?i.newSel.main:null},i}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let r=this.view.state,s=uoe(this.view,n);return this.view.state==r&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),s}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let r=yH(n,e.previousSibling||e.target.previousSibling,-1),s=yH(n,e.nextSibling||e.target.nextSibling,1);return{from:r?n.posAfter(r):n.posAtStart,to:s?n.posBefore(s):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Mc)!=e.state.facet(Mc)&&(e.view.contentDOM.editContext=e.state.facet(Mc)?this.editContext.editContext:null))}destroy(){var e,n,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function yH(t,e,n){for(;e;){let r=qn.get(e);if(r&&r.parent==t)return r;let s=e.parentNode;e=s!=t.dom?s:n>0?e.nextSibling:e.previousSibling}return null}function vH(t,e){let n=e.startContainer,r=e.startOffset,s=e.endContainer,i=e.endOffset,o=t.docView.domAtPos(t.state.selection.main.anchor);return xy(o.node,o.offset,s,i)&&([n,r,s,i]=[s,i,n,r]),{anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:i}}function GJe(t,e){if(e.getComposedRanges){let s=e.getComposedRanges(t.root)[0];if(s)return vH(t,s)}let n=null;function r(s){s.preventDefault(),s.stopImmediatePropagation(),n=s.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",r,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",r,!0),n?vH(t,n):null}class qJe{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let s=e.state.selection.main,{anchor:i,head:o}=s,a=this.toEditorPos(r.updateRangeStart),l=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:a,drifted:!1});let c={from:a,to:l,insert:Cn.of(r.text.split(`
`))};if(c.from==this.from&&i<this.from?c.from=i:c.to==this.to&&i>this.to&&(c.to=i),c.from==c.to&&!c.insert.length){let u=st.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));u.main.eq(s)||e.dispatch({selection:u,userEvent:"select"});return}if((xt.mac||xt.android)&&c.from==o-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(c={from:a,to:l,insert:Cn.of([r.text.replace("."," ")])}),this.pendingContextChange=c,!e.state.readOnly){let u=this.to-this.from+(c.to-c.from+c.insert.length);J6(e,c,st.single(this.toEditorPos(r.selectionStart,u),this.toEditorPos(r.selectionEnd,u)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=r=>{let s=[],i=null;for(let o=this.toEditorPos(r.rangeStart),a=this.toEditorPos(r.rangeEnd);o<a;o++){let l=e.coordsForChar(o);i=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||i||new DOMRect,s.push(i)}n.updateCharacterBounds(r.rangeStart,s)},this.handlers.textformatupdate=r=>{let s=[];for(let i of r.getTextFormats()){let o=i.underlineStyle,a=i.underlineThickness;if(o!="None"&&a!="None"){let l=this.toEditorPos(i.rangeStart),c=this.toEditorPos(i.rangeEnd);if(l<c){let u=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${a=="Thin"?1:2}px`;s.push(_n.mark({attributes:{style:u}}).range(l,c))}}}e.dispatch({effects:roe.of(_n.set(s))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)n.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let s=P1(r.root);s&&s.rangeCount&&this.editContext.updateSelectionBounds(s.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,r=!1,s=this.pendingContextChange;return e.changes.iterChanges((i,o,a,l,c)=>{if(r)return;let u=c.length-(o-i);if(s&&o>=s.to)if(s.from==i&&s.to==o&&s.insert.eq(c)){s=this.pendingContextChange=null,n+=u,this.to+=u;return}else s=null,this.revertPending(e.state);if(i+=n,o+=n,o<=this.from)this.from+=u,this.to+=u;else if(i<this.to){if(i<this.from||o>this.to||this.to-this.from+c.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(i),this.toContextPos(o),c.toString()),this.to+=u}n+=u}),s&&!r&&this.revertPending(e.state),!r}update(e){let n=this.pendingContextChange;this.composing&&(this.composing.drifted||e.transactions.some(r=>!r.isUserEvent("input.type")&&r.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),s=this.toContextPos(n.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=s)&&this.editContext.updateSelection(r,s)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class kt{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(s=>s.forEach(i=>r(i,this)))||(s=>this.update(s)),this.dispatch=this.dispatch.bind(this),this._root=e.root||NXe(e.parent)||document,this.viewState=new gH(e.state||gn.create(e)),e.scrollTo&&e.scrollTo.is(mw)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Pb).map(s=>new Z5(s));for(let s of this.plugins)s.update(this);this.observer=new WJe(this),this.inputState=new pJe(this),this.inputState.ensureHandlers(this.plugins),this.docView=new J$(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof Fr?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,r=!1,s,i=this.state;for(let h of e){if(h.startState!=i)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");i=h.state}if(this.destroyed){this.viewState.state=i;return}let o=this.hasFocus,a=0,l=null;e.some(h=>h.annotation(goe))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=boe(i,o),l||(a=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(i.doc)||!this.state.selection.eq(i.selection))&&(u=null)):this.observer.clear(),i.facet(gn.phrases)!=this.state.facet(gn.phrases))return this.setState(i);s=SS.create(this,i,e),s.flags|=a;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(d&&(d=d.map(h.changes)),h.scrollIntoView){let{main:f}=h.state.selection;d=new Lm(f.empty?f:st.cursor(f.head,f.head>f.anchor?-1:1))}for(let f of h.effects)f.is(mw)&&(d=f.value.clip(this.state))}this.viewState.update(s,d),this.bidiCache=CS.update(this.bidiCache,s.changes),s.empty||(this.updatePlugins(s),this.inputState.update(s)),n=this.docView.update(s),this.state.facet(Ib)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(s.startState.facet(xw)!=s.state.facet(xw)&&(this.viewState.mustMeasureContent=!0),(n||r||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!s.empty)for(let h of this.state.facet(Q4))try{h(s)}catch(f){Xi(this.state,f,"update listener")}(l||u)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),u&&!uoe(this,u)&&c.force&&Rm(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new gH(e),this.plugins=e.facet(Pb).map(r=>new Z5(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new J$(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(Pb),r=e.state.facet(Pb);if(n!=r){let s=[];for(let i of r){let o=n.indexOf(i);if(o<0)s.push(new Z5(i));else{let a=this.plugins[o];a.mustUpdate=e,s.push(a)}}for(let i of this.plugins)i.mustUpdate!=e&&i.destroy(this);this.plugins=s,this.pluginMap.clear()}else for(let s of this.plugins)s.mustUpdate=e;for(let s=0;s<this.plugins.length;s++)this.plugins[s].update(this);n!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(r){Xi(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,r=this.scrollDOM,s=r.scrollTop*this.scaleY,{scrollAnchorPos:i,scrollAnchorHeight:o}=this.viewState;Math.abs(s-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(Iie(r))i=-1,o=this.viewState.heightMap.height;else{let f=this.viewState.scrollAnchorAt(s);i=f.from,o=f.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];l&4||([this.measureRequests,c]=[c,this.measureRequests]);let u=c.map(f=>{try{return f.read(this)}catch(g){return Xi(this.state,g),_H}}),d=SS.create(this,this.state,[]),h=!1;d.flags|=l,n?n.flags|=l:n=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),h=this.docView.update(d),h&&this.docViewUpdate());for(let f=0;f<c.length;f++)if(u[f]!=_H)try{let g=c[f];g.write&&g.write(u[f],this)}catch(g){Xi(this.state,g)}if(h&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let g=(i<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(i).top)-o;if(g>1||g<-1){s=s+g,r.scrollTop=s/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let a of this.state.facet(Q4))a(n)}get themeClasses(){return sI+" "+(this.state.facet(rI)?xoe:_oe)+" "+this.state.facet(xw)}updateAttrs(){let e=xH(this,soe,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Mc)?"true":"false",class:"cm-content",style:`${xt.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),xH(this,TC,n);let r=this.observer.ignore(()=>{let s=K4(this.contentDOM,this.contentAttrs,n),i=K4(this.dom,this.editorAttrs,e);return s||i});return this.editorAttrs=e,this.contentAttrs=n,r}showAnnouncements(e){let n=!0;for(let r of e)for(let s of r.effects)if(s.is(kt.announce)){n&&(this.announceDOM.textContent=""),n=!1;let i=this.announceDOM.appendChild(document.createElement("div"));i.textContent=s.value}}mountStyles(){this.styleModules=this.state.facet(Ib);let e=this.state.facet(kt.cspNonce);Cd.mount(this.root,this.styleModules.concat(zJe).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.spec!=e)&&this.pluginMap.set(e,n=this.plugins.find(r=>r.spec==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,r){return e3(this,e,nH(this,e,n,r))}moveByGroup(e,n){return e3(this,e,nH(this,e,n,r=>iJe(this,e.head,r)))}visualLineSide(e,n){let r=this.bidiSpans(e),s=this.textDirectionAt(e.from),i=r[n?r.length-1:0];return st.cursor(i.side(n,s)+e.from,i.forward(!n,s)?1:-1)}moveToLineBoundary(e,n,r=!0){return sJe(this,e,n,r)}moveVertically(e,n,r){return e3(this,e,oJe(this,e,n,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),coe(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let r=this.docView.coordsAt(e,n);if(!r||r.left==r.right)return r;let s=this.state.doc.lineAt(e),i=this.bidiSpans(s),o=i[nd.find(i,e-s.from,-1,n)];return CC(r,o.dir==or.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(eoe)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>KJe)return Gie(e.length);let n=this.textDirectionAt(e.from),r;for(let i of this.bidiCache)if(i.from==e.from&&i.dir==n&&(i.fresh||Wie(i.isolates,r=X$(this,e))))return i.order;r||(r=X$(this,e));let s=HXe(e.text,n,r);return this.bidiCache.push(new CS(e.from,e.to,n,r,!0,s)),s}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||xt.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Nie(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return mw.of(new Lm(typeof e=="number"?st.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return mw.of(new Lm(st.cursor(r.from),"start","start",r.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return ws.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return ws.define(()=>({}),{eventObservers:e})}static theme(e,n){let r=Cd.newName(),s=[xw.of(r),Ib.of(iI(`.${r}`,e))];return n&&n.dark&&s.push(rI.of(!0)),s}static baseTheme(e){return Bd.lowest(Ib.of(iI("."+sI,e,woe)))}static findFromDOM(e){var n;let r=e.querySelector(".cm-content"),s=r&&qn.get(r)||qn.get(e);return((n=s?.rootView)===null||n===void 0?void 0:n.view)||null}}kt.styleModule=Ib;kt.inputHandler=Zie;kt.clipboardInputFilter=q6;kt.clipboardOutputFilter=K6;kt.scrollHandler=noe;kt.focusChangeEffect=Qie;kt.perLineTextDirection=eoe;kt.exceptionSink=Jie;kt.updateListener=Q4;kt.editable=Mc;kt.mouseSelectionStyle=Xie;kt.dragMovesSelection=Yie;kt.clickAddsSelectionRange=Kie;kt.decorations=R1;kt.outerDecorations=ioe;kt.atomicRanges=Y6;kt.bidiIsolatedRanges=ooe;kt.scrollMargins=aoe;kt.darkTheme=rI;kt.cspNonce=Ct.define({combine:t=>t.length?t[0]:""});kt.contentAttributes=TC;kt.editorAttributes=soe;kt.lineWrapping=kt.contentAttributes.of({class:"cm-lineWrapping"});kt.announce=nn.define();const KJe=4096,_H={};class CS{constructor(e,n,r,s,i,o){this.from=e,this.to=n,this.dir=r,this.isolates=s,this.fresh=i,this.order=o}static update(e,n){if(n.empty&&!e.some(i=>i.fresh))return e;let r=[],s=e.length?e[e.length-1].dir:or.LTR;for(let i=Math.max(0,e.length-10);i<e.length;i++){let o=e[i];o.dir==s&&!n.touchesRange(o.from,o.to)&&r.push(new CS(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return r}}function xH(t,e,n){for(let r=t.state.facet(e),s=r.length-1;s>=0;s--){let i=r[s],o=typeof i=="function"?i(t):i;o&&q4(o,n)}return n}const YJe=xt.mac?"mac":xt.windows?"win":xt.linux?"linux":"key";function XJe(t,e){const n=t.split(/-(?!$)/);let r=n[n.length-1];r=="Space"&&(r=" ");let s,i,o,a;for(let l=0;l<n.length-1;++l){const c=n[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))s=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?a=!0:i=!0;else throw new Error("Unrecognized modifier name: "+c)}return s&&(r="Alt-"+r),i&&(r="Ctrl-"+r),a&&(r="Meta-"+r),o&&(r="Shift-"+r),r}function ww(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const JJe=Bd.default(kt.domEventHandlers({keydown(t,e){return Soe(Eoe(e.state),t,e,"editor")}})),PC=Ct.define({enables:JJe}),wH=new WeakMap;function Eoe(t){let e=t.facet(PC),n=wH.get(e);return n||wH.set(e,n=eZe(e.reduce((r,s)=>r.concat(s),[]))),n}function ZJe(t,e,n){return Soe(Eoe(t.state),e,t,n)}let Ku=null;const QJe=4e3;function eZe(t,e=YJe){let n=Object.create(null),r=Object.create(null),s=(o,a)=>{let l=r[o];if(l==null)r[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},i=(o,a,l,c,u)=>{var d,h;let f=n[o]||(n[o]=Object.create(null)),g=a.split(/ (?!$)/).map(b=>XJe(b,e));for(let b=1;b<g.length;b++){let v=g.slice(0,b).join(" ");s(v,!0),f[v]||(f[v]={preventDefault:!0,stopPropagation:!1,run:[_=>{let E=Ku={view:_,prefix:v,scope:o};return setTimeout(()=>{Ku==E&&(Ku=null)},QJe),!0}]})}let y=g.join(" ");s(y,!1);let m=f[y]||(f[y]={preventDefault:!1,stopPropagation:!1,run:((h=(d=f._any)===null||d===void 0?void 0:d.run)===null||h===void 0?void 0:h.slice())||[]});l&&m.run.push(l),c&&(m.preventDefault=!0),u&&(m.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of a){let u=n[c]||(n[c]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:d}=o;for(let h in u)u[h].run.push(f=>d(f,oI))}let l=o[e]||o.key;if(l)for(let c of a)i(c,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&i(c,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return n}let oI=null;function Soe(t,e,n,r){oI=e;let s=SXe(e),i=ga(s,0),o=Dc(i)==s.length&&s!=" ",a="",l=!1,c=!1,u=!1;Ku&&Ku.view==n&&Ku.scope==r&&(a=Ku.prefix+" ",hoe.indexOf(e.keyCode)<0&&(c=!0,Ku=null));let d=new Set,h=m=>{if(m){for(let b of m.run)if(!d.has(b)&&(d.add(b),b(n)))return m.stopPropagation&&(u=!0),!0;m.preventDefault&&(m.stopPropagation&&(u=!0),c=!0)}return!1},f=t[r],g,y;return f&&(h(f[a+ww(s,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(xt.windows&&e.ctrlKey&&e.altKey)&&(g=Ad[e.keyCode])&&g!=s?(h(f[a+ww(g,e,!0)])||e.shiftKey&&(y=N1[e.keyCode])!=s&&y!=g&&h(f[a+ww(y,e,!1)]))&&(l=!0):o&&e.shiftKey&&h(f[a+ww(s,e,!0)])&&(l=!0),!l&&h(f._any)&&(l=!0)),c&&(l=!0),l&&u&&e.stopPropagation(),oI=null,l}class qv{constructor(e,n,r,s,i){this.className=e,this.left=n,this.top=r,this.width=s,this.height=i}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,r){if(r.empty){let s=e.coordsAtPos(r.head,r.assoc||1);if(!s)return[];let i=koe(e);return[new qv(n,s.left-i.left,s.top-i.top,null,s.bottom-s.top)]}else return tZe(e,n,r)}}function koe(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==or.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function EH(t,e,n,r){let s=t.coordsAtPos(e,n*2);if(!s)return r;let i=t.dom.getBoundingClientRect(),o=(s.top+s.bottom)/2,a=t.posAtCoords({x:i.left+1,y:o}),l=t.posAtCoords({x:i.right-1,y:o});return a==null||l==null?r:{from:Math.max(r.from,Math.min(a,l)),to:Math.min(r.to,Math.max(a,l))}}function tZe(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let r=Math.max(n.from,t.viewport.from),s=Math.min(n.to,t.viewport.to),i=t.textDirection==or.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),l=koe(t),c=o.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),d=a.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),h=a.right-(u?parseInt(u.paddingRight):0),f=tI(t,r),g=tI(t,s),y=f.type==ci.Text?f:null,m=g.type==ci.Text?g:null;if(y&&(t.lineWrapping||f.widgetLineBreaks)&&(y=EH(t,r,1,y)),m&&(t.lineWrapping||g.widgetLineBreaks)&&(m=EH(t,s,-1,m)),y&&m&&y.from==m.from&&y.to==m.to)return v(_(n.from,n.to,y));{let w=y?_(n.from,null,y):E(f,!1),S=m?_(null,n.to,m):E(g,!0),k=[];return(y||f).to<(m||g).from-(y&&m?1:0)||f.widgetLineBreaks>1&&w.bottom+t.defaultLineHeight/2<S.top?k.push(b(d,w.bottom,h,S.top)):w.bottom<S.top&&t.elementAtHeight((w.bottom+S.top)/2).type==ci.Text&&(w.bottom=S.top=(w.bottom+S.top)/2),v(w).concat(k).concat(v(S))}function b(w,S,k,x){return new qv(e,w-l.left,S-l.top,k-w,x-S)}function v({top:w,bottom:S,horizontal:k}){let x=[];for(let I=0;I<k.length;I+=2)x.push(b(k[I],w,k[I+1],S));return x}function _(w,S,k){let x=1e9,I=-1e9,R=[];function C(P,$,ee,J,Z){let M=t.coordsAtPos(P,P==k.to?-2:2),F=t.coordsAtPos(ee,ee==k.from?2:-2);!M||!F||(x=Math.min(M.top,F.top,x),I=Math.max(M.bottom,F.bottom,I),Z==or.LTR?R.push(i&&$?d:M.left,i&&J?h:F.right):R.push(!i&&J?d:F.left,!i&&$?h:M.right))}let N=w??k.from,O=S??k.to;for(let P of t.visibleRanges)if(P.to>N&&P.from<O)for(let $=Math.max(P.from,N),ee=Math.min(P.to,O);;){let J=t.state.doc.lineAt($);for(let Z of t.bidiSpans(J)){let M=Z.from+J.from,F=Z.to+J.from;if(M>=ee)break;F>$&&C(Math.max(M,$),w==null&&M<=N,Math.min(F,ee),S==null&&F>=O,Z.dir)}if($=J.to+1,$>=ee)break}return R.length==0&&C(N,w==null,O,S==null,t.textDirection),{top:x,bottom:I,horizontal:R}}function E(w,S){let k=a.top+(S?w.top:w.bottom);return{top:k,bottom:k,horizontal:[]}}}function nZe(t,e){return t.constructor==e.constructor&&t.eq(e)}class rZe{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(E2)!=e.state.facet(E2)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,r=e.facet(E2);for(;n<r.length&&r[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,r)=>!nZe(n,this.drawn[r]))){let n=this.dom.firstChild,r=0;for(let s of e)s.update&&n&&s.constructor&&this.drawn[r].constructor&&s.update(n,this.drawn[r])?(n=n.nextSibling,r++):this.dom.insertBefore(s.draw(),n);for(;n;){let s=n.nextSibling;n.remove(),n=s}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const E2=Ct.define();function Coe(t){return[ws.define(e=>new rZe(e,t)),E2.of(t)]}const Aoe=!(xt.ios&&xt.webkit&&xt.webkit_version<534),L1=Ct.define({combine(t){return Yf(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function sZe(t={}){return[L1.of(t),iZe,oZe,aZe,toe.of(!0)]}function Toe(t){return t.startState.facet(L1)!=t.state.facet(L1)}const iZe=Coe({above:!0,markers(t){let{state:e}=t,n=e.facet(L1),r=[];for(let s of e.selection.ranges){let i=s==e.selection.main;if(s.empty?!i||Aoe:n.drawRangeCursor){let o=i?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=s.empty?s:st.cursor(s.head,s.head>s.anchor?-1:1);for(let l of qv.forRange(t,o,a))r.push(l)}}return r},update(t,e){t.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=Toe(t);return n&&SH(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){SH(e.state,t)},class:"cm-cursorLayer"});function SH(t,e){e.style.animationDuration=t.facet(L1).cursorBlinkRate+"ms"}const oZe=Coe({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:qv.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||Toe(t)},class:"cm-selectionLayer"}),aI={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};Aoe&&(aI[".cm-line"].caretColor=aI[".cm-content"].caretColor="transparent !important");const aZe=Bd.highest(kt.theme(aI)),Noe=nn.define({map(t,e){return t==null?null:e.mapPos(t)}}),Ob=cs.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((n,r)=>r.is(Noe)?r.value:n,t)}}),lZe=ws.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(Ob);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(Ob)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:t}=this,e=t.state.field(Ob),n=e!=null&&t.coordsAtPos(e);if(!n)return null;let r=t.scrollDOM.getBoundingClientRect();return{left:n.left-r.left+t.scrollDOM.scrollLeft*t.scaleX,top:n.top-r.top+t.scrollDOM.scrollTop*t.scaleY,height:n.bottom-n.top}}drawCursor(t){if(this.cursor){let{scaleX:e,scaleY:n}=this.view;t?(this.cursor.style.left=t.left/e+"px",this.cursor.style.top=t.top/n+"px",this.cursor.style.height=t.height/n+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(Ob)!=t&&this.view.dispatch({effects:Noe.of(t)})}},{eventObservers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function cZe(){return[Ob,lZe]}const kH=ws.fromClass(class{constructor(){this.height=1e3,this.attrs={style:"padding-bottom: 1000px"}}update(t){let{view:e}=t,n=e.viewState.editorHeight-e.defaultLineHeight-e.documentPadding.top-.5;n>=0&&n!=this.height&&(this.height=n,this.attrs={style:`padding-bottom: ${n}px`})}});function uZe(){return[kH,TC.of(t=>{var e;return((e=t.plugin(kH))===null||e===void 0?void 0:e.attrs)||null})]}function dZe(){return fZe}const hZe=_n.line({class:"cm-activeLine"}),fZe=ws.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let r of t.state.selection.ranges){let s=t.lineBlockAt(r.head);s.from>e&&(n.push(hZe.range(s.from)),e=s.from)}return _n.set(n)}},{decorations:t=>t.decorations}),rb="-10000px";class pZe{constructor(e,n,r,s){this.facet=n,this.createTooltipView=r,this.removeTooltipView=s,this.input=e.state.facet(n),this.tooltips=this.input.filter(o=>o);let i=null;this.tooltipViews=this.tooltips.map(o=>i=r(o,i))}update(e,n){var r;let s=e.state.facet(this.facet),i=s.filter(l=>l);if(s===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=n?[]:null;for(let l=0;l<i.length;l++){let c=i[l],u=-1;if(c){for(let d=0;d<this.tooltips.length;d++){let h=this.tooltips[d];h&&h.create==c.create&&(u=d)}if(u<0)o[l]=this.createTooltipView(c,l?o[l-1]:null),a&&(a[l]=!!c.above);else{let d=o[l]=this.tooltipViews[u];a&&(a[l]=n[u]),d.update&&d.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(r=l.destroy)===null||r===void 0||r.call(l));return n&&(a.forEach((l,c)=>n[c]=l),n.length=a.length),this.input=s,this.tooltips=i,this.tooltipViews=o,!0}}function mZe(t={}){return S2.of(t)}function gZe(t){let{win:e}=t;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const S2=Ct.define({combine:t=>{var e,n,r;return{position:xt.ios?"absolute":((e=t.find(s=>s.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(s=>s.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((r=t.find(s=>s.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||gZe}}}),CH=new WeakMap,Poe=ws.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(S2);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new pZe(t,eD,(n,r)=>this.createTooltip(n,r),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,r=t.state.facet(S2);if(r.position!=this.position&&!this.madeAbsolute){this.position=r.position;for(let s of this.manager.tooltipViews)s.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let s of this.manager.tooltipViews)this.container.appendChild(s.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),r=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let s=document.createElement("div");s.className="cm-tooltip-arrow",n.dom.appendChild(s)}return n.dom.style.position=this.position,n.dom.style.top=rb,n.dom.style.left="0px",this.container.insertBefore(n.dom,r),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let r of this.manager.tooltipViews)r.dom.remove(),(t=r.destroy)===null||t===void 0||t.call(r);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:i}=this.manager.tooltipViews[0];if(xt.gecko)n=i.offsetParent!=this.container.ownerDocument.body;else if(i.style.top==rb&&i.style.left=="0px"){let o=i.getBoundingClientRect();n=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(n||this.position=="absolute")if(this.parent){let i=this.parent.getBoundingClientRect();i.width&&i.height&&(t=i.width/this.parent.offsetWidth,e=i.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let r=this.view.scrollDOM.getBoundingClientRect(),s=X6(this.view);return{visible:{left:r.left+s.left,top:r.top+s.top,right:r.right-s.right,bottom:r.bottom-s.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((i,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(i.pos):this.view.coordsAtPos(i.pos)}),size:this.manager.tooltipViews.map(({dom:i})=>i.getBoundingClientRect()),space:this.view.state.facet(S2).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:n,space:r,scaleX:s,scaleY:i}=t,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:u}=c,d=t.pos[a],h=t.size[a];if(!d||l.clip!==!1&&(d.bottom<=Math.max(n.top,r.top)||d.top>=Math.min(n.bottom,r.bottom)||d.right<Math.max(n.left,r.left)-.1||d.left>Math.min(n.right,r.right)+.1)){u.style.top=rb;continue}let f=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,g=f?7:0,y=h.right-h.left,m=(e=CH.get(c))!==null&&e!==void 0?e:h.bottom-h.top,b=c.offset||yZe,v=this.view.textDirection==or.LTR,_=h.width>r.right-r.left?v?r.left:r.right-h.width:v?Math.max(r.left,Math.min(d.left-(f?14:0)+b.x,r.right-y)):Math.min(Math.max(r.left,d.left-y+(f?14:0)-b.x),r.right-y),E=this.above[a];!l.strictSide&&(E?d.top-m-g-b.y<r.top:d.bottom+m+g+b.y>r.bottom)&&E==r.bottom-d.bottom>d.top-r.top&&(E=this.above[a]=!E);let w=(E?d.top-r.top:r.bottom-d.bottom)-g;if(w<m&&c.resize!==!1){if(w<this.view.defaultLineHeight){u.style.top=rb;continue}CH.set(c,m),u.style.height=(m=w)/i+"px"}else u.style.height&&(u.style.height="");let S=E?d.top-m-g-b.y:d.bottom+g+b.y,k=_+y;if(c.overlap!==!0)for(let x of o)x.left<k&&x.right>_&&x.top<S+m&&x.bottom>S&&(S=E?x.top-m-2-g:x.bottom+g+2);if(this.position=="absolute"?(u.style.top=(S-t.parent.top)/i+"px",AH(u,(_-t.parent.left)/s)):(u.style.top=S/i+"px",AH(u,_/s)),f){let x=d.left+(v?b.x:-b.x)-(_+14-7);f.style.left=x/s+"px"}c.overlap!==!0&&o.push({left:_,top:S,right:k,bottom:S+m}),u.classList.toggle("cm-tooltip-above",E),u.classList.toggle("cm-tooltip-below",!E),c.positioned&&c.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=rb}},{eventObservers:{scroll(){this.maybeMeasure()}}});function AH(t,e){let n=parseInt(t.style.left,10);(isNaN(n)||Math.abs(e-n)>1)&&(t.style.left=e+"px")}const bZe=kt.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),yZe={x:0,y:0},eD=Ct.define({enables:[Poe,bZe]});function Ioe(t,e){let n=t.plugin(Poe);if(!n)return null;let r=n.manager.tooltips.indexOf(e);return r<0?null:n.manager.tooltipViews[r]}const TH=Ct.define({combine(t){let e,n;for(let r of t)e=e||r.topContainer,n=n||r.bottomContainer;return{topContainer:e,bottomContainer:n}}});function AS(t,e){let n=t.plugin(Roe),r=n?n.specs.indexOf(e):-1;return r>-1?n.panels[r]:null}const Roe=ws.fromClass(class{constructor(t){this.input=t.state.facet(TS),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(TH);this.top=new Ew(t,!0,e.topContainer),this.bottom=new Ew(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(TH);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Ew(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Ew(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(TS);if(n!=this.input){let r=n.filter(l=>l),s=[],i=[],o=[],a=[];for(let l of r){let c=this.specs.indexOf(l),u;c<0?(u=l(t.view),a.push(u)):(u=this.panels[c],u.update&&u.update(t)),s.push(u),(u.top?i:o).push(u)}this.specs=r,this.panels=s,this.top.sync(i),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let r of this.panels)r.update&&r.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>kt.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});let Ew=class{constructor(e,n,r){this.view=e,this.top=n,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=NH(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=NH(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}};function NH(t){let e=t.nextSibling;return t.remove(),e}const TS=Ct.define({enables:Roe});class su extends kf{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}su.prototype.elementClass="";su.prototype.toDOM=void 0;su.prototype.mapMode=Bs.TrackBefore;su.prototype.startSide=su.prototype.endSide=-1;su.prototype.point=!0;const k2=Ct.define(),vZe=Ct.define(),_Ze={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Sn.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Ey=Ct.define();function xZe(t){return[Loe(),Ey.of(Object.assign(Object.assign({},_Ze),t))]}const PH=Ct.define({combine:t=>t.some(e=>e)});function Loe(t){return[wZe]}const wZe=ws.fromClass(class{constructor(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(Ey).map(e=>new RH(t,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!t.state.facet(PH),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,r=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(r<(n.to-n.from)*.8)}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(PH)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&this.dom.remove();let n=Sn.iter(this.view.state.facet(k2),this.view.viewport.from),r=[],s=this.gutters.map(i=>new EZe(i,this.view.viewport,-this.view.documentPadding.top));for(let i of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(i.type)){let o=!0;for(let a of i.type)if(a.type==ci.Text&&o){lI(n,r,a.from);for(let l of s)l.line(this.view,a,r);o=!1}else if(a.widget)for(let l of s)l.widget(this.view,a)}else if(i.type==ci.Text){lI(n,r,i.from);for(let o of s)o.line(this.view,i,r)}else if(i.widget)for(let o of s)o.widget(this.view,i);for(let i of s)i.finish();t&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(t){let e=t.startState.facet(Ey),n=t.state.facet(Ey),r=t.docChanged||t.heightChanged||t.viewportChanged||!Sn.eq(t.startState.facet(k2),t.state.facet(k2),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let s of this.gutters)s.update(t)&&(r=!0);else{r=!0;let s=[];for(let i of n){let o=e.indexOf(i);o<0?s.push(new RH(this.view,i)):(this.gutters[o].update(t),s.push(this.gutters[o]))}for(let i of this.gutters)i.dom.remove(),s.indexOf(i)<0&&i.destroy();for(let i of s)this.dom.appendChild(i.dom);this.gutters=s}return r}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove()}},{provide:t=>kt.scrollMargins.of(e=>{let n=e.plugin(t);return!n||n.gutters.length==0||!n.fixed?null:e.textDirection==or.LTR?{left:n.dom.offsetWidth*e.scaleX}:{right:n.dom.offsetWidth*e.scaleX}})});function IH(t){return Array.isArray(t)?t:[t]}function lI(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class EZe{constructor(e,n,r){this.gutter=e,this.height=r,this.i=0,this.cursor=Sn.iter(e.markers,n.from)}addElement(e,n,r){let{gutter:s}=this,i=(n.top-this.height)/e.scaleY,o=n.height/e.scaleY;if(this.i==s.elements.length){let a=new Ooe(e,o,i,r);s.elements.push(a),s.dom.appendChild(a.dom)}else s.elements[this.i].update(e,o,i,r);this.height=n.bottom,this.i++}line(e,n,r){let s=[];lI(this.cursor,s,n.from),r.length&&(s=s.concat(r));let i=this.gutter.config.lineMarker(e,n,s);i&&s.unshift(i);let o=this.gutter;s.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,s)}widget(e,n){let r=this.gutter.config.widgetMarker(e,n.widget,n),s=r?[r]:null;for(let i of e.state.facet(vZe)){let o=i(e,n.widget,n);o&&(s||(s=[])).push(o)}s&&this.addElement(e,n,s)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class RH{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in n.domEventHandlers)this.dom.addEventListener(r,s=>{let i=s.target,o;if(i!=this.dom&&this.dom.contains(i)){for(;i.parentNode!=this.dom;)i=i.parentNode;let l=i.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=s.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[r](e,a,s)&&s.preventDefault()});this.markers=IH(n.markers(e)),n.initialSpacer&&(this.spacer=new Ooe(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=IH(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let s=this.config.updateSpacer(this.spacer.markers[0],e);s!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[s])}let r=e.view.viewport;return!Sn.eq(this.markers,n,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Ooe{constructor(e,n,r,s){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,r,s)}update(e,n,r,s){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),SZe(this.markers,s)||this.setMarkers(e,s)}setMarkers(e,n){let r="cm-gutterElement",s=this.dom.firstChild;for(let i=0,o=0;;){let a=o,l=i<n.length?n[i++]:null,c=!1;if(l){let u=l.elementClass;u&&(r+=" "+u);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(l)){a=d,c=!0;break}}else a=this.markers.length;for(;o<a;){let u=this.markers[o++];if(u.toDOM){u.destroy(s);let d=s.nextSibling;s.remove(),s=d}}if(!l)break;l.toDOM&&(c?s=s.nextSibling:this.dom.insertBefore(l.toDOM(e),s)),c&&o++}this.dom.className=r,this.markers=n}destroy(){this.setMarkers(null,[])}}function SZe(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const kZe=Ct.define(),CZe=Ct.define(),dm=Ct.define({combine(t){return Yf(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let r=Object.assign({},e);for(let s in n){let i=r[s],o=n[s];r[s]=i?(a,l,c)=>i(a,l,c)||o(a,l,c):o}return r}})}});class r3 extends su{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function s3(t,e){return t.state.facet(dm).formatNumber(e,t.state)}const AZe=Ey.compute([dm],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(kZe)},lineMarker(e,n,r){return r.some(s=>s.toDOM)?null:new r3(s3(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,r)=>{for(let s of e.state.facet(CZe)){let i=s(e,n,r);if(i)return i}return null},lineMarkerChange:e=>e.startState.facet(dm)!=e.state.facet(dm),initialSpacer(e){return new r3(s3(e,LH(e.state.doc.lines)))},updateSpacer(e,n){let r=s3(n.view,LH(n.view.state.doc.lines));return r==e.number?e:new r3(r)},domEventHandlers:t.facet(dm).domEventHandlers}));function TZe(t={}){return[dm.of(t),Loe(),AZe]}function LH(t){let e=9;for(;e<t;)e=e*10+9;return e}const NZe=new class extends su{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},PZe=k2.compute(["selection"],t=>{let e=[],n=-1;for(let r of t.selection.ranges){let s=t.doc.lineAt(r.head).from;s>n&&(n=s,e.push(NZe.range(s)))}return Sn.of(e)});function IZe(){return PZe}const RZe=1024;let LZe=0;class Oo{constructor(e,n){this.from=e,this.to=n}}class on{constructor(e={}){this.id=LZe++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Oi.match(e)),n=>{let r=e(n);return r===void 0?null:[this,r]}}}on.closedBy=new on({deserialize:t=>t.split(" ")});on.openedBy=new on({deserialize:t=>t.split(" ")});on.group=new on({deserialize:t=>t.split(" ")});on.isolate=new on({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});on.contextHash=new on({perNode:!0});on.lookAhead=new on({perNode:!0});on.mounted=new on({perNode:!0});class O1{constructor(e,n,r){this.tree=e,this.overlay=n,this.parser=r}static get(e){return e&&e.props&&e.props[on.mounted.id]}}const OZe=Object.create(null);class Oi{constructor(e,n,r,s=0){this.name=e,this.props=n,this.id=r,this.flags=s}static define(e){let n=e.props&&e.props.length?Object.create(null):OZe,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),s=new Oi(e.name||"",n,e.id,r);if(e.props){for(let i of e.props)if(Array.isArray(i)||(i=i(s)),i){if(i[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[i[0].id]=i[1]}}return s}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(on.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let r in e)for(let s of r.split(" "))n[s]=e[r];return r=>{for(let s=r.prop(on.group),i=-1;i<(s?s.length:0);i++){let o=n[i<0?r.name:s[i]];if(o)return o}}}}Oi.none=new Oi("",Object.create(null),0,8);class Doe{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let r of this.types){let s=null;for(let i of e){let o=i(r);o&&(s||(s=Object.assign({},r.props)),s[o[0].id]=o[1])}n.push(s?new Oi(r.name,s,r.id,r.flags):r)}return new Doe(n)}}const Sw=new WeakMap,OH=new WeakMap;var hr;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(hr||(hr={}));class Gr{constructor(e,n,r,s,i){if(this.type=e,this.children=n,this.positions=r,this.length=s,this.props=null,i&&i.length){this.props=Object.create(null);for(let[o,a]of i)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=O1.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let r of this.children){let s=r.toString();s&&(n&&(n+=","),n+=s)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new NS(this.topNode,e)}cursorAt(e,n=0,r=0){let s=Sw.get(this)||this.topNode,i=new NS(s);return i.moveTo(e,n),Sw.set(this,i._tree),i}get topNode(){return new zs(this,0,0,null)}resolve(e,n=0){let r=D1(Sw.get(this)||this.topNode,e,n,!1);return Sw.set(this,r),r}resolveInner(e,n=0){let r=D1(OH.get(this)||this.topNode,e,n,!0);return OH.set(this,r),r}resolveStack(e,n=0){return jZe(this,e,n)}iterate(e){let{enter:n,leave:r,from:s=0,to:i=this.length}=e,o=e.mode||0,a=(o&hr.IncludeAnonymous)>0;for(let l=this.cursor(o|hr.IncludeAnonymous);;){let c=!1;if(l.from<=i&&l.to>=s&&(!a&&l.type.isAnonymous||n(l)!==!1)){if(l.firstChild())continue;c=!0}for(;c&&r&&(a||!l.type.isAnonymous)&&r(l),!l.nextSibling();){if(!l.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:rD(Oi.none,this.children,this.positions,0,this.children.length,0,this.length,(n,r,s)=>new Gr(this.type,n,r,s,this.propValues),e.makeTree||((n,r,s)=>new Gr(Oi.none,n,r,s)))}static build(e){return FZe(e)}}Gr.empty=new Gr(Oi.none,[],[],0);class tD{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new tD(this.buffer,this.index)}}class Nd{constructor(e,n,r){this.buffer=e,this.length=n,this.set=r}get type(){return Oi.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],r=this.buffer[e+3],s=this.set.types[n],i=s.name;if(/\W/.test(i)&&!s.isError&&(i=JSON.stringify(i)),e+=4,r==e)return i;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return i+"("+o.join(",")+")"}findChild(e,n,r,s,i){let{buffer:o}=this,a=-1;for(let l=e;l!=n&&!(Moe(i,s,o[l+1],o[l+2])&&(a=l,r>0));l=o[l+3]);return a}slice(e,n,r){let s=this.buffer,i=new Uint16Array(n-e),o=0;for(let a=e,l=0;a<n;){i[l++]=s[a++],i[l++]=s[a++]-r;let c=i[l++]=s[a++]-r;i[l++]=s[a++]-e,o=Math.max(o,c)}return new Nd(i,o,this.set)}}function Moe(t,e,n,r){switch(t){case-2:return n<e;case-1:return r>=e&&n<e;case 0:return n<e&&r>e;case 1:return n<=e&&r>e;case 2:return r>e;case 4:return!0}}function D1(t,e,n,r){for(var s;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!r&&t instanceof zs&&t.index<0?null:t.parent;if(!o)return t;t=o}let i=r?0:hr.IgnoreOverlays;if(r)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof zs&&o.index<0&&((s=a.enter(e,n,i))===null||s===void 0?void 0:s.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,i);if(!o)return t;t=o}}class joe{cursor(e=0){return new NS(this,e)}getChild(e,n=null,r=null){let s=DH(this,e,n,r);return s.length?s[0]:null}getChildren(e,n=null,r=null){return DH(this,e,n,r)}resolve(e,n=0){return D1(this,e,n,!1)}resolveInner(e,n=0){return D1(this,e,n,!0)}matchContext(e){return cI(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),r=this;for(;n;){let s=n.lastChild;if(!s||s.to!=n.to)break;s.type.isError&&s.from==s.to?(r=n,n=s.prevSibling):n=s}return r}get node(){return this}get next(){return this.parent}}class zs extends joe{constructor(e,n,r,s){super(),this._tree=e,this.from=n,this.index=r,this._parent=s}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,r,s,i=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,c=n>0?a.length:-1;e!=c;e+=n){let u=a[e],d=l[e]+o.from;if(Moe(s,r,d,d+u.length)){if(u instanceof Nd){if(i&hr.ExcludeBuffers)continue;let h=u.findChild(0,u.buffer.length,n,r-d,s);if(h>-1)return new Il(new DZe(o,u,e,d),null,h)}else if(i&hr.IncludeAnonymous||!u.type.isAnonymous||nD(u)){let h;if(!(i&hr.IgnoreMounts)&&(h=O1.get(u))&&!h.overlay)return new zs(h.tree,d,e,o);let f=new zs(u,d,e,o);return i&hr.IncludeAnonymous||!f.type.isAnonymous?f:f.nextChild(n<0?u.children.length-1:0,n,r,s)}}}if(i&hr.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,r=0){let s;if(!(r&hr.IgnoreOverlays)&&(s=O1.get(this._tree))&&s.overlay){let i=e-this.from;for(let{from:o,to:a}of s.overlay)if((n>0?o<=i:o<i)&&(n<0?a>=i:a>i))return new zs(s.tree,s.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function DH(t,e,n,r){let s=t.cursor(),i=[];if(!s.firstChild())return i;if(n!=null){for(let o=!1;!o;)if(o=s.type.is(n),!s.nextSibling())return i}for(;;){if(r!=null&&s.type.is(r))return i;if(s.type.is(e)&&i.push(s.node),!s.nextSibling())return r==null?i:[]}}function cI(t,e,n=e.length-1){for(let r=t;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[n]&&e[n]!=r.name)return!1;n--}}return!0}class DZe{constructor(e,n,r,s){this.parent=e,this.buffer=n,this.index=r,this.start=s}}class Il extends joe{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,r){super(),this.context=e,this._parent=n,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,n,r){let{buffer:s}=this.context,i=s.findChild(this.index+4,s.buffer[this.index+3],e,n-this.context.start,r);return i<0?null:new Il(this.context,this,i)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,r=0){if(r&hr.ExcludeBuffers)return null;let{buffer:s}=this.context,i=s.findChild(this.index+4,s.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return i<0?null:new Il(this.context,this,i)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Il(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new Il(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:r}=this.context,s=this.index+4,i=r.buffer[this.index+3];if(i>s){let o=r.buffer[this.index+1];e.push(r.slice(s,i,o)),n.push(0)}return new Gr(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Foe(t){if(!t.length)return null;let e=0,n=t[0];for(let i=1;i<t.length;i++){let o=t[i];(o.from>n.from||o.to<n.to)&&(n=o,e=i)}let r=n instanceof zs&&n.index<0?null:n.parent,s=t.slice();return r?s[e]=r:s.splice(e,1),new MZe(s,n)}class MZe{constructor(e,n){this.heads=e,this.node=n}get next(){return Foe(this.heads)}}function jZe(t,e,n){let r=t.resolveInner(e,n),s=null;for(let i=r instanceof zs?r:r.context.parent;i;i=i.parent)if(i.index<0){let o=i.parent;(s||(s=[r])).push(o.resolve(e,n)),i=o}else{let o=O1.get(i.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new zs(o.tree,o.overlay[0].from+i.from,-1,i);(s||(s=[r])).push(D1(a,e,n,!1))}}return s?Foe(s):r}class NS{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof zs)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:r,buffer:s}=this.buffer;return this.type=n||s.set.types[s.buffer[e]],this.from=r+s.buffer[e+1],this.to=r+s.buffer[e+2],!0}yield(e){return e?e instanceof zs?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,r,this.mode));let{buffer:s}=this.buffer,i=s.findChild(this.index+4,s.buffer[this.index+3],e,n-this.buffer.start,r);return i<0?!1:(this.stack.push(this.index),this.yieldBuf(i))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,r=this.mode){return this.buffer?r&hr.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&hr.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&hr.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,r=this.stack.length-1;if(e<0){let s=r<0?0:this.stack[r]+4;if(this.index!=s)return this.yieldBuf(n.findChild(s,this.index,-1,0,4))}else{let s=n.buffer[this.index+3];if(s<(r<0?n.buffer.length:n.buffer[this.stack[r]+3]))return this.yieldBuf(s)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,r,{buffer:s}=this;if(s){if(e>0){if(this.index<s.buffer.buffer.length)return!1}else for(let i=0;i<this.index;i++)if(s.buffer.buffer[i+3]<this.index)return!1;({index:n,parent:r}=s)}else({index:n,_parent:r}=this._tree);for(;r;{index:n,_parent:r}=r)if(n>-1)for(let i=n+e,o=e<0?-1:r._tree.children.length;i!=o;i+=e){let a=r._tree.children[i];if(this.mode&hr.IncludeAnonymous||a instanceof Nd||!a.type.isAnonymous||nD(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,r=0;if(e&&e.context==this.buffer)e:for(let s=this.index,i=this.stack.length;i>=0;){for(let o=e;o;o=o._parent)if(o.index==s){if(s==this.index)return o;n=o,r=i+1;break e}s=this.stack[--i]}for(let s=r;s<this.stack.length;s++)n=new Il(this.buffer,n,this.stack[s]);return this.bufferNode=new Il(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let r=0;;){let s=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(s=!0)}for(;;){if(s&&n&&n(this),s=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,s=!0}}}matchContext(e){if(!this.buffer)return cI(this.node.parent,e);let{buffer:n}=this.buffer,{types:r}=n.set;for(let s=e.length-1,i=this.stack.length-1;s>=0;i--){if(i<0)return cI(this._tree,e,s);let o=r[n.buffer[this.stack[i]]];if(!o.isAnonymous){if(e[s]&&e[s]!=o.name)return!1;s--}}return!0}}function nD(t){return t.children.some(e=>e instanceof Nd||!e.type.isAnonymous||nD(e))}function FZe(t){var e;let{buffer:n,nodeSet:r,maxBufferLength:s=RZe,reused:i=[],minRepeatType:o=r.types.length}=t,a=Array.isArray(n)?new tD(n,n.length):n,l=r.types,c=0,u=0;function d(w,S,k,x,I,R){let{id:C,start:N,end:O,size:P}=a,$=u,ee=c;for(;P<0;)if(a.next(),P==-1){let G=i[C];k.push(G),x.push(N-w);return}else if(P==-3){c=C;return}else if(P==-4){u=C;return}else throw new RangeError(`Unrecognized record size: ${P}`);let J=l[C],Z,M,F=N-w;if(O-N<=s&&(M=m(a.pos-S,I))){let G=new Uint16Array(M.size-M.skip),D=a.pos-M.size,j=G.length;for(;a.pos>D;)j=b(M.start,G,j);Z=new Nd(G,O-M.start,r),F=M.start-w}else{let G=a.pos-P;a.next();let D=[],j=[],V=C>=o?C:-1,W=0,re=O;for(;a.pos>G;)V>=0&&a.id==V&&a.size>=0?(a.end<=re-s&&(g(D,j,N,W,a.end,re,V,$,ee),W=D.length,re=a.end),a.next()):R>2500?h(N,G,D,j):d(N,G,D,j,V,R+1);if(V>=0&&W>0&&W<D.length&&g(D,j,N,W,N,re,V,$,ee),D.reverse(),j.reverse(),V>-1&&W>0){let te=f(J,ee);Z=rD(J,D,j,0,D.length,0,O-N,te,te)}else Z=y(J,D,j,O-N,$-O,ee)}k.push(Z),x.push(F)}function h(w,S,k,x){let I=[],R=0,C=-1;for(;a.pos>S;){let{id:N,start:O,end:P,size:$}=a;if($>4)a.next();else{if(C>-1&&O<C)break;C<0&&(C=P-s),I.push(N,O,P),R++,a.next()}}if(R){let N=new Uint16Array(R*4),O=I[I.length-2];for(let P=I.length-3,$=0;P>=0;P-=3)N[$++]=I[P],N[$++]=I[P+1]-O,N[$++]=I[P+2]-O,N[$++]=$;k.push(new Nd(N,I[2]-O,r)),x.push(O-w)}}function f(w,S){return(k,x,I)=>{let R=0,C=k.length-1,N,O;if(C>=0&&(N=k[C])instanceof Gr){if(!C&&N.type==w&&N.length==I)return N;(O=N.prop(on.lookAhead))&&(R=x[C]+N.length+O)}return y(w,k,x,I,R,S)}}function g(w,S,k,x,I,R,C,N,O){let P=[],$=[];for(;w.length>x;)P.push(w.pop()),$.push(S.pop()+k-I);w.push(y(r.types[C],P,$,R-I,N-R,O)),S.push(I-k)}function y(w,S,k,x,I,R,C){if(R){let N=[on.contextHash,R];C=C?[N].concat(C):[N]}if(I>25){let N=[on.lookAhead,I];C=C?[N].concat(C):[N]}return new Gr(w,S,k,x,C)}function m(w,S){let k=a.fork(),x=0,I=0,R=0,C=k.end-s,N={size:0,start:0,skip:0};e:for(let O=k.pos-w;k.pos>O;){let P=k.size;if(k.id==S&&P>=0){N.size=x,N.start=I,N.skip=R,R+=4,x+=4,k.next();continue}let $=k.pos-P;if(P<0||$<O||k.start<C)break;let ee=k.id>=o?4:0,J=k.start;for(k.next();k.pos>$;){if(k.size<0)if(k.size==-3)ee+=4;else break e;else k.id>=o&&(ee+=4);k.next()}I=J,x+=P,R+=ee}return(S<0||x==w)&&(N.size=x,N.start=I,N.skip=R),N.size>4?N:void 0}function b(w,S,k){let{id:x,start:I,end:R,size:C}=a;if(a.next(),C>=0&&x<o){let N=k;if(C>4){let O=a.pos-(C-4);for(;a.pos>O;)k=b(w,S,k)}S[--k]=N,S[--k]=R-w,S[--k]=I-w,S[--k]=x}else C==-3?c=x:C==-4&&(u=x);return k}let v=[],_=[];for(;a.pos>0;)d(t.start||0,t.bufferStart||0,v,_,-1,0);let E=(e=t.length)!==null&&e!==void 0?e:v.length?_[0]+v[0].length:0;return new Gr(l[t.topID],v.reverse(),_.reverse(),E)}const MH=new WeakMap;function C2(t,e){if(!t.isAnonymous||e instanceof Nd||e.type!=t)return 1;let n=MH.get(e);if(n==null){n=1;for(let r of e.children){if(r.type!=t||!(r instanceof Gr)){n=1;break}n+=C2(t,r)}MH.set(e,n)}return n}function rD(t,e,n,r,s,i,o,a,l){let c=0;for(let g=r;g<s;g++)c+=C2(t,e[g]);let u=Math.ceil(c*1.5/8),d=[],h=[];function f(g,y,m,b,v){for(let _=m;_<b;){let E=_,w=y[_],S=C2(t,g[_]);for(_++;_<b;_++){let k=C2(t,g[_]);if(S+k>=u)break;S+=k}if(_==E+1){if(S>u){let k=g[E];f(k.children,k.positions,0,k.children.length,y[E]+v);continue}d.push(g[E])}else{let k=y[_-1]+g[_-1].length-w;d.push(rD(t,g,y,E,_,w,k,null,l))}h.push(w+v-i)}}return f(e,n,r,s,0),(a||l)(d,h,o)}class fft{constructor(){this.map=new WeakMap}setBuffer(e,n,r){let s=this.map.get(e);s||this.map.set(e,s=new Map),s.set(n,r)}getBuffer(e,n){let r=this.map.get(e);return r&&r.get(n)}set(e,n){e instanceof Il?this.setBuffer(e.context.buffer,e.index,n):e instanceof zs&&this.map.set(e.tree,n)}get(e){return e instanceof Il?this.getBuffer(e.context.buffer,e.index):e instanceof zs?this.map.get(e.tree):void 0}cursorSet(e,n){e.buffer?this.setBuffer(e.buffer.buffer,e.index,n):this.map.set(e.tree,n)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class qc{constructor(e,n,r,s,i=!1,o=!1){this.from=e,this.to=n,this.tree=r,this.offset=s,this.open=(i?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],r=!1){let s=[new qc(0,e.length,e,0,!1,r)];for(let i of n)i.to>e.length&&s.push(i);return s}static applyChanges(e,n,r=128){if(!n.length)return e;let s=[],i=1,o=e.length?e[0]:null;for(let a=0,l=0,c=0;;a++){let u=a<n.length?n[a]:null,d=u?u.fromA:1e9;if(d-l>=r)for(;o&&o.from<d;){let h=o;if(l>=h.from||d<=h.to||c){let f=Math.max(h.from,l)-c,g=Math.min(h.to,d)-c;h=f>=g?null:new qc(f,g,h.tree,h.offset+c,a>0,!!u)}if(h&&s.push(h),o.to>d)break;o=i<e.length?e[i++]:null}if(!u)break;l=u.toA,c=u.toA-u.toB}return s}}class BZe{startParse(e,n,r){return typeof e=="string"&&(e=new UZe(e)),r=r?r.length?r.map(s=>new Oo(s.from,s.to)):[new Oo(0,0)]:[new Oo(0,e.length)],this.createParse(e,n||[],r)}parse(e,n,r){let s=this.startParse(e,n,r);for(;;){let i=s.advance();if(i)return i}}}class UZe{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}function pft(t){return(e,n,r,s)=>new HZe(e,t,n,r,s)}class jH{constructor(e,n,r,s,i){this.parser=e,this.parse=n,this.overlay=r,this.target=s,this.from=i}}function FH(t){if(!t.length||t.some(e=>e.from>=e.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(t))}class $Ze{constructor(e,n,r,s,i,o,a){this.parser=e,this.predicate=n,this.mounts=r,this.index=s,this.start=i,this.target=o,this.prev=a,this.depth=0,this.ranges=[]}}const uI=new on({perNode:!0});class HZe{constructor(e,n,r,s,i){this.nest=n,this.input=r,this.fragments=s,this.ranges=i,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let r=this.baseParse.advance();if(!r)return null;if(this.baseParse=null,this.baseTree=r,this.startInner(),this.stoppedAt!=null)for(let s of this.inner)s.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let r=this.baseTree;return this.stoppedAt!=null&&(r=new Gr(r.type,r.children,r.positions,r.length,r.propValues.concat([[uI,this.stoppedAt]]))),r}let e=this.inner[this.innerDone],n=e.parse.advance();if(n){this.innerDone++;let r=Object.assign(Object.create(null),e.target.props);r[on.mounted.id]=new O1(n,e.overlay,e.parser),e.target.props=r}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let n=this.innerDone;n<this.inner.length;n++)this.inner[n].from<e&&(e=Math.min(e,this.inner[n].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let n=this.innerDone;n<this.inner.length;n++)this.inner[n].parse.stopAt(e)}startInner(){let e=new WZe(this.fragments),n=null,r=null,s=new NS(new zs(this.baseTree,this.ranges[0].from,0,null),hr.IncludeAnonymous|hr.IgnoreMounts);e:for(let i,o;;){let a=!0,l;if(this.stoppedAt!=null&&s.from>=this.stoppedAt)a=!1;else if(e.hasNode(s)){if(n){let c=n.mounts.find(u=>u.frag.from<=s.from&&u.frag.to>=s.to&&u.mount.overlay);if(c)for(let u of c.mount.overlay){let d=u.from+c.pos,h=u.to+c.pos;d>=s.from&&h<=s.to&&!n.ranges.some(f=>f.from<h&&f.to>d)&&n.ranges.push({from:d,to:h})}}a=!1}else if(r&&(o=zZe(r.ranges,s.from,s.to)))a=o!=2;else if(!s.type.isAnonymous&&(i=this.nest(s,this.input))&&(s.from<s.to||!i.overlay)){s.tree||VZe(s);let c=e.findMounts(s.from,i.parser);if(typeof i.overlay=="function")n=new $Ze(i.parser,i.overlay,c,this.inner.length,s.from,s.tree,n);else{let u=$H(this.ranges,i.overlay||(s.from<s.to?[new Oo(s.from,s.to)]:[]));u.length&&FH(u),(u.length||!i.overlay)&&this.inner.push(new jH(i.parser,u.length?i.parser.startParse(this.input,HH(c,u),u):i.parser.startParse(""),i.overlay?i.overlay.map(d=>new Oo(d.from-s.from,d.to-s.from)):null,s.tree,u.length?u[0].from:s.from)),i.overlay?u.length&&(r={ranges:u,depth:0,prev:r}):a=!1}}else if(n&&(l=n.predicate(s))&&(l===!0&&(l=new Oo(s.from,s.to)),l.from<l.to)){let c=n.ranges.length-1;c>=0&&n.ranges[c].to==l.from?n.ranges[c]={from:n.ranges[c].from,to:l.to}:n.ranges.push(l)}if(a&&s.firstChild())n&&n.depth++,r&&r.depth++;else for(;!s.nextSibling();){if(!s.parent())break e;if(n&&!--n.depth){let c=$H(this.ranges,n.ranges);c.length&&(FH(c),this.inner.splice(n.index,0,new jH(n.parser,n.parser.startParse(this.input,HH(n.mounts,c),c),n.ranges.map(u=>new Oo(u.from-n.start,u.to-n.start)),n.target,c[0].from))),n=n.prev}r&&!--r.depth&&(r=r.prev)}}}}function zZe(t,e,n){for(let r of t){if(r.from>=n)break;if(r.to>e)return r.from<=e&&r.to>=n?2:1}return 0}function BH(t,e,n,r,s,i){if(e<n){let o=t.buffer[e+1];r.push(t.slice(e,n,o)),s.push(o-i)}}function VZe(t){let{node:e}=t,n=[],r=e.context.buffer;do n.push(t.index),t.parent();while(!t.tree);let s=t.tree,i=s.children.indexOf(r),o=s.children[i],a=o.buffer,l=[i];function c(u,d,h,f,g,y){let m=n[y],b=[],v=[];BH(o,u,m,b,v,f);let _=a[m+1],E=a[m+2];l.push(b.length);let w=y?c(m+4,a[m+3],o.set.types[a[m]],_,E-_,y-1):e.toTree();return b.push(w),v.push(_-f),BH(o,a[m+3],d,b,v,f),new Gr(h,b,v,g)}s.children[i]=c(0,a.length,Oi.none,0,o.length,n.length-1);for(let u of l){let d=t.tree.children[u],h=t.tree.positions[u];t.yield(new zs(d,h+t.from,u,t._tree))}}class UH{constructor(e,n){this.offset=n,this.done=!1,this.cursor=e.cursor(hr.IncludeAnonymous|hr.IgnoreMounts)}moveTo(e){let{cursor:n}=this,r=e-this.offset;for(;!this.done&&n.from<r;)n.to>=e&&n.enter(r,1,hr.IgnoreOverlays|hr.ExcludeBuffers)||n.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let n=this.cursor.tree;;){if(n==e.tree)return!0;if(n.children.length&&n.positions[0]==0&&n.children[0]instanceof Gr)n=n.children[0];else break}return!1}}class WZe{constructor(e){var n;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let r=this.curFrag=e[0];this.curTo=(n=r.tree.prop(uI))!==null&&n!==void 0?n:r.to,this.inner=new UH(r.tree,-r.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let n=this.curFrag=this.fragments[this.fragI];this.curTo=(e=n.tree.prop(uI))!==null&&e!==void 0?e:n.to,this.inner=new UH(n.tree,-n.offset)}}findMounts(e,n){var r;let s=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let i=this.inner.cursor.node;i;i=i.parent){let o=(r=i.tree)===null||r===void 0?void 0:r.prop(on.mounted);if(o&&o.parser==n)for(let a=this.fragI;a<this.fragments.length;a++){let l=this.fragments[a];if(l.from>=i.to)break;l.tree==this.curFrag.tree&&s.push({frag:l,pos:i.from-l.offset,mount:o})}}}return s}}function $H(t,e){let n=null,r=e;for(let s=1,i=0;s<t.length;s++){let o=t[s-1].to,a=t[s].from;for(;i<r.length;i++){let l=r[i];if(l.from>=a)break;l.to<=o||(n||(r=n=e.slice()),l.from<o?(n[i]=new Oo(l.from,o),l.to>a&&n.splice(i+1,0,new Oo(a,l.to))):l.to>a?n[i--]=new Oo(a,l.to):n.splice(i--,1))}}return r}function GZe(t,e,n,r){let s=0,i=0,o=!1,a=!1,l=-1e9,c=[];for(;;){let u=s==t.length?1e9:o?t[s].to:t[s].from,d=i==e.length?1e9:a?e[i].to:e[i].from;if(o!=a){let h=Math.max(l,n),f=Math.min(u,d,r);h<f&&c.push(new Oo(h,f))}if(l=Math.min(u,d),l==1e9)break;u==l&&(o?(o=!1,s++):o=!0),d==l&&(a?(a=!1,i++):a=!0)}return c}function HH(t,e){let n=[];for(let{pos:r,mount:s,frag:i}of t){let o=r+(s.overlay?s.overlay[0].from:0),a=o+s.tree.length,l=Math.max(i.from,o),c=Math.min(i.to,a);if(s.overlay){let u=s.overlay.map(h=>new Oo(h.from+r,h.to+r)),d=GZe(e,u,l,c);for(let h=0,f=l;;h++){let g=h==d.length,y=g?c:d[h].from;if(y>f&&n.push(new qc(f,y,s.tree,-o,i.from>=f||i.openStart,i.to<=y||i.openEnd)),g)break;f=d[h].to}}else n.push(new qc(l,c,s.tree,-o,i.from>=o||i.openStart,i.to<=a||i.openEnd))}return n}let qZe=0;class Io{constructor(e,n,r,s){this.name=e,this.set=n,this.base=r,this.modified=s,this.id=qZe++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let r=typeof e=="string"?e:"?";if(e instanceof Io&&(n=e),n?.base)throw new Error("Can not derive from a modified tag");let s=new Io(r,[],null,[]);if(s.set.push(s),n)for(let i of n.set)s.set.push(i);return s}static defineModifier(e){let n=new PS(e);return r=>r.modified.indexOf(n)>-1?r:PS.get(r.base||r,r.modified.concat(n).sort((s,i)=>s.id-i.id))}}let KZe=0;class PS{constructor(e){this.name=e,this.instances=[],this.id=KZe++}static get(e,n){if(!n.length)return e;let r=n[0].instances.find(a=>a.base==e&&YZe(n,a.modified));if(r)return r;let s=[],i=new Io(e.name,s,e,n);for(let a of n)a.instances.push(i);let o=XZe(n);for(let a of e.set)if(!a.modified.length)for(let l of o)s.push(PS.get(a,l));return i}}function YZe(t,e){return t.length==e.length&&t.every((n,r)=>n==e[r])}function XZe(t){let e=[[]];for(let n=0;n<t.length;n++)for(let r=0,s=e.length;r<s;r++)e.push(e[r].concat(t[n]));return e.sort((n,r)=>r.length-n.length)}function JZe(t){let e=Object.create(null);for(let n in t){let r=t[n];Array.isArray(r)||(r=[r]);for(let s of n.split(" "))if(s){let i=[],o=2,a=s;for(let d=0;;){if(a=="..."&&d>0&&d+3==s.length){o=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!h)throw new RangeError("Invalid path: "+s);if(i.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),d+=h[0].length,d==s.length)break;let f=s[d++];if(d==s.length&&f=="!"){o=0;break}if(f!="/")throw new RangeError("Invalid path: "+s);a=s.slice(d)}let l=i.length-1,c=i[l];if(!c)throw new RangeError("Invalid path: "+s);let u=new IS(r,o,l>0?i.slice(0,l):null);e[c]=u.sort(e[c])}}return Boe.add(e)}const Boe=new on;class IS{constructor(e,n,r,s){this.tags=e,this.mode=n,this.context=r,this.next=s}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}IS.empty=new IS([],2,null);function Uoe(t,e){let n=Object.create(null);for(let i of t)if(!Array.isArray(i.tag))n[i.tag.id]=i.class;else for(let o of i.tag)n[o.id]=i.class;let{scope:r,all:s=null}=e||{};return{style:i=>{let o=s;for(let a of i)for(let l of a.set){let c=n[l.id];if(c){o=o?o+" "+c:c;break}}return o},scope:r}}function ZZe(t,e){let n=null;for(let r of t){let s=r.style(e);s&&(n=n?n+" "+s:s)}return n}function QZe(t,e,n,r=0,s=t.length){let i=new eQe(r,Array.isArray(e)?e:[e],n);i.highlightRange(t.cursor(),r,s,"",i.highlighters),i.flush(s)}class eQe{constructor(e,n,r){this.at=e,this.highlighters=n,this.span=r,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,r,s,i){let{type:o,from:a,to:l}=e;if(a>=r||l<=n)return;o.isTop&&(i=this.highlighters.filter(f=>!f.scope||f.scope(o)));let c=s,u=tQe(e)||IS.empty,d=ZZe(i,u.tags);if(d&&(c&&(c+=" "),c+=d,u.mode==1&&(s+=(s?" ":"")+d)),this.startSpan(Math.max(n,a),c),u.opaque)return;let h=e.tree&&e.tree.prop(on.mounted);if(h&&h.overlay){let f=e.node.enter(h.overlay[0].from+a,1),g=this.highlighters.filter(m=>!m.scope||m.scope(h.tree.type)),y=e.firstChild();for(let m=0,b=a;;m++){let v=m<h.overlay.length?h.overlay[m]:null,_=v?v.from+a:l,E=Math.max(n,b),w=Math.min(r,_);if(E<w&&y)for(;e.from<w&&(this.highlightRange(e,E,w,s,i),this.startSpan(Math.min(w,e.to),c),!(e.to>=_||!e.nextSibling())););if(!v||_>r)break;b=v.to+a,b>n&&(this.highlightRange(f.cursor(),Math.max(n,v.from+a),Math.min(r,b),"",g),this.startSpan(Math.min(r,b),c))}y&&e.parent()}else if(e.firstChild()){h&&(s="");do if(!(e.to<=n)){if(e.from>=r)break;this.highlightRange(e,n,r,s,i),this.startSpan(Math.min(r,e.to),c)}while(e.nextSibling());e.parent()}}}function tQe(t){let e=t.type.prop(Boe);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const gt=Io.define,kw=gt(),Wu=gt(),zH=gt(Wu),VH=gt(Wu),Gu=gt(),Cw=gt(Gu),i3=gt(Gu),fl=gt(),lh=gt(fl),nl=gt(),rl=gt(),dI=gt(),sb=gt(dI),Aw=gt(),Ge={comment:kw,lineComment:gt(kw),blockComment:gt(kw),docComment:gt(kw),name:Wu,variableName:gt(Wu),typeName:zH,tagName:gt(zH),propertyName:VH,attributeName:gt(VH),className:gt(Wu),labelName:gt(Wu),namespace:gt(Wu),macroName:gt(Wu),literal:Gu,string:Cw,docString:gt(Cw),character:gt(Cw),attributeValue:gt(Cw),number:i3,integer:gt(i3),float:gt(i3),bool:gt(Gu),regexp:gt(Gu),escape:gt(Gu),color:gt(Gu),url:gt(Gu),keyword:nl,self:gt(nl),null:gt(nl),atom:gt(nl),unit:gt(nl),modifier:gt(nl),operatorKeyword:gt(nl),controlKeyword:gt(nl),definitionKeyword:gt(nl),moduleKeyword:gt(nl),operator:rl,derefOperator:gt(rl),arithmeticOperator:gt(rl),logicOperator:gt(rl),bitwiseOperator:gt(rl),compareOperator:gt(rl),updateOperator:gt(rl),definitionOperator:gt(rl),typeOperator:gt(rl),controlOperator:gt(rl),punctuation:dI,separator:gt(dI),bracket:sb,angleBracket:gt(sb),squareBracket:gt(sb),paren:gt(sb),brace:gt(sb),content:fl,heading:lh,heading1:gt(lh),heading2:gt(lh),heading3:gt(lh),heading4:gt(lh),heading5:gt(lh),heading6:gt(lh),contentSeparator:gt(fl),list:gt(fl),quote:gt(fl),emphasis:gt(fl),strong:gt(fl),link:gt(fl),monospace:gt(fl),strikethrough:gt(fl),inserted:gt(),deleted:gt(),changed:gt(),invalid:gt(),meta:Aw,documentMeta:gt(Aw),annotation:gt(Aw),processingInstruction:gt(Aw),definition:Io.defineModifier("definition"),constant:Io.defineModifier("constant"),function:Io.defineModifier("function"),standard:Io.defineModifier("standard"),local:Io.defineModifier("local"),special:Io.defineModifier("special")};for(let t in Ge){let e=Ge[t];e instanceof Io&&(e.name=t)}Uoe([{tag:Ge.link,class:"tok-link"},{tag:Ge.heading,class:"tok-heading"},{tag:Ge.emphasis,class:"tok-emphasis"},{tag:Ge.strong,class:"tok-strong"},{tag:Ge.keyword,class:"tok-keyword"},{tag:Ge.atom,class:"tok-atom"},{tag:Ge.bool,class:"tok-bool"},{tag:Ge.url,class:"tok-url"},{tag:Ge.labelName,class:"tok-labelName"},{tag:Ge.inserted,class:"tok-inserted"},{tag:Ge.deleted,class:"tok-deleted"},{tag:Ge.literal,class:"tok-literal"},{tag:Ge.string,class:"tok-string"},{tag:Ge.number,class:"tok-number"},{tag:[Ge.regexp,Ge.escape,Ge.special(Ge.string)],class:"tok-string2"},{tag:Ge.variableName,class:"tok-variableName"},{tag:Ge.local(Ge.variableName),class:"tok-variableName tok-local"},{tag:Ge.definition(Ge.variableName),class:"tok-variableName tok-definition"},{tag:Ge.special(Ge.variableName),class:"tok-variableName2"},{tag:Ge.definition(Ge.propertyName),class:"tok-propertyName tok-definition"},{tag:Ge.typeName,class:"tok-typeName"},{tag:Ge.namespace,class:"tok-namespace"},{tag:Ge.className,class:"tok-className"},{tag:Ge.macroName,class:"tok-macroName"},{tag:Ge.propertyName,class:"tok-propertyName"},{tag:Ge.operator,class:"tok-operator"},{tag:Ge.comment,class:"tok-comment"},{tag:Ge.meta,class:"tok-meta"},{tag:Ge.invalid,class:"tok-invalid"},{tag:Ge.punctuation,class:"tok-punctuation"}]);var o3;const hm=new on;function nQe(t){return Ct.define({combine:t?e=>e.concat(t):void 0})}const rQe=new on;class xa{constructor(e,n,r=[],s=""){this.data=e,this.name=s,gn.prototype.hasOwnProperty("tree")||Object.defineProperty(gn.prototype,"tree",{get(){return Es(this)}}),this.parser=n,this.extension=[Pd.of(this),gn.languageData.of((i,o,a)=>{let l=WH(i,o,a),c=l.type.prop(hm);if(!c)return[];let u=i.facet(c),d=l.type.prop(rQe);if(d){let h=l.resolve(o-l.from,a);for(let f of d)if(f.test(h,i)){let g=i.facet(f.facet);return f.type=="replace"?g:g.concat(u)}}return u})].concat(r)}isActiveAt(e,n,r=-1){return WH(e,n,r).type.prop(hm)==this.data}findRegions(e){let n=e.facet(Pd);if(n?.data==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let r=[],s=(i,o)=>{if(i.prop(hm)==this.data){r.push({from:o,to:o+i.length});return}let a=i.prop(on.mounted);if(a){if(a.tree.prop(hm)==this.data){if(a.overlay)for(let l of a.overlay)r.push({from:l.from+o,to:l.to+o});else r.push({from:o,to:o+i.length});return}else if(a.overlay){let l=r.length;if(s(a.tree,a.overlay[0].from+o),r.length>l)return}}for(let l=0;l<i.children.length;l++){let c=i.children[l];c instanceof Gr&&s(c,i.positions[l]+o)}};return s(Es(e),0),r}get allowsNesting(){return!0}}xa.setState=nn.define();function WH(t,e,n){let r=t.facet(Pd),s=Es(t).topNode;if(!r||r.allowsNesting)for(let i=s;i;i=i.enter(e,n,hr.ExcludeBuffers))i.type.isTop&&(s=i);return s}class hI extends xa{constructor(e,n,r){super(e,n,[],r),this.parser=n}static define(e){let n=nQe(e.languageData);return new hI(n,e.parser.configure({props:[hm.add(r=>r.isTop?n:void 0)]}),e.name)}configure(e,n){return new hI(this.data,this.parser.configure(e),n||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Es(t){let e=t.field(xa.state,!1);return e?e.tree:Gr.empty}class sQe{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let r=this.cursorPos-this.string.length;return e<r||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-r,n-r)}}let ib=null;class RS{constructor(e,n,r=[],s,i,o,a,l){this.parser=e,this.state=n,this.fragments=r,this.tree=s,this.treeLen=i,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,r){return new RS(e,n,[],Gr.empty,0,r,[],null)}startParse(){return this.parser.startParse(new sQe(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=Gr.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let s=Date.now()+e;e=()=>Date.now()>s}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let s=this.parse.advance();if(s)if(this.fragments=this.withoutTempSkipped(qc.addTree(s,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=s,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(qc.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=ib;ib=this;try{return e()}finally{ib=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=GH(e,n.from,n.to);return e}changes(e,n){let{fragments:r,tree:s,treeLen:i,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((c,u,d,h)=>l.push({fromA:c,toA:u,fromB:d,toB:h})),r=qc.applyChanges(r,l),s=Gr.empty,i=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),d=e.mapPos(c.to,-1);u<d&&a.push({from:u,to:d})}}}return new RS(this.parser,n,r,s,i,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:s,to:i}=this.skipped[r];s<e.to&&i>e.from&&(this.fragments=GH(this.fragments,s,i),this.skipped.splice(r--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends BZe{createParse(n,r,s){let i=s[0].from,o=s[s.length-1].to;return{parsedPos:i,advance(){let l=ib;if(l){for(let c of s)l.tempSkipped.push(c);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new Gr(Oi.none,[],[],o-i)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return ib}}function GH(t,e,n){return qc.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class xg{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,r)||n.takeTree(),new xg(n)}static init(e){let n=Math.min(3e3,e.doc.length),r=RS.create(e.facet(Pd).parser,e,{from:0,to:n});return r.work(20,n)||r.takeTree(),new xg(r)}}xa.state=cs.define({create:xg.init,update(t,e){for(let n of e.effects)if(n.is(xa.setState))return n.value;return e.startState.facet(Pd)!=e.state.facet(Pd)?xg.init(e.state):t.apply(e)}});let $oe=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&($oe=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const a3=typeof navigator<"u"&&(!((o3=navigator.scheduling)===null||o3===void 0)&&o3.isInputPending)?()=>navigator.scheduling.isInputPending():null,iQe=ws.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(xa.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(xa.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=$oe(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:s}}=this.view,i=r.field(xa.state);if(i.tree==i.context.tree&&i.context.isDone(s+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!a3?Math.max(25,e.timeRemaining()-5):1e9),a=i.context.treeLen<s&&r.doc.length>s+1e3,l=i.context.work(()=>a3&&a3()||Date.now()>o,s+(a?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(i.context.takeTree(),this.view.dispatch({effects:xa.setState.of(new xg(i.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(i.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>Xi(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Pd=Ct.define({combine(t){return t.length?t[0]:null},enables:t=>[xa.state,iQe,kt.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class gft{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}class ms{constructor(e,n,r,s,i,o=void 0){this.name=e,this.alias=n,this.extensions=r,this.filename=s,this.loadFunc=i,this.support=o,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(e=>this.support=e,e=>{throw this.loading=null,e}))}static of(e){let{load:n,support:r}=e;if(!n){if(!r)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");n=()=>Promise.resolve(r)}return new ms(e.name,(e.alias||[]).concat(e.name).map(s=>s.toLowerCase()),e.extensions||[],e.filename,n,r)}static matchFilename(e,n){for(let s of e)if(s.filename&&s.filename.test(n))return s;let r=/\.([^.]+)$/.exec(n);if(r){for(let s of e)if(s.extensions.indexOf(r[1])>-1)return s}return null}static matchLanguageName(e,n,r=!0){n=n.toLowerCase();for(let s of e)if(s.alias.some(i=>i==n))return s;if(r)for(let s of e)for(let i of s.alias){let o=n.indexOf(i);if(o>-1&&(i.length>2||!/\w/.test(n[o-1])&&!/\w/.test(n[o+i.length])))return s}return null}}const oQe=Ct.define(),Xg=Ct.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function LS(t){let e=t.facet(Xg);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function M1(t,e){let n="",r=t.tabSize,s=t.facet(Xg)[0];if(s=="	"){for(;e>=r;)n+="	",e-=r;s=" "}for(let i=0;i<e;i++)n+=s;return n}function sD(t,e){t instanceof gn&&(t=new IC(t));for(let r of t.state.facet(oQe)){let s=r(t,e);if(s!==void 0)return s}let n=Es(t.state);return n.length>=e?lQe(t,n,e):null}class IC{constructor(e,n={}){this.state=e,this.options=n,this.unit=LS(e)}lineAt(e,n=1){let r=this.state.doc.lineAt(e),{simulateBreak:s,simulateDoubleBreak:i}=this.options;return s!=null&&s>=r.from&&s<=r.to?i&&s==e?{text:"",from:e}:(n<0?s<e:s<=e)?{text:r.text.slice(s-r.from),from:s}:{text:r.text.slice(0,s-r.from),from:r.from}:r}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:s}=this.lineAt(e,n);return r.slice(e-s,Math.min(r.length,e+100-s))}column(e,n=1){let{text:r,from:s}=this.lineAt(e,n),i=this.countColumn(r,e-s),o=this.options.overrideIndentation?this.options.overrideIndentation(s):-1;return o>-1&&(i+=o-this.countColumn(r,r.search(/\S|$/))),i}countColumn(e,n=e.length){return kC(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:r,from:s}=this.lineAt(e,n),i=this.options.overrideIndentation;if(i){let o=i(s);if(o>-1)return o}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const aQe=new on;function lQe(t,e,n){let r=e.resolveStack(n),s=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(s!=r.node){let i=[];for(let o=s;o&&!(o.from==r.node.from&&o.type==r.node.type);o=o.parent)i.push(o);for(let o=i.length-1;o>=0;o--)r={node:i[o],next:r}}return Hoe(r,t,n)}function Hoe(t,e,n){for(let r=t;r;r=r.next){let s=uQe(r.node);if(s)return s(iD.create(e,n,r))}return 0}function cQe(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function uQe(t){let e=t.type.prop(aQe);if(e)return e;let n=t.firstChild,r;if(n&&(r=n.type.prop(on.closedBy))){let s=t.lastChild,i=s&&r.indexOf(s.name)>-1;return o=>zoe(o,!0,1,void 0,i&&!cQe(o)?s.from:void 0)}return t.parent==null?dQe:null}function dQe(){return 0}class iD extends IC{constructor(e,n,r){super(e.state,e.options),this.base=e,this.pos=n,this.context=r}get node(){return this.context.node}static create(e,n,r){return new iD(e,n,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(n.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(hQe(r,e))break;n=this.state.doc.lineAt(r.from)}return this.lineIndent(n.from)}continue(){return Hoe(this.context.next,this.base,this.pos)}}function hQe(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function fQe(t){let e=t.node,n=e.childAfter(e.from),r=e.lastChild;if(!n)return null;let s=t.options.simulateBreak,i=t.state.doc.lineAt(n.from),o=s==null||s<=i.from?i.to:Math.min(i.to,s);for(let a=n.to;;){let l=e.childAfter(a);if(!l||l==r)return null;if(!l.type.isSkipped){if(l.from>=o)return null;let c=/^ */.exec(i.text.slice(n.to-i.from))[0].length;return{from:n.from,to:n.to+c}}a=l.to}}function bft({closing:t,align:e=!0,units:n=1}){return r=>zoe(r,e,n,t)}function zoe(t,e,n,r,s){let i=t.textAfter,o=i.match(/^\s*/)[0].length,a=r&&i.slice(o,o+r.length)==r||s==t.pos+o,l=e?fQe(t):null;return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}const yft=t=>t.baseIndent;function vft({except:t,units:e=1}={}){return n=>{let r=t&&t.test(n.textAfter);return n.baseIndent+(r?0:e*n.unit)}}const pQe=200;function mQe(){return gn.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:r}=t.newSelection.main,s=n.lineAt(r);if(r>s.from+pQe)return t;let i=n.sliceString(s.from,r);if(!e.some(c=>c.test(i)))return t;let{state:o}=t,a=-1,l=[];for(let{head:c}of o.selection.ranges){let u=o.doc.lineAt(c);if(u.from==a)continue;a=u.from;let d=sD(o,u.from);if(d==null)continue;let h=/^\s*/.exec(u.text)[0],f=M1(o,d);h!=f&&l.push({from:u.from,to:u.from+h.length,insert:f})}return l.length?[t,{changes:l,sequential:!0}]:t})}const gQe=Ct.define(),bQe=new on;function _ft(t){let e=t.firstChild,n=t.lastChild;return e&&e.to<n.from?{from:e.to,to:n.type.isError?t.to:n.from}:null}function yQe(t,e,n){let r=Es(t);if(r.length<n)return null;let s=r.resolveStack(n,1),i=null;for(let o=s;o;o=o.next){let a=o.node;if(a.to<=n||a.from>n)continue;if(i&&a.from<e)break;let l=a.type.prop(bQe);if(l&&(a.to<r.length-50||r.length==t.doc.length||!vQe(a))){let c=l(a,t);c&&c.from<=n&&c.from>=e&&c.to>n&&(i=c)}}return i}function vQe(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function qH(t,e,n){for(let r of t.facet(gQe)){let s=r(t,e,n);if(s)return s}return yQe(t,e,n)}function Voe(t,e){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);return n>=r?void 0:{from:n,to:r}}const Woe=nn.define({map:Voe}),oD=nn.define({map:Voe}),OS=cs.define({create(){return _n.none},update(t,e){t=t.map(e.changes);for(let n of e.effects)if(n.is(Woe)&&!_Qe(t,n.value.from,n.value.to)){let{preparePlaceholder:r}=e.state.facet(Goe),s=r?_n.replace({widget:new EQe(r(e.state,n.value))}):KH;t=t.update({add:[s.range(n.value.from,n.value.to)]})}else n.is(oD)&&(t=t.update({filter:(r,s)=>n.value.from!=r||n.value.to!=s,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:r}=e.selection.main;t.between(r,r,(s,i)=>{s<r&&i>r&&(n=!0)}),n&&(t=t.update({filterFrom:r,filterTo:r,filter:(s,i)=>i<=r||s>=r}))}return t},provide:t=>kt.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(r,s)=>{n.push(r,s)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let r=t[n++],s=t[n++];if(typeof r!="number"||typeof s!="number")throw new RangeError("Invalid JSON for fold state");e.push(KH.range(r,s))}return _n.set(e,!0)}});function fI(t,e,n){var r;let s=null;return(r=t.field(OS,!1))===null||r===void 0||r.between(e,n,(i,o)=>{(!s||s.from>i)&&(s={from:i,to:o})}),s}function _Qe(t,e,n){let r=!1;return t.between(e,e,(s,i)=>{s==e&&i==n&&(r=!0)}),r}const xQe={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},Goe=Ct.define({combine(t){return Yf(t,xQe)}});function wQe(t){return[OS,CQe]}function qoe(t,e){let{state:n}=t,r=n.facet(Goe),s=o=>{let a=t.lineBlockAt(t.posAtDOM(o.target)),l=fI(t.state,a.from,a.to);l&&t.dispatch({effects:oD.of(l)}),o.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(t,s,e);let i=document.createElement("span");return i.textContent=r.placeholderText,i.setAttribute("aria-label",n.phrase("folded code")),i.title=n.phrase("unfold"),i.className="cm-foldPlaceholder",i.onclick=s,i}const KH=_n.replace({widget:new class extends Yg{toDOM(t){return qoe(t,null)}}});class EQe extends Yg{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return qoe(e,this.value)}}const SQe={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class l3 extends su{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function kQe(t={}){let e=Object.assign(Object.assign({},SQe),t),n=new l3(e,!0),r=new l3(e,!1),s=ws.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(Pd)!=o.state.facet(Pd)||o.startState.field(OS,!1)!=o.state.field(OS,!1)||Es(o.startState)!=Es(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let a=new Cf;for(let l of o.viewportLineBlocks){let c=fI(o.state,l.from,l.to)?r:qH(o.state,l.from,l.to)?n:null;c&&a.add(l.from,l.from,c)}return a.finish()}}),{domEventHandlers:i}=e;return[s,xZe({class:"cm-foldGutter",markers(o){var a;return((a=o.plugin(s))===null||a===void 0?void 0:a.markers)||Sn.empty},initialSpacer(){return new l3(e,!1)},domEventHandlers:Object.assign(Object.assign({},i),{click:(o,a,l)=>{if(i.click&&i.click(o,a,l))return!0;let c=fI(o.state,a.from,a.to);if(c)return o.dispatch({effects:oD.of(c)}),!0;let u=qH(o.state,a.from,a.to);return u?(o.dispatch({effects:Woe.of(u)}),!0):!1}})}),wQe()]}const CQe=kt.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class RC{constructor(e,n){this.specs=e;let r;function s(a){let l=Cd.newName();return(r||(r=Object.create(null)))["."+l]=a,l}const i=typeof n.all=="string"?n.all:n.all?s(n.all):void 0,o=n.scope;this.scope=o instanceof xa?a=>a.prop(hm)==o.data:o?a=>a==o:void 0,this.style=Uoe(e.map(a=>({tag:a.tag,class:a.class||s(Object.assign({},a,{tag:null}))})),{all:i}).style,this.module=r?new Cd(r):null,this.themeType=n.themeType}static define(e,n){return new RC(e,n||{})}}const pI=Ct.define(),AQe=Ct.define({combine(t){return t.length?[t[0]]:null}});function c3(t){let e=t.facet(pI);return e.length?e:t.facet(AQe)}function TQe(t,e){let n=[PQe],r;return t instanceof RC&&(t.module&&n.push(kt.styleModule.of(t.module)),r=t.themeType),r?n.push(pI.computeN([kt.darkTheme],s=>s.facet(kt.darkTheme)==(r=="dark")?[t]:[])):n.push(pI.of(t)),n}class NQe{constructor(e){this.markCache=Object.create(null),this.tree=Es(e.state),this.decorations=this.buildDeco(e,c3(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=Es(e.state),r=c3(e.state),s=r!=c3(e.startState),{viewport:i}=e.view,o=e.changes.mapPos(this.decoratedTo,1);n.length<i.to&&!s&&n.type==this.tree.type&&o>=i.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(n!=this.tree||e.viewportChanged||s)&&(this.tree=n,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=i.to)}buildDeco(e,n){if(!n||!this.tree.length)return _n.none;let r=new Cf;for(let{from:s,to:i}of e.visibleRanges)QZe(this.tree,n,(o,a,l)=>{r.add(o,a,this.markCache[l]||(this.markCache[l]=_n.mark({class:l})))},s,i);return r.finish()}}const PQe=Bd.high(ws.fromClass(NQe,{decorations:t=>t.decorations})),IQe=kt.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Koe=1e4,Yoe="()[]{}",Xoe=Ct.define({combine(t){return Yf(t,{afterCursor:!0,brackets:Yoe,maxScanDistance:Koe,renderMatch:OQe})}}),RQe=_n.mark({class:"cm-matchingBracket"}),LQe=_n.mark({class:"cm-nonmatchingBracket"});function OQe(t){let e=[],n=t.matched?RQe:LQe;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const DQe=cs.define({create(){return _n.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],r=e.state.facet(Xoe);for(let s of e.state.selection.ranges){if(!s.empty)continue;let i=Rl(e.state,s.head,-1,r)||s.head>0&&Rl(e.state,s.head-1,1,r)||r.afterCursor&&(Rl(e.state,s.head,1,r)||s.head<e.state.doc.length&&Rl(e.state,s.head+1,-1,r));i&&(n=n.concat(r.renderMatch(i,e.state)))}return _n.set(n,!0)},provide:t=>kt.decorations.from(t)}),MQe=[DQe,IQe];function jQe(t={}){return[Xoe.of(t),MQe]}const FQe=new on;function mI(t,e,n){let r=t.prop(e<0?on.openedBy:on.closedBy);if(r)return r;if(t.name.length==1){let s=n.indexOf(t.name);if(s>-1&&s%2==(e<0?1:0))return[n[s+e]]}return null}function gI(t){let e=t.type.prop(FQe);return e?e(t.node):t}function Rl(t,e,n,r={}){let s=r.maxScanDistance||Koe,i=r.brackets||Yoe,o=Es(t),a=o.resolveInner(e,n);for(let l=a;l;l=l.parent){let c=mI(l.type,n,i);if(c&&l.from<l.to){let u=gI(l);if(u&&(n>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return BQe(t,e,n,l,u,c,i)}}return UQe(t,e,n,o,a.type,s,i)}function BQe(t,e,n,r,s,i,o){let a=r.parent,l={from:s.from,to:s.to},c=0,u=a?.cursor();if(u&&(n<0?u.childBefore(r.from):u.childAfter(r.to)))do if(n<0?u.to<=r.from:u.from>=r.to){if(c==0&&i.indexOf(u.type.name)>-1&&u.from<u.to){let d=gI(u);return{start:l,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(mI(u.type,n,o))c++;else if(mI(u.type,-n,o)){if(c==0){let d=gI(u);return{start:l,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}c--}}while(n<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}function UQe(t,e,n,r,s,i,o){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?e-1:e,to:n>0?e+1:e},u=t.doc.iterRange(e,n>0?t.doc.length:0),d=0;for(let h=0;!u.next().done&&h<=i;){let f=u.value;n<0&&(h+=f.length);let g=e+h*n;for(let y=n>0?0:f.length-1,m=n>0?f.length:-1;y!=m;y+=n){let b=o.indexOf(f[y]);if(!(b<0||r.resolveInner(g+y,1).type!=s))if(b%2==0==n>0)d++;else{if(d==1)return{start:c,end:{from:g+y,to:g+y+1},matched:b>>1==l>>1};d--}}n>0&&(h+=f.length)}return u.done?{start:c,matched:!1}:null}const $Qe=Object.create(null),YH=[Oi.none],XH=[],JH=Object.create(null),HQe=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])HQe[t]=zQe($Qe,e);function u3(t,e){XH.indexOf(t)>-1||(XH.push(t),console.warn(e))}function zQe(t,e){let n=[];for(let a of e.split(" ")){let l=[];for(let c of a.split(".")){let u=t[c]||Ge[c];u?typeof u=="function"?l.length?l=l.map(u):u3(c,`Modifier ${c} used at start of tag`):l.length?u3(c,`Tag ${c} used as modifier`):l=Array.isArray(u)?u:[u]:u3(c,`Unknown highlighting tag ${c}`)}for(let c of l)n.push(c)}if(!n.length)return 0;let r=e.replace(/ /g,"_"),s=r+" "+n.map(a=>a.id),i=JH[s];if(i)return i.id;let o=JH[s]=Oi.define({id:YH.length,name:r,props:[JZe({[r]:n})]});return YH.push(o),o.id}or.RTL,or.LTR;class Joe{constructor(e,n,r,s){this.state=e,this.pos=n,this.explicit=r,this.view=s,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=Es(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),r=Math.max(n.from,this.pos-250),s=n.text.slice(r-n.from,this.pos-n.from),i=s.search(Zoe(e,!1));return i<0?null:{from:r+i,to:this.pos,text:s.slice(i)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,r){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),r&&r.onDocChange&&(this.abortOnDocChange=!0))}}function ZH(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function VQe(t){let e=Object.create(null),n=Object.create(null);for(let{label:s}of t){e[s[0]]=!0;for(let i=1;i<s.length;i++)n[s[i]]=!0}let r=ZH(e)+ZH(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function WQe(t){let e=t.map(s=>typeof s=="string"?{label:s}:s),[n,r]=e.every(s=>/^\w+$/.test(s.label))?[/\w*$/,/\w+$/]:VQe(e);return s=>{let i=s.matchBefore(r);return i||s.explicit?{from:i?i.from:s.pos,options:e,validFor:n}:null}}function xft(t,e){return n=>{for(let r=Es(n.state).resolveInner(n.pos,-1);r;r=r.parent){if(t.indexOf(r.name)>-1)return null;if(r.type.isTop)break}return e(n)}}class QH{constructor(e,n,r,s){this.completion=e,this.source=n,this.match=r,this.score=s}}function of(t){return t.selection.main.from}function Zoe(t,e){var n;let{source:r}=t,s=e&&r[0]!="^",i=r[r.length-1]!="$";return!s&&!i?t:new RegExp(`${s?"^":""}(?:${r})${i?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const aD=lu.define();function GQe(t,e,n,r){let{main:s}=t.selection,i=n-s.from,o=r-s.from;return Object.assign(Object.assign({},t.changeByRange(a=>{if(a!=s&&n!=r&&t.sliceDoc(a.from+i,a.from+o)!=t.sliceDoc(n,r))return{range:a};let l=t.toText(e);return{changes:{from:a.from+i,to:r==s.from?a.to:a.from+o,insert:l},range:st.cursor(a.from+i+l.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const ez=new WeakMap;function qQe(t){if(!Array.isArray(t))return t;let e=ez.get(t);return e||ez.set(t,e=WQe(t)),e}const DS=nn.define(),j1=nn.define();class KQe{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let r=ga(e,n),s=Dc(r);this.chars.push(r);let i=e.slice(n,n+s),o=i.toUpperCase();this.folded.push(ga(o==i?i.toLowerCase():o,0)),n+=s}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:r,any:s,precise:i,byWord:o}=this;if(n.length==1){let v=ga(e,0),_=Dc(v),E=_==e.length?0:-100;if(v!=n[0])if(v==r[0])E+=-200;else return null;return this.ret(E,[0,_])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=n.length,c=0;if(a<0){for(let v=0,_=Math.min(e.length,200);v<_&&c<l;){let E=ga(e,v);(E==n[c]||E==r[c])&&(s[c++]=v),v+=Dc(E)}if(c<l)return null}let u=0,d=0,h=!1,f=0,g=-1,y=-1,m=/[a-z]/.test(e),b=!0;for(let v=0,_=Math.min(e.length,200),E=0;v<_&&d<l;){let w=ga(e,v);a<0&&(u<l&&w==n[u]&&(i[u++]=v),f<l&&(w==n[f]||w==r[f]?(f==0&&(g=v),y=v+1,f++):f=0));let S,k=w<255?w>=48&&w<=57||w>=97&&w<=122?2:w>=65&&w<=90?1:0:(S=$6(w))!=S.toLowerCase()?1:S!=S.toUpperCase()?2:0;(!v||k==1&&m||E==0&&k!=0)&&(n[d]==w||r[d]==w&&(h=!0)?o[d++]=v:o.length&&(b=!1)),E=k,v+=Dc(w)}return d==l&&o[0]==0&&b?this.result(-100+(h?-200:0),o,e):f==l&&g==0?this.ret(-200-e.length+(y==e.length?0:-100),[0,y]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):f==l?this.ret(-900-e.length,[g,y]):d==l?this.result(-100+(h?-200:0)+-700+(b?0:-1100),o,e):n.length==2?null:this.result((s[0]?-700:0)+-200+-1100,s,e)}result(e,n,r){let s=[],i=0;for(let o of n){let a=o+(this.astral?Dc(ga(r,o)):1);i&&s[i-1]==o?s[i-1]=a:(s[i++]=o,s[i++]=a)}return this.ret(e-r.length,s)}}class YQe{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),r=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return r==null?null:(this.matched=[0,n.length],this.score=r+(e.length==this.pattern.length?0:-100),this)}}const is=Ct.define({combine(t){return Yf(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:XQe,filterStrict:!1,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>r=>tz(e(r),n(r)),optionClass:(e,n)=>r=>tz(e(r),n(r)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function tz(t,e){return t?e?t+" "+e:t:e}function XQe(t,e,n,r,s,i){let o=t.textDirection==or.RTL,a=o,l=!1,c="top",u,d,h=e.left-s.left,f=s.right-e.right,g=r.right-r.left,y=r.bottom-r.top;if(a&&h<Math.min(g,f)?a=!1:!a&&f<Math.min(g,h)&&(a=!0),g<=(a?h:f))u=Math.max(s.top,Math.min(n.top,s.bottom-y))-e.top,d=Math.min(400,a?h:f);else{l=!0,d=Math.min(400,(o?e.right:s.right-e.left)-30);let v=s.bottom-e.bottom;v>=y||v>e.top?u=n.bottom-e.top:(c="bottom",u=e.bottom-n.top)}let m=(e.bottom-e.top)/i.offsetHeight,b=(e.right-e.left)/i.offsetWidth;return{style:`${c}: ${u/m}px; max-width: ${d/b}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function JQe(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),n.type&&r.classList.add(...n.type.split(/\s+/g).map(s=>"cm-completionIcon-"+s)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(n,r,s,i){let o=document.createElement("span");o.className="cm-completionLabel";let a=n.displayLabel||n.label,l=0;for(let c=0;c<i.length;){let u=i[c++],d=i[c++];u>l&&o.appendChild(document.createTextNode(a.slice(l,u)));let h=o.appendChild(document.createElement("span"));h.appendChild(document.createTextNode(a.slice(u,d))),h.className="cm-completionMatchedText",l=d}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(n){if(!n.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=n.detail,r},position:80}),e.sort((n,r)=>n.position-r.position).map(n=>n.render)}function d3(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let s=Math.floor(e/n);return{from:s*n,to:(s+1)*n}}let r=Math.floor((t-e)/n);return{from:t-(r+1)*n,to:t-r*n}}class ZQe{constructor(e,n,r){this.view=e,this.stateField=n,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let s=e.state.field(n),{options:i,selected:o}=s.open,a=e.state.facet(is);this.optionContent=JQe(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=d3(i.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:c}=e.state.field(n).open;for(let u=l.target,d;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(d=/-(\d+)$/.exec(u.id))&&+d[1]<c.length){this.applyCompletion(e,c[+d[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet(is).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:j1.of(null)})}),this.showOptions(i,s.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let r=e.state.field(this.stateField),s=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),r!=s){let{options:i,selected:o,disabled:a}=r.open;(!s.open||s.open.options!=i)&&(this.range=d3(i.length,o,e.state.facet(is).maxRenderedOptions),this.showOptions(i,r.id)),this.updateSel(),a!=((n=s.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of n.split(" "))r&&this.dom.classList.add(r);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=d3(n.options.length,n.selected,this.view.state.facet(is).maxRenderedOptions),this.showOptions(n.options,e.id)),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:r}=n.options[n.selected],{info:s}=r;if(!s)return;let i=typeof s=="string"?document.createTextNode(s):s(r);if(!i)return;"then"in i?i.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,r)}).catch(o=>Xi(this.view.state,o,"completion info")):this.addInfoPane(i,r)}}addInfoPane(e,n){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",e.nodeType!=null)r.appendChild(e),this.infoDestroy=null;else{let{dom:s,destroy:i}=e;r.appendChild(s),this.infoDestroy=i||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let r=this.list.firstChild,s=this.range.from;r;r=r.nextSibling,s++)r.nodeName!="LI"||!r.id?s--:s==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),n=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return n&&eet(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),s=e.getBoundingClientRect(),i=this.space;if(!i){let o=this.dom.ownerDocument.defaultView||window;i={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return s.top>Math.min(i.bottom,n.bottom)-10||s.bottom<Math.max(i.top,n.top)+10?null:this.view.state.facet(is).positionInfo(this.view,n,s,r,i,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,r){const s=document.createElement("ul");s.id=n,s.setAttribute("role","listbox"),s.setAttribute("aria-expanded","true"),s.setAttribute("aria-label",this.view.state.phrase("Completions"));let i=null;for(let o=r.from;o<r.to;o++){let{completion:a,match:l}=e[o],{section:c}=a;if(c){let h=typeof c=="string"?c:c.name;if(h!=i&&(o>r.from||r.from==0))if(i=h,typeof c!="string"&&c.header)s.appendChild(c.header(c));else{let f=s.appendChild(document.createElement("completion-section"));f.textContent=h}}const u=s.appendChild(document.createElement("li"));u.id=n+"-"+o,u.setAttribute("role","option");let d=this.optionClass(a);d&&(u.className=d);for(let h of this.optionContent){let f=h(a,this.view.state,this.view,l);f&&u.appendChild(f)}}return r.from&&s.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&s.classList.add("cm-completionListIncompleteBottom"),s}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function QQe(t,e){return n=>new ZQe(n,t,e)}function eet(t,e){let n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),s=n.height/t.offsetHeight;r.top<n.top?t.scrollTop-=(n.top-r.top)/s:r.bottom>n.bottom&&(t.scrollTop+=(r.bottom-n.bottom)/s)}function nz(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function tet(t,e){let n=[],r=null,s=c=>{n.push(c);let{section:u}=c.completion;if(u){r||(r=[]);let d=typeof u=="string"?u:u.name;r.some(h=>h.name==d)||r.push(typeof u=="string"?{name:d}:u)}},i=e.facet(is);for(let c of t)if(c.hasResult()){let u=c.result.getMatch;if(c.result.filter===!1)for(let d of c.result.options)s(new QH(d,c.source,u?u(d):[],1e9-n.length));else{let d=e.sliceDoc(c.from,c.to),h,f=i.filterStrict?new YQe(d):new KQe(d);for(let g of c.result.options)if(h=f.match(g.label)){let y=g.displayLabel?u?u(g,h.matched):[]:h.matched;s(new QH(g,c.source,y,h.score+(g.boost||0)))}}}if(r){let c=Object.create(null),u=0,d=(h,f)=>{var g,y;return((g=h.rank)!==null&&g!==void 0?g:1e9)-((y=f.rank)!==null&&y!==void 0?y:1e9)||(h.name<f.name?-1:1)};for(let h of r.sort(d))u-=1e5,c[h.name]=u;for(let h of n){let{section:f}=h.completion;f&&(h.score+=c[typeof f=="string"?f:f.name])}}let o=[],a=null,l=i.compareCompletions;for(let c of n.sort((u,d)=>d.score-u.score||l(u.completion,d.completion))){let u=c.completion;!a||a.label!=u.label||a.detail!=u.detail||a.type!=null&&u.type!=null&&a.type!=u.type||a.apply!=u.apply||a.boost!=u.boost?o.push(c):nz(c.completion)>nz(a)&&(o[o.length-1]=c),a=c.completion}return o}class fm{constructor(e,n,r,s,i,o){this.options=e,this.attrs=n,this.tooltip=r,this.timestamp=s,this.selected=i,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new fm(this.options,rz(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,r,s,i,o){if(s&&!o&&e.some(c=>c.isPending))return s.setDisabled();let a=tet(e,n);if(!a.length)return s&&e.some(c=>c.isPending)?s.setDisabled():null;let l=n.facet(is).selectOnOpen?0:-1;if(s&&s.selected!=l&&s.selected!=-1){let c=s.options[s.selected].completion;for(let u=0;u<a.length;u++)if(a[u].completion==c){l=u;break}}return new fm(a,rz(r,l),{pos:e.reduce((c,u)=>u.hasResult()?Math.min(c,u.from):c,1e8),create:aet,above:i.aboveCursor},s?s.timestamp:Date.now(),l,!1)}map(e){return new fm(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new fm(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class MS{constructor(e,n,r){this.active=e,this.id=n,this.open=r}static start(){return new MS(iet,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,r=n.facet(is),i=(r.override||n.languageDataAt("autocomplete",of(n)).map(qQe)).map(l=>(this.active.find(u=>u.source==l)||new Do(l,this.active.some(u=>u.state!=0)?1:0)).update(e,r));i.length==this.active.length&&i.every((l,c)=>l==this.active[c])&&(i=this.active);let o=this.open,a=e.effects.some(l=>l.is(lD));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||i.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!net(i,this.active)||a?o=fm.build(i,n,this.id,o,r,a):o&&o.disabled&&!i.some(l=>l.isPending)&&(o=null),!o&&i.every(l=>!l.isPending)&&i.some(l=>l.hasResult())&&(i=i.map(l=>l.hasResult()?new Do(l.source,0):l));for(let l of e.effects)l.is(eae)&&(o=o&&o.setSelected(l.value,this.id));return i==this.active&&o==this.open?this:new MS(i,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?ret:set}}function net(t,e){if(t==e)return!0;for(let n=0,r=0;;){for(;n<t.length&&!t[n].hasResult();)n++;for(;r<e.length&&!e[r].hasResult();)r++;let s=n==t.length,i=r==e.length;if(s||i)return s==i;if(t[n++].result!=e[r++].result)return!1}}const ret={"aria-autocomplete":"list"},set={};function rz(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const iet=[];function Qoe(t,e){if(t.isUserEvent("input.complete")){let r=t.annotation(aD);if(r&&e.activateOnCompletion(r))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class Do{constructor(e,n,r=!1){this.source=e,this.state=n,this.explicit=r}hasResult(){return!1}get isPending(){return this.state==1}update(e,n){let r=Qoe(e,n),s=this;(r&8||r&16&&this.touches(e))&&(s=new Do(s.source,0)),r&4&&s.state==0&&(s=new Do(this.source,1)),s=s.updateFor(e,r);for(let i of e.effects)if(i.is(DS))s=new Do(s.source,1,i.value);else if(i.is(j1))s=new Do(s.source,0);else if(i.is(lD))for(let o of i.value)o.source==s.source&&(s=o);return s}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(of(e.state))}}class Om extends Do{constructor(e,n,r,s,i,o){super(e,3,n),this.limit=r,this.result=s,this.from=i,this.to=o}hasResult(){return!0}updateFor(e,n){var r;if(!(n&3))return this.map(e.changes);let s=this.result;s.map&&!e.changes.empty&&(s=s.map(s,e.changes));let i=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=of(e.state);if(a>o||!s||n&2&&(of(e.startState)==this.from||a<this.limit))return new Do(this.source,n&4?1:0);let l=e.changes.mapPos(this.limit);return oet(s.validFor,e.state,i,o)?new Om(this.source,this.explicit,l,s,i,o):s.update&&(s=s.update(s,i,o,new Joe(e.state,a,!1)))?new Om(this.source,this.explicit,l,s,s.from,(r=s.to)!==null&&r!==void 0?r:of(e.state)):new Do(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Om(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Do(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function oet(t,e,n,r){if(!t)return!1;let s=e.sliceDoc(n,r);return typeof t=="function"?t(s,n,r,e):Zoe(t,!0).test(s)}const lD=nn.define({map(t,e){return t.map(n=>n.map(e))}}),eae=nn.define(),Ni=cs.define({create(){return MS.start()},update(t,e){return t.update(e)},provide:t=>[eD.from(t,e=>e.tooltip),kt.contentAttributes.from(t,e=>e.attrs)]});function cD(t,e){const n=e.completion.apply||e.completion.label;let r=t.state.field(Ni).active.find(s=>s.source==e.source);return r instanceof Om?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},GQe(t.state,n,r.from,r.to)),{annotations:aD.of(e.completion)})):n(t,e.completion,r.from,r.to),!0):!1}const aet=QQe(Ni,cD);function Tw(t,e="option"){return n=>{let r=n.state.field(Ni,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<n.state.facet(is).interactionDelay)return!1;let s=1,i;e=="page"&&(i=Ioe(n,r.open.tooltip))&&(s=Math.max(2,Math.floor(i.dom.offsetHeight/i.dom.querySelector("li").offsetHeight)-1));let{length:o}=r.open.options,a=r.open.selected>-1?r.open.selected+s*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),n.dispatch({effects:eae.of(a)}),!0}}const tae=t=>{let e=t.state.field(Ni,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(is).interactionDelay?!1:cD(t,e.open.options[e.open.selected])},sz=t=>t.state.field(Ni,!1)?(t.dispatch({effects:DS.of(!0)}),!0):!1,cet=t=>{let e=t.state.field(Ni,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:j1.of(null)}),!0)};class uet{constructor(e,n){this.active=e,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0}}const det=50,het=1e3,fet=ws.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of t.state.field(Ni).active)e.isPending&&this.startQuery(e)}update(t){let e=t.state.field(Ni),n=t.state.facet(is);if(!t.selectionSet&&!t.docChanged&&t.startState.field(Ni)==e)return;let r=t.transactions.some(i=>{let o=Qoe(i,n);return o&8||(i.selection||i.docChanged)&&!(o&3)});for(let i=0;i<this.running.length;i++){let o=this.running[i];if(r||o.context.abortOnDocChange&&t.docChanged||o.updates.length+t.transactions.length>det&&Date.now()-o.time>het){for(let a of o.context.abortListeners)try{a()}catch(l){Xi(this.view.state,l)}o.context.abortListeners=null,this.running.splice(i--,1)}else o.updates.push(...t.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),t.transactions.some(i=>i.effects.some(o=>o.is(DS)))&&(this.pendingStart=!0);let s=this.pendingStart?50:n.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(i=>i.isPending&&!this.running.some(o=>o.active.source==i.source))?setTimeout(()=>this.startUpdate(),s):-1,this.composing!=0)for(let i of t.transactions)i.isUserEvent("input.type")?this.composing=2:this.composing==2&&i.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:t}=this.view,e=t.field(Ni);for(let n of e.active)n.isPending&&!this.running.some(r=>r.active.source==n.source)&&this.startQuery(n);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(is).updateSyncTime))}startQuery(t){let{state:e}=this.view,n=of(e),r=new Joe(e,n,t.explicit,this.view),s=new uet(t,r);this.running.push(s),Promise.resolve(t.source(r)).then(i=>{s.context.aborted||(s.done=i||null,this.scheduleAccept())},i=>{this.view.dispatch({effects:j1.of(null)}),Xi(this.view.state,i)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(is).updateSyncTime))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],n=this.view.state.facet(is),r=this.view.state.field(Ni);for(let s=0;s<this.running.length;s++){let i=this.running[s];if(i.done===void 0)continue;if(this.running.splice(s--,1),i.done){let a=of(i.updates.length?i.updates[0].startState:this.view.state),l=Math.min(a,i.done.from+(i.active.explicit?0:1)),c=new Om(i.active.source,i.active.explicit,l,i.done,i.done.from,(t=i.done.to)!==null&&t!==void 0?t:a);for(let u of i.updates)c=c.update(u,n);if(c.hasResult()){e.push(c);continue}}let o=r.active.find(a=>a.source==i.active.source);if(o&&o.isPending)if(i.done==null){let a=new Do(i.active.source,0);for(let l of i.updates)a=a.update(l,n);a.isPending||e.push(a)}else this.startQuery(o)}(e.length||r.open&&r.open.disabled)&&this.view.dispatch({effects:lD.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(Ni,!1);if(e&&e.tooltip&&this.view.state.facet(is).closeOnBlur){let n=e.open&&Ioe(this.view,e.open.tooltip);(!n||!n.dom.contains(t.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:j1.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:DS.of(!1)}),20),this.composing=0}}}),pet=typeof navigator=="object"&&/Win/.test(navigator.platform),met=Bd.highest(kt.domEventHandlers({keydown(t,e){let n=e.state.field(Ni,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||t.key.length>1||t.ctrlKey&&!(pet&&t.altKey)||t.metaKey)return!1;let r=n.open.options[n.open.selected],s=n.active.find(o=>o.source==r.source),i=r.completion.commitCharacters||s.result.commitCharacters;return i&&i.indexOf(t.key)>-1&&cD(e,r),!1}})),nae=kt.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class get{constructor(e,n,r,s){this.field=e,this.line=n,this.from=r,this.to=s}}class uD{constructor(e,n,r){this.field=e,this.from=n,this.to=r}map(e){let n=e.mapPos(this.from,-1,Bs.TrackDel),r=e.mapPos(this.to,1,Bs.TrackDel);return n==null||r==null?null:new uD(this.field,n,r)}}class dD{constructor(e,n){this.lines=e,this.fieldPositions=n}instantiate(e,n){let r=[],s=[n],i=e.doc.lineAt(n),o=/^\s*/.exec(i.text)[0];for(let l of this.lines){if(r.length){let c=o,u=/^\t*/.exec(l)[0].length;for(let d=0;d<u;d++)c+=e.facet(Xg);s.push(n+c.length-u),l=c+l.slice(u)}r.push(l),n+=l.length+1}let a=this.fieldPositions.map(l=>new uD(l.field,s[l.line]+l.from,s[l.line]+l.to));return{text:r,ranges:a}}static parse(e){let n=[],r=[],s=[],i;for(let o of e.split(/\r\n?|\n/)){for(;i=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(o);){let a=i[1]?+i[1]:null,l=i[2]||i[3]||"",c=-1,u=l.replace(/\\[{}]/g,d=>d[1]);for(let d=0;d<n.length;d++)(a!=null?n[d].seq==a:u&&n[d].name==u)&&(c=d);if(c<0){let d=0;for(;d<n.length&&(a==null||n[d].seq!=null&&n[d].seq<a);)d++;n.splice(d,0,{seq:a,name:u}),c=d;for(let h of s)h.field>=c&&h.field++}s.push(new get(c,r.length,i.index,i.index+u.length)),o=o.slice(0,i.index)+l+o.slice(i.index+i[0].length)}o=o.replace(/\\([{}])/g,(a,l,c)=>{for(let u of s)u.line==r.length&&u.from>c&&(u.from--,u.to--);return l}),r.push(o)}return new dD(r,s)}}let bet=_n.widget({widget:new class extends Yg{toDOM(){let t=document.createElement("span");return t.className="cm-snippetFieldPosition",t}ignoreEvent(){return!1}}}),yet=_n.mark({class:"cm-snippetField"});class Jg{constructor(e,n){this.ranges=e,this.active=n,this.deco=_n.set(e.map(r=>(r.from==r.to?bet:yet).range(r.from,r.to)))}map(e){let n=[];for(let r of this.ranges){let s=r.map(e);if(!s)return null;n.push(s)}return new Jg(n,this.active)}selectionInsideField(e){return e.ranges.every(n=>this.ranges.some(r=>r.field==this.active&&r.from<=n.from&&r.to>=n.to))}}const Kv=nn.define({map(t,e){return t&&t.map(e)}}),vet=nn.define(),F1=cs.define({create(){return null},update(t,e){for(let n of e.effects){if(n.is(Kv))return n.value;if(n.is(vet)&&t)return new Jg(t.ranges,n.value)}return t&&e.docChanged&&(t=t.map(e.changes)),t&&e.selection&&!t.selectionInsideField(e.selection)&&(t=null),t},provide:t=>kt.decorations.from(t,e=>e?e.deco:_n.none)});function hD(t,e){return st.create(t.filter(n=>n.field==e).map(n=>st.range(n.from,n.to)))}function _et(t){let e=dD.parse(t);return(n,r,s,i)=>{let{text:o,ranges:a}=e.instantiate(n.state,s),{main:l}=n.state.selection,c={changes:{from:s,to:i==l.from?l.to:i,insert:Cn.of(o)},scrollIntoView:!0,annotations:r?[aD.of(r),Fr.userEvent.of("input.complete")]:void 0};if(a.length&&(c.selection=hD(a,0)),a.some(u=>u.field>0)){let u=new Jg(a,0),d=c.effects=[Kv.of(u)];n.state.field(F1,!1)===void 0&&d.push(nn.appendConfig.of([F1,Cet,Aet,nae]))}n.dispatch(n.state.update(c))}}function rae(t){return({state:e,dispatch:n})=>{let r=e.field(F1,!1);if(!r||t<0&&r.active==0)return!1;let s=r.active+t,i=t>0&&!r.ranges.some(o=>o.field==s+t);return n(e.update({selection:hD(r.ranges,s),effects:Kv.of(i?null:new Jg(r.ranges,s)),scrollIntoView:!0})),!0}}const xet=({state:t,dispatch:e})=>t.field(F1,!1)?(e(t.update({effects:Kv.of(null)})),!0):!1,wet=rae(1),Eet=rae(-1),ket=[{key:"Tab",run:wet,shift:Eet},{key:"Escape",run:xet}],iz=Ct.define({combine(t){return t.length?t[0]:ket}}),Cet=Bd.highest(PC.compute([iz],t=>t.facet(iz)));function wft(t,e){return Object.assign(Object.assign({},e),{apply:_et(t)})}const Aet=kt.domEventHandlers({mousedown(t,e){let n=e.state.field(F1,!1),r;if(!n||(r=e.posAtCoords({x:t.clientX,y:t.clientY}))==null)return!1;let s=n.ranges.find(i=>i.from<=r&&i.to>=r);return!s||s.field==n.active?!1:(e.dispatch({selection:hD(n.ranges,s.field),effects:Kv.of(n.ranges.some(i=>i.field>s.field)?new Jg(n.ranges,s.field):null),scrollIntoView:!0}),!0)}}),jS={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Uh=nn.define({map(t,e){let n=e.mapPos(t,-1,Bs.TrackAfter);return n??void 0}}),fD=new class extends kf{};fD.startSide=1;fD.endSide=-1;const sae=cs.define({create(){return Sn.empty},update(t,e){if(t=t.map(e.changes),e.selection){let n=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:r=>r>=n.from&&r<=n.to})}for(let n of e.effects)n.is(Uh)&&(t=t.update({add:[fD.range(n.value,n.value+1)]}));return t}});function Tet(){return[Ret,sae]}const h3="()[]{}<>";function Net(t){for(let e=0;e<h3.length;e+=2)if(h3.charCodeAt(e)==t)return h3.charAt(e+1);return $6(t<128?t:t+1)}function Pet(t,e){return t.languageDataAt("closeBrackets",e)[0]||jS}const Iet=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),Ret=kt.inputHandler.of((t,e,n,r)=>{if((Iet?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let s=t.state.selection.main;if(r.length>2||r.length==2&&Dc(ga(r,0))==1||e!=s.from||n!=s.to)return!1;let i=Let(t.state,r);return i?(t.dispatch(i),!0):!1});function Let(t,e){let n=Pet(t,t.selection.main.head),r=n.brackets||jS.brackets;for(let s of r){let i=Net(ga(s,0));if(e==s)return i==s?Met(t,s,r.indexOf(s+s+s)>-1,n):Oet(t,s,i,n.before||jS.before);if(e==i&&iae(t,t.selection.main.from))return Det(t,s,i)}return null}function iae(t,e){let n=!1;return t.field(sae).between(0,t.doc.length,r=>{r==e&&(n=!0)}),n}function pD(t,e){let n=t.sliceString(e,e+2);return n.slice(0,Dc(ga(n,0)))}function Oet(t,e,n,r){let s=null,i=t.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:n,from:o.to}],effects:Uh.of(o.to+e.length),range:st.range(o.anchor+e.length,o.head+e.length)};let a=pD(t.doc,o.head);return!a||/\s/.test(a)||r.indexOf(a)>-1?{changes:{insert:e+n,from:o.head},effects:Uh.of(o.head+e.length),range:st.cursor(o.head+e.length)}:{range:s=o}});return s?null:t.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function Det(t,e,n){let r=null,s=t.changeByRange(i=>i.empty&&pD(t.doc,i.head)==n?{changes:{from:i.head,to:i.head+n.length,insert:n},range:st.cursor(i.head+n.length)}:r={range:i});return r?null:t.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function Met(t,e,n,r){let s=r.stringPrefixes||jS.stringPrefixes,i=null,o=t.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:e,from:a.to}],effects:Uh.of(a.to+e.length),range:st.range(a.anchor+e.length,a.head+e.length)};let l=a.head,c=pD(t.doc,l),u;if(c==e){if(oz(t,l))return{changes:{insert:e+e,from:l},effects:Uh.of(l+e.length),range:st.cursor(l+e.length)};if(iae(t,l)){let h=n&&t.sliceDoc(l,l+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:l,to:l+h.length,insert:h},range:st.cursor(l+h.length)}}}else{if(n&&t.sliceDoc(l-2*e.length,l)==e+e&&(u=az(t,l-2*e.length,s))>-1&&oz(t,u))return{changes:{insert:e+e+e+e,from:l},effects:Uh.of(l+e.length),range:st.cursor(l+e.length)};if(t.charCategorizer(l)(c)!=Br.Word&&az(t,l,s)>-1&&!jet(t,l,e,s))return{changes:{insert:e+e,from:l},effects:Uh.of(l+e.length),range:st.cursor(l+e.length)}}return{range:i=a}});return i?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function oz(t,e){let n=Es(t).resolveInner(e+1);return n.parent&&n.from==e}function jet(t,e,n,r){let s=Es(t).resolveInner(e,-1),i=r.reduce((o,a)=>Math.max(o,a.length),0);for(let o=0;o<5;o++){let a=t.sliceDoc(s.from,Math.min(s.to,s.from+n.length+i)),l=a.indexOf(n);if(!l||l>-1&&r.indexOf(a.slice(0,l))>-1){let u=s.firstChild;for(;u&&u.from==s.from&&u.to-u.from>n.length+l;){if(t.sliceDoc(u.to-n.length,u.to)==n)return!1;u=u.firstChild}return!0}let c=s.to==e&&s.parent;if(!c)break;s=c}return!1}function az(t,e,n){let r=t.charCategorizer(e);if(r(t.sliceDoc(e-1,e))!=Br.Word)return e;for(let s of n){let i=e-s.length;if(t.sliceDoc(i,e)==s&&r(t.sliceDoc(i-1,i))!=Br.Word)return i}return-1}function Fet(t={}){return[met,Ni,is.of(t),fet,Uet,nae]}const Bet=[{key:"Ctrl-Space",run:sz},{mac:"Alt-`",run:sz},{key:"Escape",run:cet},{key:"ArrowDown",run:Tw(!0)},{key:"ArrowUp",run:Tw(!1)},{key:"PageDown",run:Tw(!0,"page")},{key:"PageUp",run:Tw(!1,"page")},{key:"Enter",run:tae}],Uet=Bd.highest(PC.computeN([is],t=>t.facet(is).defaultKeymap?[Bet]:[])),$et=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),r=gD(t.state,n.from);return r.line?Het(t):r.block?Vet(t):!1};function mD(t,e){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let s=t(e,n);return s?(r(n.update(s)),!0):!1}}const Het=mD(qet,0),zet=mD(oae,0),Vet=mD((t,e)=>oae(t,e,Get(e)),0);function gD(t,e){let n=t.languageDataAt("commentTokens",e);return n.length?n[0]:{}}const ob=50;function Wet(t,{open:e,close:n},r,s){let i=t.sliceDoc(r-ob,r),o=t.sliceDoc(s,s+ob),a=/\s*$/.exec(i)[0].length,l=/^\s*/.exec(o)[0].length,c=i.length-a;if(i.slice(c-e.length,c)==e&&o.slice(l,l+n.length)==n)return{open:{pos:r-a,margin:a&&1},close:{pos:s+l,margin:l&&1}};let u,d;s-r<=2*ob?u=d=t.sliceDoc(r,s):(u=t.sliceDoc(r,r+ob),d=t.sliceDoc(s-ob,s));let h=/^\s*/.exec(u)[0].length,f=/\s*$/.exec(d)[0].length,g=d.length-f-n.length;return u.slice(h,h+e.length)==e&&d.slice(g,g+n.length)==n?{open:{pos:r+h+e.length,margin:/\s/.test(u.charAt(h+e.length))?1:0},close:{pos:s-f-n.length,margin:/\s/.test(d.charAt(g-1))?1:0}}:null}function Get(t){let e=[];for(let n of t.selection.ranges){let r=t.doc.lineAt(n.from),s=n.to<=r.to?r:t.doc.lineAt(n.to);s.from>r.from&&s.from==n.to&&(s=n.to==r.to+1?r:t.doc.lineAt(n.to-1));let i=e.length-1;i>=0&&e[i].to>r.from?e[i].to=s.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:s.to})}return e}function oae(t,e,n=e.selection.ranges){let r=n.map(i=>gD(e,i.from).block);if(!r.every(i=>i))return null;let s=n.map((i,o)=>Wet(e,r[o],i.from,i.to));if(t!=2&&!s.every(i=>i))return{changes:e.changes(n.map((i,o)=>s[o]?[]:[{from:i.from,insert:r[o].open+" "},{from:i.to,insert:" "+r[o].close}]))};if(t!=1&&s.some(i=>i)){let i=[];for(let o=0,a;o<s.length;o++)if(a=s[o]){let l=r[o],{open:c,close:u}=a;i.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+l.close.length})}return{changes:i}}return null}function qet(t,e,n=e.selection.ranges){let r=[],s=-1;for(let{from:i,to:o}of n){let a=r.length,l=1e9,c=gD(e,i).line;if(c){for(let u=i;u<=o;){let d=e.doc.lineAt(u);if(d.from>s&&(i==o||o>d.from)){s=d.from;let h=/^\s*/.exec(d.text)[0].length,f=h==d.length,g=d.text.slice(h,h+c.length)==c?h:-1;h<d.text.length&&h<l&&(l=h),r.push({line:d,comment:g,token:c,indent:h,empty:f,single:!1})}u=d.to+1}if(l<1e9)for(let u=a;u<r.length;u++)r[u].indent<r[u].line.text.length&&(r[u].indent=l);r.length==a+1&&(r[a].single=!0)}}if(t!=2&&r.some(i=>i.comment<0&&(!i.empty||i.single))){let i=[];for(let{line:a,token:l,indent:c,empty:u,single:d}of r)(d||!u)&&i.push({from:a.from+c,insert:l+" "});let o=e.changes(i);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&r.some(i=>i.comment>=0)){let i=[];for(let{line:o,comment:a,token:l}of r)if(a>=0){let c=o.from+a,u=c+l.length;o.text[u-o.from]==" "&&u++,i.push({from:c,to:u})}return{changes:i}}return null}const bI=lu.define(),Ket=lu.define(),Yet=Ct.define(),aae=Ct.define({combine(t){return Yf(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(r,s)=>e(r,s)||n(r,s)})}}),lae=cs.define({create(){return Ll.empty},update(t,e){let n=e.state.facet(aae),r=e.annotation(bI);if(r){let l=Ii.fromTransaction(e,r.selection),c=r.side,u=c==0?t.undone:t.done;return l?u=FS(u,u.length,n.minDepth,l):u=dae(u,e.startState.selection),new Ll(c==0?r.rest:u,c==0?u:r.rest)}let s=e.annotation(Ket);if((s=="full"||s=="before")&&(t=t.isolate()),e.annotation(Fr.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let i=Ii.fromTransaction(e),o=e.annotation(Fr.time),a=e.annotation(Fr.userEvent);return i?t=t.addChanges(i,o,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,n.newGroupDelay)),(s=="full"||s=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new Ll(t.done.map(Ii.fromJSON),t.undone.map(Ii.fromJSON))}});function Xet(t={}){return[lae,aae.of(t),kt.domEventHandlers({beforeinput(e,n){let r=e.inputType=="historyUndo"?cae:e.inputType=="historyRedo"?yI:null;return r?(e.preventDefault(),r(n)):!1}})]}function LC(t,e){return function({state:n,dispatch:r}){if(!e&&n.readOnly)return!1;let s=n.field(lae,!1);if(!s)return!1;let i=s.pop(t,n,e);return i?(r(i),!0):!1}}const cae=LC(0,!1),yI=LC(1,!1),Jet=LC(0,!0),Zet=LC(1,!0);class Ii{constructor(e,n,r,s,i){this.changes=e,this.effects=n,this.mapped=r,this.startSelection=s,this.selectionsAfter=i}setSelAfter(e){return new Ii(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(s=>s.toJSON())}}static fromJSON(e){return new Ii(e.changes&&zr.fromJSON(e.changes),[],e.mapped&&Hl.fromJSON(e.mapped),e.startSelection&&st.fromJSON(e.startSelection),e.selectionsAfter.map(st.fromJSON))}static fromTransaction(e,n){let r=Mo;for(let s of e.startState.facet(Yet)){let i=s(e);i.length&&(r=r.concat(i))}return!r.length&&e.changes.empty?null:new Ii(e.changes.invert(e.startState.doc),r,void 0,n||e.startState.selection,Mo)}static selection(e){return new Ii(void 0,Mo,void 0,void 0,e)}}function FS(t,e,n,r){let s=e+1>n+20?e-n-1:0,i=t.slice(s,e);return i.push(r),i}function Qet(t,e){let n=[],r=!1;return t.iterChangedRanges((s,i)=>n.push(s,i)),e.iterChangedRanges((s,i,o,a)=>{for(let l=0;l<n.length;){let c=n[l++],u=n[l++];a>=c&&o<=u&&(r=!0)}}),r}function ett(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,r)=>n.empty!=e.ranges[r].empty).length===0}function uae(t,e){return t.length?e.length?t.concat(e):t:e}const Mo=[],ttt=200;function dae(t,e){if(t.length){let n=t[t.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-ttt));return r.length&&r[r.length-1].eq(e)?t:(r.push(e),FS(t,t.length-1,1e9,n.setSelAfter(r)))}else return[Ii.selection([e])]}function ntt(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function f3(t,e){if(!t.length)return t;let n=t.length,r=Mo;for(;n;){let s=rtt(t[n-1],e,r);if(s.changes&&!s.changes.empty||s.effects.length){let i=t.slice(0,n);return i[n-1]=s,i}else e=s.mapped,n--,r=s.selectionsAfter}return r.length?[Ii.selection(r)]:Mo}function rtt(t,e,n){let r=uae(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):Mo,n);if(!t.changes)return Ii.selection(r);let s=t.changes.map(e),i=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(i):i;return new Ii(s,nn.mapEffects(t.effects,e),o,t.startSelection.map(i),r)}const stt=/^(input\.type|delete)($|\.)/;class Ll{constructor(e,n,r=0,s=void 0){this.done=e,this.undone=n,this.prevTime=r,this.prevUserEvent=s}isolate(){return this.prevTime?new Ll(this.done,this.undone):this}addChanges(e,n,r,s,i){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!r||stt.test(r))&&(!a.selectionsAfter.length&&n-this.prevTime<s.newGroupDelay&&s.joinToEvent(i,Qet(a.changes,e.changes))||r=="input.type.compose")?o=FS(o,o.length-1,s.minDepth,new Ii(e.changes.compose(a.changes),uae(nn.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,Mo)):o=FS(o,o.length,s.minDepth,e),new Ll(o,Mo,n,r)}addSelection(e,n,r,s){let i=this.done.length?this.done[this.done.length-1].selectionsAfter:Mo;return i.length>0&&n-this.prevTime<s&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&ett(i[i.length-1],e)?this:new Ll(dae(this.done,e),this.undone,n,r)}addMapping(e){return new Ll(f3(this.done,e),f3(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,r){let s=e==0?this.done:this.undone;if(s.length==0)return null;let i=s[s.length-1],o=i.selectionsAfter[0]||n.selection;if(r&&i.selectionsAfter.length)return n.update({selection:i.selectionsAfter[i.selectionsAfter.length-1],annotations:bI.of({side:e,rest:ntt(s),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(i.changes){let a=s.length==1?Mo:s.slice(0,s.length-1);return i.mapped&&(a=f3(a,i.mapped)),n.update({changes:i.changes,selection:i.startSelection,effects:i.effects,annotations:bI.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Ll.empty=new Ll(Mo,Mo);const itt=[{key:"Mod-z",run:cae,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:yI,preventDefault:!0},{linux:"Ctrl-Shift-z",run:yI,preventDefault:!0},{key:"Mod-u",run:Jet,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Zet,preventDefault:!0}];function Zg(t,e){return st.create(t.ranges.map(e),t.mainIndex)}function sc(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Ba({state:t,dispatch:e},n){let r=Zg(t.selection,n);return r.eq(t.selection,!0)?!1:(e(sc(t,r)),!0)}function OC(t,e){return st.cursor(e?t.to:t.from)}function hae(t,e){return Ba(t,n=>n.empty?t.moveByChar(n,e):OC(n,e))}function qs(t){return t.textDirectionAt(t.state.selection.main.head)==or.LTR}const fae=t=>hae(t,!qs(t)),pae=t=>hae(t,qs(t));function mae(t,e){return Ba(t,n=>n.empty?t.moveByGroup(n,e):OC(n,e))}const ott=t=>mae(t,!qs(t)),att=t=>mae(t,qs(t));function ltt(t,e,n){if(e.type.prop(n))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function DC(t,e,n){let r=Es(t).resolveInner(e.head),s=n?on.closedBy:on.openedBy;for(let l=e.head;;){let c=n?r.childAfter(l):r.childBefore(l);if(!c)break;ltt(t,c,s)?r=c:l=n?c.to:c.from}let i=r.type.prop(s),o,a;return i&&(o=n?Rl(t,r.from,1):Rl(t,r.to,-1))&&o.matched?a=n?o.end.to:o.end.from:a=n?r.to:r.from,st.cursor(a,n?-1:1)}const ctt=t=>Ba(t,e=>DC(t.state,e,!qs(t))),utt=t=>Ba(t,e=>DC(t.state,e,qs(t)));function gae(t,e){return Ba(t,n=>{if(!n.empty)return OC(n,e);let r=t.moveVertically(n,e);return r.head!=n.head?r:t.moveToLineBoundary(n,e)})}const bae=t=>gae(t,!1),yae=t=>gae(t,!0);function vae(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,r=0,s;if(e){for(let i of t.state.facet(kt.scrollMargins)){let o=i(t);o?.top&&(n=Math.max(o?.top,n)),o?.bottom&&(r=Math.max(o?.bottom,r))}s=t.scrollDOM.clientHeight-n-r}else s=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:e,height:Math.max(t.defaultLineHeight,s-5)}}function _ae(t,e){let n=vae(t),{state:r}=t,s=Zg(r.selection,o=>o.empty?t.moveVertically(o,e,n.height):OC(o,e));if(s.eq(r.selection))return!1;let i;if(n.selfScroll){let o=t.coordsAtPos(r.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),l=a.top+n.marginTop,c=a.bottom-n.marginBottom;o&&o.top>l&&o.bottom<c&&(i=kt.scrollIntoView(s.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(sc(r,s),{effects:i}),!0}const lz=t=>_ae(t,!1),vI=t=>_ae(t,!0);function Ud(t,e,n){let r=t.lineBlockAt(e.head),s=t.moveToLineBoundary(e,n);if(s.head==e.head&&s.head!=(n?r.to:r.from)&&(s=t.moveToLineBoundary(e,n,!1)),!n&&s.head==r.from&&r.length){let i=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;i&&e.head!=r.from+i&&(s=st.cursor(r.from+i))}return s}const dtt=t=>Ba(t,e=>Ud(t,e,!0)),htt=t=>Ba(t,e=>Ud(t,e,!1)),ftt=t=>Ba(t,e=>Ud(t,e,!qs(t))),ptt=t=>Ba(t,e=>Ud(t,e,qs(t))),mtt=t=>Ba(t,e=>st.cursor(t.lineBlockAt(e.head).from,1)),gtt=t=>Ba(t,e=>st.cursor(t.lineBlockAt(e.head).to,-1));function btt(t,e,n){let r=!1,s=Zg(t.selection,i=>{let o=Rl(t,i.head,-1)||Rl(t,i.head,1)||i.head>0&&Rl(t,i.head-1,1)||i.head<t.doc.length&&Rl(t,i.head+1,-1);if(!o||!o.end)return i;r=!0;let a=o.start.from==i.head?o.end.to:o.end.from;return st.cursor(a)});return r?(e(sc(t,s)),!0):!1}const ytt=({state:t,dispatch:e})=>btt(t,e);function Qo(t,e){let n=Zg(t.state.selection,r=>{let s=e(r);return st.range(r.anchor,s.head,s.goalColumn,s.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(sc(t.state,n)),!0)}function xae(t,e){return Qo(t,n=>t.moveByChar(n,e))}const wae=t=>xae(t,!qs(t)),Eae=t=>xae(t,qs(t));function Sae(t,e){return Qo(t,n=>t.moveByGroup(n,e))}const vtt=t=>Sae(t,!qs(t)),_tt=t=>Sae(t,qs(t)),xtt=t=>Qo(t,e=>DC(t.state,e,!qs(t))),wtt=t=>Qo(t,e=>DC(t.state,e,qs(t)));function kae(t,e){return Qo(t,n=>t.moveVertically(n,e))}const Cae=t=>kae(t,!1),Aae=t=>kae(t,!0);function Tae(t,e){return Qo(t,n=>t.moveVertically(n,e,vae(t).height))}const cz=t=>Tae(t,!1),uz=t=>Tae(t,!0),Ett=t=>Qo(t,e=>Ud(t,e,!0)),Stt=t=>Qo(t,e=>Ud(t,e,!1)),ktt=t=>Qo(t,e=>Ud(t,e,!qs(t))),Ctt=t=>Qo(t,e=>Ud(t,e,qs(t))),Att=t=>Qo(t,e=>st.cursor(t.lineBlockAt(e.head).from)),Ttt=t=>Qo(t,e=>st.cursor(t.lineBlockAt(e.head).to)),dz=({state:t,dispatch:e})=>(e(sc(t,{anchor:0})),!0),hz=({state:t,dispatch:e})=>(e(sc(t,{anchor:t.doc.length})),!0),fz=({state:t,dispatch:e})=>(e(sc(t,{anchor:t.selection.main.anchor,head:0})),!0),pz=({state:t,dispatch:e})=>(e(sc(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),Ntt=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),Ptt=({state:t,dispatch:e})=>{let n=MC(t).map(({from:r,to:s})=>st.range(r,Math.min(s+1,t.doc.length)));return e(t.update({selection:st.create(n),userEvent:"select"})),!0},Itt=({state:t,dispatch:e})=>{let n=Zg(t.selection,r=>{let s=Es(t),i=s.resolveStack(r.from,1);if(r.empty){let o=s.resolveStack(r.from,-1);o.node.from>=i.node.from&&o.node.to<=i.node.to&&(i=o)}for(let o=i;o;o=o.next){let{node:a}=o;if((a.from<r.from&&a.to>=r.to||a.to>r.to&&a.from<=r.from)&&o.next)return st.range(a.to,a.from)}return r});return n.eq(t.selection)?!1:(e(sc(t,n)),!0)},Rtt=({state:t,dispatch:e})=>{let n=t.selection,r=null;return n.ranges.length>1?r=st.create([n.main]):n.main.empty||(r=st.create([st.cursor(n.main.head)])),r?(e(sc(t,r)),!0):!1};function Yv(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:r}=t,s=r.changeByRange(i=>{let{from:o,to:a}=i;if(o==a){let l=e(i);l<o?(n="delete.backward",l=Nw(t,l,!1)):l>o&&(n="delete.forward",l=Nw(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=Nw(t,o,!1),a=Nw(t,a,!0);return o==a?{range:i}:{changes:{from:o,to:a},range:st.cursor(o,o<i.head?-1:1)}});return s.changes.empty?!1:(t.dispatch(r.update(s,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?kt.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function Nw(t,e,n){if(t instanceof kt)for(let r of t.state.facet(kt.atomicRanges).map(s=>s(t)))r.between(e,e,(s,i)=>{s<e&&i>e&&(e=n?i:s)});return e}const Nae=(t,e,n)=>Yv(t,r=>{let s=r.from,{state:i}=t,o=i.doc.lineAt(s),a,l;if(n&&!e&&s>o.from&&s<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,s-o.from))){if(a[a.length-1]=="	")return s-1;let c=kC(a,i.tabSize),u=c%LS(i)||LS(i);for(let d=0;d<u&&a[a.length-1-d]==" ";d++)s--;l=s}else l=_s(o.text,s-o.from,e,e)+o.from,l==s&&o.number!=(e?i.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,s-o.from))&&(l=_s(o.text,l-o.from,!1,!1)+o.from);return l}),_I=t=>Nae(t,!1,!0),Pae=t=>Nae(t,!0,!1),Iae=(t,e)=>Yv(t,n=>{let r=n.head,{state:s}=t,i=s.doc.lineAt(r),o=s.charCategorizer(r);for(let a=null;;){if(r==(e?i.to:i.from)){r==n.head&&i.number!=(e?s.doc.lines:1)&&(r+=e?1:-1);break}let l=_s(i.text,r-i.from,e)+i.from,c=i.text.slice(Math.min(r,l)-i.from,Math.max(r,l)-i.from),u=o(c);if(a!=null&&u!=a)break;(c!=" "||r!=n.head)&&(a=u),r=l}return r}),Rae=t=>Iae(t,!1),Ltt=t=>Iae(t,!0),Ott=t=>Yv(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),Dtt=t=>Yv(t,e=>{let n=t.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),Mtt=t=>Yv(t,e=>{let n=t.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),jtt=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:Cn.of(["",""])},range:st.cursor(r.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},Ftt=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let s=r.from,i=t.doc.lineAt(s),o=s==i.from?s-1:_s(i.text,s-i.from,!1)+i.from,a=s==i.to?s+1:_s(i.text,s-i.from,!0)+i.from;return{changes:{from:o,to:a,insert:t.doc.slice(s,a).append(t.doc.slice(o,s))},range:st.cursor(a)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function MC(t){let e=[],n=-1;for(let r of t.selection.ranges){let s=t.doc.lineAt(r.from),i=t.doc.lineAt(r.to);if(!r.empty&&r.to==i.from&&(i=t.doc.lineAt(r.to-1)),n>=s.number){let o=e[e.length-1];o.to=i.to,o.ranges.push(r)}else e.push({from:s.from,to:i.to,ranges:[r]});n=i.number+1}return e}function Lae(t,e,n){if(t.readOnly)return!1;let r=[],s=[];for(let i of MC(t)){if(n?i.to==t.doc.length:i.from==0)continue;let o=t.doc.lineAt(n?i.to+1:i.from-1),a=o.length+1;if(n){r.push({from:i.to,to:o.to},{from:i.from,insert:o.text+t.lineBreak});for(let l of i.ranges)s.push(st.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{r.push({from:o.from,to:i.from},{from:i.to,insert:t.lineBreak+o.text});for(let l of i.ranges)s.push(st.range(l.anchor-a,l.head-a))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:st.create(s,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Btt=({state:t,dispatch:e})=>Lae(t,e,!1),Utt=({state:t,dispatch:e})=>Lae(t,e,!0);function Oae(t,e,n){if(t.readOnly)return!1;let r=[];for(let s of MC(t))n?r.push({from:s.from,insert:t.doc.slice(s.from,s.to)+t.lineBreak}):r.push({from:s.to,insert:t.lineBreak+t.doc.slice(s.from,s.to)});return e(t.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const $tt=({state:t,dispatch:e})=>Oae(t,e,!1),Htt=({state:t,dispatch:e})=>Oae(t,e,!0),ztt=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(MC(e).map(({from:s,to:i})=>(s>0?s--:i<e.doc.length&&i++,{from:s,to:i}))),r=Zg(e.selection,s=>{let i;if(t.lineWrapping){let o=t.lineBlockAt(s.head),a=t.coordsAtPos(s.head,s.assoc||1);a&&(i=o.bottom+t.documentTop-a.bottom+t.defaultLineHeight/2)}return t.moveVertically(s,!0,i)}).map(n);return t.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function Vtt(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=Es(t).resolveInner(e),r=n.childBefore(e),s=n.childAfter(e),i;return r&&s&&r.to<=e&&s.from>=e&&(i=r.type.prop(on.closedBy))&&i.indexOf(s.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(s.from).from&&!/\S/.test(t.sliceDoc(r.to,s.from))?{from:r.to,to:s.from}:null}const mz=Dae(!1),Wtt=Dae(!0);function Dae(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let r=e.changeByRange(s=>{let{from:i,to:o}=s,a=e.doc.lineAt(i),l=!t&&i==o&&Vtt(e,i);t&&(i=o=(o<=a.to?a:e.doc.lineAt(o)).to);let c=new IC(e,{simulateBreak:i,simulateDoubleBreak:!!l}),u=sD(c,i);for(u==null&&(u=kC(/^\s*/.exec(e.doc.lineAt(i).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:i,to:o}=l:i>a.from&&i<a.from+100&&!/\S/.test(a.text.slice(0,i))&&(i=a.from);let d=["",M1(e,u)];return l&&d.push(M1(e,c.lineIndent(a.from,-1))),{changes:{from:i,to:o,insert:Cn.of(d)},range:st.cursor(i+1+d[1].length)}});return n(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function bD(t,e){let n=-1;return t.changeByRange(r=>{let s=[];for(let o=r.from;o<=r.to;){let a=t.doc.lineAt(o);a.number>n&&(r.empty||r.to>a.from)&&(e(a,s,r),n=a.number),o=a.to+1}let i=t.changes(s);return{changes:s,range:st.range(i.mapPos(r.anchor,1),i.mapPos(r.head,1))}})}const Gtt=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),r=new IC(t,{overrideIndentation:i=>{let o=n[i];return o??-1}}),s=bD(t,(i,o,a)=>{let l=sD(r,i.from);if(l==null)return;/\S/.test(i.text)||(l=0);let c=/^\s*/.exec(i.text)[0],u=M1(t,l);(c!=u||a.from<i.from+c.length)&&(n[i.from]=l,o.push({from:i.from,to:i.from+c.length,insert:u}))});return s.changes.empty||e(t.update(s,{userEvent:"indent"})),!0},qtt=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(bD(t,(n,r)=>{r.push({from:n.from,insert:t.facet(Xg)})}),{userEvent:"input.indent"})),!0),Mae=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(bD(t,(n,r)=>{let s=/^\s*/.exec(n.text)[0];if(!s)return;let i=kC(s,t.tabSize),o=0,a=M1(t,Math.max(0,i-LS(t)));for(;o<s.length&&o<a.length&&s.charCodeAt(o)==a.charCodeAt(o);)o++;r.push({from:n.from+o,to:n.from+s.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),Ktt=t=>(t.setTabFocusMode(),!0),Ytt=[{key:"Ctrl-b",run:fae,shift:wae,preventDefault:!0},{key:"Ctrl-f",run:pae,shift:Eae},{key:"Ctrl-p",run:bae,shift:Cae},{key:"Ctrl-n",run:yae,shift:Aae},{key:"Ctrl-a",run:mtt,shift:Att},{key:"Ctrl-e",run:gtt,shift:Ttt},{key:"Ctrl-d",run:Pae},{key:"Ctrl-h",run:_I},{key:"Ctrl-k",run:Ott},{key:"Ctrl-Alt-h",run:Rae},{key:"Ctrl-o",run:jtt},{key:"Ctrl-t",run:Ftt},{key:"Ctrl-v",run:vI}],Xtt=[{key:"ArrowLeft",run:fae,shift:wae,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:ott,shift:vtt,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:ftt,shift:ktt,preventDefault:!0},{key:"ArrowRight",run:pae,shift:Eae,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:att,shift:_tt,preventDefault:!0},{mac:"Cmd-ArrowRight",run:ptt,shift:Ctt,preventDefault:!0},{key:"ArrowUp",run:bae,shift:Cae,preventDefault:!0},{mac:"Cmd-ArrowUp",run:dz,shift:fz},{mac:"Ctrl-ArrowUp",run:lz,shift:cz},{key:"ArrowDown",run:yae,shift:Aae,preventDefault:!0},{mac:"Cmd-ArrowDown",run:hz,shift:pz},{mac:"Ctrl-ArrowDown",run:vI,shift:uz},{key:"PageUp",run:lz,shift:cz},{key:"PageDown",run:vI,shift:uz},{key:"Home",run:htt,shift:Stt,preventDefault:!0},{key:"Mod-Home",run:dz,shift:fz},{key:"End",run:dtt,shift:Ett,preventDefault:!0},{key:"Mod-End",run:hz,shift:pz},{key:"Enter",run:mz,shift:mz},{key:"Mod-a",run:Ntt},{key:"Backspace",run:_I,shift:_I},{key:"Delete",run:Pae},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Rae},{key:"Mod-Delete",mac:"Alt-Delete",run:Ltt},{mac:"Mod-Backspace",run:Dtt},{mac:"Mod-Delete",run:Mtt}].concat(Ytt.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),Jtt=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:ctt,shift:xtt},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:utt,shift:wtt},{key:"Alt-ArrowUp",run:Btt},{key:"Shift-Alt-ArrowUp",run:$tt},{key:"Alt-ArrowDown",run:Utt},{key:"Shift-Alt-ArrowDown",run:Htt},{key:"Escape",run:Rtt},{key:"Mod-Enter",run:Wtt},{key:"Alt-l",mac:"Ctrl-l",run:Ptt},{key:"Mod-i",run:Itt,preventDefault:!0},{key:"Mod-[",run:Mae},{key:"Mod-]",run:qtt},{key:"Mod-Alt-\\",run:Gtt},{key:"Shift-Mod-k",run:ztt},{key:"Shift-Mod-\\",run:ytt},{key:"Mod-/",run:$et},{key:"Alt-A",run:zet},{key:"Ctrl-m",mac:"Shift-Alt-m",run:Ktt}].concat(Xtt);function Ls(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var s=n[r];typeof s=="string"?t.setAttribute(r,s):s!=null&&(t[r]=s)}e++}for(;e<arguments.length;e++)jae(t,arguments[e]);return t}function jae(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)jae(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}const gz=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class B1{constructor(e,n,r=0,s=e.length,i,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,s),this.bufferStart=r,this.normalize=i?a=>i(gz(a)):gz,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return ga(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=$6(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=Dc(e);let s=this.normalize(n);if(s.length)for(let i=0,o=r;;i++){let a=s.charCodeAt(i),l=this.match(a,o,this.bufferPos+this.bufferStart);if(i==s.length-1){if(l)return this.value=l,this;break}o==r&&i<n.length&&n.charCodeAt(i)==a&&o++}}}match(e,n,r){let s=null;for(let i=0;i<this.matches.length;i+=2){let o=this.matches[i],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?s={from:this.matches[i+1],to:r}:(this.matches[i]++,a=!0)),a||(this.matches.splice(i,2),i-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?s={from:n,to:r}:this.matches.push(1,n)),s&&this.test&&!this.test(s.from,s.to,this.buffer,this.bufferStart)&&(s=null),s}}typeof Symbol<"u"&&(B1.prototype[Symbol.iterator]=function(){return this});const Fae={from:-1,to:-1,match:/.*/.exec("")},yD="gm"+(/x/.unicode==null?"":"u");class Bae{constructor(e,n,r,s=0,i=e.length){if(this.text=e,this.to=i,this.curLine="",this.done=!1,this.value=Fae,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new Uae(e,n,r,s,i);this.re=new RegExp(n,yD+(r?.ignoreCase?"i":"")),this.test=r?.test,this.iter=e.iter();let o=e.lineAt(s);this.curLineStart=o.from,this.matchPos=BS(e,s),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let r=this.curLineStart+n.index,s=r+n[0].length;if(this.matchPos=BS(this.text,s+(r==s?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<s||r>this.value.to)&&(!this.test||this.test(r,s,n)))return this.value={from:r,to:s,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const p3=new WeakMap;class Dm{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,r){let s=p3.get(e);if(!s||s.from>=r||s.to<=n){let a=new Dm(n,e.sliceString(n,r));return p3.set(e,a),a}if(s.from==n&&s.to==r)return s;let{text:i,from:o}=s;return o>n&&(i=e.sliceString(n,o)+i,o=n),s.to<r&&(i+=e.sliceString(s.to,r)),p3.set(e,new Dm(o,i)),new Dm(n,i.slice(n-o,r-o))}}class Uae{constructor(e,n,r,s,i){this.text=e,this.to=i,this.done=!1,this.value=Fae,this.matchPos=BS(e,s),this.re=new RegExp(n,yD+(r?.ignoreCase?"i":"")),this.test=r?.test,this.flat=Dm.get(e,s,this.chunkEnd(s+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let r=this.flat.from+n.index,s=r+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,s,n)))return this.value={from:r,to:s,match:n},this.matchPos=BS(this.text,s+(r==s?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Dm.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Bae.prototype[Symbol.iterator]=Uae.prototype[Symbol.iterator]=function(){return this});function Ztt(t){try{return new RegExp(t,yD),!0}catch{return!1}}function BS(t,e){if(e>=t.length)return e;let n=t.lineAt(e),r;for(;e<n.to&&(r=n.text.charCodeAt(e-n.from))>=56320&&r<57344;)e++;return e}function xI(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=Ls("input",{class:"cm-textfield",name:"line",value:e}),r=Ls("form",{class:"cm-gotoLine",onkeydown:i=>{i.keyCode==27?(i.preventDefault(),t.dispatch({effects:US.of(!1)}),t.focus()):i.keyCode==13&&(i.preventDefault(),s())},onsubmit:i=>{i.preventDefault(),s()}},Ls("label",t.state.phrase("Go to line"),": ",n)," ",Ls("button",{class:"cm-button",type:"submit"},t.state.phrase("go")));function s(){let i=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!i)return;let{state:o}=t,a=o.doc.lineAt(o.selection.main.head),[,l,c,u,d]=i,h=u?+u.slice(1):0,f=c?+c:a.number;if(c&&d){let m=f/100;l&&(m=m*(l=="-"?-1:1)+a.number/o.doc.lines),f=Math.round(o.doc.lines*m)}else c&&l&&(f=f*(l=="-"?-1:1)+a.number);let g=o.doc.line(Math.max(1,Math.min(o.doc.lines,f))),y=st.cursor(g.from+Math.max(0,Math.min(h,g.length)));t.dispatch({effects:[US.of(!1),kt.scrollIntoView(y.from,{y:"center"})],selection:y}),t.focus()}return{dom:r}}const US=nn.define(),bz=cs.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(US)&&(t=n.value);return t},provide:t=>TS.from(t,e=>e?xI:null)}),Qtt=t=>{let e=AS(t,xI);if(!e){let n=[US.of(!0)];t.state.field(bz,!1)==null&&n.push(nn.appendConfig.of([bz,ent])),t.dispatch({effects:n}),e=AS(t,xI)}return e&&e.dom.querySelector("input").select(),!0},ent=kt.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),tnt=({state:t,dispatch:e})=>{let{selection:n}=t,r=st.create(n.ranges.map(s=>t.wordAt(s.head)||st.cursor(s.head)),n.mainIndex);return r.eq(n)?!1:(e(t.update({selection:r})),!0)};function nnt(t,e){let{main:n,ranges:r}=t.selection,s=t.wordAt(n.head),i=s&&s.from==n.from&&s.to==n.to;for(let o=!1,a=new B1(t.doc,e,r[r.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new B1(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),o=!0}else{if(o&&r.some(l=>l.from==a.value.from))continue;if(i){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const rnt=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(i=>i.from===i.to))return tnt({state:t,dispatch:e});let r=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(i=>t.sliceDoc(i.from,i.to)!=r))return!1;let s=nnt(t,r);return s?(e(t.update({selection:t.selection.addRange(st.range(s.from,s.to),!1),effects:kt.scrollIntoView(s.to)})),!0):!1},Qg=Ct.define({combine(t){return Yf(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new mnt(e),scrollToMatch:e=>kt.scrollIntoView(e)})}});class $ae{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Ztt(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new ant(this):new int(this)}getCursor(e,n=0,r){let s=e.doc?e:gn.create({doc:e});return r==null&&(r=s.doc.length),this.regexp?Jp(this,s,n,r):Xp(this,s,n,r)}}class Hae{constructor(e){this.spec=e}}function Xp(t,e,n,r){return new B1(e.doc,t.unquoted,n,r,t.caseSensitive?void 0:s=>s.toLowerCase(),t.wholeWord?snt(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function snt(t,e){return(n,r,s,i)=>((i>n||i+s.length<r)&&(i=Math.max(0,n-2),s=t.sliceString(i,Math.min(t.length,r+2))),(e($S(s,n-i))!=Br.Word||e(HS(s,n-i))!=Br.Word)&&(e(HS(s,r-i))!=Br.Word||e($S(s,r-i))!=Br.Word))}class int extends Hae{constructor(e){super(e)}nextMatch(e,n,r){let s=Xp(this.spec,e,r,e.doc.length).nextOverlapping();if(s.done){let i=Math.min(e.doc.length,n+this.spec.unquoted.length);s=Xp(this.spec,e,0,i).nextOverlapping()}return s.done||s.value.from==n&&s.value.to==r?null:s.value}prevMatchInRange(e,n,r){for(let s=r;;){let i=Math.max(n,s-1e4-this.spec.unquoted.length),o=Xp(this.spec,e,i,s),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(i==n)return null;s-=1e4}}prevMatch(e,n,r){let s=this.prevMatchInRange(e,0,n);return s||(s=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),s&&(s.from!=n||s.to!=r)?s:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let r=Xp(this.spec,e,0,e.doc.length),s=[];for(;!r.next().done;){if(s.length>=n)return null;s.push(r.value)}return s}highlight(e,n,r,s){let i=Xp(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!i.next().done;)s(i.value.from,i.value.to)}}function Jp(t,e,n,r){return new Bae(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?ont(e.charCategorizer(e.selection.main.head)):void 0},n,r)}function $S(t,e){return t.slice(_s(t,e,!1),e)}function HS(t,e){return t.slice(e,_s(t,e))}function ont(t){return(e,n,r)=>!r[0].length||(t($S(r.input,r.index))!=Br.Word||t(HS(r.input,r.index))!=Br.Word)&&(t(HS(r.input,r.index+r[0].length))!=Br.Word||t($S(r.input,r.index+r[0].length))!=Br.Word)}class ant extends Hae{nextMatch(e,n,r){let s=Jp(this.spec,e,r,e.doc.length).next();return s.done&&(s=Jp(this.spec,e,0,n).next()),s.done?null:s.value}prevMatchInRange(e,n,r){for(let s=1;;s++){let i=Math.max(n,r-s*1e4),o=Jp(this.spec,e,i,r),a=null;for(;!o.next().done;)a=o.value;if(a&&(i==n||a.from>i+10))return a;if(i==n)return null}}prevMatch(e,n,r){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(n,r)=>r=="$"?"$":r=="&"?e.match[0]:r!="0"&&+r<e.match.length?e.match[r]:n)}matchAll(e,n){let r=Jp(this.spec,e,0,e.doc.length),s=[];for(;!r.next().done;){if(s.length>=n)return null;s.push(r.value)}return s}highlight(e,n,r,s){let i=Jp(this.spec,e,Math.max(0,n-250),Math.min(r+250,e.doc.length));for(;!i.next().done;)s(i.value.from,i.value.to)}}const U1=nn.define(),vD=nn.define(),ud=cs.define({create(t){return new m3(wI(t).create(),null)},update(t,e){for(let n of e.effects)n.is(U1)?t=new m3(n.value.create(),t.panel):n.is(vD)&&(t=new m3(t.query,n.value?_D:null));return t},provide:t=>TS.from(t,e=>e.panel)});class m3{constructor(e,n){this.query=e,this.panel=n}}const lnt=_n.mark({class:"cm-searchMatch"}),cnt=_n.mark({class:"cm-searchMatch cm-searchMatch-selected"}),unt=ws.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(ud))}update(t){let e=t.state.field(ud);(e!=t.startState.field(ud)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return _n.none;let{view:n}=this,r=new Cf;for(let s=0,i=n.visibleRanges,o=i.length;s<o;s++){let{from:a,to:l}=i[s];for(;s<o-1&&l>i[s+1].from-2*250;)l=i[++s].to;t.highlight(n.state,a,l,(c,u)=>{let d=n.state.selection.ranges.some(h=>h.from==c&&h.to==u);r.add(c,u,d?cnt:lnt)})}return r.finish()}},{decorations:t=>t.decorations});function Xv(t){return e=>{let n=e.state.field(ud,!1);return n&&n.query.spec.valid?t(e,n):Wae(e)}}const zS=Xv((t,{query:e})=>{let{to:n}=t.state.selection.main,r=e.nextMatch(t.state,n,n);if(!r)return!1;let s=st.single(r.from,r.to),i=t.state.facet(Qg);return t.dispatch({selection:s,effects:[xD(t,r),i.scrollToMatch(s.main,t)],userEvent:"select.search"}),Vae(t),!0}),VS=Xv((t,{query:e})=>{let{state:n}=t,{from:r}=n.selection.main,s=e.prevMatch(n,r,r);if(!s)return!1;let i=st.single(s.from,s.to),o=t.state.facet(Qg);return t.dispatch({selection:i,effects:[xD(t,s),o.scrollToMatch(i.main,t)],userEvent:"select.search"}),Vae(t),!0}),dnt=Xv((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:st.create(n.map(r=>st.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),hnt=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:s}=n.main,i=[],o=0;for(let a=new B1(t.doc,t.sliceDoc(r,s));!a.next().done;){if(i.length>1e3)return!1;a.value.from==r&&(o=i.length),i.push(st.range(a.value.from,a.value.to))}return e(t.update({selection:st.create(i,o),userEvent:"select.search.matches"})),!0},yz=Xv((t,{query:e})=>{let{state:n}=t,{from:r,to:s}=n.selection.main;if(n.readOnly)return!1;let i=e.nextMatch(n,r,r);if(!i)return!1;let o=i,a=[],l,c,u=[];if(o.from==r&&o.to==s&&(c=n.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:c}),o=e.nextMatch(n,o.from,o.to),u.push(kt.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+"."))),o){let d=a.length==0||a[0].from>=i.to?0:i.to-i.from-c.length;l=st.single(o.from-d,o.to-d),u.push(xD(t,o)),u.push(n.facet(Qg).scrollToMatch(l.main,t))}return t.dispatch({changes:a,selection:l,effects:u,userEvent:"input.replace"}),!0}),fnt=Xv((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(s=>{let{from:i,to:o}=s;return{from:i,to:o,insert:e.getReplacement(s)}});if(!n.length)return!1;let r=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:kt.announce.of(r),userEvent:"input.replace.all"}),!0});function _D(t){return t.state.facet(Qg).createPanel(t)}function wI(t,e){var n,r,s,i,o;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let c=t.facet(Qg);return new $ae({search:((n=e?.literal)!==null&&n!==void 0?n:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(r=e?.caseSensitive)!==null&&r!==void 0?r:c.caseSensitive,literal:(s=e?.literal)!==null&&s!==void 0?s:c.literal,regexp:(i=e?.regexp)!==null&&i!==void 0?i:c.regexp,wholeWord:(o=e?.wholeWord)!==null&&o!==void 0?o:c.wholeWord})}function zae(t){let e=AS(t,_D);return e&&e.dom.querySelector("[main-field]")}function Vae(t){let e=zae(t);e&&e==t.root.activeElement&&e.select()}const Wae=t=>{let e=t.state.field(ud,!1);if(e&&e.panel){let n=zae(t);if(n&&n!=t.root.activeElement){let r=wI(t.state,e.query.spec);r.valid&&t.dispatch({effects:U1.of(r)}),n.focus(),n.select()}}else t.dispatch({effects:[vD.of(!0),e?U1.of(wI(t.state,e.query.spec)):nn.appendConfig.of(bnt)]});return!0},Gae=t=>{let e=t.state.field(ud,!1);if(!e||!e.panel)return!1;let n=AS(t,_D);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:vD.of(!1)}),!0},pnt=[{key:"Mod-f",run:Wae,scope:"editor search-panel"},{key:"F3",run:zS,shift:VS,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:zS,shift:VS,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Gae,scope:"editor search-panel"},{key:"Mod-Shift-l",run:hnt},{key:"Mod-Alt-g",run:Qtt},{key:"Mod-d",run:rnt,preventDefault:!0}];class mnt{constructor(e){this.view=e;let n=this.query=e.state.field(ud).query.spec;this.commit=this.commit.bind(this),this.searchField=Ls("input",{value:n.search,placeholder:Hi(e,"Find"),"aria-label":Hi(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Ls("input",{value:n.replace,placeholder:Hi(e,"Replace"),"aria-label":Hi(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Ls("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=Ls("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=Ls("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function r(s,i,o){return Ls("button",{class:"cm-button",name:s,onclick:i,type:"button"},o)}this.dom=Ls("div",{onkeydown:s=>this.keydown(s),class:"cm-search"},[this.searchField,r("next",()=>zS(e),[Hi(e,"next")]),r("prev",()=>VS(e),[Hi(e,"previous")]),r("select",()=>dnt(e),[Hi(e,"all")]),Ls("label",null,[this.caseField,Hi(e,"match case")]),Ls("label",null,[this.reField,Hi(e,"regexp")]),Ls("label",null,[this.wordField,Hi(e,"by word")]),...e.state.readOnly?[]:[Ls("br"),this.replaceField,r("replace",()=>yz(e),[Hi(e,"replace")]),r("replaceAll",()=>fnt(e),[Hi(e,"replace all")])],Ls("button",{name:"close",onclick:()=>Gae(e),"aria-label":Hi(e,"close"),type:"button"},[""])])}commit(){let e=new $ae({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:U1.of(e)}))}keydown(e){ZJe(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?VS:zS)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),yz(this.view))}update(e){for(let n of e.transactions)for(let r of n.effects)r.is(U1)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Qg).top}}function Hi(t,e){return t.state.phrase(e)}const Pw=30,Iw=/[\s\.,:;?!]/;function xD(t,{from:e,to:n}){let r=t.state.doc.lineAt(e),s=t.state.doc.lineAt(n).to,i=Math.max(r.from,e-Pw),o=Math.min(s,n+Pw),a=t.state.sliceDoc(i,o);if(i!=r.from){for(let l=0;l<Pw;l++)if(!Iw.test(a[l+1])&&Iw.test(a[l])){a=a.slice(l);break}}if(o!=s){for(let l=a.length-1;l>a.length-Pw;l--)if(!Iw.test(a[l-1])&&Iw.test(a[l])){a=a.slice(0,l);break}}return kt.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${r.number}.`)}const gnt=kt.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),bnt=[ud,Bd.low(unt),gnt];function ynt(){return p.jsx("div",{className:"flex items-center justify-center absolute inset-0 z-10 text-sm bg-tk-elements-app-backgroundColor text-tk-elements-app-textColor",children:"File format cannot be displayed."})}function WS(){return WS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},WS.apply(null,arguments)}var qae=t=>{var{theme:e,settings:n={},styles:r=[]}=t,s={".cm-gutters":{}},i={};n.background&&(i.backgroundColor=n.background),n.backgroundImage&&(i.backgroundImage=n.backgroundImage),n.foreground&&(i.color=n.foreground),n.fontSize&&(i.fontSize=n.fontSize),(n.background||n.foreground)&&(s["&"]=i),n.fontFamily&&(s["&.cm-editor .cm-scroller"]={fontFamily:n.fontFamily}),n.gutterBackground&&(s[".cm-gutters"].backgroundColor=n.gutterBackground),n.gutterForeground&&(s[".cm-gutters"].color=n.gutterForeground),n.gutterBorder&&(s[".cm-gutters"].borderRightColor=n.gutterBorder),n.caret&&(s[".cm-content"]={caretColor:n.caret},s[".cm-cursor, .cm-dropCursor"]={borderLeftColor:n.caret});var o={};n.gutterActiveForeground&&(o.color=n.gutterActiveForeground),n.lineHighlight&&(s[".cm-activeLine"]={backgroundColor:n.lineHighlight},o.backgroundColor=n.lineHighlight),s[".cm-activeLineGutter"]=o,n.selection&&(s["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:n.selection+" !important"}),n.selectionMatch&&(s["& .cm-selectionMatch"]={backgroundColor:n.selectionMatch});var a=kt.theme(s,{dark:e==="dark"}),l=RC.define(r),c=[a,TQe(l)];return c},vnt={background:"#ffffff",foreground:"#383a42",caret:"#000",selection:"#add6ff",selectionMatch:"#a8ac94",lineHighlight:"#99999926",gutterBackground:"#fff",gutterForeground:"#237893",gutterActiveForeground:"#0b216f",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'},_nt=[{tag:[Ge.keyword,Ge.operatorKeyword,Ge.modifier,Ge.color,Ge.constant(Ge.name),Ge.standard(Ge.name),Ge.standard(Ge.tagName),Ge.special(Ge.brace),Ge.atom,Ge.bool,Ge.special(Ge.variableName)],color:"#0000ff"},{tag:[Ge.moduleKeyword,Ge.controlKeyword],color:"#af00db"},{tag:[Ge.name,Ge.deleted,Ge.character,Ge.macroName,Ge.propertyName,Ge.variableName,Ge.labelName,Ge.definition(Ge.name)],color:"#0070c1"},{tag:Ge.heading,fontWeight:"bold",color:"#0070c1"},{tag:[Ge.typeName,Ge.className,Ge.tagName,Ge.number,Ge.changed,Ge.annotation,Ge.self,Ge.namespace],color:"#267f99"},{tag:[Ge.function(Ge.variableName),Ge.function(Ge.propertyName)],color:"#795e26"},{tag:[Ge.number],color:"#098658"},{tag:[Ge.operator,Ge.punctuation,Ge.separator,Ge.url,Ge.escape,Ge.regexp],color:"#383a42"},{tag:[Ge.regexp],color:"#af00db"},{tag:[Ge.special(Ge.string),Ge.processingInstruction,Ge.string,Ge.inserted],color:"#a31515"},{tag:[Ge.angleBracket],color:"#383a42"},{tag:Ge.strong,fontWeight:"bold"},{tag:Ge.emphasis,fontStyle:"italic"},{tag:Ge.strikethrough,textDecoration:"line-through"},{tag:[Ge.meta,Ge.comment],color:"#008000"},{tag:Ge.link,color:"#4078f2",textDecoration:"underline"},{tag:Ge.invalid,color:"#e45649"}];function xnt(t){var{theme:e="light",settings:n={},styles:r=[]}={};return qae({theme:e,settings:WS({},vnt,n),styles:[..._nt,...r]})}var wnt=xnt(),Ent={background:"#1e1e1e",foreground:"#9cdcfe",caret:"#c6c6c6",selection:"#6199ff2f",selectionMatch:"#72a1ff59",lineHighlight:"#ffffff0f",gutterBackground:"#1e1e1e",gutterForeground:"#838383",gutterActiveForeground:"#fff",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'},Snt=[{tag:[Ge.keyword,Ge.operatorKeyword,Ge.modifier,Ge.color,Ge.constant(Ge.name),Ge.standard(Ge.name),Ge.standard(Ge.tagName),Ge.special(Ge.brace),Ge.atom,Ge.bool,Ge.special(Ge.variableName)],color:"#569cd6"},{tag:[Ge.controlKeyword,Ge.moduleKeyword],color:"#c586c0"},{tag:[Ge.name,Ge.deleted,Ge.character,Ge.macroName,Ge.propertyName,Ge.variableName,Ge.labelName,Ge.definition(Ge.name)],color:"#9cdcfe"},{tag:Ge.heading,fontWeight:"bold",color:"#9cdcfe"},{tag:[Ge.typeName,Ge.className,Ge.tagName,Ge.number,Ge.changed,Ge.annotation,Ge.self,Ge.namespace],color:"#4ec9b0"},{tag:[Ge.function(Ge.variableName),Ge.function(Ge.propertyName)],color:"#dcdcaa"},{tag:[Ge.number],color:"#b5cea8"},{tag:[Ge.operator,Ge.punctuation,Ge.separator,Ge.url,Ge.escape,Ge.regexp],color:"#d4d4d4"},{tag:[Ge.regexp],color:"#d16969"},{tag:[Ge.special(Ge.string),Ge.processingInstruction,Ge.string,Ge.inserted],color:"#ce9178"},{tag:[Ge.angleBracket],color:"#808080"},{tag:Ge.strong,fontWeight:"bold"},{tag:Ge.emphasis,fontStyle:"italic"},{tag:Ge.strikethrough,textDecoration:"line-through"},{tag:[Ge.meta,Ge.comment],color:"#6a9955"},{tag:Ge.link,color:"#6a9955",textDecoration:"underline"},{tag:Ge.invalid,color:"#ff0000"}];function knt(t){var{theme:e="dark",settings:n={},styles:r=[]}={};return qae({theme:e,settings:WS({},Ent,n),styles:[...Snt,...r]})}var Cnt=knt();kt.theme({},{dark:!0});const EI=new Kg;function Ant(t,e={}){return[Tnt(e),t==="dark"?EI.of([Xae()]):EI.of([Yae()])]}function Kae(t){return EI.reconfigure(t==="dark"?Xae():Yae())}function Tnt(t){return kt.theme({"&":{fontSize:t.fontSize??"12px"},"&.cm-editor":{height:"100%",background:"var(--cm-backgroundColor)",color:"var(--cm-textColor)"},".cm-cursor":{borderLeft:"var(--cm-cursor-width) solid var(--cm-cursor-backgroundColor)"},".cm-scroller":{lineHeight:"1.5","&:focus-visible":{outline:"none"}},".cm-line":{padding:"0 0 0 4px"},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{backgroundColor:"var(--cm-selection-backgroundColorFocused) !important",opacity:"var(--cm-selection-backgroundOpacityFocused, 0.3)"},"&:not(.cm-focused) > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{backgroundColor:"var(--cm-selection-backgroundColorBlured)",opacity:"var(--cm-selection-backgroundOpacityBlured, 0.3)"},"&.cm-focused > .cm-scroller .cm-matchingBracket":{backgroundColor:"var(--cm-matching-bracket)"},".cm-activeLine":{background:"var(--cm-activeLineBackgroundColor)"},".cm-gutters":{background:"var(--cm-gutter-backgroundColor)",borderRight:0,color:"var(--cm-gutter-textColor)"},".cm-gutter":{"&.cm-lineNumbers":{fontFamily:"Roboto Mono, monospace",fontSize:t.gutterFontSize??t.fontSize??"12px",minWidth:"40px"},"& .cm-activeLineGutter":{background:"transparent",color:"var(--cm-gutter-activeLineTextColor)"},"&.cm-foldGutter .cm-gutterElement > .fold-icon":{cursor:"pointer",color:"var(--cm-foldGutter-textColor)",transform:"translateY(2px)","&:hover":{color:"var(--cm-foldGutter-textColorHover)"}}},".cm-foldGutter .cm-gutterElement":{padding:"0 4px"},".cm-tooltip-autocomplete > ul > li":{minHeight:"18px"},".cm-panel.cm-search label":{marginLeft:"2px",fontSize:"12px"},".cm-panel.cm-search .cm-button":{fontSize:"12px"},".cm-panel.cm-search .cm-textfield":{fontSize:"12px"},".cm-panel.cm-search input[type=checkbox]":{position:"relative",transform:"translateY(2px)",marginRight:"4px"},".cm-panels":{borderColor:"var(--cm-panels-borderColor)"},".cm-panels-bottom":{borderTop:"1px solid var(--cm-panels-borderColor)",backgroundColor:"transparent"},".cm-panel.cm-search":{background:"var(--cm-search-backgroundColor)",color:"var(--cm-search-textColor)",padding:"8px"},".cm-search .cm-button":{background:"var(--cm-search-button-backgroundColor)",borderColor:"var(--cm-search-button-borderColor)",color:"var(--cm-search-button-textColor)",borderRadius:"4px","&:hover":{color:"var(--cm-search-button-textColorHover)"},"&:focus-visible":{outline:"none",borderColor:"var(--cm-search-button-borderColorFocused)"},"&:hover:not(:focus-visible)":{background:"var(--cm-search-button-backgroundColorHover)",borderColor:"var(--cm-search-button-borderColorHover)"},"&:hover:focus-visible":{background:"var(--cm-search-button-backgroundColorHover)",borderColor:"var(--cm-search-button-borderColorFocused)"}},".cm-panel.cm-search [name=close]":{top:"6px",right:"6px",padding:"0 6px",fontSize:"1rem",backgroundColor:"var(--cm-search-closeButton-backgroundColor)",color:"var(--cm-search-closeButton-textColor)","&:hover":{"border-radius":"6px",color:"var(--cm-search-closeButton-textColorHover)",backgroundColor:"var(--cm-search-closeButton-backgroundColorHover)"}},".cm-search input":{background:"var(--cm-search-input-backgroundColor)",borderColor:"var(--cm-search-input-borderColor)",color:"var(--cm-search-input-textColor)",outline:"none",borderRadius:"4px","&:focus-visible":{borderColor:"var(--cm-search-input-borderColorFocused)"}},".cm-tooltip":{background:"var(--cm-tooltip-backgroundColor)",border:"1px solid transparent",borderColor:"var(--cm-tooltip-borderColor)",color:"var(--cm-tooltip-textColor)"},".cm-tooltip.cm-tooltip-autocomplete ul li[aria-selected]":{background:"var(--cm-tooltip-backgroundColorSelected)",color:"var(--cm-tooltip-textColorSelected)"},".cm-searchMatch":{backgroundColor:"var(--cm-searchMatch-backgroundColor)"},".cm-tooltip.cm-readonly-tooltip":{padding:"4px",whiteSpace:"nowrap",backgroundColor:"var(--bolt-elements-bg-depth-2)",borderColor:"var(--bolt-elements-borderColorActive)","& .cm-tooltip-arrow:before":{borderTopColor:"var(--bolt-elements-borderColorActive)"},"& .cm-tooltip-arrow:after":{borderTopColor:"transparent"}}})}function Yae(){return wnt}function Xae(){return Cnt}const Nnt={key:"Tab",run:Pnt,shift:Mae};function Pnt({state:t,dispatch:e}){return t.readOnly?!1:(e(t.update(Int(t,(n,r,s)=>{s.push({from:n,to:r,insert:t.facet(Xg)})}),{userEvent:"input.indent"})),!0)}function Int(t,e){return t.changeByRange(n=>{const r=[],s=t.doc.lineAt(n.from);if(n.from===n.to)e(n.from,void 0,r,s);else if(n.from<n.to&&n.to<=s.to)e(n.from,n.to,r,s);else{let o=-1;for(let a=n.from;a<=n.to;){const l=t.doc.lineAt(a);l.number>o&&(n.empty||n.to>l.from)&&(e(l.from,void 0,r,l),o=l.number),a=l.to+1}}const i=t.changes(r);return{changes:r,range:st.range(i.mapPos(n.anchor,1),i.mapPos(n.head,1))}})}const Rnt=[ms.of({name:"VUE",extensions:["vue"],async load(){return ve(()=>import("./index-CeA6VvNC.js"),__vite__mapDeps([96,97,98,1,2,99,100])).then(t=>t.vue())}}),ms.of({name:"TS",extensions:["ts"],async load(){return ve(()=>import("./index-BuGqNPwf.js"),__vite__mapDeps([100,98,1,2])).then(t=>t.javascript({typescript:!0}))}}),ms.of({name:"JS",extensions:["js","mjs","cjs"],async load(){return ve(()=>import("./index-BuGqNPwf.js"),__vite__mapDeps([100,98,1,2])).then(t=>t.javascript())}}),ms.of({name:"TSX",extensions:["tsx"],async load(){return ve(()=>import("./index-BuGqNPwf.js"),__vite__mapDeps([100,98,1,2])).then(t=>t.javascript({jsx:!0,typescript:!0}))}}),ms.of({name:"JSX",extensions:["jsx"],async load(){return ve(()=>import("./index-BuGqNPwf.js"),__vite__mapDeps([100,98,1,2])).then(t=>t.javascript({jsx:!0}))}}),ms.of({name:"HTML",extensions:["html"],async load(){return ve(()=>import("./index-BO4dp53l.js"),__vite__mapDeps([97,98,1,2,99,100])).then(t=>t.html())}}),ms.of({name:"CSS",extensions:["css"],async load(){return ve(()=>import("./index-B1_69SMo.js"),__vite__mapDeps([99,98,1,2])).then(t=>t.css())}}),ms.of({name:"SASS",extensions:["sass"],async load(){return ve(()=>import("./index-yPh6CZU4.js"),__vite__mapDeps([101,98,1,2,99])).then(t=>t.sass({indented:!0}))}}),ms.of({name:"SCSS",extensions:["scss"],async load(){return ve(()=>import("./index-yPh6CZU4.js"),__vite__mapDeps([101,98,1,2,99])).then(t=>t.sass({indented:!1}))}}),ms.of({name:"JSON",extensions:["json"],async load(){return ve(()=>import("./index-q8kqF5P8.js"),__vite__mapDeps([102,98,1,2])).then(t=>t.json())}}),ms.of({name:"Markdown",extensions:["md"],async load(){return ve(()=>import("./index-DsBAg0hk.js"),__vite__mapDeps([103,97,98,1,2,99,100])).then(t=>t.markdown())}}),ms.of({name:"Wasm",extensions:["wat"],async load(){return ve(()=>import("./index-CTEPw3x3.js"),__vite__mapDeps([104,98,1,2])).then(t=>t.wast())}}),ms.of({name:"Python",extensions:["py"],async load(){return ve(()=>import("./index-BZp5qYPI.js"),__vite__mapDeps([105,98,1,2])).then(t=>t.python())}}),ms.of({name:"C++",extensions:["cpp"],async load(){return ve(()=>import("./index-DRqLTxC_.js"),__vite__mapDeps([106,98,1,2])).then(t=>t.cpp())}})];async function Lnt(t){const e=ms.matchFilename(Rnt,t);if(e)return await e.load()}const Ont=Di("CodeMirrorEditor"),Jae=nn.define(),Dnt=cs.define({create:()=>[],update(t,e){if(!e.state.readOnly)return[];for(const n of e.effects)if(n.is(Jae)&&n.value)return Fnt(e.state);return[]},provide:t=>eD.computeN([t],e=>e.field(t))}),Zae=nn.define(),vz=cs.define({create(){return!0},update(t,e){for(const n of e.effects)if(n.is(Zae))return n.value;return t}}),Qae=T.memo(({id:t,doc:e,debounceScroll:n=100,debounceChange:r=150,autoFocusOnDocumentChange:s=!1,editable:i=!0,onScroll:o,onChange:a,onSave:l,theme:c,settings:u,className:d=""})=>{Ag.trace("CodeMirrorEditor");const[h]=T.useState(new Kg),f=T.useRef(null),g=T.useRef(),y=T.useRef(),m=T.useRef(),b=T.useRef(),v=T.useRef(o),_=T.useRef(a),E=T.useRef(l);return T.useEffect(()=>{v.current=o,_.current=a,E.current=l,m.current=e,y.current=c}),T.useEffect(()=>{const w=Tv(k=>{_.current?.(k)},r),S=new kt({parent:f.current,dispatchTransactions(k){const x=S.state.selection;S.update(k);const I=S.state.selection,R=I!==x&&(I===void 0||x===void 0||!I.eq(x));m.current&&(k.some(C=>C.docChanged)||R)&&(w({selection:S.state.selection,content:S.state.doc.toString()}),b.current.set(m.current.filePath,S.state))}});return g.current=S,()=>{g.current?.destroy(),g.current=void 0}},[]),T.useEffect(()=>{g.current&&g.current.dispatch({effects:[Kae(c)]})},[c]),T.useEffect(()=>{b.current=new Map},[t]),T.useEffect(()=>{const w=b.current,S=g.current,k=y.current;if(!e){const I=_z("",k,u,v,n,E,[h.of([])]);S.setState(I),Mnt(S);return}if(e.isBinary)return;e.filePath===""&&Ont.warn("File path should not be empty");let x=w.get(e.filePath);x||(x=_z(e.value,k,u,v,n,E,[h.of([])]),w.set(e.filePath,x)),S.setState(x),jnt(S,k,i,h,s,e)},[e?.value,i,e?.filePath,s]),p.jsxs("div",{className:Pe("relative h-full",d),children:[e?.isBinary&&p.jsx(ynt,{}),p.jsx("div",{className:"h-full overflow-hidden",ref:f})]})});Qae.displayName="CodeMirrorEditor";function _z(t,e,n,r,s,i,o){return gn.create({doc:t,extensions:[kt.domEventHandlers({scroll:Tv((a,l)=>{a.target===l.scrollDOM&&r.current?.({left:l.scrollDOM.scrollLeft,top:l.scrollDOM.scrollTop})},s),keydown:(a,l)=>l.state.readOnly?(l.dispatch({effects:[Jae.of(a.key!=="Escape")]}),!0):!1}),Ant(e,n),Xet(),PC.of([...Jtt,...itt,...pnt,{key:"Tab",run:tae},{key:"Mod-s",preventDefault:!0,run:()=>(i.current?.(),!0)},Nnt]),Xg.of("	"),Fet({closeOnBlur:!1}),mZe({position:"absolute",parent:document.body,tooltipSpace:a=>{const l=a.dom.getBoundingClientRect();return{top:l.top-50,left:l.left,bottom:l.bottom,right:l.right+10}}}),Tet(),TZe(),uZe(),cZe(),sZe(),jQe(),gn.tabSize.of(n?.tabSize??2),mQe(),Dnt,vz,gn.readOnly.from(vz,a=>!a),IZe(),dZe(),kQe({markerDOM:a=>{const l=document.createElement("div");return l.className=`fold-icon ${a?"i-ph-caret-down-bold":"i-ph-caret-right-bold"}`,l}}),...o]})}function Mnt(t){t.dispatch({selection:{anchor:0},changes:{from:0,to:t.state.doc.length,insert:""}}),t.scrollDOM.scrollTo(0,0)}function jnt(t,e,n,r,s,i){i.value!==t.state.doc.toString()&&t.dispatch({selection:{anchor:0},changes:{from:0,to:t.state.doc.length,insert:i.value}}),t.dispatch({effects:[Zae.of(n&&!i.isBinary)]}),Lnt(i.filePath).then(o=>{o&&(t.dispatch({effects:[r.reconfigure([o]),Kae(e)]}),requestAnimationFrame(()=>{const a=t.scrollDOM.scrollLeft,l=t.scrollDOM.scrollTop,c=i.scroll?.left??0,u=i.scroll?.top??0;s&&n&&(a!==c||l!==u?t.scrollDOM.addEventListener("scroll",()=>{t.focus()},{once:!0}):t.focus()),t.scrollDOM.scrollTo(c,u)}))})}function Fnt(t){return t.readOnly?t.selection.ranges.filter(e=>e.empty).map(e=>({pos:e.head,above:!0,strictSide:!0,arrow:!0,create:()=>{const n=document.createElement("div");return n.className="cm-readonly-tooltip",n.textContent="Cannot edit file while AI response is being generated",{dom:n}}})):[]}const pm=T.memo(({className:t,disabledClassName:e,disabled:n=!1,children:r,onClick:s})=>p.jsx("button",{className:Pe("flex items-center shrink-0 gap-1.5 px-1.5 rounded-md py-0.5 text-bolt-elements-item-contentDefault bg-transparent enabled:hover:text-bolt-elements-item-contentActive enabled:hover:bg-bolt-elements-item-backgroundActive disabled:cursor-not-allowed",{[Pe("opacity-30",e)]:n},t),disabled:n,onClick:i=>{n||s?.(i)},children:r})),Bnt=T.memo,Unt=Bnt(({selected:t,options:e,setSelected:n})=>{const r=!!e.middle,s=t===e.left.value,i=r&&e.middle?t===e.middle.value:!1;return p.jsxs("div",{className:"flex items-center flex-wrap shrink-0 gap-1 bg-bolt-elements-background-depth-1 overflow-hidden rounded-full p-1",children:[p.jsx(g3,{selected:s,setSelected:()=>n?.(e.left.value),children:e.left.text}),e.middle&&p.jsx(g3,{selected:i,setSelected:()=>n?.(e.middle.value),children:e.middle.text}),p.jsx(g3,{selected:!s&&!i,setSelected:()=>n?.(e.right.value),children:e.right.text})]})}),g3=T.memo(({selected:t,children:e,setSelected:n})=>p.jsxs("button",{onClick:n,className:Pe("bg-transparent text-sm px-2.5 py-0.5 rounded-full relative",t?"text-bolt-elements-item-contentAccent":"text-bolt-elements-item-contentDefault hover:text-bolt-elements-item-contentActive"),children:[p.jsx("span",{className:"relative z-10",children:e}),t&&p.jsx(ot.span,{layoutId:"pill-tab",transition:{duration:.2,ease:so},className:"absolute inset-0 z-0 bg-bolt-elements-item-backgroundAccent rounded-full"})]})),{createElement:wg,createContext:$nt,forwardRef:ele,useCallback:ki,useContext:tle,useEffect:af,useImperativeHandle:nle,useLayoutEffect:Hnt,useMemo:znt,useRef:Ai,useState:Mm}=$m,xz=$m[`useId${Math.random()}`.slice(0,5)],Vnt=Hnt,jC=$nt(null);jC.displayName="PanelGroupContext";const lf=Vnt,Wnt=typeof xz=="function"?xz:()=>null;let Gnt=0;function wD(t=null){const e=Wnt(),n=Ai(t||e||null);return n.current===null&&(n.current=""+Gnt++),t??n.current}function rle({children:t,className:e="",collapsedSize:n,collapsible:r,defaultSize:s,forwardedRef:i,id:o,maxSize:a,minSize:l,onCollapse:c,onExpand:u,onResize:d,order:h,style:f,tagName:g="div",...y}){const m=tle(jC);if(m===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:b,expandPanel:v,getPanelSize:_,getPanelStyle:E,groupId:w,isPanelCollapsed:S,reevaluatePanelConstraints:k,registerPanel:x,resizePanel:I,unregisterPanel:R}=m,C=wD(o),N=Ai({callbacks:{onCollapse:c,onExpand:u,onResize:d},constraints:{collapsedSize:n,collapsible:r,defaultSize:s,maxSize:a,minSize:l},id:C,idIsFromProps:o!==void 0,order:h});Ai({didLogMissingDefaultSizeWarning:!1}),lf(()=>{const{callbacks:P,constraints:$}=N.current,ee={...$};N.current.id=C,N.current.idIsFromProps=o!==void 0,N.current.order=h,P.onCollapse=c,P.onExpand=u,P.onResize=d,$.collapsedSize=n,$.collapsible=r,$.defaultSize=s,$.maxSize=a,$.minSize=l,(ee.collapsedSize!==$.collapsedSize||ee.collapsible!==$.collapsible||ee.maxSize!==$.maxSize||ee.minSize!==$.minSize)&&k(N.current,ee)}),lf(()=>{const P=N.current;return x(P),()=>{R(P)}},[h,C,x,R]),nle(i,()=>({collapse:()=>{b(N.current)},expand:P=>{v(N.current,P)},getId(){return C},getSize(){return _(N.current)},isCollapsed(){return S(N.current)},isExpanded(){return!S(N.current)},resize:P=>{I(N.current,P)}}),[b,v,_,S,C,I]);const O=E(N.current,s);return wg(g,{...y,children:t,className:e,id:o,style:{...O,...f},"data-panel":"","data-panel-collapsible":r||void 0,"data-panel-group-id":w,"data-panel-id":C,"data-panel-size":parseFloat(""+O.flexGrow).toFixed(1)})}const Sy=ele((t,e)=>wg(rle,{...t,forwardedRef:e}));rle.displayName="Panel";Sy.displayName="forwardRef(Panel)";let SI=null,$h=null;function qnt(t,e){if(e){const n=(e&lle)!==0,r=(e&cle)!==0,s=(e&ule)!==0,i=(e&dle)!==0;if(n)return s?"se-resize":i?"ne-resize":"e-resize";if(r)return s?"sw-resize":i?"nw-resize":"w-resize";if(s)return"s-resize";if(i)return"n-resize"}switch(t){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function Knt(){$h!==null&&(document.head.removeChild($h),SI=null,$h=null)}function b3(t,e){const n=qnt(t,e);SI!==n&&(SI=n,$h===null&&($h=document.createElement("style"),document.head.appendChild($h)),$h.innerHTML=`*{cursor: ${n}!important;}`)}function sle(t){return t.type==="keydown"}function ile(t){return t.type.startsWith("pointer")}function ole(t){return t.type.startsWith("mouse")}function FC(t){if(ile(t)){if(t.isPrimary)return{x:t.clientX,y:t.clientY}}else if(ole(t))return{x:t.clientX,y:t.clientY};return{x:1/0,y:1/0}}function Ynt(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function Xnt(t,e,n){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function Jnt(t,e){if(t===e)throw new Error("Cannot compare node with itself");const n={a:Sz(t),b:Sz(e)};let r;for(;n.a.at(-1)===n.b.at(-1);)t=n.a.pop(),e=n.b.pop(),r=t;Zt(r,"Stacking order can only be calculated for elements with a common ancestor");const s={a:Ez(wz(n.a)),b:Ez(wz(n.b))};if(s.a===s.b){const i=r.childNodes,o={a:n.a.at(-1),b:n.b.at(-1)};let a=i.length;for(;a--;){const l=i[a];if(l===o.a)return 1;if(l===o.b)return-1}}return Math.sign(s.a-s.b)}const Znt=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function Qnt(t){var e;const n=getComputedStyle((e=ale(t))!==null&&e!==void 0?e:t).display;return n==="flex"||n==="inline-flex"}function ert(t){const e=getComputedStyle(t);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||Qnt(t))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||Znt.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function wz(t){let e=t.length;for(;e--;){const n=t[e];if(Zt(n,"Missing node"),ert(n))return n}return null}function Ez(t){return t&&Number(getComputedStyle(t).zIndex)||0}function Sz(t){const e=[];for(;t;)e.push(t),t=ale(t);return e}function ale(t){const{parentNode:e}=t;return e&&e instanceof ShadowRoot?e.host:e}const lle=1,cle=2,ule=4,dle=8,trt=Ynt()==="coarse";let ka=[],jm=!1,Yu=new Map,BC=new Map;const $1=new Set;function nrt(t,e,n,r,s){var i;const{ownerDocument:o}=e,a={direction:n,element:e,hitAreaMargins:r,setResizeHandlerState:s},l=(i=Yu.get(o))!==null&&i!==void 0?i:0;return Yu.set(o,l+1),$1.add(a),GS(),function(){var u;BC.delete(t),$1.delete(a);const d=(u=Yu.get(o))!==null&&u!==void 0?u:1;if(Yu.set(o,d-1),GS(),d===1&&Yu.delete(o),ka.includes(a)){const h=ka.indexOf(a);h>=0&&ka.splice(h,1),SD(),s("up",!0,null)}}}function kz(t){const{target:e}=t,{x:n,y:r}=FC(t);jm=!0,ED({target:e,x:n,y:r}),GS(),ka.length>0&&(qS("down",t),t.preventDefault(),t.stopPropagation())}function ab(t){const{x:e,y:n}=FC(t);if(jm&&t.buttons===0&&(jm=!1,qS("up",t)),!jm){const{target:r}=t;ED({target:r,x:e,y:n})}qS("move",t),SD(),ka.length>0&&t.preventDefault()}function Up(t){const{target:e}=t,{x:n,y:r}=FC(t);BC.clear(),jm=!1,ka.length>0&&t.preventDefault(),qS("up",t),ED({target:e,x:n,y:r}),SD(),GS()}function ED({target:t,x:e,y:n}){ka.splice(0);let r=null;(t instanceof HTMLElement||t instanceof SVGElement)&&(r=t),$1.forEach(s=>{const{element:i,hitAreaMargins:o}=s,a=i.getBoundingClientRect(),{bottom:l,left:c,right:u,top:d}=a,h=trt?o.coarse:o.fine;if(e>=c-h&&e<=u+h&&n>=d-h&&n<=l+h){if(r!==null&&document.contains(r)&&i!==r&&!i.contains(r)&&!r.contains(i)&&Jnt(r,i)>0){let g=r,y=!1;for(;g&&!g.contains(i);){if(Xnt(g.getBoundingClientRect(),a)){y=!0;break}g=g.parentElement}if(y)return}ka.push(s)}})}function y3(t,e){BC.set(t,e)}function SD(){let t=!1,e=!1;ka.forEach(r=>{const{direction:s}=r;s==="horizontal"?t=!0:e=!0});let n=0;BC.forEach(r=>{n|=r}),t&&e?b3("intersection",n):t?b3("horizontal",n):e?b3("vertical",n):Knt()}function GS(){Yu.forEach((t,e)=>{const{body:n}=e;n.removeEventListener("contextmenu",Up),n.removeEventListener("pointerdown",kz),n.removeEventListener("pointerleave",ab),n.removeEventListener("pointermove",ab)}),window.removeEventListener("pointerup",Up),window.removeEventListener("pointercancel",Up),$1.size>0&&(jm?(ka.length>0&&Yu.forEach((t,e)=>{const{body:n}=e;t>0&&(n.addEventListener("contextmenu",Up),n.addEventListener("pointerleave",ab),n.addEventListener("pointermove",ab))}),window.addEventListener("pointerup",Up),window.addEventListener("pointercancel",Up)):Yu.forEach((t,e)=>{const{body:n}=e;t>0&&(n.addEventListener("pointerdown",kz,{capture:!0}),n.addEventListener("pointermove",ab))}))}function qS(t,e){$1.forEach(n=>{const{setResizeHandlerState:r}=n,s=ka.includes(n);r(t,s,e)})}function rrt(){const[t,e]=Mm(0);return ki(()=>e(n=>n+1),[])}function Zt(t,e){if(!t)throw console.error(e),Error(e)}const kD=10;function Pf(t,e,n=kD){return t.toFixed(n)===e.toFixed(n)?0:t>e?1:-1}function jc(t,e,n=kD){return Pf(t,e,n)===0}function Wi(t,e,n){return Pf(t,e,n)===0}function srt(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){const s=t[r],i=e[r];if(!Wi(s,i,n))return!1}return!0}function mm({panelConstraints:t,panelIndex:e,size:n}){const r=t[e];Zt(r!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:s=0,collapsible:i,maxSize:o=100,minSize:a=0}=r;if(Pf(n,a)<0)if(i){const l=(s+a)/2;Pf(n,l)<0?n=s:n=a}else n=a;return n=Math.min(o,n),n=parseFloat(n.toFixed(kD)),n}function Db({delta:t,initialLayout:e,panelConstraints:n,pivotIndices:r,prevLayout:s,trigger:i}){if(Wi(t,0))return e;const o=[...e],[a,l]=r;Zt(a!=null,"Invalid first pivot index"),Zt(l!=null,"Invalid second pivot index");let c=0;if(i==="keyboard"){{const d=t<0?l:a,h=n[d];Zt(h,`Panel constraints not found for index ${d}`);const{collapsedSize:f=0,collapsible:g,minSize:y=0}=h;if(g){const m=e[d];if(Zt(m!=null,`Previous layout not found for panel index ${d}`),Wi(m,f)){const b=y-m;Pf(b,Math.abs(t))>0&&(t=t<0?0-b:b)}}}{const d=t<0?a:l,h=n[d];Zt(h,`No panel constraints found for index ${d}`);const{collapsedSize:f=0,collapsible:g,minSize:y=0}=h;if(g){const m=e[d];if(Zt(m!=null,`Previous layout not found for panel index ${d}`),Wi(m,y)){const b=m-f;Pf(b,Math.abs(t))>0&&(t=t<0?0-b:b)}}}}{const d=t<0?1:-1;let h=t<0?l:a,f=0;for(;;){const y=e[h];Zt(y!=null,`Previous layout not found for panel index ${h}`);const b=mm({panelConstraints:n,panelIndex:h,size:100})-y;if(f+=b,h+=d,h<0||h>=n.length)break}const g=Math.min(Math.abs(t),Math.abs(f));t=t<0?0-g:g}{let h=t<0?a:l;for(;h>=0&&h<n.length;){const f=Math.abs(t)-Math.abs(c),g=e[h];Zt(g!=null,`Previous layout not found for panel index ${h}`);const y=g-f,m=mm({panelConstraints:n,panelIndex:h,size:y});if(!Wi(g,m)&&(c+=g-m,o[h]=m,c.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?h--:h++}}if(srt(s,o))return s;{const d=t<0?l:a,h=e[d];Zt(h!=null,`Previous layout not found for panel index ${d}`);const f=h+c,g=mm({panelConstraints:n,panelIndex:d,size:f});if(o[d]=g,!Wi(g,f)){let y=f-g,b=t<0?l:a;for(;b>=0&&b<n.length;){const v=o[b];Zt(v!=null,`Previous layout not found for panel index ${b}`);const _=v+y,E=mm({panelConstraints:n,panelIndex:b,size:_});if(Wi(v,E)||(y-=E-v,o[b]=E),Wi(y,0))break;t>0?b--:b++}}}const u=o.reduce((d,h)=>h+d,0);return Wi(u,100)?o:s}function irt({layout:t,panelsArray:e,pivotIndices:n}){let r=0,s=100,i=0,o=0;const a=n[0];Zt(a!=null,"No pivot index found"),e.forEach((d,h)=>{const{constraints:f}=d,{maxSize:g=100,minSize:y=0}=f;h===a?(r=y,s=g):(i+=y,o+=g)});const l=Math.min(s,100-i),c=Math.max(r,100-o),u=t[a];return{valueMax:l,valueMin:c,valueNow:u}}function H1(t,e=document){return Array.from(e.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${t}"]`))}function hle(t,e,n=document){const s=H1(t,n).findIndex(i=>i.getAttribute("data-panel-resize-handle-id")===e);return s??null}function fle(t,e,n){const r=hle(t,e,n);return r!=null?[r,r+1]:[-1,-1]}function ple(t,e=document){var n;if(e instanceof HTMLElement&&(e==null||(n=e.dataset)===null||n===void 0?void 0:n.panelGroupId)==t)return e;const r=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return r||null}function UC(t,e=document){const n=e.querySelector(`[data-panel-resize-handle-id="${t}"]`);return n||null}function ort(t,e,n,r=document){var s,i,o,a;const l=UC(e,r),c=H1(t,r),u=l?c.indexOf(l):-1,d=(s=(i=n[u])===null||i===void 0?void 0:i.id)!==null&&s!==void 0?s:null,h=(o=(a=n[u+1])===null||a===void 0?void 0:a.id)!==null&&o!==void 0?o:null;return[d,h]}function art({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:r,panelDataArray:s,panelGroupElement:i,setLayout:o}){Ai({didWarnAboutMissingResizeHandle:!1}),lf(()=>{if(!i)return;const a=H1(n,i);for(let l=0;l<s.length-1;l++){const{valueMax:c,valueMin:u,valueNow:d}=irt({layout:r,panelsArray:s,pivotIndices:[l,l+1]}),h=a[l];if(h!=null){const f=s[l];Zt(f,`No panel data found for index "${l}"`),h.setAttribute("aria-controls",f.id),h.setAttribute("aria-valuemax",""+Math.round(c)),h.setAttribute("aria-valuemin",""+Math.round(u)),h.setAttribute("aria-valuenow",d!=null?""+Math.round(d):"")}}return()=>{a.forEach((l,c)=>{l.removeAttribute("aria-controls"),l.removeAttribute("aria-valuemax"),l.removeAttribute("aria-valuemin"),l.removeAttribute("aria-valuenow")})}},[n,r,s,i]),af(()=>{if(!i)return;const a=e.current;Zt(a,"Eager values not found");const{panelDataArray:l}=a,c=ple(n,i);Zt(c!=null,`No group found for id "${n}"`);const u=H1(n,i);Zt(u,`No resize handles found for group id "${n}"`);const d=u.map(h=>{const f=h.getAttribute("data-panel-resize-handle-id");Zt(f,"Resize handle element has no handle id attribute");const[g,y]=ort(n,f,l,i);if(g==null||y==null)return()=>{};const m=b=>{if(!b.defaultPrevented)switch(b.key){case"Enter":{b.preventDefault();const v=l.findIndex(_=>_.id===g);if(v>=0){const _=l[v];Zt(_,`No panel data found for index ${v}`);const E=r[v],{collapsedSize:w=0,collapsible:S,minSize:k=0}=_.constraints;if(E!=null&&S){const x=Db({delta:Wi(E,w)?k-w:w-E,initialLayout:r,panelConstraints:l.map(I=>I.constraints),pivotIndices:fle(n,f,i),prevLayout:r,trigger:"keyboard"});r!==x&&o(x)}}break}}};return h.addEventListener("keydown",m),()=>{h.removeEventListener("keydown",m)}});return()=>{d.forEach(h=>h())}},[i,t,e,n,r,s,o])}function Cz(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function mle(t,e){const n=t==="horizontal",{x:r,y:s}=FC(e);return n?r:s}function lrt(t,e,n,r,s){const i=n==="horizontal",o=UC(e,s);Zt(o,`No resize handle element found for id "${e}"`);const a=o.getAttribute("data-panel-group-id");Zt(a,"Resize handle element has no group id attribute");let{initialCursorPosition:l}=r;const c=mle(n,t),u=ple(a,s);Zt(u,`No group element found for id "${a}"`);const d=u.getBoundingClientRect(),h=i?d.width:d.height;return(c-l)/h*100}function crt(t,e,n,r,s,i){if(sle(t)){const o=n==="horizontal";let a=0;t.shiftKey?a=100:s!=null?a=s:a=10;let l=0;switch(t.key){case"ArrowDown":l=o?0:a;break;case"ArrowLeft":l=o?-a:0;break;case"ArrowRight":l=o?a:0;break;case"ArrowUp":l=o?0:-a;break;case"End":l=100;break;case"Home":l=-100;break}return l}else return r==null?0:lrt(t,e,n,r,i)}function urt({panelDataArray:t}){const e=Array(t.length),n=t.map(i=>i.constraints);let r=0,s=100;for(let i=0;i<t.length;i++){const o=n[i];Zt(o,`Panel constraints not found for index ${i}`);const{defaultSize:a}=o;a!=null&&(r++,e[i]=a,s-=a)}for(let i=0;i<t.length;i++){const o=n[i];Zt(o,`Panel constraints not found for index ${i}`);const{defaultSize:a}=o;if(a!=null)continue;const l=t.length-r,c=s/l;r++,e[i]=c,s-=c}return e}function $p(t,e,n){e.forEach((r,s)=>{const i=t[s];Zt(i,`Panel data not found for index ${s}`);const{callbacks:o,constraints:a,id:l}=i,{collapsedSize:c=0,collapsible:u}=a,d=n[l];if(d==null||r!==d){n[l]=r;const{onCollapse:h,onExpand:f,onResize:g}=o;g&&g(r,d),u&&(h||f)&&(f&&(d==null||jc(d,c))&&!jc(r,c)&&f(),h&&(d==null||!jc(d,c))&&jc(r,c)&&h())}})}function Rw(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function drt({defaultSize:t,dragState:e,layout:n,panelData:r,panelIndex:s,precision:i=3}){const o=n[s];let a;return o==null?a=t!=null?t.toPrecision(i):"1":r.length===1?a="1":a=o.toPrecision(i),{flexBasis:0,flexGrow:a,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function hrt(t,e=10){let n=null;return(...s)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...s)},e)}}function Az(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function gle(t){return`react-resizable-panels:${t}`}function ble(t){return t.map(e=>{const{constraints:n,id:r,idIsFromProps:s,order:i}=e;return s?r:i?`${i}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function yle(t,e){try{const n=gle(t),r=e.getItem(n);if(r){const s=JSON.parse(r);if(typeof s=="object"&&s!=null)return s}}catch{}return null}function frt(t,e,n){var r,s;const i=(r=yle(t,n))!==null&&r!==void 0?r:{},o=ble(e);return(s=i[o])!==null&&s!==void 0?s:null}function prt(t,e,n,r,s){var i;const o=gle(t),a=ble(e),l=(i=yle(t,s))!==null&&i!==void 0?i:{};l[a]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{s.setItem(o,JSON.stringify(l))}catch(c){console.error(c)}}function Tz({layout:t,panelConstraints:e}){const n=[...t],r=n.reduce((i,o)=>i+o,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(i=>`${i}%`).join(", ")}`);if(!Wi(r,100)&&n.length>0)for(let i=0;i<e.length;i++){const o=n[i];Zt(o!=null,`No layout data found for index ${i}`);const a=100/r*o;n[i]=a}let s=0;for(let i=0;i<e.length;i++){const o=n[i];Zt(o!=null,`No layout data found for index ${i}`);const a=mm({panelConstraints:e,panelIndex:i,size:o});o!=a&&(s+=o-a,n[i]=a)}if(!Wi(s,0))for(let i=0;i<e.length;i++){const o=n[i];Zt(o!=null,`No layout data found for index ${i}`);const a=o+s,l=mm({panelConstraints:e,panelIndex:i,size:a});if(o!==l&&(s-=l-o,n[i]=l,Wi(s,0)))break}return n}const mrt=100,Mb={getItem:t=>(Az(Mb),Mb.getItem(t)),setItem:(t,e)=>{Az(Mb),Mb.setItem(t,e)}},Nz={};function vle({autoSaveId:t=null,children:e,className:n="",direction:r,forwardedRef:s,id:i=null,onLayout:o=null,keyboardResizeBy:a=null,storage:l=Mb,style:c,tagName:u="div",...d}){const h=wD(i),f=Ai(null),[g,y]=Mm(null),[m,b]=Mm([]),v=rrt(),_=Ai({}),E=Ai(new Map),w=Ai(0),S=Ai({autoSaveId:t,direction:r,dragState:g,id:h,keyboardResizeBy:a,onLayout:o,storage:l}),k=Ai({layout:m,panelDataArray:[],panelDataArrayChanged:!1});Ai({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),nle(s,()=>({getId:()=>S.current.id,getLayout:()=>{const{layout:j}=k.current;return j},setLayout:j=>{const{onLayout:V}=S.current,{layout:W,panelDataArray:re}=k.current,te=Tz({layout:j,panelConstraints:re.map(Y=>Y.constraints)});Cz(W,te)||(b(te),k.current.layout=te,V&&V(te),$p(re,te,_.current))}}),[]),lf(()=>{S.current.autoSaveId=t,S.current.direction=r,S.current.dragState=g,S.current.id=h,S.current.onLayout=o,S.current.storage=l}),art({committedValuesRef:S,eagerValuesRef:k,groupId:h,layout:m,panelDataArray:k.current.panelDataArray,setLayout:b,panelGroupElement:f.current}),af(()=>{const{panelDataArray:j}=k.current;if(t){if(m.length===0||m.length!==j.length)return;let V=Nz[t];V==null&&(V=hrt(prt,mrt),Nz[t]=V);const W=[...j],re=new Map(E.current);V(t,W,re,m,l)}},[t,m,l]),af(()=>{});const x=ki(j=>{const{onLayout:V}=S.current,{layout:W,panelDataArray:re}=k.current;if(j.constraints.collapsible){const te=re.map(Se=>Se.constraints),{collapsedSize:Y=0,panelSize:de,pivotIndices:ye}=ch(re,j,W);if(Zt(de!=null,`Panel size not found for panel "${j.id}"`),!jc(de,Y)){E.current.set(j.id,de);const Te=Zp(re,j)===re.length-1?de-Y:Y-de,ke=Db({delta:Te,initialLayout:W,panelConstraints:te,pivotIndices:ye,prevLayout:W,trigger:"imperative-api"});Rw(W,ke)||(b(ke),k.current.layout=ke,V&&V(ke),$p(re,ke,_.current))}}},[]),I=ki((j,V)=>{const{onLayout:W}=S.current,{layout:re,panelDataArray:te}=k.current;if(j.constraints.collapsible){const Y=te.map(K=>K.constraints),{collapsedSize:de=0,panelSize:ye=0,minSize:Se=0,pivotIndices:Te}=ch(te,j,re),ke=V??Se;if(jc(ye,de)){const K=E.current.get(j.id),ge=K!=null&&K>=ke?K:ke,le=Zp(te,j)===te.length-1?ye-ge:ge-ye,se=Db({delta:le,initialLayout:re,panelConstraints:Y,pivotIndices:Te,prevLayout:re,trigger:"imperative-api"});Rw(re,se)||(b(se),k.current.layout=se,W&&W(se),$p(te,se,_.current))}}},[]),R=ki(j=>{const{layout:V,panelDataArray:W}=k.current,{panelSize:re}=ch(W,j,V);return Zt(re!=null,`Panel size not found for panel "${j.id}"`),re},[]),C=ki((j,V)=>{const{panelDataArray:W}=k.current,re=Zp(W,j);return drt({defaultSize:V,dragState:g,layout:m,panelData:W,panelIndex:re})},[g,m]),N=ki(j=>{const{layout:V,panelDataArray:W}=k.current,{collapsedSize:re=0,collapsible:te,panelSize:Y}=ch(W,j,V);return Zt(Y!=null,`Panel size not found for panel "${j.id}"`),te===!0&&jc(Y,re)},[]),O=ki(j=>{const{layout:V,panelDataArray:W}=k.current,{collapsedSize:re=0,collapsible:te,panelSize:Y}=ch(W,j,V);return Zt(Y!=null,`Panel size not found for panel "${j.id}"`),!te||Pf(Y,re)>0},[]),P=ki(j=>{const{panelDataArray:V}=k.current;V.push(j),V.sort((W,re)=>{const te=W.order,Y=re.order;return te==null&&Y==null?0:te==null?-1:Y==null?1:te-Y}),k.current.panelDataArrayChanged=!0,v()},[v]);lf(()=>{if(k.current.panelDataArrayChanged){k.current.panelDataArrayChanged=!1;const{autoSaveId:j,onLayout:V,storage:W}=S.current,{layout:re,panelDataArray:te}=k.current;let Y=null;if(j){const ye=frt(j,te,W);ye&&(E.current=new Map(Object.entries(ye.expandToSizes)),Y=ye.layout)}Y==null&&(Y=urt({panelDataArray:te}));const de=Tz({layout:Y,panelConstraints:te.map(ye=>ye.constraints)});Cz(re,de)||(b(de),k.current.layout=de,V&&V(de),$p(te,de,_.current))}}),lf(()=>{const j=k.current;return()=>{j.layout=[]}},[]);const $=ki(j=>{let V=!1;const W=f.current;return W&&window.getComputedStyle(W,null).getPropertyValue("direction")==="rtl"&&(V=!0),function(te){te.preventDefault();const Y=f.current;if(!Y)return()=>null;const{direction:de,dragState:ye,id:Se,keyboardResizeBy:Te,onLayout:ke}=S.current,{layout:K,panelDataArray:ge}=k.current,{initialLayout:ne}=ye??{},le=fle(Se,j,Y);let se=crt(te,j,de,ye,Te,Y);const fe=de==="horizontal";fe&&V&&(se=-se);const Ce=ge.map($e=>$e.constraints),Ie=Db({delta:se,initialLayout:ne??K,panelConstraints:Ce,pivotIndices:le,prevLayout:K,trigger:sle(te)?"keyboard":"mouse-or-touch"}),xe=!Rw(K,Ie);(ile(te)||ole(te))&&w.current!=se&&(w.current=se,!xe&&se!==0?fe?y3(j,se<0?lle:cle):y3(j,se<0?ule:dle):y3(j,0)),xe&&(b(Ie),k.current.layout=Ie,ke&&ke(Ie),$p(ge,Ie,_.current))}},[]),ee=ki((j,V)=>{const{onLayout:W}=S.current,{layout:re,panelDataArray:te}=k.current,Y=te.map(K=>K.constraints),{panelSize:de,pivotIndices:ye}=ch(te,j,re);Zt(de!=null,`Panel size not found for panel "${j.id}"`);const Te=Zp(te,j)===te.length-1?de-V:V-de,ke=Db({delta:Te,initialLayout:re,panelConstraints:Y,pivotIndices:ye,prevLayout:re,trigger:"imperative-api"});Rw(re,ke)||(b(ke),k.current.layout=ke,W&&W(ke),$p(te,ke,_.current))},[]),J=ki((j,V)=>{const{layout:W,panelDataArray:re}=k.current,{collapsedSize:te=0,collapsible:Y}=V,{collapsedSize:de=0,collapsible:ye,maxSize:Se=100,minSize:Te=0}=j.constraints,{panelSize:ke}=ch(re,j,W);ke!=null&&(Y&&ye&&jc(ke,te)?jc(te,de)||ee(j,de):ke<Te?ee(j,Te):ke>Se&&ee(j,Se))},[ee]),Z=ki((j,V)=>{const{direction:W}=S.current,{layout:re}=k.current;if(!f.current)return;const te=UC(j,f.current);Zt(te,`Drag handle element not found for id "${j}"`);const Y=mle(W,V);y({dragHandleId:j,dragHandleRect:te.getBoundingClientRect(),initialCursorPosition:Y,initialLayout:re})},[]),M=ki(()=>{y(null)},[]),F=ki(j=>{const{panelDataArray:V}=k.current,W=Zp(V,j);W>=0&&(V.splice(W,1),delete _.current[j.id],k.current.panelDataArrayChanged=!0,v())},[v]),G=znt(()=>({collapsePanel:x,direction:r,dragState:g,expandPanel:I,getPanelSize:R,getPanelStyle:C,groupId:h,isPanelCollapsed:N,isPanelExpanded:O,reevaluatePanelConstraints:J,registerPanel:P,registerResizeHandle:$,resizePanel:ee,startDragging:Z,stopDragging:M,unregisterPanel:F,panelGroupElement:f.current}),[x,g,r,I,R,C,h,N,O,J,P,$,ee,Z,M,F]),D={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return wg(jC.Provider,{value:G},wg(u,{...d,children:e,className:n,id:i,ref:f,style:{...D,...c},"data-panel-group":"","data-panel-group-direction":r,"data-panel-group-id":h}))}const kI=ele((t,e)=>wg(vle,{...t,forwardedRef:e}));vle.displayName="PanelGroup";kI.displayName="forwardRef(PanelGroup)";function Zp(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function ch(t,e,n){const r=Zp(t,e),i=r===t.length-1?[r-1,r]:[r,r+1],o=n[r];return{...e.constraints,panelSize:o,pivotIndices:i}}function grt({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:r}){af(()=>{if(t||n==null||r==null)return;const s=UC(e,r);if(s==null)return;const i=o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{o.preventDefault(),n(o);break}case"F6":{o.preventDefault();const a=s.getAttribute("data-panel-group-id");Zt(a,`No group element found for id "${a}"`);const l=H1(a,r),c=hle(a,e,r);Zt(c!==null,`No resize element found for id "${e}"`);const u=o.shiftKey?c>0?c-1:l.length-1:c+1<l.length?c+1:0;l[u].focus();break}}};return s.addEventListener("keydown",i),()=>{s.removeEventListener("keydown",i)}},[r,t,e,n])}function CI({children:t=null,className:e="",disabled:n=!1,hitAreaMargins:r,id:s,onBlur:i,onDragging:o,onFocus:a,style:l={},tabIndex:c=0,tagName:u="div",...d}){var h,f;const g=Ai(null),y=Ai({onDragging:o});af(()=>{y.current.onDragging=o});const m=tle(jC);if(m===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:b,groupId:v,registerResizeHandle:_,startDragging:E,stopDragging:w,panelGroupElement:S}=m,k=wD(s),[x,I]=Mm("inactive"),[R,C]=Mm(!1),[N,O]=Mm(null),P=Ai({state:x});lf(()=>{P.current.state=x}),af(()=>{if(n)O(null);else{const Z=_(k);O(()=>Z)}},[n,k,_]);const $=(h=r?.coarse)!==null&&h!==void 0?h:15,ee=(f=r?.fine)!==null&&f!==void 0?f:5;return af(()=>{if(n||N==null)return;const Z=g.current;return Zt(Z,"Element ref not attached"),nrt(k,Z,b,{coarse:$,fine:ee},(F,G,D)=>{if(G)switch(F){case"down":{I("drag"),Zt(D,'Expected event to be defined for "down" action'),E(k,D);const{onDragging:j}=y.current;j&&j(!0);break}case"move":{const{state:j}=P.current;j!=="drag"&&I("hover"),Zt(D,'Expected event to be defined for "move" action'),N(D);break}case"up":{I("hover"),w();const{onDragging:j}=y.current;j&&j(!1);break}}else I("inactive")})},[$,b,n,ee,_,k,N,E,w]),grt({disabled:n,handleId:k,resizeHandler:N,panelGroupElement:S}),wg(u,{...d,children:t,className:e,id:s,onBlur:()=>{C(!1),i?.()},onFocus:()=>{C(!0),a?.()},ref:g,role:"separator",style:{...{touchAction:"none",userSelect:"none"},...l},tabIndex:c,"data-panel-group-direction":b,"data-panel-group-id":v,"data-resize-handle":"","data-resize-handle-active":x==="drag"?"pointer":R?"keyboard":void 0,"data-resize-handle-state":x,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":k})}CI.displayName="PanelResizeHandle";const Pz=T.memo(({className:t,children:e})=>p.jsx("div",{className:Pe("flex items-center gap-2 bg-bolt-elements-background-depth-2 text-bolt-elements-textSecondary border-b border-bolt-elements-borderColor px-4 py-1 min-h-[34px] text-sm",t),children:e}));function brt(){return globalThis.innerWidth<640}var CD="ContextMenu",[yrt,Eft]=Xo(CD,[jk]),mi=jk(),[vrt,_le]=yrt(CD),xle=t=>{const{__scopeContextMenu:e,children:n,onOpenChange:r,dir:s,modal:i=!0}=t,[o,a]=T.useState(!1),l=mi(e),c=Vr(r),u=T.useCallback(d=>{a(d),c(d)},[c]);return p.jsx(vrt,{scope:e,open:o,onOpenChange:u,modal:i,children:p.jsx(QZ,{...l,dir:s,open:o,onOpenChange:u,modal:i,children:n})})};xle.displayName=CD;var wle="ContextMenuTrigger",Ele=T.forwardRef((t,e)=>{const{__scopeContextMenu:n,disabled:r=!1,...s}=t,i=_le(wle,n),o=mi(n),a=T.useRef({x:0,y:0}),l=T.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...a.current})}),c=T.useRef(0),u=T.useCallback(()=>window.clearTimeout(c.current),[]),d=h=>{a.current={x:h.clientX,y:h.clientY},i.onOpenChange(!0)};return T.useEffect(()=>u,[u]),T.useEffect(()=>void(r&&u()),[r,u]),p.jsxs(p.Fragment,{children:[p.jsx(eQ,{...o,virtualRef:l}),p.jsx(hn.span,{"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,...s,ref:e,style:{WebkitTouchCallout:"none",...t.style},onContextMenu:r?t.onContextMenu:Nt(t.onContextMenu,h=>{u(),d(h),h.preventDefault()}),onPointerDown:r?t.onPointerDown:Nt(t.onPointerDown,Lw(h=>{u(),c.current=window.setTimeout(()=>d(h),700)})),onPointerMove:r?t.onPointerMove:Nt(t.onPointerMove,Lw(u)),onPointerCancel:r?t.onPointerCancel:Nt(t.onPointerCancel,Lw(u)),onPointerUp:r?t.onPointerUp:Nt(t.onPointerUp,Lw(u))})]})});Ele.displayName=wle;var _rt="ContextMenuPortal",Sle=t=>{const{__scopeContextMenu:e,...n}=t,r=mi(e);return p.jsx(tQ,{...r,...n})};Sle.displayName=_rt;var kle="ContextMenuContent",Cle=T.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,s=_le(kle,n),i=mi(n),o=T.useRef(!1);return p.jsx(nQ,{...i,...r,ref:e,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:a=>{t.onCloseAutoFocus?.(a),!a.defaultPrevented&&o.current&&a.preventDefault(),o.current=!1},onInteractOutside:a=>{t.onInteractOutside?.(a),!a.defaultPrevented&&!s.modal&&(o.current=!0)},style:{...t.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Cle.displayName=kle;var xrt="ContextMenuGroup",Ale=T.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,s=mi(n);return p.jsx(rQ,{...s,...r,ref:e})});Ale.displayName=xrt;var wrt="ContextMenuLabel",Ert=T.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,s=mi(n);return p.jsx(sQ,{...s,...r,ref:e})});Ert.displayName=wrt;var Srt="ContextMenuItem",Tle=T.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,s=mi(n);return p.jsx(iQ,{...s,...r,ref:e})});Tle.displayName=Srt;var krt="ContextMenuCheckboxItem",Crt=T.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,s=mi(n);return p.jsx(oQ,{...s,...r,ref:e})});Crt.displayName=krt;var Art="ContextMenuRadioGroup",Trt=T.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,s=mi(n);return p.jsx(aQ,{...s,...r,ref:e})});Trt.displayName=Art;var Nrt="ContextMenuRadioItem",Prt=T.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,s=mi(n);return p.jsx(lQ,{...s,...r,ref:e})});Prt.displayName=Nrt;var Irt="ContextMenuItemIndicator",Rrt=T.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,s=mi(n);return p.jsx(cQ,{...s,...r,ref:e})});Rrt.displayName=Irt;var Lrt="ContextMenuSeparator",Ort=T.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,s=mi(n);return p.jsx(uQ,{...s,...r,ref:e})});Ort.displayName=Lrt;var Drt="ContextMenuArrow",Mrt=T.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,s=mi(n);return p.jsx(dQ,{...s,...r,ref:e})});Mrt.displayName=Drt;var jrt="ContextMenuSubTrigger",Frt=T.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,s=mi(n);return p.jsx(hQ,{...s,...r,ref:e})});Frt.displayName=jrt;var Brt="ContextMenuSubContent",Urt=T.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,s=mi(n);return p.jsx(fQ,{...s,...r,ref:e,style:{...t.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Urt.displayName=Brt;function Lw(t){return e=>e.pointerType!=="mouse"?t(e):void 0}var $rt=xle,Hrt=Ele,zrt=Sle,Vrt=Cle,Wrt=Ale,Grt=Tle;const AI=Di("FileTree"),qrt=8,Krt=[/\/node_modules\//,/\/\.next/,/\/\.astro/],Nle=T.memo(({files:t={},onFileSelect:e,selectedFile:n,rootFolder:r,hideRoot:s=!1,collapsed:i=!1,allowFolderSelection:o=!1,hiddenFiles:a,className:l,unsavedFiles:c,fileHistory:u={}})=>{Ag.trace("FileTree");const d=T.useMemo(()=>[...Krt,...a??[]],[a]),h=T.useMemo(()=>Jrt(t,r,s,d),[t,r,s,d]),[f,g]=T.useState(()=>i?new Set(h.filter(_=>_.kind==="folder").map(_=>_.fullPath)):new Set);T.useEffect(()=>{if(i){g(new Set(h.filter(_=>_.kind==="folder").map(_=>_.fullPath)));return}g(_=>{const E=new Set;for(const w of h)w.kind==="folder"&&_.has(w.fullPath)&&E.add(w.fullPath);return E})},[h,i]);const y=T.useMemo(()=>{const _=[];let E=Number.MAX_SAFE_INTEGER;for(const w of h){const S=w.depth;E===S&&(E=Number.MAX_SAFE_INTEGER),f.has(w.fullPath)&&(E=Math.min(E,S)),!(E<S)&&_.push(w)}return _},[h,f]),m=_=>{g(E=>{const w=new Set(E);return w.has(_)?w.delete(_):w.add(_),w})},b=_=>{try{navigator.clipboard.writeText(_.fullPath)}catch(E){AI.error(E)}},v=_=>{try{navigator.clipboard.writeText(_.fullPath.substring((r||"").length))}catch(E){AI.error(E)}};return p.jsx("div",{className:Pe("text-sm",l,"overflow-y-auto"),children:y.map(_=>{switch(_.kind){case"file":return p.jsx(Xrt,{selected:n===_.fullPath,file:_,unsavedChanges:c?.has(_.fullPath),fileHistory:u,onCopyPath:()=>{b(_)},onCopyRelativePath:()=>{v(_)},onClick:()=>{e?.(_.fullPath)}},_.id);case"folder":return p.jsx(Yrt,{folder:_,selected:o&&n===_.fullPath,collapsed:f.has(_.fullPath),onCopyPath:()=>{b(_)},onCopyRelativePath:()=>{v(_)},onClick:()=>{m(_.fullPath)}},_.id);default:return}})})});function Iz({onSelect:t,children:e}){return p.jsxs(Grt,{onSelect:t,className:"flex items-center gap-2 px-2 py-1.5 outline-0 text-sm text-bolt-elements-textPrimary cursor-pointer ws-nowrap text-bolt-elements-item-contentDefault hover:text-bolt-elements-item-contentActive hover:bg-bolt-elements-item-backgroundActive rounded-md",children:[p.jsx("span",{className:"size-4 shrink-0"}),p.jsx("span",{children:e})]})}function Ple({onCopyPath:t,onCopyRelativePath:e,children:n}){return p.jsxs($rt,{children:[p.jsx(Hrt,{children:n}),p.jsx(zrt,{children:p.jsx(Vrt,{style:{zIndex:998},className:"border border-bolt-elements-borderColor rounded-md z-context-menu bg-bolt-elements-background-depth-1 dark:bg-bolt-elements-background-depth-2 data-[state=open]:animate-in animate-duration-100 data-[state=open]:fade-in-0 data-[state=open]:zoom-in-98 w-56",children:p.jsxs(Wrt,{className:"p-1 border-b-px border-solid border-bolt-elements-borderColor",children:[p.jsx(Iz,{onSelect:t,children:"Copy path"}),p.jsx(Iz,{onSelect:e,children:"Copy relative path"})]})})})]})}function Yrt({folder:t,collapsed:e,selected:n=!1,onCopyPath:r,onCopyRelativePath:s,onClick:i}){return p.jsx(Ple,{onCopyPath:r,onCopyRelativePath:s,children:p.jsx(Ile,{className:Pe("group",{"bg-transparent text-bolt-elements-item-contentDefault hover:text-bolt-elements-item-contentActive hover:bg-bolt-elements-item-backgroundActive":!n,"bg-bolt-elements-item-backgroundAccent text-bolt-elements-item-contentAccent":n}),depth:t.depth,iconClasses:Pe({"i-ph:caret-right scale-98":e,"i-ph:caret-down scale-98":!e}),onClick:i,children:t.name})})}function Xrt({file:{depth:t,name:e,fullPath:n},onClick:r,onCopyPath:s,onCopyRelativePath:i,selected:o,unsavedChanges:a=!1,fileHistory:l={}}){const c=l[n],{additions:u,deletions:d}=T.useMemo(()=>{if(!c?.originalContent)return{additions:0,deletions:0};const f=c.originalContent.replace(/\r\n/g,`
`),g=c.versions[c.versions.length-1]?.content.replace(/\r\n/g,`
`)||"";return f===g?{additions:0,deletions:0}:og(f,g,{newlineIsToken:!1,ignoreWhitespace:!0,ignoreCase:!1}).reduce((m,b)=>(b.added&&(m.additions+=b.value.split(`
`).length),b.removed&&(m.deletions+=b.value.split(`
`).length),m),{additions:0,deletions:0})},[c]),h=u>0||d>0;return p.jsx(Ple,{onCopyPath:s,onCopyRelativePath:i,children:p.jsx(Ile,{className:Pe("group",{"bg-transparent hover:bg-bolt-elements-item-backgroundActive text-bolt-elements-item-contentDefault":!o,"bg-bolt-elements-item-backgroundAccent text-bolt-elements-item-contentAccent":o}),depth:t,iconClasses:Pe("i-ph:file-duotone scale-98",{"group-hover:text-bolt-elements-item-contentActive":!o}),onClick:r,children:p.jsxs("div",{className:Pe("flex items-center",{"group-hover:text-bolt-elements-item-contentActive":!o}),children:[p.jsx("div",{className:"flex-1 truncate pr-2",children:e}),p.jsxs("div",{className:"flex items-center gap-1",children:[h&&p.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[u>0&&p.jsxs("span",{className:"text-green-500",children:["+",u]}),d>0&&p.jsxs("span",{className:"text-red-500",children:["-",d]})]}),a&&p.jsx("span",{className:"i-ph:circle-fill scale-68 shrink-0 text-orange-500"})]})]})})})}function Ile({depth:t,iconClasses:e,onClick:n,className:r,children:s}){return p.jsxs("button",{className:Pe("flex items-center gap-1.5 w-full pr-2 border-2 border-transparent text-faded py-0.5",r),style:{paddingLeft:`${6+t*qrt}px`},onClick:()=>n?.(),children:[p.jsx("div",{className:Pe("scale-120 shrink-0",e)}),p.jsx("div",{className:"truncate w-full text-left",children:s})]})}function Jrt(t,e="/",n,r){const s=new Set,i=[];let o=0;e==="/"&&!n&&(o=1,i.push({kind:"folder",name:"/",depth:0,id:0,fullPath:"/"}));for(const[a,l]of Object.entries(t)){const c=a.split("/").filter(g=>g),u=c.at(-1);if(!u||Zrt(a,u,r))continue;let d="",h=0,f=0;for(;h<c.length;){const g=c[h],y=d+=`/${g}`;if(!y.startsWith(e)||n&&y===e){h++;continue}h===c.length-1&&l?.type==="file"?i.push({kind:"file",id:i.length,name:g,fullPath:y,depth:f+o}):s.has(y)||(s.add(y),i.push({kind:"folder",id:i.length,name:g,fullPath:y,depth:f+o})),h++,f++}}return Qrt(e,i,n)}function Zrt(t,e,n){return n.some(r=>typeof r=="string"?e===r:r.test(t))}function Qrt(t,e,n){AI.trace("sortFileList");const r=new Map,s=new Map;e.sort((a,l)=>est(a,l));for(const a of e){r.set(a.fullPath,a);const l=a.fullPath.slice(0,a.fullPath.lastIndexOf("/"));l!==t.slice(0,t.lastIndexOf("/"))&&(s.has(l)||s.set(l,[]),s.get(l)?.push(a))}const i=[],o=a=>{const l=r.get(a);l&&i.push(l);const c=s.get(a);if(c)for(const u of c)u.kind==="folder"?o(u.fullPath):i.push(u)};if(n){const a=s.get(t)||[];for(const l of a)o(l.fullPath)}else o(t);return i}function est(t,e){return t.kind!==e.kind?t.kind==="folder"?-1:1:t.name.localeCompare(e.name,void 0,{numeric:!0,sensitivity:"base"})}const tst=new RegExp(`^${Zc.split("/").slice(0,-1).join("/").replaceAll("/","\\/")}/`),nst={open:{y:0,opacity:1,transition:{duration:.15,ease:so}},close:{y:6,opacity:0,transition:{duration:.15,ease:so}}},rst=T.memo(({files:t,pathSegments:e=[],onFileSelect:n})=>{Ag.trace("FileBreadcrumb");const[r,s]=T.useState(null),i=T.useRef(null),o=T.useRef([]),a=l=>{s(c=>c===l?null:l)};return T.useEffect(()=>{const l=c=>{r!==null&&!i.current?.contains(c.target)&&!o.current.some(u=>u?.contains(c.target))&&s(null)};return document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}},[r]),t===void 0||e.length===0?null:p.jsx("div",{className:"flex",children:e.map((l,c)=>{const u=c===e.length-1,d=e.slice(0,c).join("/");if(!tst.test(d))return null;const h=r===c;return p.jsx("div",{className:"relative flex items-center",children:p.jsxs(Uk,{open:h,modal:!1,children:[p.jsx($k,{asChild:!0,children:p.jsxs("span",{ref:f=>{o.current[c]=f},className:Pe("flex items-center gap-1.5 cursor-pointer shrink-0",{"text-bolt-elements-textTertiary hover:text-bolt-elements-textPrimary":!h,"text-bolt-elements-textPrimary underline":h,"pr-4":u}),onClick:()=>a(c),children:[u&&p.jsx("div",{className:"i-ph:file-duotone"}),l]})}),c>0&&!u&&p.jsx("span",{className:"i-ph:caret-right inline-block mx-1"}),p.jsx(zl,{children:h&&p.jsx(Hk,{children:p.jsx(zk,{className:"z-file-tree-breadcrumb",asChild:!0,align:"start",side:"bottom",avoidCollisions:!1,children:p.jsxs(ot.div,{ref:i,initial:"close",animate:"open",exit:"close",variants:nst,children:[p.jsx("div",{className:"rounded-lg overflow-hidden",children:p.jsx("div",{className:"max-h-[50vh] min-w-[300px] overflow-scroll bg-bolt-elements-background-depth-1 border border-bolt-elements-borderColor shadow-sm rounded-lg",children:p.jsx(Nle,{files:t,hideRoot:!0,rootFolder:d,collapsed:!0,allowFolderSelection:!0,selectedFile:`${d}/${l}`,onFileSelect:f=>{s(null),n?.(f)}})})}),p.jsx(k3e,{className:"fill-bolt-elements-borderColor"})]})})})})]})},c)})})});var Rle={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(self,()=>(()=>{var n={};return(()=>{var r=n;Object.defineProperty(r,"__esModule",{value:!0}),r.FitAddon=void 0,r.FitAddon=class{activate(s){this._terminal=s}dispose(){}fit(){const s=this.proposeDimensions();if(!s||!this._terminal||isNaN(s.cols)||isNaN(s.rows))return;const i=this._terminal._core;this._terminal.rows===s.rows&&this._terminal.cols===s.cols||(i._renderService.clear(),this._terminal.resize(s.cols,s.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const s=this._terminal._core,i=s._renderService.dimensions;if(i.css.cell.width===0||i.css.cell.height===0)return;const o=this._terminal.options.scrollback===0?0:s.viewport.scrollBarWidth,a=window.getComputedStyle(this._terminal.element.parentElement),l=parseInt(a.getPropertyValue("height")),c=Math.max(0,parseInt(a.getPropertyValue("width"))),u=window.getComputedStyle(this._terminal.element),d=l-(parseInt(u.getPropertyValue("padding-top"))+parseInt(u.getPropertyValue("padding-bottom"))),h=c-(parseInt(u.getPropertyValue("padding-right"))+parseInt(u.getPropertyValue("padding-left")))-o;return{cols:Math.max(2,Math.floor(h/i.css.cell.width)),rows:Math.max(1,Math.floor(d/i.css.cell.height))}}}})(),n})())})(Rle);var sst=Rle.exports,Lle={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(self,()=>(()=>{var n={6:(o,a)=>{function l(u){try{const d=new URL(u),h=d.password&&d.username?`${d.protocol}//${d.username}:${d.password}@${d.host}`:d.username?`${d.protocol}//${d.username}@${d.host}`:`${d.protocol}//${d.host}`;return u.toLocaleLowerCase().startsWith(h.toLocaleLowerCase())}catch{return!1}}Object.defineProperty(a,"__esModule",{value:!0}),a.LinkComputer=a.WebLinkProvider=void 0,a.WebLinkProvider=class{constructor(u,d,h,f={}){this._terminal=u,this._regex=d,this._handler=h,this._options=f}provideLinks(u,d){const h=c.computeLink(u,this._regex,this._terminal,this._handler);d(this._addCallbacks(h))}_addCallbacks(u){return u.map(d=>(d.leave=this._options.leave,d.hover=(h,f)=>{if(this._options.hover){const{range:g}=d;this._options.hover(h,f,g)}},d))}};class c{static computeLink(d,h,f,g){const y=new RegExp(h.source,(h.flags||"")+"g"),[m,b]=c._getWindowedLineStrings(d-1,f),v=m.join("");let _;const E=[];for(;_=y.exec(v);){const w=_[0];if(!l(w))continue;const[S,k]=c._mapStrIdx(f,b,0,_.index),[x,I]=c._mapStrIdx(f,S,k,w.length);if(S===-1||k===-1||x===-1||I===-1)continue;const R={start:{x:k+1,y:S+1},end:{x:I,y:x+1}};E.push({range:R,text:w,activate:g})}return E}static _getWindowedLineStrings(d,h){let f,g=d,y=d,m=0,b="";const v=[];if(f=h.buffer.active.getLine(d)){const _=f.translateToString(!0);if(f.isWrapped&&_[0]!==" "){for(m=0;(f=h.buffer.active.getLine(--g))&&m<2048&&(b=f.translateToString(!0),m+=b.length,v.push(b),f.isWrapped&&b.indexOf(" ")===-1););v.reverse()}for(v.push(_),m=0;(f=h.buffer.active.getLine(++y))&&f.isWrapped&&m<2048&&(b=f.translateToString(!0),m+=b.length,v.push(b),b.indexOf(" ")===-1););}return[v,g]}static _mapStrIdx(d,h,f,g){const y=d.buffer.active,m=y.getNullCell();let b=f;for(;g;){const v=y.getLine(h);if(!v)return[-1,-1];for(let _=b;_<v.length;++_){v.getCell(_,m);const E=m.getChars();if(m.getWidth()&&(g-=E.length||1,_===v.length-1&&E==="")){const w=y.getLine(h+1);w&&w.isWrapped&&(w.getCell(0,m),m.getWidth()===2&&(g+=1))}if(g<0)return[h,_]}h++,b=0}return[h,b]}}a.LinkComputer=c}},r={};function s(o){var a=r[o];if(a!==void 0)return a.exports;var l=r[o]={exports:{}};return n[o](l,l.exports,s),l.exports}var i={};return(()=>{var o=i;Object.defineProperty(o,"__esModule",{value:!0}),o.WebLinksAddon=void 0;const a=s(6),l=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function c(u,d){const h=window.open();if(h){try{h.opener=null}catch{}h.location.href=d}else console.warn("Opening link blocked as opener could not be cleared")}o.WebLinksAddon=class{constructor(u=c,d={}){this._handler=u,this._options=d}activate(u){this._terminal=u;const d=this._options,h=d.urlRegex||l;this._linkProvider=this._terminal.registerLinkProvider(new a.WebLinkProvider(this._terminal,h,this._handler,d))}dispose(){this._linkProvider?.dispose()}}})(),i})())})(Lle);var ist=Lle.exports,Ole={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(globalThis,()=>(()=>{var n={4567:function(o,a,l){var c=this&&this.__decorate||function(v,_,E,w){var S,k=arguments.length,x=k<3?_:w===null?w=Object.getOwnPropertyDescriptor(_,E):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(v,_,E,w);else for(var I=v.length-1;I>=0;I--)(S=v[I])&&(x=(k<3?S(x):k>3?S(_,E,x):S(_,E))||x);return k>3&&x&&Object.defineProperty(_,E,x),x},u=this&&this.__param||function(v,_){return function(E,w){_(E,w,v)}};Object.defineProperty(a,"__esModule",{value:!0}),a.AccessibilityManager=void 0;const d=l(9042),h=l(9924),f=l(844),g=l(4725),y=l(2585),m=l(3656);let b=a.AccessibilityManager=class extends f.Disposable{constructor(v,_,E,w){super(),this._terminal=v,this._coreBrowserService=E,this._renderService=w,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let S=0;S<this._terminal.rows;S++)this._rowElements[S]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[S]);if(this._topBoundaryFocusListener=S=>this._handleBoundaryFocus(S,0),this._bottomBoundaryFocusListener=S=>this._handleBoundaryFocus(S,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new h.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(S=>this._handleResize(S.rows))),this.register(this._terminal.onRender(S=>this._refreshRows(S.start,S.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(S=>this._handleChar(S))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(S=>this._handleTab(S))),this.register(this._terminal.onKey(S=>this._handleKey(S.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,m.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,f.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(v){for(let _=0;_<v;_++)this._handleChar(" ")}_handleChar(v){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==v&&(this._charsToAnnounce+=v):this._charsToAnnounce+=v,v===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=d.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(v){this._clearLiveRegion(),/\p{Control}/u.test(v)||this._charsToConsume.push(v)}_refreshRows(v,_){this._liveRegionDebouncer.refresh(v,_,this._terminal.rows)}_renderRows(v,_){const E=this._terminal.buffer,w=E.lines.length.toString();for(let S=v;S<=_;S++){const k=E.lines.get(E.ydisp+S),x=[],I=k?.translateToString(!0,void 0,void 0,x)||"",R=(E.ydisp+S+1).toString(),C=this._rowElements[S];C&&(I.length===0?(C.innerText="",this._rowColumns.set(C,[0,1])):(C.textContent=I,this._rowColumns.set(C,x)),C.setAttribute("aria-posinset",R),C.setAttribute("aria-setsize",w))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(v,_){const E=v.target,w=this._rowElements[_===0?1:this._rowElements.length-2];if(E.getAttribute("aria-posinset")===(_===0?"1":`${this._terminal.buffer.lines.length}`)||v.relatedTarget!==w)return;let S,k;if(_===0?(S=E,k=this._rowElements.pop(),this._rowContainer.removeChild(k)):(S=this._rowElements.shift(),k=E,this._rowContainer.removeChild(S)),S.removeEventListener("focus",this._topBoundaryFocusListener),k.removeEventListener("focus",this._bottomBoundaryFocusListener),_===0){const x=this._createAccessibilityTreeNode();this._rowElements.unshift(x),this._rowContainer.insertAdjacentElement("afterbegin",x)}else{const x=this._createAccessibilityTreeNode();this._rowElements.push(x),this._rowContainer.appendChild(x)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(_===0?-1:1),this._rowElements[_===0?1:this._rowElements.length-2].focus(),v.preventDefault(),v.stopImmediatePropagation()}_handleSelectionChange(){if(this._rowElements.length===0)return;const v=document.getSelection();if(!v)return;if(v.isCollapsed)return void(this._rowContainer.contains(v.anchorNode)&&this._terminal.clearSelection());if(!v.anchorNode||!v.focusNode)return void console.error("anchorNode and/or focusNode are null");let _={node:v.anchorNode,offset:v.anchorOffset},E={node:v.focusNode,offset:v.focusOffset};if((_.node.compareDocumentPosition(E.node)&Node.DOCUMENT_POSITION_PRECEDING||_.node===E.node&&_.offset>E.offset)&&([_,E]=[E,_]),_.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(_={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(_.node))return;const w=this._rowElements.slice(-1)[0];if(E.node.compareDocumentPosition(w)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(E={node:w,offset:w.textContent?.length??0}),!this._rowContainer.contains(E.node))return;const S=({node:I,offset:R})=>{const C=I instanceof Text?I.parentNode:I;let N=parseInt(C?.getAttribute("aria-posinset"),10)-1;if(isNaN(N))return console.warn("row is invalid. Race condition?"),null;const O=this._rowColumns.get(C);if(!O)return console.warn("columns is null. Race condition?"),null;let P=R<O.length?O[R]:O.slice(-1)[0]+1;return P>=this._terminal.cols&&(++N,P=0),{row:N,column:P}},k=S(_),x=S(E);if(k&&x){if(k.row>x.row||k.row===x.row&&k.column>=x.column)throw new Error("invalid range");this._terminal.select(k.column,k.row,(x.row-k.row)*this._terminal.cols-k.column+x.column)}}_handleResize(v){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let _=this._rowContainer.children.length;_<this._terminal.rows;_++)this._rowElements[_]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[_]);for(;this._rowElements.length>v;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const v=this._coreBrowserService.mainDocument.createElement("div");return v.setAttribute("role","listitem"),v.tabIndex=-1,this._refreshRowDimensions(v),v}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let v=0;v<this._terminal.rows;v++)this._refreshRowDimensions(this._rowElements[v])}}_refreshRowDimensions(v){v.style.height=`${this._renderService.dimensions.css.cell.height}px`}};a.AccessibilityManager=b=c([u(1,y.IInstantiationService),u(2,g.ICoreBrowserService),u(3,g.IRenderService)],b)},3614:(o,a)=>{function l(h){return h.replace(/\r?\n/g,"\r")}function c(h,f){return f?"\x1B[200~"+h+"\x1B[201~":h}function u(h,f,g,y){h=c(h=l(h),g.decPrivateModes.bracketedPasteMode&&y.rawOptions.ignoreBracketedPasteMode!==!0),g.triggerDataEvent(h,!0),f.value=""}function d(h,f,g){const y=g.getBoundingClientRect(),m=h.clientX-y.left-10,b=h.clientY-y.top-10;f.style.width="20px",f.style.height="20px",f.style.left=`${m}px`,f.style.top=`${b}px`,f.style.zIndex="1000",f.focus()}Object.defineProperty(a,"__esModule",{value:!0}),a.rightClickHandler=a.moveTextAreaUnderMouseCursor=a.paste=a.handlePasteEvent=a.copyHandler=a.bracketTextForPaste=a.prepareTextForTerminal=void 0,a.prepareTextForTerminal=l,a.bracketTextForPaste=c,a.copyHandler=function(h,f){h.clipboardData&&h.clipboardData.setData("text/plain",f.selectionText),h.preventDefault()},a.handlePasteEvent=function(h,f,g,y){h.stopPropagation(),h.clipboardData&&u(h.clipboardData.getData("text/plain"),f,g,y)},a.paste=u,a.moveTextAreaUnderMouseCursor=d,a.rightClickHandler=function(h,f,g,y,m){d(h,f,g),m&&y.rightClickSelect(h),f.value=y.selectionText,f.select()}},7239:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ColorContrastCache=void 0;const c=l(1505);a.ColorContrastCache=class{constructor(){this._color=new c.TwoKeyMap,this._css=new c.TwoKeyMap}setCss(u,d,h){this._css.set(u,d,h)}getCss(u,d){return this._css.get(u,d)}setColor(u,d,h){this._color.set(u,d,h)}getColor(u,d){return this._color.get(u,d)}clear(){this._color.clear(),this._css.clear()}}},3656:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.addDisposableDomListener=void 0,a.addDisposableDomListener=function(l,c,u,d){l.addEventListener(c,u,d);let h=!1;return{dispose:()=>{h||(h=!0,l.removeEventListener(c,u,d))}}}},3551:function(o,a,l){var c=this&&this.__decorate||function(b,v,_,E){var w,S=arguments.length,k=S<3?v:E===null?E=Object.getOwnPropertyDescriptor(v,_):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,v,_,E);else for(var x=b.length-1;x>=0;x--)(w=b[x])&&(k=(S<3?w(k):S>3?w(v,_,k):w(v,_))||k);return S>3&&k&&Object.defineProperty(v,_,k),k},u=this&&this.__param||function(b,v){return function(_,E){v(_,E,b)}};Object.defineProperty(a,"__esModule",{value:!0}),a.Linkifier=void 0;const d=l(3656),h=l(8460),f=l(844),g=l(2585),y=l(4725);let m=a.Linkifier=class extends f.Disposable{get currentLink(){return this._currentLink}constructor(b,v,_,E,w){super(),this._element=b,this._mouseService=v,this._renderService=_,this._bufferService=E,this._linkProviderService=w,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new h.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new h.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,f.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,f.toDisposable)(()=>{this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,d.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,d.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,d.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,d.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(b){this._lastMouseEvent=b;const v=this._positionFromMouseEvent(b,this._element,this._mouseService);if(!v)return;this._isMouseOut=!1;const _=b.composedPath();for(let E=0;E<_.length;E++){const w=_[E];if(w.classList.contains("xterm"))break;if(w.classList.contains("xterm-hover"))return}this._lastBufferCell&&v.x===this._lastBufferCell.x&&v.y===this._lastBufferCell.y||(this._handleHover(v),this._lastBufferCell=v)}_handleHover(b){if(this._activeLine!==b.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(b,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,b)||(this._clearCurrentLink(),this._askForLink(b,!0))}_askForLink(b,v){this._activeProviderReplies&&v||(this._activeProviderReplies?.forEach(E=>{E?.forEach(w=>{w.link.dispose&&w.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=b.y);let _=!1;for(const[E,w]of this._linkProviderService.linkProviders.entries())v?this._activeProviderReplies?.get(E)&&(_=this._checkLinkProviderResult(E,b,_)):w.provideLinks(b.y,S=>{if(this._isMouseOut)return;const k=S?.map(x=>({link:x}));this._activeProviderReplies?.set(E,k),_=this._checkLinkProviderResult(E,b,_),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(b.y,this._activeProviderReplies)})}_removeIntersectingLinks(b,v){const _=new Set;for(let E=0;E<v.size;E++){const w=v.get(E);if(w)for(let S=0;S<w.length;S++){const k=w[S],x=k.link.range.start.y<b?0:k.link.range.start.x,I=k.link.range.end.y>b?this._bufferService.cols:k.link.range.end.x;for(let R=x;R<=I;R++){if(_.has(R)){w.splice(S--,1);break}_.add(R)}}}}_checkLinkProviderResult(b,v,_){if(!this._activeProviderReplies)return _;const E=this._activeProviderReplies.get(b);let w=!1;for(let S=0;S<b;S++)this._activeProviderReplies.has(S)&&!this._activeProviderReplies.get(S)||(w=!0);if(!w&&E){const S=E.find(k=>this._linkAtPosition(k.link,v));S&&(_=!0,this._handleNewLink(S))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!_)for(let S=0;S<this._activeProviderReplies.size;S++){const k=this._activeProviderReplies.get(S)?.find(x=>this._linkAtPosition(x.link,v));if(k){_=!0,this._handleNewLink(k);break}}return _}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(b){if(!this._currentLink)return;const v=this._positionFromMouseEvent(b,this._element,this._mouseService);v&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,v)&&this._currentLink.link.activate(b,this._currentLink.link.text)}_clearCurrentLink(b,v){this._currentLink&&this._lastMouseEvent&&(!b||!v||this._currentLink.link.range.start.y>=b&&this._currentLink.link.range.end.y<=v)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,f.disposeArray)(this._linkCacheDisposables))}_handleNewLink(b){if(!this._lastMouseEvent)return;const v=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);v&&this._linkAtPosition(b.link,v)&&(this._currentLink=b,this._currentLink.state={decorations:{underline:b.link.decorations===void 0||b.link.decorations.underline,pointerCursor:b.link.decorations===void 0||b.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,b.link,this._lastMouseEvent),b.link.decorations={},Object.defineProperties(b.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:_=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==_&&(this._currentLink.state.decorations.pointerCursor=_,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",_))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:_=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==_&&(this._currentLink.state.decorations.underline=_,this._currentLink.state.isHovered&&this._fireUnderlineEvent(b.link,_))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(_=>{if(!this._currentLink)return;const E=_.start===0?0:_.start+1+this._bufferService.buffer.ydisp,w=this._bufferService.buffer.ydisp+1+_.end;if(this._currentLink.link.range.start.y>=E&&this._currentLink.link.range.end.y<=w&&(this._clearCurrentLink(E,w),this._lastMouseEvent)){const S=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);S&&this._askForLink(S,!1)}})))}_linkHover(b,v,_){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(v,!0),this._currentLink.state.decorations.pointerCursor&&b.classList.add("xterm-cursor-pointer")),v.hover&&v.hover(_,v.text)}_fireUnderlineEvent(b,v){const _=b.range,E=this._bufferService.buffer.ydisp,w=this._createLinkUnderlineEvent(_.start.x-1,_.start.y-E-1,_.end.x,_.end.y-E-1,void 0);(v?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(w)}_linkLeave(b,v,_){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(v,!1),this._currentLink.state.decorations.pointerCursor&&b.classList.remove("xterm-cursor-pointer")),v.leave&&v.leave(_,v.text)}_linkAtPosition(b,v){const _=b.range.start.y*this._bufferService.cols+b.range.start.x,E=b.range.end.y*this._bufferService.cols+b.range.end.x,w=v.y*this._bufferService.cols+v.x;return _<=w&&w<=E}_positionFromMouseEvent(b,v,_){const E=_.getCoords(b,v,this._bufferService.cols,this._bufferService.rows);if(E)return{x:E[0],y:E[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(b,v,_,E,w){return{x1:b,y1:v,x2:_,y2:E,cols:this._bufferService.cols,fg:w}}};a.Linkifier=m=c([u(1,y.IMouseService),u(2,y.IRenderService),u(3,g.IBufferService),u(4,y.ILinkProviderService)],m)},9042:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.tooMuchOutput=a.promptLabel=void 0,a.promptLabel="Terminal input",a.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(o,a,l){var c=this&&this.__decorate||function(y,m,b,v){var _,E=arguments.length,w=E<3?m:v===null?v=Object.getOwnPropertyDescriptor(m,b):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(y,m,b,v);else for(var S=y.length-1;S>=0;S--)(_=y[S])&&(w=(E<3?_(w):E>3?_(m,b,w):_(m,b))||w);return E>3&&w&&Object.defineProperty(m,b,w),w},u=this&&this.__param||function(y,m){return function(b,v){m(b,v,y)}};Object.defineProperty(a,"__esModule",{value:!0}),a.OscLinkProvider=void 0;const d=l(511),h=l(2585);let f=a.OscLinkProvider=class{constructor(y,m,b){this._bufferService=y,this._optionsService=m,this._oscLinkService=b}provideLinks(y,m){const b=this._bufferService.buffer.lines.get(y-1);if(!b)return void m(void 0);const v=[],_=this._optionsService.rawOptions.linkHandler,E=new d.CellData,w=b.getTrimmedLength();let S=-1,k=-1,x=!1;for(let I=0;I<w;I++)if(k!==-1||b.hasContent(I)){if(b.loadCell(I,E),E.hasExtendedAttrs()&&E.extended.urlId){if(k===-1){k=I,S=E.extended.urlId;continue}x=E.extended.urlId!==S}else k!==-1&&(x=!0);if(x||k!==-1&&I===w-1){const R=this._oscLinkService.getLinkData(S)?.uri;if(R){const C={start:{x:k+1,y},end:{x:I+(x||I!==w-1?0:1),y}};let N=!1;if(!_?.allowNonHttpProtocols)try{const O=new URL(R);["http:","https:"].includes(O.protocol)||(N=!0)}catch{N=!0}N||v.push({text:R,range:C,activate:(O,P)=>_?_.activate(O,P,C):g(0,P),hover:(O,P)=>_?.hover?.(O,P,C),leave:(O,P)=>_?.leave?.(O,P,C)})}x=!1,E.hasExtendedAttrs()&&E.extended.urlId?(k=I,S=E.extended.urlId):(k=-1,S=-1)}}m(v)}};function g(y,m){if(confirm(`Do you want to navigate to ${m}?

WARNING: This link could potentially be dangerous`)){const b=window.open();if(b){try{b.opener=null}catch{}b.location.href=m}else console.warn("Opening link blocked as opener could not be cleared")}}a.OscLinkProvider=f=c([u(0,h.IBufferService),u(1,h.IOptionsService),u(2,h.IOscLinkService)],f)},6193:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.RenderDebouncer=void 0,a.RenderDebouncer=class{constructor(l,c){this._renderCallback=l,this._coreBrowserService=c,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(l){return this._refreshCallbacks.push(l),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(l,c,u){this._rowCount=u,l=l!==void 0?l:0,c=c!==void 0?c:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,l):l,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,c):c,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const l=Math.max(this._rowStart,0),c=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(l,c),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const l of this._refreshCallbacks)l(0);this._refreshCallbacks=[]}}},3236:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Terminal=void 0;const c=l(3614),u=l(3656),d=l(3551),h=l(9042),f=l(3730),g=l(1680),y=l(3107),m=l(5744),b=l(2950),v=l(1296),_=l(428),E=l(4269),w=l(5114),S=l(8934),k=l(3230),x=l(9312),I=l(4725),R=l(6731),C=l(8055),N=l(8969),O=l(8460),P=l(844),$=l(6114),ee=l(8437),J=l(2584),Z=l(7399),M=l(5941),F=l(9074),G=l(2585),D=l(5435),j=l(4567),V=l(779);class W extends N.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(te={}){super(te),this.browser=$,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new P.MutableDisposable),this._onCursorMove=this.register(new O.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new O.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new O.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new O.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new O.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new O.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new O.EventEmitter),this._onBlur=this.register(new O.EventEmitter),this._onA11yCharEmitter=this.register(new O.EventEmitter),this._onA11yTabEmitter=this.register(new O.EventEmitter),this._onWillOpen=this.register(new O.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(F.DecorationService),this._instantiationService.setService(G.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(V.LinkProviderService),this._instantiationService.setService(I.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(f.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((Y,de)=>this.refresh(Y,de))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(Y=>this._reportWindowsOptions(Y))),this.register(this._inputHandler.onColor(Y=>this._handleColorEvent(Y))),this.register((0,O.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,O.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,O.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,O.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(Y=>this._afterResize(Y.cols,Y.rows))),this.register((0,P.toDisposable)(()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)}))}_handleColorEvent(te){if(this._themeService)for(const Y of te){let de,ye="";switch(Y.index){case 256:de="foreground",ye="10";break;case 257:de="background",ye="11";break;case 258:de="cursor",ye="12";break;default:de="ansi",ye="4;"+Y.index}switch(Y.type){case 0:const Se=C.color.toColorRGB(de==="ansi"?this._themeService.colors.ansi[Y.index]:this._themeService.colors[de]);this.coreService.triggerDataEvent(`${J.C0.ESC}]${ye};${(0,M.toRgbString)(Se)}${J.C1_ESCAPED.ST}`);break;case 1:if(de==="ansi")this._themeService.modifyColors(Te=>Te.ansi[Y.index]=C.channels.toColor(...Y.color));else{const Te=de;this._themeService.modifyColors(ke=>ke[Te]=C.channels.toColor(...Y.color))}break;case 2:this._themeService.restoreColor(Y.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(te){te?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(j.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(te){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(J.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(J.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const te=this.buffer.ybase+this.buffer.y,Y=this.buffer.lines.get(te);if(!Y)return;const de=Math.min(this.buffer.x,this.cols-1),ye=this._renderService.dimensions.css.cell.height,Se=Y.getWidth(de),Te=this._renderService.dimensions.css.cell.width*Se,ke=this.buffer.y*this._renderService.dimensions.css.cell.height,K=de*this._renderService.dimensions.css.cell.width;this.textarea.style.left=K+"px",this.textarea.style.top=ke+"px",this.textarea.style.width=Te+"px",this.textarea.style.height=ye+"px",this.textarea.style.lineHeight=ye+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,u.addDisposableDomListener)(this.element,"copy",Y=>{this.hasSelection()&&(0,c.copyHandler)(Y,this._selectionService)}));const te=Y=>(0,c.handlePasteEvent)(Y,this.textarea,this.coreService,this.optionsService);this.register((0,u.addDisposableDomListener)(this.textarea,"paste",te)),this.register((0,u.addDisposableDomListener)(this.element,"paste",te)),$.isFirefox?this.register((0,u.addDisposableDomListener)(this.element,"mousedown",Y=>{Y.button===2&&(0,c.rightClickHandler)(Y,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,u.addDisposableDomListener)(this.element,"contextmenu",Y=>{(0,c.rightClickHandler)(Y,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),$.isLinux&&this.register((0,u.addDisposableDomListener)(this.element,"auxclick",Y=>{Y.button===1&&(0,c.moveTextAreaUnderMouseCursor)(Y,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,u.addDisposableDomListener)(this.textarea,"keyup",te=>this._keyUp(te),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keydown",te=>this._keyDown(te),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keypress",te=>this._keyPress(te),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionupdate",te=>this._compositionHelper.compositionupdate(te))),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,u.addDisposableDomListener)(this.textarea,"input",te=>this._inputEvent(te),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(te){if(!te)throw new Error("Terminal requires a parent element.");if(te.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=te.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),te.appendChild(this.element);const Y=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),Y.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,u.addDisposableDomListener)(this.screenElement,"mousemove",de=>this.updateCursorStyle(de))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),Y.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",h.promptLabel),$.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(w.CoreBrowserService,this.textarea,te.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(I.ICoreBrowserService,this._coreBrowserService),this.register((0,u.addDisposableDomListener)(this.textarea,"focus",de=>this._handleTextAreaFocus(de))),this.register((0,u.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(_.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(I.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(R.ThemeService),this._instantiationService.setService(I.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(E.CharacterJoinerService),this._instantiationService.setService(I.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(k.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(I.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(de=>this._onRender.fire(de))),this.onResize(de=>this._renderService.resize(de.cols,de.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(b.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(S.MouseService),this._instantiationService.setService(I.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(d.Linkifier,this.screenElement)),this.element.appendChild(Y);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(g.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(de=>this.scrollLines(de.amount,de.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(x.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(I.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(de=>this.scrollLines(de.amount,de.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(de=>this._renderService.handleSelectionChanged(de.start,de.end,de.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(de=>{this.textarea.value=de,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(de=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,u.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(y.BufferDecorationRenderer,this.screenElement)),this.register((0,u.addDisposableDomListener)(this.element,"mousedown",de=>this._selectionService.handleMouseDown(de))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(j.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",de=>this._handleScreenReaderModeOptionChange(de))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(m.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",de=>{!this._overviewRulerRenderer&&de&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(m.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(v.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const te=this,Y=this.element;function de(Te){const ke=te._mouseService.getMouseReportCoords(Te,te.screenElement);if(!ke)return!1;let K,ge;switch(Te.overrideType||Te.type){case"mousemove":ge=32,Te.buttons===void 0?(K=3,Te.button!==void 0&&(K=Te.button<3?Te.button:3)):K=1&Te.buttons?0:4&Te.buttons?1:2&Te.buttons?2:3;break;case"mouseup":ge=0,K=Te.button<3?Te.button:3;break;case"mousedown":ge=1,K=Te.button<3?Te.button:3;break;case"wheel":if(te._customWheelEventHandler&&te._customWheelEventHandler(Te)===!1||te.viewport.getLinesScrolled(Te)===0)return!1;ge=Te.deltaY<0?0:1,K=4;break;default:return!1}return!(ge===void 0||K===void 0||K>4)&&te.coreMouseService.triggerMouseEvent({col:ke.col,row:ke.row,x:ke.x,y:ke.y,button:K,action:ge,ctrl:Te.ctrlKey,alt:Te.altKey,shift:Te.shiftKey})}const ye={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Se={mouseup:Te=>(de(Te),Te.buttons||(this._document.removeEventListener("mouseup",ye.mouseup),ye.mousedrag&&this._document.removeEventListener("mousemove",ye.mousedrag)),this.cancel(Te)),wheel:Te=>(de(Te),this.cancel(Te,!0)),mousedrag:Te=>{Te.buttons&&de(Te)},mousemove:Te=>{Te.buttons||de(Te)}};this.register(this.coreMouseService.onProtocolChange(Te=>{Te?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(Te)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&Te?ye.mousemove||(Y.addEventListener("mousemove",Se.mousemove),ye.mousemove=Se.mousemove):(Y.removeEventListener("mousemove",ye.mousemove),ye.mousemove=null),16&Te?ye.wheel||(Y.addEventListener("wheel",Se.wheel,{passive:!1}),ye.wheel=Se.wheel):(Y.removeEventListener("wheel",ye.wheel),ye.wheel=null),2&Te?ye.mouseup||(ye.mouseup=Se.mouseup):(this._document.removeEventListener("mouseup",ye.mouseup),ye.mouseup=null),4&Te?ye.mousedrag||(ye.mousedrag=Se.mousedrag):(this._document.removeEventListener("mousemove",ye.mousedrag),ye.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,u.addDisposableDomListener)(Y,"mousedown",Te=>{if(Te.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(Te))return de(Te),ye.mouseup&&this._document.addEventListener("mouseup",ye.mouseup),ye.mousedrag&&this._document.addEventListener("mousemove",ye.mousedrag),this.cancel(Te)})),this.register((0,u.addDisposableDomListener)(Y,"wheel",Te=>{if(!ye.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(Te)===!1)return!1;if(!this.buffer.hasScrollback){const ke=this.viewport.getLinesScrolled(Te);if(ke===0)return;const K=J.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(Te.deltaY<0?"A":"B");let ge="";for(let ne=0;ne<Math.abs(ke);ne++)ge+=K;return this.coreService.triggerDataEvent(ge,!0),this.cancel(Te,!0)}return this.viewport.handleWheel(Te)?this.cancel(Te):void 0}},{passive:!1})),this.register((0,u.addDisposableDomListener)(Y,"touchstart",Te=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(Te),this.cancel(Te)},{passive:!0})),this.register((0,u.addDisposableDomListener)(Y,"touchmove",Te=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(Te)?void 0:this.cancel(Te)},{passive:!1}))}refresh(te,Y){this._renderService?.refreshRows(te,Y)}updateCursorStyle(te){this._selectionService?.shouldColumnSelect(te)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(te,Y,de=0){de===1?(super.scrollLines(te,Y,de),this.refresh(0,this.rows-1)):this.viewport?.scrollLines(te)}paste(te){(0,c.paste)(te,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(te){this._customKeyEventHandler=te}attachCustomWheelEventHandler(te){this._customWheelEventHandler=te}registerLinkProvider(te){return this._linkProviderService.registerLinkProvider(te)}registerCharacterJoiner(te){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const Y=this._characterJoinerService.register(te);return this.refresh(0,this.rows-1),Y}deregisterCharacterJoiner(te){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(te)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(te){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+te)}registerDecoration(te){return this._decorationService.registerDecoration(te)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(te,Y,de){this._selectionService.setSelection(te,Y,de)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines(te,Y){this._selectionService?.selectLines(te,Y)}_keyDown(te){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(te)===!1)return!1;const Y=this.browser.isMac&&this.options.macOptionIsMeta&&te.altKey;if(!Y&&!this._compositionHelper.keydown(te))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;Y||te.key!=="Dead"&&te.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const de=(0,Z.evaluateKeyboardEvent)(te,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(te),de.type===3||de.type===2){const ye=this.rows-1;return this.scrollLines(de.type===2?-ye:ye),this.cancel(te,!0)}return de.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,te)||(de.cancel&&this.cancel(te,!0),!de.key||!!(te.key&&!te.ctrlKey&&!te.altKey&&!te.metaKey&&te.key.length===1&&te.key.charCodeAt(0)>=65&&te.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(de.key!==J.C0.ETX&&de.key!==J.C0.CR||(this.textarea.value=""),this._onKey.fire({key:de.key,domEvent:te}),this._showCursor(),this.coreService.triggerDataEvent(de.key,!0),!this.optionsService.rawOptions.screenReaderMode||te.altKey||te.ctrlKey?this.cancel(te,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(te,Y){const de=te.isMac&&!this.options.macOptionIsMeta&&Y.altKey&&!Y.ctrlKey&&!Y.metaKey||te.isWindows&&Y.altKey&&Y.ctrlKey&&!Y.metaKey||te.isWindows&&Y.getModifierState("AltGraph");return Y.type==="keypress"?de:de&&(!Y.keyCode||Y.keyCode>47)}_keyUp(te){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(te)===!1||(function(Y){return Y.keyCode===16||Y.keyCode===17||Y.keyCode===18}(te)||this.focus(),this.updateCursorStyle(te),this._keyPressHandled=!1)}_keyPress(te){let Y;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(te)===!1)return!1;if(this.cancel(te),te.charCode)Y=te.charCode;else if(te.which===null||te.which===void 0)Y=te.keyCode;else{if(te.which===0||te.charCode===0)return!1;Y=te.which}return!(!Y||(te.altKey||te.ctrlKey||te.metaKey)&&!this._isThirdLevelShift(this.browser,te)||(Y=String.fromCharCode(Y),this._onKey.fire({key:Y,domEvent:te}),this._showCursor(),this.coreService.triggerDataEvent(Y,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(te){if(te.data&&te.inputType==="insertText"&&(!te.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const Y=te.data;return this.coreService.triggerDataEvent(Y,!0),this.cancel(te),!0}return!1}resize(te,Y){te!==this.cols||Y!==this.rows?super.resize(te,Y):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(te,Y){this._charSizeService?.measure(),this.viewport?.syncScrollArea(!0)}clear(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let te=1;te<this.rows;te++)this.buffer.lines.push(this.buffer.getBlankLine(ee.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),this.viewport?.reset(),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;const te=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this.viewport?.reset(),this._customKeyEventHandler=te,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(J.C0.ESC+"[I"):this.coreService.triggerDataEvent(J.C0.ESC+"[O")}_reportWindowsOptions(te){if(this._renderService)switch(te){case D.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const Y=this._renderService.dimensions.css.canvas.width.toFixed(0),de=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${J.C0.ESC}[4;${de};${Y}t`);break;case D.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const ye=this._renderService.dimensions.css.cell.width.toFixed(0),Se=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${J.C0.ESC}[6;${Se};${ye}t`)}}cancel(te,Y){if(this.options.cancelEvents||Y)return te.preventDefault(),te.stopPropagation(),!1}}a.Terminal=W},9924:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TimeBasedDebouncer=void 0,a.TimeBasedDebouncer=class{constructor(l,c=1e3){this._renderCallback=l,this._debounceThresholdMS=c,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(l,c,u){this._rowCount=u,l=l!==void 0?l:0,c=c!==void 0?c:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,l):l,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,c):c;const d=Date.now();if(d-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=d,this._innerRefresh();else if(!this._additionalRefreshRequested){const h=d-this._lastRefreshMs,f=this._debounceThresholdMS-h;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},f)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const l=Math.max(this._rowStart,0),c=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(l,c)}}},1680:function(o,a,l){var c=this&&this.__decorate||function(b,v,_,E){var w,S=arguments.length,k=S<3?v:E===null?E=Object.getOwnPropertyDescriptor(v,_):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,v,_,E);else for(var x=b.length-1;x>=0;x--)(w=b[x])&&(k=(S<3?w(k):S>3?w(v,_,k):w(v,_))||k);return S>3&&k&&Object.defineProperty(v,_,k),k},u=this&&this.__param||function(b,v){return function(_,E){v(_,E,b)}};Object.defineProperty(a,"__esModule",{value:!0}),a.Viewport=void 0;const d=l(3656),h=l(4725),f=l(8460),g=l(844),y=l(2585);let m=a.Viewport=class extends g.Disposable{constructor(b,v,_,E,w,S,k,x){super(),this._viewportElement=b,this._scrollArea=v,this._bufferService=_,this._optionsService=E,this._charSizeService=w,this._renderService=S,this._coreBrowserService=k,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new f.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,d.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(I=>this._activeBuffer=I.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(I=>this._renderDimensions=I)),this._handleThemeChange(x.colors),this.register(x.onChangeColors(I=>this._handleThemeChange(I))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(b){this._viewportElement.style.backgroundColor=b.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(b){if(b)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const v=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==v&&(this._lastRecordedBufferHeight=v,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const b=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==b&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=b),this._refreshAnimationFrame=null}syncScrollArea(b=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(b);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(b)}_handleScroll(b){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const v=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:v,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const b=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(b*(this._smoothScrollState.target-this._smoothScrollState.origin)),b<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(b,v){const _=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(v<0&&this._viewportElement.scrollTop!==0||v>0&&_<this._lastRecordedBufferHeight)||(b.cancelable&&b.preventDefault(),!1)}handleWheel(b){const v=this._getPixelsScrolled(b);return v!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+v:this._smoothScrollState.target+=v,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=v,this._bubbleScroll(b,v))}scrollLines(b){if(b!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const v=b*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+v,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:b,suppressScrollEvent:!1})}_getPixelsScrolled(b){if(b.deltaY===0||b.shiftKey)return 0;let v=this._applyScrollModifier(b.deltaY,b);return b.deltaMode===WheelEvent.DOM_DELTA_LINE?v*=this._currentRowHeight:b.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(v*=this._currentRowHeight*this._bufferService.rows),v}getBufferElements(b,v){let _,E="";const w=[],S=v??this._bufferService.buffer.lines.length,k=this._bufferService.buffer.lines;for(let x=b;x<S;x++){const I=k.get(x);if(!I)continue;const R=k.get(x+1)?.isWrapped;if(E+=I.translateToString(!R),!R||x===k.length-1){const C=document.createElement("div");C.textContent=E,w.push(C),E.length>0&&(_=C),E=""}}return{bufferElements:w,cursorElement:_}}getLinesScrolled(b){if(b.deltaY===0||b.shiftKey)return 0;let v=this._applyScrollModifier(b.deltaY,b);return b.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(v/=this._currentRowHeight+0,this._wheelPartialScroll+=v,v=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):b.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(v*=this._bufferService.rows),v}_applyScrollModifier(b,v){const _=this._optionsService.rawOptions.fastScrollModifier;return _==="alt"&&v.altKey||_==="ctrl"&&v.ctrlKey||_==="shift"&&v.shiftKey?b*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:b*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(b){this._lastTouchY=b.touches[0].pageY}handleTouchMove(b){const v=this._lastTouchY-b.touches[0].pageY;return this._lastTouchY=b.touches[0].pageY,v!==0&&(this._viewportElement.scrollTop+=v,this._bubbleScroll(b,v))}};a.Viewport=m=c([u(2,y.IBufferService),u(3,y.IOptionsService),u(4,h.ICharSizeService),u(5,h.IRenderService),u(6,h.ICoreBrowserService),u(7,h.IThemeService)],m)},3107:function(o,a,l){var c=this&&this.__decorate||function(y,m,b,v){var _,E=arguments.length,w=E<3?m:v===null?v=Object.getOwnPropertyDescriptor(m,b):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(y,m,b,v);else for(var S=y.length-1;S>=0;S--)(_=y[S])&&(w=(E<3?_(w):E>3?_(m,b,w):_(m,b))||w);return E>3&&w&&Object.defineProperty(m,b,w),w},u=this&&this.__param||function(y,m){return function(b,v){m(b,v,y)}};Object.defineProperty(a,"__esModule",{value:!0}),a.BufferDecorationRenderer=void 0;const d=l(4725),h=l(844),f=l(2585);let g=a.BufferDecorationRenderer=class extends h.Disposable{constructor(y,m,b,v,_){super(),this._screenElement=y,this._bufferService=m,this._coreBrowserService=b,this._decorationService=v,this._renderService=_,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(E=>this._removeDecoration(E))),this.register((0,h.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const y of this._decorationService.decorations)this._renderDecoration(y);this._dimensionsChanged=!1}_renderDecoration(y){this._refreshStyle(y),this._dimensionsChanged&&this._refreshXPosition(y)}_createElement(y){const m=this._coreBrowserService.mainDocument.createElement("div");m.classList.add("xterm-decoration"),m.classList.toggle("xterm-decoration-top-layer",y?.options?.layer==="top"),m.style.width=`${Math.round((y.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,m.style.height=(y.options.height||1)*this._renderService.dimensions.css.cell.height+"px",m.style.top=(y.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",m.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const b=y.options.x??0;return b&&b>this._bufferService.cols&&(m.style.display="none"),this._refreshXPosition(y,m),m}_refreshStyle(y){const m=y.marker.line-this._bufferService.buffers.active.ydisp;if(m<0||m>=this._bufferService.rows)y.element&&(y.element.style.display="none",y.onRenderEmitter.fire(y.element));else{let b=this._decorationElements.get(y);b||(b=this._createElement(y),y.element=b,this._decorationElements.set(y,b),this._container.appendChild(b),y.onDispose(()=>{this._decorationElements.delete(y),b.remove()})),b.style.top=m*this._renderService.dimensions.css.cell.height+"px",b.style.display=this._altBufferIsActive?"none":"block",y.onRenderEmitter.fire(b)}}_refreshXPosition(y,m=y.element){if(!m)return;const b=y.options.x??0;(y.options.anchor||"left")==="right"?m.style.right=b?b*this._renderService.dimensions.css.cell.width+"px":"":m.style.left=b?b*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(y){this._decorationElements.get(y)?.remove(),this._decorationElements.delete(y),y.dispose()}};a.BufferDecorationRenderer=g=c([u(1,f.IBufferService),u(2,d.ICoreBrowserService),u(3,f.IDecorationService),u(4,d.IRenderService)],g)},5871:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ColorZoneStore=void 0,a.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(l){if(l.options.overviewRulerOptions){for(const c of this._zones)if(c.color===l.options.overviewRulerOptions.color&&c.position===l.options.overviewRulerOptions.position){if(this._lineIntersectsZone(c,l.marker.line))return;if(this._lineAdjacentToZone(c,l.marker.line,l.options.overviewRulerOptions.position))return void this._addLineToZone(c,l.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=l.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=l.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=l.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=l.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:l.options.overviewRulerOptions.color,position:l.options.overviewRulerOptions.position,startBufferLine:l.marker.line,endBufferLine:l.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(l){this._linePadding=l}_lineIntersectsZone(l,c){return c>=l.startBufferLine&&c<=l.endBufferLine}_lineAdjacentToZone(l,c,u){return c>=l.startBufferLine-this._linePadding[u||"full"]&&c<=l.endBufferLine+this._linePadding[u||"full"]}_addLineToZone(l,c){l.startBufferLine=Math.min(l.startBufferLine,c),l.endBufferLine=Math.max(l.endBufferLine,c)}}},5744:function(o,a,l){var c=this&&this.__decorate||function(_,E,w,S){var k,x=arguments.length,I=x<3?E:S===null?S=Object.getOwnPropertyDescriptor(E,w):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(_,E,w,S);else for(var R=_.length-1;R>=0;R--)(k=_[R])&&(I=(x<3?k(I):x>3?k(E,w,I):k(E,w))||I);return x>3&&I&&Object.defineProperty(E,w,I),I},u=this&&this.__param||function(_,E){return function(w,S){E(w,S,_)}};Object.defineProperty(a,"__esModule",{value:!0}),a.OverviewRulerRenderer=void 0;const d=l(5871),h=l(4725),f=l(844),g=l(2585),y={full:0,left:0,center:0,right:0},m={full:0,left:0,center:0,right:0},b={full:0,left:0,center:0,right:0};let v=a.OverviewRulerRenderer=class extends f.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(_,E,w,S,k,x,I){super(),this._viewportElement=_,this._screenElement=E,this._bufferService=w,this._decorationService=S,this._renderService=k,this._optionsService=x,this._coreBrowserService=I,this._colorZoneStore=new d.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement);const R=this._canvas.getContext("2d");if(!R)throw new Error("Ctx cannot be null");this._ctx=R,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,f.toDisposable)(()=>{this._canvas?.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const _=Math.floor(this._canvas.width/3),E=Math.ceil(this._canvas.width/3);m.full=this._canvas.width,m.left=_,m.center=E,m.right=_,this._refreshDrawHeightConstants(),b.full=0,b.left=0,b.center=m.left,b.right=m.left+m.center}_refreshDrawHeightConstants(){y.full=Math.round(2*this._coreBrowserService.dpr);const _=this._canvas.height/this._bufferService.buffer.lines.length,E=Math.round(Math.max(Math.min(_,12),6)*this._coreBrowserService.dpr);y.left=E,y.center=E,y.right=E}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*y.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*y.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*y.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*y.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const E of this._decorationService.decorations)this._colorZoneStore.addDecoration(E);this._ctx.lineWidth=1;const _=this._colorZoneStore.zones;for(const E of _)E.position!=="full"&&this._renderColorZone(E);for(const E of _)E.position==="full"&&this._renderColorZone(E);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(_){this._ctx.fillStyle=_.color,this._ctx.fillRect(b[_.position||"full"],Math.round((this._canvas.height-1)*(_.startBufferLine/this._bufferService.buffers.active.lines.length)-y[_.position||"full"]/2),m[_.position||"full"],Math.round((this._canvas.height-1)*((_.endBufferLine-_.startBufferLine)/this._bufferService.buffers.active.lines.length)+y[_.position||"full"]))}_queueRefresh(_,E){this._shouldUpdateDimensions=_||this._shouldUpdateDimensions,this._shouldUpdateAnchor=E||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};a.OverviewRulerRenderer=v=c([u(2,g.IBufferService),u(3,g.IDecorationService),u(4,h.IRenderService),u(5,g.IOptionsService),u(6,h.ICoreBrowserService)],v)},2950:function(o,a,l){var c=this&&this.__decorate||function(y,m,b,v){var _,E=arguments.length,w=E<3?m:v===null?v=Object.getOwnPropertyDescriptor(m,b):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(y,m,b,v);else for(var S=y.length-1;S>=0;S--)(_=y[S])&&(w=(E<3?_(w):E>3?_(m,b,w):_(m,b))||w);return E>3&&w&&Object.defineProperty(m,b,w),w},u=this&&this.__param||function(y,m){return function(b,v){m(b,v,y)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CompositionHelper=void 0;const d=l(4725),h=l(2585),f=l(2584);let g=a.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(y,m,b,v,_,E){this._textarea=y,this._compositionView=m,this._bufferService=b,this._optionsService=v,this._coreService=_,this._renderService=E,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(y){this._compositionView.textContent=y.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(y){if(this._isComposing||this._isSendingComposition){if(y.keyCode===229||y.keyCode===16||y.keyCode===17||y.keyCode===18)return!1;this._finalizeComposition(!1)}return y.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(y){if(this._compositionView.classList.remove("active"),this._isComposing=!1,y){const m={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let b;this._isSendingComposition=!1,m.start+=this._dataAlreadySent.length,b=this._isComposing?this._textarea.value.substring(m.start,m.end):this._textarea.value.substring(m.start),b.length>0&&this._coreService.triggerDataEvent(b,!0)}},0)}else{this._isSendingComposition=!1;const m=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(m,!0)}}_handleAnyTextareaChanges(){const y=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const m=this._textarea.value,b=m.replace(y,"");this._dataAlreadySent=b,m.length>y.length?this._coreService.triggerDataEvent(b,!0):m.length<y.length?this._coreService.triggerDataEvent(`${f.C0.DEL}`,!0):m.length===y.length&&m!==y&&this._coreService.triggerDataEvent(m,!0)}},0)}updateCompositionElements(y){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const m=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),b=this._renderService.dimensions.css.cell.height,v=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,_=m*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=_+"px",this._compositionView.style.top=v+"px",this._compositionView.style.height=b+"px",this._compositionView.style.lineHeight=b+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const E=this._compositionView.getBoundingClientRect();this._textarea.style.left=_+"px",this._textarea.style.top=v+"px",this._textarea.style.width=Math.max(E.width,1)+"px",this._textarea.style.height=Math.max(E.height,1)+"px",this._textarea.style.lineHeight=E.height+"px"}y||setTimeout(()=>this.updateCompositionElements(!0),0)}}};a.CompositionHelper=g=c([u(2,h.IBufferService),u(3,h.IOptionsService),u(4,h.ICoreService),u(5,d.IRenderService)],g)},9806:(o,a)=>{function l(c,u,d){const h=d.getBoundingClientRect(),f=c.getComputedStyle(d),g=parseInt(f.getPropertyValue("padding-left")),y=parseInt(f.getPropertyValue("padding-top"));return[u.clientX-h.left-g,u.clientY-h.top-y]}Object.defineProperty(a,"__esModule",{value:!0}),a.getCoords=a.getCoordsRelativeToElement=void 0,a.getCoordsRelativeToElement=l,a.getCoords=function(c,u,d,h,f,g,y,m,b){if(!g)return;const v=l(c,u,d);return v?(v[0]=Math.ceil((v[0]+(b?y/2:0))/y),v[1]=Math.ceil(v[1]/m),v[0]=Math.min(Math.max(v[0],1),h+(b?1:0)),v[1]=Math.min(Math.max(v[1],1),f),v):void 0}},9504:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.moveToCellSequence=void 0;const c=l(2584);function u(m,b,v,_){const E=m-d(m,v),w=b-d(b,v),S=Math.abs(E-w)-function(k,x,I){let R=0;const C=k-d(k,I),N=x-d(x,I);for(let O=0;O<Math.abs(C-N);O++){const P=h(k,x)==="A"?-1:1;I.buffer.lines.get(C+P*O)?.isWrapped&&R++}return R}(m,b,v);return y(S,g(h(m,b),_))}function d(m,b){let v=0,_=b.buffer.lines.get(m),E=_?.isWrapped;for(;E&&m>=0&&m<b.rows;)v++,_=b.buffer.lines.get(--m),E=_?.isWrapped;return v}function h(m,b){return m>b?"A":"B"}function f(m,b,v,_,E,w){let S=m,k=b,x="";for(;S!==v||k!==_;)S+=E?1:-1,E&&S>w.cols-1?(x+=w.buffer.translateBufferLineToString(k,!1,m,S),S=0,m=0,k++):!E&&S<0&&(x+=w.buffer.translateBufferLineToString(k,!1,0,m+1),S=w.cols-1,m=S,k--);return x+w.buffer.translateBufferLineToString(k,!1,m,S)}function g(m,b){const v=b?"O":"[";return c.C0.ESC+v+m}function y(m,b){m=Math.floor(m);let v="";for(let _=0;_<m;_++)v+=b;return v}a.moveToCellSequence=function(m,b,v,_){const E=v.buffer.x,w=v.buffer.y;if(!v.buffer.hasScrollback)return function(x,I,R,C,N,O){return u(I,C,N,O).length===0?"":y(f(x,I,x,I-d(I,N),!1,N).length,g("D",O))}(E,w,0,b,v,_)+u(w,b,v,_)+function(x,I,R,C,N,O){let P;P=u(I,C,N,O).length>0?C-d(C,N):I;const $=C,ee=function(J,Z,M,F,G,D){let j;return j=u(M,F,G,D).length>0?F-d(F,G):Z,J<M&&j<=F||J>=M&&j<F?"C":"D"}(x,I,R,C,N,O);return y(f(x,P,R,$,ee==="C",N).length,g(ee,O))}(E,w,m,b,v,_);let S;if(w===b)return S=E>m?"D":"C",y(Math.abs(E-m),g(S,_));S=w>b?"D":"C";const k=Math.abs(w-b);return y(function(x,I){return I.cols-x}(w>b?m:E,v)+(k-1)*v.cols+1+((w>b?E:m)-1),g(S,_))}},1296:function(o,a,l){var c=this&&this.__decorate||function(O,P,$,ee){var J,Z=arguments.length,M=Z<3?P:ee===null?ee=Object.getOwnPropertyDescriptor(P,$):ee;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(O,P,$,ee);else for(var F=O.length-1;F>=0;F--)(J=O[F])&&(M=(Z<3?J(M):Z>3?J(P,$,M):J(P,$))||M);return Z>3&&M&&Object.defineProperty(P,$,M),M},u=this&&this.__param||function(O,P){return function($,ee){P($,ee,O)}};Object.defineProperty(a,"__esModule",{value:!0}),a.DomRenderer=void 0;const d=l(3787),h=l(2550),f=l(2223),g=l(6171),y=l(6052),m=l(4725),b=l(8055),v=l(8460),_=l(844),E=l(2585),w="xterm-dom-renderer-owner-",S="xterm-rows",k="xterm-fg-",x="xterm-bg-",I="xterm-focus",R="xterm-selection";let C=1,N=a.DomRenderer=class extends _.Disposable{constructor(O,P,$,ee,J,Z,M,F,G,D,j,V,W){super(),this._terminal=O,this._document=P,this._element=$,this._screenElement=ee,this._viewportElement=J,this._helperContainer=Z,this._linkifier2=M,this._charSizeService=G,this._optionsService=D,this._bufferService=j,this._coreBrowserService=V,this._themeService=W,this._terminalClass=C++,this._rowElements=[],this._selectionRenderModel=(0,y.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new v.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(S),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(R),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,g.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(re=>this._injectCss(re))),this._injectCss(this._themeService.colors),this._rowFactory=F.createInstance(d.DomRendererRowFactory,document),this._element.classList.add(w+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(re=>this._handleLinkHover(re))),this.register(this._linkifier2.onHideLinkUnderline(re=>this._handleLinkLeave(re))),this.register((0,_.toDisposable)(()=>{this._element.classList.remove(w+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new h.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const O=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*O,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*O),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/O),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/O),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const $ of this._rowElements)$.style.width=`${this.dimensions.css.canvas.width}px`,$.style.height=`${this.dimensions.css.cell.height}px`,$.style.lineHeight=`${this.dimensions.css.cell.height}px`,$.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const P=`${this._terminalSelector} .${S} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=P,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(O){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let P=`${this._terminalSelector} .${S} { color: ${O.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;P+=`${this._terminalSelector} .${S} .xterm-dim { color: ${b.color.multiplyOpacity(O.foreground,.5).css};}`,P+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const $=`blink_underline_${this._terminalClass}`,ee=`blink_bar_${this._terminalClass}`,J=`blink_block_${this._terminalClass}`;P+=`@keyframes ${$} { 50% {  border-bottom-style: hidden; }}`,P+=`@keyframes ${ee} { 50% {  box-shadow: none; }}`,P+=`@keyframes ${J} { 0% {  background-color: ${O.cursor.css};  color: ${O.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${O.cursor.css}; }}`,P+=`${this._terminalSelector} .${S}.${I} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${$} 1s step-end infinite;}${this._terminalSelector} .${S}.${I} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${ee} 1s step-end infinite;}${this._terminalSelector} .${S}.${I} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${J} 1s step-end infinite;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-block { background-color: ${O.cursor.css}; color: ${O.cursorAccent.css};}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${O.cursor.css} !important; color: ${O.cursorAccent.css} !important;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${O.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${O.cursor.css} inset;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${O.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,P+=`${this._terminalSelector} .${R} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${R} div { position: absolute; background-color: ${O.selectionBackgroundOpaque.css};}${this._terminalSelector} .${R} div { position: absolute; background-color: ${O.selectionInactiveBackgroundOpaque.css};}`;for(const[Z,M]of O.ansi.entries())P+=`${this._terminalSelector} .${k}${Z} { color: ${M.css}; }${this._terminalSelector} .${k}${Z}.xterm-dim { color: ${b.color.multiplyOpacity(M,.5).css}; }${this._terminalSelector} .${x}${Z} { background-color: ${M.css}; }`;P+=`${this._terminalSelector} .${k}${f.INVERTED_DEFAULT_COLOR} { color: ${b.color.opaque(O.background).css}; }${this._terminalSelector} .${k}${f.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${b.color.multiplyOpacity(b.color.opaque(O.background),.5).css}; }${this._terminalSelector} .${x}${f.INVERTED_DEFAULT_COLOR} { background-color: ${O.foreground.css}; }`,this._themeStyleElement.textContent=P}_setDefaultSpacing(){const O=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${O}px`,this._rowFactory.defaultSpacing=O}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(O,P){for(let $=this._rowElements.length;$<=P;$++){const ee=this._document.createElement("div");this._rowContainer.appendChild(ee),this._rowElements.push(ee)}for(;this._rowElements.length>P;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(O,P){this._refreshRowElements(O,P),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(I),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(I),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(O,P,$){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(O,P,$),this.renderRows(0,this._bufferService.rows-1),!O||!P)return;this._selectionRenderModel.update(this._terminal,O,P,$);const ee=this._selectionRenderModel.viewportStartRow,J=this._selectionRenderModel.viewportEndRow,Z=this._selectionRenderModel.viewportCappedStartRow,M=this._selectionRenderModel.viewportCappedEndRow;if(Z>=this._bufferService.rows||M<0)return;const F=this._document.createDocumentFragment();if($){const G=O[0]>P[0];F.appendChild(this._createSelectionElement(Z,G?P[0]:O[0],G?O[0]:P[0],M-Z+1))}else{const G=ee===Z?O[0]:0,D=Z===J?P[0]:this._bufferService.cols;F.appendChild(this._createSelectionElement(Z,G,D));const j=M-Z-1;if(F.appendChild(this._createSelectionElement(Z+1,0,this._bufferService.cols,j)),Z!==M){const V=J===M?P[0]:this._bufferService.cols;F.appendChild(this._createSelectionElement(M,0,V))}}this._selectionContainer.appendChild(F)}_createSelectionElement(O,P,$,ee=1){const J=this._document.createElement("div"),Z=P*this.dimensions.css.cell.width;let M=this.dimensions.css.cell.width*($-P);return Z+M>this.dimensions.css.canvas.width&&(M=this.dimensions.css.canvas.width-Z),J.style.height=ee*this.dimensions.css.cell.height+"px",J.style.top=O*this.dimensions.css.cell.height+"px",J.style.left=`${Z}px`,J.style.width=`${M}px`,J}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const O of this._rowElements)O.replaceChildren()}renderRows(O,P){const $=this._bufferService.buffer,ee=$.ybase+$.y,J=Math.min($.x,this._bufferService.cols-1),Z=this._optionsService.rawOptions.cursorBlink,M=this._optionsService.rawOptions.cursorStyle,F=this._optionsService.rawOptions.cursorInactiveStyle;for(let G=O;G<=P;G++){const D=G+$.ydisp,j=this._rowElements[G],V=$.lines.get(D);if(!j||!V)break;j.replaceChildren(...this._rowFactory.createRow(V,D,D===ee,M,F,J,Z,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${w}${this._terminalClass}`}_handleLinkHover(O){this._setCellUnderline(O.x1,O.x2,O.y1,O.y2,O.cols,!0)}_handleLinkLeave(O){this._setCellUnderline(O.x1,O.x2,O.y1,O.y2,O.cols,!1)}_setCellUnderline(O,P,$,ee,J,Z){$<0&&(O=0),ee<0&&(P=0);const M=this._bufferService.rows-1;$=Math.max(Math.min($,M),0),ee=Math.max(Math.min(ee,M),0),J=Math.min(J,this._bufferService.cols);const F=this._bufferService.buffer,G=F.ybase+F.y,D=Math.min(F.x,J-1),j=this._optionsService.rawOptions.cursorBlink,V=this._optionsService.rawOptions.cursorStyle,W=this._optionsService.rawOptions.cursorInactiveStyle;for(let re=$;re<=ee;++re){const te=re+F.ydisp,Y=this._rowElements[re],de=F.lines.get(te);if(!Y||!de)break;Y.replaceChildren(...this._rowFactory.createRow(de,te,te===G,V,W,D,j,this.dimensions.css.cell.width,this._widthCache,Z?re===$?O:0:-1,Z?(re===ee?P:J)-1:-1))}}};a.DomRenderer=N=c([u(7,E.IInstantiationService),u(8,m.ICharSizeService),u(9,E.IOptionsService),u(10,E.IBufferService),u(11,m.ICoreBrowserService),u(12,m.IThemeService)],N)},3787:function(o,a,l){var c=this&&this.__decorate||function(S,k,x,I){var R,C=arguments.length,N=C<3?k:I===null?I=Object.getOwnPropertyDescriptor(k,x):I;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(S,k,x,I);else for(var O=S.length-1;O>=0;O--)(R=S[O])&&(N=(C<3?R(N):C>3?R(k,x,N):R(k,x))||N);return C>3&&N&&Object.defineProperty(k,x,N),N},u=this&&this.__param||function(S,k){return function(x,I){k(x,I,S)}};Object.defineProperty(a,"__esModule",{value:!0}),a.DomRendererRowFactory=void 0;const d=l(2223),h=l(643),f=l(511),g=l(2585),y=l(8055),m=l(4725),b=l(4269),v=l(6171),_=l(3734);let E=a.DomRendererRowFactory=class{constructor(S,k,x,I,R,C,N){this._document=S,this._characterJoinerService=k,this._optionsService=x,this._coreBrowserService=I,this._coreService=R,this._decorationService=C,this._themeService=N,this._workCell=new f.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(S,k,x){this._selectionStart=S,this._selectionEnd=k,this._columnSelectMode=x}createRow(S,k,x,I,R,C,N,O,P,$,ee){const J=[],Z=this._characterJoinerService.getJoinedCharacters(k),M=this._themeService.colors;let F,G=S.getNoBgTrimmedLength();x&&G<C+1&&(G=C+1);let D=0,j="",V=0,W=0,re=0,te=!1,Y=0,de=!1,ye=0;const Se=[],Te=$!==-1&&ee!==-1;for(let ke=0;ke<G;ke++){S.loadCell(ke,this._workCell);let K=this._workCell.getWidth();if(K===0)continue;let ge=!1,ne=ke,le=this._workCell;if(Z.length>0&&ke===Z[0][0]){ge=!0;const X=Z.shift();le=new b.JoinedCellData(this._workCell,S.translateToString(!0,X[0],X[1]),X[1]-X[0]),ne=X[1]-1,K=le.getWidth()}const se=this._isCellInSelection(ke,k),fe=x&&ke===C,Ce=Te&&ke>=$&&ke<=ee;let Ie=!1;this._decorationService.forEachDecorationAtCell(ke,k,void 0,X=>{Ie=!0});let xe=le.getChars()||h.WHITESPACE_CELL_CHAR;if(xe===" "&&(le.isUnderline()||le.isOverline())&&(xe=""),ye=K*O-P.get(xe,le.isBold(),le.isItalic()),F){if(D&&(se&&de||!se&&!de&&le.bg===V)&&(se&&de&&M.selectionForeground||le.fg===W)&&le.extended.ext===re&&Ce===te&&ye===Y&&!fe&&!ge&&!Ie){le.isInvisible()?j+=h.WHITESPACE_CELL_CHAR:j+=xe,D++;continue}D&&(F.textContent=j),F=this._document.createElement("span"),D=0,j=""}else F=this._document.createElement("span");if(V=le.bg,W=le.fg,re=le.extended.ext,te=Ce,Y=ye,de=se,ge&&C>=ke&&C<=ne&&(C=ke),!this._coreService.isCursorHidden&&fe&&this._coreService.isCursorInitialized){if(Se.push("xterm-cursor"),this._coreBrowserService.isFocused)N&&Se.push("xterm-cursor-blink"),Se.push(I==="bar"?"xterm-cursor-bar":I==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(R)switch(R){case"outline":Se.push("xterm-cursor-outline");break;case"block":Se.push("xterm-cursor-block");break;case"bar":Se.push("xterm-cursor-bar");break;case"underline":Se.push("xterm-cursor-underline")}}if(le.isBold()&&Se.push("xterm-bold"),le.isItalic()&&Se.push("xterm-italic"),le.isDim()&&Se.push("xterm-dim"),j=le.isInvisible()?h.WHITESPACE_CELL_CHAR:le.getChars()||h.WHITESPACE_CELL_CHAR,le.isUnderline()&&(Se.push(`xterm-underline-${le.extended.underlineStyle}`),j===" "&&(j=""),!le.isUnderlineColorDefault()))if(le.isUnderlineColorRGB())F.style.textDecorationColor=`rgb(${_.AttributeData.toColorRGB(le.getUnderlineColor()).join(",")})`;else{let X=le.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&le.isBold()&&X<8&&(X+=8),F.style.textDecorationColor=M.ansi[X].css}le.isOverline()&&(Se.push("xterm-overline"),j===" "&&(j="")),le.isStrikethrough()&&Se.push("xterm-strikethrough"),Ce&&(F.style.textDecoration="underline");let $e=le.getFgColor(),je=le.getFgColorMode(),Be=le.getBgColor(),Ae=le.getBgColorMode();const Ye=!!le.isInverse();if(Ye){const X=$e;$e=Be,Be=X;const pe=je;je=Ae,Ae=pe}let Xe,tt,ie,z=!1;switch(this._decorationService.forEachDecorationAtCell(ke,k,void 0,X=>{X.options.layer!=="top"&&z||(X.backgroundColorRGB&&(Ae=50331648,Be=X.backgroundColorRGB.rgba>>8&16777215,Xe=X.backgroundColorRGB),X.foregroundColorRGB&&(je=50331648,$e=X.foregroundColorRGB.rgba>>8&16777215,tt=X.foregroundColorRGB),z=X.options.layer==="top")}),!z&&se&&(Xe=this._coreBrowserService.isFocused?M.selectionBackgroundOpaque:M.selectionInactiveBackgroundOpaque,Be=Xe.rgba>>8&16777215,Ae=50331648,z=!0,M.selectionForeground&&(je=50331648,$e=M.selectionForeground.rgba>>8&16777215,tt=M.selectionForeground)),z&&Se.push("xterm-decoration-top"),Ae){case 16777216:case 33554432:ie=M.ansi[Be],Se.push(`xterm-bg-${Be}`);break;case 50331648:ie=y.channels.toColor(Be>>16,Be>>8&255,255&Be),this._addStyle(F,`background-color:#${w((Be>>>0).toString(16),"0",6)}`);break;default:Ye?(ie=M.foreground,Se.push(`xterm-bg-${d.INVERTED_DEFAULT_COLOR}`)):ie=M.background}switch(Xe||le.isDim()&&(Xe=y.color.multiplyOpacity(ie,.5)),je){case 16777216:case 33554432:le.isBold()&&$e<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&($e+=8),this._applyMinimumContrast(F,ie,M.ansi[$e],le,Xe,void 0)||Se.push(`xterm-fg-${$e}`);break;case 50331648:const X=y.channels.toColor($e>>16&255,$e>>8&255,255&$e);this._applyMinimumContrast(F,ie,X,le,Xe,tt)||this._addStyle(F,`color:#${w($e.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(F,ie,M.foreground,le,Xe,tt)||Ye&&Se.push(`xterm-fg-${d.INVERTED_DEFAULT_COLOR}`)}Se.length&&(F.className=Se.join(" "),Se.length=0),fe||ge||Ie?F.textContent=j:D++,ye!==this.defaultSpacing&&(F.style.letterSpacing=`${ye}px`),J.push(F),ke=ne}return F&&D&&(F.textContent=j),J}_applyMinimumContrast(S,k,x,I,R,C){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,v.treatGlyphAsBackgroundColor)(I.getCode()))return!1;const N=this._getContrastCache(I);let O;if(R||C||(O=N.getColor(k.rgba,x.rgba)),O===void 0){const P=this._optionsService.rawOptions.minimumContrastRatio/(I.isDim()?2:1);O=y.color.ensureContrastRatio(R||k,C||x,P),N.setColor((R||k).rgba,(C||x).rgba,O??null)}return!!O&&(this._addStyle(S,`color:${O.css}`),!0)}_getContrastCache(S){return S.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(S,k){S.setAttribute("style",`${S.getAttribute("style")||""}${k};`)}_isCellInSelection(S,k){const x=this._selectionStart,I=this._selectionEnd;return!(!x||!I)&&(this._columnSelectMode?x[0]<=I[0]?S>=x[0]&&k>=x[1]&&S<I[0]&&k<=I[1]:S<x[0]&&k>=x[1]&&S>=I[0]&&k<=I[1]:k>x[1]&&k<I[1]||x[1]===I[1]&&k===x[1]&&S>=x[0]&&S<I[0]||x[1]<I[1]&&k===I[1]&&S<I[0]||x[1]<I[1]&&k===x[1]&&S>=x[0])}};function w(S,k,x){for(;S.length<x;)S=k+S;return S}a.DomRendererRowFactory=E=c([u(1,m.ICharacterJoinerService),u(2,g.IOptionsService),u(3,m.ICoreBrowserService),u(4,g.ICoreService),u(5,g.IDecorationService),u(6,m.IThemeService)],E)},2550:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WidthCache=void 0,a.WidthCache=class{constructor(l,c){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=l.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const u=l.createElement("span");u.classList.add("xterm-char-measure-element");const d=l.createElement("span");d.classList.add("xterm-char-measure-element"),d.style.fontWeight="bold";const h=l.createElement("span");h.classList.add("xterm-char-measure-element"),h.style.fontStyle="italic";const f=l.createElement("span");f.classList.add("xterm-char-measure-element"),f.style.fontWeight="bold",f.style.fontStyle="italic",this._measureElements=[u,d,h,f],this._container.appendChild(u),this._container.appendChild(d),this._container.appendChild(h),this._container.appendChild(f),c.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(l,c,u,d){l===this._font&&c===this._fontSize&&u===this._weight&&d===this._weightBold||(this._font=l,this._fontSize=c,this._weight=u,this._weightBold=d,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${u}`,this._measureElements[1].style.fontWeight=`${d}`,this._measureElements[2].style.fontWeight=`${u}`,this._measureElements[3].style.fontWeight=`${d}`,this.clear())}get(l,c,u){let d=0;if(!c&&!u&&l.length===1&&(d=l.charCodeAt(0))<256){if(this._flat[d]!==-9999)return this._flat[d];const g=this._measure(l,0);return g>0&&(this._flat[d]=g),g}let h=l;c&&(h+="B"),u&&(h+="I");let f=this._holey.get(h);if(f===void 0){let g=0;c&&(g|=1),u&&(g|=2),f=this._measure(l,g),f>0&&this._holey.set(h,f)}return f}_measure(l,c){const u=this._measureElements[c];return u.textContent=l.repeat(32),u.offsetWidth/32}}},2223:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TEXT_BASELINE=a.DIM_OPACITY=a.INVERTED_DEFAULT_COLOR=void 0;const c=l(6114);a.INVERTED_DEFAULT_COLOR=257,a.DIM_OPACITY=.5,a.TEXT_BASELINE=c.isFirefox||c.isLegacyEdge?"bottom":"ideographic"},6171:(o,a)=>{function l(u){return 57508<=u&&u<=57558}function c(u){return u>=128512&&u<=128591||u>=127744&&u<=128511||u>=128640&&u<=128767||u>=9728&&u<=9983||u>=9984&&u<=10175||u>=65024&&u<=65039||u>=129280&&u<=129535||u>=127462&&u<=127487}Object.defineProperty(a,"__esModule",{value:!0}),a.computeNextVariantOffset=a.createRenderDimensions=a.treatGlyphAsBackgroundColor=a.allowRescaling=a.isEmoji=a.isRestrictedPowerlineGlyph=a.isPowerlineGlyph=a.throwIfFalsy=void 0,a.throwIfFalsy=function(u){if(!u)throw new Error("value must not be falsy");return u},a.isPowerlineGlyph=l,a.isRestrictedPowerlineGlyph=function(u){return 57520<=u&&u<=57527},a.isEmoji=c,a.allowRescaling=function(u,d,h,f){return d===1&&h>Math.ceil(1.5*f)&&u!==void 0&&u>255&&!c(u)&&!l(u)&&!function(g){return 57344<=g&&g<=63743}(u)},a.treatGlyphAsBackgroundColor=function(u){return l(u)||function(d){return 9472<=d&&d<=9631}(u)},a.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},a.computeNextVariantOffset=function(u,d,h=0){return(u-(2*Math.round(d)-h))%(2*Math.round(d))}},6052:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createSelectionRenderModel=void 0;class l{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(u,d,h,f=!1){if(this.selectionStart=d,this.selectionEnd=h,!d||!h||d[0]===h[0]&&d[1]===h[1])return void this.clear();const g=u.buffers.active.ydisp,y=d[1]-g,m=h[1]-g,b=Math.max(y,0),v=Math.min(m,u.rows-1);b>=u.rows||v<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=f,this.viewportStartRow=y,this.viewportEndRow=m,this.viewportCappedStartRow=b,this.viewportCappedEndRow=v,this.startCol=d[0],this.endCol=h[0])}isCellSelected(u,d,h){return!!this.hasSelection&&(h-=u.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?d>=this.startCol&&h>=this.viewportCappedStartRow&&d<this.endCol&&h<=this.viewportCappedEndRow:d<this.startCol&&h>=this.viewportCappedStartRow&&d>=this.endCol&&h<=this.viewportCappedEndRow:h>this.viewportStartRow&&h<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&h===this.viewportStartRow&&d>=this.startCol&&d<this.endCol||this.viewportStartRow<this.viewportEndRow&&h===this.viewportEndRow&&d<this.endCol||this.viewportStartRow<this.viewportEndRow&&h===this.viewportStartRow&&d>=this.startCol)}}a.createSelectionRenderModel=function(){return new l}},456:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SelectionModel=void 0,a.SelectionModel=class{constructor(l){this._bufferService=l,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const l=this.selectionStart[0]+this.selectionStartLength;return l>this._bufferService.cols?l%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(l/this._bufferService.cols)-1]:[l%this._bufferService.cols,this.selectionStart[1]+Math.floor(l/this._bufferService.cols)]:[l,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const l=this.selectionStart[0]+this.selectionStartLength;return l>this._bufferService.cols?[l%this._bufferService.cols,this.selectionStart[1]+Math.floor(l/this._bufferService.cols)]:[Math.max(l,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const l=this.selectionStart,c=this.selectionEnd;return!(!l||!c)&&(l[1]>c[1]||l[1]===c[1]&&l[0]>c[0])}handleTrim(l){return this.selectionStart&&(this.selectionStart[1]-=l),this.selectionEnd&&(this.selectionEnd[1]-=l),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(o,a,l){var c=this&&this.__decorate||function(v,_,E,w){var S,k=arguments.length,x=k<3?_:w===null?w=Object.getOwnPropertyDescriptor(_,E):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(v,_,E,w);else for(var I=v.length-1;I>=0;I--)(S=v[I])&&(x=(k<3?S(x):k>3?S(_,E,x):S(_,E))||x);return k>3&&x&&Object.defineProperty(_,E,x),x},u=this&&this.__param||function(v,_){return function(E,w){_(E,w,v)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CharSizeService=void 0;const d=l(2585),h=l(8460),f=l(844);let g=a.CharSizeService=class extends f.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(v,_,E){super(),this._optionsService=E,this.width=0,this.height=0,this._onCharSizeChange=this.register(new h.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new b(this._optionsService))}catch{this._measureStrategy=this.register(new m(v,_,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const v=this._measureStrategy.measure();v.width===this.width&&v.height===this.height||(this.width=v.width,this.height=v.height,this._onCharSizeChange.fire())}};a.CharSizeService=g=c([u(2,d.IOptionsService)],g);class y extends f.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(_,E){_!==void 0&&_>0&&E!==void 0&&E>0&&(this._result.width=_,this._result.height=E)}}class m extends y{constructor(_,E,w){super(),this._document=_,this._parentElement=E,this._optionsService=w,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class b extends y{constructor(_){super(),this._optionsService=_,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const E=this._ctx.measureText("W");if(!("width"in E&&"fontBoundingBoxAscent"in E&&"fontBoundingBoxDescent"in E))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const _=this._ctx.measureText("W");return this._validateAndSet(_.width,_.fontBoundingBoxAscent+_.fontBoundingBoxDescent),this._result}}},4269:function(o,a,l){var c=this&&this.__decorate||function(b,v,_,E){var w,S=arguments.length,k=S<3?v:E===null?E=Object.getOwnPropertyDescriptor(v,_):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(b,v,_,E);else for(var x=b.length-1;x>=0;x--)(w=b[x])&&(k=(S<3?w(k):S>3?w(v,_,k):w(v,_))||k);return S>3&&k&&Object.defineProperty(v,_,k),k},u=this&&this.__param||function(b,v){return function(_,E){v(_,E,b)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CharacterJoinerService=a.JoinedCellData=void 0;const d=l(3734),h=l(643),f=l(511),g=l(2585);class y extends d.AttributeData{constructor(v,_,E){super(),this.content=0,this.combinedData="",this.fg=v.fg,this.bg=v.bg,this.combinedData=_,this._width=E}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(v){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}a.JoinedCellData=y;let m=a.CharacterJoinerService=class Dle{constructor(v){this._bufferService=v,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new f.CellData}register(v){const _={id:this._nextCharacterJoinerId++,handler:v};return this._characterJoiners.push(_),_.id}deregister(v){for(let _=0;_<this._characterJoiners.length;_++)if(this._characterJoiners[_].id===v)return this._characterJoiners.splice(_,1),!0;return!1}getJoinedCharacters(v){if(this._characterJoiners.length===0)return[];const _=this._bufferService.buffer.lines.get(v);if(!_||_.length===0)return[];const E=[],w=_.translateToString(!0);let S=0,k=0,x=0,I=_.getFg(0),R=_.getBg(0);for(let C=0;C<_.getTrimmedLength();C++)if(_.loadCell(C,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==I||this._workCell.bg!==R){if(C-S>1){const N=this._getJoinedRanges(w,x,k,_,S);for(let O=0;O<N.length;O++)E.push(N[O])}S=C,x=k,I=this._workCell.fg,R=this._workCell.bg}k+=this._workCell.getChars().length||h.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-S>1){const C=this._getJoinedRanges(w,x,k,_,S);for(let N=0;N<C.length;N++)E.push(C[N])}return E}_getJoinedRanges(v,_,E,w,S){const k=v.substring(_,E);let x=[];try{x=this._characterJoiners[0].handler(k)}catch(I){console.error(I)}for(let I=1;I<this._characterJoiners.length;I++)try{const R=this._characterJoiners[I].handler(k);for(let C=0;C<R.length;C++)Dle._mergeRanges(x,R[C])}catch(R){console.error(R)}return this._stringRangesToCellRanges(x,w,S),x}_stringRangesToCellRanges(v,_,E){let w=0,S=!1,k=0,x=v[w];if(x){for(let I=E;I<this._bufferService.cols;I++){const R=_.getWidth(I),C=_.getString(I).length||h.WHITESPACE_CELL_CHAR.length;if(R!==0){if(!S&&x[0]<=k&&(x[0]=I,S=!0),x[1]<=k){if(x[1]=I,x=v[++w],!x)break;x[0]<=k?(x[0]=I,S=!0):S=!1}k+=C}}x&&(x[1]=this._bufferService.cols)}}static _mergeRanges(v,_){let E=!1;for(let w=0;w<v.length;w++){const S=v[w];if(E){if(_[1]<=S[0])return v[w-1][1]=_[1],v;if(_[1]<=S[1])return v[w-1][1]=Math.max(_[1],S[1]),v.splice(w,1),v;v.splice(w,1),w--}else{if(_[1]<=S[0])return v.splice(w,0,_),v;if(_[1]<=S[1])return S[0]=Math.min(_[0],S[0]),v;_[0]<S[1]&&(S[0]=Math.min(_[0],S[0]),E=!0)}}return E?v[v.length-1][1]=_[1]:v.push(_),v}};a.CharacterJoinerService=m=c([u(0,g.IBufferService)],m)},5114:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CoreBrowserService=void 0;const c=l(844),u=l(8460),d=l(3656);class h extends c.Disposable{constructor(y,m,b){super(),this._textarea=y,this._window=m,this.mainDocument=b,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new f(this._window),this._onDprChange=this.register(new u.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new u.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(v=>this._screenDprMonitor.setWindow(v))),this.register((0,u.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(y){this._window!==y&&(this._window=y,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}a.CoreBrowserService=h;class f extends c.Disposable{constructor(y){super(),this._parentWindow=y,this._windowResizeListener=this.register(new c.MutableDisposable),this._onDprChange=this.register(new u.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,c.toDisposable)(()=>this.clearListener()))}setWindow(y){this._parentWindow=y,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,d.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.LinkProviderService=void 0;const c=l(844);class u extends c.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,c.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(h){return this.linkProviders.push(h),{dispose:()=>{const f=this.linkProviders.indexOf(h);f!==-1&&this.linkProviders.splice(f,1)}}}}a.LinkProviderService=u},8934:function(o,a,l){var c=this&&this.__decorate||function(g,y,m,b){var v,_=arguments.length,E=_<3?y:b===null?b=Object.getOwnPropertyDescriptor(y,m):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(g,y,m,b);else for(var w=g.length-1;w>=0;w--)(v=g[w])&&(E=(_<3?v(E):_>3?v(y,m,E):v(y,m))||E);return _>3&&E&&Object.defineProperty(y,m,E),E},u=this&&this.__param||function(g,y){return function(m,b){y(m,b,g)}};Object.defineProperty(a,"__esModule",{value:!0}),a.MouseService=void 0;const d=l(4725),h=l(9806);let f=a.MouseService=class{constructor(g,y){this._renderService=g,this._charSizeService=y}getCoords(g,y,m,b,v){return(0,h.getCoords)(window,g,y,m,b,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,v)}getMouseReportCoords(g,y){const m=(0,h.getCoordsRelativeToElement)(window,g,y);if(this._charSizeService.hasValidSize)return m[0]=Math.min(Math.max(m[0],0),this._renderService.dimensions.css.canvas.width-1),m[1]=Math.min(Math.max(m[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(m[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(m[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(m[0]),y:Math.floor(m[1])}}};a.MouseService=f=c([u(0,d.IRenderService),u(1,d.ICharSizeService)],f)},3230:function(o,a,l){var c=this&&this.__decorate||function(v,_,E,w){var S,k=arguments.length,x=k<3?_:w===null?w=Object.getOwnPropertyDescriptor(_,E):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(v,_,E,w);else for(var I=v.length-1;I>=0;I--)(S=v[I])&&(x=(k<3?S(x):k>3?S(_,E,x):S(_,E))||x);return k>3&&x&&Object.defineProperty(_,E,x),x},u=this&&this.__param||function(v,_){return function(E,w){_(E,w,v)}};Object.defineProperty(a,"__esModule",{value:!0}),a.RenderService=void 0;const d=l(6193),h=l(4725),f=l(8460),g=l(844),y=l(7226),m=l(2585);let b=a.RenderService=class extends g.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(v,_,E,w,S,k,x,I){super(),this._rowCount=v,this._charSizeService=w,this._renderer=this.register(new g.MutableDisposable),this._pausedResizeTask=new y.DebouncedIdleTask,this._observerDisposable=this.register(new g.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new f.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new f.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new f.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new f.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new d.RenderDebouncer((R,C)=>this._renderRows(R,C),x),this.register(this._renderDebouncer),this.register(x.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(k.onResize(()=>this._fullRefresh())),this.register(k.buffers.onBufferActivate(()=>this._renderer.value?.clear())),this.register(E.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(S.onDecorationRegistered(()=>this._fullRefresh())),this.register(S.onDecorationRemoved(()=>this._fullRefresh())),this.register(E.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(k.cols,k.rows),this._fullRefresh()})),this.register(E.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(k.buffer.y,k.buffer.y,!0))),this.register(I.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(x.window,_),this.register(x.onWindowChange(R=>this._registerIntersectionObserver(R,_)))}_registerIntersectionObserver(v,_){if("IntersectionObserver"in v){const E=new v.IntersectionObserver(w=>this._handleIntersectionChange(w[w.length-1]),{threshold:0});E.observe(_),this._observerDisposable.value=(0,g.toDisposable)(()=>E.disconnect())}}_handleIntersectionChange(v){this._isPaused=v.isIntersecting===void 0?v.intersectionRatio===0:!v.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(v,_,E=!1){this._isPaused?this._needsFullRefresh=!0:(E||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(v,_,this._rowCount))}_renderRows(v,_){this._renderer.value&&(v=Math.min(v,this._rowCount-1),_=Math.min(_,this._rowCount-1),this._renderer.value.renderRows(v,_),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:v,end:_}),this._onRender.fire({start:v,end:_}),this._isNextRenderRedrawOnly=!0)}resize(v,_){this._rowCount=_,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(v){this._renderer.value=v,this._renderer.value&&(this._renderer.value.onRequestRedraw(_=>this.refreshRows(_.start,_.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(v){return this._renderDebouncer.addRefreshCallback(v)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(v,_){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value?.handleResize(v,_)):this._renderer.value.handleResize(v,_),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(v,_,E){this._selectionState.start=v,this._selectionState.end=_,this._selectionState.columnSelectMode=E,this._renderer.value?.handleSelectionChanged(v,_,E)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};a.RenderService=b=c([u(2,m.IOptionsService),u(3,h.ICharSizeService),u(4,m.IDecorationService),u(5,m.IBufferService),u(6,h.ICoreBrowserService),u(7,h.IThemeService)],b)},9312:function(o,a,l){var c=this&&this.__decorate||function(x,I,R,C){var N,O=arguments.length,P=O<3?I:C===null?C=Object.getOwnPropertyDescriptor(I,R):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(x,I,R,C);else for(var $=x.length-1;$>=0;$--)(N=x[$])&&(P=(O<3?N(P):O>3?N(I,R,P):N(I,R))||P);return O>3&&P&&Object.defineProperty(I,R,P),P},u=this&&this.__param||function(x,I){return function(R,C){I(R,C,x)}};Object.defineProperty(a,"__esModule",{value:!0}),a.SelectionService=void 0;const d=l(9806),h=l(9504),f=l(456),g=l(4725),y=l(8460),m=l(844),b=l(6114),v=l(4841),_=l(511),E=l(2585),w="",S=new RegExp(w,"g");let k=a.SelectionService=class extends m.Disposable{constructor(x,I,R,C,N,O,P,$,ee){super(),this._element=x,this._screenElement=I,this._linkifier=R,this._bufferService=C,this._coreService=N,this._mouseService=O,this._optionsService=P,this._renderService=$,this._coreBrowserService=ee,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new _.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new y.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new y.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new y.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new y.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=J=>this._handleMouseMove(J),this._mouseUpListener=J=>this._handleMouseUp(J),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(J=>this._handleTrim(J)),this.register(this._bufferService.buffers.onBufferActivate(J=>this._handleBufferActivate(J))),this.enable(),this._model=new f.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,m.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const x=this._model.finalSelectionStart,I=this._model.finalSelectionEnd;return!(!x||!I||x[0]===I[0]&&x[1]===I[1])}get selectionText(){const x=this._model.finalSelectionStart,I=this._model.finalSelectionEnd;if(!x||!I)return"";const R=this._bufferService.buffer,C=[];if(this._activeSelectionMode===3){if(x[0]===I[0])return"";const N=x[0]<I[0]?x[0]:I[0],O=x[0]<I[0]?I[0]:x[0];for(let P=x[1];P<=I[1];P++){const $=R.translateBufferLineToString(P,!0,N,O);C.push($)}}else{const N=x[1]===I[1]?I[0]:void 0;C.push(R.translateBufferLineToString(x[1],!0,x[0],N));for(let O=x[1]+1;O<=I[1]-1;O++){const P=R.lines.get(O),$=R.translateBufferLineToString(O,!0);P?.isWrapped?C[C.length-1]+=$:C.push($)}if(x[1]!==I[1]){const O=R.lines.get(I[1]),P=R.translateBufferLineToString(I[1],!0,0,I[0]);O&&O.isWrapped?C[C.length-1]+=P:C.push(P)}}return C.map(N=>N.replace(S," ")).join(b.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(x){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),b.isLinux&&x&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(x){const I=this._getMouseBufferCoords(x),R=this._model.finalSelectionStart,C=this._model.finalSelectionEnd;return!!(R&&C&&I)&&this._areCoordsInSelection(I,R,C)}isCellInSelection(x,I){const R=this._model.finalSelectionStart,C=this._model.finalSelectionEnd;return!(!R||!C)&&this._areCoordsInSelection([x,I],R,C)}_areCoordsInSelection(x,I,R){return x[1]>I[1]&&x[1]<R[1]||I[1]===R[1]&&x[1]===I[1]&&x[0]>=I[0]&&x[0]<R[0]||I[1]<R[1]&&x[1]===R[1]&&x[0]<R[0]||I[1]<R[1]&&x[1]===I[1]&&x[0]>=I[0]}_selectWordAtCursor(x,I){const R=this._linkifier.currentLink?.link?.range;if(R)return this._model.selectionStart=[R.start.x-1,R.start.y-1],this._model.selectionStartLength=(0,v.getRangeLength)(R,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const C=this._getMouseBufferCoords(x);return!!C&&(this._selectWordAt(C,I),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(x,I){this._model.clearSelection(),x=Math.max(x,0),I=Math.min(I,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,x],this._model.selectionEnd=[this._bufferService.cols,I],this.refresh(),this._onSelectionChange.fire()}_handleTrim(x){this._model.handleTrim(x)&&this.refresh()}_getMouseBufferCoords(x){const I=this._mouseService.getCoords(x,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(I)return I[0]--,I[1]--,I[1]+=this._bufferService.buffer.ydisp,I}_getMouseEventScrollAmount(x){let I=(0,d.getCoordsRelativeToElement)(this._coreBrowserService.window,x,this._screenElement)[1];const R=this._renderService.dimensions.css.canvas.height;return I>=0&&I<=R?0:(I>R&&(I-=R),I=Math.min(Math.max(I,-50),50),I/=50,I/Math.abs(I)+Math.round(14*I))}shouldForceSelection(x){return b.isMac?x.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:x.shiftKey}handleMouseDown(x){if(this._mouseDownTimeStamp=x.timeStamp,(x.button!==2||!this.hasSelection)&&x.button===0){if(!this._enabled){if(!this.shouldForceSelection(x))return;x.stopPropagation()}x.preventDefault(),this._dragScrollAmount=0,this._enabled&&x.shiftKey?this._handleIncrementalClick(x):x.detail===1?this._handleSingleClick(x):x.detail===2?this._handleDoubleClick(x):x.detail===3&&this._handleTripleClick(x),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(x){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(x))}_handleSingleClick(x){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(x)?3:0,this._model.selectionStart=this._getMouseBufferCoords(x),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const I=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);I&&I.length!==this._model.selectionStart[0]&&I.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(x){this._selectWordAtCursor(x,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(x){const I=this._getMouseBufferCoords(x);I&&(this._activeSelectionMode=2,this._selectLineAt(I[1]))}shouldColumnSelect(x){return x.altKey&&!(b.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(x){if(x.stopImmediatePropagation(),!this._model.selectionStart)return;const I=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(x),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(x),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const R=this._bufferService.buffer;if(this._model.selectionEnd[1]<R.lines.length){const C=R.lines.get(this._model.selectionEnd[1]);C&&C.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}I&&I[0]===this._model.selectionEnd[0]&&I[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const x=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(x.ydisp+this._bufferService.rows,x.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=x.ydisp),this.refresh()}}_handleMouseUp(x){const I=x.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&I<500&&x.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const R=this._mouseService.getCoords(x,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(R&&R[0]!==void 0&&R[1]!==void 0){const C=(0,h.moveToCellSequence)(R[0]-1,R[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(C,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const x=this._model.finalSelectionStart,I=this._model.finalSelectionEnd,R=!(!x||!I||x[0]===I[0]&&x[1]===I[1]);R?x&&I&&(this._oldSelectionStart&&this._oldSelectionEnd&&x[0]===this._oldSelectionStart[0]&&x[1]===this._oldSelectionStart[1]&&I[0]===this._oldSelectionEnd[0]&&I[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(x,I,R)):this._oldHasSelection&&this._fireOnSelectionChange(x,I,R)}_fireOnSelectionChange(x,I,R){this._oldSelectionStart=x,this._oldSelectionEnd=I,this._oldHasSelection=R,this._onSelectionChange.fire()}_handleBufferActivate(x){this.clearSelection(),this._trimListener.dispose(),this._trimListener=x.activeBuffer.lines.onTrim(I=>this._handleTrim(I))}_convertViewportColToCharacterIndex(x,I){let R=I;for(let C=0;I>=C;C++){const N=x.loadCell(C,this._workCell).getChars().length;this._workCell.getWidth()===0?R--:N>1&&I!==C&&(R+=N-1)}return R}setSelection(x,I,R){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[x,I],this._model.selectionStartLength=R,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(x){this._isClickInSelection(x)||(this._selectWordAtCursor(x,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(x,I,R=!0,C=!0){if(x[0]>=this._bufferService.cols)return;const N=this._bufferService.buffer,O=N.lines.get(x[1]);if(!O)return;const P=N.translateBufferLineToString(x[1],!1);let $=this._convertViewportColToCharacterIndex(O,x[0]),ee=$;const J=x[0]-$;let Z=0,M=0,F=0,G=0;if(P.charAt($)===" "){for(;$>0&&P.charAt($-1)===" ";)$--;for(;ee<P.length&&P.charAt(ee+1)===" ";)ee++}else{let V=x[0],W=x[0];O.getWidth(V)===0&&(Z++,V--),O.getWidth(W)===2&&(M++,W++);const re=O.getString(W).length;for(re>1&&(G+=re-1,ee+=re-1);V>0&&$>0&&!this._isCharWordSeparator(O.loadCell(V-1,this._workCell));){O.loadCell(V-1,this._workCell);const te=this._workCell.getChars().length;this._workCell.getWidth()===0?(Z++,V--):te>1&&(F+=te-1,$-=te-1),$--,V--}for(;W<O.length&&ee+1<P.length&&!this._isCharWordSeparator(O.loadCell(W+1,this._workCell));){O.loadCell(W+1,this._workCell);const te=this._workCell.getChars().length;this._workCell.getWidth()===2?(M++,W++):te>1&&(G+=te-1,ee+=te-1),ee++,W++}}ee++;let D=$+J-Z+F,j=Math.min(this._bufferService.cols,ee-$+Z+M-F-G);if(I||P.slice($,ee).trim()!==""){if(R&&D===0&&O.getCodePoint(0)!==32){const V=N.lines.get(x[1]-1);if(V&&O.isWrapped&&V.getCodePoint(this._bufferService.cols-1)!==32){const W=this._getWordAt([this._bufferService.cols-1,x[1]-1],!1,!0,!1);if(W){const re=this._bufferService.cols-W.start;D-=re,j+=re}}}if(C&&D+j===this._bufferService.cols&&O.getCodePoint(this._bufferService.cols-1)!==32){const V=N.lines.get(x[1]+1);if(V?.isWrapped&&V.getCodePoint(0)!==32){const W=this._getWordAt([0,x[1]+1],!1,!1,!0);W&&(j+=W.length)}}return{start:D,length:j}}}_selectWordAt(x,I){const R=this._getWordAt(x,I);if(R){for(;R.start<0;)R.start+=this._bufferService.cols,x[1]--;this._model.selectionStart=[R.start,x[1]],this._model.selectionStartLength=R.length}}_selectToWordAt(x){const I=this._getWordAt(x,!0);if(I){let R=x[1];for(;I.start<0;)I.start+=this._bufferService.cols,R--;if(!this._model.areSelectionValuesReversed())for(;I.start+I.length>this._bufferService.cols;)I.length-=this._bufferService.cols,R++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?I.start:I.start+I.length,R]}}_isCharWordSeparator(x){return x.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(x.getChars())>=0}_selectLineAt(x){const I=this._bufferService.buffer.getWrappedRangeForLine(x),R={start:{x:0,y:I.first},end:{x:this._bufferService.cols-1,y:I.last}};this._model.selectionStart=[0,I.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,v.getRangeLength)(R,this._bufferService.cols)}};a.SelectionService=k=c([u(3,E.IBufferService),u(4,E.ICoreService),u(5,g.IMouseService),u(6,E.IOptionsService),u(7,g.IRenderService),u(8,g.ICoreBrowserService)],k)},4725:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ILinkProviderService=a.IThemeService=a.ICharacterJoinerService=a.ISelectionService=a.IRenderService=a.IMouseService=a.ICoreBrowserService=a.ICharSizeService=void 0;const c=l(8343);a.ICharSizeService=(0,c.createDecorator)("CharSizeService"),a.ICoreBrowserService=(0,c.createDecorator)("CoreBrowserService"),a.IMouseService=(0,c.createDecorator)("MouseService"),a.IRenderService=(0,c.createDecorator)("RenderService"),a.ISelectionService=(0,c.createDecorator)("SelectionService"),a.ICharacterJoinerService=(0,c.createDecorator)("CharacterJoinerService"),a.IThemeService=(0,c.createDecorator)("ThemeService"),a.ILinkProviderService=(0,c.createDecorator)("LinkProviderService")},6731:function(o,a,l){var c=this&&this.__decorate||function(k,x,I,R){var C,N=arguments.length,O=N<3?x:R===null?R=Object.getOwnPropertyDescriptor(x,I):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(k,x,I,R);else for(var P=k.length-1;P>=0;P--)(C=k[P])&&(O=(N<3?C(O):N>3?C(x,I,O):C(x,I))||O);return N>3&&O&&Object.defineProperty(x,I,O),O},u=this&&this.__param||function(k,x){return function(I,R){x(I,R,k)}};Object.defineProperty(a,"__esModule",{value:!0}),a.ThemeService=a.DEFAULT_ANSI_COLORS=void 0;const d=l(7239),h=l(8055),f=l(8460),g=l(844),y=l(2585),m=h.css.toColor("#ffffff"),b=h.css.toColor("#000000"),v=h.css.toColor("#ffffff"),_=h.css.toColor("#000000"),E={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};a.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const k=[h.css.toColor("#2e3436"),h.css.toColor("#cc0000"),h.css.toColor("#4e9a06"),h.css.toColor("#c4a000"),h.css.toColor("#3465a4"),h.css.toColor("#75507b"),h.css.toColor("#06989a"),h.css.toColor("#d3d7cf"),h.css.toColor("#555753"),h.css.toColor("#ef2929"),h.css.toColor("#8ae234"),h.css.toColor("#fce94f"),h.css.toColor("#729fcf"),h.css.toColor("#ad7fa8"),h.css.toColor("#34e2e2"),h.css.toColor("#eeeeec")],x=[0,95,135,175,215,255];for(let I=0;I<216;I++){const R=x[I/36%6|0],C=x[I/6%6|0],N=x[I%6];k.push({css:h.channels.toCss(R,C,N),rgba:h.channels.toRgba(R,C,N)})}for(let I=0;I<24;I++){const R=8+10*I;k.push({css:h.channels.toCss(R,R,R),rgba:h.channels.toRgba(R,R,R)})}return k})());let w=a.ThemeService=class extends g.Disposable{get colors(){return this._colors}constructor(k){super(),this._optionsService=k,this._contrastCache=new d.ColorContrastCache,this._halfContrastCache=new d.ColorContrastCache,this._onChangeColors=this.register(new f.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:m,background:b,cursor:v,cursorAccent:_,selectionForeground:void 0,selectionBackgroundTransparent:E,selectionBackgroundOpaque:h.color.blend(b,E),selectionInactiveBackgroundTransparent:E,selectionInactiveBackgroundOpaque:h.color.blend(b,E),ansi:a.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(k={}){const x=this._colors;if(x.foreground=S(k.foreground,m),x.background=S(k.background,b),x.cursor=S(k.cursor,v),x.cursorAccent=S(k.cursorAccent,_),x.selectionBackgroundTransparent=S(k.selectionBackground,E),x.selectionBackgroundOpaque=h.color.blend(x.background,x.selectionBackgroundTransparent),x.selectionInactiveBackgroundTransparent=S(k.selectionInactiveBackground,x.selectionBackgroundTransparent),x.selectionInactiveBackgroundOpaque=h.color.blend(x.background,x.selectionInactiveBackgroundTransparent),x.selectionForeground=k.selectionForeground?S(k.selectionForeground,h.NULL_COLOR):void 0,x.selectionForeground===h.NULL_COLOR&&(x.selectionForeground=void 0),h.color.isOpaque(x.selectionBackgroundTransparent)&&(x.selectionBackgroundTransparent=h.color.opacity(x.selectionBackgroundTransparent,.3)),h.color.isOpaque(x.selectionInactiveBackgroundTransparent)&&(x.selectionInactiveBackgroundTransparent=h.color.opacity(x.selectionInactiveBackgroundTransparent,.3)),x.ansi=a.DEFAULT_ANSI_COLORS.slice(),x.ansi[0]=S(k.black,a.DEFAULT_ANSI_COLORS[0]),x.ansi[1]=S(k.red,a.DEFAULT_ANSI_COLORS[1]),x.ansi[2]=S(k.green,a.DEFAULT_ANSI_COLORS[2]),x.ansi[3]=S(k.yellow,a.DEFAULT_ANSI_COLORS[3]),x.ansi[4]=S(k.blue,a.DEFAULT_ANSI_COLORS[4]),x.ansi[5]=S(k.magenta,a.DEFAULT_ANSI_COLORS[5]),x.ansi[6]=S(k.cyan,a.DEFAULT_ANSI_COLORS[6]),x.ansi[7]=S(k.white,a.DEFAULT_ANSI_COLORS[7]),x.ansi[8]=S(k.brightBlack,a.DEFAULT_ANSI_COLORS[8]),x.ansi[9]=S(k.brightRed,a.DEFAULT_ANSI_COLORS[9]),x.ansi[10]=S(k.brightGreen,a.DEFAULT_ANSI_COLORS[10]),x.ansi[11]=S(k.brightYellow,a.DEFAULT_ANSI_COLORS[11]),x.ansi[12]=S(k.brightBlue,a.DEFAULT_ANSI_COLORS[12]),x.ansi[13]=S(k.brightMagenta,a.DEFAULT_ANSI_COLORS[13]),x.ansi[14]=S(k.brightCyan,a.DEFAULT_ANSI_COLORS[14]),x.ansi[15]=S(k.brightWhite,a.DEFAULT_ANSI_COLORS[15]),k.extendedAnsi){const I=Math.min(x.ansi.length-16,k.extendedAnsi.length);for(let R=0;R<I;R++)x.ansi[R+16]=S(k.extendedAnsi[R],a.DEFAULT_ANSI_COLORS[R+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(k){this._restoreColor(k),this._onChangeColors.fire(this.colors)}_restoreColor(k){if(k!==void 0)switch(k){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[k]=this._restoreColors.ansi[k]}else for(let x=0;x<this._restoreColors.ansi.length;++x)this._colors.ansi[x]=this._restoreColors.ansi[x]}modifyColors(k){k(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function S(k,x){if(k!==void 0)try{return h.css.toColor(k)}catch{}return x}a.ThemeService=w=c([u(0,y.IOptionsService)],w)},6349:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CircularList=void 0;const c=l(8460),u=l(844);class d extends u.Disposable{constructor(f){super(),this._maxLength=f,this.onDeleteEmitter=this.register(new c.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new c.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new c.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(f){if(this._maxLength===f)return;const g=new Array(f);for(let y=0;y<Math.min(f,this.length);y++)g[y]=this._array[this._getCyclicIndex(y)];this._array=g,this._maxLength=f,this._startIndex=0}get length(){return this._length}set length(f){if(f>this._length)for(let g=this._length;g<f;g++)this._array[g]=void 0;this._length=f}get(f){return this._array[this._getCyclicIndex(f)]}set(f,g){this._array[this._getCyclicIndex(f)]=g}push(f){this._array[this._getCyclicIndex(this._length)]=f,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(f,g,...y){if(g){for(let m=f;m<this._length-g;m++)this._array[this._getCyclicIndex(m)]=this._array[this._getCyclicIndex(m+g)];this._length-=g,this.onDeleteEmitter.fire({index:f,amount:g})}for(let m=this._length-1;m>=f;m--)this._array[this._getCyclicIndex(m+y.length)]=this._array[this._getCyclicIndex(m)];for(let m=0;m<y.length;m++)this._array[this._getCyclicIndex(f+m)]=y[m];if(y.length&&this.onInsertEmitter.fire({index:f,amount:y.length}),this._length+y.length>this._maxLength){const m=this._length+y.length-this._maxLength;this._startIndex+=m,this._length=this._maxLength,this.onTrimEmitter.fire(m)}else this._length+=y.length}trimStart(f){f>this._length&&(f=this._length),this._startIndex+=f,this._length-=f,this.onTrimEmitter.fire(f)}shiftElements(f,g,y){if(!(g<=0)){if(f<0||f>=this._length)throw new Error("start argument out of range");if(f+y<0)throw new Error("Cannot shift elements in list beyond index 0");if(y>0){for(let b=g-1;b>=0;b--)this.set(f+b+y,this.get(f+b));const m=f+g+y-this._length;if(m>0)for(this._length+=m;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let m=0;m<g;m++)this.set(f+m+y,this.get(f+m))}}_getCyclicIndex(f){return(this._startIndex+f)%this._maxLength}}a.CircularList=d},1439:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.clone=void 0,a.clone=function l(c,u=5){if(typeof c!="object")return c;const d=Array.isArray(c)?[]:{};for(const h in c)d[h]=u<=1?c[h]:c[h]&&l(c[h],u-1);return d}},8055:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.contrastRatio=a.toPaddedHex=a.rgba=a.rgb=a.css=a.color=a.channels=a.NULL_COLOR=void 0;let l=0,c=0,u=0,d=0;var h,f,g,y,m;function b(_){const E=_.toString(16);return E.length<2?"0"+E:E}function v(_,E){return _<E?(E+.05)/(_+.05):(_+.05)/(E+.05)}a.NULL_COLOR={css:"#00000000",rgba:0},function(_){_.toCss=function(E,w,S,k){return k!==void 0?`#${b(E)}${b(w)}${b(S)}${b(k)}`:`#${b(E)}${b(w)}${b(S)}`},_.toRgba=function(E,w,S,k=255){return(E<<24|w<<16|S<<8|k)>>>0},_.toColor=function(E,w,S,k){return{css:_.toCss(E,w,S,k),rgba:_.toRgba(E,w,S,k)}}}(h||(a.channels=h={})),function(_){function E(w,S){return d=Math.round(255*S),[l,c,u]=m.toChannels(w.rgba),{css:h.toCss(l,c,u,d),rgba:h.toRgba(l,c,u,d)}}_.blend=function(w,S){if(d=(255&S.rgba)/255,d===1)return{css:S.css,rgba:S.rgba};const k=S.rgba>>24&255,x=S.rgba>>16&255,I=S.rgba>>8&255,R=w.rgba>>24&255,C=w.rgba>>16&255,N=w.rgba>>8&255;return l=R+Math.round((k-R)*d),c=C+Math.round((x-C)*d),u=N+Math.round((I-N)*d),{css:h.toCss(l,c,u),rgba:h.toRgba(l,c,u)}},_.isOpaque=function(w){return(255&w.rgba)==255},_.ensureContrastRatio=function(w,S,k){const x=m.ensureContrastRatio(w.rgba,S.rgba,k);if(x)return h.toColor(x>>24&255,x>>16&255,x>>8&255)},_.opaque=function(w){const S=(255|w.rgba)>>>0;return[l,c,u]=m.toChannels(S),{css:h.toCss(l,c,u),rgba:S}},_.opacity=E,_.multiplyOpacity=function(w,S){return d=255&w.rgba,E(w,d*S/255)},_.toColorRGB=function(w){return[w.rgba>>24&255,w.rgba>>16&255,w.rgba>>8&255]}}(f||(a.color=f={})),function(_){let E,w;try{const S=document.createElement("canvas");S.width=1,S.height=1;const k=S.getContext("2d",{willReadFrequently:!0});k&&(E=k,E.globalCompositeOperation="copy",w=E.createLinearGradient(0,0,1,1))}catch{}_.toColor=function(S){if(S.match(/#[\da-f]{3,8}/i))switch(S.length){case 4:return l=parseInt(S.slice(1,2).repeat(2),16),c=parseInt(S.slice(2,3).repeat(2),16),u=parseInt(S.slice(3,4).repeat(2),16),h.toColor(l,c,u);case 5:return l=parseInt(S.slice(1,2).repeat(2),16),c=parseInt(S.slice(2,3).repeat(2),16),u=parseInt(S.slice(3,4).repeat(2),16),d=parseInt(S.slice(4,5).repeat(2),16),h.toColor(l,c,u,d);case 7:return{css:S,rgba:(parseInt(S.slice(1),16)<<8|255)>>>0};case 9:return{css:S,rgba:parseInt(S.slice(1),16)>>>0}}const k=S.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(k)return l=parseInt(k[1]),c=parseInt(k[2]),u=parseInt(k[3]),d=Math.round(255*(k[5]===void 0?1:parseFloat(k[5]))),h.toColor(l,c,u,d);if(!E||!w)throw new Error("css.toColor: Unsupported css format");if(E.fillStyle=w,E.fillStyle=S,typeof E.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(E.fillRect(0,0,1,1),[l,c,u,d]=E.getImageData(0,0,1,1).data,d!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:h.toRgba(l,c,u,d),css:S}}}(g||(a.css=g={})),function(_){function E(w,S,k){const x=w/255,I=S/255,R=k/255;return .2126*(x<=.03928?x/12.92:Math.pow((x+.055)/1.055,2.4))+.7152*(I<=.03928?I/12.92:Math.pow((I+.055)/1.055,2.4))+.0722*(R<=.03928?R/12.92:Math.pow((R+.055)/1.055,2.4))}_.relativeLuminance=function(w){return E(w>>16&255,w>>8&255,255&w)},_.relativeLuminance2=E}(y||(a.rgb=y={})),function(_){function E(S,k,x){const I=S>>24&255,R=S>>16&255,C=S>>8&255;let N=k>>24&255,O=k>>16&255,P=k>>8&255,$=v(y.relativeLuminance2(N,O,P),y.relativeLuminance2(I,R,C));for(;$<x&&(N>0||O>0||P>0);)N-=Math.max(0,Math.ceil(.1*N)),O-=Math.max(0,Math.ceil(.1*O)),P-=Math.max(0,Math.ceil(.1*P)),$=v(y.relativeLuminance2(N,O,P),y.relativeLuminance2(I,R,C));return(N<<24|O<<16|P<<8|255)>>>0}function w(S,k,x){const I=S>>24&255,R=S>>16&255,C=S>>8&255;let N=k>>24&255,O=k>>16&255,P=k>>8&255,$=v(y.relativeLuminance2(N,O,P),y.relativeLuminance2(I,R,C));for(;$<x&&(N<255||O<255||P<255);)N=Math.min(255,N+Math.ceil(.1*(255-N))),O=Math.min(255,O+Math.ceil(.1*(255-O))),P=Math.min(255,P+Math.ceil(.1*(255-P))),$=v(y.relativeLuminance2(N,O,P),y.relativeLuminance2(I,R,C));return(N<<24|O<<16|P<<8|255)>>>0}_.blend=function(S,k){if(d=(255&k)/255,d===1)return k;const x=k>>24&255,I=k>>16&255,R=k>>8&255,C=S>>24&255,N=S>>16&255,O=S>>8&255;return l=C+Math.round((x-C)*d),c=N+Math.round((I-N)*d),u=O+Math.round((R-O)*d),h.toRgba(l,c,u)},_.ensureContrastRatio=function(S,k,x){const I=y.relativeLuminance(S>>8),R=y.relativeLuminance(k>>8);if(v(I,R)<x){if(R<I){const O=E(S,k,x),P=v(I,y.relativeLuminance(O>>8));if(P<x){const $=w(S,k,x);return P>v(I,y.relativeLuminance($>>8))?O:$}return O}const C=w(S,k,x),N=v(I,y.relativeLuminance(C>>8));if(N<x){const O=E(S,k,x);return N>v(I,y.relativeLuminance(O>>8))?C:O}return C}},_.reduceLuminance=E,_.increaseLuminance=w,_.toChannels=function(S){return[S>>24&255,S>>16&255,S>>8&255,255&S]}}(m||(a.rgba=m={})),a.toPaddedHex=b,a.contrastRatio=v},8969:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CoreTerminal=void 0;const c=l(844),u=l(2585),d=l(4348),h=l(7866),f=l(744),g=l(7302),y=l(6975),m=l(8460),b=l(1753),v=l(1480),_=l(7994),E=l(9282),w=l(5435),S=l(5981),k=l(2660);let x=!1;class I extends c.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new m.EventEmitter),this._onScroll.event(C=>{this._onScrollApi?.fire(C.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(C){for(const N in C)this.optionsService.options[N]=C[N]}constructor(C){super(),this._windowsWrappingHeuristics=this.register(new c.MutableDisposable),this._onBinary=this.register(new m.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new m.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new m.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new m.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new m.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new m.EventEmitter),this._instantiationService=new d.InstantiationService,this.optionsService=this.register(new g.OptionsService(C)),this._instantiationService.setService(u.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(f.BufferService)),this._instantiationService.setService(u.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(h.LogService)),this._instantiationService.setService(u.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(y.CoreService)),this._instantiationService.setService(u.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(b.CoreMouseService)),this._instantiationService.setService(u.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(v.UnicodeService)),this._instantiationService.setService(u.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(_.CharsetService),this._instantiationService.setService(u.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(k.OscLinkService),this._instantiationService.setService(u.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new w.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,m.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,m.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,m.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,m.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(N=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(N=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new S.WriteBuffer((N,O)=>this._inputHandler.parse(N,O))),this.register((0,m.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(C,N){this._writeBuffer.write(C,N)}writeSync(C,N){this._logService.logLevel<=u.LogLevelEnum.WARN&&!x&&(this._logService.warn("writeSync is unreliable and will be removed soon."),x=!0),this._writeBuffer.writeSync(C,N)}input(C,N=!0){this.coreService.triggerDataEvent(C,N)}resize(C,N){isNaN(C)||isNaN(N)||(C=Math.max(C,f.MINIMUM_COLS),N=Math.max(N,f.MINIMUM_ROWS),this._bufferService.resize(C,N))}scroll(C,N=!1){this._bufferService.scroll(C,N)}scrollLines(C,N,O){this._bufferService.scrollLines(C,N,O)}scrollPages(C){this.scrollLines(C*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(C){const N=C-this._bufferService.buffer.ydisp;N!==0&&this.scrollLines(N)}registerEscHandler(C,N){return this._inputHandler.registerEscHandler(C,N)}registerDcsHandler(C,N){return this._inputHandler.registerDcsHandler(C,N)}registerCsiHandler(C,N){return this._inputHandler.registerCsiHandler(C,N)}registerOscHandler(C,N){return this._inputHandler.registerOscHandler(C,N)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let C=!1;const N=this.optionsService.rawOptions.windowsPty;N&&N.buildNumber!==void 0&&N.buildNumber!==void 0?C=N.backend==="conpty"&&N.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(C=!0),C?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const C=[];C.push(this.onLineFeed(E.updateWindowsModeWrappedState.bind(null,this._bufferService))),C.push(this.registerCsiHandler({final:"H"},()=>((0,E.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,c.toDisposable)(()=>{for(const N of C)N.dispose()})}}}a.CoreTerminal=I},8460:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.runAndSubscribe=a.forwardEvent=a.EventEmitter=void 0,a.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=l=>(this._listeners.push(l),{dispose:()=>{if(!this._disposed){for(let c=0;c<this._listeners.length;c++)if(this._listeners[c]===l)return void this._listeners.splice(c,1)}}})),this._event}fire(l,c){const u=[];for(let d=0;d<this._listeners.length;d++)u.push(this._listeners[d]);for(let d=0;d<u.length;d++)u[d].call(void 0,l,c)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},a.forwardEvent=function(l,c){return l(u=>c.fire(u))},a.runAndSubscribe=function(l,c){return c(void 0),l(u=>c(u))}},5435:function(o,a,l){var c=this&&this.__decorate||function(Z,M,F,G){var D,j=arguments.length,V=j<3?M:G===null?G=Object.getOwnPropertyDescriptor(M,F):G;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")V=Reflect.decorate(Z,M,F,G);else for(var W=Z.length-1;W>=0;W--)(D=Z[W])&&(V=(j<3?D(V):j>3?D(M,F,V):D(M,F))||V);return j>3&&V&&Object.defineProperty(M,F,V),V},u=this&&this.__param||function(Z,M){return function(F,G){M(F,G,Z)}};Object.defineProperty(a,"__esModule",{value:!0}),a.InputHandler=a.WindowsOptionsReportType=void 0;const d=l(2584),h=l(7116),f=l(2015),g=l(844),y=l(482),m=l(8437),b=l(8460),v=l(643),_=l(511),E=l(3734),w=l(2585),S=l(1480),k=l(6242),x=l(6351),I=l(5941),R={"(":0,")":1,"*":2,"+":3,"-":1,".":2},C=131072;function N(Z,M){if(Z>24)return M.setWinLines||!1;switch(Z){case 1:return!!M.restoreWin;case 2:return!!M.minimizeWin;case 3:return!!M.setWinPosition;case 4:return!!M.setWinSizePixels;case 5:return!!M.raiseWin;case 6:return!!M.lowerWin;case 7:return!!M.refreshWin;case 8:return!!M.setWinSizeChars;case 9:return!!M.maximizeWin;case 10:return!!M.fullscreenWin;case 11:return!!M.getWinState;case 13:return!!M.getWinPosition;case 14:return!!M.getWinSizePixels;case 15:return!!M.getScreenSizePixels;case 16:return!!M.getCellSizePixels;case 18:return!!M.getWinSizeChars;case 19:return!!M.getScreenSizeChars;case 20:return!!M.getIconTitle;case 21:return!!M.getWinTitle;case 22:return!!M.pushTitle;case 23:return!!M.popTitle;case 24:return!!M.setWinLines}return!1}var O;(function(Z){Z[Z.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",Z[Z.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(O||(a.WindowsOptionsReportType=O={}));let P=0;class $ extends g.Disposable{getAttrData(){return this._curAttrData}constructor(M,F,G,D,j,V,W,re,te=new f.EscapeSequenceParser){super(),this._bufferService=M,this._charsetService=F,this._coreService=G,this._logService=D,this._optionsService=j,this._oscLinkService=V,this._coreMouseService=W,this._unicodeService=re,this._parser=te,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new y.StringToUtf32,this._utf8Decoder=new y.Utf8ToUtf32,this._workCell=new _.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=m.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=m.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new b.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new b.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new b.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new b.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new b.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new b.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new b.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new b.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new b.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new b.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new b.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new b.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new b.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new ee(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(Y=>this._activeBuffer=Y.activeBuffer)),this._parser.setCsiHandlerFallback((Y,de)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(Y),params:de.toArray()})}),this._parser.setEscHandlerFallback(Y=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(Y)})}),this._parser.setExecuteHandlerFallback(Y=>{this._logService.debug("Unknown EXECUTE code: ",{code:Y})}),this._parser.setOscHandlerFallback((Y,de,ye)=>{this._logService.debug("Unknown OSC code: ",{identifier:Y,action:de,data:ye})}),this._parser.setDcsHandlerFallback((Y,de,ye)=>{de==="HOOK"&&(ye=ye.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(Y),action:de,payload:ye})}),this._parser.setPrintHandler((Y,de,ye)=>this.print(Y,de,ye)),this._parser.registerCsiHandler({final:"@"},Y=>this.insertChars(Y)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},Y=>this.scrollLeft(Y)),this._parser.registerCsiHandler({final:"A"},Y=>this.cursorUp(Y)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},Y=>this.scrollRight(Y)),this._parser.registerCsiHandler({final:"B"},Y=>this.cursorDown(Y)),this._parser.registerCsiHandler({final:"C"},Y=>this.cursorForward(Y)),this._parser.registerCsiHandler({final:"D"},Y=>this.cursorBackward(Y)),this._parser.registerCsiHandler({final:"E"},Y=>this.cursorNextLine(Y)),this._parser.registerCsiHandler({final:"F"},Y=>this.cursorPrecedingLine(Y)),this._parser.registerCsiHandler({final:"G"},Y=>this.cursorCharAbsolute(Y)),this._parser.registerCsiHandler({final:"H"},Y=>this.cursorPosition(Y)),this._parser.registerCsiHandler({final:"I"},Y=>this.cursorForwardTab(Y)),this._parser.registerCsiHandler({final:"J"},Y=>this.eraseInDisplay(Y,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},Y=>this.eraseInDisplay(Y,!0)),this._parser.registerCsiHandler({final:"K"},Y=>this.eraseInLine(Y,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},Y=>this.eraseInLine(Y,!0)),this._parser.registerCsiHandler({final:"L"},Y=>this.insertLines(Y)),this._parser.registerCsiHandler({final:"M"},Y=>this.deleteLines(Y)),this._parser.registerCsiHandler({final:"P"},Y=>this.deleteChars(Y)),this._parser.registerCsiHandler({final:"S"},Y=>this.scrollUp(Y)),this._parser.registerCsiHandler({final:"T"},Y=>this.scrollDown(Y)),this._parser.registerCsiHandler({final:"X"},Y=>this.eraseChars(Y)),this._parser.registerCsiHandler({final:"Z"},Y=>this.cursorBackwardTab(Y)),this._parser.registerCsiHandler({final:"`"},Y=>this.charPosAbsolute(Y)),this._parser.registerCsiHandler({final:"a"},Y=>this.hPositionRelative(Y)),this._parser.registerCsiHandler({final:"b"},Y=>this.repeatPrecedingCharacter(Y)),this._parser.registerCsiHandler({final:"c"},Y=>this.sendDeviceAttributesPrimary(Y)),this._parser.registerCsiHandler({prefix:">",final:"c"},Y=>this.sendDeviceAttributesSecondary(Y)),this._parser.registerCsiHandler({final:"d"},Y=>this.linePosAbsolute(Y)),this._parser.registerCsiHandler({final:"e"},Y=>this.vPositionRelative(Y)),this._parser.registerCsiHandler({final:"f"},Y=>this.hVPosition(Y)),this._parser.registerCsiHandler({final:"g"},Y=>this.tabClear(Y)),this._parser.registerCsiHandler({final:"h"},Y=>this.setMode(Y)),this._parser.registerCsiHandler({prefix:"?",final:"h"},Y=>this.setModePrivate(Y)),this._parser.registerCsiHandler({final:"l"},Y=>this.resetMode(Y)),this._parser.registerCsiHandler({prefix:"?",final:"l"},Y=>this.resetModePrivate(Y)),this._parser.registerCsiHandler({final:"m"},Y=>this.charAttributes(Y)),this._parser.registerCsiHandler({final:"n"},Y=>this.deviceStatus(Y)),this._parser.registerCsiHandler({prefix:"?",final:"n"},Y=>this.deviceStatusPrivate(Y)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},Y=>this.softReset(Y)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},Y=>this.setCursorStyle(Y)),this._parser.registerCsiHandler({final:"r"},Y=>this.setScrollRegion(Y)),this._parser.registerCsiHandler({final:"s"},Y=>this.saveCursor(Y)),this._parser.registerCsiHandler({final:"t"},Y=>this.windowOptions(Y)),this._parser.registerCsiHandler({final:"u"},Y=>this.restoreCursor(Y)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},Y=>this.insertColumns(Y)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},Y=>this.deleteColumns(Y)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},Y=>this.selectProtected(Y)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},Y=>this.requestMode(Y,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},Y=>this.requestMode(Y,!1)),this._parser.setExecuteHandler(d.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(d.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(d.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(d.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(d.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(d.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(d.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(d.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(d.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(d.C1.IND,()=>this.index()),this._parser.setExecuteHandler(d.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(d.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new k.OscHandler(Y=>(this.setTitle(Y),this.setIconName(Y),!0))),this._parser.registerOscHandler(1,new k.OscHandler(Y=>this.setIconName(Y))),this._parser.registerOscHandler(2,new k.OscHandler(Y=>this.setTitle(Y))),this._parser.registerOscHandler(4,new k.OscHandler(Y=>this.setOrReportIndexedColor(Y))),this._parser.registerOscHandler(8,new k.OscHandler(Y=>this.setHyperlink(Y))),this._parser.registerOscHandler(10,new k.OscHandler(Y=>this.setOrReportFgColor(Y))),this._parser.registerOscHandler(11,new k.OscHandler(Y=>this.setOrReportBgColor(Y))),this._parser.registerOscHandler(12,new k.OscHandler(Y=>this.setOrReportCursorColor(Y))),this._parser.registerOscHandler(104,new k.OscHandler(Y=>this.restoreIndexedColor(Y))),this._parser.registerOscHandler(110,new k.OscHandler(Y=>this.restoreFgColor(Y))),this._parser.registerOscHandler(111,new k.OscHandler(Y=>this.restoreBgColor(Y))),this._parser.registerOscHandler(112,new k.OscHandler(Y=>this.restoreCursorColor(Y))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const Y in h.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:Y},()=>this.selectCharset("("+Y)),this._parser.registerEscHandler({intermediates:")",final:Y},()=>this.selectCharset(")"+Y)),this._parser.registerEscHandler({intermediates:"*",final:Y},()=>this.selectCharset("*"+Y)),this._parser.registerEscHandler({intermediates:"+",final:Y},()=>this.selectCharset("+"+Y)),this._parser.registerEscHandler({intermediates:"-",final:Y},()=>this.selectCharset("-"+Y)),this._parser.registerEscHandler({intermediates:".",final:Y},()=>this.selectCharset("."+Y)),this._parser.registerEscHandler({intermediates:"/",final:Y},()=>this.selectCharset("/"+Y));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(Y=>(this._logService.error("Parsing error: ",Y),Y)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new x.DcsHandler((Y,de)=>this.requestStatusString(Y,de)))}_preserveStack(M,F,G,D){this._parseStack.paused=!0,this._parseStack.cursorStartX=M,this._parseStack.cursorStartY=F,this._parseStack.decodedLength=G,this._parseStack.position=D}_logSlowResolvingAsync(M){this._logService.logLevel<=w.LogLevelEnum.WARN&&Promise.race([M,new Promise((F,G)=>setTimeout(()=>G("#SLOW_TIMEOUT"),5e3))]).catch(F=>{if(F!=="#SLOW_TIMEOUT")throw F;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(M,F){let G,D=this._activeBuffer.x,j=this._activeBuffer.y,V=0;const W=this._parseStack.paused;if(W){if(G=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,F))return this._logSlowResolvingAsync(G),G;D=this._parseStack.cursorStartX,j=this._parseStack.cursorStartY,this._parseStack.paused=!1,M.length>C&&(V=this._parseStack.position+C)}if(this._logService.logLevel<=w.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof M=="string"?` "${M}"`:` "${Array.prototype.map.call(M,Y=>String.fromCharCode(Y)).join("")}"`),typeof M=="string"?M.split("").map(Y=>Y.charCodeAt(0)):M),this._parseBuffer.length<M.length&&this._parseBuffer.length<C&&(this._parseBuffer=new Uint32Array(Math.min(M.length,C))),W||this._dirtyRowTracker.clearRange(),M.length>C)for(let Y=V;Y<M.length;Y+=C){const de=Y+C<M.length?Y+C:M.length,ye=typeof M=="string"?this._stringDecoder.decode(M.substring(Y,de),this._parseBuffer):this._utf8Decoder.decode(M.subarray(Y,de),this._parseBuffer);if(G=this._parser.parse(this._parseBuffer,ye))return this._preserveStack(D,j,ye,Y),this._logSlowResolvingAsync(G),G}else if(!W){const Y=typeof M=="string"?this._stringDecoder.decode(M,this._parseBuffer):this._utf8Decoder.decode(M,this._parseBuffer);if(G=this._parser.parse(this._parseBuffer,Y))return this._preserveStack(D,j,Y,0),this._logSlowResolvingAsync(G),G}this._activeBuffer.x===D&&this._activeBuffer.y===j||this._onCursorMove.fire();const re=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),te=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);te<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(te,this._bufferService.rows-1),Math.min(re,this._bufferService.rows-1))}print(M,F,G){let D,j;const V=this._charsetService.charset,W=this._optionsService.rawOptions.screenReaderMode,re=this._bufferService.cols,te=this._coreService.decPrivateModes.wraparound,Y=this._coreService.modes.insertMode,de=this._curAttrData;let ye=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&G-F>0&&ye.getWidth(this._activeBuffer.x-1)===2&&ye.setCellFromCodepoint(this._activeBuffer.x-1,0,1,de);let Se=this._parser.precedingJoinState;for(let Te=F;Te<G;++Te){if(D=M[Te],D<127&&V){const ne=V[String.fromCharCode(D)];ne&&(D=ne.charCodeAt(0))}const ke=this._unicodeService.charProperties(D,Se);j=S.UnicodeService.extractWidth(ke);const K=S.UnicodeService.extractShouldJoin(ke),ge=K?S.UnicodeService.extractWidth(Se):0;if(Se=ke,W&&this._onA11yChar.fire((0,y.stringFromCodePoint)(D)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+j-ge>re){if(te){const ne=ye;let le=this._activeBuffer.x-ge;for(this._activeBuffer.x=ge,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),ye=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),ge>0&&ye instanceof m.BufferLine&&ye.copyCellsFrom(ne,le,0,ge,!1);le<re;)ne.setCellFromCodepoint(le++,0,1,de)}else if(this._activeBuffer.x=re-1,j===2)continue}if(K&&this._activeBuffer.x){const ne=ye.getWidth(this._activeBuffer.x-1)?1:2;ye.addCodepointToCell(this._activeBuffer.x-ne,D,j);for(let le=j-ge;--le>=0;)ye.setCellFromCodepoint(this._activeBuffer.x++,0,0,de)}else if(Y&&(ye.insertCells(this._activeBuffer.x,j-ge,this._activeBuffer.getNullCell(de)),ye.getWidth(re-1)===2&&ye.setCellFromCodepoint(re-1,v.NULL_CELL_CODE,v.NULL_CELL_WIDTH,de)),ye.setCellFromCodepoint(this._activeBuffer.x++,D,j,de),j>0)for(;--j;)ye.setCellFromCodepoint(this._activeBuffer.x++,0,0,de)}this._parser.precedingJoinState=Se,this._activeBuffer.x<re&&G-F>0&&ye.getWidth(this._activeBuffer.x)===0&&!ye.hasContent(this._activeBuffer.x)&&ye.setCellFromCodepoint(this._activeBuffer.x,0,1,de),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(M,F){return M.final!=="t"||M.prefix||M.intermediates?this._parser.registerCsiHandler(M,F):this._parser.registerCsiHandler(M,G=>!N(G.params[0],this._optionsService.rawOptions.windowOptions)||F(G))}registerDcsHandler(M,F){return this._parser.registerDcsHandler(M,new x.DcsHandler(F))}registerEscHandler(M,F){return this._parser.registerEscHandler(M,F)}registerOscHandler(M,F){return this._parser.registerOscHandler(M,new k.OscHandler(F))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);M.hasWidth(this._activeBuffer.x)&&!M.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const M=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-M),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(M=this._bufferService.cols-1){this._activeBuffer.x=Math.min(M,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(M,F){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=M,this._activeBuffer.y=this._activeBuffer.scrollTop+F):(this._activeBuffer.x=M,this._activeBuffer.y=F),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(M,F){this._restrictCursor(),this._setCursor(this._activeBuffer.x+M,this._activeBuffer.y+F)}cursorUp(M){const F=this._activeBuffer.y-this._activeBuffer.scrollTop;return F>=0?this._moveCursor(0,-Math.min(F,M.params[0]||1)):this._moveCursor(0,-(M.params[0]||1)),!0}cursorDown(M){const F=this._activeBuffer.scrollBottom-this._activeBuffer.y;return F>=0?this._moveCursor(0,Math.min(F,M.params[0]||1)):this._moveCursor(0,M.params[0]||1),!0}cursorForward(M){return this._moveCursor(M.params[0]||1,0),!0}cursorBackward(M){return this._moveCursor(-(M.params[0]||1),0),!0}cursorNextLine(M){return this.cursorDown(M),this._activeBuffer.x=0,!0}cursorPrecedingLine(M){return this.cursorUp(M),this._activeBuffer.x=0,!0}cursorCharAbsolute(M){return this._setCursor((M.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(M){return this._setCursor(M.length>=2?(M.params[1]||1)-1:0,(M.params[0]||1)-1),!0}charPosAbsolute(M){return this._setCursor((M.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(M){return this._moveCursor(M.params[0]||1,0),!0}linePosAbsolute(M){return this._setCursor(this._activeBuffer.x,(M.params[0]||1)-1),!0}vPositionRelative(M){return this._moveCursor(0,M.params[0]||1),!0}hVPosition(M){return this.cursorPosition(M),!0}tabClear(M){const F=M.params[0];return F===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:F===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(M){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let F=M.params[0]||1;for(;F--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(M){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let F=M.params[0]||1;for(;F--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(M){const F=M.params[0];return F===1&&(this._curAttrData.bg|=536870912),F!==2&&F!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(M,F,G,D=!1,j=!1){const V=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);V.replaceCells(F,G,this._activeBuffer.getNullCell(this._eraseAttrData()),j),D&&(V.isWrapped=!1)}_resetBufferLine(M,F=!1){const G=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);G&&(G.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),F),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+M),G.isWrapped=!1)}eraseInDisplay(M,F=!1){let G;switch(this._restrictCursor(this._bufferService.cols),M.params[0]){case 0:for(G=this._activeBuffer.y,this._dirtyRowTracker.markDirty(G),this._eraseInBufferLine(G++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,F);G<this._bufferService.rows;G++)this._resetBufferLine(G,F);this._dirtyRowTracker.markDirty(G);break;case 1:for(G=this._activeBuffer.y,this._dirtyRowTracker.markDirty(G),this._eraseInBufferLine(G,0,this._activeBuffer.x+1,!0,F),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(G+1).isWrapped=!1);G--;)this._resetBufferLine(G,F);this._dirtyRowTracker.markDirty(0);break;case 2:for(G=this._bufferService.rows,this._dirtyRowTracker.markDirty(G-1);G--;)this._resetBufferLine(G,F);this._dirtyRowTracker.markDirty(0);break;case 3:const D=this._activeBuffer.lines.length-this._bufferService.rows;D>0&&(this._activeBuffer.lines.trimStart(D),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-D,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-D,0),this._onScroll.fire(0))}return!0}eraseInLine(M,F=!1){switch(this._restrictCursor(this._bufferService.cols),M.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,F);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,F);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,F)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(M){this._restrictCursor();let F=M.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const G=this._activeBuffer.ybase+this._activeBuffer.y,D=this._bufferService.rows-1-this._activeBuffer.scrollBottom,j=this._bufferService.rows-1+this._activeBuffer.ybase-D+1;for(;F--;)this._activeBuffer.lines.splice(j-1,1),this._activeBuffer.lines.splice(G,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(M){this._restrictCursor();let F=M.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const G=this._activeBuffer.ybase+this._activeBuffer.y;let D;for(D=this._bufferService.rows-1-this._activeBuffer.scrollBottom,D=this._bufferService.rows-1+this._activeBuffer.ybase-D;F--;)this._activeBuffer.lines.splice(G,1),this._activeBuffer.lines.splice(D,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(M){this._restrictCursor();const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return F&&(F.insertCells(this._activeBuffer.x,M.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(M){this._restrictCursor();const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return F&&(F.deleteCells(this._activeBuffer.x,M.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(M){let F=M.params[0]||1;for(;F--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(M){let F=M.params[0]||1;for(;F--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(m.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const F=M.params[0]||1;for(let G=this._activeBuffer.scrollTop;G<=this._activeBuffer.scrollBottom;++G){const D=this._activeBuffer.lines.get(this._activeBuffer.ybase+G);D.deleteCells(0,F,this._activeBuffer.getNullCell(this._eraseAttrData())),D.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const F=M.params[0]||1;for(let G=this._activeBuffer.scrollTop;G<=this._activeBuffer.scrollBottom;++G){const D=this._activeBuffer.lines.get(this._activeBuffer.ybase+G);D.insertCells(0,F,this._activeBuffer.getNullCell(this._eraseAttrData())),D.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const F=M.params[0]||1;for(let G=this._activeBuffer.scrollTop;G<=this._activeBuffer.scrollBottom;++G){const D=this._activeBuffer.lines.get(this._activeBuffer.ybase+G);D.insertCells(this._activeBuffer.x,F,this._activeBuffer.getNullCell(this._eraseAttrData())),D.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(M){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const F=M.params[0]||1;for(let G=this._activeBuffer.scrollTop;G<=this._activeBuffer.scrollBottom;++G){const D=this._activeBuffer.lines.get(this._activeBuffer.ybase+G);D.deleteCells(this._activeBuffer.x,F,this._activeBuffer.getNullCell(this._eraseAttrData())),D.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(M){this._restrictCursor();const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return F&&(F.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(M.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(M){const F=this._parser.precedingJoinState;if(!F)return!0;const G=M.params[0]||1,D=S.UnicodeService.extractWidth(F),j=this._activeBuffer.x-D,V=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(j),W=new Uint32Array(V.length*G);let re=0;for(let Y=0;Y<V.length;){const de=V.codePointAt(Y)||0;W[re++]=de,Y+=de>65535?2:1}let te=re;for(let Y=1;Y<G;++Y)W.copyWithin(te,0,re),te+=re;return this.print(W,0,te),!0}sendDeviceAttributesPrimary(M){return M.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(d.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(d.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(M){return M.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(d.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(d.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(M.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(d.C0.ESC+"[>83;40003;0c")),!0}_is(M){return(this._optionsService.rawOptions.termName+"").indexOf(M)===0}setMode(M){for(let F=0;F<M.length;F++)switch(M.params[F]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(M){for(let F=0;F<M.length;F++)switch(M.params[F]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,h.DEFAULT_CHARSET),this._charsetService.setgCharset(1,h.DEFAULT_CHARSET),this._charsetService.setgCharset(2,h.DEFAULT_CHARSET),this._charsetService.setgCharset(3,h.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(M){for(let F=0;F<M.length;F++)switch(M.params[F]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(M){for(let F=0;F<M.length;F++)switch(M.params[F]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),M.params[F]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(M,F){const G=this._coreService.decPrivateModes,{activeProtocol:D,activeEncoding:j}=this._coreMouseService,V=this._coreService,{buffers:W,cols:re}=this._bufferService,{active:te,alt:Y}=W,de=this._optionsService.rawOptions,ye=K=>K?1:2,Se=M.params[0];return Te=Se,ke=F?Se===2?4:Se===4?ye(V.modes.insertMode):Se===12?3:Se===20?ye(de.convertEol):0:Se===1?ye(G.applicationCursorKeys):Se===3?de.windowOptions.setWinLines?re===80?2:re===132?1:0:0:Se===6?ye(G.origin):Se===7?ye(G.wraparound):Se===8?3:Se===9?ye(D==="X10"):Se===12?ye(de.cursorBlink):Se===25?ye(!V.isCursorHidden):Se===45?ye(G.reverseWraparound):Se===66?ye(G.applicationKeypad):Se===67?4:Se===1e3?ye(D==="VT200"):Se===1002?ye(D==="DRAG"):Se===1003?ye(D==="ANY"):Se===1004?ye(G.sendFocus):Se===1005?4:Se===1006?ye(j==="SGR"):Se===1015?4:Se===1016?ye(j==="SGR_PIXELS"):Se===1048?1:Se===47||Se===1047||Se===1049?ye(te===Y):Se===2004?ye(G.bracketedPasteMode):0,V.triggerDataEvent(`${d.C0.ESC}[${F?"":"?"}${Te};${ke}$y`),!0;var Te,ke}_updateAttrColor(M,F,G,D,j){return F===2?(M|=50331648,M&=-16777216,M|=E.AttributeData.fromColorRGB([G,D,j])):F===5&&(M&=-50331904,M|=33554432|255&G),M}_extractColor(M,F,G){const D=[0,0,-1,0,0,0];let j=0,V=0;do{if(D[V+j]=M.params[F+V],M.hasSubParams(F+V)){const W=M.getSubParams(F+V);let re=0;do D[1]===5&&(j=1),D[V+re+1+j]=W[re];while(++re<W.length&&re+V+1+j<D.length);break}if(D[1]===5&&V+j>=2||D[1]===2&&V+j>=5)break;D[1]&&(j=1)}while(++V+F<M.length&&V+j<D.length);for(let W=2;W<D.length;++W)D[W]===-1&&(D[W]=0);switch(D[0]){case 38:G.fg=this._updateAttrColor(G.fg,D[1],D[3],D[4],D[5]);break;case 48:G.bg=this._updateAttrColor(G.bg,D[1],D[3],D[4],D[5]);break;case 58:G.extended=G.extended.clone(),G.extended.underlineColor=this._updateAttrColor(G.extended.underlineColor,D[1],D[3],D[4],D[5])}return V}_processUnderline(M,F){F.extended=F.extended.clone(),(!~M||M>5)&&(M=1),F.extended.underlineStyle=M,F.fg|=268435456,M===0&&(F.fg&=-268435457),F.updateExtended()}_processSGR0(M){M.fg=m.DEFAULT_ATTR_DATA.fg,M.bg=m.DEFAULT_ATTR_DATA.bg,M.extended=M.extended.clone(),M.extended.underlineStyle=0,M.extended.underlineColor&=-67108864,M.updateExtended()}charAttributes(M){if(M.length===1&&M.params[0]===0)return this._processSGR0(this._curAttrData),!0;const F=M.length;let G;const D=this._curAttrData;for(let j=0;j<F;j++)G=M.params[j],G>=30&&G<=37?(D.fg&=-50331904,D.fg|=16777216|G-30):G>=40&&G<=47?(D.bg&=-50331904,D.bg|=16777216|G-40):G>=90&&G<=97?(D.fg&=-50331904,D.fg|=16777224|G-90):G>=100&&G<=107?(D.bg&=-50331904,D.bg|=16777224|G-100):G===0?this._processSGR0(D):G===1?D.fg|=134217728:G===3?D.bg|=67108864:G===4?(D.fg|=268435456,this._processUnderline(M.hasSubParams(j)?M.getSubParams(j)[0]:1,D)):G===5?D.fg|=536870912:G===7?D.fg|=67108864:G===8?D.fg|=1073741824:G===9?D.fg|=2147483648:G===2?D.bg|=134217728:G===21?this._processUnderline(2,D):G===22?(D.fg&=-134217729,D.bg&=-134217729):G===23?D.bg&=-67108865:G===24?(D.fg&=-268435457,this._processUnderline(0,D)):G===25?D.fg&=-536870913:G===27?D.fg&=-67108865:G===28?D.fg&=-1073741825:G===29?D.fg&=2147483647:G===39?(D.fg&=-67108864,D.fg|=16777215&m.DEFAULT_ATTR_DATA.fg):G===49?(D.bg&=-67108864,D.bg|=16777215&m.DEFAULT_ATTR_DATA.bg):G===38||G===48||G===58?j+=this._extractColor(M,j,D):G===53?D.bg|=1073741824:G===55?D.bg&=-1073741825:G===59?(D.extended=D.extended.clone(),D.extended.underlineColor=-1,D.updateExtended()):G===100?(D.fg&=-67108864,D.fg|=16777215&m.DEFAULT_ATTR_DATA.fg,D.bg&=-67108864,D.bg|=16777215&m.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",G);return!0}deviceStatus(M){switch(M.params[0]){case 5:this._coreService.triggerDataEvent(`${d.C0.ESC}[0n`);break;case 6:const F=this._activeBuffer.y+1,G=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${d.C0.ESC}[${F};${G}R`)}return!0}deviceStatusPrivate(M){if(M.params[0]===6){const F=this._activeBuffer.y+1,G=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${d.C0.ESC}[?${F};${G}R`)}return!0}softReset(M){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=m.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(M){const F=M.params[0]||1;switch(F){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const G=F%2==1;return this._optionsService.options.cursorBlink=G,!0}setScrollRegion(M){const F=M.params[0]||1;let G;return(M.length<2||(G=M.params[1])>this._bufferService.rows||G===0)&&(G=this._bufferService.rows),G>F&&(this._activeBuffer.scrollTop=F-1,this._activeBuffer.scrollBottom=G-1,this._setCursor(0,0)),!0}windowOptions(M){if(!N(M.params[0],this._optionsService.rawOptions.windowOptions))return!0;const F=M.length>1?M.params[1]:0;switch(M.params[0]){case 14:F!==2&&this._onRequestWindowsOptionsReport.fire(O.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(O.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${d.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:F!==0&&F!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),F!==0&&F!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:F!==0&&F!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),F!==0&&F!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(M){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(M){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(M){return this._windowTitle=M,this._onTitleChange.fire(M),!0}setIconName(M){return this._iconName=M,!0}setOrReportIndexedColor(M){const F=[],G=M.split(";");for(;G.length>1;){const D=G.shift(),j=G.shift();if(/^\d+$/.exec(D)){const V=parseInt(D);if(J(V))if(j==="?")F.push({type:0,index:V});else{const W=(0,I.parseColor)(j);W&&F.push({type:1,index:V,color:W})}}}return F.length&&this._onColor.fire(F),!0}setHyperlink(M){const F=M.split(";");return!(F.length<2)&&(F[1]?this._createHyperlink(F[0],F[1]):!F[0]&&this._finishHyperlink())}_createHyperlink(M,F){this._getCurrentLinkId()&&this._finishHyperlink();const G=M.split(":");let D;const j=G.findIndex(V=>V.startsWith("id="));return j!==-1&&(D=G[j].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:D,uri:F}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(M,F){const G=M.split(";");for(let D=0;D<G.length&&!(F>=this._specialColors.length);++D,++F)if(G[D]==="?")this._onColor.fire([{type:0,index:this._specialColors[F]}]);else{const j=(0,I.parseColor)(G[D]);j&&this._onColor.fire([{type:1,index:this._specialColors[F],color:j}])}return!0}setOrReportFgColor(M){return this._setOrReportSpecialColor(M,0)}setOrReportBgColor(M){return this._setOrReportSpecialColor(M,1)}setOrReportCursorColor(M){return this._setOrReportSpecialColor(M,2)}restoreIndexedColor(M){if(!M)return this._onColor.fire([{type:2}]),!0;const F=[],G=M.split(";");for(let D=0;D<G.length;++D)if(/^\d+$/.exec(G[D])){const j=parseInt(G[D]);J(j)&&F.push({type:2,index:j})}return F.length&&this._onColor.fire(F),!0}restoreFgColor(M){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(M){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(M){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,h.DEFAULT_CHARSET),!0}selectCharset(M){return M.length!==2?(this.selectDefaultCharset(),!0):(M[0]==="/"||this._charsetService.setgCharset(R[M[0]],h.CHARSETS[M[1]]||h.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const M=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,M,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=m.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=m.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(M){return this._charsetService.setgLevel(M),!0}screenAlignmentPattern(){const M=new _.CellData;M.content=4194373,M.fg=this._curAttrData.fg,M.bg=this._curAttrData.bg,this._setCursor(0,0);for(let F=0;F<this._bufferService.rows;++F){const G=this._activeBuffer.ybase+this._activeBuffer.y+F,D=this._activeBuffer.lines.get(G);D&&(D.fill(M),D.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(M,F){const G=this._bufferService.buffer,D=this._optionsService.rawOptions;return(j=>(this._coreService.triggerDataEvent(`${d.C0.ESC}${j}${d.C0.ESC}\\`),!0))(M==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:M==='"p'?'P1$r61;1"p':M==="r"?`P1$r${G.scrollTop+1};${G.scrollBottom+1}r`:M==="m"?"P1$r0m":M===" q"?`P1$r${{block:2,underline:4,bar:6}[D.cursorStyle]-(D.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(M,F){this._dirtyRowTracker.markRangeDirty(M,F)}}a.InputHandler=$;let ee=class{constructor(Z){this._bufferService=Z,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(Z){Z<this.start?this.start=Z:Z>this.end&&(this.end=Z)}markRangeDirty(Z,M){Z>M&&(P=Z,Z=M,M=P),Z<this.start&&(this.start=Z),M>this.end&&(this.end=M)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function J(Z){return 0<=Z&&Z<256}ee=c([u(0,w.IBufferService)],ee)},844:(o,a)=>{function l(c){for(const u of c)u.dispose();c.length=0}Object.defineProperty(a,"__esModule",{value:!0}),a.getDisposeArrayDisposable=a.disposeArray=a.toDisposable=a.MutableDisposable=a.Disposable=void 0,a.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const c of this._disposables)c.dispose();this._disposables.length=0}register(c){return this._disposables.push(c),c}unregister(c){const u=this._disposables.indexOf(c);u!==-1&&this._disposables.splice(u,1)}},a.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(c){this._isDisposed||c===this._value||(this._value?.dispose(),this._value=c)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},a.toDisposable=function(c){return{dispose:c}},a.disposeArray=l,a.getDisposeArrayDisposable=function(c){return{dispose:()=>l(c)}}},1505:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.FourKeyMap=a.TwoKeyMap=void 0;class l{constructor(){this._data={}}set(u,d,h){this._data[u]||(this._data[u]={}),this._data[u][d]=h}get(u,d){return this._data[u]?this._data[u][d]:void 0}clear(){this._data={}}}a.TwoKeyMap=l,a.FourKeyMap=class{constructor(){this._data=new l}set(c,u,d,h,f){this._data.get(c,u)||this._data.set(c,u,new l),this._data.get(c,u).set(d,h,f)}get(c,u,d,h){return this._data.get(c,u)?.get(d,h)}clear(){this._data.clear()}}},6114:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.isChromeOS=a.isLinux=a.isWindows=a.isIphone=a.isIpad=a.isMac=a.getSafariVersion=a.isSafari=a.isLegacyEdge=a.isFirefox=a.isNode=void 0,a.isNode=typeof An<"u"&&"title"in An;const l=a.isNode?"node":navigator.userAgent,c=a.isNode?"node":navigator.platform;a.isFirefox=l.includes("Firefox"),a.isLegacyEdge=l.includes("Edge"),a.isSafari=/^((?!chrome|android).)*safari/i.test(l),a.getSafariVersion=function(){if(!a.isSafari)return 0;const u=l.match(/Version\/(\d+)/);return u===null||u.length<2?0:parseInt(u[1])},a.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(c),a.isIpad=c==="iPad",a.isIphone=c==="iPhone",a.isWindows=["Windows","Win16","Win32","WinCE"].includes(c),a.isLinux=c.indexOf("Linux")>=0,a.isChromeOS=/\bCrOS\b/.test(l)},6106:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SortedList=void 0;let l=0;a.SortedList=class{constructor(c){this._getKey=c,this._array=[]}clear(){this._array.length=0}insert(c){this._array.length!==0?(l=this._search(this._getKey(c)),this._array.splice(l,0,c)):this._array.push(c)}delete(c){if(this._array.length===0)return!1;const u=this._getKey(c);if(u===void 0||(l=this._search(u),l===-1)||this._getKey(this._array[l])!==u)return!1;do if(this._array[l]===c)return this._array.splice(l,1),!0;while(++l<this._array.length&&this._getKey(this._array[l])===u);return!1}*getKeyIterator(c){if(this._array.length!==0&&(l=this._search(c),!(l<0||l>=this._array.length)&&this._getKey(this._array[l])===c))do yield this._array[l];while(++l<this._array.length&&this._getKey(this._array[l])===c)}forEachByKey(c,u){if(this._array.length!==0&&(l=this._search(c),!(l<0||l>=this._array.length)&&this._getKey(this._array[l])===c))do u(this._array[l]);while(++l<this._array.length&&this._getKey(this._array[l])===c)}values(){return[...this._array].values()}_search(c){let u=0,d=this._array.length-1;for(;d>=u;){let h=u+d>>1;const f=this._getKey(this._array[h]);if(f>c)d=h-1;else{if(!(f<c)){for(;h>0&&this._getKey(this._array[h-1])===c;)h--;return h}u=h+1}}return u}}},7226:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DebouncedIdleTask=a.IdleTaskQueue=a.PriorityTaskQueue=void 0;const c=l(6114);class u{constructor(){this._tasks=[],this._i=0}enqueue(f){this._tasks.push(f),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(f){this._idleCallback=void 0;let g=0,y=0,m=f.timeRemaining(),b=0;for(;this._i<this._tasks.length;){if(g=Date.now(),this._tasks[this._i]()||this._i++,g=Math.max(1,Date.now()-g),y=Math.max(g,y),b=f.timeRemaining(),1.5*y>b)return m-g<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(m-g))}ms`),void this._start();m=b}this.clear()}}class d extends u{_requestCallback(f){return setTimeout(()=>f(this._createDeadline(16)))}_cancelCallback(f){clearTimeout(f)}_createDeadline(f){const g=Date.now()+f;return{timeRemaining:()=>Math.max(0,g-Date.now())}}}a.PriorityTaskQueue=d,a.IdleTaskQueue=!c.isNode&&"requestIdleCallback"in window?class extends u{_requestCallback(h){return requestIdleCallback(h)}_cancelCallback(h){cancelIdleCallback(h)}}:d,a.DebouncedIdleTask=class{constructor(){this._queue=new a.IdleTaskQueue}set(h){this._queue.clear(),this._queue.enqueue(h)}flush(){this._queue.flush()}}},9282:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.updateWindowsModeWrappedState=void 0;const c=l(643);a.updateWindowsModeWrappedState=function(u){const d=u.buffer.lines.get(u.buffer.ybase+u.buffer.y-1),h=d?.get(u.cols-1),f=u.buffer.lines.get(u.buffer.ybase+u.buffer.y);f&&h&&(f.isWrapped=h[c.CHAR_DATA_CODE_INDEX]!==c.NULL_CELL_CODE&&h[c.CHAR_DATA_CODE_INDEX]!==c.WHITESPACE_CELL_CODE)}},3734:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ExtendedAttrs=a.AttributeData=void 0;class l{constructor(){this.fg=0,this.bg=0,this.extended=new c}static toColorRGB(d){return[d>>>16&255,d>>>8&255,255&d]}static fromColorRGB(d){return(255&d[0])<<16|(255&d[1])<<8|255&d[2]}clone(){const d=new l;return d.fg=this.fg,d.bg=this.bg,d.extended=this.extended.clone(),d}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}a.AttributeData=l;class c{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(d){this._ext=d}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(d){this._ext&=-469762049,this._ext|=d<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(d){this._ext&=-67108864,this._ext|=67108863&d}get urlId(){return this._urlId}set urlId(d){this._urlId=d}get underlineVariantOffset(){const d=(3758096384&this._ext)>>29;return d<0?4294967288^d:d}set underlineVariantOffset(d){this._ext&=536870911,this._ext|=d<<29&3758096384}constructor(d=0,h=0){this._ext=0,this._urlId=0,this._ext=d,this._urlId=h}clone(){return new c(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}a.ExtendedAttrs=c},9092:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Buffer=a.MAX_BUFFER_SIZE=void 0;const c=l(6349),u=l(7226),d=l(3734),h=l(8437),f=l(4634),g=l(511),y=l(643),m=l(4863),b=l(7116);a.MAX_BUFFER_SIZE=4294967295,a.Buffer=class{constructor(v,_,E){this._hasScrollback=v,this._optionsService=_,this._bufferService=E,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=h.DEFAULT_ATTR_DATA.clone(),this.savedCharset=b.DEFAULT_CHARSET,this.markers=[],this._nullCell=g.CellData.fromCharData([0,y.NULL_CELL_CHAR,y.NULL_CELL_WIDTH,y.NULL_CELL_CODE]),this._whitespaceCell=g.CellData.fromCharData([0,y.WHITESPACE_CELL_CHAR,y.WHITESPACE_CELL_WIDTH,y.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new u.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new c.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(v){return v?(this._nullCell.fg=v.fg,this._nullCell.bg=v.bg,this._nullCell.extended=v.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new d.ExtendedAttrs),this._nullCell}getWhitespaceCell(v){return v?(this._whitespaceCell.fg=v.fg,this._whitespaceCell.bg=v.bg,this._whitespaceCell.extended=v.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new d.ExtendedAttrs),this._whitespaceCell}getBlankLine(v,_){return new h.BufferLine(this._bufferService.cols,this.getNullCell(v),_)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const v=this.ybase+this.y-this.ydisp;return v>=0&&v<this._rows}_getCorrectBufferLength(v){if(!this._hasScrollback)return v;const _=v+this._optionsService.rawOptions.scrollback;return _>a.MAX_BUFFER_SIZE?a.MAX_BUFFER_SIZE:_}fillViewportRows(v){if(this.lines.length===0){v===void 0&&(v=h.DEFAULT_ATTR_DATA);let _=this._rows;for(;_--;)this.lines.push(this.getBlankLine(v))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new c.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(v,_){const E=this.getNullCell(h.DEFAULT_ATTR_DATA);let w=0;const S=this._getCorrectBufferLength(_);if(S>this.lines.maxLength&&(this.lines.maxLength=S),this.lines.length>0){if(this._cols<v)for(let x=0;x<this.lines.length;x++)w+=+this.lines.get(x).resize(v,E);let k=0;if(this._rows<_)for(let x=this._rows;x<_;x++)this.lines.length<_+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new h.BufferLine(v,E)):this.ybase>0&&this.lines.length<=this.ybase+this.y+k+1?(this.ybase--,k++,this.ydisp>0&&this.ydisp--):this.lines.push(new h.BufferLine(v,E)));else for(let x=this._rows;x>_;x--)this.lines.length>_+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(S<this.lines.maxLength){const x=this.lines.length-S;x>0&&(this.lines.trimStart(x),this.ybase=Math.max(this.ybase-x,0),this.ydisp=Math.max(this.ydisp-x,0),this.savedY=Math.max(this.savedY-x,0)),this.lines.maxLength=S}this.x=Math.min(this.x,v-1),this.y=Math.min(this.y,_-1),k&&(this.y+=k),this.savedX=Math.min(this.savedX,v-1),this.scrollTop=0}if(this.scrollBottom=_-1,this._isReflowEnabled&&(this._reflow(v,_),this._cols>v))for(let k=0;k<this.lines.length;k++)w+=+this.lines.get(k).resize(v,E);this._cols=v,this._rows=_,this._memoryCleanupQueue.clear(),w>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let v=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,v=!1);let _=0;for(;this._memoryCleanupPosition<this.lines.length;)if(_+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),_>100)return!0;return v}get _isReflowEnabled(){const v=this._optionsService.rawOptions.windowsPty;return v&&v.buildNumber?this._hasScrollback&&v.backend==="conpty"&&v.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(v,_){this._cols!==v&&(v>this._cols?this._reflowLarger(v,_):this._reflowSmaller(v,_))}_reflowLarger(v,_){const E=(0,f.reflowLargerGetLinesToRemove)(this.lines,this._cols,v,this.ybase+this.y,this.getNullCell(h.DEFAULT_ATTR_DATA));if(E.length>0){const w=(0,f.reflowLargerCreateNewLayout)(this.lines,E);(0,f.reflowLargerApplyNewLayout)(this.lines,w.layout),this._reflowLargerAdjustViewport(v,_,w.countRemoved)}}_reflowLargerAdjustViewport(v,_,E){const w=this.getNullCell(h.DEFAULT_ATTR_DATA);let S=E;for(;S-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<_&&this.lines.push(new h.BufferLine(v,w))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-E,0)}_reflowSmaller(v,_){const E=this.getNullCell(h.DEFAULT_ATTR_DATA),w=[];let S=0;for(let k=this.lines.length-1;k>=0;k--){let x=this.lines.get(k);if(!x||!x.isWrapped&&x.getTrimmedLength()<=v)continue;const I=[x];for(;x.isWrapped&&k>0;)x=this.lines.get(--k),I.unshift(x);const R=this.ybase+this.y;if(R>=k&&R<k+I.length)continue;const C=I[I.length-1].getTrimmedLength(),N=(0,f.reflowSmallerGetNewLineLengths)(I,this._cols,v),O=N.length-I.length;let P;P=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+O):Math.max(0,this.lines.length-this.lines.maxLength+O);const $=[];for(let G=0;G<O;G++){const D=this.getBlankLine(h.DEFAULT_ATTR_DATA,!0);$.push(D)}$.length>0&&(w.push({start:k+I.length+S,newLines:$}),S+=$.length),I.push(...$);let ee=N.length-1,J=N[ee];J===0&&(ee--,J=N[ee]);let Z=I.length-O-1,M=C;for(;Z>=0;){const G=Math.min(M,J);if(I[ee]===void 0)break;if(I[ee].copyCellsFrom(I[Z],M-G,J-G,G,!0),J-=G,J===0&&(ee--,J=N[ee]),M-=G,M===0){Z--;const D=Math.max(Z,0);M=(0,f.getWrappedLineTrimmedLength)(I,D,this._cols)}}for(let G=0;G<I.length;G++)N[G]<v&&I[G].setCell(N[G],E);let F=O-P;for(;F-- >0;)this.ybase===0?this.y<_-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+S)-_&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+O,this.ybase+_-1)}if(w.length>0){const k=[],x=[];for(let ee=0;ee<this.lines.length;ee++)x.push(this.lines.get(ee));const I=this.lines.length;let R=I-1,C=0,N=w[C];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+S);let O=0;for(let ee=Math.min(this.lines.maxLength-1,I+S-1);ee>=0;ee--)if(N&&N.start>R+O){for(let J=N.newLines.length-1;J>=0;J--)this.lines.set(ee--,N.newLines[J]);ee++,k.push({index:R+1,amount:N.newLines.length}),O+=N.newLines.length,N=w[++C]}else this.lines.set(ee,x[R--]);let P=0;for(let ee=k.length-1;ee>=0;ee--)k[ee].index+=P,this.lines.onInsertEmitter.fire(k[ee]),P+=k[ee].amount;const $=Math.max(0,I+S-this.lines.maxLength);$>0&&this.lines.onTrimEmitter.fire($)}}translateBufferLineToString(v,_,E=0,w){const S=this.lines.get(v);return S?S.translateToString(_,E,w):""}getWrappedRangeForLine(v){let _=v,E=v;for(;_>0&&this.lines.get(_).isWrapped;)_--;for(;E+1<this.lines.length&&this.lines.get(E+1).isWrapped;)E++;return{first:_,last:E}}setupTabStops(v){for(v!=null?this.tabs[v]||(v=this.prevStop(v)):(this.tabs={},v=0);v<this._cols;v+=this._optionsService.rawOptions.tabStopWidth)this.tabs[v]=!0}prevStop(v){for(v==null&&(v=this.x);!this.tabs[--v]&&v>0;);return v>=this._cols?this._cols-1:v<0?0:v}nextStop(v){for(v==null&&(v=this.x);!this.tabs[++v]&&v<this._cols;);return v>=this._cols?this._cols-1:v<0?0:v}clearMarkers(v){this._isClearing=!0;for(let _=0;_<this.markers.length;_++)this.markers[_].line===v&&(this.markers[_].dispose(),this.markers.splice(_--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let v=0;v<this.markers.length;v++)this.markers[v].dispose(),this.markers.splice(v--,1);this._isClearing=!1}addMarker(v){const _=new m.Marker(v);return this.markers.push(_),_.register(this.lines.onTrim(E=>{_.line-=E,_.line<0&&_.dispose()})),_.register(this.lines.onInsert(E=>{_.line>=E.index&&(_.line+=E.amount)})),_.register(this.lines.onDelete(E=>{_.line>=E.index&&_.line<E.index+E.amount&&_.dispose(),_.line>E.index&&(_.line-=E.amount)})),_.register(_.onDispose(()=>this._removeMarker(_))),_}_removeMarker(v){this._isClearing||this.markers.splice(this.markers.indexOf(v),1)}}},8437:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferLine=a.DEFAULT_ATTR_DATA=void 0;const c=l(3734),u=l(511),d=l(643),h=l(482);a.DEFAULT_ATTR_DATA=Object.freeze(new c.AttributeData);let f=0;class g{constructor(m,b,v=!1){this.isWrapped=v,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*m);const _=b||u.CellData.fromCharData([0,d.NULL_CELL_CHAR,d.NULL_CELL_WIDTH,d.NULL_CELL_CODE]);for(let E=0;E<m;++E)this.setCell(E,_);this.length=m}get(m){const b=this._data[3*m+0],v=2097151&b;return[this._data[3*m+1],2097152&b?this._combined[m]:v?(0,h.stringFromCodePoint)(v):"",b>>22,2097152&b?this._combined[m].charCodeAt(this._combined[m].length-1):v]}set(m,b){this._data[3*m+1]=b[d.CHAR_DATA_ATTR_INDEX],b[d.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[m]=b[1],this._data[3*m+0]=2097152|m|b[d.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*m+0]=b[d.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|b[d.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(m){return this._data[3*m+0]>>22}hasWidth(m){return 12582912&this._data[3*m+0]}getFg(m){return this._data[3*m+1]}getBg(m){return this._data[3*m+2]}hasContent(m){return 4194303&this._data[3*m+0]}getCodePoint(m){const b=this._data[3*m+0];return 2097152&b?this._combined[m].charCodeAt(this._combined[m].length-1):2097151&b}isCombined(m){return 2097152&this._data[3*m+0]}getString(m){const b=this._data[3*m+0];return 2097152&b?this._combined[m]:2097151&b?(0,h.stringFromCodePoint)(2097151&b):""}isProtected(m){return 536870912&this._data[3*m+2]}loadCell(m,b){return f=3*m,b.content=this._data[f+0],b.fg=this._data[f+1],b.bg=this._data[f+2],2097152&b.content&&(b.combinedData=this._combined[m]),268435456&b.bg&&(b.extended=this._extendedAttrs[m]),b}setCell(m,b){2097152&b.content&&(this._combined[m]=b.combinedData),268435456&b.bg&&(this._extendedAttrs[m]=b.extended),this._data[3*m+0]=b.content,this._data[3*m+1]=b.fg,this._data[3*m+2]=b.bg}setCellFromCodepoint(m,b,v,_){268435456&_.bg&&(this._extendedAttrs[m]=_.extended),this._data[3*m+0]=b|v<<22,this._data[3*m+1]=_.fg,this._data[3*m+2]=_.bg}addCodepointToCell(m,b,v){let _=this._data[3*m+0];2097152&_?this._combined[m]+=(0,h.stringFromCodePoint)(b):2097151&_?(this._combined[m]=(0,h.stringFromCodePoint)(2097151&_)+(0,h.stringFromCodePoint)(b),_&=-2097152,_|=2097152):_=b|4194304,v&&(_&=-12582913,_|=v<<22),this._data[3*m+0]=_}insertCells(m,b,v){if((m%=this.length)&&this.getWidth(m-1)===2&&this.setCellFromCodepoint(m-1,0,1,v),b<this.length-m){const _=new u.CellData;for(let E=this.length-m-b-1;E>=0;--E)this.setCell(m+b+E,this.loadCell(m+E,_));for(let E=0;E<b;++E)this.setCell(m+E,v)}else for(let _=m;_<this.length;++_)this.setCell(_,v);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,v)}deleteCells(m,b,v){if(m%=this.length,b<this.length-m){const _=new u.CellData;for(let E=0;E<this.length-m-b;++E)this.setCell(m+E,this.loadCell(m+b+E,_));for(let E=this.length-b;E<this.length;++E)this.setCell(E,v)}else for(let _=m;_<this.length;++_)this.setCell(_,v);m&&this.getWidth(m-1)===2&&this.setCellFromCodepoint(m-1,0,1,v),this.getWidth(m)!==0||this.hasContent(m)||this.setCellFromCodepoint(m,0,1,v)}replaceCells(m,b,v,_=!1){if(_)for(m&&this.getWidth(m-1)===2&&!this.isProtected(m-1)&&this.setCellFromCodepoint(m-1,0,1,v),b<this.length&&this.getWidth(b-1)===2&&!this.isProtected(b)&&this.setCellFromCodepoint(b,0,1,v);m<b&&m<this.length;)this.isProtected(m)||this.setCell(m,v),m++;else for(m&&this.getWidth(m-1)===2&&this.setCellFromCodepoint(m-1,0,1,v),b<this.length&&this.getWidth(b-1)===2&&this.setCellFromCodepoint(b,0,1,v);m<b&&m<this.length;)this.setCell(m++,v)}resize(m,b){if(m===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const v=3*m;if(m>this.length){if(this._data.buffer.byteLength>=4*v)this._data=new Uint32Array(this._data.buffer,0,v);else{const _=new Uint32Array(v);_.set(this._data),this._data=_}for(let _=this.length;_<m;++_)this.setCell(_,b)}else{this._data=this._data.subarray(0,v);const _=Object.keys(this._combined);for(let w=0;w<_.length;w++){const S=parseInt(_[w],10);S>=m&&delete this._combined[S]}const E=Object.keys(this._extendedAttrs);for(let w=0;w<E.length;w++){const S=parseInt(E[w],10);S>=m&&delete this._extendedAttrs[S]}}return this.length=m,4*v*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const m=new Uint32Array(this._data.length);return m.set(this._data),this._data=m,1}return 0}fill(m,b=!1){if(b)for(let v=0;v<this.length;++v)this.isProtected(v)||this.setCell(v,m);else{this._combined={},this._extendedAttrs={};for(let v=0;v<this.length;++v)this.setCell(v,m)}}copyFrom(m){this.length!==m.length?this._data=new Uint32Array(m._data):this._data.set(m._data),this.length=m.length,this._combined={};for(const b in m._combined)this._combined[b]=m._combined[b];this._extendedAttrs={};for(const b in m._extendedAttrs)this._extendedAttrs[b]=m._extendedAttrs[b];this.isWrapped=m.isWrapped}clone(){const m=new g(0);m._data=new Uint32Array(this._data),m.length=this.length;for(const b in this._combined)m._combined[b]=this._combined[b];for(const b in this._extendedAttrs)m._extendedAttrs[b]=this._extendedAttrs[b];return m.isWrapped=this.isWrapped,m}getTrimmedLength(){for(let m=this.length-1;m>=0;--m)if(4194303&this._data[3*m+0])return m+(this._data[3*m+0]>>22);return 0}getNoBgTrimmedLength(){for(let m=this.length-1;m>=0;--m)if(4194303&this._data[3*m+0]||50331648&this._data[3*m+2])return m+(this._data[3*m+0]>>22);return 0}copyCellsFrom(m,b,v,_,E){const w=m._data;if(E)for(let k=_-1;k>=0;k--){for(let x=0;x<3;x++)this._data[3*(v+k)+x]=w[3*(b+k)+x];268435456&w[3*(b+k)+2]&&(this._extendedAttrs[v+k]=m._extendedAttrs[b+k])}else for(let k=0;k<_;k++){for(let x=0;x<3;x++)this._data[3*(v+k)+x]=w[3*(b+k)+x];268435456&w[3*(b+k)+2]&&(this._extendedAttrs[v+k]=m._extendedAttrs[b+k])}const S=Object.keys(m._combined);for(let k=0;k<S.length;k++){const x=parseInt(S[k],10);x>=b&&(this._combined[x-b+v]=m._combined[x])}}translateToString(m,b,v,_){b=b??0,v=v??this.length,m&&(v=Math.min(v,this.getTrimmedLength())),_&&(_.length=0);let E="";for(;b<v;){const w=this._data[3*b+0],S=2097151&w,k=2097152&w?this._combined[b]:S?(0,h.stringFromCodePoint)(S):d.WHITESPACE_CELL_CHAR;if(E+=k,_)for(let x=0;x<k.length;++x)_.push(b);b+=w>>22||1}return _&&_.push(b),E}}a.BufferLine=g},4841:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.getRangeLength=void 0,a.getRangeLength=function(l,c){if(l.start.y>l.end.y)throw new Error(`Buffer range end (${l.end.x}, ${l.end.y}) cannot be before start (${l.start.x}, ${l.start.y})`);return c*(l.end.y-l.start.y)+(l.end.x-l.start.x+1)}},4634:(o,a)=>{function l(c,u,d){if(u===c.length-1)return c[u].getTrimmedLength();const h=!c[u].hasContent(d-1)&&c[u].getWidth(d-1)===1,f=c[u+1].getWidth(0)===2;return h&&f?d-1:d}Object.defineProperty(a,"__esModule",{value:!0}),a.getWrappedLineTrimmedLength=a.reflowSmallerGetNewLineLengths=a.reflowLargerApplyNewLayout=a.reflowLargerCreateNewLayout=a.reflowLargerGetLinesToRemove=void 0,a.reflowLargerGetLinesToRemove=function(c,u,d,h,f){const g=[];for(let y=0;y<c.length-1;y++){let m=y,b=c.get(++m);if(!b.isWrapped)continue;const v=[c.get(y)];for(;m<c.length&&b.isWrapped;)v.push(b),b=c.get(++m);if(h>=y&&h<m){y+=v.length-1;continue}let _=0,E=l(v,_,u),w=1,S=0;for(;w<v.length;){const x=l(v,w,u),I=x-S,R=d-E,C=Math.min(I,R);v[_].copyCellsFrom(v[w],S,E,C,!1),E+=C,E===d&&(_++,E=0),S+=C,S===x&&(w++,S=0),E===0&&_!==0&&v[_-1].getWidth(d-1)===2&&(v[_].copyCellsFrom(v[_-1],d-1,E++,1,!1),v[_-1].setCell(d-1,f))}v[_].replaceCells(E,d,f);let k=0;for(let x=v.length-1;x>0&&(x>_||v[x].getTrimmedLength()===0);x--)k++;k>0&&(g.push(y+v.length-k),g.push(k)),y+=v.length-1}return g},a.reflowLargerCreateNewLayout=function(c,u){const d=[];let h=0,f=u[h],g=0;for(let y=0;y<c.length;y++)if(f===y){const m=u[++h];c.onDeleteEmitter.fire({index:y-g,amount:m}),y+=m-1,g+=m,f=u[++h]}else d.push(y);return{layout:d,countRemoved:g}},a.reflowLargerApplyNewLayout=function(c,u){const d=[];for(let h=0;h<u.length;h++)d.push(c.get(u[h]));for(let h=0;h<d.length;h++)c.set(h,d[h]);c.length=u.length},a.reflowSmallerGetNewLineLengths=function(c,u,d){const h=[],f=c.map((b,v)=>l(c,v,u)).reduce((b,v)=>b+v);let g=0,y=0,m=0;for(;m<f;){if(f-m<d){h.push(f-m);break}g+=d;const b=l(c,y,u);g>b&&(g-=b,y++);const v=c[y].getWidth(g-1)===2;v&&g--;const _=v?d-1:d;h.push(_),m+=_}return h},a.getWrappedLineTrimmedLength=l},5295:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferSet=void 0;const c=l(8460),u=l(844),d=l(9092);class h extends u.Disposable{constructor(g,y){super(),this._optionsService=g,this._bufferService=y,this._onBufferActivate=this.register(new c.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new d.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new d.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(g){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(g),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(g,y){this._normal.resize(g,y),this._alt.resize(g,y),this.setupTabStops(g)}setupTabStops(g){this._normal.setupTabStops(g),this._alt.setupTabStops(g)}}a.BufferSet=h},511:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CellData=void 0;const c=l(482),u=l(643),d=l(3734);class h extends d.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new d.ExtendedAttrs,this.combinedData=""}static fromCharData(g){const y=new h;return y.setFromCharData(g),y}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,c.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(g){this.fg=g[u.CHAR_DATA_ATTR_INDEX],this.bg=0;let y=!1;if(g[u.CHAR_DATA_CHAR_INDEX].length>2)y=!0;else if(g[u.CHAR_DATA_CHAR_INDEX].length===2){const m=g[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=m&&m<=56319){const b=g[u.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=b&&b<=57343?this.content=1024*(m-55296)+b-56320+65536|g[u.CHAR_DATA_WIDTH_INDEX]<<22:y=!0}else y=!0}else this.content=g[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|g[u.CHAR_DATA_WIDTH_INDEX]<<22;y&&(this.combinedData=g[u.CHAR_DATA_CHAR_INDEX],this.content=2097152|g[u.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}a.CellData=h},643:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WHITESPACE_CELL_CODE=a.WHITESPACE_CELL_WIDTH=a.WHITESPACE_CELL_CHAR=a.NULL_CELL_CODE=a.NULL_CELL_WIDTH=a.NULL_CELL_CHAR=a.CHAR_DATA_CODE_INDEX=a.CHAR_DATA_WIDTH_INDEX=a.CHAR_DATA_CHAR_INDEX=a.CHAR_DATA_ATTR_INDEX=a.DEFAULT_EXT=a.DEFAULT_ATTR=a.DEFAULT_COLOR=void 0,a.DEFAULT_COLOR=0,a.DEFAULT_ATTR=256|a.DEFAULT_COLOR<<9,a.DEFAULT_EXT=0,a.CHAR_DATA_ATTR_INDEX=0,a.CHAR_DATA_CHAR_INDEX=1,a.CHAR_DATA_WIDTH_INDEX=2,a.CHAR_DATA_CODE_INDEX=3,a.NULL_CELL_CHAR="",a.NULL_CELL_WIDTH=1,a.NULL_CELL_CODE=0,a.WHITESPACE_CELL_CHAR=" ",a.WHITESPACE_CELL_WIDTH=1,a.WHITESPACE_CELL_CODE=32},4863:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Marker=void 0;const c=l(8460),u=l(844);class d{get id(){return this._id}constructor(f){this.line=f,this.isDisposed=!1,this._disposables=[],this._id=d._nextId++,this._onDispose=this.register(new c.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,u.disposeArray)(this._disposables),this._disposables.length=0)}register(f){return this._disposables.push(f),f}}a.Marker=d,d._nextId=1},7116:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DEFAULT_CHARSET=a.CHARSETS=void 0,a.CHARSETS={},a.DEFAULT_CHARSET=a.CHARSETS.B,a.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},a.CHARSETS.A={"#":""},a.CHARSETS.B=void 0,a.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},a.CHARSETS.C=a.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},a.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},a.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},a.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},a.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},a.CHARSETS.E=a.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},a.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},a.CHARSETS.H=a.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},a.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(o,a)=>{var l,c,u;Object.defineProperty(a,"__esModule",{value:!0}),a.C1_ESCAPED=a.C1=a.C0=void 0,function(d){d.NUL="\0",d.SOH="",d.STX="",d.ETX="",d.EOT="",d.ENQ="",d.ACK="",d.BEL="\x07",d.BS="\b",d.HT="	",d.LF=`
`,d.VT="\v",d.FF="\f",d.CR="\r",d.SO="",d.SI="",d.DLE="",d.DC1="",d.DC2="",d.DC3="",d.DC4="",d.NAK="",d.SYN="",d.ETB="",d.CAN="",d.EM="",d.SUB="",d.ESC="\x1B",d.FS="",d.GS="",d.RS="",d.US="",d.SP=" ",d.DEL=""}(l||(a.C0=l={})),function(d){d.PAD="",d.HOP="",d.BPH="",d.NBH="",d.IND="",d.NEL="",d.SSA="",d.ESA="",d.HTS="",d.HTJ="",d.VTS="",d.PLD="",d.PLU="",d.RI="",d.SS2="",d.SS3="",d.DCS="",d.PU1="",d.PU2="",d.STS="",d.CCH="",d.MW="",d.SPA="",d.EPA="",d.SOS="",d.SGCI="",d.SCI="",d.CSI="",d.ST="",d.OSC="",d.PM="",d.APC=""}(c||(a.C1=c={})),function(d){d.ST=`${l.ESC}\\`}(u||(a.C1_ESCAPED=u={}))},7399:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.evaluateKeyboardEvent=void 0;const c=l(2584),u={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};a.evaluateKeyboardEvent=function(d,h,f,g){const y={type:0,cancel:!1,key:void 0},m=(d.shiftKey?1:0)|(d.altKey?2:0)|(d.ctrlKey?4:0)|(d.metaKey?8:0);switch(d.keyCode){case 0:d.key==="UIKeyInputUpArrow"?y.key=h?c.C0.ESC+"OA":c.C0.ESC+"[A":d.key==="UIKeyInputLeftArrow"?y.key=h?c.C0.ESC+"OD":c.C0.ESC+"[D":d.key==="UIKeyInputRightArrow"?y.key=h?c.C0.ESC+"OC":c.C0.ESC+"[C":d.key==="UIKeyInputDownArrow"&&(y.key=h?c.C0.ESC+"OB":c.C0.ESC+"[B");break;case 8:y.key=d.ctrlKey?"\b":c.C0.DEL,d.altKey&&(y.key=c.C0.ESC+y.key);break;case 9:if(d.shiftKey){y.key=c.C0.ESC+"[Z";break}y.key=c.C0.HT,y.cancel=!0;break;case 13:y.key=d.altKey?c.C0.ESC+c.C0.CR:c.C0.CR,y.cancel=!0;break;case 27:y.key=c.C0.ESC,d.altKey&&(y.key=c.C0.ESC+c.C0.ESC),y.cancel=!0;break;case 37:if(d.metaKey)break;m?(y.key=c.C0.ESC+"[1;"+(m+1)+"D",y.key===c.C0.ESC+"[1;3D"&&(y.key=c.C0.ESC+(f?"b":"[1;5D"))):y.key=h?c.C0.ESC+"OD":c.C0.ESC+"[D";break;case 39:if(d.metaKey)break;m?(y.key=c.C0.ESC+"[1;"+(m+1)+"C",y.key===c.C0.ESC+"[1;3C"&&(y.key=c.C0.ESC+(f?"f":"[1;5C"))):y.key=h?c.C0.ESC+"OC":c.C0.ESC+"[C";break;case 38:if(d.metaKey)break;m?(y.key=c.C0.ESC+"[1;"+(m+1)+"A",f||y.key!==c.C0.ESC+"[1;3A"||(y.key=c.C0.ESC+"[1;5A")):y.key=h?c.C0.ESC+"OA":c.C0.ESC+"[A";break;case 40:if(d.metaKey)break;m?(y.key=c.C0.ESC+"[1;"+(m+1)+"B",f||y.key!==c.C0.ESC+"[1;3B"||(y.key=c.C0.ESC+"[1;5B")):y.key=h?c.C0.ESC+"OB":c.C0.ESC+"[B";break;case 45:d.shiftKey||d.ctrlKey||(y.key=c.C0.ESC+"[2~");break;case 46:y.key=m?c.C0.ESC+"[3;"+(m+1)+"~":c.C0.ESC+"[3~";break;case 36:y.key=m?c.C0.ESC+"[1;"+(m+1)+"H":h?c.C0.ESC+"OH":c.C0.ESC+"[H";break;case 35:y.key=m?c.C0.ESC+"[1;"+(m+1)+"F":h?c.C0.ESC+"OF":c.C0.ESC+"[F";break;case 33:d.shiftKey?y.type=2:d.ctrlKey?y.key=c.C0.ESC+"[5;"+(m+1)+"~":y.key=c.C0.ESC+"[5~";break;case 34:d.shiftKey?y.type=3:d.ctrlKey?y.key=c.C0.ESC+"[6;"+(m+1)+"~":y.key=c.C0.ESC+"[6~";break;case 112:y.key=m?c.C0.ESC+"[1;"+(m+1)+"P":c.C0.ESC+"OP";break;case 113:y.key=m?c.C0.ESC+"[1;"+(m+1)+"Q":c.C0.ESC+"OQ";break;case 114:y.key=m?c.C0.ESC+"[1;"+(m+1)+"R":c.C0.ESC+"OR";break;case 115:y.key=m?c.C0.ESC+"[1;"+(m+1)+"S":c.C0.ESC+"OS";break;case 116:y.key=m?c.C0.ESC+"[15;"+(m+1)+"~":c.C0.ESC+"[15~";break;case 117:y.key=m?c.C0.ESC+"[17;"+(m+1)+"~":c.C0.ESC+"[17~";break;case 118:y.key=m?c.C0.ESC+"[18;"+(m+1)+"~":c.C0.ESC+"[18~";break;case 119:y.key=m?c.C0.ESC+"[19;"+(m+1)+"~":c.C0.ESC+"[19~";break;case 120:y.key=m?c.C0.ESC+"[20;"+(m+1)+"~":c.C0.ESC+"[20~";break;case 121:y.key=m?c.C0.ESC+"[21;"+(m+1)+"~":c.C0.ESC+"[21~";break;case 122:y.key=m?c.C0.ESC+"[23;"+(m+1)+"~":c.C0.ESC+"[23~";break;case 123:y.key=m?c.C0.ESC+"[24;"+(m+1)+"~":c.C0.ESC+"[24~";break;default:if(!d.ctrlKey||d.shiftKey||d.altKey||d.metaKey)if(f&&!g||!d.altKey||d.metaKey)!f||d.altKey||d.ctrlKey||d.shiftKey||!d.metaKey?d.key&&!d.ctrlKey&&!d.altKey&&!d.metaKey&&d.keyCode>=48&&d.key.length===1?y.key=d.key:d.key&&d.ctrlKey&&(d.key==="_"&&(y.key=c.C0.US),d.key==="@"&&(y.key=c.C0.NUL)):d.keyCode===65&&(y.type=1);else{const b=u[d.keyCode],v=b?.[d.shiftKey?1:0];if(v)y.key=c.C0.ESC+v;else if(d.keyCode>=65&&d.keyCode<=90){const _=d.ctrlKey?d.keyCode-64:d.keyCode+32;let E=String.fromCharCode(_);d.shiftKey&&(E=E.toUpperCase()),y.key=c.C0.ESC+E}else if(d.keyCode===32)y.key=c.C0.ESC+(d.ctrlKey?c.C0.NUL:" ");else if(d.key==="Dead"&&d.code.startsWith("Key")){let _=d.code.slice(3,4);d.shiftKey||(_=_.toLowerCase()),y.key=c.C0.ESC+_,y.cancel=!0}}else d.keyCode>=65&&d.keyCode<=90?y.key=String.fromCharCode(d.keyCode-64):d.keyCode===32?y.key=c.C0.NUL:d.keyCode>=51&&d.keyCode<=55?y.key=String.fromCharCode(d.keyCode-51+27):d.keyCode===56?y.key=c.C0.DEL:d.keyCode===219?y.key=c.C0.ESC:d.keyCode===220?y.key=c.C0.FS:d.keyCode===221&&(y.key=c.C0.GS)}return y}},482:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Utf8ToUtf32=a.StringToUtf32=a.utf32ToString=a.stringFromCodePoint=void 0,a.stringFromCodePoint=function(l){return l>65535?(l-=65536,String.fromCharCode(55296+(l>>10))+String.fromCharCode(l%1024+56320)):String.fromCharCode(l)},a.utf32ToString=function(l,c=0,u=l.length){let d="";for(let h=c;h<u;++h){let f=l[h];f>65535?(f-=65536,d+=String.fromCharCode(55296+(f>>10))+String.fromCharCode(f%1024+56320)):d+=String.fromCharCode(f)}return d},a.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(l,c){const u=l.length;if(!u)return 0;let d=0,h=0;if(this._interim){const f=l.charCodeAt(h++);56320<=f&&f<=57343?c[d++]=1024*(this._interim-55296)+f-56320+65536:(c[d++]=this._interim,c[d++]=f),this._interim=0}for(let f=h;f<u;++f){const g=l.charCodeAt(f);if(55296<=g&&g<=56319){if(++f>=u)return this._interim=g,d;const y=l.charCodeAt(f);56320<=y&&y<=57343?c[d++]=1024*(g-55296)+y-56320+65536:(c[d++]=g,c[d++]=y)}else g!==65279&&(c[d++]=g)}return d}},a.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(l,c){const u=l.length;if(!u)return 0;let d,h,f,g,y=0,m=0,b=0;if(this.interim[0]){let E=!1,w=this.interim[0];w&=(224&w)==192?31:(240&w)==224?15:7;let S,k=0;for(;(S=63&this.interim[++k])&&k<4;)w<<=6,w|=S;const x=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,I=x-k;for(;b<I;){if(b>=u)return 0;if(S=l[b++],(192&S)!=128){b--,E=!0;break}this.interim[k++]=S,w<<=6,w|=63&S}E||(x===2?w<128?b--:c[y++]=w:x===3?w<2048||w>=55296&&w<=57343||w===65279||(c[y++]=w):w<65536||w>1114111||(c[y++]=w)),this.interim.fill(0)}const v=u-4;let _=b;for(;_<u;){for(;!(!(_<v)||128&(d=l[_])||128&(h=l[_+1])||128&(f=l[_+2])||128&(g=l[_+3]));)c[y++]=d,c[y++]=h,c[y++]=f,c[y++]=g,_+=4;if(d=l[_++],d<128)c[y++]=d;else if((224&d)==192){if(_>=u)return this.interim[0]=d,y;if(h=l[_++],(192&h)!=128){_--;continue}if(m=(31&d)<<6|63&h,m<128){_--;continue}c[y++]=m}else if((240&d)==224){if(_>=u)return this.interim[0]=d,y;if(h=l[_++],(192&h)!=128){_--;continue}if(_>=u)return this.interim[0]=d,this.interim[1]=h,y;if(f=l[_++],(192&f)!=128){_--;continue}if(m=(15&d)<<12|(63&h)<<6|63&f,m<2048||m>=55296&&m<=57343||m===65279)continue;c[y++]=m}else if((248&d)==240){if(_>=u)return this.interim[0]=d,y;if(h=l[_++],(192&h)!=128){_--;continue}if(_>=u)return this.interim[0]=d,this.interim[1]=h,y;if(f=l[_++],(192&f)!=128){_--;continue}if(_>=u)return this.interim[0]=d,this.interim[1]=h,this.interim[2]=f,y;if(g=l[_++],(192&g)!=128){_--;continue}if(m=(7&d)<<18|(63&h)<<12|(63&f)<<6|63&g,m<65536||m>1114111)continue;c[y++]=m}}return y}}},225:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeV6=void 0;const c=l(1480),u=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],d=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let h;a.UnicodeV6=class{constructor(){if(this.version="6",!h){h=new Uint8Array(65536),h.fill(1),h[0]=0,h.fill(0,1,32),h.fill(0,127,160),h.fill(2,4352,4448),h[9001]=2,h[9002]=2,h.fill(2,11904,42192),h[12351]=1,h.fill(2,44032,55204),h.fill(2,63744,64256),h.fill(2,65040,65050),h.fill(2,65072,65136),h.fill(2,65280,65377),h.fill(2,65504,65511);for(let f=0;f<u.length;++f)h.fill(0,u[f][0],u[f][1]+1)}}wcwidth(f){return f<32?0:f<127?1:f<65536?h[f]:function(g,y){let m,b=0,v=y.length-1;if(g<y[0][0]||g>y[v][1])return!1;for(;v>=b;)if(m=b+v>>1,g>y[m][1])b=m+1;else{if(!(g<y[m][0]))return!0;v=m-1}return!1}(f,d)?0:f>=131072&&f<=196605||f>=196608&&f<=262141?2:1}charProperties(f,g){let y=this.wcwidth(f),m=y===0&&g!==0;if(m){const b=c.UnicodeService.extractWidth(g);b===0?m=!1:b>y&&(y=b)}return c.UnicodeService.createPropertyValue(0,y,m)}}},5981:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WriteBuffer=void 0;const c=l(8460),u=l(844);class d extends u.Disposable{constructor(f){super(),this._action=f,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new c.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(f,g){if(g!==void 0&&this._syncCalls>g)return void(this._syncCalls=0);if(this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let y;for(this._isSyncWriting=!0;y=this._writeBuffer.shift();){this._action(y);const m=this._callbacks.shift();m&&m()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(f,g){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(g),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(g)}_innerWrite(f=0,g=!0){const y=f||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const m=this._writeBuffer[this._bufferOffset],b=this._action(m,g);if(b){const _=E=>Date.now()-y>=12?setTimeout(()=>this._innerWrite(0,E)):this._innerWrite(y,E);return void b.catch(E=>(queueMicrotask(()=>{throw E}),Promise.resolve(!1))).then(_)}const v=this._callbacks[this._bufferOffset];if(v&&v(),this._bufferOffset++,this._pendingData-=m.length,Date.now()-y>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}a.WriteBuffer=d},5941:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.toRgbString=a.parseColor=void 0;const l=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,c=/^[\da-f]+$/;function u(d,h){const f=d.toString(16),g=f.length<2?"0"+f:f;switch(h){case 4:return f[0];case 8:return g;case 12:return(g+g).slice(0,3);default:return g+g}}a.parseColor=function(d){if(!d)return;let h=d.toLowerCase();if(h.indexOf("rgb:")===0){h=h.slice(4);const f=l.exec(h);if(f){const g=f[1]?15:f[4]?255:f[7]?4095:65535;return[Math.round(parseInt(f[1]||f[4]||f[7]||f[10],16)/g*255),Math.round(parseInt(f[2]||f[5]||f[8]||f[11],16)/g*255),Math.round(parseInt(f[3]||f[6]||f[9]||f[12],16)/g*255)]}}else if(h.indexOf("#")===0&&(h=h.slice(1),c.exec(h)&&[3,6,9,12].includes(h.length))){const f=h.length/3,g=[0,0,0];for(let y=0;y<3;++y){const m=parseInt(h.slice(f*y,f*y+f),16);g[y]=f===1?m<<4:f===2?m:f===3?m>>4:m>>8}return g}},a.toRgbString=function(d,h=16){const[f,g,y]=d;return`rgb:${u(f,h)}/${u(g,h)}/${u(y,h)}`}},5770:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PAYLOAD_LIMIT=void 0,a.PAYLOAD_LIMIT=1e7},6351:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DcsHandler=a.DcsParser=void 0;const c=l(482),u=l(8742),d=l(5770),h=[];a.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=h,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=h}registerHandler(g,y){this._handlers[g]===void 0&&(this._handlers[g]=[]);const m=this._handlers[g];return m.push(y),{dispose:()=>{const b=m.indexOf(y);b!==-1&&m.splice(b,1)}}}clearHandler(g){this._handlers[g]&&delete this._handlers[g]}setHandlerFallback(g){this._handlerFb=g}reset(){if(this._active.length)for(let g=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;g>=0;--g)this._active[g].unhook(!1);this._stack.paused=!1,this._active=h,this._ident=0}hook(g,y){if(this.reset(),this._ident=g,this._active=this._handlers[g]||h,this._active.length)for(let m=this._active.length-1;m>=0;m--)this._active[m].hook(y);else this._handlerFb(this._ident,"HOOK",y)}put(g,y,m){if(this._active.length)for(let b=this._active.length-1;b>=0;b--)this._active[b].put(g,y,m);else this._handlerFb(this._ident,"PUT",(0,c.utf32ToString)(g,y,m))}unhook(g,y=!0){if(this._active.length){let m=!1,b=this._active.length-1,v=!1;if(this._stack.paused&&(b=this._stack.loopPosition-1,m=y,v=this._stack.fallThrough,this._stack.paused=!1),!v&&m===!1){for(;b>=0&&(m=this._active[b].unhook(g),m!==!0);b--)if(m instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=b,this._stack.fallThrough=!1,m;b--}for(;b>=0;b--)if(m=this._active[b].unhook(!1),m instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=b,this._stack.fallThrough=!0,m}else this._handlerFb(this._ident,"UNHOOK",g);this._active=h,this._ident=0}};const f=new u.Params;f.addParam(0),a.DcsHandler=class{constructor(g){this._handler=g,this._data="",this._params=f,this._hitLimit=!1}hook(g){this._params=g.length>1||g.params[0]?g.clone():f,this._data="",this._hitLimit=!1}put(g,y,m){this._hitLimit||(this._data+=(0,c.utf32ToString)(g,y,m),this._data.length>d.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(g){let y=!1;if(this._hitLimit)y=!1;else if(g&&(y=this._handler(this._data,this._params),y instanceof Promise))return y.then(m=>(this._params=f,this._data="",this._hitLimit=!1,m));return this._params=f,this._data="",this._hitLimit=!1,y}}},2015:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.EscapeSequenceParser=a.VT500_TRANSITION_TABLE=a.TransitionTable=void 0;const c=l(844),u=l(8742),d=l(6242),h=l(6351);class f{constructor(b){this.table=new Uint8Array(b)}setDefault(b,v){this.table.fill(b<<4|v)}add(b,v,_,E){this.table[v<<8|b]=_<<4|E}addMany(b,v,_,E){for(let w=0;w<b.length;w++)this.table[v<<8|b[w]]=_<<4|E}}a.TransitionTable=f;const g=160;a.VT500_TRANSITION_TABLE=function(){const m=new f(4095),b=Array.apply(null,Array(256)).map((k,x)=>x),v=(k,x)=>b.slice(k,x),_=v(32,127),E=v(0,24);E.push(25),E.push.apply(E,v(28,32));const w=v(0,14);let S;for(S in m.setDefault(1,0),m.addMany(_,0,2,0),w)m.addMany([24,26,153,154],S,3,0),m.addMany(v(128,144),S,3,0),m.addMany(v(144,152),S,3,0),m.add(156,S,0,0),m.add(27,S,11,1),m.add(157,S,4,8),m.addMany([152,158,159],S,0,7),m.add(155,S,11,3),m.add(144,S,11,9);return m.addMany(E,0,3,0),m.addMany(E,1,3,1),m.add(127,1,0,1),m.addMany(E,8,0,8),m.addMany(E,3,3,3),m.add(127,3,0,3),m.addMany(E,4,3,4),m.add(127,4,0,4),m.addMany(E,6,3,6),m.addMany(E,5,3,5),m.add(127,5,0,5),m.addMany(E,2,3,2),m.add(127,2,0,2),m.add(93,1,4,8),m.addMany(_,8,5,8),m.add(127,8,5,8),m.addMany([156,27,24,26,7],8,6,0),m.addMany(v(28,32),8,0,8),m.addMany([88,94,95],1,0,7),m.addMany(_,7,0,7),m.addMany(E,7,0,7),m.add(156,7,0,0),m.add(127,7,0,7),m.add(91,1,11,3),m.addMany(v(64,127),3,7,0),m.addMany(v(48,60),3,8,4),m.addMany([60,61,62,63],3,9,4),m.addMany(v(48,60),4,8,4),m.addMany(v(64,127),4,7,0),m.addMany([60,61,62,63],4,0,6),m.addMany(v(32,64),6,0,6),m.add(127,6,0,6),m.addMany(v(64,127),6,0,0),m.addMany(v(32,48),3,9,5),m.addMany(v(32,48),5,9,5),m.addMany(v(48,64),5,0,6),m.addMany(v(64,127),5,7,0),m.addMany(v(32,48),4,9,5),m.addMany(v(32,48),1,9,2),m.addMany(v(32,48),2,9,2),m.addMany(v(48,127),2,10,0),m.addMany(v(48,80),1,10,0),m.addMany(v(81,88),1,10,0),m.addMany([89,90,92],1,10,0),m.addMany(v(96,127),1,10,0),m.add(80,1,11,9),m.addMany(E,9,0,9),m.add(127,9,0,9),m.addMany(v(28,32),9,0,9),m.addMany(v(32,48),9,9,12),m.addMany(v(48,60),9,8,10),m.addMany([60,61,62,63],9,9,10),m.addMany(E,11,0,11),m.addMany(v(32,128),11,0,11),m.addMany(v(28,32),11,0,11),m.addMany(E,10,0,10),m.add(127,10,0,10),m.addMany(v(28,32),10,0,10),m.addMany(v(48,60),10,8,10),m.addMany([60,61,62,63],10,0,11),m.addMany(v(32,48),10,9,12),m.addMany(E,12,0,12),m.add(127,12,0,12),m.addMany(v(28,32),12,0,12),m.addMany(v(32,48),12,9,12),m.addMany(v(48,64),12,0,11),m.addMany(v(64,127),12,12,13),m.addMany(v(64,127),10,12,13),m.addMany(v(64,127),9,12,13),m.addMany(E,13,13,13),m.addMany(_,13,13,13),m.add(127,13,0,13),m.addMany([27,156,24,26],13,14,0),m.add(g,0,2,0),m.add(g,8,5,8),m.add(g,6,0,6),m.add(g,11,0,11),m.add(g,13,13,13),m}();class y extends c.Disposable{constructor(b=a.VT500_TRANSITION_TABLE){super(),this._transitions=b,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new u.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(v,_,E)=>{},this._executeHandlerFb=v=>{},this._csiHandlerFb=(v,_)=>{},this._escHandlerFb=v=>{},this._errorHandlerFb=v=>v,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,c.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new d.OscParser),this._dcsParser=this.register(new h.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(b,v=[64,126]){let _=0;if(b.prefix){if(b.prefix.length>1)throw new Error("only one byte as prefix supported");if(_=b.prefix.charCodeAt(0),_&&60>_||_>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(b.intermediates){if(b.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let w=0;w<b.intermediates.length;++w){const S=b.intermediates.charCodeAt(w);if(32>S||S>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");_<<=8,_|=S}}if(b.final.length!==1)throw new Error("final must be a single byte");const E=b.final.charCodeAt(0);if(v[0]>E||E>v[1])throw new Error(`final must be in range ${v[0]} .. ${v[1]}`);return _<<=8,_|=E,_}identToString(b){const v=[];for(;b;)v.push(String.fromCharCode(255&b)),b>>=8;return v.reverse().join("")}setPrintHandler(b){this._printHandler=b}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(b,v){const _=this._identifier(b,[48,126]);this._escHandlers[_]===void 0&&(this._escHandlers[_]=[]);const E=this._escHandlers[_];return E.push(v),{dispose:()=>{const w=E.indexOf(v);w!==-1&&E.splice(w,1)}}}clearEscHandler(b){this._escHandlers[this._identifier(b,[48,126])]&&delete this._escHandlers[this._identifier(b,[48,126])]}setEscHandlerFallback(b){this._escHandlerFb=b}setExecuteHandler(b,v){this._executeHandlers[b.charCodeAt(0)]=v}clearExecuteHandler(b){this._executeHandlers[b.charCodeAt(0)]&&delete this._executeHandlers[b.charCodeAt(0)]}setExecuteHandlerFallback(b){this._executeHandlerFb=b}registerCsiHandler(b,v){const _=this._identifier(b);this._csiHandlers[_]===void 0&&(this._csiHandlers[_]=[]);const E=this._csiHandlers[_];return E.push(v),{dispose:()=>{const w=E.indexOf(v);w!==-1&&E.splice(w,1)}}}clearCsiHandler(b){this._csiHandlers[this._identifier(b)]&&delete this._csiHandlers[this._identifier(b)]}setCsiHandlerFallback(b){this._csiHandlerFb=b}registerDcsHandler(b,v){return this._dcsParser.registerHandler(this._identifier(b),v)}clearDcsHandler(b){this._dcsParser.clearHandler(this._identifier(b))}setDcsHandlerFallback(b){this._dcsParser.setHandlerFallback(b)}registerOscHandler(b,v){return this._oscParser.registerHandler(b,v)}clearOscHandler(b){this._oscParser.clearHandler(b)}setOscHandlerFallback(b){this._oscParser.setHandlerFallback(b)}setErrorHandler(b){this._errorHandler=b}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(b,v,_,E,w){this._parseStack.state=b,this._parseStack.handlers=v,this._parseStack.handlerPos=_,this._parseStack.transition=E,this._parseStack.chunkPos=w}parse(b,v,_){let E,w=0,S=0,k=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,k=this._parseStack.chunkPos+1;else{if(_===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const x=this._parseStack.handlers;let I=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(_===!1&&I>-1){for(;I>=0&&(E=x[I](this._params),E!==!0);I--)if(E instanceof Promise)return this._parseStack.handlerPos=I,E}this._parseStack.handlers=[];break;case 4:if(_===!1&&I>-1){for(;I>=0&&(E=x[I](),E!==!0);I--)if(E instanceof Promise)return this._parseStack.handlerPos=I,E}this._parseStack.handlers=[];break;case 6:if(w=b[this._parseStack.chunkPos],E=this._dcsParser.unhook(w!==24&&w!==26,_),E)return E;w===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(w=b[this._parseStack.chunkPos],E=this._oscParser.end(w!==24&&w!==26,_),E)return E;w===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,k=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let x=k;x<v;++x){switch(w=b[x],S=this._transitions.table[this.currentState<<8|(w<160?w:g)],S>>4){case 2:for(let O=x+1;;++O){if(O>=v||(w=b[O])<32||w>126&&w<g){this._printHandler(b,x,O),x=O-1;break}if(++O>=v||(w=b[O])<32||w>126&&w<g){this._printHandler(b,x,O),x=O-1;break}if(++O>=v||(w=b[O])<32||w>126&&w<g){this._printHandler(b,x,O),x=O-1;break}if(++O>=v||(w=b[O])<32||w>126&&w<g){this._printHandler(b,x,O),x=O-1;break}}break;case 3:this._executeHandlers[w]?this._executeHandlers[w]():this._executeHandlerFb(w),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:x,code:w,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const I=this._csiHandlers[this._collect<<8|w];let R=I?I.length-1:-1;for(;R>=0&&(E=I[R](this._params),E!==!0);R--)if(E instanceof Promise)return this._preserveStack(3,I,R,S,x),E;R<0&&this._csiHandlerFb(this._collect<<8|w,this._params),this.precedingJoinState=0;break;case 8:do switch(w){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(w-48)}while(++x<v&&(w=b[x])>47&&w<60);x--;break;case 9:this._collect<<=8,this._collect|=w;break;case 10:const C=this._escHandlers[this._collect<<8|w];let N=C?C.length-1:-1;for(;N>=0&&(E=C[N](),E!==!0);N--)if(E instanceof Promise)return this._preserveStack(4,C,N,S,x),E;N<0&&this._escHandlerFb(this._collect<<8|w),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|w,this._params);break;case 13:for(let O=x+1;;++O)if(O>=v||(w=b[O])===24||w===26||w===27||w>127&&w<g){this._dcsParser.put(b,x,O),x=O-1;break}break;case 14:if(E=this._dcsParser.unhook(w!==24&&w!==26),E)return this._preserveStack(6,[],0,S,x),E;w===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let O=x+1;;O++)if(O>=v||(w=b[O])<32||w>127&&w<g){this._oscParser.put(b,x,O),x=O-1;break}break;case 6:if(E=this._oscParser.end(w!==24&&w!==26),E)return this._preserveStack(5,[],0,S,x),E;w===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&S}}}a.EscapeSequenceParser=y},6242:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.OscHandler=a.OscParser=void 0;const c=l(5770),u=l(482),d=[];a.OscParser=class{constructor(){this._state=0,this._active=d,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(h,f){this._handlers[h]===void 0&&(this._handlers[h]=[]);const g=this._handlers[h];return g.push(f),{dispose:()=>{const y=g.indexOf(f);y!==-1&&g.splice(y,1)}}}clearHandler(h){this._handlers[h]&&delete this._handlers[h]}setHandlerFallback(h){this._handlerFb=h}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=d}reset(){if(this._state===2)for(let h=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;h>=0;--h)this._active[h].end(!1);this._stack.paused=!1,this._active=d,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||d,this._active.length)for(let h=this._active.length-1;h>=0;h--)this._active[h].start();else this._handlerFb(this._id,"START")}_put(h,f,g){if(this._active.length)for(let y=this._active.length-1;y>=0;y--)this._active[y].put(h,f,g);else this._handlerFb(this._id,"PUT",(0,u.utf32ToString)(h,f,g))}start(){this.reset(),this._state=1}put(h,f,g){if(this._state!==3){if(this._state===1)for(;f<g;){const y=h[f++];if(y===59){this._state=2,this._start();break}if(y<48||57<y)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+y-48}this._state===2&&g-f>0&&this._put(h,f,g)}}end(h,f=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let g=!1,y=this._active.length-1,m=!1;if(this._stack.paused&&(y=this._stack.loopPosition-1,g=f,m=this._stack.fallThrough,this._stack.paused=!1),!m&&g===!1){for(;y>=0&&(g=this._active[y].end(h),g!==!0);y--)if(g instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=y,this._stack.fallThrough=!1,g;y--}for(;y>=0;y--)if(g=this._active[y].end(!1),g instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=y,this._stack.fallThrough=!0,g}else this._handlerFb(this._id,"END",h);this._active=d,this._id=-1,this._state=0}}},a.OscHandler=class{constructor(h){this._handler=h,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(h,f,g){this._hitLimit||(this._data+=(0,u.utf32ToString)(h,f,g),this._data.length>c.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(h){let f=!1;if(this._hitLimit)f=!1;else if(h&&(f=this._handler(this._data),f instanceof Promise))return f.then(g=>(this._data="",this._hitLimit=!1,g));return this._data="",this._hitLimit=!1,f}}},8742:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Params=void 0;const l=2147483647;class c{static fromArray(d){const h=new c;if(!d.length)return h;for(let f=Array.isArray(d[0])?1:0;f<d.length;++f){const g=d[f];if(Array.isArray(g))for(let y=0;y<g.length;++y)h.addSubParam(g[y]);else h.addParam(g)}return h}constructor(d=32,h=32){if(this.maxLength=d,this.maxSubParamsLength=h,h>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(d),this.length=0,this._subParams=new Int32Array(h),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(d),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const d=new c(this.maxLength,this.maxSubParamsLength);return d.params.set(this.params),d.length=this.length,d._subParams.set(this._subParams),d._subParamsLength=this._subParamsLength,d._subParamsIdx.set(this._subParamsIdx),d._rejectDigits=this._rejectDigits,d._rejectSubDigits=this._rejectSubDigits,d._digitIsSub=this._digitIsSub,d}toArray(){const d=[];for(let h=0;h<this.length;++h){d.push(this.params[h]);const f=this._subParamsIdx[h]>>8,g=255&this._subParamsIdx[h];g-f>0&&d.push(Array.prototype.slice.call(this._subParams,f,g))}return d}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(d){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(d<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=d>l?l:d}}addSubParam(d){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(d<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=d>l?l:d,this._subParamsIdx[this.length-1]++}}hasSubParams(d){return(255&this._subParamsIdx[d])-(this._subParamsIdx[d]>>8)>0}getSubParams(d){const h=this._subParamsIdx[d]>>8,f=255&this._subParamsIdx[d];return f-h>0?this._subParams.subarray(h,f):null}getSubParamsAll(){const d={};for(let h=0;h<this.length;++h){const f=this._subParamsIdx[h]>>8,g=255&this._subParamsIdx[h];g-f>0&&(d[h]=this._subParams.slice(f,g))}return d}addDigit(d){let h;if(this._rejectDigits||!(h=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const f=this._digitIsSub?this._subParams:this.params,g=f[h-1];f[h-1]=~g?Math.min(10*g+d,l):d}}a.Params=c},5741:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.AddonManager=void 0,a.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let l=this._addons.length-1;l>=0;l--)this._addons[l].instance.dispose()}loadAddon(l,c){const u={instance:c,dispose:c.dispose,isDisposed:!1};this._addons.push(u),c.dispose=()=>this._wrappedAddonDispose(u),c.activate(l)}_wrappedAddonDispose(l){if(l.isDisposed)return;let c=-1;for(let u=0;u<this._addons.length;u++)if(this._addons[u]===l){c=u;break}if(c===-1)throw new Error("Could not dispose an addon that has not been loaded");l.isDisposed=!0,l.dispose.apply(l.instance),this._addons.splice(c,1)}}},8771:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferApiView=void 0;const c=l(3785),u=l(511);a.BufferApiView=class{constructor(d,h){this._buffer=d,this.type=h}init(d){return this._buffer=d,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(d){const h=this._buffer.lines.get(d);if(h)return new c.BufferLineApiView(h)}getNullCell(){return new u.CellData}}},3785:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferLineApiView=void 0;const c=l(511);a.BufferLineApiView=class{constructor(u){this._line=u}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(u,d){if(!(u<0||u>=this._line.length))return d?(this._line.loadCell(u,d),d):this._line.loadCell(u,new c.CellData)}translateToString(u,d,h){return this._line.translateToString(u,d,h)}}},8285:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferNamespaceApi=void 0;const c=l(8771),u=l(8460),d=l(844);class h extends d.Disposable{constructor(g){super(),this._core=g,this._onBufferChange=this.register(new u.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new c.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new c.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}a.BufferNamespaceApi=h},7975:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ParserApi=void 0,a.ParserApi=class{constructor(l){this._core=l}registerCsiHandler(l,c){return this._core.registerCsiHandler(l,u=>c(u.toArray()))}addCsiHandler(l,c){return this.registerCsiHandler(l,c)}registerDcsHandler(l,c){return this._core.registerDcsHandler(l,(u,d)=>c(u,d.toArray()))}addDcsHandler(l,c){return this.registerDcsHandler(l,c)}registerEscHandler(l,c){return this._core.registerEscHandler(l,c)}addEscHandler(l,c){return this.registerEscHandler(l,c)}registerOscHandler(l,c){return this._core.registerOscHandler(l,c)}addOscHandler(l,c){return this.registerOscHandler(l,c)}}},7090:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeApi=void 0,a.UnicodeApi=class{constructor(l){this._core=l}register(l){this._core.unicodeService.register(l)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(l){this._core.unicodeService.activeVersion=l}}},744:function(o,a,l){var c=this&&this.__decorate||function(m,b,v,_){var E,w=arguments.length,S=w<3?b:_===null?_=Object.getOwnPropertyDescriptor(b,v):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(m,b,v,_);else for(var k=m.length-1;k>=0;k--)(E=m[k])&&(S=(w<3?E(S):w>3?E(b,v,S):E(b,v))||S);return w>3&&S&&Object.defineProperty(b,v,S),S},u=this&&this.__param||function(m,b){return function(v,_){b(v,_,m)}};Object.defineProperty(a,"__esModule",{value:!0}),a.BufferService=a.MINIMUM_ROWS=a.MINIMUM_COLS=void 0;const d=l(8460),h=l(844),f=l(5295),g=l(2585);a.MINIMUM_COLS=2,a.MINIMUM_ROWS=1;let y=a.BufferService=class extends h.Disposable{get buffer(){return this.buffers.active}constructor(m){super(),this.isUserScrolling=!1,this._onResize=this.register(new d.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new d.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(m.rawOptions.cols||0,a.MINIMUM_COLS),this.rows=Math.max(m.rawOptions.rows||0,a.MINIMUM_ROWS),this.buffers=this.register(new f.BufferSet(m,this))}resize(m,b){this.cols=m,this.rows=b,this.buffers.resize(m,b),this._onResize.fire({cols:m,rows:b})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(m,b=!1){const v=this.buffer;let _;_=this._cachedBlankLine,_&&_.length===this.cols&&_.getFg(0)===m.fg&&_.getBg(0)===m.bg||(_=v.getBlankLine(m,b),this._cachedBlankLine=_),_.isWrapped=b;const E=v.ybase+v.scrollTop,w=v.ybase+v.scrollBottom;if(v.scrollTop===0){const S=v.lines.isFull;w===v.lines.length-1?S?v.lines.recycle().copyFrom(_):v.lines.push(_.clone()):v.lines.splice(w+1,0,_.clone()),S?this.isUserScrolling&&(v.ydisp=Math.max(v.ydisp-1,0)):(v.ybase++,this.isUserScrolling||v.ydisp++)}else{const S=w-E+1;v.lines.shiftElements(E+1,S-1,-1),v.lines.set(w,_.clone())}this.isUserScrolling||(v.ydisp=v.ybase),this._onScroll.fire(v.ydisp)}scrollLines(m,b,v){const _=this.buffer;if(m<0){if(_.ydisp===0)return;this.isUserScrolling=!0}else m+_.ydisp>=_.ybase&&(this.isUserScrolling=!1);const E=_.ydisp;_.ydisp=Math.max(Math.min(_.ydisp+m,_.ybase),0),E!==_.ydisp&&(b||this._onScroll.fire(_.ydisp))}};a.BufferService=y=c([u(0,g.IOptionsService)],y)},7994:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CharsetService=void 0,a.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(l){this.glevel=l,this.charset=this._charsets[l]}setgCharset(l,c){this._charsets[l]=c,this.glevel===l&&(this.charset=c)}}},1753:function(o,a,l){var c=this&&this.__decorate||function(_,E,w,S){var k,x=arguments.length,I=x<3?E:S===null?S=Object.getOwnPropertyDescriptor(E,w):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(_,E,w,S);else for(var R=_.length-1;R>=0;R--)(k=_[R])&&(I=(x<3?k(I):x>3?k(E,w,I):k(E,w))||I);return x>3&&I&&Object.defineProperty(E,w,I),I},u=this&&this.__param||function(_,E){return function(w,S){E(w,S,_)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CoreMouseService=void 0;const d=l(2585),h=l(8460),f=l(844),g={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:_=>_.button!==4&&_.action===1&&(_.ctrl=!1,_.alt=!1,_.shift=!1,!0)},VT200:{events:19,restrict:_=>_.action!==32},DRAG:{events:23,restrict:_=>_.action!==32||_.button!==3},ANY:{events:31,restrict:_=>!0}};function y(_,E){let w=(_.ctrl?16:0)|(_.shift?4:0)|(_.alt?8:0);return _.button===4?(w|=64,w|=_.action):(w|=3&_.button,4&_.button&&(w|=64),8&_.button&&(w|=128),_.action===32?w|=32:_.action!==0||E||(w|=3)),w}const m=String.fromCharCode,b={DEFAULT:_=>{const E=[y(_,!1)+32,_.col+32,_.row+32];return E[0]>255||E[1]>255||E[2]>255?"":`\x1B[M${m(E[0])}${m(E[1])}${m(E[2])}`},SGR:_=>{const E=_.action===0&&_.button!==4?"m":"M";return`\x1B[<${y(_,!0)};${_.col};${_.row}${E}`},SGR_PIXELS:_=>{const E=_.action===0&&_.button!==4?"m":"M";return`\x1B[<${y(_,!0)};${_.x};${_.y}${E}`}};let v=a.CoreMouseService=class extends f.Disposable{constructor(_,E){super(),this._bufferService=_,this._coreService=E,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new h.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const w of Object.keys(g))this.addProtocol(w,g[w]);for(const w of Object.keys(b))this.addEncoding(w,b[w]);this.reset()}addProtocol(_,E){this._protocols[_]=E}addEncoding(_,E){this._encodings[_]=E}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(_){if(!this._protocols[_])throw new Error(`unknown protocol "${_}"`);this._activeProtocol=_,this._onProtocolChange.fire(this._protocols[_].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(_){if(!this._encodings[_])throw new Error(`unknown encoding "${_}"`);this._activeEncoding=_}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(_){if(_.col<0||_.col>=this._bufferService.cols||_.row<0||_.row>=this._bufferService.rows||_.button===4&&_.action===32||_.button===3&&_.action!==32||_.button!==4&&(_.action===2||_.action===3)||(_.col++,_.row++,_.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,_,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(_))return!1;const E=this._encodings[this._activeEncoding](_);return E&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(E):this._coreService.triggerDataEvent(E,!0)),this._lastEvent=_,!0}explainEvents(_){return{down:!!(1&_),up:!!(2&_),drag:!!(4&_),move:!!(8&_),wheel:!!(16&_)}}_equalEvents(_,E,w){if(w){if(_.x!==E.x||_.y!==E.y)return!1}else if(_.col!==E.col||_.row!==E.row)return!1;return _.button===E.button&&_.action===E.action&&_.ctrl===E.ctrl&&_.alt===E.alt&&_.shift===E.shift}};a.CoreMouseService=v=c([u(0,d.IBufferService),u(1,d.ICoreService)],v)},6975:function(o,a,l){var c=this&&this.__decorate||function(v,_,E,w){var S,k=arguments.length,x=k<3?_:w===null?w=Object.getOwnPropertyDescriptor(_,E):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(v,_,E,w);else for(var I=v.length-1;I>=0;I--)(S=v[I])&&(x=(k<3?S(x):k>3?S(_,E,x):S(_,E))||x);return k>3&&x&&Object.defineProperty(_,E,x),x},u=this&&this.__param||function(v,_){return function(E,w){_(E,w,v)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CoreService=void 0;const d=l(1439),h=l(8460),f=l(844),g=l(2585),y=Object.freeze({insertMode:!1}),m=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let b=a.CoreService=class extends f.Disposable{constructor(v,_,E){super(),this._bufferService=v,this._logService=_,this._optionsService=E,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new h.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new h.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new h.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new h.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,d.clone)(y),this.decPrivateModes=(0,d.clone)(m)}reset(){this.modes=(0,d.clone)(y),this.decPrivateModes=(0,d.clone)(m)}triggerDataEvent(v,_=!1){if(this._optionsService.rawOptions.disableStdin)return;const E=this._bufferService.buffer;_&&this._optionsService.rawOptions.scrollOnUserInput&&E.ybase!==E.ydisp&&this._onRequestScrollToBottom.fire(),_&&this._onUserInput.fire(),this._logService.debug(`sending data "${v}"`,()=>v.split("").map(w=>w.charCodeAt(0))),this._onData.fire(v)}triggerBinaryEvent(v){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${v}"`,()=>v.split("").map(_=>_.charCodeAt(0))),this._onBinary.fire(v))}};a.CoreService=b=c([u(0,g.IBufferService),u(1,g.ILogService),u(2,g.IOptionsService)],b)},9074:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DecorationService=void 0;const c=l(8055),u=l(8460),d=l(844),h=l(6106);let f=0,g=0;class y extends d.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new h.SortedList(v=>v?.marker.line),this._onDecorationRegistered=this.register(new u.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new u.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,d.toDisposable)(()=>this.reset()))}registerDecoration(v){if(v.marker.isDisposed)return;const _=new m(v);if(_){const E=_.marker.onDispose(()=>_.dispose());_.onDispose(()=>{_&&(this._decorations.delete(_)&&this._onDecorationRemoved.fire(_),E.dispose())}),this._decorations.insert(_),this._onDecorationRegistered.fire(_)}return _}reset(){for(const v of this._decorations.values())v.dispose();this._decorations.clear()}*getDecorationsAtCell(v,_,E){let w=0,S=0;for(const k of this._decorations.getKeyIterator(_))w=k.options.x??0,S=w+(k.options.width??1),v>=w&&v<S&&(!E||(k.options.layer??"bottom")===E)&&(yield k)}forEachDecorationAtCell(v,_,E,w){this._decorations.forEachByKey(_,S=>{f=S.options.x??0,g=f+(S.options.width??1),v>=f&&v<g&&(!E||(S.options.layer??"bottom")===E)&&w(S)})}}a.DecorationService=y;class m extends d.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=c.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=c.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(v){super(),this.options=v,this.onRenderEmitter=this.register(new u.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new u.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=v.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.InstantiationService=a.ServiceCollection=void 0;const c=l(2585),u=l(8343);class d{constructor(...f){this._entries=new Map;for(const[g,y]of f)this.set(g,y)}set(f,g){const y=this._entries.get(f);return this._entries.set(f,g),y}forEach(f){for(const[g,y]of this._entries.entries())f(g,y)}has(f){return this._entries.has(f)}get(f){return this._entries.get(f)}}a.ServiceCollection=d,a.InstantiationService=class{constructor(){this._services=new d,this._services.set(c.IInstantiationService,this)}setService(h,f){this._services.set(h,f)}getService(h){return this._services.get(h)}createInstance(h,...f){const g=(0,u.getServiceDependencies)(h).sort((b,v)=>b.index-v.index),y=[];for(const b of g){const v=this._services.get(b.id);if(!v)throw new Error(`[createInstance] ${h.name} depends on UNKNOWN service ${b.id}.`);y.push(v)}const m=g.length>0?g[0].index:f.length;if(f.length!==m)throw new Error(`[createInstance] First service dependency of ${h.name} at position ${m+1} conflicts with ${f.length} static arguments`);return new h(...f,...y)}}},7866:function(o,a,l){var c=this&&this.__decorate||function(m,b,v,_){var E,w=arguments.length,S=w<3?b:_===null?_=Object.getOwnPropertyDescriptor(b,v):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(m,b,v,_);else for(var k=m.length-1;k>=0;k--)(E=m[k])&&(S=(w<3?E(S):w>3?E(b,v,S):E(b,v))||S);return w>3&&S&&Object.defineProperty(b,v,S),S},u=this&&this.__param||function(m,b){return function(v,_){b(v,_,m)}};Object.defineProperty(a,"__esModule",{value:!0}),a.traceCall=a.setTraceLogger=a.LogService=void 0;const d=l(844),h=l(2585),f={trace:h.LogLevelEnum.TRACE,debug:h.LogLevelEnum.DEBUG,info:h.LogLevelEnum.INFO,warn:h.LogLevelEnum.WARN,error:h.LogLevelEnum.ERROR,off:h.LogLevelEnum.OFF};let g,y=a.LogService=class extends d.Disposable{get logLevel(){return this._logLevel}constructor(m){super(),this._optionsService=m,this._logLevel=h.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),g=this}_updateLogLevel(){this._logLevel=f[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(m){for(let b=0;b<m.length;b++)typeof m[b]=="function"&&(m[b]=m[b]())}_log(m,b,v){this._evalLazyOptionalParams(v),m.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+b,...v)}trace(m,...b){this._logLevel<=h.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,m,b)}debug(m,...b){this._logLevel<=h.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,m,b)}info(m,...b){this._logLevel<=h.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,m,b)}warn(m,...b){this._logLevel<=h.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,m,b)}error(m,...b){this._logLevel<=h.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,m,b)}};a.LogService=y=c([u(0,h.IOptionsService)],y),a.setTraceLogger=function(m){g=m},a.traceCall=function(m,b,v){if(typeof v.value!="function")throw new Error("not supported");const _=v.value;v.value=function(...E){if(g.logLevel!==h.LogLevelEnum.TRACE)return _.apply(this,E);g.trace(`GlyphRenderer#${_.name}(${E.map(S=>JSON.stringify(S)).join(", ")})`);const w=_.apply(this,E);return g.trace(`GlyphRenderer#${_.name} return`,w),w}}},7302:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.OptionsService=a.DEFAULT_OPTIONS=void 0;const c=l(8460),u=l(844),d=l(6114);a.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:d.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const h=["normal","bold","100","200","300","400","500","600","700","800","900"];class f extends u.Disposable{constructor(y){super(),this._onOptionChange=this.register(new c.EventEmitter),this.onOptionChange=this._onOptionChange.event;const m={...a.DEFAULT_OPTIONS};for(const b in y)if(b in m)try{const v=y[b];m[b]=this._sanitizeAndValidateOption(b,v)}catch(v){console.error(v)}this.rawOptions=m,this.options={...m},this._setupOptions(),this.register((0,u.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(y,m){return this.onOptionChange(b=>{b===y&&m(this.rawOptions[y])})}onMultipleOptionChange(y,m){return this.onOptionChange(b=>{y.indexOf(b)!==-1&&m()})}_setupOptions(){const y=b=>{if(!(b in a.DEFAULT_OPTIONS))throw new Error(`No option with key "${b}"`);return this.rawOptions[b]},m=(b,v)=>{if(!(b in a.DEFAULT_OPTIONS))throw new Error(`No option with key "${b}"`);v=this._sanitizeAndValidateOption(b,v),this.rawOptions[b]!==v&&(this.rawOptions[b]=v,this._onOptionChange.fire(b))};for(const b in this.rawOptions){const v={get:y.bind(this,b),set:m.bind(this,b)};Object.defineProperty(this.options,b,v)}}_sanitizeAndValidateOption(y,m){switch(y){case"cursorStyle":if(m||(m=a.DEFAULT_OPTIONS[y]),!function(b){return b==="block"||b==="underline"||b==="bar"}(m))throw new Error(`"${m}" is not a valid value for ${y}`);break;case"wordSeparator":m||(m=a.DEFAULT_OPTIONS[y]);break;case"fontWeight":case"fontWeightBold":if(typeof m=="number"&&1<=m&&m<=1e3)break;m=h.includes(m)?m:a.DEFAULT_OPTIONS[y];break;case"cursorWidth":m=Math.floor(m);case"lineHeight":case"tabStopWidth":if(m<1)throw new Error(`${y} cannot be less than 1, value: ${m}`);break;case"minimumContrastRatio":m=Math.max(1,Math.min(21,Math.round(10*m)/10));break;case"scrollback":if((m=Math.min(m,4294967295))<0)throw new Error(`${y} cannot be less than 0, value: ${m}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(m<=0)throw new Error(`${y} cannot be less than or equal to 0, value: ${m}`);break;case"rows":case"cols":if(!m&&m!==0)throw new Error(`${y} must be numeric, value: ${m}`);break;case"windowsPty":m=m??{}}return m}}a.OptionsService=f},2660:function(o,a,l){var c=this&&this.__decorate||function(f,g,y,m){var b,v=arguments.length,_=v<3?g:m===null?m=Object.getOwnPropertyDescriptor(g,y):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(f,g,y,m);else for(var E=f.length-1;E>=0;E--)(b=f[E])&&(_=(v<3?b(_):v>3?b(g,y,_):b(g,y))||_);return v>3&&_&&Object.defineProperty(g,y,_),_},u=this&&this.__param||function(f,g){return function(y,m){g(y,m,f)}};Object.defineProperty(a,"__esModule",{value:!0}),a.OscLinkService=void 0;const d=l(2585);let h=a.OscLinkService=class{constructor(f){this._bufferService=f,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(f){const g=this._bufferService.buffer;if(f.id===void 0){const E=g.addMarker(g.ybase+g.y),w={data:f,id:this._nextId++,lines:[E]};return E.onDispose(()=>this._removeMarkerFromLink(w,E)),this._dataByLinkId.set(w.id,w),w.id}const y=f,m=this._getEntryIdKey(y),b=this._entriesWithId.get(m);if(b)return this.addLineToLink(b.id,g.ybase+g.y),b.id;const v=g.addMarker(g.ybase+g.y),_={id:this._nextId++,key:this._getEntryIdKey(y),data:y,lines:[v]};return v.onDispose(()=>this._removeMarkerFromLink(_,v)),this._entriesWithId.set(_.key,_),this._dataByLinkId.set(_.id,_),_.id}addLineToLink(f,g){const y=this._dataByLinkId.get(f);if(y&&y.lines.every(m=>m.line!==g)){const m=this._bufferService.buffer.addMarker(g);y.lines.push(m),m.onDispose(()=>this._removeMarkerFromLink(y,m))}}getLinkData(f){return this._dataByLinkId.get(f)?.data}_getEntryIdKey(f){return`${f.id};;${f.uri}`}_removeMarkerFromLink(f,g){const y=f.lines.indexOf(g);y!==-1&&(f.lines.splice(y,1),f.lines.length===0&&(f.data.id!==void 0&&this._entriesWithId.delete(f.key),this._dataByLinkId.delete(f.id)))}};a.OscLinkService=h=c([u(0,d.IBufferService)],h)},8343:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createDecorator=a.getServiceDependencies=a.serviceRegistry=void 0;const l="di$target",c="di$dependencies";a.serviceRegistry=new Map,a.getServiceDependencies=function(u){return u[c]||[]},a.createDecorator=function(u){if(a.serviceRegistry.has(u))return a.serviceRegistry.get(u);const d=function(h,f,g){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(y,m,b){m[l]===m?m[c].push({id:y,index:b}):(m[c]=[{id:y,index:b}],m[l]=m)})(d,h,g)};return d.toString=()=>u,a.serviceRegistry.set(u,d),d}},2585:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.IDecorationService=a.IUnicodeService=a.IOscLinkService=a.IOptionsService=a.ILogService=a.LogLevelEnum=a.IInstantiationService=a.ICharsetService=a.ICoreService=a.ICoreMouseService=a.IBufferService=void 0;const c=l(8343);var u;a.IBufferService=(0,c.createDecorator)("BufferService"),a.ICoreMouseService=(0,c.createDecorator)("CoreMouseService"),a.ICoreService=(0,c.createDecorator)("CoreService"),a.ICharsetService=(0,c.createDecorator)("CharsetService"),a.IInstantiationService=(0,c.createDecorator)("InstantiationService"),function(d){d[d.TRACE=0]="TRACE",d[d.DEBUG=1]="DEBUG",d[d.INFO=2]="INFO",d[d.WARN=3]="WARN",d[d.ERROR=4]="ERROR",d[d.OFF=5]="OFF"}(u||(a.LogLevelEnum=u={})),a.ILogService=(0,c.createDecorator)("LogService"),a.IOptionsService=(0,c.createDecorator)("OptionsService"),a.IOscLinkService=(0,c.createDecorator)("OscLinkService"),a.IUnicodeService=(0,c.createDecorator)("UnicodeService"),a.IDecorationService=(0,c.createDecorator)("DecorationService")},1480:(o,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeService=void 0;const c=l(8460),u=l(225);class d{static extractShouldJoin(f){return(1&f)!=0}static extractWidth(f){return f>>1&3}static extractCharKind(f){return f>>3}static createPropertyValue(f,g,y=!1){return(16777215&f)<<3|(3&g)<<1|(y?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new c.EventEmitter,this.onChange=this._onChange.event;const f=new u.UnicodeV6;this.register(f),this._active=f.version,this._activeProvider=f}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(f){if(!this._providers[f])throw new Error(`unknown Unicode version "${f}"`);this._active=f,this._activeProvider=this._providers[f],this._onChange.fire(f)}register(f){this._providers[f.version]=f}wcwidth(f){return this._activeProvider.wcwidth(f)}getStringCellWidth(f){let g=0,y=0;const m=f.length;for(let b=0;b<m;++b){let v=f.charCodeAt(b);if(55296<=v&&v<=56319){if(++b>=m)return g+this.wcwidth(v);const w=f.charCodeAt(b);56320<=w&&w<=57343?v=1024*(v-55296)+w-56320+65536:g+=this.wcwidth(w)}const _=this.charProperties(v,y);let E=d.extractWidth(_);d.extractShouldJoin(_)&&(E-=d.extractWidth(y)),g+=E,y=_}return g}charProperties(f,g){return this._activeProvider.charProperties(f,g)}}a.UnicodeService=d}},r={};function s(o){var a=r[o];if(a!==void 0)return a.exports;var l=r[o]={exports:{}};return n[o].call(l.exports,l,l.exports,s),l.exports}var i={};return(()=>{var o=i;Object.defineProperty(o,"__esModule",{value:!0}),o.Terminal=void 0;const a=s(9042),l=s(3236),c=s(844),u=s(5741),d=s(8285),h=s(7975),f=s(7090),g=["cols","rows"];class y extends c.Disposable{constructor(b){super(),this._core=this.register(new l.Terminal(b)),this._addonManager=this.register(new u.AddonManager),this._publicOptions={...this._core.options};const v=E=>this._core.options[E],_=(E,w)=>{this._checkReadonlyOptions(E),this._core.options[E]=w};for(const E in this._core.options){const w={get:v.bind(this,E),set:_.bind(this,E)};Object.defineProperty(this._publicOptions,E,w)}}_checkReadonlyOptions(b){if(g.includes(b))throw new Error(`Option "${b}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new h.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new f.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new d.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const b=this._core.coreService.decPrivateModes;let v="none";switch(this._core.coreMouseService.activeProtocol){case"X10":v="x10";break;case"VT200":v="vt200";break;case"DRAG":v="drag";break;case"ANY":v="any"}return{applicationCursorKeysMode:b.applicationCursorKeys,applicationKeypadMode:b.applicationKeypad,bracketedPasteMode:b.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:v,originMode:b.origin,reverseWraparoundMode:b.reverseWraparound,sendFocusMode:b.sendFocus,wraparoundMode:b.wraparound}}get options(){return this._publicOptions}set options(b){for(const v in b)this._publicOptions[v]=b[v]}blur(){this._core.blur()}focus(){this._core.focus()}input(b,v=!0){this._core.input(b,v)}resize(b,v){this._verifyIntegers(b,v),this._core.resize(b,v)}open(b){this._core.open(b)}attachCustomKeyEventHandler(b){this._core.attachCustomKeyEventHandler(b)}attachCustomWheelEventHandler(b){this._core.attachCustomWheelEventHandler(b)}registerLinkProvider(b){return this._core.registerLinkProvider(b)}registerCharacterJoiner(b){return this._checkProposedApi(),this._core.registerCharacterJoiner(b)}deregisterCharacterJoiner(b){this._checkProposedApi(),this._core.deregisterCharacterJoiner(b)}registerMarker(b=0){return this._verifyIntegers(b),this._core.registerMarker(b)}registerDecoration(b){return this._checkProposedApi(),this._verifyPositiveIntegers(b.x??0,b.width??0,b.height??0),this._core.registerDecoration(b)}hasSelection(){return this._core.hasSelection()}select(b,v,_){this._verifyIntegers(b,v,_),this._core.select(b,v,_)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(b,v){this._verifyIntegers(b,v),this._core.selectLines(b,v)}dispose(){super.dispose()}scrollLines(b){this._verifyIntegers(b),this._core.scrollLines(b)}scrollPages(b){this._verifyIntegers(b),this._core.scrollPages(b)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(b){this._verifyIntegers(b),this._core.scrollToLine(b)}clear(){this._core.clear()}write(b,v){this._core.write(b,v)}writeln(b,v){this._core.write(b),this._core.write(`\r
`,v)}paste(b){this._core.paste(b)}refresh(b,v){this._verifyIntegers(b,v),this._core.refresh(b,v)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(b){this._addonManager.loadAddon(this,b)}static get strings(){return a}_verifyIntegers(...b){for(const v of b)if(v===1/0||isNaN(v)||v%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...b){for(const v of b)if(v&&(v===1/0||isNaN(v)||v%1!=0||v<0))throw new Error("This API only accepts positive integers")}}o.Terminal=y})(),i})())})(Ole);var ost=Ole.exports;const ast=getComputedStyle(document.documentElement),lr=t=>ast.getPropertyValue(t)||void 0;function v3(t){return{cursor:lr("--bolt-elements-terminal-cursorColor"),cursorAccent:lr("--bolt-elements-terminal-cursorColorAccent"),foreground:lr("--bolt-elements-terminal-textColor"),background:lr("--bolt-elements-terminal-backgroundColor"),selectionBackground:lr("--bolt-elements-terminal-selection-backgroundColor"),selectionForeground:lr("--bolt-elements-terminal-selection-textColor"),selectionInactiveBackground:lr("--bolt-elements-terminal-selection-backgroundColorInactive"),black:lr("--bolt-elements-terminal-color-black"),red:lr("--bolt-elements-terminal-color-red"),green:lr("--bolt-elements-terminal-color-green"),yellow:lr("--bolt-elements-terminal-color-yellow"),blue:lr("--bolt-elements-terminal-color-blue"),magenta:lr("--bolt-elements-terminal-color-magenta"),cyan:lr("--bolt-elements-terminal-color-cyan"),white:lr("--bolt-elements-terminal-color-white"),brightBlack:lr("--bolt-elements-terminal-color-brightBlack"),brightRed:lr("--bolt-elements-terminal-color-brightRed"),brightGreen:lr("--bolt-elements-terminal-color-brightGreen"),brightYellow:lr("--bolt-elements-terminal-color-brightYellow"),brightBlue:lr("--bolt-elements-terminal-color-brightBlue"),brightMagenta:lr("--bolt-elements-terminal-color-brightMagenta"),brightCyan:lr("--bolt-elements-terminal-color-brightCyan"),brightWhite:lr("--bolt-elements-terminal-color-brightWhite"),...t}}const lst=Di("Terminal"),Rz=T.memo(T.forwardRef(({className:t,theme:e,readonly:n,id:r,onTerminalReady:s,onTerminalResize:i},o)=>{const a=T.useRef(null),l=T.useRef();return T.useEffect(()=>{const c=a.current,u=new sst.FitAddon,d=new ist.WebLinksAddon,h=new ost.Terminal({cursorBlink:!0,convertEol:!0,disableStdin:n,theme:v3(n?{cursor:"#00000000"}:{}),fontSize:12,fontFamily:"Menlo, courier-new, courier, monospace"});l.current=h,h.loadAddon(u),h.loadAddon(d),h.open(c);const f=new ResizeObserver(()=>{u.fit(),i?.(h.cols,h.rows)});return f.observe(c),lst.debug(`Attach [${r}]`),s?.(h),()=>{f.disconnect(),h.dispose()}},[]),T.useEffect(()=>{const c=l.current;c.options.theme=v3(n?{cursor:"#00000000"}:{}),c.options.disableStdin=n},[e,n]),T.useImperativeHandle(o,()=>({reloadStyles:()=>{const c=l.current;c.options.theme=v3(n?{cursor:"#00000000"}:{})}}),[]),p.jsx("div",{className:t,ref:a})})),cst=Di("Terminal"),Lz=3,TI=25,ust=T.memo(()=>{const t=It(St.showTerminal),e=It(Ly),n=T.useRef([]),r=T.useRef(null),s=T.useRef(!1),[i,o]=T.useState(0),[a,l]=T.useState(1),c=()=>{a<Lz&&(l(a+1),o(a))};return T.useEffect(()=>{const{current:u}=r;if(!u)return;const d=u.isCollapsed();!t&&!d?u.collapse():t&&d&&u.resize(TI),s.current=!1},[t]),T.useEffect(()=>{const u=_se.on("toggleTerminal",()=>{s.current=!0}),d=Ly.subscribe(()=>{for(const h of Object.values(n.current))h?.reloadStyles()});return()=>{u(),d()}},[]),p.jsx(Sy,{ref:r,defaultSize:t?TI:0,minSize:10,collapsible:!0,onExpand:()=>{s.current||St.toggleTerminal(!0)},onCollapse:()=>{s.current||St.toggleTerminal(!1)},children:p.jsx("div",{className:"h-full",children:p.jsxs("div",{className:"bg-bolt-elements-terminals-background h-full flex flex-col",children:[p.jsxs("div",{className:"flex items-center bg-bolt-elements-background-depth-2 border-y border-bolt-elements-borderColor gap-1.5 min-h-[34px] p-2",children:[Array.from({length:a+1},(u,d)=>{const h=i===d;return p.jsx(ut.Fragment,{children:d==0?p.jsxs("button",{className:Pe("flex items-center text-sm cursor-pointer gap-1.5 px-3 py-2 h-full whitespace-nowrap rounded-full",{"bg-bolt-elements-terminals-buttonBackground text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary":h,"bg-bolt-elements-background-depth-2 text-bolt-elements-textSecondary hover:bg-bolt-elements-terminals-buttonBackground":!h}),onClick:()=>o(d),children:[p.jsx("div",{className:"i-ph:terminal-window-duotone text-lg"}),"Ada Terminal"]},d):p.jsx(ut.Fragment,{children:p.jsxs("button",{className:Pe("flex items-center text-sm cursor-pointer gap-1.5 px-3 py-2 h-full whitespace-nowrap rounded-full",{"bg-bolt-elements-terminals-buttonBackground text-bolt-elements-textPrimary":h,"bg-bolt-elements-background-depth-2 text-bolt-elements-textSecondary hover:bg-bolt-elements-terminals-buttonBackground":!h}),onClick:()=>o(d),children:[p.jsx("div",{className:"i-ph:terminal-window-duotone text-lg"}),"Terminal ",a>1&&d]},d)})},d)}),a<Lz&&p.jsx(dr,{icon:"i-ph:plus",size:"md",onClick:c}),p.jsx(dr,{className:"ml-auto",icon:"i-ph:caret-down",title:"Close",size:"md",onClick:()=>St.toggleTerminal(!1)})]}),Array.from({length:a+1},(u,d)=>{const h=i===d;return cst.debug(`Starting bolt terminal [${d}]`),d==0?p.jsx(Rz,{id:`terminal_${d}`,className:Pe("h-full overflow-hidden",{hidden:!h}),ref:f=>{n.current.push(f)},onTerminalReady:f=>St.attachBoltTerminal(f),onTerminalResize:(f,g)=>St.onTerminalResize(f,g),theme:e},d):p.jsx(Rz,{id:`terminal_${d}`,className:Pe("h-full overflow-hidden",{hidden:!h}),ref:f=>{n.current.push(f)},onTerminalReady:f=>St.attachTerminal(f),onTerminalResize:(f,g)=>St.onTerminalResize(f,g),theme:e},d)})]})})})}),dst=100-TI,hst={tabSize:2},fst=T.memo(({files:t,unsavedFiles:e,editorDocument:n,selectedFile:r,isStreaming:s,fileHistory:i,onFileSelect:o,onEditorChange:a,onEditorScroll:l,onFileSave:c,onFileReset:u})=>{Ag.trace("EditorPanel");const d=It(Ly),h=It(St.showTerminal),f=T.useMemo(()=>{if(n)return n.filePath.split("/")},[n]),g=T.useMemo(()=>n!==void 0&&e?.has(n.filePath),[n,e]);return p.jsxs(kI,{direction:"vertical",children:[p.jsx(Sy,{defaultSize:h?dst:100,minSize:20,children:p.jsxs(kI,{direction:"horizontal",children:[p.jsx(Sy,{defaultSize:20,minSize:10,collapsible:!0,children:p.jsxs("div",{className:"flex flex-col border-r border-bolt-elements-borderColor h-full",children:[p.jsxs(Pz,{children:[p.jsx("div",{className:"i-ph:tree-structure-duotone shrink-0"}),"Files"]}),p.jsx(Nle,{className:"h-full",files:t,hideRoot:!0,unsavedFiles:e,fileHistory:i,rootFolder:Zc,selectedFile:r,onFileSelect:o})]})}),p.jsx(CI,{}),p.jsxs(Sy,{className:"flex flex-col",defaultSize:80,minSize:20,children:[p.jsx(Pz,{className:"overflow-x-auto",children:f?.length&&p.jsxs("div",{className:"flex items-center flex-1 text-sm",children:[p.jsx(rst,{pathSegments:f,files:t,onFileSelect:o}),g&&p.jsxs("div",{className:"flex gap-1 ml-auto -mr-1.5",children:[p.jsxs(pm,{onClick:c,children:[p.jsx("div",{className:"i-ph:floppy-disk-duotone"}),"Save"]}),p.jsxs(pm,{onClick:u,children:[p.jsx("div",{className:"i-ph:clock-counter-clockwise-duotone"}),"Reset"]})]})]})}),p.jsx("div",{className:"h-full flex-1 overflow-hidden",children:p.jsx(Qae,{theme:d,editable:!s&&n!==void 0,settings:hst,doc:n,autoFocusOnDocumentChange:!brt(),onScroll:l,onChange:a,onSave:c})})]})]})}),p.jsx(CI,{}),p.jsx(ust,{})]})}),pst=T.memo(({activePreviewIndex:t,setActivePreviewIndex:e,isDropdownOpen:n,setIsDropdownOpen:r,setHasSelectedPreview:s,previews:i})=>{const o=T.useRef(null),a=i.map((l,c)=>({...l,index:c})).sort((l,c)=>l.port-c.port);return T.useEffect(()=>{const l=c=>{o.current&&!o.current.contains(c.target)&&r(!1)};return n?window.addEventListener("mousedown",l):window.removeEventListener("mousedown",l),()=>{window.removeEventListener("mousedown",l)}},[n]),p.jsxs("div",{className:"relative z-port-dropdown",ref:o,children:[p.jsx(dr,{icon:"i-ph:plug",onClick:()=>r(!n)}),n&&p.jsxs("div",{className:"absolute right-0 mt-2 bg-bolt-elements-background-depth-2 border border-bolt-elements-borderColor rounded shadow-sm min-w-[140px] dropdown-animation",children:[p.jsx("div",{className:"px-4 py-2 border-b border-bolt-elements-borderColor text-sm font-semibold text-bolt-elements-textPrimary",children:"Ports"}),a.map(l=>p.jsx("div",{className:"flex items-center px-4 py-2 cursor-pointer hover:bg-bolt-elements-item-backgroundActive",onClick:()=>{e(l.index),r(!1),s(!0)},children:p.jsx("span",{className:t===l.index?"text-bolt-elements-item-contentAccent":"text-bolt-elements-item-contentDefault group-hover:text-bolt-elements-item-contentActive",children:l.port})},l.port))]})]})}),mst=T.memo(({isSelectionMode:t,setIsSelectionMode:e,containerRef:n})=>{const[r,s]=T.useState(!1),[i,o]=T.useState(null),[a,l]=T.useState(null),c=T.useRef(null),u=T.useRef(null);T.useEffect(()=>()=>{u.current&&(u.current.pause(),u.current.srcObject=null,u.current.remove(),u.current=null),c.current&&(c.current.getTracks().forEach(y=>y.stop()),c.current=null)},[]);const d=async()=>{if(!c.current)try{const y=await navigator.mediaDevices.getDisplayMedia({audio:!1,video:{displaySurface:"window",preferCurrentTab:!0,surfaceSwitching:"include",systemAudio:"exclude"}});if(y.addEventListener("inactive",()=>{u.current&&(u.current.pause(),u.current.srcObject=null,u.current.remove(),u.current=null),c.current&&(c.current.getTracks().forEach(m=>m.stop()),c.current=null),e(!1),o(null),l(null),s(!1)}),c.current=y,!u.current){const m=document.createElement("video");m.style.opacity="0",m.style.position="fixed",m.style.pointerEvents="none",m.style.zIndex="-1",document.body.appendChild(m),u.current=m}u.current.srcObject=y,await u.current.play()}catch(y){console.error("Failed to initialize stream:",y),e(!1),ze.error("Failed to initialize screen capture")}return c.current},h=T.useCallback(async()=>{if(!(!t||!i||!a||!n.current)){s(!0);try{if(!await d()||!u.current)return;await new Promise(J=>setTimeout(J,300));const m=document.createElement("canvas");m.width=u.current.videoWidth,m.height=u.current.videoHeight;const b=m.getContext("2d");if(!b)throw new Error("Failed to get temporary canvas context");b.drawImage(u.current,0,0);const v=u.current.videoWidth/window.innerWidth,_=u.current.videoHeight/window.innerHeight,E=window.scrollX,w=window.scrollY+40,S=n.current.getBoundingClientRect(),k=-9,x=-14,I=Math.round((S.left+Math.min(i.x,a.x)+E+k)*v),R=Math.round((S.top+Math.min(i.y,a.y)+w+x)*_),C=Math.round(Math.abs(a.x-i.x)*v),N=Math.round(Math.abs(a.y-i.y)*_),O=document.createElement("canvas");O.width=Math.round(Math.abs(a.x-i.x)),O.height=Math.round(Math.abs(a.y-i.y));const P=O.getContext("2d");if(!P)throw new Error("Failed to get canvas context");P.drawImage(m,I,R,C,N,0,0,O.width,O.height);const $=await new Promise((J,Z)=>{O.toBlob(M=>{M?J(M):Z(new Error("Failed to create blob"))},"image/png")}),ee=new FileReader;ee.onload=J=>{const Z=J.target?.result;if(document.querySelector("textarea")){const F=window.__BOLT_SET_UPLOADED_FILES__,G=window.__BOLT_SET_IMAGE_DATA_LIST__,D=window.__BOLT_UPLOADED_FILES__||[],j=window.__BOLT_IMAGE_DATA_LIST__||[];if(F&&G){const V=new File([$],"screenshot.png",{type:"image/png"});F([...D,V]),G([...j,Z]),ze.success("Screenshot captured and added to chat")}else ze.error("Could not add screenshot to chat")}},ee.readAsDataURL($)}catch(y){console.error("Failed to capture screenshot:",y),ze.error("Failed to capture screenshot"),c.current&&(c.current.getTracks().forEach(m=>m.stop()),c.current=null)}finally{s(!1),o(null),l(null),e(!1)}}},[t,i,a,n,e]),f=T.useCallback(y=>{if(y.preventDefault(),y.stopPropagation(),!t)return;const m=y.currentTarget.getBoundingClientRect(),b=y.clientX-m.left,v=y.clientY-m.top;o({x:b,y:v}),l({x:b,y:v})},[t]),g=T.useCallback(y=>{if(y.preventDefault(),y.stopPropagation(),!t||!i)return;const m=y.currentTarget.getBoundingClientRect(),b=y.clientX-m.left,v=y.clientY-m.top;l({x:b,y:v})},[t,i]);return t?p.jsx("div",{className:"absolute inset-0 cursor-crosshair",onMouseDown:f,onMouseMove:g,onMouseUp:h,onMouseLeave:()=>{i&&o(null)},style:{backgroundColor:r?"transparent":"rgba(0, 0, 0, 0.1)",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"all",opacity:r?0:1,zIndex:50,transition:"opacity 0.1s ease-in-out"},children:i&&a&&!r&&p.jsx("div",{className:"absolute border-2 border-blue-500 bg-blue-200 bg-opacity-20",style:{left:Math.min(i.x,a.x),top:Math.min(i.y,a.y),width:Math.abs(a.x-i.x),height:Math.abs(a.y-i.y)}})}):null}),Oz=[{name:"Mobile",width:375,height:667,icon:"i-ph:device-mobile"},{name:"Tablet",width:768,height:1024,icon:"i-ph:device-tablet"},{name:"Laptop",width:1366,height:768,icon:"i-ph:laptop"},{name:"Desktop",width:1920,height:1080,icon:"i-ph:monitor"}],gst=T.memo(()=>{const t=T.useRef(null),e=T.useRef(null),n=T.useRef(null),[r,s]=T.useState(0),[i,o]=T.useState(!1),[a,l]=T.useState(!1),[c,u]=T.useState(!1),d=T.useRef(!1),h=It(St.previews),f=h[r],[g,y]=T.useState(""),[m,b]=T.useState(),[v,_]=T.useState(!1),[E,w]=T.useState(!1),[S,k]=T.useState(37.5),x=T.useRef({isResizing:!1,side:null,startX:0,startWidthPercent:37.5,windowWidth:window.innerWidth}),I=2,[R,C]=T.useState(!1),[N,O]=T.useState(Oz[0]);T.useEffect(()=>{if(!f){y(""),b(void 0);return}const{baseUrl:V}=f;y(V),b(V)},[f]);const P=T.useCallback(V=>{if(!f)return!1;const{baseUrl:W}=f;return V===W?!0:V.startsWith(W)?["/","?","#"].includes(V.charAt(W.length)):!1},[f]),$=T.useCallback((V,W,re,te)=>W.port<te[V].port?re:V,[]);T.useEffect(()=>{if(h.length>1&&!d.current){const V=h.reduce($,0);s(V)}},[h,$]);const ee=()=>{t.current&&(t.current.src=t.current.src)},J=async()=>{!a&&e.current?await e.current.requestFullscreen():document.fullscreenElement&&await document.exitFullscreen()};T.useEffect(()=>{const V=()=>{l(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",V),()=>{document.removeEventListener("fullscreenchange",V)}},[]);const Z=()=>{w(V=>!V)},M=(V,W)=>{E&&(document.body.style.userSelect="none",x.current.isResizing=!0,x.current.side=W,x.current.startX=V.clientX,x.current.startWidthPercent=S,x.current.windowWidth=window.innerWidth,document.addEventListener("mousemove",F),document.addEventListener("mouseup",G),V.preventDefault())},F=V=>{if(!x.current.isResizing)return;const W=V.clientX-x.current.startX,re=x.current.windowWidth,te=W/re*100*I;let Y=x.current.startWidthPercent;x.current.side==="right"?Y=x.current.startWidthPercent+te:x.current.side==="left"&&(Y=x.current.startWidthPercent-te),Y=Math.max(10,Math.min(Y,90)),k(Y)},G=()=>{x.current.isResizing=!1,x.current.side=null,document.removeEventListener("mousemove",F),document.removeEventListener("mouseup",G),document.body.style.userSelect=""};T.useEffect(()=>{const V=()=>{};return window.addEventListener("resize",V),()=>{window.removeEventListener("resize",V)}},[]);const D=()=>p.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",pointerEvents:"none"},children:p.jsx("div",{style:{color:"rgba(0,0,0,0.5)",fontSize:"10px",lineHeight:"5px",userSelect:"none",marginLeft:"1px"},children:" "})}),j=V=>{if(f?.baseUrl){const W=f.baseUrl.match(/^https?:\/\/([^.]+)\.local-credentialless\.webcontainer-api\.io/);if(W){const te=`/webcontainer/preview/${W[1]}`,Y=window.open(te,"_blank",`noopener,noreferrer,width=${V.width},height=${V.height},menubar=no,toolbar=no,location=no,status=no`);Y&&Y.focus()}else console.warn("[Preview] Invalid WebContainer URL:",f.baseUrl)}};return p.jsxs("div",{ref:e,className:`w-full h-full flex flex-col relative ${c?"fixed inset-0 z-50 bg-white":""}`,children:[i&&p.jsx("div",{className:"z-iframe-overlay w-full h-full absolute",onClick:()=>o(!1)}),p.jsxs("div",{className:"bg-bolt-elements-background-depth-2 p-2 flex items-center gap-2",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(dr,{icon:"i-ph:arrow-clockwise",onClick:ee}),p.jsx(dr,{icon:"i-ph:selection",onClick:()=>_(!v),className:v?"bg-bolt-elements-background-depth-3":""})]}),p.jsx("div",{className:"flex-grow flex items-center gap-1 bg-bolt-elements-preview-addressBar-background border border-bolt-elements-borderColor text-bolt-elements-preview-addressBar-text rounded-full px-3 py-1 text-sm hover:bg-bolt-elements-preview-addressBar-backgroundHover hover:focus-within:bg-bolt-elements-preview-addressBar-backgroundActive focus-within:bg-bolt-elements-preview-addressBar-backgroundActive focus-within-border-bolt-elements-borderColorActive focus-within:text-bolt-elements-preview-addressBar-textActive",children:p.jsx("input",{title:"URL",ref:n,className:"w-full bg-transparent outline-none",type:"text",value:g,onChange:V=>{y(V.target.value)},onKeyDown:V=>{V.key==="Enter"&&P(g)&&(b(g),n.current&&n.current.blur())}})}),p.jsxs("div",{className:"flex items-center gap-2",children:[h.length>1&&p.jsx(pst,{activePreviewIndex:r,setActivePreviewIndex:s,isDropdownOpen:i,setHasSelectedPreview:V=>d.current=V,setIsDropdownOpen:o,previews:h}),p.jsx(dr,{icon:"i-ph:devices",onClick:Z,title:E?"Switch to Responsive Mode":"Switch to Device Mode"}),p.jsx(dr,{icon:"i-ph:layout-light",onClick:()=>u(!c),title:c?"Show Full Interface":"Show Preview Only"}),p.jsx(dr,{icon:a?"i-ph:arrows-in":"i-ph:arrows-out",onClick:J,title:a?"Exit Full Screen":"Full Screen"}),p.jsxs("div",{className:"flex items-center relative",children:[p.jsx(dr,{icon:"i-ph:arrow-square-out",onClick:()=>j(N),title:`Open Preview in ${N.name} Window`}),p.jsx(dr,{icon:"i-ph:caret-down",onClick:()=>C(!R),className:"ml-1",title:"Select Window Size"}),R&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"fixed inset-0 z-50",onClick:()=>C(!1)}),p.jsx("div",{className:"absolute right-0 top-full mt-2 z-50 min-w-[240px] bg-white dark:bg-black rounded-xl shadow-2xl border border-[#E5E7EB] dark:border-[rgba(255,255,255,0.1)] overflow-hidden",children:Oz.map(V=>p.jsxs("button",{className:"w-full px-4 py-3.5 text-left text-[#111827] dark:text-gray-300 text-sm whitespace-nowrap flex items-center gap-3 group hover:bg-[#F5EEFF] dark:hover:bg-gray-900 bg-white dark:bg-black",onClick:()=>{O(V),C(!1),j(V)},children:[p.jsx("div",{className:`${V.icon} w-5 h-5 text-[#6B7280] dark:text-gray-400 group-hover:text-[#6D28D9] dark:group-hover:text-[#6D28D9] transition-colors duration-200`}),p.jsxs("div",{className:"flex flex-col",children:[p.jsx("span",{className:"font-medium group-hover:text-[#6D28D9] dark:group-hover:text-[#6D28D9] transition-colors duration-200",children:V.name}),p.jsxs("span",{className:"text-xs text-[#6B7280] dark:text-gray-400 group-hover:text-[#6D28D9] dark:group-hover:text-[#6D28D9] transition-colors duration-200",children:[V.width,"  ",V.height]})]})]},V.name))})]})]})]})]}),p.jsx("div",{className:"flex-1 border-t border-bolt-elements-borderColor flex justify-center items-center overflow-auto",children:p.jsxs("div",{style:{width:E?`${S}%`:"100%",height:"100%",overflow:"visible",background:"var(--bolt-elements-background-depth-1)",position:"relative",display:"flex"},children:[f?p.jsxs(p.Fragment,{children:[p.jsx("iframe",{ref:t,title:"preview",className:"border-none w-full h-full bg-bolt-elements-background-depth-1",src:m,sandbox:"allow-scripts allow-forms allow-popups allow-modals allow-storage-access-by-user-activation allow-same-origin",allow:"cross-origin-isolated"}),p.jsx(mst,{isSelectionMode:v,setIsSelectionMode:_,containerRef:t})]}):p.jsx("div",{className:"flex w-full h-full justify-center items-center bg-bolt-elements-background-depth-1 text-bolt-elements-textPrimary",children:"No preview available"}),E&&p.jsxs(p.Fragment,{children:[p.jsx("div",{onMouseDown:V=>M(V,"left"),style:{position:"absolute",top:0,left:0,width:"15px",marginLeft:"-15px",height:"100%",cursor:"ew-resize",background:"rgba(255,255,255,.2)",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.2s",userSelect:"none"},onMouseOver:V=>V.currentTarget.style.background="rgba(255,255,255,.5)",onMouseOut:V=>V.currentTarget.style.background="rgba(255,255,255,.2)",title:"Drag to resize width",children:p.jsx(D,{})}),p.jsx("div",{onMouseDown:V=>M(V,"right"),style:{position:"absolute",top:0,right:0,width:"15px",marginRight:"-15px",height:"100%",cursor:"ew-resize",background:"rgba(255,255,255,.2)",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.2s",userSelect:"none"},onMouseOver:V=>V.currentTarget.style.background="rgba(255,255,255,.5)",onMouseOut:V=>V.currentTarget.style.background="rgba(255,255,255,.2)",title:"Drag to resize width",children:p.jsx(D,{})})]})]})})]})});function A2(t){const e=["B","KB","MB","GB","TB"];let n=t,r=0;for(;n>=1024&&r<e.length-1;)n/=1024,r++;return`${n.toFixed(1)} ${e[r]}`}function bst({isOpen:t,onClose:e,onPush:n}){const[r,s]=T.useState(""),[i,o]=T.useState(!1),[a,l]=T.useState(!1),[c,u]=T.useState(null),[d,h]=T.useState([]),[f,g]=T.useState(!1),[y,m]=T.useState(!1),[b,v]=T.useState(""),[_,E]=T.useState([]);T.useEffect(()=>{if(t){const x=Qh("github_connection");x?.user&&x?.token&&(u(x.user),x.token.trim()&&w(x.token))}},[t]);const w=async x=>{if(!x){Lt.logError("No GitHub token available"),ze.error("GitHub authentication required");return}try{g(!0);const I=await fetch("https://api.github.com/user/repos?sort=updated&per_page=5&type=all&affiliation=owner,organization_member",{headers:{Accept:"application/vnd.github.v3+json",Authorization:`Bearer ${x.trim()}`}});if(!I.ok){const C=await I.json().catch(()=>({}));I.status===401?(ze.error("GitHub token expired. Please reconnect your account."),Qh("github_connection")&&(localStorage.removeItem("github_connection"),u(null))):(Lt.logError("Failed to fetch GitHub repositories",{status:I.status,statusText:I.statusText,error:C}),ze.error(`Failed to fetch repositories: ${I.statusText}`));return}const R=await I.json();h(R)}catch(I){Lt.logError("Failed to fetch GitHub repositories",{error:I}),ze.error("Failed to fetch recent repositories")}finally{g(!1)}},S=async x=>{x.preventDefault();const I=Qh("github_connection");if(!I?.token||!I?.user){ze.error("Please connect your GitHub account in Settings > Connections first");return}if(!r.trim()){ze.error("Repository name is required");return}l(!0);try{const R=new oee({auth:I.token});try{if(await R.repos.get({owner:I.user.login,repo:r}),!window.confirm(`Repository "${r}" already exists. Do you want to update it? This will add or modify files in the repository.`)){l(!1);return}}catch(P){if(P instanceof Error&&"status"in P&&P.status!==404)throw P}const C=await n(r,I.user.login,I.token,i);v(C);const N=St.files.get(),O=Object.entries(N).filter(([,P])=>P?.type==="file"&&!P.isBinary).map(([P,$])=>({path:ty(P),size:new TextEncoder().encode($.content||"").length}));E(O),m(!0)}catch(R){console.error("Error pushing to GitHub:",R),ze.error("Failed to push to GitHub. Please check your repository name and try again.")}finally{l(!1)}},k=()=>{s(""),o(!1),m(!1),v(""),e()};return y?p.jsx(jo,{open:t,onOpenChange:x=>!x&&k(),children:p.jsxs(qh,{children:[p.jsx(Kh,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9999]"}),p.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[9999]",children:p.jsx(ot.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"w-[90vw] md:w-[600px] max-h-[85vh] overflow-y-auto",children:p.jsx(Yh,{className:"bg-white dark:bg-[#1E1E1E] rounded-lg border border-[#E5E5E5] dark:border-[#333333] shadow-xl",children:p.jsxs("div",{className:"p-6 space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2 text-green-500",children:[p.jsx("div",{className:"i-ph:check-circle w-5 h-5"}),p.jsx("h3",{className:"text-lg font-medium",children:"Successfully pushed to GitHub"})]}),p.jsx(Gm,{onClick:k,className:"p-2 text-gray-400 hover:text-gray-500 dark:text-gray-500 dark:hover:text-gray-400",children:p.jsx("div",{className:"i-ph:x w-5 h-5"})})]}),p.jsxs("div",{className:"bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 rounded-lg p-3 text-left",children:[p.jsx("p",{className:"text-xs text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary-dark mb-2",children:"Repository URL"}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("code",{className:"flex-1 text-sm bg-bolt-elements-background dark:bg-bolt-elements-background-dark px-3 py-2 rounded border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary-dark font-mono",children:b}),p.jsx(ot.button,{onClick:()=>{navigator.clipboard.writeText(b),ze.success("URL copied to clipboard")},className:"p-2 text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary dark:text-bolt-elements-textSecondary-dark dark:hover:text-bolt-elements-textPrimary-dark",whileHover:{scale:1.1},whileTap:{scale:.9},children:p.jsx("div",{className:"i-ph:copy w-4 h-4"})})]})]}),p.jsxs("div",{className:"bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 rounded-lg p-3",children:[p.jsxs("p",{className:"text-xs text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary-dark mb-2",children:["Pushed Files (",_.length,")"]}),p.jsx("div",{className:"max-h-[200px] overflow-y-auto custom-scrollbar",children:_.map(x=>p.jsxs("div",{className:"flex items-center justify-between py-1 text-sm text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary-dark",children:[p.jsx("span",{className:"font-mono truncate flex-1",children:x.path}),p.jsx("span",{className:"text-xs text-bolt-elements-textSecondary dark:text-bolt-elements-textSecondary-dark ml-2",children:A2(x.size)})]},x.path))})]}),p.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[p.jsxs(ot.a,{href:b,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600 text-sm inline-flex items-center gap-2",whileHover:{scale:1.02},whileTap:{scale:.98},children:[p.jsx("div",{className:"i-ph:github-logo w-4 h-4"}),"View Repository"]}),p.jsxs(ot.button,{onClick:()=>{navigator.clipboard.writeText(b),ze.success("URL copied to clipboard")},className:"px-4 py-2 rounded-lg bg-[#F5F5F5] dark:bg-[#1A1A1A] text-gray-600 dark:text-gray-400 hover:bg-[#E5E5E5] dark:hover:bg-[#252525] text-sm inline-flex items-center gap-2",whileHover:{scale:1.02},whileTap:{scale:.98},children:[p.jsx("div",{className:"i-ph:copy w-4 h-4"}),"Copy URL"]}),p.jsx(ot.button,{onClick:k,className:"px-4 py-2 rounded-lg bg-[#F5F5F5] dark:bg-[#1A1A1A] text-gray-600 dark:text-gray-400 hover:bg-[#E5E5E5] dark:hover:bg-[#252525] text-sm",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Close"})]})]})})})})]})}):c?p.jsx(jo,{open:t,onOpenChange:x=>!x&&k(),children:p.jsxs(qh,{children:[p.jsx(Kh,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9999]"}),p.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[9999]",children:p.jsx(ot.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"w-[90vw] md:w-[500px]",children:p.jsx(Yh,{className:"bg-white dark:bg-[#0A0A0A] rounded-lg border border-[#E5E5E5] dark:border-[#1A1A1A] shadow-xl",children:p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[p.jsx(ot.div,{initial:{scale:.8},animate:{scale:1},transition:{delay:.1},className:"w-10 h-10 rounded-xl bg-bolt-elements-background-depth-3 flex items-center justify-center text-purple-500",children:p.jsx("div",{className:"i-ph:git-branch w-5 h-5"})}),p.jsxs("div",{children:[p.jsx(qR,{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Push to GitHub"}),p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Push your code to a new or existing GitHub repository"})]}),p.jsx(Gm,{className:"ml-auto p-2 text-gray-400 hover:text-gray-500 dark:text-gray-500 dark:hover:text-gray-400",onClick:k,children:p.jsx("div",{className:"i-ph:x w-5 h-5"})})]}),p.jsxs("div",{className:"flex items-center gap-3 mb-6 p-3 bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 rounded-lg",children:[p.jsx("img",{src:c.avatar_url,alt:c.login,className:"w-10 h-10 rounded-full"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:c.name||c.login}),p.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["@",c.login]})]})]}),p.jsxs("form",{onSubmit:S,className:"space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{htmlFor:"repoName",className:"text-sm text-gray-600 dark:text-gray-400",children:"Repository Name"}),p.jsx("input",{id:"repoName",type:"text",value:r,onChange:x=>s(x.target.value),placeholder:"my-awesome-project",className:"w-full px-4 py-2 rounded-lg bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 border border-[#E5E5E5] dark:border-[#1A1A1A] text-gray-900 dark:text-white placeholder-gray-400",required:!0})]}),d.length>0&&p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Recent Repositories"}),p.jsx("div",{className:"space-y-2",children:d.map(x=>p.jsxs(ot.button,{type:"button",onClick:()=>s(x.name),className:"w-full p-3 text-left rounded-lg bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 hover:bg-bolt-elements-background-depth-3 dark:hover:bg-bolt-elements-background-depth-4 transition-colors group",whileHover:{scale:1.01},whileTap:{scale:.99},children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"i-ph:git-repository w-4 h-4 text-purple-500"}),p.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white group-hover:text-purple-500",children:x.name})]}),x.private&&p.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-purple-500/10 text-purple-500",children:"Private"})]}),x.description&&p.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400 line-clamp-2",children:x.description}),p.jsxs("div",{className:"mt-2 flex items-center gap-3 text-xs text-gray-400 dark:text-gray-500",children:[x.language&&p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:code w-3 h-3"}),x.language]}),p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:star w-3 h-3"}),x.stargazers_count.toLocaleString()]}),p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:git-fork w-3 h-3"}),x.forks_count.toLocaleString()]}),p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"i-ph:clock w-3 h-3"}),new Date(x.updated_at).toLocaleDateString()]})]})]},x.full_name))})]}),f&&p.jsxs("div",{className:"flex items-center justify-center py-4 text-gray-500 dark:text-gray-400",children:[p.jsx("div",{className:"i-ph:spinner-gap-bold animate-spin w-4 h-4 mr-2"}),"Loading repositories..."]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"checkbox",id:"private",checked:i,onChange:x=>o(x.target.checked),className:"rounded border-[#E5E5E5] dark:border-[#1A1A1A] text-purple-500 focus:ring-purple-500 dark:bg-[#0A0A0A]"}),p.jsx("label",{htmlFor:"private",className:"text-sm text-gray-600 dark:text-gray-400",children:"Make repository private"})]}),p.jsxs("div",{className:"pt-4 flex gap-2",children:[p.jsx(ot.button,{type:"button",onClick:k,className:"px-4 py-2 rounded-lg bg-[#F5F5F5] dark:bg-[#1A1A1A] text-gray-600 dark:text-gray-400 hover:bg-[#E5E5E5] dark:hover:bg-[#252525] text-sm",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Cancel"}),p.jsx(ot.button,{type:"submit",disabled:a,className:Pe("flex-1 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 text-sm inline-flex items-center justify-center gap-2",a?"opacity-50 cursor-not-allowed":""),whileHover:a?{}:{scale:1.02},whileTap:a?{}:{scale:.98},children:a?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"i-ph:spinner-gap-bold animate-spin w-4 h-4"}),"Pushing..."]}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"i-ph:git-branch w-4 h-4"}),"Push to GitHub"]})})]})]})]})})})})]})}):p.jsx(jo,{open:t,onOpenChange:x=>!x&&k(),children:p.jsxs(qh,{children:[p.jsx(Kh,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9999]"}),p.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[9999]",children:p.jsx(ot.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"w-[90vw] md:w-[500px]",children:p.jsx(Yh,{className:"bg-white dark:bg-[#0A0A0A] rounded-lg p-6 border border-[#E5E5E5] dark:border-[#1A1A1A] shadow-xl",children:p.jsxs("div",{className:"text-center space-y-4",children:[p.jsx(ot.div,{initial:{scale:.8},animate:{scale:1},transition:{delay:.1},className:"mx-auto w-12 h-12 rounded-xl bg-bolt-elements-background-depth-3 flex items-center justify-center text-purple-500",children:p.jsx("div",{className:"i-ph:github-logo w-6 h-6"})}),p.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"GitHub Connection Required"}),p.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Please connect your GitHub account in Settings ",">"," Connections to push your code to GitHub."]}),p.jsxs(ot.button,{className:"px-4 py-2 rounded-lg bg-purple-500 text-white text-sm hover:bg-purple-600 inline-flex items-center gap-2",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:k,children:[p.jsx("div",{className:"i-ph:x-circle"}),"Close"]})]})})})})]})})}const yst={ease:so},vst={left:{value:"code",text:"Code"},middle:{value:"diff",text:"Diff"},right:{value:"preview",text:"Preview"}},_st={closed:{width:0,transition:{duration:.2,ease:so}},open:{width:"var(--workbench-width)",transition:{duration:.2,ease:so}}},xst=T.memo(({fileHistory:t,onSelectFile:e})=>{const n=Object.entries(t),r=n.length>0,[s,i]=T.useState(""),o=T.useMemo(()=>n.filter(([a])=>a.toLowerCase().includes(s.toLowerCase())),[n,s]);return p.jsx("div",{className:"flex items-center gap-2",children:p.jsx(q5,{className:"relative",children:({open:a})=>p.jsxs(p.Fragment,{children:[p.jsxs(q5.Button,{className:"flex items-center gap-2 px-3 py-1.5 text-sm rounded-lg bg-bolt-elements-background-depth-2 hover:bg-bolt-elements-background-depth-3 transition-colors text-bolt-elements-textPrimary border border-bolt-elements-borderColor",children:[p.jsx("span",{className:"font-medium",children:"File Changes"}),r&&p.jsx("span",{className:"w-5 h-5 rounded-full bg-accent-500/20 text-accent-500 text-xs flex items-center justify-center border border-accent-500/30",children:n.length})]}),p.jsx(bYe,{show:a,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0",children:p.jsxs(q5.Panel,{className:"absolute right-0 z-20 mt-2 w-80 origin-top-right rounded-xl bg-bolt-elements-background-depth-2 shadow-xl border border-bolt-elements-borderColor",children:[p.jsxs("div",{className:"p-2",children:[p.jsxs("div",{className:"relative mx-2 mb-2",children:[p.jsx("input",{type:"text",placeholder:"Search files...",value:s,onChange:l=>i(l.target.value),className:"w-full pl-8 pr-3 py-1.5 text-sm rounded-lg bg-bolt-elements-background-depth-1 border border-bolt-elements-borderColor focus:outline-none focus:ring-2 focus:ring-blue-500/50"}),p.jsx("div",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-bolt-elements-textTertiary",children:p.jsx("div",{className:"i-ph:magnifying-glass"})})]}),p.jsx("div",{className:"max-h-60 overflow-y-auto",children:o.length>0?o.map(([l,c])=>{const u=l.split(".").pop()||"",d=iie(u);return p.jsx("button",{onClick:()=>e(l),className:"w-full px-3 py-2 text-left rounded-md hover:bg-bolt-elements-background-depth-1 transition-colors group bg-transparent",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("div",{className:"shrink-0 w-5 h-5 text-bolt-elements-textTertiary",children:[["typescript","javascript","jsx","tsx"].includes(d)&&p.jsx("div",{className:"i-ph:file-js"}),["css","scss","less"].includes(d)&&p.jsx("div",{className:"i-ph:paint-brush"}),d==="html"&&p.jsx("div",{className:"i-ph:code"}),d==="json"&&p.jsx("div",{className:"i-ph:brackets-curly"}),d==="python"&&p.jsx("div",{className:"i-ph:file-text"}),d==="markdown"&&p.jsx("div",{className:"i-ph:article"}),["yaml","yml"].includes(d)&&p.jsx("div",{className:"i-ph:file-text"}),d==="sql"&&p.jsx("div",{className:"i-ph:database"}),d==="dockerfile"&&p.jsx("div",{className:"i-ph:cube"}),d==="shell"&&p.jsx("div",{className:"i-ph:terminal"}),!["typescript","javascript","css","html","json","python","markdown","yaml","yml","sql","dockerfile","shell","jsx","tsx","scss","less"].includes(d)&&p.jsx("div",{className:"i-ph:file-text"})]}),p.jsx("div",{className:"flex-1 min-w-0",children:p.jsxs("div",{className:"flex items-center justify-between gap-2",children:[p.jsxs("div",{className:"flex flex-col min-w-0",children:[p.jsx("span",{className:"truncate text-sm font-medium text-bolt-elements-textPrimary",children:l.split("/").pop()}),p.jsx("span",{className:"truncate text-xs text-bolt-elements-textTertiary",children:l})]}),(()=>{const{additions:h,deletions:f}=(()=>{if(!c.originalContent)return{additions:0,deletions:0};const y=c.originalContent.replace(/\r\n/g,`
`),m=c.versions[c.versions.length-1]?.content.replace(/\r\n/g,`
`)||"";return y===m?{additions:0,deletions:0}:og(y,m,{newlineIsToken:!1,ignoreWhitespace:!0,ignoreCase:!1}).reduce((v,_)=>(_.added&&(v.additions+=_.value.split(`
`).length),_.removed&&(v.deletions+=_.value.split(`
`).length),v),{additions:0,deletions:0})})();return(h>0||f>0)&&p.jsxs("div",{className:"flex items-center gap-1 text-xs shrink-0",children:[h>0&&p.jsxs("span",{className:"text-green-500",children:["+",h]}),f>0&&p.jsxs("span",{className:"text-red-500",children:["-",f]})]})})()]})})]})},l)}):p.jsxs("div",{className:"flex flex-col items-center justify-center p-4 text-center",children:[p.jsx("div",{className:"w-12 h-12 mb-2 text-bolt-elements-textTertiary",children:p.jsx("div",{className:"i-ph:file-dashed"})}),p.jsx("p",{className:"text-sm font-medium text-bolt-elements-textPrimary",children:s?"No matching files":"No modified files"}),p.jsx("p",{className:"text-xs text-bolt-elements-textTertiary mt-1",children:s?"Try another search":"Changes will appear here as you edit"})]})})]}),r&&p.jsx("div",{className:"border-t border-bolt-elements-borderColor p-2",children:p.jsx("button",{onClick:()=>{navigator.clipboard.writeText(o.map(([l])=>l).join(`
`)),ze("File list copied to clipboard",{icon:p.jsx("div",{className:"i-ph:check-circle text-accent-500"})})},className:"w-full flex items-center justify-center gap-2 px-3 py-1.5 text-sm rounded-lg bg-bolt-elements-background-depth-1 hover:bg-bolt-elements-background-depth-3 transition-colors text-bolt-elements-textTertiary hover:text-bolt-elements-textPrimary",children:"Copy File List"})})]})})]})})})}),wst=T.memo(({chatStarted:t,isStreaming:e,actionRunner:n,metadata:r,updateChatMestaData:s})=>{Ag.trace("Workbench");const[i,o]=T.useState(!1),[a,l]=T.useState(!1),[c,u]=T.useState({}),d=It(iR(St.previews,C=>C.length>0)),h=It(St.showWorkbench),f=It(St.selectedFile),g=It(St.currentDocument),y=It(St.unsavedFiles),m=It(St.files),b=It(St.currentView),v=wse(1024),_=C=>{St.currentView.set(C)};T.useEffect(()=>{d&&_("preview")},[d]),T.useEffect(()=>{St.setDocuments(m)},[m]);const E=T.useCallback(C=>{St.setCurrentDocumentContent(C.content)},[]),w=T.useCallback(C=>{St.setCurrentDocumentScrollPosition(C)},[]),S=T.useCallback(C=>{St.setSelectedFile(C)},[]),k=T.useCallback(()=>{St.saveCurrentDocument().catch(()=>{ze.error("Failed to update file content")})},[]),x=T.useCallback(()=>{St.resetCurrentDocument()},[]),I=T.useCallback(async()=>{o(!0);try{const C=await window.showDirectoryPicker();await St.syncFiles(C),ze.success("Files synced successfully")}catch(C){console.error("Error syncing files:",C),ze.error("Failed to sync files")}finally{o(!1)}},[]),R=T.useCallback(C=>{St.setSelectedFile(C),St.currentView.set("diff")},[]);return t&&p.jsxs(ot.div,{initial:"closed",animate:h?"open":"closed",variants:_st,className:"z-workbench",children:[p.jsx("div",{className:Pe("fixed top-[calc(var(--header-height)+1.5rem)] bottom-6 w-[var(--workbench-inner-width)] mr-4 z-0 transition-[left,width] duration-200 bolt-ease-cubic-bezier",{"w-full":v,"left-0":h&&v,"left-[var(--workbench-left)]":h,"left-[100%]":!h}),children:p.jsx("div",{className:"absolute inset-0 px-2 lg:px-6",children:p.jsxs("div",{className:"h-full flex flex-col bg-bolt-elements-background-depth-2 border border-bolt-elements-borderColor shadow-sm rounded-lg overflow-hidden",children:[p.jsxs("div",{className:"flex items-center px-3 py-2 border-b border-bolt-elements-borderColor",children:[p.jsx(Unt,{selected:b,options:vst,setSelected:_}),p.jsx("div",{className:"ml-auto"}),b==="code"&&p.jsxs("div",{className:"flex overflow-y-auto",children:[p.jsxs(pm,{className:"mr-1 text-sm",onClick:()=>{St.downloadZip()},children:[p.jsx("div",{className:"i-ph:code"}),"Download Code"]}),p.jsxs(pm,{className:"mr-1 text-sm",onClick:I,disabled:i,children:[i?p.jsx("div",{className:"i-ph:spinner"}):p.jsx("div",{className:"i-ph:cloud-arrow-down"}),i?"Syncing...":"Sync Files"]}),p.jsxs(pm,{className:"mr-1 text-sm",onClick:()=>{St.toggleTerminal(!St.showTerminal.get())},children:[p.jsx("div",{className:"i-ph:terminal"}),"Toggle Terminal"]}),p.jsxs(pm,{className:"mr-1 text-sm",onClick:()=>l(!0),children:[p.jsx("div",{className:"i-ph:git-branch"}),"Push to GitHub"]})]}),b==="diff"&&p.jsx(xst,{fileHistory:c,onSelectFile:R}),p.jsx(dr,{icon:"i-ph:x-circle",className:"-mr-1",size:"xl",onClick:()=>{St.showWorkbench.set(!1)}})]}),p.jsxs("div",{className:"relative flex-1 overflow-hidden",children:[p.jsx(_3,{initial:{x:"0%"},animate:{x:b==="code"?"0%":"-100%"},children:p.jsx(fst,{editorDocument:g,isStreaming:e,selectedFile:f,files:m,unsavedFiles:y,fileHistory:c,onFileSelect:S,onEditorScroll:w,onEditorChange:E,onFileSave:k,onFileReset:x})}),p.jsx(_3,{initial:{x:"100%"},animate:{x:b==="diff"?"0%":b==="code"?"100%":"-100%"},children:p.jsx(eXe,{fileHistory:c,setFileHistory:u,actionRunner:n})}),p.jsx(_3,{initial:{x:"100%"},animate:{x:b==="preview"?"0%":"100%"},children:p.jsx(gst,{})})]})]})})}),p.jsx(bst,{isOpen:a,onClose:()=>l(!1),onPush:async(C,N,O)=>{try{const P=prompt("Please enter a commit message:","Initial commit")||"Initial commit";await St.pushToGitHub(C,P,N,O);const $=`https://github.com/${N}/${C}`;return s&&!r?.gitUrl&&s({...r||{},gitUrl:$}),$}catch(P){throw console.error("Error pushing to GitHub:",P),ze.error("Failed to push to GitHub"),P}}})]})}),_3=T.memo(({children:t,...e})=>p.jsx(ot.div,{className:"absolute inset-0",transition:yst,...e,children:t}));var AD="Popover",[Mle,Sft]=Xo(AD,[jg]),Jv=jg(),[Est,$d]=Mle(AD),jle=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!1}=t,a=Jv(e),l=T.useRef(null),[c,u]=T.useState(!1),[d=!1,h]=Bf({prop:r,defaultProp:s,onChange:i});return p.jsx(KL,{...a,children:p.jsx(Est,{scope:e,contentId:Vc(),triggerRef:l,open:d,onOpenChange:h,onOpenToggle:T.useCallback(()=>h(f=>!f),[h]),hasCustomAnchor:c,onCustomAnchorAdd:T.useCallback(()=>u(!0),[]),onCustomAnchorRemove:T.useCallback(()=>u(!1),[]),modal:o,children:n})})};jle.displayName=AD;var Fle="PopoverAnchor",Ble=T.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=$d(Fle,n),i=Jv(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=s;return T.useEffect(()=>(o(),()=>a()),[o,a]),p.jsx(Rk,{...i,...r,ref:e})});Ble.displayName=Fle;var Ule="PopoverTrigger",$le=T.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=$d(Ule,n),i=Jv(n),o=Un(e,s.triggerRef),a=p.jsx(hn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":qle(s.open),...r,ref:o,onClick:Nt(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?a:p.jsx(Rk,{asChild:!0,...i,children:a})});$le.displayName=Ule;var TD="PopoverPortal",[Sst,kst]=Mle(TD,{forceMount:void 0}),Hle=t=>{const{__scopePopover:e,forceMount:n,children:r,container:s}=t,i=$d(TD,e);return p.jsx(Sst,{scope:e,forceMount:n,children:p.jsx(Ss,{present:n||i.open,children:p.jsx(_v,{asChild:!0,container:s,children:r})})})};Hle.displayName=TD;var Eg="PopoverContent",zle=T.forwardRef((t,e)=>{const n=kst(Eg,t.__scopePopover),{forceMount:r=n.forceMount,...s}=t,i=$d(Eg,t.__scopePopover);return p.jsx(Ss,{present:r||i.open,children:i.modal?p.jsx(Cst,{...s,ref:e}):p.jsx(Ast,{...s,ref:e})})});zle.displayName=Eg;var Cst=T.forwardRef((t,e)=>{const n=$d(Eg,t.__scopePopover),r=T.useRef(null),s=Un(e,r),i=T.useRef(!1);return T.useEffect(()=>{const o=r.current;if(o)return HR(o)},[]),p.jsx(gk,{as:uf,allowPinchZoom:!0,children:p.jsx(Vle,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Nt(t.onCloseAutoFocus,o=>{o.preventDefault(),i.current||n.triggerRef.current?.focus()}),onPointerDownOutside:Nt(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;i.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:Nt(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Ast=T.forwardRef((t,e)=>{const n=$d(Eg,t.__scopePopover),r=T.useRef(!1),s=T.useRef(!1);return p.jsx(Vle,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{t.onCloseAutoFocus?.(i),i.defaultPrevented||(r.current||n.triggerRef.current?.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{t.onInteractOutside?.(i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;n.triggerRef.current?.contains(o)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),Vle=T.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=t,h=$d(Eg,n),f=Jv(n);return $R(),p.jsx(pk,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:p.jsx(vv,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>h.onOpenChange(!1),children:p.jsx(YL,{"data-state":qle(h.open),role:"dialog",id:h.contentId,...f,...d,ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Wle="PopoverClose",Tst=T.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=$d(Wle,n);return p.jsx(hn.button,{type:"button",...r,ref:e,onClick:Nt(t.onClick,()=>s.onOpenChange(!1))})});Tst.displayName=Wle;var Nst="PopoverArrow",Gle=T.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=Jv(n);return p.jsx(XL,{...s,...r,ref:e})});Gle.displayName=Nst;function qle(t){return t?"open":"closed"}var Pst=jle,Ist=Ble,Rst=$le,Lst=Hle,Ost=zle,Dst=Gle;const Mst=({children:t,trigger:e,side:n,align:r})=>p.jsxs(Pst,{children:[p.jsx(Rst,{asChild:!0,children:e}),p.jsx(Ist,{}),p.jsx(Lst,{children:p.jsxs(Ost,{sideOffset:10,side:n,align:r,className:"bg-bolt-elements-background-depth-2 text-bolt-elements-item-contentAccent p-2 rounded-md shadow-xl z-workbench",children:[t,p.jsx(Dst,{className:"bg-bolt-elements-item-background-depth-2"})]})})]});function jst(t){t=Kle(t),St.currentView.get()!=="code"&&St.currentView.set("code"),St.setSelectedFile(`${Zc}/${t}`)}function Kle(t){let e=t;return e.startsWith(Zc)&&(e=t.replace(Zc,"")),e.startsWith("/")&&(e=e.slice(1)),e}const Fst=T.memo(({content:t,annotations:e})=>{const n=e?.filter(o=>o&&typeof o=="object"&&Object.keys(o).includes("type"))||[];let r;n.find(o=>o.type==="chatSummary")&&(r=n.find(o=>o.type==="chatSummary")?.summary);let s;n.find(o=>o.type==="codeContext")&&(s=n.find(o=>o.type==="codeContext")?.files);const i=n.find(o=>o.type==="usage")?.value;return p.jsxs("div",{className:"overflow-hidden w-full",children:[p.jsx(p.Fragment,{children:p.jsxs("div",{className:" flex gap-2 items-center text-sm text-bolt-elements-textSecondary mb-2",children:[(s||r)&&p.jsxs(Mst,{side:"right",align:"start",trigger:p.jsx("div",{className:"i-ph:info"}),children:[r&&p.jsxs("div",{className:"max-w-chat",children:[p.jsxs("div",{className:"summary max-h-96 flex flex-col",children:[p.jsx("h2",{className:"border border-bolt-elements-borderColor rounded-md p4",children:"Summary"}),p.jsx("div",{style:{zoom:.7},className:"overflow-y-auto m4",children:p.jsx(dg,{children:r})})]}),s&&p.jsxs("div",{className:"code-context flex flex-col p4 border border-bolt-elements-borderColor rounded-md",children:[p.jsx("h2",{children:"Context"}),p.jsx("div",{className:"flex gap-4 mt-4 bolt",style:{zoom:.6},children:s.map(o=>{const a=Kle(o);return p.jsx(p.Fragment,{children:p.jsx("code",{className:"bg-bolt-elements-artifacts-inlineCode-background text-bolt-elements-artifacts-inlineCode-text px-1.5 py-1 rounded-md text-bolt-elements-item-contentAccent hover:underline cursor-pointer",onClick:l=>{l.preventDefault(),l.stopPropagation(),jst(a)},children:a})})})})]})]}),p.jsx("div",{className:"context"})]}),i&&p.jsxs("div",{children:["Tokens: ",i.totalTokens," (prompt: ",i.promptTokens,", completion: ",i.completionTokens,")"]})]})}),p.jsx(dg,{html:!0,children:t})]})});function Bst({content:t}){if(Array.isArray(t)){const n=t.find(i=>i.type==="text"),r=Dz(n?.text||""),s=t.filter(i=>i.type==="image"&&i.image);return p.jsx("div",{className:"overflow-hidden pt-[4px]",children:p.jsxs("div",{className:"flex flex-col gap-4",children:[r&&p.jsx(dg,{html:!0,children:r}),s.map((i,o)=>p.jsx("img",{src:i.image,alt:`Image ${o+1}`,className:"max-w-full h-auto rounded-lg",style:{maxHeight:"512px",objectFit:"contain"}},o))]})})}const e=Dz(t);return p.jsx("div",{className:"overflow-hidden pt-[4px]",children:p.jsx(dg,{html:!0,children:e})})}function Dz(t){const e=/<boltArtifact\s+[^>]*>[\s\S]*?<\/boltArtifact>/gm;return t.replace(cAe,"").replace(uAe,"").replace(e,"")}const Ust=T.forwardRef((t,e)=>{const{id:n,isStreaming:r=!1,messages:s=[]}=t,i=gde(),o=It(ld),a=c=>{const u=new URLSearchParams(i.search);u.set("rewindTo",c),window.location.search=u.toString()},l=async c=>{try{if(!mn||!ya.get()){ze.error("Chat persistence is not available");return}const u=await mPe(mn,ya.get(),c);window.location.href=`/chat/${u}`}catch(u){ze.error("Failed to fork chat: "+u.message)}};return p.jsxs("div",{id:n,className:t.className,ref:e,children:[s.length>0?s.map((c,u)=>{const{role:d,content:h,id:f,annotations:g}=c,y=d==="user",m=u===0,b=u===s.length-1;return g?.includes("hidden")?p.jsx(T.Fragment,{},u):p.jsxs("div",{className:Pe("flex gap-4 p-6 w-full rounded-[calc(0.75rem-1px)]",{"bg-bolt-elements-messages-background":y||!r||r&&!b,"bg-gradient-to-b from-bolt-elements-messages-background from-30% to-transparent":r&&b,"mt-4":!m}),children:[y&&p.jsx("div",{className:"flex items-center justify-center w-[40px] h-[40px] overflow-hidden bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-500 rounded-full shrink-0 self-start",children:o?.avatar?p.jsx("img",{src:o.avatar,alt:o?.username||"User",className:"w-full h-full object-cover",loading:"eager",decoding:"sync"}):p.jsx("div",{className:"i-ph:user-fill text-2xl"})}),p.jsx("div",{className:"grid grid-col-1 w-full",children:y?p.jsx(Bst,{content:h}):p.jsx(Fst,{content:h,annotations:c.annotations})}),!y&&p.jsxs("div",{className:"flex gap-2 flex-col lg:flex-row",children:[f&&p.jsx(Ef,{tooltip:"Revert to this message",children:p.jsx("button",{onClick:()=>a(f),className:Pe("i-ph:arrow-u-up-left","text-xl text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary transition-colors")},"i-ph:arrow-u-up-left")}),p.jsx(Ef,{tooltip:"Fork chat from this message",children:p.jsx("button",{onClick:()=>l(f),className:Pe("i-ph:git-fork","text-xl text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary transition-colors")},"i-ph:git-fork")})]})]},u)}):null,r&&p.jsx("div",{className:"text-center w-full text-bolt-elements-textSecondary i-svg-spinners:3-dots-fade text-4xl mt-4"})]})}),$st=Ff(.4,0,.2,1),Hst=({show:t,isStreaming:e,disabled:n,onClick:r})=>p.jsx(zl,{children:t?p.jsx(ot.button,{className:"absolute flex justify-center items-center top-[18px] right-[22px] p-1 bg-blue-500 hover:brightness-94 text-white rounded-md w-[34px] h-[34px] transition-theme disabled:opacity-50 disabled:cursor-not-allowed",transition:{ease:$st,duration:.17},initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},disabled:n,onClick:s=>{s.preventDefault(),n||r?.(s)},children:p.jsx("div",{className:"text-lg",children:e?p.jsx("div",{className:"i-ph:stop-circle-bold"}):p.jsx("div",{className:"i-ph:arrow-right"})})}):null}),x3={},Mz={};function KS(){const t=ur.get("apiKeys");let e={};return t&&(e=Mz[t],e||(e=Mz[t]=JSON.parse(t))),e}const zst=({provider:t,apiKey:e,setApiKey:n})=>{const[r,s]=T.useState(!1),[i,o]=T.useState(e),[a,l]=T.useState(!1);T.useEffect(()=>{const h=KS()[t.name]||"";o(h),n(h),s(!1)},[t.name]);const c=T.useCallback(async()=>{if(x3[t.name]!==void 0){l(x3[t.name]);return}try{const f=(await(await fetch(`/api/check-env-key?provider=${encodeURIComponent(t.name)}`)).json()).isSet;x3[t.name]=f,l(f)}catch(d){console.error("Failed to check environment API key:",d),l(!1)}},[t.name]);T.useEffect(()=>{c()},[c]);const u=()=>{n(i);const h={...KS(),[t.name]:i};ur.set("apiKeys",JSON.stringify(h)),s(!1)};return p.jsxs("div",{className:"flex items-center justify-between py-3 px-1",children:[p.jsx("div",{className:"flex items-center gap-2 flex-1",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("span",{className:"text-sm font-medium text-bolt-elements-textSecondary",children:[t?.name," API Key:"]}),!r&&p.jsx("div",{className:"flex items-center gap-2",children:e?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"i-ph:check-circle-fill text-green-500 w-4 h-4"}),p.jsx("span",{className:"text-xs text-green-500",children:"Set via UI"})]}):a?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"i-ph:check-circle-fill text-green-500 w-4 h-4"}),p.jsx("span",{className:"text-xs text-green-500",children:"Set via environment variable"})]}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"i-ph:x-circle-fill text-red-500 w-4 h-4"}),p.jsx("span",{className:"text-xs text-red-500",children:"Not Set (Please set via UI or ENV_VAR)"})]})})]})}),p.jsx("div",{className:"flex items-center gap-2 shrink-0",children:r?p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"password",value:i,placeholder:"Enter API Key",onChange:d=>o(d.target.value),className:`w-[300px] px-3 py-1.5 text-sm rounded border border-bolt-elements-borderColor 
                        bg-bolt-elements-prompt-background text-bolt-elements-textPrimary 
                        focus:outline-none focus:ring-2 focus:ring-bolt-elements-focus`}),p.jsx(dr,{onClick:u,title:"Save API Key",className:"bg-green-500/10 hover:bg-green-500/20 text-green-500",children:p.jsx("div",{className:"i-ph:check w-4 h-4"})}),p.jsx(dr,{onClick:()=>s(!1),title:"Cancel",className:"bg-red-500/10 hover:bg-red-500/20 text-red-500",children:p.jsx("div",{className:"i-ph:x w-4 h-4"})})]}):p.jsxs(p.Fragment,{children:[p.jsx(dr,{onClick:()=>s(!0),title:"Edit API Key",className:"bg-blue-500/10 hover:bg-blue-500/20 text-blue-500",children:p.jsx("div",{className:"i-ph:pencil-simple w-4 h-4"})}),t?.getApiKeyLink&&!e&&p.jsxs(dr,{onClick:()=>window.open(t?.getApiKeyLink),title:"Get API Key",className:"bg-blue-500/10 hover:bg-blue-500/20 text-blue-500 flex items-center gap-2",children:[p.jsx("span",{className:"text-xs whitespace-nowrap",children:t?.labelForGetApiKey||"Get API Key"}),p.jsx("div",{className:`${t?.icon||"i-ph:key"} w-4 h-4`})]})]})})]})},Vst="s",Wst="t",Gst="u",qst="v",Kst="w",lb={BaseChat:Vst,Chat:Wst,PromptEffectContainer:Gst,PromptEffectLine:qst,PromptShine:Kst},Yst=({exportChat:t})=>p.jsx(Ef,{tooltip:"Export Chat",children:p.jsx(dr,{title:"Export Chat",onClick:()=>t?.(),children:p.jsx("div",{className:"i-ph:download-simple text-xl"})})});var jz={};function Fz(t){return Array.isArray(t)?t:[t]}const NI="",Bz=" ",w3="\\",Xst=/^\s+$/,Jst=/(?:[^\\]|^)\\$/,Zst=/^\\!/,Qst=/^\\#/,eit=/\r?\n/g,tit=/^\.*\/|^\.+$/,E3="/";let Yle="node-ignore";typeof Symbol<"u"&&(Yle=Symbol.for("node-ignore"));const Uz=Yle,nit=(t,e,n)=>Object.defineProperty(t,e,{value:n}),rit=/([0-z])-([0-z])/g,Xle=()=>!1,sit=t=>t.replace(rit,(e,n,r)=>n.charCodeAt(0)<=r.charCodeAt(0)?e:NI),iit=t=>{const{length:e}=t;return t.slice(0,e-e%2)},oit=[[/^\uFEFF/,()=>NI],[/((?:\\\\)*?)(\\?\s+)$/,(t,e,n)=>e+(n.indexOf("\\")===0?Bz:NI)],[/(\\+?)\s/g,(t,e)=>{const{length:n}=e;return e.slice(0,n-n%2)+Bz}],[/[\\$.|*+(){^]/g,t=>`\\${t}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(t,e,n)=>e+6<n.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(t,e,n)=>{const r=n.replace(/\\\*/g,"[^\\/]*");return e+r}],[/\\\\\\(?=[$.|*+(){^])/g,()=>w3],[/\\\\/g,()=>w3],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(t,e,n,r,s)=>e===w3?`\\[${n}${iit(r)}${s}`:s==="]"&&r.length%2===0?`[${sit(n)}${r}]`:"[]"],[/(?:[^*])$/,t=>/\/$/.test(t)?`${t}$`:`${t}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(t,e)=>`${e?`${e}[^/]+`:"[^/]*"}(?=$|\\/$)`]],$z=Object.create(null),ait=(t,e)=>{let n=$z[t];return n||(n=oit.reduce((r,[s,i])=>r.replace(s,i.bind(t)),t),$z[t]=n),e?new RegExp(n,"i"):new RegExp(n)},ND=t=>typeof t=="string",lit=t=>t&&ND(t)&&!Xst.test(t)&&!Jst.test(t)&&t.indexOf("#")!==0,cit=t=>t.split(eit);let uit=class{constructor(e,n,r,s){this.origin=e,this.pattern=n,this.negative=r,this.regex=s}};const dit=(t,e)=>{const n=t;let r=!1;t.indexOf("!")===0&&(r=!0,t=t.substr(1)),t=t.replace(Zst,"!").replace(Qst,"#");const s=ait(t,e);return new uit(n,t,r,s)},hit=(t,e)=>{throw new e(t)},iu=(t,e,n)=>ND(t)?t?iu.isNotRelative(t)?n(`path should be a \`path.relative()\`d string, but got "${e}"`,RangeError):!0:n("path must not be empty",TypeError):n(`path must be a string, but got \`${e}\``,TypeError),Jle=t=>tit.test(t);iu.isNotRelative=Jle;iu.convert=t=>t;let fit=class{constructor({ignorecase:e=!0,ignoreCase:n=e,allowRelativePaths:r=!1}={}){nit(this,Uz,!0),this._rules=[],this._ignoreCase=n,this._allowRelativePaths=r,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(e){if(e&&e[Uz]){this._rules=this._rules.concat(e._rules),this._added=!0;return}if(lit(e)){const n=dit(e,this._ignoreCase);this._added=!0,this._rules.push(n)}}add(e){return this._added=!1,Fz(ND(e)?cit(e):e).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(e){return this.add(e)}_testOne(e,n){let r=!1,s=!1;return this._rules.forEach(i=>{const{negative:o}=i;if(s===o&&r!==s||o&&!r&&!s&&!n)return;i.regex.test(e)&&(r=!o,s=o)}),{ignored:r,unignored:s}}_test(e,n,r,s){const i=e&&iu.convert(e);return iu(i,e,this._allowRelativePaths?Xle:hit),this._t(i,n,r,s)}_t(e,n,r,s){if(e in n)return n[e];if(s||(s=e.split(E3)),s.pop(),!s.length)return n[e]=this._testOne(e,r);const i=this._t(s.join(E3)+E3,n,r,s);return n[e]=i.ignored?i:this._testOne(e,r)}ignores(e){return this._test(e,this._ignoreCache,!1).ignored}createFilter(){return e=>!this.ignores(e)}filter(e){return Fz(e).filter(this.createFilter())}test(e){return this._test(e,this._testCache,!0)}};const YS=t=>new fit(t),pit=t=>iu(t&&iu.convert(t),t,Xle);YS.isPathValid=pit;YS.default=YS;var mit=YS;if(typeof An<"u"&&(jz&&jz.IGNORE_TEST_WIN32||An.platform==="win32")){const t=n=>/^\\\\\?\\/.test(n)||/["<>|\u0000-\u001F]+/u.test(n)?n:n.replace(/\\/g,"/");iu.convert=t;const e=/^[a-z]:\//i;iu.isNotRelative=n=>e.test(n)||Jle(n)}const PD=ao(mit),git=["node_modules/**",".git/**","dist/**","build/**",".next/**","coverage/**",".cache/**",".vscode/**",".idea/**","**/*.log","**/.DS_Store","**/npm-debug.log*","**/yarn-debug.log*","**/yarn-error.log*"],S3=1e3,bit=PD().add(git),ky=()=>Math.random().toString(36).substring(2,15),yit=async t=>{const n=new Uint8Array(await t.slice(0,1024).arrayBuffer());for(let r=0;r<n.length;r++){const s=n[r];if(s===0||s<32&&s!==9&&s!==10&&s!==13)return!0}return!1},vit=t=>!bit.ignores(t),_it=(t,e)=>`
<boltArtifact id="${e}" title="User Updated Files">
${Object.keys(t).map(n=>`
<boltAction type="file" filePath="${n}">
${t[n].content}
</boltAction>
`).join(`
`)}
</boltArtifact>
  `;async function Zle(t){const e=n=>t.some(r=>r.path.endsWith(n));if(e("package.json")){const n=t.find(r=>r.path.endsWith("package.json"));if(!n)return{type:"",setupCommand:"",followupMessage:""};try{const s=JSON.parse(n.content)?.scripts||{},o=["dev","start","preview"].find(a=>s[a]);return o?{type:"Node.js",setupCommand:"npm install",startCommand:`npm run ${o}`,followupMessage:`Found "${o}" script in package.json. Running "npm run ${o}" after installation.`}:{type:"Node.js",setupCommand:"npm install",followupMessage:"Would you like me to inspect package.json to determine the available scripts for running this project?"}}catch(r){return console.error("Error parsing package.json:",r),{type:"",setupCommand:"",followupMessage:""}}}return e("index.html")?{type:"Static",startCommand:"npx --yes serve",followupMessage:""}:{type:"",setupCommand:"",followupMessage:""}}function Qle(t){if(!t.setupCommand&&!t.startCommand)return null;let e="";return t.setupCommand&&(e+=`
<boltAction type="shell">${t.setupCommand}</boltAction>`),t.startCommand&&(e+=`
<boltAction type="start">${t.startCommand}</boltAction>
`),{role:"assistant",content:`
<boltArtifact id="project-setup" title="Project Setup">
${e}
</boltArtifact>${t.followupMessage?`

${t.followupMessage}`:""}`,id:ky(),createdAt:new Date}}function xit(t){const e=/(<boltArtifact[^>]*>)([\s\S]*?)(<\/boltArtifact>)/g;return t.replace(e,(n,r,s,i)=>{const o=r.replace(/</g,"&lt;").replace(/>/g,"&gt;"),a=i.replace(/</g,"&lt;").replace(/>/g,"&gt;");return`${o}${s}${a}`})}function wit(t){const e=/(<boltAction[^>]*>)([\s\S]*?)(<\/boltAction>)/g;return t.replace(e,(n,r,s,i)=>{const o=r.replace(/</g,"&lt;").replace(/>/g,"&gt;"),a=i.replace(/</g,"&lt;").replace(/>/g,"&gt;");return`${o}${s}${a}`})}function ece(t){return xit(wit(t))}const Eit=async(t,e,n)=>{const r=await Promise.all(t.map(async u=>new Promise((d,h)=>{const f=new FileReader;f.onload=()=>{const g=f.result,y=u.webkitRelativePath.split("/").slice(1).join("/");d({content:g,path:y})},f.onerror=h,f.readAsText(u)}))),s=await Zle(r),i=Qle(s),o=e.length>0?`

Skipped ${e.length} binary files:
${e.map(u=>`- ${u}`).join(`
`)}`:"",a={role:"assistant",content:`I've imported the contents of the "${n}" folder.${o}

<boltArtifact id="imported-files" title="Imported Files" type="bundled" >
${r.map(u=>`<boltAction type="file" filePath="${u.path}">
${ece(u.content)}
</boltAction>`).join(`

`)}
</boltArtifact>`,id:ky(),createdAt:new Date},c=[{role:"user",id:ky(),content:`Import the "${n}" folder`,createdAt:new Date},a];return i&&(c.push({role:"user",id:ky(),content:"Setup the codebase and Start the application"}),c.push(i)),c},Sit=dne("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-bolt-elements-borderColor disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-bolt-elements-background text-bolt-elements-textPrimary hover:bg-bolt-elements-background-depth-2",destructive:"bg-red-500 text-white hover:bg-red-600",outline:"border border-input bg-transparent hover:bg-bolt-elements-background-depth-2 hover:text-bolt-elements-textPrimary",secondary:"bg-bolt-elements-background-depth-1 text-bolt-elements-textPrimary hover:bg-bolt-elements-background-depth-2",ghost:"hover:bg-bolt-elements-background-depth-1 hover:text-bolt-elements-textPrimary",link:"text-bolt-elements-textPrimary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),$C=T.forwardRef(({className:t,variant:e,size:n,_asChild:r=!1,...s},i)=>p.jsx("button",{className:Pe(Sit({variant:e,size:n}),t),ref:i,...s}));$C.displayName="Button";const kit=({className:t,importChat:e})=>{const[n,r]=T.useState(!1),s=async i=>{const a=Array.from(i.target.files||[]).filter(u=>{const d=u.webkitRelativePath.split("/").slice(1).join("/");return vit(d)});if(a.length===0){const u=new Error("No valid files found");Lt.logError("File import failed - no valid files",u,{folderName:"Unknown Folder"}),ze.error("No files found in the selected folder");return}if(a.length>S3){const u=new Error(`Too many files: ${a.length}`);Lt.logError("File import failed - too many files",u,{fileCount:a.length,maxFiles:S3}),ze.error(`This folder contains ${a.length.toLocaleString()} files. This product is not yet optimized for very large projects. Please select a folder with fewer than ${S3.toLocaleString()} files.`);return}const l=a[0]?.webkitRelativePath.split("/")[0]||"Unknown Folder";r(!0);const c=ze.loading(`Importing ${l}...`);try{const u=await Promise.all(a.map(async g=>({file:g,isBinary:await yit(g)}))),d=u.filter(g=>!g.isBinary).map(g=>g.file),h=u.filter(g=>g.isBinary).map(g=>g.file.webkitRelativePath.split("/").slice(1).join("/"));if(d.length===0){const g=new Error("No text files found");Lt.logError("File import failed - no text files",g,{folderName:l}),ze.error("No text files found in the selected folder");return}h.length>0&&(Lt.logWarning("Skipping binary files during import",{folderName:l,binaryCount:h.length}),ze.info(`Skipping ${h.length} binary files`));const f=await Eit(d,h,l);e&&await e(l,[...f]),Lt.logSystem("Folder imported successfully",{folderName:l,textFileCount:d.length,binaryFileCount:h.length}),ze.success("Folder imported successfully")}catch(u){Lt.logError("Failed to import folder",u,{folderName:l}),console.error("Failed to import folder:",u),ze.error("Failed to import folder")}finally{r(!1),ze.dismiss(c),i.target.value=""}};return p.jsxs(p.Fragment,{children:[p.jsx("input",{type:"file",id:"folder-import",className:"hidden",webkitdirectory:"",directory:"",onChange:s}),p.jsxs($C,{onClick:()=>{document.getElementById("folder-import")?.click()},title:"Import Folder",variant:"outline",size:"lg",className:Pe("gap-2 bg-[#F5F5F5] dark:bg-[#252525]","text-bolt-elements-textPrimary dark:text-white","hover:bg-[#E5E5E5] dark:hover:bg-[#333333]","border-[#E5E5E5] dark:border-[#333333]","h-10 px-4 py-2 min-w-[120px] justify-center","transition-all duration-200 ease-in-out",t),disabled:n,children:[p.jsx("span",{className:"i-ph:upload-simple w-4 h-4"}),n?"Importing...":"Import Folder"]})]})};function Cit(t){return p.jsxs("div",{className:"flex flex-col items-center justify-center w-auto",children:[p.jsx("input",{type:"file",id:"chat-import",className:"hidden",accept:".json",onChange:async e=>{const n=e.target.files?.[0];if(n&&t){try{const r=new FileReader;r.onload=async s=>{try{const i=s.target?.result,o=JSON.parse(i);if(Array.isArray(o.messages)){await t(o.description||"Imported Chat",o.messages),ze.success("Chat imported successfully");return}ze.error("Invalid chat file format")}catch(i){i instanceof Error?ze.error("Failed to parse chat file: "+i.message):ze.error("Failed to parse chat file")}},r.onerror=()=>ze.error("Failed to read chat file"),r.readAsText(n)}catch(r){ze.error(r instanceof Error?r.message:"Failed to import chat")}e.target.value=""}else ze.error("Something went wrong")}}),p.jsx("div",{className:"flex flex-col items-center gap-4 max-w-2xl text-center",children:p.jsxs("div",{className:"flex gap-2",children:[p.jsxs($C,{onClick:()=>{document.getElementById("chat-import")?.click()},variant:"outline",size:"lg",className:Pe("gap-2 bg-[#F5F5F5] dark:bg-[#252525]","text-bolt-elements-textPrimary dark:text-white","hover:bg-[#E5E5E5] dark:hover:bg-[#333333]","border-[#E5E5E5] dark:border-[#333333]","h-10 px-4 py-2 min-w-[120px] justify-center","transition-all duration-200 ease-in-out"),children:[p.jsx("span",{className:"i-ph:upload-simple w-4 h-4"}),"Import Chat"]}),p.jsx(kit,{importChat:t,className:Pe("gap-2 bg-[#F5F5F5] dark:bg-[#252525]","text-bolt-elements-textPrimary dark:text-white","hover:bg-[#E5E5E5] dark:hover:bg-[#333333]","border border-[#E5E5E5] dark:border-[#333333]","h-10 px-4 py-2 min-w-[120px] justify-center","transition-all duration-200 ease-in-out rounded-lg")})]})})]})}const Ait=[{text:"Build a todo app in React using Tailwind"},{text:"Build a simple blog using Astro"},{text:"Create a cookie consent form using Material UI"},{text:"Make a space invaders game"},{text:"Make a Tic Tac Toe game in html, css and js only"}];function Tit(t){return p.jsx("div",{id:"examples",className:"relative flex flex-col gap-9 w-full max-w-3xl mx-auto flex justify-center mt-6",children:p.jsx("div",{className:"flex flex-wrap justify-center gap-2",style:{animation:".25s ease-out 0s 1 _fade-and-move-in_g2ptj_1 forwards"},children:Ait.map((e,n)=>p.jsx("button",{onClick:r=>{t?.(r,e.text)},className:"border border-bolt-elements-borderColor rounded-full bg-gray-50 hover:bg-gray-100 dark:bg-gray-950 dark:hover:bg-gray-900 text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary px-3 py-1 text-xs transition-theme",children:e.text},n))})})}var Ji=function(t){if(t=t||{},this.Promise=t.Promise||Promise,this.queues=Object.create(null),this.domainReentrant=t.domainReentrant||!1,this.domainReentrant){if(typeof An>"u"||typeof An.domain>"u")throw new Error("Domain-reentrant locks require `process.domain` to exist. Please flip `opts.domainReentrant = false`, use a NodeJS version that still implements Domain, or install a browser polyfill.");this.domains=Object.create(null)}this.timeout=t.timeout||Ji.DEFAULT_TIMEOUT,this.maxOccupationTime=t.maxOccupationTime||Ji.DEFAULT_MAX_OCCUPATION_TIME,this.maxExecutionTime=t.maxExecutionTime||Ji.DEFAULT_MAX_EXECUTION_TIME,t.maxPending===1/0||Number.isInteger(t.maxPending)&&t.maxPending>=0?this.maxPending=t.maxPending:this.maxPending=Ji.DEFAULT_MAX_PENDING};Ji.DEFAULT_TIMEOUT=0;Ji.DEFAULT_MAX_OCCUPATION_TIME=0;Ji.DEFAULT_MAX_EXECUTION_TIME=0;Ji.DEFAULT_MAX_PENDING=1e3;Ji.prototype.acquire=function(t,e,n,r){if(Array.isArray(t))return this._acquireBatch(t,e,n,r);if(typeof e!="function")throw new Error("You must pass a function to execute");var s=null,i=null,o=null;typeof n!="function"&&(r=n,n=null,o=new this.Promise(function(v,_){s=v,i=_})),r=r||{};var a=!1,l=null,c=null,u=null,d=this,h=function(v,_,E){c&&(clearTimeout(c),c=null),u&&(clearTimeout(u),u=null),v&&(d.queues[t]&&d.queues[t].length===0&&delete d.queues[t],d.domainReentrant&&delete d.domains[t]),a||(o?_?i(_):s(E):typeof n=="function"&&n(_,E),a=!0),v&&d.queues[t]&&d.queues[t].length>0&&d.queues[t].shift()()},f=function(v){if(a)return h(v);l&&(clearTimeout(l),l=null),d.domainReentrant&&v&&(d.domains[t]=An.domain);var _=r.maxExecutionTime||d.maxExecutionTime;if(_&&(u=setTimeout(function(){d.queues[t]&&h(v,new Error("Maximum execution time is exceeded "+t))},_)),e.length===1){var E=!1;try{e(function(w,S){E||(E=!0,h(v,w,S))})}catch(w){E||(E=!0,h(v,w))}}else d._promiseTry(function(){return e()}).then(function(w){h(v,void 0,w)},function(w){h(v,w)})};d.domainReentrant&&An.domain&&(f=An.domain.bind(f));var g=r.maxPending||d.maxPending;if(!d.queues[t])d.queues[t]=[],f(!0);else if(d.domainReentrant&&An.domain&&An.domain===d.domains[t])f(!1);else if(d.queues[t].length>=g)h(!1,new Error("Too many pending tasks in queue "+t));else{var y=function(){f(!0)};r.skipQueue?d.queues[t].unshift(y):d.queues[t].push(y);var m=r.timeout||d.timeout;m&&(l=setTimeout(function(){l=null,h(!1,new Error("async-lock timed out in queue "+t))},m))}var b=r.maxOccupationTime||d.maxOccupationTime;if(b&&(c=setTimeout(function(){d.queues[t]&&h(!1,new Error("Maximum occupation time is exceeded in queue "+t))},b)),o)return o};Ji.prototype._acquireBatch=function(t,e,n,r){typeof n!="function"&&(r=n,n=null);var s=this,i=function(a,l){return function(c){s.acquire(a,l,c,r)}},o=t.reduceRight(function(a,l){return i(l,a)},e);if(typeof n=="function")o(n);else return new this.Promise(function(a,l){o.length===1?o(function(c,u){c?l(c):a(u)}):a(o())})};Ji.prototype.isBusy=function(t){return t?!!this.queues[t]:Object.keys(this.queues).length>0};Ji.prototype._promiseTry=function(t){try{return this.Promise.resolve(t())}catch(e){return this.Promise.reject(e)}};var Nit=Ji,Pit=Nit;const XS=ao(Pit);var PI={exports:{}};typeof Object.create=="function"?PI.exports=function(e,n){n&&(e.super_=n,e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:PI.exports=function(e,n){if(n){e.super_=n;var r=function(){};r.prototype=n.prototype,e.prototype=new r,e.prototype.constructor=e}};var Iit=PI.exports,II={exports:{}};const Rit=bde(Ybe);/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var n=Rit,r=n.Buffer;function s(o,a){for(var l in o)a[l]=o[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=n:(s(n,e),e.Buffer=i);function i(o,a,l){return r(o,a,l)}i.prototype=Object.create(r.prototype),s(r,i),i.from=function(o,a,l){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,a,l)},i.alloc=function(o,a,l){if(typeof o!="number")throw new TypeError("Argument must be a number");var c=r(o);return a!==void 0?typeof l=="string"?c.fill(a,l):c.fill(a):c.fill(0),c},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(o)}})(II,II.exports);var tce=II.exports,nce=tce.Buffer;function HC(t,e){this._block=nce.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}HC.prototype.update=function(t,e){typeof t=="string"&&(e=e||"utf8",t=nce.from(t,e));for(var n=this._block,r=this._blockSize,s=t.length,i=this._len,o=0;o<s;){for(var a=i%r,l=Math.min(s-o,r-a),c=0;c<l;c++)n[a+c]=t[o+c];i+=l,o+=l,i%r===0&&this._update(n)}return this._len+=s,this};HC.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var n=this._len*8;if(n<=4294967295)this._block.writeUInt32BE(n,this._blockSize-4);else{var r=(n&4294967295)>>>0,s=(n-r)/4294967296;this._block.writeUInt32BE(s,this._blockSize-8),this._block.writeUInt32BE(r,this._blockSize-4)}this._update(this._block);var i=this._hash();return t?i.toString(t):i};HC.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var Lit=HC,Oit=Iit,rce=Lit,Dit=tce.Buffer,Mit=[1518500249,1859775393,-1894007588,-899497514],jit=new Array(80);function Zv(){this.init(),this._w=jit,rce.call(this,64,56)}Oit(Zv,rce);Zv.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function Fit(t){return t<<1|t>>>31}function Bit(t){return t<<5|t>>>27}function Uit(t){return t<<30|t>>>2}function $it(t,e,n,r){return t===0?e&n|~e&r:t===2?e&n|e&r|n&r:e^n^r}Zv.prototype._update=function(t){for(var e=this._w,n=this._a|0,r=this._b|0,s=this._c|0,i=this._d|0,o=this._e|0,a=0;a<16;++a)e[a]=t.readInt32BE(a*4);for(;a<80;++a)e[a]=Fit(e[a-3]^e[a-8]^e[a-14]^e[a-16]);for(var l=0;l<80;++l){var c=~~(l/20),u=Bit(n)+$it(c,r,s,i)+o+e[l]+Mit[c]|0;o=i,i=s,s=Uit(r),r=n,n=u}this._a=n+this._a|0,this._b=r+this._b|0,this._c=s+this._c|0,this._d=i+this._d|0,this._e=o+this._e|0};Zv.prototype._hash=function(){var t=Dit.allocUnsafe(20);return t.writeInt32BE(this._a|0,0),t.writeInt32BE(this._b|0,4),t.writeInt32BE(this._c|0,8),t.writeInt32BE(this._d|0,12),t.writeInt32BE(this._e|0,16),t};var Hit=Zv;const zit=ao(Hit);var sce={};/*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */(function(t){(function(e){e(typeof DO_NOT_EXPORT_CRC>"u"?t:{})})(function(e){e.version="1.2.2";function n(){for(var x=0,I=new Array(256),R=0;R!=256;++R)x=R,x=x&1?-306674912^x>>>1:x>>>1,x=x&1?-306674912^x>>>1:x>>>1,x=x&1?-306674912^x>>>1:x>>>1,x=x&1?-306674912^x>>>1:x>>>1,x=x&1?-306674912^x>>>1:x>>>1,x=x&1?-306674912^x>>>1:x>>>1,x=x&1?-306674912^x>>>1:x>>>1,x=x&1?-306674912^x>>>1:x>>>1,I[R]=x;return typeof Int32Array<"u"?new Int32Array(I):I}var r=n();function s(x){var I=0,R=0,C=0,N=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(C=0;C!=256;++C)N[C]=x[C];for(C=0;C!=256;++C)for(R=x[C],I=256+C;I<4096;I+=256)R=N[I]=R>>>8^x[R&255];var O=[];for(C=1;C!=16;++C)O[C-1]=typeof Int32Array<"u"?N.subarray(C*256,C*256+256):N.slice(C*256,C*256+256);return O}var i=s(r),o=i[0],a=i[1],l=i[2],c=i[3],u=i[4],d=i[5],h=i[6],f=i[7],g=i[8],y=i[9],m=i[10],b=i[11],v=i[12],_=i[13],E=i[14];function w(x,I){for(var R=I^-1,C=0,N=x.length;C<N;)R=R>>>8^r[(R^x.charCodeAt(C++))&255];return~R}function S(x,I){for(var R=I^-1,C=x.length-15,N=0;N<C;)R=E[x[N++]^R&255]^_[x[N++]^R>>8&255]^v[x[N++]^R>>16&255]^b[x[N++]^R>>>24]^m[x[N++]]^y[x[N++]]^g[x[N++]]^f[x[N++]]^h[x[N++]]^d[x[N++]]^u[x[N++]]^c[x[N++]]^l[x[N++]]^a[x[N++]]^o[x[N++]]^r[x[N++]];for(C+=15;N<C;)R=R>>>8^r[(R^x[N++])&255];return~R}function k(x,I){for(var R=I^-1,C=0,N=x.length,O=0,P=0;C<N;)O=x.charCodeAt(C++),O<128?R=R>>>8^r[(R^O)&255]:O<2048?(R=R>>>8^r[(R^(192|O>>6&31))&255],R=R>>>8^r[(R^(128|O&63))&255]):O>=55296&&O<57344?(O=(O&1023)+64,P=x.charCodeAt(C++)&1023,R=R>>>8^r[(R^(240|O>>8&7))&255],R=R>>>8^r[(R^(128|O>>2&63))&255],R=R>>>8^r[(R^(128|P>>6&15|(O&3)<<4))&255],R=R>>>8^r[(R^(128|P&63))&255]):(R=R>>>8^r[(R^(224|O>>12&15))&255],R=R>>>8^r[(R^(128|O>>6&63))&255],R=R>>>8^r[(R^(128|O&63))&255]);return~R}e.table=r,e.bstr=w,e.buf=S,e.str=k})})(sce);const Vit=ao(sce);var cu={};(function(t){var e=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function n(i,o){return Object.prototype.hasOwnProperty.call(i,o)}t.assign=function(i){for(var o=Array.prototype.slice.call(arguments,1);o.length;){var a=o.shift();if(a){if(typeof a!="object")throw new TypeError(a+"must be non-object");for(var l in a)n(a,l)&&(i[l]=a[l])}}return i},t.shrinkBuf=function(i,o){return i.length===o?i:i.subarray?i.subarray(0,o):(i.length=o,i)};var r={arraySet:function(i,o,a,l,c){if(o.subarray&&i.subarray){i.set(o.subarray(a,a+l),c);return}for(var u=0;u<l;u++)i[c+u]=o[a+u]},flattenChunks:function(i){var o,a,l,c,u,d;for(l=0,o=0,a=i.length;o<a;o++)l+=i[o].length;for(d=new Uint8Array(l),c=0,o=0,a=i.length;o<a;o++)u=i[o],d.set(u,c),c+=u.length;return d}},s={arraySet:function(i,o,a,l,c){for(var u=0;u<l;u++)i[c+u]=o[a+u]},flattenChunks:function(i){return[].concat.apply([],i)}};t.setTyped=function(i){i?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,r)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,s))},t.setTyped(e)})(cu);var Qv={},ic={},e0={},Wit=cu,Git=4,Hz=0,zz=1,qit=2;function t0(t){for(var e=t.length;--e>=0;)t[e]=0}var Kit=0,ice=1,Yit=2,Xit=3,Jit=258,ID=29,e_=256,z1=e_+1+ID,Fm=30,RD=19,oce=2*z1+1,Hh=15,k3=16,Zit=7,LD=256,ace=16,lce=17,cce=18,RI=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],T2=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Qit=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],uce=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],eot=512,Ac=new Array((z1+2)*2);t0(Ac);var Cy=new Array(Fm*2);t0(Cy);var V1=new Array(eot);t0(V1);var W1=new Array(Jit-Xit+1);t0(W1);var OD=new Array(ID);t0(OD);var JS=new Array(Fm);t0(JS);function C3(t,e,n,r,s){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=s,this.has_stree=t&&t.length}var dce,hce,fce;function A3(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function pce(t){return t<256?V1[t]:V1[256+(t>>>7)]}function G1(t,e){t.pending_buf[t.pending++]=e&255,t.pending_buf[t.pending++]=e>>>8&255}function Ri(t,e,n){t.bi_valid>k3-n?(t.bi_buf|=e<<t.bi_valid&65535,G1(t,t.bi_buf),t.bi_buf=e>>k3-t.bi_valid,t.bi_valid+=n-k3):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function Cl(t,e,n){Ri(t,n[e*2],n[e*2+1])}function mce(t,e){var n=0;do n|=t&1,t>>>=1,n<<=1;while(--e>0);return n>>>1}function tot(t){t.bi_valid===16?(G1(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=t.bi_buf&255,t.bi_buf>>=8,t.bi_valid-=8)}function not(t,e){var n=e.dyn_tree,r=e.max_code,s=e.stat_desc.static_tree,i=e.stat_desc.has_stree,o=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,l=e.stat_desc.max_length,c,u,d,h,f,g,y=0;for(h=0;h<=Hh;h++)t.bl_count[h]=0;for(n[t.heap[t.heap_max]*2+1]=0,c=t.heap_max+1;c<oce;c++)u=t.heap[c],h=n[n[u*2+1]*2+1]+1,h>l&&(h=l,y++),n[u*2+1]=h,!(u>r)&&(t.bl_count[h]++,f=0,u>=a&&(f=o[u-a]),g=n[u*2],t.opt_len+=g*(h+f),i&&(t.static_len+=g*(s[u*2+1]+f)));if(y!==0){do{for(h=l-1;t.bl_count[h]===0;)h--;t.bl_count[h]--,t.bl_count[h+1]+=2,t.bl_count[l]--,y-=2}while(y>0);for(h=l;h!==0;h--)for(u=t.bl_count[h];u!==0;)d=t.heap[--c],!(d>r)&&(n[d*2+1]!==h&&(t.opt_len+=(h-n[d*2+1])*n[d*2],n[d*2+1]=h),u--)}}function gce(t,e,n){var r=new Array(Hh+1),s=0,i,o;for(i=1;i<=Hh;i++)r[i]=s=s+n[i-1]<<1;for(o=0;o<=e;o++){var a=t[o*2+1];a!==0&&(t[o*2]=mce(r[a]++,a))}}function rot(){var t,e,n,r,s,i=new Array(Hh+1);for(n=0,r=0;r<ID-1;r++)for(OD[r]=n,t=0;t<1<<RI[r];t++)W1[n++]=r;for(W1[n-1]=r,s=0,r=0;r<16;r++)for(JS[r]=s,t=0;t<1<<T2[r];t++)V1[s++]=r;for(s>>=7;r<Fm;r++)for(JS[r]=s<<7,t=0;t<1<<T2[r]-7;t++)V1[256+s++]=r;for(e=0;e<=Hh;e++)i[e]=0;for(t=0;t<=143;)Ac[t*2+1]=8,t++,i[8]++;for(;t<=255;)Ac[t*2+1]=9,t++,i[9]++;for(;t<=279;)Ac[t*2+1]=7,t++,i[7]++;for(;t<=287;)Ac[t*2+1]=8,t++,i[8]++;for(gce(Ac,z1+1,i),t=0;t<Fm;t++)Cy[t*2+1]=5,Cy[t*2]=mce(t,5);dce=new C3(Ac,RI,e_+1,z1,Hh),hce=new C3(Cy,T2,0,Fm,Hh),fce=new C3(new Array(0),Qit,0,RD,Zit)}function bce(t){var e;for(e=0;e<z1;e++)t.dyn_ltree[e*2]=0;for(e=0;e<Fm;e++)t.dyn_dtree[e*2]=0;for(e=0;e<RD;e++)t.bl_tree[e*2]=0;t.dyn_ltree[LD*2]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function yce(t){t.bi_valid>8?G1(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function sot(t,e,n,r){yce(t),G1(t,n),G1(t,~n),Wit.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}function Vz(t,e,n,r){var s=e*2,i=n*2;return t[s]<t[i]||t[s]===t[i]&&r[e]<=r[n]}function T3(t,e,n){for(var r=t.heap[n],s=n<<1;s<=t.heap_len&&(s<t.heap_len&&Vz(e,t.heap[s+1],t.heap[s],t.depth)&&s++,!Vz(e,r,t.heap[s],t.depth));)t.heap[n]=t.heap[s],n=s,s<<=1;t.heap[n]=r}function Wz(t,e,n){var r,s,i=0,o,a;if(t.last_lit!==0)do r=t.pending_buf[t.d_buf+i*2]<<8|t.pending_buf[t.d_buf+i*2+1],s=t.pending_buf[t.l_buf+i],i++,r===0?Cl(t,s,e):(o=W1[s],Cl(t,o+e_+1,e),a=RI[o],a!==0&&(s-=OD[o],Ri(t,s,a)),r--,o=pce(r),Cl(t,o,n),a=T2[o],a!==0&&(r-=JS[o],Ri(t,r,a)));while(i<t.last_lit);Cl(t,LD,e)}function LI(t,e){var n=e.dyn_tree,r=e.stat_desc.static_tree,s=e.stat_desc.has_stree,i=e.stat_desc.elems,o,a,l=-1,c;for(t.heap_len=0,t.heap_max=oce,o=0;o<i;o++)n[o*2]!==0?(t.heap[++t.heap_len]=l=o,t.depth[o]=0):n[o*2+1]=0;for(;t.heap_len<2;)c=t.heap[++t.heap_len]=l<2?++l:0,n[c*2]=1,t.depth[c]=0,t.opt_len--,s&&(t.static_len-=r[c*2+1]);for(e.max_code=l,o=t.heap_len>>1;o>=1;o--)T3(t,n,o);c=i;do o=t.heap[1],t.heap[1]=t.heap[t.heap_len--],T3(t,n,1),a=t.heap[1],t.heap[--t.heap_max]=o,t.heap[--t.heap_max]=a,n[c*2]=n[o*2]+n[a*2],t.depth[c]=(t.depth[o]>=t.depth[a]?t.depth[o]:t.depth[a])+1,n[o*2+1]=n[a*2+1]=c,t.heap[1]=c++,T3(t,n,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],not(t,e),gce(n,l,t.bl_count)}function Gz(t,e,n){var r,s=-1,i,o=e[0*2+1],a=0,l=7,c=4;for(o===0&&(l=138,c=3),e[(n+1)*2+1]=65535,r=0;r<=n;r++)i=o,o=e[(r+1)*2+1],!(++a<l&&i===o)&&(a<c?t.bl_tree[i*2]+=a:i!==0?(i!==s&&t.bl_tree[i*2]++,t.bl_tree[ace*2]++):a<=10?t.bl_tree[lce*2]++:t.bl_tree[cce*2]++,a=0,s=i,o===0?(l=138,c=3):i===o?(l=6,c=3):(l=7,c=4))}function qz(t,e,n){var r,s=-1,i,o=e[0*2+1],a=0,l=7,c=4;for(o===0&&(l=138,c=3),r=0;r<=n;r++)if(i=o,o=e[(r+1)*2+1],!(++a<l&&i===o)){if(a<c)do Cl(t,i,t.bl_tree);while(--a!==0);else i!==0?(i!==s&&(Cl(t,i,t.bl_tree),a--),Cl(t,ace,t.bl_tree),Ri(t,a-3,2)):a<=10?(Cl(t,lce,t.bl_tree),Ri(t,a-3,3)):(Cl(t,cce,t.bl_tree),Ri(t,a-11,7));a=0,s=i,o===0?(l=138,c=3):i===o?(l=6,c=3):(l=7,c=4)}}function iot(t){var e;for(Gz(t,t.dyn_ltree,t.l_desc.max_code),Gz(t,t.dyn_dtree,t.d_desc.max_code),LI(t,t.bl_desc),e=RD-1;e>=3&&t.bl_tree[uce[e]*2+1]===0;e--);return t.opt_len+=3*(e+1)+5+5+4,e}function oot(t,e,n,r){var s;for(Ri(t,e-257,5),Ri(t,n-1,5),Ri(t,r-4,4),s=0;s<r;s++)Ri(t,t.bl_tree[uce[s]*2+1],3);qz(t,t.dyn_ltree,e-1),qz(t,t.dyn_dtree,n-1)}function aot(t){var e=4093624447,n;for(n=0;n<=31;n++,e>>>=1)if(e&1&&t.dyn_ltree[n*2]!==0)return Hz;if(t.dyn_ltree[9*2]!==0||t.dyn_ltree[10*2]!==0||t.dyn_ltree[13*2]!==0)return zz;for(n=32;n<e_;n++)if(t.dyn_ltree[n*2]!==0)return zz;return Hz}var Kz=!1;function lot(t){Kz||(rot(),Kz=!0),t.l_desc=new A3(t.dyn_ltree,dce),t.d_desc=new A3(t.dyn_dtree,hce),t.bl_desc=new A3(t.bl_tree,fce),t.bi_buf=0,t.bi_valid=0,bce(t)}function vce(t,e,n,r){Ri(t,(Kit<<1)+(r?1:0),3),sot(t,e,n)}function cot(t){Ri(t,ice<<1,3),Cl(t,LD,Ac),tot(t)}function uot(t,e,n,r){var s,i,o=0;t.level>0?(t.strm.data_type===qit&&(t.strm.data_type=aot(t)),LI(t,t.l_desc),LI(t,t.d_desc),o=iot(t),s=t.opt_len+3+7>>>3,i=t.static_len+3+7>>>3,i<=s&&(s=i)):s=i=n+5,n+4<=s&&e!==-1?vce(t,e,n,r):t.strategy===Git||i===s?(Ri(t,(ice<<1)+(r?1:0),3),Wz(t,Ac,Cy)):(Ri(t,(Yit<<1)+(r?1:0),3),oot(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),Wz(t,t.dyn_ltree,t.dyn_dtree)),bce(t),r&&yce(t)}function dot(t,e,n){return t.pending_buf[t.d_buf+t.last_lit*2]=e>>>8&255,t.pending_buf[t.d_buf+t.last_lit*2+1]=e&255,t.pending_buf[t.l_buf+t.last_lit]=n&255,t.last_lit++,e===0?t.dyn_ltree[n*2]++:(t.matches++,e--,t.dyn_ltree[(W1[n]+e_+1)*2]++,t.dyn_dtree[pce(e)*2]++),t.last_lit===t.lit_bufsize-1}e0._tr_init=lot;e0._tr_stored_block=vce;e0._tr_flush_block=uot;e0._tr_tally=dot;e0._tr_align=cot;function hot(t,e,n,r){for(var s=t&65535|0,i=t>>>16&65535|0,o=0;n!==0;){o=n>2e3?2e3:n,n-=o;do s=s+e[r++]|0,i=i+s|0;while(--o);s%=65521,i%=65521}return s|i<<16|0}var _ce=hot;function fot(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=t&1?3988292384^t>>>1:t>>>1;e[n]=t}return e}var pot=fot();function mot(t,e,n,r){var s=pot,i=r+n;t^=-1;for(var o=r;o<i;o++)t=t>>>8^s[(t^e[o])&255];return t^-1}var xce=mot,DD={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ri=cu,Ho=e0,wce=_ce,Uu=xce,got=DD,Xf=0,bot=1,yot=3,dd=4,Yz=5,Al=0,Xz=1,zo=-2,vot=-3,N3=-5,_ot=-1,xot=1,Ow=2,wot=3,Eot=4,Sot=0,kot=2,zC=8,Cot=9,Aot=15,Tot=8,Not=29,Pot=256,OI=Pot+1+Not,Iot=30,Rot=19,Lot=2*OI+1,Oot=15,un=3,rd=258,Ca=rd+un+1,Dot=32,VC=42,DI=69,N2=73,P2=91,I2=103,zh=113,jb=666,Wr=1,t_=2,If=3,n0=4,Mot=3;function sd(t,e){return t.msg=got[e],e}function Jz(t){return(t<<1)-(t>4?9:0)}function Xu(t){for(var e=t.length;--e>=0;)t[e]=0}function $u(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),n!==0&&(ri.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,e.pending===0&&(e.pending_out=0))}function xs(t,e){Ho._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,$u(t.strm)}function kn(t,e){t.pending_buf[t.pending++]=e}function cb(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=e&255}function jot(t,e,n,r){var s=t.avail_in;return s>r&&(s=r),s===0?0:(t.avail_in-=s,ri.arraySet(e,t.input,t.next_in,s,n),t.state.wrap===1?t.adler=wce(t.adler,e,s,n):t.state.wrap===2&&(t.adler=Uu(t.adler,e,s,n)),t.next_in+=s,t.total_in+=s,s)}function Ece(t,e){var n=t.max_chain_length,r=t.strstart,s,i,o=t.prev_length,a=t.nice_match,l=t.strstart>t.w_size-Ca?t.strstart-(t.w_size-Ca):0,c=t.window,u=t.w_mask,d=t.prev,h=t.strstart+rd,f=c[r+o-1],g=c[r+o];t.prev_length>=t.good_match&&(n>>=2),a>t.lookahead&&(a=t.lookahead);do if(s=e,!(c[s+o]!==g||c[s+o-1]!==f||c[s]!==c[r]||c[++s]!==c[r+1])){r+=2,s++;do;while(c[++r]===c[++s]&&c[++r]===c[++s]&&c[++r]===c[++s]&&c[++r]===c[++s]&&c[++r]===c[++s]&&c[++r]===c[++s]&&c[++r]===c[++s]&&c[++r]===c[++s]&&r<h);if(i=rd-(h-r),r=h-rd,i>o){if(t.match_start=e,o=i,i>=a)break;f=c[r+o-1],g=c[r+o]}}while((e=d[e&u])>l&&--n!==0);return o<=t.lookahead?o:t.lookahead}function Rf(t){var e=t.w_size,n,r,s,i,o;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-Ca)){ri.arraySet(t.window,t.window,e,e,0),t.match_start-=e,t.strstart-=e,t.block_start-=e,r=t.hash_size,n=r;do s=t.head[--n],t.head[n]=s>=e?s-e:0;while(--r);r=e,n=r;do s=t.prev[--n],t.prev[n]=s>=e?s-e:0;while(--r);i+=e}if(t.strm.avail_in===0)break;if(r=jot(t.strm,t.window,t.strstart+t.lookahead,i),t.lookahead+=r,t.lookahead+t.insert>=un)for(o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+un-1])&t.hash_mask,t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,!(t.lookahead+t.insert<un)););}while(t.lookahead<Ca&&t.strm.avail_in!==0)}function Fot(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Rf(t),t.lookahead===0&&e===Xf)return Wr;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+n;if((t.strstart===0||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,xs(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-Ca&&(xs(t,!1),t.strm.avail_out===0))return Wr}return t.insert=0,e===dd?(xs(t,!0),t.strm.avail_out===0?If:n0):(t.strstart>t.block_start&&(xs(t,!1),t.strm.avail_out===0),Wr)}function P3(t,e){for(var n,r;;){if(t.lookahead<Ca){if(Rf(t),t.lookahead<Ca&&e===Xf)return Wr;if(t.lookahead===0)break}if(n=0,t.lookahead>=un&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+un-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),n!==0&&t.strstart-n<=t.w_size-Ca&&(t.match_length=Ece(t,n)),t.match_length>=un)if(r=Ho._tr_tally(t,t.strstart-t.match_start,t.match_length-un),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=un){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+un-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!==0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else r=Ho._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(xs(t,!1),t.strm.avail_out===0))return Wr}return t.insert=t.strstart<un-1?t.strstart:un-1,e===dd?(xs(t,!0),t.strm.avail_out===0?If:n0):t.last_lit&&(xs(t,!1),t.strm.avail_out===0)?Wr:t_}function Hp(t,e){for(var n,r,s;;){if(t.lookahead<Ca){if(Rf(t),t.lookahead<Ca&&e===Xf)return Wr;if(t.lookahead===0)break}if(n=0,t.lookahead>=un&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+un-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=un-1,n!==0&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-Ca&&(t.match_length=Ece(t,n),t.match_length<=5&&(t.strategy===xot||t.match_length===un&&t.strstart-t.match_start>4096)&&(t.match_length=un-1)),t.prev_length>=un&&t.match_length<=t.prev_length){s=t.strstart+t.lookahead-un,r=Ho._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-un),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=s&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+un-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!==0);if(t.match_available=0,t.match_length=un-1,t.strstart++,r&&(xs(t,!1),t.strm.avail_out===0))return Wr}else if(t.match_available){if(r=Ho._tr_tally(t,0,t.window[t.strstart-1]),r&&xs(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return Wr}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=Ho._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<un-1?t.strstart:un-1,e===dd?(xs(t,!0),t.strm.avail_out===0?If:n0):t.last_lit&&(xs(t,!1),t.strm.avail_out===0)?Wr:t_}function Bot(t,e){for(var n,r,s,i,o=t.window;;){if(t.lookahead<=rd){if(Rf(t),t.lookahead<=rd&&e===Xf)return Wr;if(t.lookahead===0)break}if(t.match_length=0,t.lookahead>=un&&t.strstart>0&&(s=t.strstart-1,r=o[s],r===o[++s]&&r===o[++s]&&r===o[++s])){i=t.strstart+rd;do;while(r===o[++s]&&r===o[++s]&&r===o[++s]&&r===o[++s]&&r===o[++s]&&r===o[++s]&&r===o[++s]&&r===o[++s]&&s<i);t.match_length=rd-(i-s),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=un?(n=Ho._tr_tally(t,1,t.match_length-un),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=Ho._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(xs(t,!1),t.strm.avail_out===0))return Wr}return t.insert=0,e===dd?(xs(t,!0),t.strm.avail_out===0?If:n0):t.last_lit&&(xs(t,!1),t.strm.avail_out===0)?Wr:t_}function Uot(t,e){for(var n;;){if(t.lookahead===0&&(Rf(t),t.lookahead===0)){if(e===Xf)return Wr;break}if(t.match_length=0,n=Ho._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(xs(t,!1),t.strm.avail_out===0))return Wr}return t.insert=0,e===dd?(xs(t,!0),t.strm.avail_out===0?If:n0):t.last_lit&&(xs(t,!1),t.strm.avail_out===0)?Wr:t_}function sl(t,e,n,r,s){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=s}var gm;gm=[new sl(0,0,0,0,Fot),new sl(4,4,8,4,P3),new sl(4,5,16,8,P3),new sl(4,6,32,32,P3),new sl(4,4,16,16,Hp),new sl(8,16,32,32,Hp),new sl(8,16,128,128,Hp),new sl(8,32,128,256,Hp),new sl(32,128,258,1024,Hp),new sl(32,258,258,4096,Hp)];function $ot(t){t.window_size=2*t.w_size,Xu(t.head),t.max_lazy_match=gm[t.level].max_lazy,t.good_match=gm[t.level].good_length,t.nice_match=gm[t.level].nice_length,t.max_chain_length=gm[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=un-1,t.match_available=0,t.ins_h=0}function Hot(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=zC,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new ri.Buf16(Lot*2),this.dyn_dtree=new ri.Buf16((2*Iot+1)*2),this.bl_tree=new ri.Buf16((2*Rot+1)*2),Xu(this.dyn_ltree),Xu(this.dyn_dtree),Xu(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new ri.Buf16(Oot+1),this.heap=new ri.Buf16(2*OI+1),Xu(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new ri.Buf16(2*OI+1),Xu(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Sce(t){var e;return!t||!t.state?sd(t,zo):(t.total_in=t.total_out=0,t.data_type=kot,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?VC:zh,t.adler=e.wrap===2?0:1,e.last_flush=Xf,Ho._tr_init(e),Al)}function kce(t){var e=Sce(t);return e===Al&&$ot(t.state),e}function zot(t,e){return!t||!t.state||t.state.wrap!==2?zo:(t.state.gzhead=e,Al)}function Cce(t,e,n,r,s,i){if(!t)return zo;var o=1;if(e===_ot&&(e=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),s<1||s>Cot||n!==zC||r<8||r>15||e<0||e>9||i<0||i>Eot)return sd(t,zo);r===8&&(r=9);var a=new Hot;return t.state=a,a.strm=t,a.wrap=o,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=s+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+un-1)/un),a.window=new ri.Buf8(a.w_size*2),a.head=new ri.Buf16(a.hash_size),a.prev=new ri.Buf16(a.w_size),a.lit_bufsize=1<<s+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new ri.Buf8(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=e,a.strategy=i,a.method=n,kce(t)}function Vot(t,e){return Cce(t,e,zC,Aot,Tot,Sot)}function Wot(t,e){var n,r,s,i;if(!t||!t.state||e>Yz||e<0)return t?sd(t,zo):zo;if(r=t.state,!t.output||!t.input&&t.avail_in!==0||r.status===jb&&e!==dd)return sd(t,t.avail_out===0?N3:zo);if(r.strm=t,n=r.last_flush,r.last_flush=e,r.status===VC)if(r.wrap===2)t.adler=0,kn(r,31),kn(r,139),kn(r,8),r.gzhead?(kn(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),kn(r,r.gzhead.time&255),kn(r,r.gzhead.time>>8&255),kn(r,r.gzhead.time>>16&255),kn(r,r.gzhead.time>>24&255),kn(r,r.level===9?2:r.strategy>=Ow||r.level<2?4:0),kn(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(kn(r,r.gzhead.extra.length&255),kn(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=Uu(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=DI):(kn(r,0),kn(r,0),kn(r,0),kn(r,0),kn(r,0),kn(r,r.level===9?2:r.strategy>=Ow||r.level<2?4:0),kn(r,Mot),r.status=zh);else{var o=zC+(r.w_bits-8<<4)<<8,a=-1;r.strategy>=Ow||r.level<2?a=0:r.level<6?a=1:r.level===6?a=2:a=3,o|=a<<6,r.strstart!==0&&(o|=Dot),o+=31-o%31,r.status=zh,cb(r,o),r.strstart!==0&&(cb(r,t.adler>>>16),cb(r,t.adler&65535)),t.adler=1}if(r.status===DI)if(r.gzhead.extra){for(s=r.pending;r.gzindex<(r.gzhead.extra.length&65535)&&!(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(t.adler=Uu(t.adler,r.pending_buf,r.pending-s,s)),$u(t),s=r.pending,r.pending===r.pending_buf_size));)kn(r,r.gzhead.extra[r.gzindex]&255),r.gzindex++;r.gzhead.hcrc&&r.pending>s&&(t.adler=Uu(t.adler,r.pending_buf,r.pending-s,s)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=N2)}else r.status=N2;if(r.status===N2)if(r.gzhead.name){s=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(t.adler=Uu(t.adler,r.pending_buf,r.pending-s,s)),$u(t),s=r.pending,r.pending===r.pending_buf_size)){i=1;break}r.gzindex<r.gzhead.name.length?i=r.gzhead.name.charCodeAt(r.gzindex++)&255:i=0,kn(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>s&&(t.adler=Uu(t.adler,r.pending_buf,r.pending-s,s)),i===0&&(r.gzindex=0,r.status=P2)}else r.status=P2;if(r.status===P2)if(r.gzhead.comment){s=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(t.adler=Uu(t.adler,r.pending_buf,r.pending-s,s)),$u(t),s=r.pending,r.pending===r.pending_buf_size)){i=1;break}r.gzindex<r.gzhead.comment.length?i=r.gzhead.comment.charCodeAt(r.gzindex++)&255:i=0,kn(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>s&&(t.adler=Uu(t.adler,r.pending_buf,r.pending-s,s)),i===0&&(r.status=I2)}else r.status=I2;if(r.status===I2&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&$u(t),r.pending+2<=r.pending_buf_size&&(kn(r,t.adler&255),kn(r,t.adler>>8&255),t.adler=0,r.status=zh)):r.status=zh),r.pending!==0){if($u(t),t.avail_out===0)return r.last_flush=-1,Al}else if(t.avail_in===0&&Jz(e)<=Jz(n)&&e!==dd)return sd(t,N3);if(r.status===jb&&t.avail_in!==0)return sd(t,N3);if(t.avail_in!==0||r.lookahead!==0||e!==Xf&&r.status!==jb){var l=r.strategy===Ow?Uot(r,e):r.strategy===wot?Bot(r,e):gm[r.level].func(r,e);if((l===If||l===n0)&&(r.status=jb),l===Wr||l===If)return t.avail_out===0&&(r.last_flush=-1),Al;if(l===t_&&(e===bot?Ho._tr_align(r):e!==Yz&&(Ho._tr_stored_block(r,0,0,!1),e===yot&&(Xu(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),$u(t),t.avail_out===0))return r.last_flush=-1,Al}return e!==dd?Al:r.wrap<=0?Xz:(r.wrap===2?(kn(r,t.adler&255),kn(r,t.adler>>8&255),kn(r,t.adler>>16&255),kn(r,t.adler>>24&255),kn(r,t.total_in&255),kn(r,t.total_in>>8&255),kn(r,t.total_in>>16&255),kn(r,t.total_in>>24&255)):(cb(r,t.adler>>>16),cb(r,t.adler&65535)),$u(t),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?Al:Xz)}function Got(t){var e;return!t||!t.state?zo:(e=t.state.status,e!==VC&&e!==DI&&e!==N2&&e!==P2&&e!==I2&&e!==zh&&e!==jb?sd(t,zo):(t.state=null,e===zh?sd(t,vot):Al))}function qot(t,e){var n=e.length,r,s,i,o,a,l,c,u;if(!t||!t.state||(r=t.state,o=r.wrap,o===2||o===1&&r.status!==VC||r.lookahead))return zo;for(o===1&&(t.adler=wce(t.adler,e,n,0)),r.wrap=0,n>=r.w_size&&(o===0&&(Xu(r.head),r.strstart=0,r.block_start=0,r.insert=0),u=new ri.Buf8(r.w_size),ri.arraySet(u,e,n-r.w_size,r.w_size,0),e=u,n=r.w_size),a=t.avail_in,l=t.next_in,c=t.input,t.avail_in=n,t.next_in=0,t.input=e,Rf(r);r.lookahead>=un;){s=r.strstart,i=r.lookahead-(un-1);do r.ins_h=(r.ins_h<<r.hash_shift^r.window[s+un-1])&r.hash_mask,r.prev[s&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=s,s++;while(--i);r.strstart=s,r.lookahead=un-1,Rf(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=un-1,r.match_available=0,t.next_in=l,t.input=c,t.avail_in=a,r.wrap=o,Al}ic.deflateInit=Vot;ic.deflateInit2=Cce;ic.deflateReset=kce;ic.deflateResetKeep=Sce;ic.deflateSetHeader=zot;ic.deflate=Wot;ic.deflateEnd=Got;ic.deflateSetDictionary=qot;ic.deflateInfo="pako deflate (from Nodeca project)";var Jf={},WC=cu,Ace=!0,Tce=!0;try{String.fromCharCode.apply(null,[0])}catch{Ace=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Tce=!1}var q1=new WC.Buf8(256);for(var Nu=0;Nu<256;Nu++)q1[Nu]=Nu>=252?6:Nu>=248?5:Nu>=240?4:Nu>=224?3:Nu>=192?2:1;q1[254]=q1[254]=1;Jf.string2buf=function(t){var e,n,r,s,i,o=t.length,a=0;for(s=0;s<o;s++)n=t.charCodeAt(s),(n&64512)===55296&&s+1<o&&(r=t.charCodeAt(s+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),s++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(e=new WC.Buf8(a),i=0,s=0;i<a;s++)n=t.charCodeAt(s),(n&64512)===55296&&s+1<o&&(r=t.charCodeAt(s+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),s++)),n<128?e[i++]=n:n<2048?(e[i++]=192|n>>>6,e[i++]=128|n&63):n<65536?(e[i++]=224|n>>>12,e[i++]=128|n>>>6&63,e[i++]=128|n&63):(e[i++]=240|n>>>18,e[i++]=128|n>>>12&63,e[i++]=128|n>>>6&63,e[i++]=128|n&63);return e};function Nce(t,e){if(e<65534&&(t.subarray&&Tce||!t.subarray&&Ace))return String.fromCharCode.apply(null,WC.shrinkBuf(t,e));for(var n="",r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n}Jf.buf2binstring=function(t){return Nce(t,t.length)};Jf.binstring2buf=function(t){for(var e=new WC.Buf8(t.length),n=0,r=e.length;n<r;n++)e[n]=t.charCodeAt(n);return e};Jf.buf2string=function(t,e){var n,r,s,i,o=e||t.length,a=new Array(o*2);for(r=0,n=0;n<o;){if(s=t[n++],s<128){a[r++]=s;continue}if(i=q1[s],i>4){a[r++]=65533,n+=i-1;continue}for(s&=i===2?31:i===3?15:7;i>1&&n<o;)s=s<<6|t[n++]&63,i--;if(i>1){a[r++]=65533;continue}s<65536?a[r++]=s:(s-=65536,a[r++]=55296|s>>10&1023,a[r++]=56320|s&1023)}return Nce(a,r)};Jf.utf8border=function(t,e){var n;for(e=e||t.length,e>t.length&&(e=t.length),n=e-1;n>=0&&(t[n]&192)===128;)n--;return n<0||n===0?e:n+q1[t[n]]>e?n:e};function Kot(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Pce=Kot,Ay=ic,Ty=cu,MI=Jf,jI=DD,Yot=Pce,Ice=Object.prototype.toString,Xot=0,I3=4,Bm=0,Zz=1,Qz=2,Jot=-1,Zot=0,Qot=8;function Lf(t){if(!(this instanceof Lf))return new Lf(t);this.options=Ty.assign({level:Jot,method:Qot,chunkSize:16384,windowBits:15,memLevel:8,strategy:Zot,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Yot,this.strm.avail_out=0;var n=Ay.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==Bm)throw new Error(jI[n]);if(e.header&&Ay.deflateSetHeader(this.strm,e.header),e.dictionary){var r;if(typeof e.dictionary=="string"?r=MI.string2buf(e.dictionary):Ice.call(e.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(e.dictionary):r=e.dictionary,n=Ay.deflateSetDictionary(this.strm,r),n!==Bm)throw new Error(jI[n]);this._dict_set=!0}}Lf.prototype.push=function(t,e){var n=this.strm,r=this.options.chunkSize,s,i;if(this.ended)return!1;i=e===~~e?e:e===!0?I3:Xot,typeof t=="string"?n.input=MI.string2buf(t):Ice.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;do{if(n.avail_out===0&&(n.output=new Ty.Buf8(r),n.next_out=0,n.avail_out=r),s=Ay.deflate(n,i),s!==Zz&&s!==Bm)return this.onEnd(s),this.ended=!0,!1;(n.avail_out===0||n.avail_in===0&&(i===I3||i===Qz))&&(this.options.to==="string"?this.onData(MI.buf2binstring(Ty.shrinkBuf(n.output,n.next_out))):this.onData(Ty.shrinkBuf(n.output,n.next_out)))}while((n.avail_in>0||n.avail_out===0)&&s!==Zz);return i===I3?(s=Ay.deflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===Bm):(i===Qz&&(this.onEnd(Bm),n.avail_out=0),!0)};Lf.prototype.onData=function(t){this.chunks.push(t)};Lf.prototype.onEnd=function(t){t===Bm&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Ty.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function MD(t,e){var n=new Lf(e);if(n.push(t,!0),n.err)throw n.msg||jI[n.err];return n.result}function eat(t,e){return e=e||{},e.raw=!0,MD(t,e)}function tat(t,e){return e=e||{},e.gzip=!0,MD(t,e)}Qv.Deflate=Lf;Qv.deflate=MD;Qv.deflateRaw=eat;Qv.gzip=tat;var n_={},Ua={},Dw=30,nat=12,rat=function(e,n){var r,s,i,o,a,l,c,u,d,h,f,g,y,m,b,v,_,E,w,S,k,x,I,R,C;r=e.state,s=e.next_in,R=e.input,i=s+(e.avail_in-5),o=e.next_out,C=e.output,a=o-(n-e.avail_out),l=o+(e.avail_out-257),c=r.dmax,u=r.wsize,d=r.whave,h=r.wnext,f=r.window,g=r.hold,y=r.bits,m=r.lencode,b=r.distcode,v=(1<<r.lenbits)-1,_=(1<<r.distbits)-1;e:do{y<15&&(g+=R[s++]<<y,y+=8,g+=R[s++]<<y,y+=8),E=m[g&v];t:for(;;){if(w=E>>>24,g>>>=w,y-=w,w=E>>>16&255,w===0)C[o++]=E&65535;else if(w&16){S=E&65535,w&=15,w&&(y<w&&(g+=R[s++]<<y,y+=8),S+=g&(1<<w)-1,g>>>=w,y-=w),y<15&&(g+=R[s++]<<y,y+=8,g+=R[s++]<<y,y+=8),E=b[g&_];n:for(;;){if(w=E>>>24,g>>>=w,y-=w,w=E>>>16&255,w&16){if(k=E&65535,w&=15,y<w&&(g+=R[s++]<<y,y+=8,y<w&&(g+=R[s++]<<y,y+=8)),k+=g&(1<<w)-1,k>c){e.msg="invalid distance too far back",r.mode=Dw;break e}if(g>>>=w,y-=w,w=o-a,k>w){if(w=k-w,w>d&&r.sane){e.msg="invalid distance too far back",r.mode=Dw;break e}if(x=0,I=f,h===0){if(x+=u-w,w<S){S-=w;do C[o++]=f[x++];while(--w);x=o-k,I=C}}else if(h<w){if(x+=u+h-w,w-=h,w<S){S-=w;do C[o++]=f[x++];while(--w);if(x=0,h<S){w=h,S-=w;do C[o++]=f[x++];while(--w);x=o-k,I=C}}}else if(x+=h-w,w<S){S-=w;do C[o++]=f[x++];while(--w);x=o-k,I=C}for(;S>2;)C[o++]=I[x++],C[o++]=I[x++],C[o++]=I[x++],S-=3;S&&(C[o++]=I[x++],S>1&&(C[o++]=I[x++]))}else{x=o-k;do C[o++]=C[x++],C[o++]=C[x++],C[o++]=C[x++],S-=3;while(S>2);S&&(C[o++]=C[x++],S>1&&(C[o++]=C[x++]))}}else if(w&64){e.msg="invalid distance code",r.mode=Dw;break e}else{E=b[(E&65535)+(g&(1<<w)-1)];continue n}break}}else if(w&64)if(w&32){r.mode=nat;break e}else{e.msg="invalid literal/length code",r.mode=Dw;break e}else{E=m[(E&65535)+(g&(1<<w)-1)];continue t}break}}while(s<i&&o<l);S=y>>3,s-=S,y-=S<<3,g&=(1<<y)-1,e.next_in=s,e.next_out=o,e.avail_in=s<i?5+(i-s):5-(s-i),e.avail_out=o<l?257+(l-o):257-(o-l),r.hold=g,r.bits=y},eV=cu,zp=15,tV=852,nV=592,rV=0,R3=1,sV=2,sat=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],iat=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],oat=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],aat=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],lat=function(e,n,r,s,i,o,a,l){var c=l.bits,u=0,d=0,h=0,f=0,g=0,y=0,m=0,b=0,v=0,_=0,E,w,S,k,x,I=null,R=0,C,N=new eV.Buf16(zp+1),O=new eV.Buf16(zp+1),P=null,$=0,ee,J,Z;for(u=0;u<=zp;u++)N[u]=0;for(d=0;d<s;d++)N[n[r+d]]++;for(g=c,f=zp;f>=1&&N[f]===0;f--);if(g>f&&(g=f),f===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,l.bits=1,0;for(h=1;h<f&&N[h]===0;h++);for(g<h&&(g=h),b=1,u=1;u<=zp;u++)if(b<<=1,b-=N[u],b<0)return-1;if(b>0&&(e===rV||f!==1))return-1;for(O[1]=0,u=1;u<zp;u++)O[u+1]=O[u]+N[u];for(d=0;d<s;d++)n[r+d]!==0&&(a[O[n[r+d]]++]=d);if(e===rV?(I=P=a,C=19):e===R3?(I=sat,R-=257,P=iat,$-=257,C=256):(I=oat,P=aat,C=-1),_=0,d=0,u=h,x=o,y=g,m=0,S=-1,v=1<<g,k=v-1,e===R3&&v>tV||e===sV&&v>nV)return 1;for(;;){ee=u-m,a[d]<C?(J=0,Z=a[d]):a[d]>C?(J=P[$+a[d]],Z=I[R+a[d]]):(J=96,Z=0),E=1<<u-m,w=1<<y,h=w;do w-=E,i[x+(_>>m)+w]=ee<<24|J<<16|Z|0;while(w!==0);for(E=1<<u-1;_&E;)E>>=1;if(E!==0?(_&=E-1,_+=E):_=0,d++,--N[u]===0){if(u===f)break;u=n[r+a[d]]}if(u>g&&(_&k)!==S){for(m===0&&(m=g),x+=h,y=u-m,b=1<<y;y+m<f&&(b-=N[y+m],!(b<=0));)y++,b<<=1;if(v+=1<<y,e===R3&&v>tV||e===sV&&v>nV)return 1;S=_&k,i[S]=g<<24|y<<16|x-o|0}}return _!==0&&(i[x+_]=u-m<<24|64<<16|0),l.bits=g,0},Zi=cu,FI=_ce,il=xce,cat=rat,Ny=lat,uat=0,Rce=1,Lce=2,iV=4,dat=5,Mw=6,Of=0,hat=1,fat=2,Yo=-2,Oce=-3,Dce=-4,pat=-5,oV=8,Mce=1,aV=2,lV=3,cV=4,uV=5,dV=6,hV=7,fV=8,pV=9,mV=10,ZS=11,vc=12,L3=13,gV=14,O3=15,bV=16,yV=17,vV=18,_V=19,jw=20,Fw=21,xV=22,wV=23,EV=24,SV=25,kV=26,D3=27,CV=28,AV=29,rr=30,jce=31,mat=32,gat=852,bat=592,yat=15,vat=yat;function TV(t){return(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24)}function _at(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Zi.Buf16(320),this.work=new Zi.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Fce(t){var e;return!t||!t.state?Yo:(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=Mce,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Zi.Buf32(gat),e.distcode=e.distdyn=new Zi.Buf32(bat),e.sane=1,e.back=-1,Of)}function Bce(t){var e;return!t||!t.state?Yo:(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,Fce(t))}function Uce(t,e){var n,r;return!t||!t.state||(r=t.state,e<0?(n=0,e=-e):(n=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15))?Yo:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,Bce(t))}function $ce(t,e){var n,r;return t?(r=new _at,t.state=r,r.window=null,n=Uce(t,e),n!==Of&&(t.state=null),n):Yo}function xat(t){return $ce(t,vat)}var NV=!0,M3,j3;function wat(t){if(NV){var e;for(M3=new Zi.Buf32(512),j3=new Zi.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Ny(Rce,t.lens,0,288,M3,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Ny(Lce,t.lens,0,32,j3,0,t.work,{bits:5}),NV=!1}t.lencode=M3,t.lenbits=9,t.distcode=j3,t.distbits=5}function Hce(t,e,n,r){var s,i=t.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Zi.Buf8(i.wsize)),r>=i.wsize?(Zi.arraySet(i.window,e,n-i.wsize,i.wsize,0),i.wnext=0,i.whave=i.wsize):(s=i.wsize-i.wnext,s>r&&(s=r),Zi.arraySet(i.window,e,n-r,s,i.wnext),r-=s,r?(Zi.arraySet(i.window,e,n-r,r,0),i.wnext=r,i.whave=i.wsize):(i.wnext+=s,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=s))),0}function Eat(t,e){var n,r,s,i,o,a,l,c,u,d,h,f,g,y,m=0,b,v,_,E,w,S,k,x,I=new Zi.Buf8(4),R,C,N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&t.avail_in!==0)return Yo;n=t.state,n.mode===vc&&(n.mode=L3),o=t.next_out,s=t.output,l=t.avail_out,i=t.next_in,r=t.input,a=t.avail_in,c=n.hold,u=n.bits,d=a,h=l,x=Of;e:for(;;)switch(n.mode){case Mce:if(n.wrap===0){n.mode=L3;break}for(;u<16;){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}if(n.wrap&2&&c===35615){n.check=0,I[0]=c&255,I[1]=c>>>8&255,n.check=il(n.check,I,2,0),c=0,u=0,n.mode=aV;break}if(n.flags=0,n.head&&(n.head.done=!1),!(n.wrap&1)||(((c&255)<<8)+(c>>8))%31){t.msg="incorrect header check",n.mode=rr;break}if((c&15)!==oV){t.msg="unknown compression method",n.mode=rr;break}if(c>>>=4,u-=4,k=(c&15)+8,n.wbits===0)n.wbits=k;else if(k>n.wbits){t.msg="invalid window size",n.mode=rr;break}n.dmax=1<<k,t.adler=n.check=1,n.mode=c&512?mV:vc,c=0,u=0;break;case aV:for(;u<16;){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}if(n.flags=c,(n.flags&255)!==oV){t.msg="unknown compression method",n.mode=rr;break}if(n.flags&57344){t.msg="unknown header flags set",n.mode=rr;break}n.head&&(n.head.text=c>>8&1),n.flags&512&&(I[0]=c&255,I[1]=c>>>8&255,n.check=il(n.check,I,2,0)),c=0,u=0,n.mode=lV;case lV:for(;u<32;){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}n.head&&(n.head.time=c),n.flags&512&&(I[0]=c&255,I[1]=c>>>8&255,I[2]=c>>>16&255,I[3]=c>>>24&255,n.check=il(n.check,I,4,0)),c=0,u=0,n.mode=cV;case cV:for(;u<16;){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}n.head&&(n.head.xflags=c&255,n.head.os=c>>8),n.flags&512&&(I[0]=c&255,I[1]=c>>>8&255,n.check=il(n.check,I,2,0)),c=0,u=0,n.mode=uV;case uV:if(n.flags&1024){for(;u<16;){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),n.flags&512&&(I[0]=c&255,I[1]=c>>>8&255,n.check=il(n.check,I,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=dV;case dV:if(n.flags&1024&&(f=n.length,f>a&&(f=a),f&&(n.head&&(k=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),Zi.arraySet(n.head.extra,r,i,f,k)),n.flags&512&&(n.check=il(n.check,r,f,i)),a-=f,i+=f,n.length-=f),n.length))break e;n.length=0,n.mode=hV;case hV:if(n.flags&2048){if(a===0)break e;f=0;do k=r[i+f++],n.head&&k&&n.length<65536&&(n.head.name+=String.fromCharCode(k));while(k&&f<a);if(n.flags&512&&(n.check=il(n.check,r,f,i)),a-=f,i+=f,k)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=fV;case fV:if(n.flags&4096){if(a===0)break e;f=0;do k=r[i+f++],n.head&&k&&n.length<65536&&(n.head.comment+=String.fromCharCode(k));while(k&&f<a);if(n.flags&512&&(n.check=il(n.check,r,f,i)),a-=f,i+=f,k)break e}else n.head&&(n.head.comment=null);n.mode=pV;case pV:if(n.flags&512){for(;u<16;){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}if(c!==(n.check&65535)){t.msg="header crc mismatch",n.mode=rr;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=vc;break;case mV:for(;u<32;){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}t.adler=n.check=TV(c),c=0,u=0,n.mode=ZS;case ZS:if(n.havedict===0)return t.next_out=o,t.avail_out=l,t.next_in=i,t.avail_in=a,n.hold=c,n.bits=u,fat;t.adler=n.check=1,n.mode=vc;case vc:if(e===dat||e===Mw)break e;case L3:if(n.last){c>>>=u&7,u-=u&7,n.mode=D3;break}for(;u<3;){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}switch(n.last=c&1,c>>>=1,u-=1,c&3){case 0:n.mode=gV;break;case 1:if(wat(n),n.mode=jw,e===Mw){c>>>=2,u-=2;break e}break;case 2:n.mode=yV;break;case 3:t.msg="invalid block type",n.mode=rr}c>>>=2,u-=2;break;case gV:for(c>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){t.msg="invalid stored block lengths",n.mode=rr;break}if(n.length=c&65535,c=0,u=0,n.mode=O3,e===Mw)break e;case O3:n.mode=bV;case bV:if(f=n.length,f){if(f>a&&(f=a),f>l&&(f=l),f===0)break e;Zi.arraySet(s,r,i,f,o),a-=f,i+=f,l-=f,o+=f,n.length-=f;break}n.mode=vc;break;case yV:for(;u<14;){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}if(n.nlen=(c&31)+257,c>>>=5,u-=5,n.ndist=(c&31)+1,c>>>=5,u-=5,n.ncode=(c&15)+4,c>>>=4,u-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=rr;break}n.have=0,n.mode=vV;case vV:for(;n.have<n.ncode;){for(;u<3;){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}n.lens[N[n.have++]]=c&7,c>>>=3,u-=3}for(;n.have<19;)n.lens[N[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,R={bits:n.lenbits},x=Ny(uat,n.lens,0,19,n.lencode,0,n.work,R),n.lenbits=R.bits,x){t.msg="invalid code lengths set",n.mode=rr;break}n.have=0,n.mode=_V;case _V:for(;n.have<n.nlen+n.ndist;){for(;m=n.lencode[c&(1<<n.lenbits)-1],b=m>>>24,v=m>>>16&255,_=m&65535,!(b<=u);){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}if(_<16)c>>>=b,u-=b,n.lens[n.have++]=_;else{if(_===16){for(C=b+2;u<C;){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}if(c>>>=b,u-=b,n.have===0){t.msg="invalid bit length repeat",n.mode=rr;break}k=n.lens[n.have-1],f=3+(c&3),c>>>=2,u-=2}else if(_===17){for(C=b+3;u<C;){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}c>>>=b,u-=b,k=0,f=3+(c&7),c>>>=3,u-=3}else{for(C=b+7;u<C;){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}c>>>=b,u-=b,k=0,f=11+(c&127),c>>>=7,u-=7}if(n.have+f>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=rr;break}for(;f--;)n.lens[n.have++]=k}}if(n.mode===rr)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=rr;break}if(n.lenbits=9,R={bits:n.lenbits},x=Ny(Rce,n.lens,0,n.nlen,n.lencode,0,n.work,R),n.lenbits=R.bits,x){t.msg="invalid literal/lengths set",n.mode=rr;break}if(n.distbits=6,n.distcode=n.distdyn,R={bits:n.distbits},x=Ny(Lce,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,R),n.distbits=R.bits,x){t.msg="invalid distances set",n.mode=rr;break}if(n.mode=jw,e===Mw)break e;case jw:n.mode=Fw;case Fw:if(a>=6&&l>=258){t.next_out=o,t.avail_out=l,t.next_in=i,t.avail_in=a,n.hold=c,n.bits=u,cat(t,h),o=t.next_out,s=t.output,l=t.avail_out,i=t.next_in,r=t.input,a=t.avail_in,c=n.hold,u=n.bits,n.mode===vc&&(n.back=-1);break}for(n.back=0;m=n.lencode[c&(1<<n.lenbits)-1],b=m>>>24,v=m>>>16&255,_=m&65535,!(b<=u);){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}if(v&&!(v&240)){for(E=b,w=v,S=_;m=n.lencode[S+((c&(1<<E+w)-1)>>E)],b=m>>>24,v=m>>>16&255,_=m&65535,!(E+b<=u);){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}c>>>=E,u-=E,n.back+=E}if(c>>>=b,u-=b,n.back+=b,n.length=_,v===0){n.mode=kV;break}if(v&32){n.back=-1,n.mode=vc;break}if(v&64){t.msg="invalid literal/length code",n.mode=rr;break}n.extra=v&15,n.mode=xV;case xV:if(n.extra){for(C=n.extra;u<C;){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=wV;case wV:for(;m=n.distcode[c&(1<<n.distbits)-1],b=m>>>24,v=m>>>16&255,_=m&65535,!(b<=u);){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}if(!(v&240)){for(E=b,w=v,S=_;m=n.distcode[S+((c&(1<<E+w)-1)>>E)],b=m>>>24,v=m>>>16&255,_=m&65535,!(E+b<=u);){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}c>>>=E,u-=E,n.back+=E}if(c>>>=b,u-=b,n.back+=b,v&64){t.msg="invalid distance code",n.mode=rr;break}n.offset=_,n.extra=v&15,n.mode=EV;case EV:if(n.extra){for(C=n.extra;u<C;){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=rr;break}n.mode=SV;case SV:if(l===0)break e;if(f=h-l,n.offset>f){if(f=n.offset-f,f>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=rr;break}f>n.wnext?(f-=n.wnext,g=n.wsize-f):g=n.wnext-f,f>n.length&&(f=n.length),y=n.window}else y=s,g=o-n.offset,f=n.length;f>l&&(f=l),l-=f,n.length-=f;do s[o++]=y[g++];while(--f);n.length===0&&(n.mode=Fw);break;case kV:if(l===0)break e;s[o++]=n.length,l--,n.mode=Fw;break;case D3:if(n.wrap){for(;u<32;){if(a===0)break e;a--,c|=r[i++]<<u,u+=8}if(h-=l,t.total_out+=h,n.total+=h,h&&(t.adler=n.check=n.flags?il(n.check,s,h,o-h):FI(n.check,s,h,o-h)),h=l,(n.flags?c:TV(c))!==n.check){t.msg="incorrect data check",n.mode=rr;break}c=0,u=0}n.mode=CV;case CV:if(n.wrap&&n.flags){for(;u<32;){if(a===0)break e;a--,c+=r[i++]<<u,u+=8}if(c!==(n.total&4294967295)){t.msg="incorrect length check",n.mode=rr;break}c=0,u=0}n.mode=AV;case AV:x=hat;break e;case rr:x=Oce;break e;case jce:return Dce;case mat:default:return Yo}return t.next_out=o,t.avail_out=l,t.next_in=i,t.avail_in=a,n.hold=c,n.bits=u,(n.wsize||h!==t.avail_out&&n.mode<rr&&(n.mode<D3||e!==iV))&&Hce(t,t.output,t.next_out,h-t.avail_out),d-=t.avail_in,h-=t.avail_out,t.total_in+=d,t.total_out+=h,n.total+=h,n.wrap&&h&&(t.adler=n.check=n.flags?il(n.check,s,h,t.next_out-h):FI(n.check,s,h,t.next_out-h)),t.data_type=n.bits+(n.last?64:0)+(n.mode===vc?128:0)+(n.mode===jw||n.mode===O3?256:0),(d===0&&h===0||e===iV)&&x===Of&&(x=pat),x}function Sat(t){if(!t||!t.state)return Yo;var e=t.state;return e.window&&(e.window=null),t.state=null,Of}function kat(t,e){var n;return!t||!t.state||(n=t.state,!(n.wrap&2))?Yo:(n.head=e,e.done=!1,Of)}function Cat(t,e){var n=e.length,r,s,i;return!t||!t.state||(r=t.state,r.wrap!==0&&r.mode!==ZS)?Yo:r.mode===ZS&&(s=1,s=FI(s,e,n,0),s!==r.check)?Oce:(i=Hce(t,e,n,n),i?(r.mode=jce,Dce):(r.havedict=1,Of))}Ua.inflateReset=Bce;Ua.inflateReset2=Uce;Ua.inflateResetKeep=Fce;Ua.inflateInit=xat;Ua.inflateInit2=$ce;Ua.inflate=Eat;Ua.inflateEnd=Sat;Ua.inflateGetHeader=kat;Ua.inflateSetDictionary=Cat;Ua.inflateInfo="pako inflate (from Nodeca project)";var zce={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};function Aat(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Tat=Aat,Um=Ua,Py=cu,R2=Jf,kr=zce,BI=DD,Nat=Pce,Pat=Tat,Vce=Object.prototype.toString;function Df(t){if(!(this instanceof Df))return new Df(t);this.options=Py.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Nat,this.strm.avail_out=0;var n=Um.inflateInit2(this.strm,e.windowBits);if(n!==kr.Z_OK)throw new Error(BI[n]);if(this.header=new Pat,Um.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=R2.string2buf(e.dictionary):Vce.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=Um.inflateSetDictionary(this.strm,e.dictionary),n!==kr.Z_OK)))throw new Error(BI[n])}Df.prototype.push=function(t,e){var n=this.strm,r=this.options.chunkSize,s=this.options.dictionary,i,o,a,l,c,u=!1;if(this.ended)return!1;o=e===~~e?e:e===!0?kr.Z_FINISH:kr.Z_NO_FLUSH,typeof t=="string"?n.input=R2.binstring2buf(t):Vce.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;do{if(n.avail_out===0&&(n.output=new Py.Buf8(r),n.next_out=0,n.avail_out=r),i=Um.inflate(n,kr.Z_NO_FLUSH),i===kr.Z_NEED_DICT&&s&&(i=Um.inflateSetDictionary(this.strm,s)),i===kr.Z_BUF_ERROR&&u===!0&&(i=kr.Z_OK,u=!1),i!==kr.Z_STREAM_END&&i!==kr.Z_OK)return this.onEnd(i),this.ended=!0,!1;n.next_out&&(n.avail_out===0||i===kr.Z_STREAM_END||n.avail_in===0&&(o===kr.Z_FINISH||o===kr.Z_SYNC_FLUSH))&&(this.options.to==="string"?(a=R2.utf8border(n.output,n.next_out),l=n.next_out-a,c=R2.buf2string(n.output,a),n.next_out=l,n.avail_out=r-l,l&&Py.arraySet(n.output,n.output,a,l,0),this.onData(c)):this.onData(Py.shrinkBuf(n.output,n.next_out))),n.avail_in===0&&n.avail_out===0&&(u=!0)}while((n.avail_in>0||n.avail_out===0)&&i!==kr.Z_STREAM_END);return i===kr.Z_STREAM_END&&(o=kr.Z_FINISH),o===kr.Z_FINISH?(i=Um.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===kr.Z_OK):(o===kr.Z_SYNC_FLUSH&&(this.onEnd(kr.Z_OK),n.avail_out=0),!0)};Df.prototype.onData=function(t){this.chunks.push(t)};Df.prototype.onEnd=function(t){t===kr.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Py.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function jD(t,e){var n=new Df(e);if(n.push(t,!0),n.err)throw n.msg||BI[n.err];return n.result}function Iat(t,e){return e=e||{},e.raw=!0,jD(t,e)}n_.Inflate=Df;n_.inflate=jD;n_.inflateRaw=Iat;n_.ungzip=jD;var Rat=cu.assign,Lat=Qv,Oat=n_,Dat=zce,Wce={};Rat(Wce,Lat,Oat,Dat);var Mat=Wce;const Gce=ao(Mat),PV=(t,e)=>function(...n){const r=e.promiseModule;return new r((s,i)=>{e.multiArgs?n.push((...o)=>{e.errorFirst?o[0]?i(o):(o.shift(),s(o)):s(o)}):e.errorFirst?n.push((o,a)=>{o?i(o):s(a)}):n.push(s),t.apply(this,n)})};var jat=(t,e)=>{e=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},e);const n=typeof t;if(!(t!==null&&(n==="object"||n==="function")))throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${t===null?"null":n}\``);const r=i=>{const o=a=>typeof a=="string"?i===a:a.test(i);return e.include?e.include.some(o):!e.exclude.some(o)};let s;n==="function"?s=function(...i){return e.excludeMain?t(...i):PV(t,e).apply(this,i)}:s=Object.create(Object.getPrototypeOf(t));for(const i in t){const o=t[i];s[i]=typeof o=="function"&&r(i)?PV(o,e):o}return s};const F3=ao(jat);var IV={};function RV(t){return Array.isArray(t)?t:[t]}const UI="",LV=" ",B3="\\",Fat=/^\s+$/,Bat=/(?:[^\\]|^)\\$/,Uat=/^\\!/,$at=/^\\#/,Hat=/\r?\n/g,zat=/^\.*\/|^\.+$/,U3="/";let qce="node-ignore";typeof Symbol<"u"&&(qce=Symbol.for("node-ignore"));const OV=qce,Vat=(t,e,n)=>Object.defineProperty(t,e,{value:n}),Wat=/([0-z])-([0-z])/g,Kce=()=>!1,Gat=t=>t.replace(Wat,(e,n,r)=>n.charCodeAt(0)<=r.charCodeAt(0)?e:UI),qat=t=>{const{length:e}=t;return t.slice(0,e-e%2)},Kat=[[/^\uFEFF/,()=>UI],[/((?:\\\\)*?)(\\?\s+)$/,(t,e,n)=>e+(n.indexOf("\\")===0?LV:UI)],[/(\\+?)\s/g,(t,e)=>{const{length:n}=e;return e.slice(0,n-n%2)+LV}],[/[\\$.|*+(){^]/g,t=>`\\${t}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(t,e,n)=>e+6<n.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(t,e,n)=>{const r=n.replace(/\\\*/g,"[^\\/]*");return e+r}],[/\\\\\\(?=[$.|*+(){^])/g,()=>B3],[/\\\\/g,()=>B3],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(t,e,n,r,s)=>e===B3?`\\[${n}${qat(r)}${s}`:s==="]"&&r.length%2===0?`[${Gat(n)}${r}]`:"[]"],[/(?:[^*])$/,t=>/\/$/.test(t)?`${t}$`:`${t}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(t,e)=>`${e?`${e}[^/]+`:"[^/]*"}(?=$|\\/$)`]],DV=Object.create(null),Yat=(t,e)=>{let n=DV[t];return n||(n=Kat.reduce((r,[s,i])=>r.replace(s,i.bind(t)),t),DV[t]=n),e?new RegExp(n,"i"):new RegExp(n)},FD=t=>typeof t=="string",Xat=t=>t&&FD(t)&&!Fat.test(t)&&!Bat.test(t)&&t.indexOf("#")!==0,Jat=t=>t.split(Hat);class Zat{constructor(e,n,r,s){this.origin=e,this.pattern=n,this.negative=r,this.regex=s}}const Qat=(t,e)=>{const n=t;let r=!1;t.indexOf("!")===0&&(r=!0,t=t.substr(1)),t=t.replace(Uat,"!").replace($at,"#");const s=Yat(t,e);return new Zat(n,t,r,s)},elt=(t,e)=>{throw new e(t)},ou=(t,e,n)=>FD(t)?t?ou.isNotRelative(t)?n(`path should be a \`path.relative()\`d string, but got "${e}"`,RangeError):!0:n("path must not be empty",TypeError):n(`path must be a string, but got \`${e}\``,TypeError),Yce=t=>zat.test(t);ou.isNotRelative=Yce;ou.convert=t=>t;class tlt{constructor({ignorecase:e=!0,ignoreCase:n=e,allowRelativePaths:r=!1}={}){Vat(this,OV,!0),this._rules=[],this._ignoreCase=n,this._allowRelativePaths=r,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(e){if(e&&e[OV]){this._rules=this._rules.concat(e._rules),this._added=!0;return}if(Xat(e)){const n=Qat(e,this._ignoreCase);this._added=!0,this._rules.push(n)}}add(e){return this._added=!1,RV(FD(e)?Jat(e):e).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(e){return this.add(e)}_testOne(e,n){let r=!1,s=!1;return this._rules.forEach(i=>{const{negative:o}=i;if(s===o&&r!==s||o&&!r&&!s&&!n)return;i.regex.test(e)&&(r=!o,s=o)}),{ignored:r,unignored:s}}_test(e,n,r,s){const i=e&&ou.convert(e);return ou(i,e,this._allowRelativePaths?Kce:elt),this._t(i,n,r,s)}_t(e,n,r,s){if(e in n)return n[e];if(s||(s=e.split(U3)),s.pop(),!s.length)return n[e]=this._testOne(e,r);const i=this._t(s.join(U3)+U3,n,r,s);return n[e]=i.ignored?i:this._testOne(e,r)}ignores(e){return this._test(e,this._ignoreCache,!1).ignored}createFilter(){return e=>!this.ignores(e)}filter(e){return RV(e).filter(this.createFilter())}test(e){return this._test(e,this._testCache,!0)}}const $I=t=>new tlt(t),nlt=t=>ou(t&&ou.convert(t),t,Kce);$I.isPathValid=nlt;$I.default=$I;if(typeof An<"u"&&(IV&&IV.IGNORE_TEST_WIN32||An.platform==="win32")){const t=n=>/^\\\\\?\\/.test(n)||/["<>|\u0000-\u001F]+/u.test(n)?n:n.replace(/\\/g,"/");ou.convert=t;const e=/^[a-z]:\//i;ou.isNotRelative=n=>e.test(n)||Yce(n)}function rlt(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ol(t,e,n){return e=e instanceof RegExp?e:new RegExp(rlt(e),"g"),t.replace(e,n)}var slt={clean:function(e){if(typeof e!="string")throw new Error("Expected a string, received: "+e);return e=ol(e,"./","/"),e=ol(e,"..","."),e=ol(e," ","-"),e=ol(e,/^[~^:?*\\\-]/g,""),e=ol(e,/[~^:?*\\]/g,"-"),e=ol(e,/[~^:?*\\\-]$/g,""),e=ol(e,"@{","-"),e=ol(e,/\.$/g,""),e=ol(e,/\/$/g,""),e=ol(e,/\.lock$/g,""),e}},ilt=slt;const MV=ao(ilt);class xn extends Error{constructor(e){super(e),this.caller=""}toJSON(){return{code:this.code,data:this.data,caller:this.caller,message:this.message,stack:this.stack}}fromJSON(e){const n=new xn(e.message);return n.code=e.code,n.data=e.data,n.caller=e.caller,n.stack=e.stack,n}get isIsomorphicGitError(){return!0}}class GC extends xn{constructor(e){super(`Modifying the index is not possible because you have unmerged files: ${e.toString}. Fix them up in the work tree, and then use 'git add/rm as appropriate to mark resolution and make a commit.`),this.code=this.name=GC.code,this.data={filepaths:e}}}GC.code="UnmergedPathsError";class Qt extends xn{constructor(e){super(`An internal error caused this command to fail. Please file a bug report at https://github.com/isomorphic-git/isomorphic-git/issues with this error message: ${e}`),this.code=this.name=Qt.code,this.data={message:e}}}Qt.code="InternalError";class r_ extends xn{constructor(e){super(`The filepath "${e}" contains unsafe character sequences`),this.code=this.name=r_.code,this.data={filepath:e}}}r_.code="UnsafeFilepathError";class Tl{constructor(e){this.buffer=e,this._start=0}eof(){return this._start>=this.buffer.length}tell(){return this._start}seek(e){this._start=e}slice(e){const n=this.buffer.slice(this._start,this._start+e);return this._start+=e,n}toString(e,n){const r=this.buffer.toString(e,this._start,this._start+n);return this._start+=n,r}write(e,n,r){const s=this.buffer.write(e,this._start,n,r);return this._start+=n,s}copy(e,n,r){const s=e.copy(this.buffer,this._start,n,r);return this._start+=s,s}readUInt8(){const e=this.buffer.readUInt8(this._start);return this._start+=1,e}writeUInt8(e){const n=this.buffer.writeUInt8(e,this._start);return this._start+=1,n}readUInt16BE(){const e=this.buffer.readUInt16BE(this._start);return this._start+=2,e}writeUInt16BE(e){const n=this.buffer.writeUInt16BE(e,this._start);return this._start+=2,n}readUInt32BE(){const e=this.buffer.readUInt32BE(this._start);return this._start+=4,e}writeUInt32BE(e){const n=this.buffer.writeUInt32BE(e,this._start);return this._start+=4,n}}function qC(t,e){return-(t<e)||+(t>e)}function Xce(t,e){return qC(t.path,e.path)}function Jce(t){let e=t>0?t>>12:0;e!==4&&e!==8&&e!==10&&e!==14&&(e=8);let n=t&511;return n&73?n=493:n=420,e!==8&&(n=0),(e<<12)+n}const al=2**32;function jV(t,e,n,r){if(t!==void 0&&e!==void 0)return[t,e];n===void 0&&(n=r.valueOf());const s=Math.floor(n/1e3),i=(n-s*1e3)*1e6;return[s,i]}function Sg(t){const[e,n]=jV(t.ctimeSeconds,t.ctimeNanoseconds,t.ctimeMs,t.ctime),[r,s]=jV(t.mtimeSeconds,t.mtimeNanoseconds,t.mtimeMs,t.mtime);return{ctimeSeconds:e%al,ctimeNanoseconds:n%al,mtimeSeconds:r%al,mtimeNanoseconds:s%al,dev:t.dev%al,ino:t.ino%al,mode:Jce(t.mode%al),uid:t.uid%al,gid:t.gid%al,size:t.size>-1?t.size%al:0}}function olt(t){let e="";for(const n of new Uint8Array(t))n<16&&(e+="0"),e+=n.toString(16);return e}let $3=null;async function kg(t){return $3===null&&($3=await llt()),$3?Zce(t):alt(t)}function alt(t){return new zit().update(t).digest("hex")}async function Zce(t){const e=await crypto.subtle.digest("SHA-1",t);return olt(e)}async function llt(){try{if(await Zce(new Uint8Array([]))==="da39a3ee5e6b4b0d3255bfef95601890afd80709")return!0}catch{}return!1}function clt(t){return{assumeValid:!!(t&32768),extended:!!(t&16384),stage:(t&12288)>>12,nameLength:t&4095}}function ult(t){const e=t.flags;return e.extended=!1,e.nameLength=Math.min(bt.from(t.path).length,4095),(e.assumeValid?32768:0)+(e.extended?16384:0)+((e.stage&3)<<12)+(e.nameLength&4095)}class kh{constructor(e,n){this._dirty=!1,this._unmergedPaths=n||new Set,this._entries=e||new Map}_addEntry(e){if(e.flags.stage===0)e.stages=[e],this._entries.set(e.path,e),this._unmergedPaths.delete(e.path);else{let n=this._entries.get(e.path);n||(this._entries.set(e.path,e),n=e),n.stages[e.flags.stage]=e,this._unmergedPaths.add(e.path)}}static async from(e){if(bt.isBuffer(e))return kh.fromBuffer(e);if(e===null)return new kh(null);throw new Qt("invalid type passed to GitIndex.from")}static async fromBuffer(e){if(e.length===0)throw new Qt("Index file is empty (.git/index)");const n=new kh,r=new Tl(e),s=r.toString("utf8",4);if(s!=="DIRC")throw new Qt(`Invalid dircache magic file number: ${s}`);const i=await kg(e.slice(0,-20)),o=e.slice(-20).toString("hex");if(o!==i)throw new Qt(`Invalid checksum in GitIndex buffer: expected ${o} but saw ${i}`);const a=r.readUInt32BE();if(a!==2)throw new Qt(`Unsupported dircache version: ${a}`);const l=r.readUInt32BE();let c=0;for(;!r.eof()&&c<l;){const u={};u.ctimeSeconds=r.readUInt32BE(),u.ctimeNanoseconds=r.readUInt32BE(),u.mtimeSeconds=r.readUInt32BE(),u.mtimeNanoseconds=r.readUInt32BE(),u.dev=r.readUInt32BE(),u.ino=r.readUInt32BE(),u.mode=r.readUInt32BE(),u.uid=r.readUInt32BE(),u.gid=r.readUInt32BE(),u.size=r.readUInt32BE(),u.oid=r.slice(20).toString("hex");const d=r.readUInt16BE();u.flags=clt(d);const h=e.indexOf(0,r.tell()+1)-r.tell();if(h<1)throw new Qt(`Got a path length of: ${h}`);if(u.path=r.toString("utf8",h),u.path.includes("..\\")||u.path.includes("../"))throw new r_(u.path);let f=8-(r.tell()-12)%8;for(f===0&&(f=8);f--;){const g=r.readUInt8();if(g!==0)throw new Qt(`Expected 1-8 null characters but got '${g}' after ${u.path}`);if(r.eof())throw new Qt("Unexpected end of file")}u.stages=[],n._addEntry(u),c++}return n}get unmergedPaths(){return[...this._unmergedPaths]}get entries(){return[...this._entries.values()].sort(Xce)}get entriesMap(){return this._entries}get entriesFlat(){return[...this.entries].flatMap(e=>e.stages.length>1?e.stages.filter(n=>n):e)}*[Symbol.iterator](){for(const e of this.entries)yield e}insert({filepath:e,stats:n,oid:r,stage:s=0}){n||(n={ctimeSeconds:0,ctimeNanoseconds:0,mtimeSeconds:0,mtimeNanoseconds:0,dev:0,ino:0,mode:0,uid:0,gid:0,size:0}),n=Sg(n);const i=bt.from(e),o={ctimeSeconds:n.ctimeSeconds,ctimeNanoseconds:n.ctimeNanoseconds,mtimeSeconds:n.mtimeSeconds,mtimeNanoseconds:n.mtimeNanoseconds,dev:n.dev,ino:n.ino,mode:n.mode||33188,uid:n.uid,gid:n.gid,size:n.size,path:e,oid:r,flags:{assumeValid:!1,extended:!1,stage:s,nameLength:i.length<4095?i.length:4095},stages:[]};this._addEntry(o),this._dirty=!0}delete({filepath:e}){if(this._entries.has(e))this._entries.delete(e);else for(const n of this._entries.keys())n.startsWith(e+"/")&&this._entries.delete(n);this._unmergedPaths.has(e)&&this._unmergedPaths.delete(e),this._dirty=!0}clear(){this._entries.clear(),this._dirty=!0}has({filepath:e}){return this._entries.has(e)}render(){return this.entries.map(e=>`${e.mode.toString(8)} ${e.oid}    ${e.path}`).join(`
`)}static async _entryToBuffer(e){const n=bt.from(e.path),r=Math.ceil((62+n.length+1)/8)*8,s=bt.alloc(r),i=new Tl(s),o=Sg(e);return i.writeUInt32BE(o.ctimeSeconds),i.writeUInt32BE(o.ctimeNanoseconds),i.writeUInt32BE(o.mtimeSeconds),i.writeUInt32BE(o.mtimeNanoseconds),i.writeUInt32BE(o.dev),i.writeUInt32BE(o.ino),i.writeUInt32BE(o.mode),i.writeUInt32BE(o.uid),i.writeUInt32BE(o.gid),i.writeUInt32BE(o.size),i.write(e.oid,20,"hex"),i.writeUInt16BE(ult(e)),i.write(e.path,n.length,"utf8"),s}async toObject(){const e=bt.alloc(12),n=new Tl(e);n.write("DIRC",4,"utf8"),n.writeUInt32BE(2),n.writeUInt32BE(this.entriesFlat.length);let r=[];for(const a of this.entries)if(r.push(kh._entryToBuffer(a)),a.stages.length>1)for(const l of a.stages)l&&l!==a&&r.push(kh._entryToBuffer(l));r=await Promise.all(r);const s=bt.concat(r),i=bt.concat([e,s]),o=await kg(i);return bt.concat([i,bt.from(o,"hex")])}}function HI(t,e,n=!0,r=!0){const s=Sg(t),i=Sg(e);return n&&s.mode!==i.mode||s.mtimeSeconds!==i.mtimeSeconds||s.ctimeSeconds!==i.ctimeSeconds||s.uid!==i.uid||s.gid!==i.gid||r&&s.ino!==i.ino||s.size!==i.size}let H3=null;const Vp=Symbol("IndexCache");function dlt(){return{map:new Map,stats:new Map}}async function hlt(t,e,n){const r=await t.lstat(e),s=await t.read(e),i=await kh.from(s);n.map.set(e,i),n.stats.set(e,r)}async function flt(t,e,n){const r=n.stats.get(e);if(r===void 0)return!0;const s=await t.lstat(e);return r===null||s===null?!1:HI(r,s)}class Iy{static async acquire({fs:e,gitdir:n,cache:r,allowUnmerged:s=!0},i){r[Vp]||(r[Vp]=dlt());const o=`${n}/index`;H3===null&&(H3=new XS({maxPending:1/0}));let a,l=[];return await H3.acquire(o,async()=>{await flt(e,o,r[Vp])&&await hlt(e,o,r[Vp]);const c=r[Vp].map.get(o);if(l=c.unmergedPaths,l.length&&!s)throw new GC(l);if(a=await i(c),c._dirty){const u=await c.toObject();await e.write(o,u),r[Vp].stats.set(o,await e.lstat(o)),c._dirty=!1}}),a}}function FV(t){const e=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return e>-1&&(t=t.slice(e+1)),t}function QS(t){const e=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return e===-1?".":e===0?"/":t.slice(0,e)}function plt(t){const e=new Map,n=function(s){if(!e.has(s)){const i={type:"tree",fullpath:s,basename:FV(s),metadata:{},children:[]};e.set(s,i),i.parent=n(QS(s)),i.parent&&i.parent!==i&&i.parent.children.push(i)}return e.get(s)},r=function(s,i){if(!e.has(s)){const o={type:"blob",fullpath:s,basename:FV(s),metadata:i,parent:n(QS(s)),children:[]};o.parent&&o.parent.children.push(o),e.set(s,o)}return e.get(s)};n(".");for(const s of t)r(s.path,s);return e}function mlt(t){switch(t){case 16384:return"tree";case 33188:return"blob";case 33261:return"blob";case 40960:return"blob";case 57344:return"commit"}throw new Qt(`Unexpected GitTree entry mode: ${t.toString(8)}`)}class glt{constructor({fs:e,gitdir:n,cache:r}){this.treePromise=Iy.acquire({fs:e,gitdir:n,cache:r},async function(i){return plt(i.entries)});const s=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._oid=!1}async type(){return s.type(this)}async mode(){return s.mode(this)}async stat(){return s.stat(this)}async content(){return s.content(this)}async oid(){return s.oid(this)}}}async readdir(e){const n=e._fullpath,s=(await this.treePromise).get(n);if(!s||s.type==="blob")return null;if(s.type!=="tree")throw new Error(`ENOTDIR: not a directory, scandir '${n}'`);const i=s.children.map(o=>o.fullpath);return i.sort(qC),i}async type(e){return e._type===!1&&await e.stat(),e._type}async mode(e){return e._mode===!1&&await e.stat(),e._mode}async stat(e){if(e._stat===!1){const r=(await this.treePromise).get(e._fullpath);if(!r)throw new Error(`ENOENT: no such file or directory, lstat '${e._fullpath}'`);const s=r.type==="tree"?{}:Sg(r.metadata);e._type=r.type==="tree"?"tree":mlt(s.mode),e._mode=s.mode,r.type==="tree"?e._stat=void 0:e._stat=s}return e._stat}async content(e){}async oid(e){if(e._oid===!1){const r=(await this.treePromise).get(e._fullpath);e._oid=r.metadata.oid}return e._oid}}const KC=Symbol("GitWalkSymbol");function blt(){const t=Object.create(null);return Object.defineProperty(t,KC,{value:function({fs:e,gitdir:n,cache:r}){return new glt({fs:e,gitdir:n,cache:r})}}),Object.freeze(t),t}class Ol extends xn{constructor(e){super(`Could not find ${e}.`),this.code=this.name=Ol.code,this.data={what:e}}}Ol.code="NotFoundError";class s_ extends xn{constructor(e,n,r,s){super(`Object ${e} ${s?`at ${s}`:""}was anticipated to be a ${r} but it is a ${n}.`),this.code=this.name=s_.code,this.data={oid:e,actual:n,expected:r,filepath:s}}}s_.code="ObjectTypeError";class Mf extends xn{constructor(e){super(`Expected a 40-char hex object id but saw "${e}".`),this.code=this.name=Mf.code,this.data={value:e}}}Mf.code="InvalidOidError";class YC extends xn{constructor(e){super(`Could not find a fetch refspec for remote "${e}". Make sure the config file has an entry like the following:
[remote "${e}"]
	fetch = +refs/heads/*:refs/remotes/origin/*
`),this.code=this.name=YC.code,this.data={remote:e}}}YC.code="NoRefspecError";class ek{constructor(e){if(this.refs=new Map,this.parsedConfig=[],e){let n=null;this.parsedConfig=e.trim().split(`
`).map(r=>{if(/^\s*#/.test(r))return{line:r,comment:!0};const s=r.indexOf(" ");if(r.startsWith("^")){const i=r.slice(1);return this.refs.set(n+"^{}",i),{line:r,ref:n,peeled:i}}else{const i=r.slice(0,s);return n=r.slice(s+1),this.refs.set(n,i),{line:r,ref:n,oid:i}}})}return this}static from(e){return new ek(e)}delete(e){this.parsedConfig=this.parsedConfig.filter(n=>n.ref!==e),this.refs.delete(e)}toString(){return this.parsedConfig.map(({line:e})=>e).join(`
`)+`
`}}class tk{constructor({remotePath:e,localPath:n,force:r,matchPrefix:s}){Object.assign(this,{remotePath:e,localPath:n,force:r,matchPrefix:s})}static from(e){const[n,r,s,i,o]=e.match(/^(\+?)(.*?)(\*?):(.*?)(\*?)$/).slice(1),a=n==="+",l=s==="*";if(l!==(o==="*"))throw new Qt("Invalid refspec");return new tk({remotePath:r,localPath:i,force:a,matchPrefix:l})}translate(e){if(this.matchPrefix){if(e.startsWith(this.remotePath))return this.localPath+e.replace(this.remotePath,"")}else if(e===this.remotePath)return this.localPath;return null}reverseTranslate(e){if(this.matchPrefix){if(e.startsWith(this.localPath))return this.remotePath+e.replace(this.localPath,"")}else if(e===this.localPath)return this.remotePath;return null}}class BD{constructor(e=[]){this.rules=e}static from(e){const n=[];for(const r of e)n.push(tk.from(r));return new BD(n)}add(e){const n=tk.from(e);this.rules.push(n)}translate(e){const n=[];for(const r of this.rules)for(const s of e){const i=r.translate(s);i&&n.push([s,i])}return n}translateOne(e){let n=null;for(const r of this.rules){const s=r.translate(e);s&&(n=s)}return n}localNamespaces(){return this.rules.filter(e=>e.matchPrefix).map(e=>e.localPath.replace(/\/$/,""))}}function ylt(t,e){const n=t.replace(/\^\{\}$/,""),r=e.replace(/\^\{\}$/,""),s=-(n<r)||+(n>r);return s===0?t.endsWith("^{}")?1:-1:s}const vlt=t=>{t=t.toLowerCase();let e=parseInt(t);return t.endsWith("k")&&(e*=1024),t.endsWith("m")&&(e*=1024*1024),t.endsWith("g")&&(e*=1024*1024*1024),e},ub=t=>{if(t=t.trim().toLowerCase(),t==="true"||t==="yes"||t==="on")return!0;if(t==="false"||t==="no"||t==="off")return!1;throw Error(`Expected 'true', 'false', 'yes', 'no', 'on', or 'off', but got ${t}`)},BV={core:{filemode:ub,bare:ub,logallrefupdates:ub,symlinks:ub,ignorecase:ub,bigFileThreshold:vlt}},_lt=/^\[([A-Za-z0-9-.]+)(?: "(.*)")?\]$/,xlt=/^[A-Za-z0-9-.]+$/,wlt=/^([A-Za-z][A-Za-z-]*)(?: *= *(.*))?$/,Elt=/^[A-Za-z][A-Za-z-]*$/,Slt=/^(.*?)( *[#;].*)$/,klt=t=>{const e=_lt.exec(t);if(e!=null){const[n,r]=e.slice(1);return[n,r]}return null},Clt=t=>{const e=wlt.exec(t);if(e!=null){const[n,r="true"]=e.slice(1),s=Alt(r),i=Tlt(s);return[n,i]}return null},Alt=t=>{const e=Slt.exec(t);if(e==null)return t;const[n,r]=e.slice(1);return UV(n)&&UV(r)?`${n}${r}`:n},UV=t=>(t.match(/(?:^|[^\\])"/g)||[]).length%2!==0,Tlt=t=>t.split("").reduce((e,n,r,s)=>{const i=n==='"'&&s[r-1]!=="\\",o=n==="\\"&&s[r+1]==='"';return i||o?e:e+n},""),$V=t=>t!=null?t.toLowerCase():null,zI=(t,e,n)=>[$V(t),e,$V(n)].filter(r=>r!=null).join("."),HV=t=>{const e=t.split("."),n=e.shift(),r=e.pop(),s=e.length?e.join("."):void 0;return{section:n,subsection:s,name:r,path:zI(n,s,r),sectionPath:zI(n,s,null)}},Nlt=(t,e)=>t.reduce((n,r,s)=>e(r)?s:n,-1);class UD{constructor(e){let n=null,r=null;this.parsedConfig=e?e.split(`
`).map(s=>{let i=null,o=null;const a=s.trim(),l=klt(a),c=l!=null;if(c)[n,r]=l;else{const d=Clt(a);d!=null&&([i,o]=d)}const u=zI(n,r,i);return{line:s,isSection:c,section:n,subsection:r,name:i,value:o,path:u}}):[]}static from(e){return new UD(e)}async get(e,n=!1){const r=HV(e).path,s=this.parsedConfig.filter(i=>i.path===r).map(({section:i,name:o,value:a})=>{const l=BV[i]&&BV[i][o];return l?l(a):a});return n?s:s.pop()}async getall(e){return this.get(e,!0)}async getSubsections(e){return this.parsedConfig.filter(n=>n.section===e&&n.isSection).map(n=>n.subsection)}async deleteSection(e,n){this.parsedConfig=this.parsedConfig.filter(r=>!(r.section===e&&r.subsection===n))}async append(e,n){return this.set(e,n,!0)}async set(e,n,r=!1){const{section:s,subsection:i,name:o,path:a,sectionPath:l}=HV(e),c=Nlt(this.parsedConfig,u=>u.path===a);if(n==null)c!==-1&&this.parsedConfig.splice(c,1);else if(c!==-1){const u=this.parsedConfig[c],d=Object.assign({},u,{name:o,value:n,modified:!0});r?this.parsedConfig.splice(c+1,0,d):this.parsedConfig[c]=d}else{const u=this.parsedConfig.findIndex(h=>h.path===l),d={section:s,subsection:i,name:o,value:n,modified:!0,path:a};if(xlt.test(s)&&Elt.test(o))if(u>=0)this.parsedConfig.splice(u+1,0,d);else{const h={section:s,subsection:i,modified:!0,path:l};this.parsedConfig.push(h,d)}}}toString(){return this.parsedConfig.map(({line:e,section:n,subsection:r,name:s,value:i,modified:o=!1})=>o?s!=null&&i!=null?typeof i=="string"&&/[#;]/.test(i)?`	${s} = "${i}"`:`	${s} = ${i}`:r!=null?`[${n} "${r}"]`:`[${n}]`:e).join(`
`)}}class Yl{static async get({fs:e,gitdir:n}){const r=await e.read(`${n}/config`,{encoding:"utf8"});return UD.from(r)}static async save({fs:e,gitdir:n,config:r}){await e.write(`${n}/config`,r.toString(),{encoding:"utf8"})}}const Bw=t=>[`${t}`,`refs/${t}`,`refs/tags/${t}`,`refs/heads/${t}`,`refs/remotes/${t}`,`refs/remotes/${t}/HEAD`],Plt=["config","description","index","shallow","commondir"];let z3;async function Pu(t,e){return z3===void 0&&(z3=new XS),z3.acquire(t,e)}class cn{static async updateRemoteRefs({fs:e,gitdir:n,remote:r,refs:s,symrefs:i,tags:o,refspecs:a=void 0,prune:l=!1,pruneTags:c=!1}){for(const m of s.values())if(!m.match(/[0-9a-f]{40}/))throw new Mf(m);const u=await Yl.get({fs:e,gitdir:n});if(!a){if(a=await u.getall(`remote.${r}.fetch`),a.length===0)throw new YC(r);a.unshift(`+HEAD:refs/remotes/${r}/HEAD`)}const d=BD.from(a),h=new Map;if(c){const m=await cn.listRefs({fs:e,gitdir:n,filepath:"refs/tags"});await cn.deleteRefs({fs:e,gitdir:n,refs:m.map(b=>`refs/tags/${b}`)})}if(o){for(const m of s.keys())if(m.startsWith("refs/tags")&&!m.endsWith("^{}")&&!await cn.exists({fs:e,gitdir:n,ref:m})){const b=s.get(m);h.set(m,b)}}const f=d.translate([...s.keys()]);for(const[m,b]of f){const v=s.get(m);h.set(b,v)}const g=d.translate([...i.keys()]);for(const[m,b]of g){const v=i.get(m),_=d.translateOne(v);_&&h.set(b,`ref: ${_}`)}const y=[];if(l){for(const m of d.localNamespaces()){const b=(await cn.listRefs({fs:e,gitdir:n,filepath:m})).map(v=>`${m}/${v}`);for(const v of b)h.has(v)||y.push(v)}y.length>0&&await cn.deleteRefs({fs:e,gitdir:n,refs:y})}for(const[m,b]of h)await Pu(m,async()=>e.write(vs.join(n,m),`${b.trim()}
`,"utf8"));return{pruned:y}}static async writeRef({fs:e,gitdir:n,ref:r,value:s}){if(!s.match(/[0-9a-f]{40}/))throw new Mf(s);await Pu(r,async()=>e.write(vs.join(n,r),`${s.trim()}
`,"utf8"))}static async writeSymbolicRef({fs:e,gitdir:n,ref:r,value:s}){await Pu(r,async()=>e.write(vs.join(n,r),`ref: ${s.trim()}
`,"utf8"))}static async deleteRef({fs:e,gitdir:n,ref:r}){return cn.deleteRefs({fs:e,gitdir:n,refs:[r]})}static async deleteRefs({fs:e,gitdir:n,refs:r}){await Promise.all(r.map(a=>e.rm(vs.join(n,a))));let s=await Pu("packed-refs",async()=>e.read(`${n}/packed-refs`,{encoding:"utf8"}));const i=ek.from(s),o=i.refs.size;for(const a of r)i.refs.has(a)&&i.delete(a);i.refs.size<o&&(s=i.toString(),await Pu("packed-refs",async()=>e.write(`${n}/packed-refs`,s,{encoding:"utf8"})))}static async resolve({fs:e,gitdir:n,ref:r,depth:s=void 0}){if(s!==void 0&&(s--,s===-1))return r;if(r.startsWith("ref: "))return r=r.slice(5),cn.resolve({fs:e,gitdir:n,ref:r,depth:s});if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const i=await cn.packedRefs({fs:e,gitdir:n}),o=Bw(r).filter(a=>!Plt.includes(a));for(const a of o){const l=await Pu(a,async()=>await e.read(`${n}/${a}`,{encoding:"utf8"})||i.get(a));if(l)return cn.resolve({fs:e,gitdir:n,ref:l.trim(),depth:s})}throw new Ol(r)}static async exists({fs:e,gitdir:n,ref:r}){try{return await cn.expand({fs:e,gitdir:n,ref:r}),!0}catch{return!1}}static async expand({fs:e,gitdir:n,ref:r}){if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const s=await cn.packedRefs({fs:e,gitdir:n}),i=Bw(r);for(const o of i)if(await Pu(o,async()=>e.exists(`${n}/${o}`))||s.has(o))return o;throw new Ol(r)}static async expandAgainstMap({ref:e,map:n}){const r=Bw(e);for(const s of r)if(await n.has(s))return s;throw new Ol(e)}static resolveAgainstMap({ref:e,fullref:n=e,depth:r=void 0,map:s}){if(r!==void 0&&(r--,r===-1))return{fullref:n,oid:e};if(e.startsWith("ref: "))return e=e.slice(5),cn.resolveAgainstMap({ref:e,fullref:n,depth:r,map:s});if(e.length===40&&/[0-9a-f]{40}/.test(e))return{fullref:n,oid:e};const i=Bw(e);for(const o of i){const a=s.get(o);if(a)return cn.resolveAgainstMap({ref:a.trim(),fullref:o,depth:r,map:s})}throw new Ol(e)}static async packedRefs({fs:e,gitdir:n}){const r=await Pu("packed-refs",async()=>e.read(`${n}/packed-refs`,{encoding:"utf8"}));return ek.from(r).refs}static async listRefs({fs:e,gitdir:n,filepath:r}){const s=cn.packedRefs({fs:e,gitdir:n});let i=null;try{i=await e.readdirDeep(`${n}/${r}`),i=i.map(o=>o.replace(`${n}/${r}/`,""))}catch{i=[]}for(let o of(await s).keys())o.startsWith(r)&&(o=o.replace(r+"/",""),i.includes(o)||i.push(o));return i.sort(ylt),i}static async listBranches({fs:e,gitdir:n,remote:r}){return r?cn.listRefs({fs:e,gitdir:n,filepath:`refs/remotes/${r}`}):cn.listRefs({fs:e,gitdir:n,filepath:"refs/heads"})}static async listTags({fs:e,gitdir:n}){return(await cn.listRefs({fs:e,gitdir:n,filepath:"refs/tags"})).filter(s=>!s.endsWith("^{}"))}}function Ilt(t,e){return qC(zV(t),zV(e))}function zV(t){return t.mode==="040000"?t.path+"/":t.path}function Qce(t){switch(t){case"040000":return"tree";case"100644":return"blob";case"100755":return"blob";case"120000":return"blob";case"160000":return"commit"}throw new Qt(`Unexpected GitTree entry mode: ${t}`)}function Rlt(t){const e=[];let n=0;for(;n<t.length;){const r=t.indexOf(32,n);if(r===-1)throw new Qt(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next space character.`);const s=t.indexOf(0,n);if(s===-1)throw new Qt(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next null character.`);let i=t.slice(n,r).toString("utf8");i==="40000"&&(i="040000");const o=Qce(i),a=t.slice(r+1,s).toString("utf8");if(a.includes("\\")||a.includes("/"))throw new r_(a);const l=t.slice(s+1,s+21).toString("hex");n=s+21,e.push({mode:i,path:a,oid:l,type:o})}return e}function Llt(t){if(typeof t=="number"&&(t=t.toString(8)),t.match(/^0?4.*/))return"040000";if(t.match(/^1006.*/))return"100644";if(t.match(/^1007.*/))return"100755";if(t.match(/^120.*/))return"120000";if(t.match(/^160.*/))return"160000";throw new Qt(`Could not understand file mode: ${t}`)}function Olt(t){return!t.oid&&t.sha&&(t.oid=t.sha),t.mode=Llt(t.mode),t.type||(t.type=Qce(t.mode)),t}class K1{constructor(e){if(bt.isBuffer(e))this._entries=Rlt(e);else if(Array.isArray(e))this._entries=e.map(Olt);else throw new Qt("invalid type passed to GitTree constructor");this._entries.sort(Xce)}static from(e){return new K1(e)}render(){return this._entries.map(e=>`${e.mode} ${e.type} ${e.oid}    ${e.path}`).join(`
`)}toObject(){const e=[...this._entries];return e.sort(Ilt),bt.concat(e.map(n=>{const r=bt.from(n.mode.replace(/^0/,"")),s=bt.from(" "),i=bt.from(n.path,"utf8"),o=bt.from([0]),a=bt.from(n.oid,"hex");return bt.concat([r,s,i,o,a])}))}entries(){return this._entries}*[Symbol.iterator](){for(const e of this._entries)yield e}}class $D{static wrap({type:e,object:n}){return bt.concat([bt.from(`${e} ${n.byteLength.toString()}\0`),bt.from(n)])}static unwrap(e){const n=e.indexOf(32),r=e.indexOf(0),s=e.slice(0,n).toString("utf8"),i=e.slice(n+1,r).toString("utf8"),o=e.length-(r+1);if(parseInt(i)!==o)throw new Qt(`Length mismatch: expected ${i} bytes but got ${o} instead.`);return{type:s,object:bt.from(e.slice(r+1))}}}async function Dlt({fs:t,gitdir:e,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`,s=await t.read(`${e}/${r}`);return s?{object:s,format:"deflated",source:r}:null}function Mlt(t,e){const n=new Tl(t),r=VV(n);if(r!==e.byteLength)throw new Qt(`applyDelta expected source buffer to be ${r} bytes but the provided buffer was ${e.length} bytes`);const s=VV(n);let i;const o=GV(n,e);if(o.byteLength===s)i=o;else{i=bt.alloc(s);const a=new Tl(i);for(a.copy(o);!n.eof();)a.copy(GV(n,e));const l=a.tell();if(s!==l)throw new Qt(`applyDelta expected target buffer to be ${s} bytes but the resulting buffer was ${l} bytes`)}return i}function VV(t){let e=0,n=0,r=null;do r=t.readUInt8(),e|=(r&127)<<n,n+=7;while(r&128);return e}function WV(t,e,n){let r=0,s=0;for(;n--;)e&1&&(r|=t.readUInt8()<<s),e>>=1,s+=8;return r}function GV(t,e){const n=t.readUInt8(),r=128,s=15,i=112;if(n&r){const o=WV(t,n&s,4);let a=WV(t,(n&i)>>4,3);return a===0&&(a=65536),e.slice(o,o+a)}else return t.slice(n)}function jlt(t){let e=[t];return{next(){return Promise.resolve({done:e.length===0,value:e.pop()})},return(){return e=[],{}},[Symbol.asyncIterator](){return this}}}function eue(t){return t[Symbol.asyncIterator]?t[Symbol.asyncIterator]():t[Symbol.iterator]?t[Symbol.iterator]():t.next?t:jlt(t)}class tue{constructor(e){if(typeof bt>"u")throw new Error("Missing Buffer dependency");this.stream=eue(e),this.buffer=null,this.cursor=0,this.undoCursor=0,this.started=!1,this._ended=!1,this._discardedBytes=0}eof(){return this._ended&&this.cursor===this.buffer.length}tell(){return this._discardedBytes+this.cursor}async byte(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(1),this.buffer[this.undoCursor]}async chunk(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(this.buffer.length),this.buffer.slice(this.undoCursor,this.cursor)}async read(e){if(!this.eof())return this.started||await this._init(),this.cursor+e>this.buffer.length&&(this._trim(),await this._accumulate(e)),this._moveCursor(e),this.buffer.slice(this.undoCursor,this.cursor)}async skip(e){this.eof()||(this.started||await this._init(),this.cursor+e>this.buffer.length&&(this._trim(),await this._accumulate(e)),this._moveCursor(e))}async undo(){this.cursor=this.undoCursor}async _next(){this.started=!0;let{done:e,value:n}=await this.stream.next();return e&&(this._ended=!0,!n)?bt.alloc(0):(n&&(n=bt.from(n)),n)}_trim(){this.buffer=this.buffer.slice(this.undoCursor),this.cursor-=this.undoCursor,this._discardedBytes+=this.undoCursor,this.undoCursor=0}_moveCursor(e){this.undoCursor=this.cursor,this.cursor+=e,this.cursor>this.buffer.length&&(this.cursor=this.buffer.length)}async _accumulate(e){if(this._ended)return;const n=[this.buffer];for(;this.cursor+e>Flt(n);){const r=await this._next();if(this._ended)break;n.push(r)}this.buffer=bt.concat(n)}async _loadnext(){this._discardedBytes+=this.buffer.length,this.undoCursor=0,this.cursor=0,this.buffer=await this._next()}async _init(){this.buffer=await this._next()}}function Flt(t){return t.reduce((e,n)=>e+n.length,0)}async function Blt(t,e){const n=new tue(t);let r=await n.read(4);if(r=r.toString("utf8"),r!=="PACK")throw new Qt(`Invalid PACK header '${r}'`);let s=await n.read(4);if(s=s.readUInt32BE(0),s!==2)throw new Qt(`Invalid packfile version: ${s}`);let i=await n.read(4);if(i=i.readUInt32BE(0),!(i<1))for(;!n.eof()&&i--;){const o=n.tell(),{type:a,length:l,ofs:c,reference:u}=await Ult(n),d=new Gce.Inflate;for(;!d.result;){const h=await n.chunk();if(!h)break;if(d.push(h,!1),d.err)throw new Qt(`Pako error: ${d.msg}`);if(d.result){if(d.result.length!==l)throw new Qt("Inflated object size is different from that stated in packfile.");await n.undo(),await n.read(h.length-d.strm.avail_in);const f=n.tell();await e({data:d.result,type:a,num:i,offset:o,end:f,reference:u,ofs:c})}}}}async function Ult(t){let e=await t.byte();const n=e>>4&7;let r=e&15;if(e&128){let o=4;do e=await t.byte(),r|=(e&127)<<o,o+=7;while(e&128)}let s,i;if(n===6){let o=0;s=0;const a=[];do e=await t.byte(),s|=(e&127)<<o,o+=7,a.push(e);while(e&128);i=bt.from(a)}return n===7&&(i=await t.read(20)),{type:n,length:r,ofs:s,reference:i}}async function nue(t){return Gce.inflate(t)}function $lt(t){const e=[];let n=0,r=0;do{n=t.readUInt8();const s=n&127;e.push(s),r=n&128}while(r);return e.reduce((s,i)=>s+1<<7|i,-1)}function Hlt(t,e){let n=e,r=4,s=null;do s=t.readUInt8(),n|=(s&127)<<r,r+=7;while(s&128);return n}class Y1{constructor(e){Object.assign(this,e),this.offsetCache={}}static async fromIdx({idx:e,getExternalRefDelta:n}){const r=new Tl(e);if(r.slice(4).toString("hex")!=="ff744f63")return;const i=r.readUInt32BE();if(i!==2)throw new Qt(`Unable to read version ${i} packfile IDX. (Only version 2 supported)`);if(e.byteLength>2048*1024*1024)throw new Qt("To keep implementation simple, I haven't implemented the layer 5 feature needed to support packfiles > 2GB in size.");r.seek(r.tell()+4*255);const o=r.readUInt32BE(),a=[];for(let u=0;u<o;u++){const d=r.slice(20).toString("hex");a[u]=d}r.seek(r.tell()+4*o);const l=new Map;for(let u=0;u<o;u++)l.set(a[u],r.readUInt32BE());const c=r.slice(20).toString("hex");return new Y1({hashes:a,crcs:{},offsets:l,packfileSha:c,getExternalRefDelta:n})}static async fromPack({pack:e,getExternalRefDelta:n,onProgress:r}){const s={1:"commit",2:"tree",3:"blob",4:"tag",6:"ofs-delta",7:"ref-delta"},i={},o=e.slice(-20).toString("hex"),a=[],l={},c=new Map;let u=null,d=null;await Blt([e],async({data:m,type:b,reference:v,offset:_,num:E})=>{u===null&&(u=E);const w=Math.floor((u-E)*100/u);w!==d&&r&&await r({phase:"Receiving objects",loaded:u-E,total:u}),d=w,b=s[b],["commit","tree","blob","tag"].includes(b)?i[_]={type:b,offset:_}:b==="ofs-delta"?i[_]={type:b,offset:_}:b==="ref-delta"&&(i[_]={type:b,offset:_})});const h=Object.keys(i).map(Number);for(const[m,b]of h.entries()){const v=m+1===h.length?e.byteLength-20:h[m+1],_=i[b],E=Vit.buf(e.slice(b,v))>>>0;_.end=v,_.crc=E}const f=new Y1({pack:Promise.resolve(e),packfileSha:o,crcs:l,hashes:a,offsets:c,getExternalRefDelta:n});d=null;let g=0;const y=[0,0,0,0,0,0,0,0,0,0,0,0];for(let m in i){m=Number(m);const b=Math.floor(g*100/u);b!==d&&r&&await r({phase:"Resolving deltas",loaded:g,total:u}),g++,d=b;const v=i[m];if(!v.oid)try{f.readDepth=0,f.externalReadDepth=0;const{type:_,object:E}=await f.readSlice({start:m});y[f.readDepth]+=1;const w=await kg($D.wrap({type:_,object:E}));v.oid=w,a.push(w),c.set(w,m),l[w]=v.crc}catch{continue}}return a.sort(),f}async toBuffer(){const e=[],n=(c,u)=>{e.push(bt.from(c,u))};n("ff744f63","hex"),n("00000002","hex");const r=new Tl(bt.alloc(256*4));for(let c=0;c<256;c++){let u=0;for(const d of this.hashes)parseInt(d.slice(0,2),16)<=c&&u++;r.writeUInt32BE(u)}e.push(r.buffer);for(const c of this.hashes)n(c,"hex");const s=new Tl(bt.alloc(this.hashes.length*4));for(const c of this.hashes)s.writeUInt32BE(this.crcs[c]);e.push(s.buffer);const i=new Tl(bt.alloc(this.hashes.length*4));for(const c of this.hashes)i.writeUInt32BE(this.offsets.get(c));e.push(i.buffer),n(this.packfileSha,"hex");const o=bt.concat(e),a=await kg(o),l=bt.alloc(20);return l.write(a,"hex"),bt.concat([o,l])}async load({pack:e}){this.pack=e}async unload(){this.pack=null}async read({oid:e}){if(!this.offsets.get(e)){if(this.getExternalRefDelta)return this.externalReadDepth++,this.getExternalRefDelta(e);throw new Qt(`Could not read object ${e} from packfile`)}const n=this.offsets.get(e);return this.readSlice({start:n})}async readSlice({start:e}){if(this.offsetCache[e])return Object.assign({},this.offsetCache[e]);this.readDepth++;const n={16:"commit",32:"tree",48:"blob",64:"tag",96:"ofs_delta",112:"ref_delta"};if(!this.pack)throw new Qt("Tried to read from a GitPackIndex with no packfile loaded into memory");const r=(await this.pack).slice(e),s=new Tl(r),i=s.readUInt8(),o=i&112;let a=n[o];if(a===void 0)throw new Qt("Unrecognized type: 0b"+o.toString(2));const l=i&15;let c=l;i&128&&(c=Hlt(s,l));let d=null,h=null;if(a==="ofs_delta"){const g=$lt(s),y=e-g;({object:d,type:a}=await this.readSlice({start:y}))}if(a==="ref_delta"){const g=s.slice(20).toString("hex");({object:d,type:a}=await this.read({oid:g}))}const f=r.slice(s.tell());if(h=bt.from(await nue(f)),h.byteLength!==c)throw new Qt(`Packfile told us object would have length ${c} but it had length ${h.byteLength}`);return d&&(h=bt.from(Mlt(h,d))),this.readDepth>3&&(this.offsetCache[e]={type:a,object:h}),{type:a,format:"content",object:h}}}const Uw=Symbol("PackfileCache");async function zlt({fs:t,filename:e,getExternalRefDelta:n,emitter:r,emitterPrefix:s}){const i=await t.read(e);return Y1.fromIdx({idx:i,getExternalRefDelta:n})}function rue({fs:t,cache:e,filename:n,getExternalRefDelta:r,emitter:s,emitterPrefix:i}){e[Uw]||(e[Uw]=new Map);let o=e[Uw].get(n);return o||(o=zlt({fs:t,filename:n,getExternalRefDelta:r,emitter:s,emitterPrefix:i}),e[Uw].set(n,o)),o}async function Vlt({fs:t,cache:e,gitdir:n,oid:r,format:s="content",getExternalRefDelta:i}){let o=await t.readdir(vs.join(n,"objects/pack"));o=o.filter(a=>a.endsWith(".idx"));for(const a of o){const l=`${n}/objects/pack/${a}`,c=await rue({fs:t,cache:e,filename:l,getExternalRefDelta:i});if(c.error)throw new Qt(c.error);if(c.offsets.has(r)){if(!c.pack){const d=l.replace(/idx$/,"pack");c.pack=t.read(d)}const u=await c.read({oid:r,getExternalRefDelta:i});return u.format="content",u.source=`objects/pack/${a.replace(/idx$/,"pack")}`,u}}return null}async function Id({fs:t,cache:e,gitdir:n,oid:r,format:s="content"}){const i=u=>Id({fs:t,cache:e,gitdir:n,oid:u});let o;if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904"&&(o={format:"wrapped",object:bt.from("tree 0\0")}),o||(o=await Dlt({fs:t,gitdir:n,oid:r})),!o){if(o=await Vlt({fs:t,cache:e,gitdir:n,oid:r,getExternalRefDelta:i}),!o)throw new Ol(r);return o}if(s==="deflated"||(o.format==="deflated"&&(o.object=bt.from(await nue(o.object)),o.format="wrapped"),s==="wrapped"))return o;const a=await kg(o.object);if(a!==r)throw new Qt(`SHA check failed! Expected ${r}, computed ${a}`);const{object:l,type:c}=$D.unwrap(o.object);if(o.type=c,o.object=l,o.format="content",s==="content")return o;throw new Qt(`invalid requested format "${s}"`)}class XC extends xn{constructor(e,n,r=!0){super(`Failed to create ${e} at ${n} because it already exists.${r?` (Hint: use 'force: true' parameter to overwrite existing ${e}.)`:""}`),this.code=this.name=XC.code,this.data={noun:e,where:n,canForce:r}}}XC.code="AlreadyExistsError";class HD extends xn{constructor(e,n,r){super(`Found multiple ${e} matching "${n}" (${r.join(", ")}). Use a longer abbreviation length to disambiguate them.`),this.code=this.name=HD.code,this.data={nouns:e,short:n,matches:r}}}HD.code="AmbiguousError";class JC extends xn{constructor(e){super(`Your local changes to the following files would be overwritten by checkout: ${e.join(", ")}`),this.code=this.name=JC.code,this.data={filepaths:e}}}JC.code="CheckoutConflictError";class ZC extends xn{constructor(e,n){super(`Failed to checkout "${e}" because commit ${n} is not available locally. Do a git fetch to make the branch available locally.`),this.code=this.name=ZC.code,this.data={ref:e,oid:n}}}ZC.code="CommitNotFetchedError";class QC extends xn{constructor(){super("Empty response from git server."),this.code=this.name=QC.code,this.data={}}}QC.code="EmptyServerResponseError";class zD extends xn{constructor(){super("A simple fast-forward merge was not possible."),this.code=this.name=zD.code,this.data={}}}zD.code="FastForwardError";class VD extends xn{constructor(e,n){super(`One or more branches were not updated: ${e}`),this.code=this.name=VD.code,this.data={prettyDetails:e,result:n}}}VD.code="GitPushError";class X1 extends xn{constructor(e,n,r){super(`HTTP Error: ${e} ${n}`),this.code=this.name=X1.code,this.data={statusCode:e,statusMessage:n,response:r}}}X1.code="HttpError";class WD extends xn{constructor(e){let n="invalid filepath";e==="leading-slash"||e==="trailing-slash"?n='"filepath" parameter should not include leading or trailing directory separators because these can cause problems on some platforms.':e==="directory"&&(n='"filepath" should not be a directory.'),super(n),this.code=this.name=WD.code,this.data={reason:e}}}WD.code="InvalidFilepathError";class eA extends xn{constructor(e,n){super(`"${e}" would be an invalid git reference. (Hint: a valid alternative would be "${n}".)`),this.code=this.name=eA.code,this.data={ref:e,suggestion:n}}}eA.code="InvalidRefNameError";class GD extends xn{constructor(e){super(`Maximum search depth of ${e} exceeded.`),this.code=this.name=GD.code,this.data={depth:e}}}GD.code="MaxDepthError";class qD extends xn{constructor(){super("Merges with conflicts are not supported yet."),this.code=this.name=qD.code,this.data={}}}qD.code="MergeNotSupportedError";class KD extends xn{constructor(e,n,r,s){super(`Automatic merge failed with one or more merge conflicts in the following files: ${e.toString()}. Fix conflicts then commit the result.`),this.code=this.name=KD.code,this.data={filepaths:e,bothModified:n,deleteByUs:r,deleteByTheirs:s}}}KD.code="MergeConflictError";class YD extends xn{constructor(e){super(`No name was provided for ${e} in the argument or in the .git/config file.`),this.code=this.name=YD.code,this.data={role:e}}}YD.code="MissingNameError";class i_ extends xn{constructor(e){super(`The function requires a "${e}" parameter but none was provided.`),this.code=this.name=i_.code,this.data={parameter:e}}}i_.code="MissingParameterError";class XD extends xn{constructor(e){super('There are multiple errors that were thrown by the method. Please refer to the "errors" property to see more'),this.code=this.name=XD.code,this.data={errors:e},this.errors=e}}XD.code="MultipleGitError";class o_ extends xn{constructor(e,n){super(`Expected "${e}" but received "${n}".`),this.code=this.name=o_.code,this.data={expected:e,actual:n}}}o_.code="ParseError";class JD extends xn{constructor(e){let n="";e==="not-fast-forward"?n=" because it was not a simple fast-forward":e==="tag-exists"&&(n=" because tag already exists"),super(`Push rejected${n}. Use "force: true" to override.`),this.code=this.name=JD.code,this.data={reason:e}}}JD.code="PushRejectedError";class Vh extends xn{constructor(e,n){super(`Remote does not support the "${e}" so the "${n}" parameter cannot be used.`),this.code=this.name=Vh.code,this.data={capability:e,parameter:n}}}Vh.code="RemoteCapabilityError";class tA extends xn{constructor(e,n){super(`Remote did not reply using the "smart" HTTP protocol. Expected "001e# service=git-upload-pack" but received: ${e}`),this.code=this.name=tA.code,this.data={preview:e,response:n}}}tA.code="SmartHttpError";class nA extends xn{constructor(e,n,r){super(`Git remote "${e}" uses an unrecognized transport protocol: "${n}"`),this.code=this.name=nA.code,this.data={url:e,transport:n,suggestion:r}}}nA.code="UnknownTransportError";class rA extends xn{constructor(e){super(`Cannot parse remote URL: "${e}"`),this.code=this.name=rA.code,this.data={url:e}}}rA.code="UrlParseError";class sA extends xn{constructor(){super("The operation was canceled."),this.code=this.name=sA.code,this.data={}}}sA.code="UserCanceledError";class ZD extends xn{constructor(e){super(`Could not merge index: Entry for '${e}' is not up to date. Either reset the index entry to HEAD, or stage your unstaged changes.`),this.code=this.name=ZD.code,this.data={filepath:e}}}ZD.code="IndexResetError";class QD extends xn{constructor(e){super(`"${e}" does not point to any commit. You're maybe working on a repository with no commits yet. `),this.code=this.name=QD.code,this.data={ref:e}}}QD.code="NoCommitError";function VI({name:t,email:e,timestamp:n,timezoneOffset:r}){return r=Wlt(r),`${t} <${e}> ${n} ${r}`}function Wlt(t){const e=Glt(qlt(t));t=Math.abs(t);const n=Math.floor(t/60);t-=n*60;let r=String(n),s=String(t);return r.length<2&&(r="0"+r),s.length<2&&(s="0"+s),(e===-1?"-":"+")+r+s}function Glt(t){return Math.sign(t)||(Object.is(t,-0)?-1:1)}function qlt(t){return t===0?t:-t}function Tc(t){return t=t.replace(/\r/g,""),t=t.replace(/^\n+/,""),t=t.replace(/\n+$/,"")+`
`,t}function nk(t){const[,e,n,r,s]=t.match(/^(.*) <(.*)> (.*) (.*)$/);return{name:e,email:n,timestamp:Number(r),timezoneOffset:Klt(s)}}function Klt(t){let[,e,n,r]=t.match(/(\+|-)(\d\d)(\d\d)/);return r=(e==="+"?1:-1)*(Number(n)*60+Number(r)),Ylt(r)}function Ylt(t){return t===0?t:-t}class Ry{constructor(e){if(typeof e=="string")this._tag=e;else if(bt.isBuffer(e))this._tag=e.toString("utf8");else if(typeof e=="object")this._tag=Ry.render(e);else throw new Qt("invalid type passed to GitAnnotatedTag constructor")}static from(e){return new Ry(e)}static render(e){return`object ${e.object}
type ${e.type}
tag ${e.tag}
tagger ${VI(e.tagger)}

${e.message}
${e.gpgsig?e.gpgsig:""}`}justHeaders(){return this._tag.slice(0,this._tag.indexOf(`

`))}message(){const e=this.withoutSignature();return e.slice(e.indexOf(`

`)+2)}parse(){return Object.assign(this.headers(),{message:this.message(),gpgsig:this.gpgsig()})}render(){return this._tag}headers(){const e=this.justHeaders().split(`
`),n=[];for(const s of e)s[0]===" "?n[n.length-1]+=`
`+s.slice(1):n.push(s);const r={};for(const s of n){const i=s.slice(0,s.indexOf(" ")),o=s.slice(s.indexOf(" ")+1);Array.isArray(r[i])?r[i].push(o):r[i]=o}return r.tagger&&(r.tagger=nk(r.tagger)),r.committer&&(r.committer=nk(r.committer)),r}withoutSignature(){const e=Tc(this._tag);return e.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1?e:e.slice(0,e.lastIndexOf(`
-----BEGIN PGP SIGNATURE-----`))}gpgsig(){if(this._tag.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1)return;const e=this._tag.slice(this._tag.indexOf("-----BEGIN PGP SIGNATURE-----"),this._tag.indexOf("-----END PGP SIGNATURE-----")+27);return Tc(e)}payload(){return this.withoutSignature()+`
`}toObject(){return bt.from(this._tag,"utf8")}static async sign(e,n,r){const s=e.payload();let{signature:i}=await n({payload:s,secretKey:r});i=Tc(i);const o=s+i;return Ry.from(o)}}function V3(t){return t.trim().split(`
`).map(e=>" "+e).join(`
`)+`
`}function Xlt(t){return t.split(`
`).map(e=>e.replace(/^ /,"")).join(`
`)}class Ci{constructor(e){if(typeof e=="string")this._commit=e;else if(bt.isBuffer(e))this._commit=e.toString("utf8");else if(typeof e=="object")this._commit=Ci.render(e);else throw new Qt("invalid type passed to GitCommit constructor")}static fromPayloadSignature({payload:e,signature:n}){const r=Ci.justHeaders(e),s=Ci.justMessage(e),i=Tc(r+`
gpgsig`+V3(n)+`
`+s);return new Ci(i)}static from(e){return new Ci(e)}toObject(){return bt.from(this._commit,"utf8")}headers(){return this.parseHeaders()}message(){return Ci.justMessage(this._commit)}parse(){return Object.assign({message:this.message()},this.headers())}static justMessage(e){return Tc(e.slice(e.indexOf(`

`)+2))}static justHeaders(e){return e.slice(0,e.indexOf(`

`))}parseHeaders(){const e=Ci.justHeaders(this._commit).split(`
`),n=[];for(const s of e)s[0]===" "?n[n.length-1]+=`
`+s.slice(1):n.push(s);const r={parent:[]};for(const s of n){const i=s.slice(0,s.indexOf(" ")),o=s.slice(s.indexOf(" ")+1);Array.isArray(r[i])?r[i].push(o):r[i]=o}return r.author&&(r.author=nk(r.author)),r.committer&&(r.committer=nk(r.committer)),r}static renderHeaders(e){let n="";if(e.tree?n+=`tree ${e.tree}
`:n+=`tree 4b825dc642cb6eb9a060e54bf8d69288fbee4904
`,e.parent){if(e.parent.length===void 0)throw new Qt("commit 'parent' property should be an array");for(const i of e.parent)n+=`parent ${i}
`}const r=e.author;n+=`author ${VI(r)}
`;const s=e.committer||e.author;return n+=`committer ${VI(s)}
`,e.gpgsig&&(n+="gpgsig"+V3(e.gpgsig)),n}static render(e){return Ci.renderHeaders(e)+`
`+Tc(e.message)}render(){return this._commit}withoutSignature(){const e=Tc(this._commit);if(e.indexOf(`
gpgsig`)===-1)return e;const n=e.slice(0,e.indexOf(`
gpgsig`)),r=e.slice(e.indexOf(`-----END PGP SIGNATURE-----
`)+28);return Tc(n+`
`+r)}isolateSignature(){const e=this._commit.slice(this._commit.indexOf("-----BEGIN PGP SIGNATURE-----"),this._commit.indexOf("-----END PGP SIGNATURE-----")+27);return Xlt(e)}static async sign(e,n,r){const s=e.withoutSignature(),i=Ci.justMessage(e._commit);let{signature:o}=await n({payload:s,secretKey:r});o=Tc(o);const l=Ci.justHeaders(e._commit)+`
gpgsig`+V3(o)+`
`+i;return Ci.from(l)}}async function WI({fs:t,cache:e,gitdir:n,oid:r}){if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904")return{tree:K1.from([]),oid:r};const{type:s,object:i}=await Id({fs:t,cache:e,gitdir:n,oid:r});if(s==="tag")return r=Ry.from(i).parse().object,WI({fs:t,cache:e,gitdir:n,oid:r});if(s==="commit")return r=Ci.from(i).parse().tree,WI({fs:t,cache:e,gitdir:n,oid:r});if(s!=="tree")throw new s_(r,s,"tree");return{tree:K1.from(i),oid:r}}class Jlt{constructor({fs:e,gitdir:n,ref:r,cache:s}){this.fs=e,this.cache=s,this.gitdir=n,this.mapPromise=(async()=>{const o=new Map;let a;try{a=await cn.resolve({fs:e,gitdir:n,ref:r})}catch(c){c instanceof Ol&&(a="4b825dc642cb6eb9a060e54bf8d69288fbee4904")}const l=await WI({fs:e,cache:this.cache,gitdir:n,oid:a});return l.type="tree",l.mode="40000",o.set(".",l),o})();const i=this;this.ConstructEntry=class{constructor(a){this._fullpath=a,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(e){const n=e._fullpath,{fs:r,cache:s,gitdir:i}=this,o=await this.mapPromise,a=o.get(n);if(!a)throw new Error(`No obj for ${n}`);const l=a.oid;if(!l)throw new Error(`No oid for obj ${JSON.stringify(a)}`);if(a.type!=="tree")return null;const{type:c,object:u}=await Id({fs:r,cache:s,gitdir:i,oid:l});if(c!==a.type)throw new s_(l,c,a.type);const d=K1.from(u);for(const h of d)o.set(vs.join(n,h.path),h);return d.entries().map(h=>vs.join(n,h.path))}async type(e){if(e._type===!1){const n=await this.mapPromise,{type:r}=n.get(e._fullpath);e._type=r}return e._type}async mode(e){if(e._mode===!1){const n=await this.mapPromise,{mode:r}=n.get(e._fullpath);e._mode=Jce(parseInt(r,8))}return e._mode}async stat(e){}async content(e){if(e._content===!1){const n=await this.mapPromise,{fs:r,cache:s,gitdir:i}=this,a=n.get(e._fullpath).oid,{type:l,object:c}=await Id({fs:r,cache:s,gitdir:i,oid:a});l!=="blob"?e._content=void 0:e._content=new Uint8Array(c)}return e._content}async oid(e){if(e._oid===!1){const r=(await this.mapPromise).get(e._fullpath);e._oid=r.oid}return e._oid}}function Zlt({ref:t="HEAD"}={}){const e=Object.create(null);return Object.defineProperty(e,KC,{value:function({fs:n,gitdir:r,cache:s}){return new Jlt({fs:n,gitdir:r,ref:t,cache:s})}}),Object.freeze(e),e}class Qlt{constructor({fs:e,dir:n,gitdir:r,cache:s}){this.fs=e,this.cache=s,this.dir=n,this.gitdir=r;const i=this;this.ConstructEntry=class{constructor(a){this._fullpath=a,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(e){const n=e._fullpath,{fs:r,dir:s}=this,i=await r.readdir(vs.join(s,n));return i===null?null:i.map(o=>vs.join(n,o))}async type(e){return e._type===!1&&await e.stat(),e._type}async mode(e){return e._mode===!1&&await e.stat(),e._mode}async stat(e){if(e._stat===!1){const{fs:n,dir:r}=this;let s=await n.lstat(`${r}/${e._fullpath}`);if(!s)throw new Error(`ENOENT: no such file or directory, lstat '${e._fullpath}'`);let i=s.isDirectory()?"tree":"blob";i==="blob"&&!s.isFile()&&!s.isSymbolicLink()&&(i="special"),e._type=i,s=Sg(s),e._mode=s.mode,s.size===-1&&e._actualSize&&(s.size=e._actualSize),e._stat=s}return e._stat}async content(e){if(e._content===!1){const{fs:n,dir:r,gitdir:s}=this;if(await e.type()==="tree")e._content=void 0;else{const o=await(await Yl.get({fs:n,gitdir:s})).get("core.autocrlf"),a=await n.read(`${r}/${e._fullpath}`,{autocrlf:o});e._actualSize=a.length,e._stat&&e._stat.size===-1&&(e._stat.size=e._actualSize),e._content=new Uint8Array(a)}}return e._content}async oid(e){if(e._oid===!1){const{fs:n,gitdir:r,cache:s}=this;let i;await Iy.acquire({fs:n,gitdir:r,cache:s},async function(o){const a=o.entriesMap.get(e._fullpath),l=await e.stat(),u=await(await Yl.get({fs:n,gitdir:r})).get("core.filemode"),d=typeof An<"u"?An.platform!=="win32":!0;!a||HI(l,a,u,d)?await e.content()===void 0?i=void 0:(i=await kg($D.wrap({type:"blob",object:await e.content()})),a&&i===a.oid&&(!u||l.mode===a.mode)&&HI(l,a,u,d)&&o.insert({filepath:e._fullpath,stats:l,oid:i})):i=a.oid}),e._oid=i}return e._oid}}function ect(){const t=Object.create(null);return Object.defineProperty(t,KC,{value:function({fs:e,dir:n,gitdir:r,cache:s}){return new Qlt({fs:e,dir:n,gitdir:r,cache:s})}}),Object.freeze(t),t}function tct(t,e){const n=e-t;return Array.from({length:n},(r,s)=>t+s)}const sue=typeof Array.prototype.flat>"u"?t=>t.reduce((e,n)=>e.concat(n),[]):t=>t.flat();class nct{constructor(){this.value=null}consider(e){e!=null&&(this.value===null?this.value=e:e<this.value&&(this.value=e))}reset(){this.value=null}}function*rct(t){const e=new nct;let n;const r=[],s=t.length;for(let i=0;i<s;i++)r[i]=t[i].next().value,r[i]!==void 0&&e.consider(r[i]);if(e.value!==null)for(;;){const i=[];n=e.value,e.reset();for(let o=0;o<s;o++)r[o]!==void 0&&r[o]===n?(i[o]=r[o],r[o]=t[o].next().value):i[o]=null,r[o]!==void 0&&e.consider(r[o]);if(yield i,e.value===null)return}}async function sct({fs:t,cache:e,dir:n,gitdir:r,trees:s,map:i=async(l,c)=>c,reduce:o=async(l,c)=>{const u=sue(c);return l!==void 0&&u.unshift(l),u},iterate:a=(l,c)=>Promise.all([...c].map(l))}){const l=s.map(f=>f[KC]({fs:t,dir:n,gitdir:r,cache:e})),c=new Array(l.length).fill("."),u=tct(0,l.length),d=async f=>{u.map(m=>{f[m]=f[m]&&new l[m].ConstructEntry(f[m])});const y=(await Promise.all(u.map(m=>f[m]?l[m].readdir(f[m]):[]))).map(m=>m===null?[]:m).map(m=>m[Symbol.iterator]());return{entries:f,children:rct(y)}},h=async f=>{const{entries:g,children:y}=await d(f),m=g.find(v=>v&&v._fullpath)._fullpath,b=await i(m,g);if(b!==null){let v=await a(h,y);return v=v.filter(_=>_!==void 0),o(b,v)}};return h(c)}async function GI(t,e){const n=await t.readdir(e);n==null?await t.rm(e):n.length?await Promise.all(n.map(r=>{const s=vs.join(e,r);return t.lstat(s).then(i=>{if(i)return i.isDirectory()?GI(t,s):t.rm(s)})})).then(()=>t.rmdir(e)):await t.rmdir(e)}function ict(t){return oct(t)&&qV(t.then)&&qV(t.catch)}function oct(t){return t&&typeof t=="object"}function qV(t){return typeof t=="function"}function KV(t){return ict((n=>{try{return n.readFile().catch(r=>r)}catch(r){return r}})(t))}const YV=["readFile","writeFile","mkdir","rmdir","unlink","stat","lstat","readdir","readlink","symlink"];function XV(t,e){if(KV(e))for(const n of YV)t[`_${n}`]=e[n].bind(e);else for(const n of YV)t[`_${n}`]=F3(e[n].bind(e));KV(e)?e.rm?t._rm=e.rm.bind(e):e.rmdir.length>1?t._rm=e.rmdir.bind(e):t._rm=GI.bind(null,t):e.rm?t._rm=F3(e.rm.bind(e)):e.rmdir.length>2?t._rm=F3(e.rmdir.bind(e)):t._rm=GI.bind(null,t)}class act{constructor(e){if(typeof e._original_unwrapped_fs<"u")return e;const n=Object.getOwnPropertyDescriptor(e,"promises");n&&n.enumerable?XV(this,e.promises):XV(this,e),this._original_unwrapped_fs=e}async exists(e,n={}){try{return await this._stat(e),!0}catch(r){if(r.code==="ENOENT"||r.code==="ENOTDIR"||(r.code||"").includes("ENS"))return!1;throw console.log('Unhandled error in "FileSystem.exists()" function',r),r}}async read(e,n={}){try{let r=await this._readFile(e,n);if(n.autocrlf==="true")try{r=new TextDecoder("utf8",{fatal:!0}).decode(r),r=r.replace(/\r\n/g,`
`),r=new TextEncoder().encode(r)}catch{}return typeof r!="string"&&(r=bt.from(r)),r}catch{return null}}async write(e,n,r={}){try{await this._writeFile(e,n,r);return}catch{await this.mkdir(QS(e)),await this._writeFile(e,n,r)}}async mkdir(e,n=!1){try{await this._mkdir(e);return}catch(r){if(r===null||r.code==="EEXIST")return;if(n)throw r;if(r.code==="ENOENT"){const s=QS(e);if(s==="."||s==="/"||s===e)throw r;await this.mkdir(s),await this.mkdir(e,!0)}}}async rm(e){try{await this._unlink(e)}catch(n){if(n.code!=="ENOENT")throw n}}async rmdir(e,n){try{n&&n.recursive?await this._rm(e,n):await this._rmdir(e)}catch(r){if(r.code!=="ENOENT")throw r}}async readdir(e){try{const n=await this._readdir(e);return n.sort(qC),n}catch(n){return n.code==="ENOTDIR"?null:[]}}async readdirDeep(e){const n=await this._readdir(e);return(await Promise.all(n.map(async s=>{const i=e+"/"+s;return(await this._stat(i)).isDirectory()?this.readdirDeep(i):i}))).reduce((s,i)=>s.concat(i),[])}async lstat(e){try{return await this._lstat(e)}catch(n){if(n.code==="ENOENT"||(n.code||"").includes("ENS"))return null;throw n}}async readlink(e,n={encoding:"buffer"}){try{const r=await this._readlink(e,n);return bt.isBuffer(r)?r:bt.from(r)}catch(r){if(r.code==="ENOENT"||(r.code||"").includes("ENS"))return null;throw r}}async writelink(e,n){return this._symlink(n.toString("utf8"),e)}}function db(t,e){if(e===void 0)throw new i_(t)}async function lct({fs:t,gitdir:e,remote:n,url:r,force:s}){if(n!==MV.clean(n))throw new eA(n,MV.clean(n));const i=await Yl.get({fs:t,gitdir:e});if((await i.getSubsections("remote")).includes(n)&&r!==await i.get(`remote.${n}.url`))throw new XC("remote",n);await i.set(`remote.${n}.url`,r),await i.set(`remote.${n}.fetch`,`+refs/heads/*:refs/remotes/${n}/*`),await Yl.save({fs:t,gitdir:e,config:i})}const cct=(t,e)=>t==="."||e==null||e.length===0||e==="."?!0:e.length>=t.length?e.startsWith(t):t.startsWith(e);async function uct({fs:t,cache:e,onProgress:n,onPostCheckout:r,dir:s,gitdir:i,remote:o,ref:a,filepaths:l,noCheckout:c,noUpdateHead:u,dryRun:d,force:h,track:f=!0}){let g;if(r)try{g=await cn.resolve({fs:t,gitdir:i,ref:"HEAD"})}catch{g="0000000000000000000000000000000000000000"}let y;try{y=await cn.resolve({fs:t,gitdir:i,ref:a})}catch(m){if(a==="HEAD")throw m;const b=`${o}/${a}`;if(y=await cn.resolve({fs:t,gitdir:i,ref:b}),f){const v=await Yl.get({fs:t,gitdir:i});await v.set(`branch.${a}.remote`,o),await v.set(`branch.${a}.merge`,`refs/heads/${a}`),await Yl.save({fs:t,gitdir:i,config:v})}await cn.writeRef({fs:t,gitdir:i,ref:`refs/heads/${a}`,value:y})}if(!c){let m;try{m=await dct({fs:t,cache:e,onProgress:n,dir:s,gitdir:i,ref:a,force:h,filepaths:l})}catch(w){throw w instanceof Ol&&w.data.what===y?new ZC(a,y):w}const b=m.filter(([w])=>w==="conflict").map(([w,S])=>S);if(b.length>0)throw new JC(b);const v=m.filter(([w])=>w==="error").map(([w,S])=>S);if(v.length>0)throw new Qt(v.join(", "));if(d){r&&await r({previousHead:g,newHead:y,type:l!=null&&l.length>0?"file":"branch"});return}let _=0;const E=m.length;await Iy.acquire({fs:t,gitdir:i,cache:e},async function(w){await Promise.all(m.filter(([S])=>S==="delete"||S==="delete-index").map(async function([S,k]){const x=`${s}/${k}`;S==="delete"&&await t.rm(x),w.delete({filepath:k}),n&&await n({phase:"Updating workdir",loaded:++_,total:E})}))}),await Iy.acquire({fs:t,gitdir:i,cache:e},async function(w){for(const[S,k]of m)if(S==="rmdir"||S==="rmdir-index"){const x=`${s}/${k}`;try{S==="rmdir-index"&&w.delete({filepath:k}),await t.rmdir(x),n&&await n({phase:"Updating workdir",loaded:++_,total:E})}catch(I){if(I.code==="ENOTEMPTY")console.log(`Did not delete ${k} because directory is not empty`);else throw I}}}),await Promise.all(m.filter(([w])=>w==="mkdir"||w==="mkdir-index").map(async function([w,S]){const k=`${s}/${S}`;await t.mkdir(k),n&&await n({phase:"Updating workdir",loaded:++_,total:E})})),await Iy.acquire({fs:t,gitdir:i,cache:e},async function(w){await Promise.all(m.filter(([S])=>S==="create"||S==="create-index"||S==="update"||S==="mkdir-index").map(async function([S,k,x,I,R]){const C=`${s}/${k}`;try{if(S!=="create-index"&&S!=="mkdir-index"){const{object:O}=await Id({fs:t,cache:e,gitdir:i,oid:x});if(R&&await t.rm(C),I===33188)await t.write(C,O);else if(I===33261)await t.write(C,O,{mode:511});else if(I===40960)await t.writelink(C,O);else throw new Qt(`Invalid mode 0o${I.toString(8)} detected in blob ${x}`)}const N=await t.lstat(C);I===33261&&(N.mode=493),S==="mkdir-index"&&(N.mode=57344),w.insert({filepath:k,stats:N,oid:x}),n&&await n({phase:"Updating workdir",loaded:++_,total:E})}catch(N){console.log(N)}}))}),r&&await r({previousHead:g,newHead:y,type:l!=null&&l.length>0?"file":"branch"})}if(!u){const m=await cn.expand({fs:t,gitdir:i,ref:a});m.startsWith("refs/heads")?await cn.writeSymbolicRef({fs:t,gitdir:i,ref:"HEAD",value:m}):await cn.writeRef({fs:t,gitdir:i,ref:"HEAD",value:y})}}async function dct({fs:t,cache:e,onProgress:n,dir:r,gitdir:s,ref:i,force:o,filepaths:a}){let l=0;return sct({fs:t,cache:e,dir:r,gitdir:s,trees:[Zlt({ref:i}),ect(),blt()],map:async function(c,[u,d,h]){if(c===".")return;if(a&&!a.some(g=>cct(c,g)))return null;switch(n&&await n({phase:"Analyzing workdir",loaded:++l}),[!!h,!!u,!!d].map(Number).join("")){case"000":return;case"001":return o&&a&&a.includes(c)?["delete",c]:void 0;case"010":switch(await u.type()){case"tree":return["mkdir",c];case"blob":return["create",c,await u.oid(),await u.mode()];case"commit":return["mkdir-index",c,await u.oid(),await u.mode()];default:return["error",`new entry Unhandled type ${await u.type()}`]}case"011":switch(`${await u.type()}-${await d.type()}`){case"tree-tree":return;case"tree-blob":case"blob-tree":return["conflict",c];case"blob-blob":return await u.oid()!==await d.oid()?o?["update",c,await u.oid(),await u.mode(),await u.mode()!==await d.mode()]:["conflict",c]:await u.mode()!==await d.mode()?o?["update",c,await u.oid(),await u.mode(),!0]:["conflict",c]:["create-index",c,await u.oid(),await u.mode()];case"commit-tree":return;case"commit-blob":return["conflict",c];default:return["error",`new entry Unhandled type ${u.type}`]}case"100":return["delete-index",c];case"101":switch(await h.type()){case"tree":return["rmdir",c];case"blob":return await h.oid()!==await d.oid()?o?["delete",c]:["conflict",c]:["delete",c];case"commit":return["rmdir-index",c];default:return["error",`delete entry Unhandled type ${await h.type()}`]}case"110":case"111":switch(`${await h.type()}-${await u.type()}`){case"tree-tree":return;case"blob-blob":{if(await h.oid()===await u.oid()&&await h.mode()===await u.mode()&&!o)return;if(d){if(await d.oid()!==await h.oid()&&await d.oid()!==await u.oid())return o?["update",c,await u.oid(),await u.mode(),await u.mode()!==await d.mode()]:["conflict",c]}else if(o)return["update",c,await u.oid(),await u.mode(),await u.mode()!==await h.mode()];return await u.mode()!==await h.mode()?["update",c,await u.oid(),await u.mode(),!0]:await u.oid()!==await h.oid()?["update",c,await u.oid(),await u.mode(),!1]:void 0}case"tree-blob":return["update-dir-to-blob",c,await u.oid()];case"blob-tree":return["update-blob-to-tree",c];case"commit-commit":return["mkdir-index",c,await u.oid(),await u.mode()];default:return["error",`update entry Unhandled type ${await h.type()}-${await u.type()}`]}}},reduce:async function(c,u){return u=sue(u),c?c&&c[0]==="rmdir"?(u.push(c),u):(u.unshift(c),u):u}})}const hct=new RegExp("^refs/(heads/|tags/|remotes/)?(.*)");function iue(t){const e=hct.exec(t);return e?e[1]==="remotes/"&&t.endsWith("/HEAD")?e[2].slice(0,-5):e[2]:t}async function fct({fs:t,gitdir:e,fullname:n=!1,test:r=!1}){const s=await cn.resolve({fs:t,gitdir:e,ref:"HEAD",depth:2});if(r)try{await cn.resolve({fs:t,gitdir:e,ref:s})}catch{return}if(s.startsWith("refs/"))return n?s:iue(s)}function pct(t){return t=t.replace(/^git@([^:]+):/,"https://$1/"),t=t.replace(/^ssh:\/\//,"https://"),t}function oue({username:t="",password:e=""}){return`Basic ${bt.from(`${t}:${e}`).toString("base64")}`}async function iA(t,e){const n=eue(t);for(;;){const{value:r,done:s}=await n.next();if(r&&await e(r),s)break}n.return&&n.return()}async function qI(t){let e=0;const n=[];await iA(t,i=>{n.push(i),e+=i.byteLength});const r=new Uint8Array(e);let s=0;for(const i of n)r.set(i,s),s+=i.byteLength;return r}function JV(t){let e=t.match(/^https?:\/\/([^/]+)@/);if(e==null)return{url:t,auth:{}};e=e[1];const[n,r]=e.split(":");return t=t.replace(`${e}@`,""),{url:t,auth:{username:n,password:r}}}function mct(t,e){const n=e.toString(16);return"0".repeat(t-n.length)+n}class gl{static flush(){return bt.from("0000","utf8")}static delim(){return bt.from("0001","utf8")}static encode(e){typeof e=="string"&&(e=bt.from(e));const n=e.length+4,r=mct(4,n);return bt.concat([bt.from(r,"utf8"),e])}static streamReader(e){const n=new tue(e);return async function(){try{let s=await n.read(4);if(s==null)return!0;if(s=parseInt(s.toString("utf8"),16),s===0||s===1)return null;const i=await n.read(s-4);return i??!0}catch(s){return e.error=s,!0}}}}async function ZV(t){const e={};let n;for(;n=await t(),n!==!0;){if(n===null)continue;n=n.toString("utf8").replace(/\n$/,"");const r=n.indexOf("=");if(r>-1){const s=n.slice(0,r),i=n.slice(r+1);e[s]=i}else e[n]=!0}return{protocolVersion:2,capabilities2:e}}async function QV(t,{service:e}){const n=new Set,r=new Map,s=new Map,i=gl.streamReader(t);let o=await i();for(;o===null;)o=await i();if(o===!0)throw new QC;if(o.includes("version 2"))return ZV(i);if(o.toString("utf8").replace(/\n$/,"")!==`# service=${e}`)throw new o_(`# service=${e}\\n`,o.toString("utf8"));let a=await i();for(;a===null;)a=await i();if(a===!0)return{capabilities:n,refs:r,symrefs:s};if(a=a.toString("utf8"),a.includes("version 2"))return ZV(i);const[l,c]=W3(a,"\0","\\x00");if(c.split(" ").map(u=>n.add(u)),l!=="0000000000000000000000000000000000000000 capabilities^{}"){const[u,d]=W3(l," "," ");for(r.set(d,u);;){const h=await i();if(h===!0)break;if(h!==null){const[f,g]=W3(h.toString("utf8")," "," ");r.set(g,f)}}}for(const u of n)if(u.startsWith("symref=")){const d=u.match(/symref=([^:]+):(.*)/);d.length===3&&s.set(d[1],d[2])}return{protocolVersion:1,capabilities:n,refs:r,symrefs:s}}function W3(t,e,n){const r=t.trim().split(e);if(r.length!==2)throw new o_(`Two strings separated by '${n}'`,t.toString("utf8"));return r}const eW=(t,e)=>t.endsWith("?")?`${t}${e}`:`${t}/${e.replace(/^https?:\/\//,"")}`,tW=(t,e)=>{(e.username||e.password)&&(t.Authorization=oue(e)),e.headers&&Object.assign(t,e.headers)},G3=async t=>{try{const e=bt.from(await qI(t.body)),n=e.toString("utf8");return{preview:n.length<256?n:n.slice(0,256)+"...",response:n,data:e}}catch{return{}}};class nW{static async capabilities(){return["discover","connect"]}static async discover({http:e,onProgress:n,onAuth:r,onAuthSuccess:s,onAuthFailure:i,corsProxy:o,service:a,url:l,headers:c,protocolVersion:u}){let{url:d,auth:h}=JV(l);const f=o?eW(o,d):d;(h.username||h.password)&&(c.Authorization=oue(h)),u===2&&(c["Git-Protocol"]="version=2");let g,y,m=!1;do if(g=await e.request({onProgress:n,method:"GET",url:`${f}/info/refs?service=${a}`,headers:c}),y=!1,g.statusCode===401||g.statusCode===203){const b=m?i:r;if(b){if(h=await b(d,{...h,headers:{...c}}),h&&h.cancel)throw new sA;h&&(tW(c,h),m=!0,y=!0)}}else g.statusCode===200&&m&&s&&await s(d,h);while(y);if(g.statusCode!==200){const{response:b}=await G3(g);throw new X1(g.statusCode,g.statusMessage,b)}if(g.headers["content-type"]===`application/x-${a}-advertisement`){const b=await QV(g.body,{service:a});return b.auth=h,b}else{const{preview:b,response:v,data:_}=await G3(g);try{const E=await QV([_],{service:a});return E.auth=h,E}catch{throw new tA(b,v)}}}static async connect({http:e,onProgress:n,corsProxy:r,service:s,url:i,auth:o,body:a,headers:l}){const c=JV(i);c&&(i=c.url),r&&(i=eW(r,i)),l["content-type"]=`application/x-${s}-request`,l.accept=`application/x-${s}-result`,tW(l,o);const u=await e.request({onProgress:n,method:"POST",url:`${i}/${s}`,body:a,headers:l});if(u.statusCode!==200){const{response:d}=G3(u);throw new X1(u.statusCode,u.statusMessage,d)}return u}}function gct({url:t}){if(t.startsWith("git@"))return{transport:"ssh",address:t};const e=t.match(/(\w+)(:\/\/|::)(.*)/);if(e!==null){if(e[2]==="://")return{transport:e[1],address:e[0]};if(e[2]==="::")return{transport:e[1],address:e[3]}}}class bct{static getRemoteHelperFor({url:e}){const n=new Map;n.set("http",nW),n.set("https",nW);const r=gct({url:e});if(!r)throw new rA(e);if(n.has(r.transport))return n.get(r.transport);throw new nA(e,r.transport,r.transport==="ssh"?pct(e):void 0)}}let uh=null;class rW{static async read({fs:e,gitdir:n}){uh===null&&(uh=new XS);const r=vs.join(n,"shallow"),s=new Set;return await uh.acquire(r,async function(){const i=await e.read(r,{encoding:"utf8"});if(i===null||i.trim()==="")return s;i.trim().split(`
`).map(o=>s.add(o))}),s}static async write({fs:e,gitdir:n,oids:r}){uh===null&&(uh=new XS);const s=vs.join(n,"shallow");if(r.size>0){const i=[...r].join(`
`)+`
`;await uh.acquire(s,async function(){await e.write(s,i,{encoding:"utf8"})})}else await uh.acquire(s,async function(){await e.rm(s)})}}async function yct({fs:t,gitdir:e,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`;return t.exists(`${e}/${r}`)}async function vct({fs:t,cache:e,gitdir:n,oid:r,getExternalRefDelta:s}){let i=await t.readdir(vs.join(n,"objects/pack"));i=i.filter(o=>o.endsWith(".idx"));for(const o of i){const a=`${n}/objects/pack/${o}`,l=await rue({fs:t,cache:e,filename:a,getExternalRefDelta:s});if(l.error)throw new Qt(l.error);if(l.offsets.has(r))return!0}return!1}async function sW({fs:t,cache:e,gitdir:n,oid:r,format:s="content"}){const i=a=>Id({fs:t,cache:e,gitdir:n,oid:a});let o=await yct({fs:t,gitdir:n,oid:r});return o||(o=await vct({fs:t,cache:e,gitdir:n,oid:r,getExternalRefDelta:i})),o}function _ct(t){const s="5041434b"+"00000002"+"00000000";return t.slice(0,12).toString("hex")===s}function xct(t,e){const n=t.map(r=>r.split("=",1)[0]);return e.filter(r=>{const s=r.split("=",1)[0];return n.includes(s)})}const wct={agent:"git/isomorphic-git@1.29.0"};class L2{constructor(){this._queue=[]}write(e){if(this._ended)throw Error("You cannot write to a FIFO that has already been ended!");if(this._waiting){const n=this._waiting;this._waiting=null,n({value:e})}else this._queue.push(e)}end(){if(this._ended=!0,this._waiting){const e=this._waiting;this._waiting=null,e({done:!0})}}destroy(e){this.error=e,this.end()}async next(){if(this._queue.length>0)return{value:this._queue.shift()};if(this._ended)return{done:!0};if(this._waiting)throw Error("You cannot call read until the previous call to read has returned!");return new Promise(e=>{this._waiting=e})}}function Ect(t){const e=t.indexOf("\r"),n=t.indexOf(`
`);return e===-1&&n===-1?-1:e===-1?n+1:n===-1?e+1:n===e+1?n+1:Math.min(e,n)+1}function Sct(t){const e=new L2;let n="";return(async()=>(await iA(t,r=>{for(r=r.toString("utf8"),n+=r;;){const s=Ect(n);if(s===-1)break;e.write(n.slice(0,s)),n=n.slice(s)}}),n.length>0&&e.write(n),e.end()))(),e}class kct{static demux(e){const n=gl.streamReader(e),r=new L2,s=new L2,i=new L2,o=async function(){const a=await n();if(a===null)return o();if(a===!0){r.end(),i.end(),e.error?s.destroy(e.error):s.end();return}switch(a[0]){case 1:{s.write(a.slice(1));break}case 2:{i.write(a.slice(1));break}case 3:{const l=a.slice(1);i.write(l),r.end(),i.end(),s.destroy(new Error(l.toString("utf8")));return}default:r.write(a)}o()};return o(),{packetlines:r,packfile:s,progress:i}}}async function Cct(t){const{packetlines:e,packfile:n,progress:r}=kct.demux(t),s=[],i=[],o=[];let a=!1,l=!1;return new Promise((c,u)=>{iA(e,d=>{const h=d.toString("utf8").trim();if(h.startsWith("shallow")){const f=h.slice(-41).trim();f.length!==40&&u(new Mf(f)),s.push(f)}else if(h.startsWith("unshallow")){const f=h.slice(-41).trim();f.length!==40&&u(new Mf(f)),i.push(f)}else if(h.startsWith("ACK")){const[,f,g]=h.split(" ");o.push({oid:f,status:g}),g||(l=!0)}else h.startsWith("NAK")?(a=!0,l=!0):(l=!0,a=!0);l&&(t.error?u(t.error):c({shallows:s,unshallows:i,acks:o,nak:a,packfile:n,progress:r}))}).finally(()=>{l||(t.error?u(t.error):c({shallows:s,unshallows:i,acks:o,nak:a,packfile:n,progress:r}))})})}function Act({capabilities:t=[],wants:e=[],haves:n=[],shallows:r=[],depth:s=null,since:i=null,exclude:o=[]}){const a=[];e=[...new Set(e)];let l=` ${t.join(" ")}`;for(const c of e)a.push(gl.encode(`want ${c}${l}
`)),l="";for(const c of r)a.push(gl.encode(`shallow ${c}
`));s!==null&&a.push(gl.encode(`deepen ${s}
`)),i!==null&&a.push(gl.encode(`deepen-since ${Math.floor(i.valueOf()/1e3)}
`));for(const c of o)a.push(gl.encode(`deepen-not ${c}
`));a.push(gl.flush());for(const c of n)a.push(gl.encode(`have ${c}
`));return a.push(gl.encode(`done
`)),a}async function Tct({fs:t,cache:e,http:n,onProgress:r,onMessage:s,onAuth:i,onAuthSuccess:o,onAuthFailure:a,gitdir:l,ref:c,remoteRef:u,remote:d,url:h,corsProxy:f,depth:g=null,since:y=null,exclude:m=[],relative:b=!1,tags:v=!1,singleBranch:_=!1,headers:E={},prune:w=!1,pruneTags:S=!1}){const k=c||await fct({fs:t,gitdir:l,test:!0}),x=await Yl.get({fs:t,gitdir:l}),I=d||k&&await x.get(`branch.${k}.remote`)||"origin",R=h||await x.get(`remote.${I}.url`);if(typeof R>"u")throw new i_("remote OR url");const C=u||k&&await x.get(`branch.${k}.merge`)||c||"HEAD";f===void 0&&(f=await x.get("http.corsProxy"));const N=bct.getRemoteHelperFor({url:R}),O=await N.discover({http:n,onAuth:i,onAuthSuccess:o,onAuthFailure:a,corsProxy:f,service:"git-upload-pack",url:R,headers:E,protocolVersion:1}),P=O.auth,$=O.refs;if($.size===0)return{defaultBranch:null,fetchHead:null,fetchHeadDescription:null};if(g!==null&&!O.capabilities.has("shallow"))throw new Vh("shallow","depth");if(y!==null&&!O.capabilities.has("deepen-since"))throw new Vh("deepen-since","since");if(m.length>0&&!O.capabilities.has("deepen-not"))throw new Vh("deepen-not","exclude");if(b===!0&&!O.capabilities.has("deepen-relative"))throw new Vh("deepen-relative","relative");const{oid:ee,fullref:J}=cn.resolveAgainstMap({ref:C,map:$});for(const Te of $.keys())Te===J||Te==="HEAD"||Te.startsWith("refs/heads/")||v&&Te.startsWith("refs/tags/")||$.delete(Te);const Z=xct([...O.capabilities],["multi_ack_detailed","no-done","side-band-64k","ofs-delta",`agent=${wct.agent}`]);b&&Z.push("deepen-relative");const M=_?[ee]:$.values(),F=_?[k]:await cn.listRefs({fs:t,gitdir:l,filepath:"refs"});let G=[];for(let Te of F)try{Te=await cn.expand({fs:t,gitdir:l,ref:Te});const ke=await cn.resolve({fs:t,gitdir:l,ref:Te});await sW({fs:t,cache:e,gitdir:l,oid:ke})&&G.push(ke)}catch{}G=[...new Set(G)];const D=await rW.read({fs:t,gitdir:l}),j=O.capabilities.has("shallow")?[...D]:[],V=Act({capabilities:Z,wants:M,haves:G,shallows:j,depth:g,since:y,exclude:m}),W=bt.from(await qI(V)),re=await N.connect({http:n,onProgress:r,corsProxy:f,service:"git-upload-pack",url:R,auth:P,body:[W],headers:E}),te=await Cct(re.body);re.headers&&(te.headers=re.headers);for(const Te of te.shallows)if(!D.has(Te))try{const{object:ke}=await Id({fs:t,cache:e,gitdir:l,oid:Te}),K=new Ci(ke),ge=await Promise.all(K.headers().parent.map(le=>sW({fs:t,cache:e,gitdir:l,oid:le})));ge.length===0||ge.every(le=>le)||D.add(Te)}catch{D.add(Te)}for(const Te of te.unshallows)D.delete(Te);if(await rW.write({fs:t,gitdir:l,oids:D}),_){const Te=new Map([[J,ee]]),ke=new Map;let K=10,ge=J;for(;K--;){const se=O.symrefs.get(ge);if(se===void 0)break;ke.set(ge,se),ge=se}const ne=$.get(ge);ne&&Te.set(ge,ne);const{pruned:le}=await cn.updateRemoteRefs({fs:t,gitdir:l,remote:I,refs:Te,symrefs:ke,tags:v,prune:w});w&&(te.pruned=le)}else{const{pruned:Te}=await cn.updateRemoteRefs({fs:t,gitdir:l,remote:I,refs:$,symrefs:O.symrefs,tags:v,prune:w,pruneTags:S});w&&(te.pruned=Te)}if(te.HEAD=O.symrefs.get("HEAD"),te.HEAD===void 0){const{oid:Te}=cn.resolveAgainstMap({ref:"HEAD",map:$});for(const[ke,K]of $.entries())if(ke!=="HEAD"&&K===Te){te.HEAD=ke;break}}const Y=J.startsWith("refs/tags")?"tag":"branch";if(te.FETCH_HEAD={oid:ee,description:`${Y} '${iue(J)}' of ${R}`},r||s){const Te=Sct(te.progress);iA(Te,async ke=>{if(s&&await s(ke),r){const K=ke.match(/([^:]*).*\((\d+?)\/(\d+?)\)/);K&&await r({phase:K[1].trim(),loaded:parseInt(K[2],10),total:parseInt(K[3],10)})}})}const de=bt.from(await qI(te.packfile));if(re.body.error)throw re.body.error;const ye=de.slice(-20).toString("hex"),Se={defaultBranch:te.HEAD,fetchHead:te.FETCH_HEAD.oid,fetchHeadDescription:te.FETCH_HEAD.description};if(te.headers&&(Se.headers=te.headers),w&&(Se.pruned=te.pruned),ye!==""&&!_ct(de)){Se.packfile=`objects/pack/pack-${ye}.pack`;const Te=vs.join(l,Se.packfile);await t.write(Te,de);const ke=ge=>Id({fs:t,cache:e,gitdir:l,oid:ge}),K=await Y1.fromPack({pack:de,getExternalRefDelta:ke,onProgress:r});await t.write(Te.replace(/\.pack$/,".idx"),await K.toBuffer())}return Se}async function Nct({fs:t,bare:e=!1,dir:n,gitdir:r=e?n:vs.join(n,".git"),defaultBranch:s="master"}){if(await t.exists(r+"/config"))return;let i=["hooks","info","objects/info","objects/pack","refs/heads","refs/tags"];i=i.map(o=>r+"/"+o);for(const o of i)await t.mkdir(o);await t.write(r+"/config",`[core]
	repositoryformatversion = 0
	filemode = false
	bare = ${e}
`+(e?"":`	logallrefupdates = true
`)+`	symlinks = false
	ignorecase = true
`),await t.write(r+"/HEAD",`ref: refs/heads/${s}
`)}async function Pct({fs:t,cache:e,http:n,onProgress:r,onMessage:s,onAuth:i,onAuthSuccess:o,onAuthFailure:a,onPostCheckout:l,dir:c,gitdir:u,url:d,corsProxy:h,ref:f,remote:g,depth:y,since:m,exclude:b,relative:v,singleBranch:_,noCheckout:E,noTags:w,headers:S}){try{if(await Nct({fs:t,gitdir:u}),await lct({fs:t,gitdir:u,remote:g,url:d,force:!1}),h){const I=await Yl.get({fs:t,gitdir:u});await I.set("http.corsProxy",h),await Yl.save({fs:t,gitdir:u,config:I})}const{defaultBranch:k,fetchHead:x}=await Tct({fs:t,cache:e,http:n,onProgress:r,onMessage:s,onAuth:i,onAuthSuccess:o,onAuthFailure:a,gitdir:u,ref:f,remote:g,corsProxy:h,depth:y,since:m,exclude:b,relative:v,singleBranch:_,headers:S,tags:!w});if(x===null)return;f=f||k,f=f.replace("refs/heads/",""),await uct({fs:t,cache:e,onProgress:r,onPostCheckout:l,dir:c,gitdir:u,ref:f,remote:g,noCheckout:E})}catch(k){throw await t.rmdir(u,{recursive:!0,maxRetries:10}).catch(()=>{}),k}}async function Ict({fs:t,http:e,onProgress:n,onMessage:r,onAuth:s,onAuthSuccess:i,onAuthFailure:o,onPostCheckout:a,dir:l,gitdir:c=vs.join(l,".git"),url:u,corsProxy:d=void 0,ref:h=void 0,remote:f="origin",depth:g=void 0,since:y=void 0,exclude:m=[],relative:b=!1,singleBranch:v=!1,noCheckout:_=!1,noTags:E=!1,headers:w={},cache:S={}}){try{return db("fs",t),db("http",e),db("gitdir",c),_||db("dir",l),db("url",u),await Pct({fs:new act(t),cache:S,http:e,onProgress:n,onMessage:r,onAuth:s,onAuthSuccess:i,onAuthFailure:o,onPostCheckout:a,dir:l,gitdir:c,url:u,corsProxy:d,ref:h,remote:f,depth:g,since:y,exclude:m,relative:b,singleBranch:v,noCheckout:_,noTags:E,headers:w})}catch(k){throw k.caller="git.clone",k}}var Rct={clone:Ict};function Lct(t){let e=[t];return{next(){return Promise.resolve({done:e.length===0,value:e.pop()})},return(){return e=[],{}},[Symbol.asyncIterator](){return this}}}function Oct(t){return t[Symbol.asyncIterator]?t[Symbol.asyncIterator]():t[Symbol.iterator]?t[Symbol.iterator]():t.next?t:Lct(t)}async function Dct(t,e){const n=Oct(t);for(;;){const{value:r,done:s}=await n.next();if(r&&await e(r),s)break}n.return&&n.return()}async function Mct(t){let e=0;const n=[];await Dct(t,i=>{n.push(i),e+=i.byteLength});const r=new Uint8Array(e);let s=0;for(const i of n)r.set(i,s),s+=i.byteLength;return r}function jct(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{next(){return e.read()},return(){return e.releaseLock(),{}},[Symbol.asyncIterator](){return this}}}async function Fct({onProgress:t,url:e,method:n="GET",headers:r={},body:s}){s&&(s=await Mct(s));const i=await fetch(e,{method:n,headers:r,body:s}),o=i.body&&i.body.getReader?jct(i.body):[new Uint8Array(await i.arrayBuffer())];r={};for(const[a,l]of i.headers.entries())r[a]=l;return{url:i.url,method:i.method,statusCode:i.status,statusMessage:i.statusText,body:o,headers:r}}var Bct={request:Fct};const iW=t=>{const e=t.split("/")[2],n=ur.get(`git:${e}`);if(!n)return null;try{const{username:r,password:s}=JSON.parse(n||"{}");return{username:r,password:s}}catch(r){return console.log(`Failed to parse Git Cookie ${r}`),null}},Uct=(t,e)=>{const n=t.split("/")[2];ur.set(`git:${n}`,JSON.stringify(e))};function $ct(){const[t,e]=T.useState(!1),[n,r]=T.useState(),[s,i]=T.useState(),o=T.useRef({});T.useEffect(()=>{qu.then(l=>{o.current={},r(l),i(aue(l,o)),e(!0)})},[]);const a=T.useCallback(async l=>{if(!n||!s||!t)throw"Webcontainer not initialized";o.current={};const c={"User-Agent":"bolt.diy"},u=iW(l);u&&(c.Authorization=`Basic ${bt.from(`${u.username}:${u.password}`).toString("base64")}`);try{await Rct.clone({fs:s,http:Bct,dir:n.workdir,url:l,depth:1,singleBranch:!0,corsProxy:"/api/git-proxy",headers:c,onAuth:h=>{let f=iW(h);return f||(confirm("This repo is password protected. Ready to enter a username & password?")?(f={username:prompt("Enter username"),password:prompt("Enter password")},f):{cancel:!0})},onAuthFailure:(h,f)=>{throw ze.error(`Error Authenticating with ${h.split("/")[2]}`),`Error Authenticating with ${h.split("/")[2]}`},onAuthSuccess:(h,f)=>{Uct(h,f)}});const d={};for(const[h,f]of Object.entries(o.current))d[h]=f;return{workdir:n.workdir,data:d}}catch(d){throw console.error("Git clone error:",d),d}},[n,s,t]);return{ready:t,gitClone:a}}const aue=(t,e)=>({promises:{readFile:async(n,r)=>{const s=r?.encoding,i=ll.relative(t.workdir,n);try{return await t.fs.readFile(i,s)}catch(o){throw o}},writeFile:async(n,r,s)=>{const i=s.encoding,o=ll.relative(t.workdir,n);e.current&&(e.current[o]={data:r,encoding:i});try{return await t.fs.writeFile(o,r,{...s,encoding:i})}catch(a){throw a}},mkdir:async(n,r)=>{const s=ll.relative(t.workdir,n);try{return await t.fs.mkdir(s,{...r,recursive:!0})}catch(i){throw i}},readdir:async(n,r)=>{const s=ll.relative(t.workdir,n);try{return await t.fs.readdir(s,r)}catch(i){throw i}},rm:async(n,r)=>{const s=ll.relative(t.workdir,n);try{return await t.fs.rm(s,{...r||{}})}catch(i){throw i}},rmdir:async(n,r)=>{const s=ll.relative(t.workdir,n);try{return await t.fs.rm(s,{recursive:!0,...r})}catch(i){throw i}},unlink:async n=>{const r=ll.relative(t.workdir,n);try{return await t.fs.rm(r,{recursive:!1})}catch(s){throw s}},stat:async n=>{try{const r=ll.relative(t.workdir,n),s=await t.fs.readdir(ll.dirname(r),{withFileTypes:!0}),i=ll.basename(r),o=s.find(a=>a.name==i);if(!o)throw new Error(`ENOENT: no such file or directory, stat '${n}'`);return{isFile:()=>o.isFile(),isDirectory:()=>o.isDirectory(),isSymbolicLink:()=>!1,size:1,mode:438,mtimeMs:Date.now(),uid:1e3,gid:1e3}}catch(r){console.log(r?.message);const s=new Error(`ENOENT: no such file or directory, stat '${n}'`);throw s.code="ENOENT",s.errno=-2,s.syscall="stat",s.path=n,s}},lstat:async n=>await aue(t,e).promises.stat(n),readlink:async n=>{throw new Error(`EINVAL: invalid argument, readlink '${n}'`)},symlink:async(n,r)=>{throw new Error(`EPERM: operation not permitted, symlink '${n}' -> '${r}'`)},chmod:async(n,r)=>await Promise.resolve()}}),ll={dirname:t=>!t||!t.includes("/")?".":(t=t.replace(/\/+$/,""),t.split("/").slice(0,-1).join("/")||"/"),basename:(t,e)=>{t=t.replace(/\/+$/,"");const n=t.split("/").pop()||"";return e&&n.endsWith(e)?n.slice(0,-e.length):n},relative:(t,e)=>{if(!t||!e)return".";const n=u=>u.replace(/\/+$/,"").split("/").filter(Boolean),r=n(t),s=n(e);let i=0;const o=Math.min(r.length,s.length);for(let u=0;u<o&&r[u]===s[u];u++)i++;const a=r.length-i,l=s.slice(i),c=[...Array(a).fill(".."),...l];return c.length===0?".":c.join("/")}},Hct=({message:t="Loading...",progress:e,progressText:n})=>p.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/80 z-50 backdrop-blur-sm",children:p.jsxs("div",{className:"relative flex flex-col items-center gap-4 p-8 rounded-lg bg-bolt-elements-background-depth-2 shadow-lg",children:[p.jsx("div",{className:"i-svg-spinners:90-ring-with-bg text-bolt-elements-loader-progress",style:{fontSize:"2rem"}}),p.jsx("p",{className:"text-lg text-bolt-elements-textTertiary",children:t}),e!==void 0&&p.jsxs("div",{className:"w-64 flex flex-col gap-2",children:[p.jsx("div",{className:"w-full h-2 bg-bolt-elements-background-depth-1 rounded-full overflow-hidden",children:p.jsx("div",{className:"h-full bg-bolt-elements-loader-progress transition-all duration-300 ease-out rounded-full",style:{width:`${Math.min(100,Math.max(0,e))}%`}})}),n&&p.jsx("p",{className:"text-sm text-bolt-elements-textTertiary text-center",children:n})]})]})}),lue=T.forwardRef(({className:t,type:e,...n},r)=>p.jsx("input",{type:e,className:Pe("flex h-10 w-full rounded-md border border-bolt-elements-border bg-bolt-elements-background px-3 py-2 text-sm ring-offset-bolt-elements-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-bolt-elements-textSecondary focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-bolt-elements-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));lue.displayName="Input";function zct({isOpen:t,onClose:e,onConfirm:n,stats:r,isLargeRepo:s}){return p.jsx(jo,{open:t,onOpenChange:i=>!i&&e(),children:p.jsxs(qh,{children:[p.jsx(Kh,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9999]"}),p.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[9999]",children:p.jsx(ot.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"w-[90vw] md:w-[500px]",children:p.jsxs(Yh,{className:"bg-white dark:bg-[#1E1E1E] rounded-lg border border-[#E5E5E5] dark:border-[#333333] shadow-xl",children:[p.jsx("div",{className:"p-6 space-y-4",children:p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium text-[#111111] dark:text-white",children:"Repository Overview"}),p.jsxs("div",{className:"mt-4 space-y-2",children:[p.jsx("p",{className:"text-sm text-[#666666] dark:text-[#999999]",children:"Repository Statistics:"}),p.jsxs("div",{className:"space-y-2 text-sm text-[#111111] dark:text-white",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"i-ph:files text-blue-500 w-4 h-4"})," ",p.jsxs("span",{children:["Total Files: ",r.totalFiles]})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"i-ph:database text-blue-500 w-4 h-4"})," ",p.jsxs("span",{children:["Total Size: ",A2(r.totalSize)]})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"i-ph:code text-blue-500 w-4 h-4"})," ",p.jsxs("span",{children:["Languages:"," ",Object.entries(r.languages).sort(([,i],[,o])=>o-i).slice(0,3).map(([i,o])=>`${i} (${A2(o)})`).join(", ")]})]}),r.hasPackageJson&&p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"i-ph:package text-blue-500 w-4 h-4"})," ",p.jsx("span",{children:"Has package.json"})]}),r.hasDependencies&&p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"i-ph:tree-structure text-blue-500 w-4 h-4"})," ",p.jsx("span",{children:"Has dependencies"})]})]})]}),s&&p.jsxs("div",{className:"mt-4 p-3 bg-yellow-50 dark:bg-yellow-500/10 rounded-lg text-sm flex items-start gap-2",children:[p.jsx("span",{className:"i-ph:warning text-yellow-600 dark:text-yellow-500 w-4 h-4 flex-shrink-0 mt-0.5"}),p.jsxs("div",{className:"text-yellow-800 dark:text-yellow-500",children:["This repository is quite large (",A2(r.totalSize),"). Importing it might take a while and could impact performance."]})]})]})}),p.jsxs("div",{className:"border-t border-[#E5E5E5] dark:border-[#333333] p-4 flex justify-end gap-3 bg-[#F9F9F9] dark:bg-[#252525] rounded-b-lg",children:[p.jsx("button",{onClick:e,className:"px-4 py-2 rounded-lg bg-[#F5F5F5] dark:bg-[#333333] text-[#666666] hover:text-[#111111] dark:text-[#999999] dark:hover:text-white transition-colors",children:"Cancel"}),p.jsx("button",{onClick:n,className:"px-4 py-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600 transition-colors",children:"OK"})]})]})})})]})})}function Vct({isOpen:t,onClose:e,onSelect:n}){const[r,s]=T.useState(null),[i,o]=T.useState(!1),[a,l]=T.useState([]),[c,u]=T.useState(""),[d,h]=T.useState([]),[f,g]=T.useState("my-repos"),[y,m]=T.useState(""),[b,v]=T.useState([]),[_,E]=T.useState(""),[w,S]=T.useState({}),[k,x]=T.useState(null),[I,R]=T.useState(!1),[C,N]=T.useState(null),[O,P]=T.useState("");T.useEffect(()=>{t&&f==="my-repos"&&$()},[t,f]);const $=async()=>{const W=Qh("github_connection");if(!W?.token){ze.error("Please connect your GitHub account first");return}o(!0);try{const re=await fetch("https://api.github.com/user/repos?sort=updated&per_page=100&type=all",{headers:{Authorization:`Bearer ${W.token}`}});if(!re.ok)throw new Error("Failed to fetch repositories");const te=await re.json();if(Array.isArray(te)&&te.every(Y=>typeof Y=="object"&&Y!==null&&"full_name"in Y))l(te);else throw new Error("Invalid repository data format")}catch(re){console.error("Error fetching repos:",re),ze.error("Failed to fetch your repositories")}finally{o(!1)}},ee=async W=>{o(!0),h([]);try{let re=W;w.language&&(re+=` language:${w.language}`),w.stars&&(re+=` stars:>${w.stars}`),w.forks&&(re+=` forks:>${w.forks}`);const te=await fetch(`https://api.github.com/search/repositories?q=${encodeURIComponent(re)}&sort=stars&order=desc`,{headers:{Accept:"application/vnd.github.v3+json"}});if(!te.ok)throw new Error("Failed to search repositories");const Y=await te.json();if(typeof Y=="object"&&Y!==null&&"items"in Y&&Array.isArray(Y.items))h(Y.items);else throw new Error("Invalid search results format")}catch(re){console.error("Error searching repos:",re),ze.error("Failed to search repositories")}finally{o(!1)}},J=async W=>{o(!0);try{const re=await fetch(`https://api.github.com/repos/${W.full_name}/branches`,{headers:{Authorization:`Bearer ${Qh("github_connection")?.token}`}});if(!re.ok)throw new Error("Failed to fetch branches");const te=await re.json();if(Array.isArray(te)&&te.every(Y=>typeof Y=="object"&&Y!==null&&"name"in Y))v(te.map(Y=>({name:Y.name,default:Y.name===W.default_branch})));else throw new Error("Invalid branch data format")}catch(re){console.error("Error fetching branches:",re),ze.error("Failed to fetch branches")}finally{o(!1)}},Z=async W=>{s(W),await J(W)},M=W=>`${W.replace(/\/tree\/[^/]+/,"").replace(/\/$/,"").replace(/\.git$/,"")}.git`,F=async W=>{try{const[re,te]=W.replace(/\.git$/,"").split("/").slice(-2),Y=Qh("github_connection"),de=Y?.token?{Authorization:`Bearer ${Y.token}`}:{},ye=await fetch(`https://api.github.com/repos/${re}/${te}/git/trees/main?recursive=1`,{headers:de});if(!ye.ok)throw new Error("Failed to fetch repository structure");const Se=await ye.json();let Te=0,ke=0;const K={};let ge=!1,ne=!1;for(const se of Se.tree)if(se.type==="blob"){if(ke++,se.size&&(Te+=se.size),se.path==="package.json"){ge=!0;const Ce=await fetch(`https://api.github.com/repos/${re}/${te}/contents/package.json`,{headers:de});if(Ce.ok){const Ie=await Ce.json(),xe=JSON.parse(bt.from(Ie.content,"base64").toString());ne=!!(xe.dependencies||xe.devDependencies||xe.peerDependencies)}}const fe=se.path.split(".").pop()?.toLowerCase();fe&&(K[fe]=(K[fe]||0)+(se.size||0))}const le={totalFiles:ke,totalSize:Te,languages:K,hasPackageJson:ge,hasDependencies:ne};return x(le),le}catch(re){return console.error("Error verifying repository:",re),ze.error("Failed to verify repository"),null}},G=async()=>{try{let W;if(f==="url"&&y)W=M(y);else if(r)W=M(r.html_url),_&&(W=`${W}#${_}`);else return;const re=await F(W);if(!re)return;N(re),P(W),R(!0)}catch(W){console.error("Error preparing repository:",W),ze.error("Failed to prepare repository. Please try again.")}},D=()=>{R(!1),O&&(n(O),e())},j=(W,re)=>{let te=re;(W==="stars"||W==="forks")&&(te=re?parseInt(re,10):void 0),S(Y=>({...Y,[W]:te})),ee(c)},V=()=>{o(!1),u(""),h([]),e()};return p.jsxs(jo,{open:t,onOpenChange:W=>{W||V()},children:[p.jsxs(qh,{children:[p.jsx(Kh,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50"}),p.jsxs(Yh,{className:"fixed top-[50%] left-[50%] -translate-x-1/2 -translate-y-1/2 w-[90vw] md:w-[600px] max-h-[85vh] overflow-hidden bg-white dark:bg-[#1A1A1A] rounded-xl shadow-xl z-[51] border border-[#E5E5E5] dark:border-[#333333]",children:[p.jsxs("div",{className:"p-4 border-b border-[#E5E5E5] dark:border-[#333333] flex items-center justify-between",children:[p.jsx(qR,{className:"text-lg font-semibold text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary-dark",children:"Import GitHub Repository"}),p.jsxs(Gm,{onClick:V,className:Pe("p-2 rounded-lg transition-all duration-200 ease-in-out","text-bolt-elements-textTertiary hover:text-bolt-elements-textPrimary","dark:text-bolt-elements-textTertiary-dark dark:hover:text-bolt-elements-textPrimary-dark","hover:bg-bolt-elements-background-depth-2 dark:hover:bg-bolt-elements-background-depth-3","focus:outline-none focus:ring-2 focus:ring-bolt-elements-borderColor dark:focus:ring-bolt-elements-borderColor-dark"),children:[p.jsx("span",{className:"i-ph:x block w-5 h-5","aria-hidden":"true"}),p.jsx("span",{className:"sr-only",children:"Close dialog"})]})]}),p.jsxs("div",{className:"p-4",children:[p.jsxs("div",{className:"flex gap-2 mb-4",children:[p.jsxs(q3,{active:f==="my-repos",onClick:()=>g("my-repos"),children:[p.jsx("span",{className:"i-ph:book-bookmark"}),"My Repos"]}),p.jsxs(q3,{active:f==="search",onClick:()=>g("search"),children:[p.jsx("span",{className:"i-ph:magnifying-glass"}),"Search"]}),p.jsxs(q3,{active:f==="url",onClick:()=>g("url"),children:[p.jsx("span",{className:"i-ph:link"}),"URL"]})]}),f==="url"?p.jsxs("div",{className:"space-y-4",children:[p.jsx(lue,{placeholder:"Enter repository URL",value:y,onChange:W=>m(W.target.value),className:Pe("w-full",{"border-red-500":!1})}),p.jsx("button",{onClick:G,disabled:!y,className:"w-full h-10 px-4 py-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center gap-2 justify-center",children:"Import Repository"})]}):p.jsxs(p.Fragment,{children:[f==="search"&&p.jsxs("div",{className:"space-y-4 mb-4",children:[p.jsxs("div",{className:"flex gap-2",children:[p.jsx("input",{type:"text",placeholder:"Search repositories...",value:c,onChange:W=>{u(W.target.value),ee(W.target.value)},className:"flex-1 px-4 py-2 rounded-lg bg-[#F5F5F5] dark:bg-[#252525] border border-[#E5E5E5] dark:border-[#333333] text-bolt-elements-textPrimary"}),p.jsx("button",{onClick:()=>S({}),className:"px-3 py-2 rounded-lg bg-[#F5F5F5] dark:bg-[#252525] text-bolt-elements-textSecondary hover:text-bolt-elements-textPrimary",children:p.jsx("span",{className:"i-ph:funnel-simple"})})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsx("input",{type:"text",placeholder:"Filter by language...",value:w.language||"",onChange:W=>{S({...w,language:W.target.value}),ee(c)},className:"px-3 py-1.5 text-sm rounded-lg bg-[#F5F5F5] dark:bg-[#252525] border border-[#E5E5E5] dark:border-[#333333]"}),p.jsx("input",{type:"number",placeholder:"Min stars...",value:w.stars||"",onChange:W=>j("stars",W.target.value),className:"px-3 py-1.5 text-sm rounded-lg bg-[#F5F5F5] dark:bg-[#252525] border border-[#E5E5E5] dark:border-[#333333]"})]}),p.jsx("input",{type:"number",placeholder:"Min forks...",value:w.forks||"",onChange:W=>j("forks",W.target.value),className:"px-3 py-1.5 text-sm rounded-lg bg-[#F5F5F5] dark:bg-[#252525] border border-[#E5E5E5] dark:border-[#333333]"})]}),p.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:r?p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{onClick:()=>s(null),className:"p-1.5 rounded-lg hover:bg-[#F5F5F5] dark:hover:bg-[#252525]",children:p.jsx("span",{className:"i-ph:arrow-left w-4 h-4"})}),p.jsx("h3",{className:"font-medium",children:r.full_name})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-sm text-bolt-elements-textSecondary",children:"Select Branch"}),p.jsx("select",{value:_,onChange:W=>E(W.target.value),className:"w-full px-3 py-2 rounded-lg bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 border border-bolt-elements-borderColor dark:border-bolt-elements-borderColor-dark text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary-dark focus:outline-none focus:ring-2 focus:ring-bolt-elements-borderColor dark:focus:ring-bolt-elements-borderColor-dark",children:b.map(W=>p.jsxs("option",{value:W.name,className:"bg-bolt-elements-background-depth-2 dark:bg-bolt-elements-background-depth-3 text-bolt-elements-textPrimary dark:text-bolt-elements-textPrimary-dark",children:[W.name," ",W.default?"(default)":""]},W.name))}),p.jsx("button",{onClick:G,className:"w-full h-10 px-4 py-2 rounded-lg bg-blue-500 text-white hover:bg-blue-600 transition-all duration-200 flex items-center gap-2 justify-center",children:"Import Selected Branch"})]})]}):p.jsx(Wct,{repos:f==="my-repos"?a:d,isLoading:i,onSelect:Z,activeTab:f})})]})]})]})]}),C&&p.jsx(zct,{isOpen:I,onClose:D,onConfirm:D,stats:C,isLargeRepo:C.totalSize>50*1024*1024})]})}function q3({active:t,onClick:e,children:n}){return p.jsx("button",{onClick:e,className:Pe("px-4 py-2 h-10 rounded-lg transition-all duration-200 flex items-center gap-2 min-w-[120px] justify-center",t?"bg-blue-500 text-white hover:bg-blue-600":"bg-[#F5F5F5] dark:bg-[#252525] text-bolt-elements-textPrimary dark:text-white hover:bg-[#E5E5E5] dark:hover:bg-[#333333] border border-[#E5E5E5] dark:border-[#333333]"),children:n})}function Wct({repos:t,isLoading:e,onSelect:n,activeTab:r}){return e?p.jsxs("div",{className:"flex items-center justify-center py-8 text-bolt-elements-textSecondary",children:[p.jsx("span",{className:"i-ph:spinner animate-spin mr-2"}),"Loading repositories..."]}):t.length===0?p.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-bolt-elements-textSecondary",children:[p.jsx("span",{className:"i-ph:folder-simple-dashed w-12 h-12 mb-2 opacity-50"}),p.jsx("p",{children:r==="my-repos"?"No repositories found":"Search for repositories"})]}):t.map(s=>p.jsx(Gct,{repo:s,onSelect:()=>n(s)},s.full_name))}function Gct({repo:t,onSelect:e}){return p.jsxs("div",{className:"p-4 rounded-lg bg-[#F5F5F5] dark:bg-[#252525] border border-[#E5E5E5] dark:border-[#333333] hover:border-blue-500/50 transition-colors",children:[" ",p.jsxs("div",{className:"flex items-center justify-between mb-2",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"i-ph:git-repository text-bolt-elements-textTertiary"}),p.jsx("h3",{className:"font-medium text-bolt-elements-textPrimary dark:text-white",children:t.name})]}),p.jsxs("button",{onClick:e,className:"px-4 py-2 h-10 rounded-lg bg-blue-500 text-white hover:bg-blue-600 transition-all duration-200 flex items-center gap-2 min-w-[120px] justify-center",children:[p.jsx("span",{className:"i-ph:download-simple w-4 h-4"}),"Import"]})]}),t.description&&p.jsx("p",{className:"text-sm text-bolt-elements-textSecondary mb-3",children:t.description}),p.jsxs("div",{className:"flex items-center gap-4 text-sm text-bolt-elements-textTertiary",children:[t.language&&p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx("span",{className:"i-ph:code"}),t.language]}),p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx("span",{className:"i-ph:star"}),t.stargazers_count.toLocaleString()]}),p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx("span",{className:"i-ph:clock"}),new Date(t.updated_at).toLocaleDateString()]})]})]})}const qct=["node_modules/**",".git/**",".github/**",".vscode/**","dist/**","build/**",".next/**","coverage/**",".cache/**",".idea/**","**/*.log","**/.DS_Store","**/npm-debug.log*","**/yarn-debug.log*","**/yarn-error.log*","**/*lock.json","**/*lock.yaml"],Kct=PD().add(qct),Yct=100*1024,Xct=500*1024;function Jct({importChat:t,className:e}){const{ready:n,gitClone:r}=$ct(),[s,i]=T.useState(!1),[o,a]=T.useState(!1),l=async c=>{if(n){i(!0);try{const{workdir:u,data:d}=await r(c);if(t){const h=Object.keys(d).filter(w=>!Kct.ignores(w)),f=new TextDecoder("utf-8");let g=0;const y=[],m=[];for(const w of h){const{data:S,encoding:k}=d[w];if(S instanceof Uint8Array&&!w.match(/\.(txt|md|astro|mjs|js|jsx|ts|tsx|json|html|css|scss|less|yml|yaml|xml|svg)$/i)){y.push(w);continue}try{const x=k==="utf8"?S:S instanceof Uint8Array?f.decode(S):"";if(!x)continue;const I=new TextEncoder().encode(x).length;if(I>Yct){y.push(`${w} (too large: ${Math.round(I/1024)}KB)`);continue}if(g+I>Xct){y.push(`${w} (would exceed total size limit)`);continue}g+=I,m.push({path:w,content:x})}catch(x){y.push(`${w} (error: ${x.message})`)}}const b=await Zle(m),v=Qle(b),E=[{role:"assistant",content:`Cloning the repo ${c} into ${u}
${y.length>0?`
Skipped files (${y.length}):
${y.map(w=>`- ${w}`).join(`
`)}`:""}

<boltArtifact id="imported-files" title="Git Cloned Files" type="bundled">
${m.map(w=>`<boltAction type="file" filePath="${w.path}">
${ece(w.content)}
</boltAction>`).join(`
`)}
</boltArtifact>`,id:ky(),createdAt:new Date}];v&&E.push(v),await t(`Git Project:${c.split("/").slice(-1)[0]}`,E)}}catch(u){console.error("Error during import:",u),ze.error("Failed to import repository")}finally{i(!1)}}};return p.jsxs(p.Fragment,{children:[p.jsxs($C,{onClick:()=>a(!0),title:"Clone a Git Repo",variant:"outline",size:"lg",className:Pe("gap-2 bg-[#F5F5F5] dark:bg-[#252525]","text-bolt-elements-textPrimary dark:text-white","hover:bg-[#E5E5E5] dark:hover:bg-[#333333]","border-[#E5E5E5] dark:border-[#333333]","h-10 px-4 py-2 min-w-[120px] justify-center","transition-all duration-200 ease-in-out",e),disabled:!n||s,children:[p.jsx("span",{className:"i-ph:git-branch w-4 h-4"}),"Clone a Git Repo"]}),p.jsx(Vct,{isOpen:o,onClose:()=>a(!1),onSelect:l}),s&&p.jsx(Hct,{message:"Please wait while we clone the repository..."})]})}const Zct=({files:t,imageDataList:e,onRemove:n})=>!t||t.length===0?null:p.jsx("div",{className:"flex flex-row overflow-x-auto -mt-2",children:t.map((r,s)=>p.jsx("div",{className:"mr-2 relative",children:e[s]&&p.jsxs("div",{className:"relative pt-4 pr-4",children:[p.jsx("img",{src:e[s],alt:r.name,className:"max-h-20"}),p.jsx("button",{onClick:()=>n(s),className:"absolute top-1 right-1 z-10 bg-black rounded-full w-5 h-5 shadow-md hover:bg-gray-900 transition-colors flex items-center justify-center",children:p.jsx("div",{className:"i-ph:x w-3 h-3 text-gray-200"})})]})},r.name+r.size))}),Qct=({model:t,setModel:e,provider:n,setProvider:r,modelList:s,providerList:i,modelLoading:o})=>{const[a,l]=T.useState(""),[c,u]=T.useState(!1),[d,h]=T.useState(-1),f=T.useRef(null),g=T.useRef([]),y=T.useRef(null);T.useEffect(()=>{const v=_=>{y.current&&!y.current.contains(_.target)&&(u(!1),l(""))};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]);const m=[...s].filter(v=>v.provider===n?.name&&v.name).filter(v=>v.label.toLowerCase().includes(a.toLowerCase())||v.name.toLowerCase().includes(a.toLowerCase()));T.useEffect(()=>{h(-1)},[a,c]),T.useEffect(()=>{c&&f.current&&f.current.focus()},[c]);const b=v=>{if(c)switch(v.key){case"ArrowDown":v.preventDefault(),h(_=>{const E=_+1;return E>=m.length?0:E});break;case"ArrowUp":v.preventDefault(),h(_=>{const E=_-1;return E<0?m.length-1:E});break;case"Enter":if(v.preventDefault(),d>=0&&d<m.length){const _=m[d];e?.(_.name),u(!1),l("")}break;case"Escape":v.preventDefault(),u(!1),l("");break;case"Tab":!v.shiftKey&&d===m.length-1&&u(!1);break}};return T.useEffect(()=>{d>=0&&g.current[d]&&g.current[d]?.scrollIntoView({block:"nearest"})},[d]),T.useEffect(()=>{if(i.length!==0&&n&&!i.map(v=>v.name).includes(n.name)){const v=i[0];r?.(v);const _=s.find(E=>E.provider===v.name);_&&e?.(_.name)}},[i,n,r,s,e]),i.length===0?p.jsx("div",{className:"mb-2 p-4 rounded-lg border border-bolt-elements-borderColor bg-bolt-elements-prompt-background text-bolt-elements-textPrimary",children:p.jsx("p",{className:"text-center",children:"No providers are currently enabled. Please enable at least one provider in the settings to start using the chat."})}):p.jsxs("div",{className:"mb-2 flex gap-2 flex-col sm:flex-row",children:[p.jsx("select",{value:n?.name??"",onChange:v=>{const _=i.find(w=>w.name===v.target.value);_&&r&&r(_);const E=[...s].find(w=>w.provider===v.target.value);E&&e&&e(E.name)},className:"flex-1 p-2 rounded-lg border border-bolt-elements-borderColor bg-bolt-elements-prompt-background text-bolt-elements-textPrimary focus:outline-none focus:ring-2 focus:ring-bolt-elements-focus transition-all",children:i.map(v=>p.jsx("option",{value:v.name,children:v.name},v.name))}),p.jsxs("div",{className:"relative flex-1 lg:max-w-[70%]",onKeyDown:b,ref:y,children:[p.jsx("div",{className:Pe("w-full p-2 rounded-lg border border-bolt-elements-borderColor","bg-bolt-elements-prompt-background text-bolt-elements-textPrimary","focus-within:outline-none focus-within:ring-2 focus-within:ring-bolt-elements-focus","transition-all cursor-pointer",c?"ring-2 ring-bolt-elements-focus":void 0),onClick:()=>u(!c),onKeyDown:v=>{(v.key==="Enter"||v.key===" ")&&(v.preventDefault(),u(!c))},role:"combobox","aria-expanded":c,"aria-controls":"model-listbox","aria-haspopup":"listbox",tabIndex:0,children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("div",{className:"truncate",children:s.find(v=>v.name===t)?.label||"Select model"}),p.jsx("div",{className:Pe("i-ph:caret-down w-4 h-4 text-bolt-elements-textSecondary opacity-75",c?"rotate-180":void 0)})]})}),c&&p.jsxs("div",{className:"absolute z-10 w-full mt-1 py-1 rounded-lg border border-bolt-elements-borderColor bg-bolt-elements-background-depth-2  shadow-lg",role:"listbox",id:"model-listbox",children:[p.jsx("div",{className:"px-2 pb-2",children:p.jsxs("div",{className:"relative",children:[p.jsx("input",{ref:f,type:"text",value:a,onChange:v=>l(v.target.value),placeholder:"Search models...",className:Pe("w-full pl-8 pr-3 py-1.5 rounded-md text-sm","bg-bolt-elements-background-depth-2 border border-bolt-elements-borderColor","text-bolt-elements-textPrimary placeholder:text-bolt-elements-textTertiary","focus:outline-none focus:ring-2 focus:ring-bolt-elements-focus","transition-all"),onClick:v=>v.stopPropagation(),role:"searchbox","aria-label":"Search models"}),p.jsx("div",{className:"absolute left-2.5 top-1/2 -translate-y-1/2",children:p.jsx("span",{className:"i-ph:magnifying-glass text-bolt-elements-textTertiary"})})]})}),p.jsx("div",{className:Pe("max-h-60 overflow-y-auto","sm:scrollbar-none","[&::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar]:h-2","[&::-webkit-scrollbar-thumb]:bg-bolt-elements-borderColor","[&::-webkit-scrollbar-thumb]:hover:bg-bolt-elements-borderColorHover","[&::-webkit-scrollbar-thumb]:rounded-full","[&::-webkit-scrollbar-track]:bg-bolt-elements-background-depth-2","[&::-webkit-scrollbar-track]:rounded-full","sm:[&::-webkit-scrollbar]:w-1.5 sm:[&::-webkit-scrollbar]:h-1.5","sm:hover:[&::-webkit-scrollbar-thumb]:bg-bolt-elements-borderColor/50","sm:hover:[&::-webkit-scrollbar-thumb:hover]:bg-bolt-elements-borderColor","sm:[&::-webkit-scrollbar-track]:bg-transparent"),children:o==="all"||o===n?.name?p.jsx("div",{className:"px-3 py-2 text-sm text-bolt-elements-textTertiary",children:"Loading..."}):m.length===0?p.jsx("div",{className:"px-3 py-2 text-sm text-bolt-elements-textTertiary",children:"No models found"}):m.map((v,_)=>p.jsx("div",{ref:E=>g.current[_]=E,role:"option","aria-selected":t===v.name,className:Pe("px-3 py-2 text-sm cursor-pointer","hover:bg-bolt-elements-background-depth-3","text-bolt-elements-textPrimary","outline-none",t===v.name||d===_?"bg-bolt-elements-background-depth-2":void 0,d===_?"ring-1 ring-inset ring-bolt-elements-focus":void 0),onClick:E=>{E.stopPropagation(),e?.(v.name),u(!1),l("")},tabIndex:d===_?0:-1,children:v.label},_))})]})]})]})},eut=({isListening:t,onStart:e,onStop:n,disabled:r})=>p.jsx(dr,{title:t?"Stop listening":"Start speech recognition",disabled:r,className:Pe("transition-all",{"text-bolt-elements-item-contentAccent":t}),onClick:t?n:e,children:t?p.jsx("div",{className:"i-ph:microphone-slash text-xl"}):p.jsx("div",{className:"i-ph:microphone text-xl"})}),tut=({setUploadedFiles:t,setImageDataList:e,uploadedFiles:n,imageDataList:r})=>(T.useEffect(()=>(t&&e&&(window.__BOLT_SET_UPLOADED_FILES__=t,window.__BOLT_SET_IMAGE_DATA_LIST__=e,window.__BOLT_UPLOADED_FILES__=n,window.__BOLT_IMAGE_DATA_LIST__=r),()=>{delete window.__BOLT_SET_UPLOADED_FILES__,delete window.__BOLT_SET_IMAGE_DATA_LIST__,delete window.__BOLT_UPLOADED_FILES__,delete window.__BOLT_IMAGE_DATA_LIST__}),[t,e,n,r]),null),nut=({template:t})=>p.jsx("a",{href:`/git?url=https://github.com/${t.githubRepo}.git`,"data-state":"closed","data-discover":"true",className:"items-center justify-center",children:p.jsx("div",{className:`inline-block ${t.icon} w-8 h-8 text-4xl transition-theme opacity-25 hover:opacity-100 hover:text-blue-500 dark:text-white dark:opacity-50 dark:hover:opacity-100 dark:hover:text-blue-400 transition-all`,title:t.label})}),rut=()=>(ut.useEffect(()=>{console.log("Available templates:",kE.map(t=>({name:t.name,icon:t.icon})))},[]),p.jsxs("div",{className:"flex flex-col items-center gap-4",children:[p.jsx("span",{className:"text-sm text-gray-500",children:"or start a blank app with your favorite stack"}),p.jsx("div",{className:"flex justify-center",children:p.jsx("div",{className:"flex w-70 flex-wrap items-center justify-center gap-4",children:kE.map(t=>p.jsx(nut,{template:t},t.name))})})]}));function sut({alert:t,clearAlert:e,postMessage:n}){const{description:r,content:s,source:i}=t,o=i==="preview",a=o?"Preview Error":"Terminal Error",l=o?"We encountered an error while running the preview. Would you like Bolt to analyze and help resolve this issue?":"We encountered an error while running terminal commands. Would you like Bolt to analyze and help resolve this issue?";return p.jsx(zl,{children:p.jsx(ot.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"rounded-lg border border-bolt-elements-borderColor bg-bolt-elements-background-depth-2 p-4 mb-2",children:p.jsxs("div",{className:"flex items-start",children:[p.jsx(ot.div,{className:"flex-shrink-0",initial:{scale:0},animate:{scale:1},transition:{delay:.2},children:p.jsx("div",{className:"i-ph:warning-duotone text-xl text-bolt-elements-button-danger-text"})}),p.jsxs("div",{className:"ml-3 flex-1",children:[p.jsx(ot.h3,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},className:"text-sm font-medium text-bolt-elements-textPrimary",children:a}),p.jsxs(ot.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"mt-2 text-sm text-bolt-elements-textSecondary",children:[p.jsx("p",{children:l}),r&&p.jsxs("div",{className:"text-xs text-bolt-elements-textSecondary p-2 bg-bolt-elements-background-depth-3 rounded mt-4 mb-4",children:["Error: ",r]})]}),p.jsx(ot.div,{className:"mt-4",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},children:p.jsxs("div",{className:Pe(" flex gap-2"),children:[p.jsxs("button",{onClick:()=>n(`*Fix this ${o?"preview":"terminal"} error* 
\`\`\`${o?"js":"sh"}
${s}
\`\`\`
`),className:Pe("px-2 py-1.5 rounded-md text-sm font-medium","bg-bolt-elements-button-primary-background","hover:bg-bolt-elements-button-primary-backgroundHover","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-bolt-elements-button-danger-background","text-bolt-elements-button-primary-text","flex items-center gap-1.5"),children:[p.jsx("div",{className:"i-ph:chat-circle-duotone"}),"Ask Ada"]}),p.jsx("button",{onClick:e,className:Pe("px-2 py-1.5 rounded-md text-sm font-medium","bg-bolt-elements-button-secondary-background","hover:bg-bolt-elements-button-secondary-backgroundHover","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-bolt-elements-button-secondary-background","text-bolt-elements-button-secondary-text"),children:"Dismiss"})]})})]})]})})})}function iut({data:t}){const[e,n]=ut.useState([]),[r,s]=T.useState(!1);return ut.useEffect(()=>{if(!t||t.length==0){n([]);return}const i=new Map;t.forEach(a=>{const l=i.get(a.label);l&&l.status==="complete"||i.set(a.label,a)});const o=Array.from(i.values());o.sort((a,l)=>a.order-l.order),n(o)},[t]),e.length===0?p.jsx(p.Fragment,{}):p.jsx(zl,{children:p.jsx("div",{className:Pe("bg-bolt-elements-background-depth-2","border border-bolt-elements-borderColor","shadow-lg rounded-lg  relative w-full max-w-chat mx-auto z-prompt","p-1"),children:p.jsxs("div",{className:Pe("bg-bolt-elements-item-backgroundAccent","p-1 rounded-lg text-bolt-elements-item-contentAccent","flex "),children:[p.jsx("div",{className:"flex-1",children:p.jsx(zl,{children:r?p.jsx(ot.div,{className:"actions",initial:{height:0},animate:{height:"auto"},exit:{height:"0px"},transition:{duration:.15},children:e.map((i,o)=>p.jsx(oW,{progress:i},o))}):p.jsx(oW,{progress:e.slice(-1)[0]})})}),p.jsx(ot.button,{initial:{width:0},animate:{width:"auto"},exit:{width:0},transition:{duration:.15,ease:so},className:" p-1 rounded-lg bg-bolt-elements-item-backgroundAccent hover:bg-bolt-elements-artifacts-backgroundHover",onClick:()=>s(i=>!i),children:p.jsx("div",{className:r?"i-ph:caret-up-bold":"i-ph:caret-down-bold"})})]})})})}const oW=({progress:t})=>p.jsxs(ot.div,{className:Pe("flex text-sm gap-3"),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},children:[p.jsx("div",{className:"flex items-center gap-1.5 ",children:p.jsx("div",{children:t.status==="in-progress"?p.jsx("div",{className:"i-svg-spinners:90-ring-with-bg"}):t.status==="complete"?p.jsx("div",{className:"i-ph:check"}):null})}),t.message]}),out=76,aut=ut.forwardRef(({textareaRef:t,messageRef:e,scrollRef:n,showChat:r=!0,chatStarted:s=!1,isStreaming:i=!1,onStreamingChange:o,model:a,setModel:l,provider:c,setProvider:u,providerList:d,input:h="",enhancingPrompt:f,handleInputChange:g,enhancePrompt:y,sendMessage:m,handleStop:b,importChat:v,exportChat:_,uploadedFiles:E=[],setUploadedFiles:w,imageDataList:S=[],setImageDataList:k,messages:x,actionAlert:I,clearAlert:R,data:C,actionRunner:N},O)=>{const P=s?400:200,[$,ee]=T.useState(KS()),[J,Z]=T.useState([]),[M,F]=T.useState(!1),[G,D]=T.useState(!1),[j,V]=T.useState(null),[W,re]=T.useState(""),[te,Y]=T.useState("all"),[de,ye]=T.useState([]);T.useEffect(()=>{if(C){const se=C.filter(fe=>typeof fe=="object"&&fe.type==="progress");ye(se)}},[C]),T.useEffect(()=>{console.log(W)},[W]),T.useEffect(()=>{o?.(i)},[i,o]),T.useEffect(()=>{if(typeof window<"u"&&("SpeechRecognition"in window||"webkitSpeechRecognition"in window)){const se=window.SpeechRecognition||window.webkitSpeechRecognition,fe=new se;fe.continuous=!0,fe.interimResults=!0,fe.onresult=Ce=>{const Ie=Array.from(Ce.results).map(xe=>xe[0]).map(xe=>xe.transcript).join("");re(Ie),g&&g({target:{value:Ie}})},fe.onerror=Ce=>{console.error("Speech recognition error:",Ce.error),D(!1)},V(fe)}},[]),T.useEffect(()=>{if(typeof window<"u"){let se={};try{se=KS(),ee(se)}catch(fe){console.error("Error loading API keys from cookies:",fe),ur.remove("apiKeys")}Y("all"),fetch("/api/models").then(fe=>fe.json()).then(fe=>{Z(fe.modelList)}).catch(fe=>{console.error("Error fetching model list:",fe)}).finally(()=>{Y(void 0)})}},[d,c]);const Se=async(se,fe)=>{const Ce={...$,[se]:fe};ee(Ce),ur.set("apiKeys",JSON.stringify(Ce)),Y(se);let Ie=[];try{Ie=(await(await fetch(`/api/models/${encodeURIComponent(se)}`)).json()).modelList}catch(xe){console.error("Error loading dynamic models for:",se,xe)}Z(xe=>[...xe.filter(je=>je.provider!==se),...Ie]),Y(void 0)},Te=()=>{j&&(j.start(),D(!0))},ke=()=>{j&&(j.stop(),D(!1))},K=(se,fe)=>{m&&(m(se,fe),j&&(j.abort(),re(""),D(!1),g&&g({target:{value:""}})))},ge=()=>{const se=document.createElement("input");se.type="file",se.accept="image/*",se.onchange=async fe=>{const Ce=fe.target.files?.[0];if(Ce){const Ie=new FileReader;Ie.onload=xe=>{const $e=xe.target?.result;w?.([...E,Ce]),k?.([...S,$e])},Ie.readAsDataURL(Ce)}},se.click()},ne=async se=>{const fe=se.clipboardData?.items;if(fe){for(const Ce of fe)if(Ce.type.startsWith("image/")){se.preventDefault();const Ie=Ce.getAsFile();if(Ie){const xe=new FileReader;xe.onload=$e=>{const je=$e.target?.result;w?.([...E,Ie]),k?.([...S,je])},xe.readAsDataURL(Ie)}break}}},le=p.jsxs("div",{ref:O,className:Pe(lb.BaseChat,"relative flex h-full w-full overflow-hidden"),"data-chat-visible":r,children:[p.jsx(Ec,{children:()=>p.jsx(pqe,{})}),p.jsxs("div",{ref:n,className:"flex flex-col lg:flex-row overflow-y-auto w-full h-full",children:[p.jsxs("div",{className:Pe(lb.Chat,"flex flex-col flex-grow lg:min-w-[var(--chat-min-width)] h-full"),children:[!s&&p.jsxs("div",{id:"intro",className:"mt-[16vh] max-w-chat mx-auto text-center px-4 lg:px-0",children:[p.jsx("h1",{className:"text-3xl lg:text-6xl font-bold text-bolt-elements-textPrimary mb-4 animate-fade-in",children:"Create your world"}),p.jsx("p",{className:"text-md lg:text-xl mb-8 text-bolt-elements-textSecondary animate-fade-in animation-delay-200",children:"Bring ideas to life in seconds or get help on existing projects."})]}),p.jsxs("div",{className:Pe("pt-6 px-2 sm:px-6",{"h-full flex flex-col":s}),ref:n,children:[p.jsx(Ec,{children:()=>s?p.jsx(Ust,{ref:e,className:"flex flex-col w-full flex-1 max-w-chat pb-6 mx-auto z-1",messages:x,isStreaming:i}):null}),p.jsxs("div",{className:Pe("flex flex-col gap-4 w-full max-w-chat mx-auto z-prompt mb-6",{"sticky bottom-2":s}),children:[p.jsx("div",{className:"bg-bolt-elements-background-depth-2",children:I&&p.jsx(sut,{alert:I,clearAlert:()=>R?.(),postMessage:se=>{m?.({},se),R?.()}})}),de&&p.jsx(iut,{data:de}),p.jsxs("div",{className:Pe("bg-bolt-elements-background-depth-2 p-3 rounded-lg border border-bolt-elements-borderColor relative w-full max-w-chat mx-auto z-prompt"),children:[p.jsxs("svg",{className:Pe(lb.PromptEffectContainer),children:[p.jsxs("defs",{children:[p.jsxs("linearGradient",{id:"line-gradient",x1:"20%",y1:"0%",x2:"-14%",y2:"10%",gradientUnits:"userSpaceOnUse",gradientTransform:"rotate(-45)",children:[p.jsx("stop",{offset:"0%",stopColor:"#1E40AF",stopOpacity:"0%"})," ",p.jsx("stop",{offset:"40%",stopColor:"#1E40AF",stopOpacity:"80%"}),p.jsx("stop",{offset:"50%",stopColor:"#3B82F6",stopOpacity:"80%"})," ",p.jsx("stop",{offset:"100%",stopColor:"#3B82F6",stopOpacity:"0%"})]}),p.jsxs("linearGradient",{id:"shine-gradient",children:[p.jsx("stop",{offset:"0%",stopColor:"#60A5FA",stopOpacity:"0%"})," ",p.jsx("stop",{offset:"40%",stopColor:"#60A5FA",stopOpacity:"80%"}),p.jsx("stop",{offset:"50%",stopColor:"#60A5FA",stopOpacity:"80%"}),p.jsx("stop",{offset:"100%",stopColor:"#60A5FA",stopOpacity:"0%"})]})]}),p.jsx("rect",{className:Pe(lb.PromptEffectLine),pathLength:"100",strokeLinecap:"round"}),p.jsx("rect",{className:Pe(lb.PromptShine),x:"48",y:"24",width:"70",height:"1"})]}),p.jsx("div",{children:p.jsx(Ec,{children:()=>p.jsxs("div",{className:M?"hidden":"",children:[p.jsx(Qct,{model:a,setModel:l,modelList:J,provider:c,setProvider:u,providerList:d||Tk,apiKeys:$,modelLoading:te},c?.name+":"+J.length),(d||[]).length>0&&c&&(!jL.includes(c.name)||"OpenAILike")&&p.jsx(zst,{provider:c,apiKey:$[c.name]||"",setApiKey:se=>{Se(c.name,se)}})]})})}),p.jsx(Zct,{files:E,imageDataList:S,onRemove:se=>{w?.(E.filter((fe,Ce)=>Ce!==se)),k?.(S.filter((fe,Ce)=>Ce!==se))}}),p.jsx(Ec,{children:()=>p.jsx(tut,{setUploadedFiles:w,setImageDataList:k,uploadedFiles:E,imageDataList:S})}),p.jsxs("div",{className:Pe("relative shadow-xs border border-bolt-elements-borderColor backdrop-blur rounded-lg"),children:[p.jsx("textarea",{ref:t,className:Pe("w-full pl-4 pt-4 pr-16 outline-none resize-none text-bolt-elements-textPrimary placeholder-bolt-elements-textTertiary bg-transparent text-sm","transition-all duration-200","hover:border-bolt-elements-focus"),onDragEnter:se=>{se.preventDefault(),se.currentTarget.style.border="2px solid #1488fc"},onDragOver:se=>{se.preventDefault(),se.currentTarget.style.border="2px solid #1488fc"},onDragLeave:se=>{se.preventDefault(),se.currentTarget.style.border="1px solid var(--bolt-elements-borderColor)"},onDrop:se=>{se.preventDefault(),se.currentTarget.style.border="1px solid var(--bolt-elements-borderColor)",Array.from(se.dataTransfer.files).forEach(Ce=>{if(Ce.type.startsWith("image/")){const Ie=new FileReader;Ie.onload=xe=>{const $e=xe.target?.result;w?.([...E,Ce]),k?.([...S,$e])},Ie.readAsDataURL(Ce)}})},onKeyDown:se=>{if(se.key==="Enter"){if(se.shiftKey)return;if(se.preventDefault(),i){b?.();return}if(se.nativeEvent.isComposing)return;K?.(se)}},value:h,onChange:se=>{g?.(se)},onPaste:ne,style:{minHeight:out,maxHeight:P},placeholder:"How can Ada help you today?",translate:"no"}),p.jsx(Ec,{children:()=>p.jsx(Hst,{show:h.length>0||i||E.length>0,isStreaming:i,disabled:!d||d.length===0,onClick:se=>{if(i){b?.();return}(h.length>0||E.length>0)&&K?.(se)}})}),p.jsxs("div",{className:"flex justify-between items-center text-sm p-4 pt-2",children:[p.jsxs("div",{className:"flex gap-1 items-center",children:[p.jsx(dr,{title:"Upload file",className:"transition-all",onClick:()=>ge(),children:p.jsx("div",{className:"i-ph:paperclip text-xl"})}),p.jsx(dr,{title:"Enhance prompt",disabled:h.length===0||f,className:Pe("transition-all",f?"opacity-100":""),onClick:()=>{y?.(),ze.success("Prompt enhanced!")},children:f?p.jsx("div",{className:"i-svg-spinners:90-ring-with-bg text-bolt-elements-loader-progress text-xl animate-spin"}):p.jsx("div",{className:"i-bolt:stars text-xl"})}),p.jsx(eut,{isListening:G,onStart:Te,onStop:ke,disabled:i}),s&&p.jsx(Ec,{children:()=>p.jsx(Yst,{exportChat:_})}),p.jsxs(dr,{title:"Model Settings",className:Pe("transition-all flex items-center gap-1",{"bg-bolt-elements-item-backgroundAccent text-bolt-elements-item-contentAccent":M,"bg-bolt-elements-item-backgroundDefault text-bolt-elements-item-contentDefault":!M}),onClick:()=>F(!M),disabled:!d||d.length===0,children:[p.jsx("div",{className:`i-ph:caret-${M?"right":"down"} text-lg`}),M?p.jsx("span",{className:"text-xs",children:a}):p.jsx("span",{})]})]}),h.length>3?p.jsxs("div",{className:"text-xs text-bolt-elements-textTertiary",children:["Use ",p.jsx("kbd",{className:"kdb px-1.5 py-0.5 rounded bg-bolt-elements-background-depth-2",children:"Shift"})," ","+ ",p.jsx("kbd",{className:"kdb px-1.5 py-0.5 rounded bg-bolt-elements-background-depth-2",children:"Return"})," ","a new line"]}):null]})]})]})]})]}),p.jsxs("div",{className:"flex flex-col justify-center gap-5",children:[!s&&p.jsxs("div",{className:"flex justify-center gap-2",children:[Cit(v),p.jsx(Jct,{importChat:v})]}),!s&&Tit((se,fe)=>{if(i){b?.();return}K?.(se,fe)}),!s&&p.jsx(rut,{})]})]}),p.jsx(Ec,{children:()=>p.jsx(wst,{actionRunner:N??{},chatStarted:s,isStreaming:i})})]})]});return p.jsx(QL,{delayDuration:200,children:le})}),lut=Symbol("Let zodToJsonSchema decide on which parser to use"),aW={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},cut=t=>typeof t=="string"?{...aW,name:t}:{...aW,...t},uut=t=>{const e=cut(t),n=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([r,s])=>[s._def,{def:s._def,path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}};function cue(t,e,n,r){r?.errorMessages&&n&&(t.errorMessage={...t.errorMessage,[e]:n})}function Fn(t,e,n,r,s){t[e]=n,cue(t,e,r,s)}function dut(){return{}}function hut(t,e){const n={type:"array"};return t.type?._def&&t.type?._def?.typeName!==pt.ZodAny&&(n.items=Nn(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&Fn(n,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&Fn(n,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(Fn(n,"minItems",t.exactLength.value,t.exactLength.message,e),Fn(n,"maxItems",t.exactLength.value,t.exactLength.message,e)),n}function fut(t,e){const n={type:"integer",format:"int64"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?Fn(n,"minimum",r.value,r.message,e):Fn(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),Fn(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?Fn(n,"maximum",r.value,r.message,e):Fn(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),Fn(n,"maximum",r.value,r.message,e));break;case"multipleOf":Fn(n,"multipleOf",r.value,r.message,e);break}return n}function put(){return{type:"boolean"}}function uue(t,e){return Nn(t.type._def,e)}const mut=(t,e)=>Nn(t.innerType._def,e);function due(t,e,n){const r=n??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((s,i)=>due(t,e,s))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return gut(t,e)}}const gut=(t,e)=>{const n={type:"integer",format:"unix-time"};if(e.target==="openApi3")return n;for(const r of t.checks)switch(r.kind){case"min":Fn(n,"minimum",r.value,r.message,e);break;case"max":Fn(n,"maximum",r.value,r.message,e);break}return n};function but(t,e){return{...Nn(t.innerType._def,e),default:t.defaultValue()}}function yut(t,e){return e.effectStrategy==="input"?Nn(t.schema._def,e):{}}function vut(t){return{type:"string",enum:Array.from(t.values)}}const _ut=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function xut(t,e){const n=[Nn(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),Nn(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(i=>!!i);let r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const s=[];return n.forEach(i=>{if(_ut(i))s.push(...i.allOf),i.unevaluatedProperties===void 0&&(r=void 0);else{let o=i;if("additionalProperties"in i&&i.additionalProperties===!1){const{additionalProperties:a,...l}=i;o=l}else r=void 0;s.push(o)}}),s.length?{allOf:s,...r}:void 0}function wut(t,e){const n=typeof t.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[t.value]}:{type:n==="bigint"?"integer":n,const:t.value}}let K3;const ha={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(K3===void 0&&(K3=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),K3),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function hue(t,e){const n={type:"string"};if(t.checks)for(const r of t.checks)switch(r.kind){case"min":Fn(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,e);break;case"max":Fn(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,e);break;case"email":switch(e.emailStrategy){case"format:email":fa(n,"email",r.message,e);break;case"format:idn-email":fa(n,"idn-email",r.message,e);break;case"pattern:zod":ei(n,ha.email,r.message,e);break}break;case"url":fa(n,"uri",r.message,e);break;case"uuid":fa(n,"uuid",r.message,e);break;case"regex":ei(n,r.regex,r.message,e);break;case"cuid":ei(n,ha.cuid,r.message,e);break;case"cuid2":ei(n,ha.cuid2,r.message,e);break;case"startsWith":ei(n,RegExp(`^${Y3(r.value,e)}`),r.message,e);break;case"endsWith":ei(n,RegExp(`${Y3(r.value,e)}$`),r.message,e);break;case"datetime":fa(n,"date-time",r.message,e);break;case"date":fa(n,"date",r.message,e);break;case"time":fa(n,"time",r.message,e);break;case"duration":fa(n,"duration",r.message,e);break;case"length":Fn(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,e),Fn(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,e);break;case"includes":{ei(n,RegExp(Y3(r.value,e)),r.message,e);break}case"ip":{r.version!=="v6"&&fa(n,"ipv4",r.message,e),r.version!=="v4"&&fa(n,"ipv6",r.message,e);break}case"base64url":ei(n,ha.base64url,r.message,e);break;case"jwt":ei(n,ha.jwt,r.message,e);break;case"cidr":{r.version!=="v6"&&ei(n,ha.ipv4Cidr,r.message,e),r.version!=="v4"&&ei(n,ha.ipv6Cidr,r.message,e);break}case"emoji":ei(n,ha.emoji(),r.message,e);break;case"ulid":{ei(n,ha.ulid,r.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{fa(n,"binary",r.message,e);break}case"contentEncoding:base64":{Fn(n,"contentEncoding","base64",r.message,e);break}case"pattern:zod":{ei(n,ha.base64,r.message,e);break}}break}case"nanoid":ei(n,ha.nanoid,r.message,e)}return n}function Y3(t,e){return e.patternStrategy==="escape"?Sut(t):t}const Eut=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function Sut(t){let e="";for(let n=0;n<t.length;n++)Eut.has(t[n])||(e+="\\"),e+=t[n];return e}function fa(t,e,n,r){t.format||t.anyOf?.some(s=>s.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&r.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...n&&r.errorMessages&&{errorMessage:{format:n}}})):Fn(t,"format",e,n,r)}function ei(t,e,n,r){t.pattern||t.allOf?.some(s=>s.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&r.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:lW(e,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):Fn(t,"pattern",lW(e,r),n,r)}function lW(t,e){if(!e.applyRegexFlags||!t.flags)return t.source;const n={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},r=n.i?t.source.toLowerCase():t.source;let s="",i=!1,o=!1,a=!1;for(let l=0;l<r.length;l++){if(i){s+=r[l],i=!1;continue}if(n.i){if(o){if(r[l].match(/[a-z]/)){a?(s+=r[l],s+=`${r[l-2]}-${r[l]}`.toUpperCase(),a=!1):r[l+1]==="-"&&r[l+2]?.match(/[a-z]/)?(s+=r[l],a=!0):s+=`${r[l]}${r[l].toUpperCase()}`;continue}}else if(r[l].match(/[a-z]/)){s+=`[${r[l]}${r[l].toUpperCase()}]`;continue}}if(n.m){if(r[l]==="^"){s+=`(^|(?<=[\r
]))`;continue}else if(r[l]==="$"){s+=`($|(?=[\r
]))`;continue}}if(n.s&&r[l]==="."){s+=o?`${r[l]}\r
`:`[${r[l]}\r
]`;continue}s+=r[l],r[l]==="\\"?i=!0:o&&r[l]==="]"?o=!1:!o&&r[l]==="["&&(o=!0)}try{new RegExp(s)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return s}function fue(t,e){if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&t.keyType?._def.typeName===pt.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((r,s)=>({...r,[s]:Nn(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",s]})??{}}),{}),additionalProperties:!1};const n={type:"object",additionalProperties:Nn(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??{}};if(e.target==="openApi3")return n;if(t.keyType?._def.typeName===pt.ZodString&&t.keyType._def.checks?.length){const{type:r,...s}=hue(t.keyType._def,e);return{...n,propertyNames:s}}else{if(t.keyType?._def.typeName===pt.ZodEnum)return{...n,propertyNames:{enum:t.keyType._def.values}};if(t.keyType?._def.typeName===pt.ZodBranded&&t.keyType._def.type._def.typeName===pt.ZodString&&t.keyType._def.type._def.checks?.length){const{type:r,...s}=uue(t.keyType._def,e);return{...n,propertyNames:s}}}return n}function kut(t,e){if(e.mapStrategy==="record")return fue(t,e);const n=Nn(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},r=Nn(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function Cut(t){const e=t.values,r=Object.keys(t.values).filter(i=>typeof e[e[i]]!="number").map(i=>e[i]),s=Array.from(new Set(r.map(i=>typeof i)));return{type:s.length===1?s[0]==="string"?"string":"number":["string","number"],enum:r}}function Aut(){return{not:{}}}function Tut(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const rk={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Nut(t,e){if(e.target==="openApi3")return cW(t,e);const n=t.options instanceof Map?Array.from(t.options.values()):t.options;if(n.every(r=>r._def.typeName in rk&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((s,i)=>{const o=rk[i._def.typeName];return o&&!s.includes(o)?[...s,o]:s},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((s,i)=>{const o=typeof i._def.value;switch(o){case"string":case"number":case"boolean":return[...s,o];case"bigint":return[...s,"integer"];case"object":if(i._def.value===null)return[...s,"null"];case"symbol":case"undefined":case"function":default:return s}},[]);if(r.length===n.length){const s=r.filter((i,o,a)=>a.indexOf(i)===o);return{type:s.length>1?s:s[0],enum:n.reduce((i,o)=>i.includes(o._def.value)?i:[...i,o._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,s)=>[...r,...s._def.values.filter(i=>!r.includes(i))],[])};return cW(t,e)}const cW=(t,e)=>{const n=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((r,s)=>Nn(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${s}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function Put(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"?{type:rk[t.innerType._def.typeName],nullable:!0}:{type:[rk[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const r=Nn(t.innerType._def,{...e,currentPath:[...e.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=Nn(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function Iut(t,e){const n={type:"number"};if(!t.checks)return n;for(const r of t.checks)switch(r.kind){case"int":n.type="integer",cue(n,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?Fn(n,"minimum",r.value,r.message,e):Fn(n,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(n.exclusiveMinimum=!0),Fn(n,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?Fn(n,"maximum",r.value,r.message,e):Fn(n,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(n.exclusiveMaximum=!0),Fn(n,"maximum",r.value,r.message,e));break;case"multipleOf":Fn(n,"multipleOf",r.value,r.message,e);break}return n}function Rut(t,e){return e.removeAdditionalStrategy==="strict"?t.catchall._def.typeName==="ZodNever"?t.unknownKeys!=="strict":Nn(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0:t.catchall._def.typeName==="ZodNever"?t.unknownKeys==="passthrough":Nn(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0}function Lut(t,e){const n=e.target==="openAi",r={type:"object",...Object.entries(t.shape()).reduce((s,[i,o])=>{if(o===void 0||o._def===void 0)return s;let a=o.isOptional();a&&n&&(o instanceof Ea&&(o=o._def.innerType),o.isNullable()||(o=o.nullable()),a=!1);const l=Nn(o._def,{...e,currentPath:[...e.currentPath,"properties",i],propertyPath:[...e.currentPath,"properties",i]});return l===void 0?s:{properties:{...s.properties,[i]:l},required:a?s.required:[...s.required,i]}},{properties:{},required:[]}),additionalProperties:Rut(t,e)};return r.required.length||delete r.required,r}const Out=(t,e)=>{if(e.currentPath.toString()===e.propertyPath?.toString())return Nn(t.innerType._def,e);const n=Nn(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},Dut=(t,e)=>{if(e.pipeStrategy==="input")return Nn(t.in._def,e);if(e.pipeStrategy==="output")return Nn(t.out._def,e);const n=Nn(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),r=Nn(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(s=>s!==void 0)}};function Mut(t,e){return Nn(t.type._def,e)}function jut(t,e){const r={type:"array",uniqueItems:!0,items:Nn(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&Fn(r,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&Fn(r,"maxItems",t.maxSize.value,t.maxSize.message,e),r}function Fut(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((n,r)=>Nn(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:Nn(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((n,r)=>Nn(n._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function But(){return{not:{}}}function Uut(){return{}}const $ut=(t,e)=>Nn(t.innerType._def,e);function Nn(t,e,n=!1){const r=e.seen.get(t);if(e.override){const o=e.override?.(t,e,r,n);if(o!==lut)return o}if(r&&!n){const o=Hut(r,e);if(o!==void 0)return o}const s={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,s);const i=Vut(t,t.typeName,e);return i&&Wut(t,e,i),s.jsonSchema=i,i}const Hut=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:zut(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((n,r)=>e.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},zut=(t,e)=>{let n=0;for(;n<t.length&&n<e.length&&t[n]===e[n];n++);return[(t.length-n).toString(),...e.slice(n)].join("/")},Vut=(t,e,n)=>{switch(e){case pt.ZodString:return hue(t,n);case pt.ZodNumber:return Iut(t,n);case pt.ZodObject:return Lut(t,n);case pt.ZodBigInt:return fut(t,n);case pt.ZodBoolean:return put();case pt.ZodDate:return due(t,n);case pt.ZodUndefined:return But();case pt.ZodNull:return Tut(n);case pt.ZodArray:return hut(t,n);case pt.ZodUnion:case pt.ZodDiscriminatedUnion:return Nut(t,n);case pt.ZodIntersection:return xut(t,n);case pt.ZodTuple:return Fut(t,n);case pt.ZodRecord:return fue(t,n);case pt.ZodLiteral:return wut(t,n);case pt.ZodEnum:return vut(t);case pt.ZodNativeEnum:return Cut(t);case pt.ZodNullable:return Put(t,n);case pt.ZodOptional:return Out(t,n);case pt.ZodMap:return kut(t,n);case pt.ZodSet:return jut(t,n);case pt.ZodLazy:return Nn(t.getter()._def,n);case pt.ZodPromise:return Mut(t,n);case pt.ZodNaN:case pt.ZodNever:return Aut();case pt.ZodEffects:return yut(t,n);case pt.ZodAny:return dut();case pt.ZodUnknown:return Uut();case pt.ZodDefault:return but(t,n);case pt.ZodBranded:return uue(t,n);case pt.ZodReadonly:return $ut(t,n);case pt.ZodCatch:return mut(t,n);case pt.ZodPipeline:return Dut(t,n);case pt.ZodFunction:case pt.ZodVoid:case pt.ZodSymbol:return;default:return(r=>{})()}},Wut=(t,e,n)=>(t.description&&(n.description=t.description,e.markdownDescription&&(n.markdownDescription=t.description)),n),Gut=(t,e)=>{const n=uut(e),r=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((l,[c,u])=>({...l,[c]:Nn(u._def,{...n,currentPath:[...n.basePath,n.definitionPath,c]},!0)??{}}),{}):void 0,s=typeof e=="string"?e:e?.nameStrategy==="title"?void 0:e?.name,i=Nn(t._def,s===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,s]},!1)??{},o=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;o!==void 0&&(i.title=o);const a=s===void 0?r?{...i,[n.definitionPath]:r}:i:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,s].join("/"),[n.definitionPath]:{...r,[s]:i}};return n.target==="jsonSchema7"?a.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(a.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in a||"oneOf"in a||"allOf"in a||"type"in a&&Array.isArray(a.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),a};var J1={code:"0",name:"text",parse:t=>{if(typeof t!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:t}}},Z1={code:"3",name:"error",parse:t=>{if(typeof t!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:t}}},Q1={code:"4",name:"assistant_message",parse:t=>{if(t==null||typeof t!="object"||!("id"in t)||!("role"in t)||!("content"in t)||typeof t.id!="string"||typeof t.role!="string"||t.role!=="assistant"||!Array.isArray(t.content)||!t.content.every(e=>e!=null&&typeof e=="object"&&"type"in e&&e.type==="text"&&"text"in e&&e.text!=null&&typeof e.text=="object"&&"value"in e.text&&typeof e.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:t}}},ev={code:"5",name:"assistant_control_data",parse:t=>{if(t==null||typeof t!="object"||!("threadId"in t)||!("messageId"in t)||typeof t.threadId!="string"||typeof t.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:t.threadId,messageId:t.messageId}}}},tv={code:"6",name:"data_message",parse:t=>{if(t==null||typeof t!="object"||!("role"in t)||!("data"in t)||typeof t.role!="string"||t.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:t}}},qut=[J1,Z1,Q1,ev,tv];J1.code+"",Z1.code+"",Q1.code+"",ev.code+"",tv.code+"";J1.name+"",J1.code,Z1.name+"",Z1.code,Q1.name+"",Q1.code,ev.name+"",ev.code,tv.name+"",tv.code;qut.map(t=>t.code);function Kut({promptTokens:t,completionTokens:e}){return{promptTokens:t,completionTokens:e,totalTokens:t+e}}function Yut(t){const e=["ROOT"];let n=-1,r=null;function s(l,c,u){switch(l){case'"':{n=c,e.pop(),e.push(u),e.push("INSIDE_STRING");break}case"f":case"t":case"n":{n=c,r=c,e.pop(),e.push(u),e.push("INSIDE_LITERAL");break}case"-":{e.pop(),e.push(u),e.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=c,e.pop(),e.push(u),e.push("INSIDE_NUMBER");break}case"{":{n=c,e.pop(),e.push(u),e.push("INSIDE_OBJECT_START");break}case"[":{n=c,e.pop(),e.push(u),e.push("INSIDE_ARRAY_START");break}}}function i(l,c){switch(l){case",":{e.pop(),e.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=c,e.pop();break}}}function o(l,c){switch(l){case",":{e.pop(),e.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=c,e.pop();break}}}for(let l=0;l<t.length;l++){const c=t[l];switch(e[e.length-1]){case"ROOT":s(c,l,"FINISH");break;case"INSIDE_OBJECT_START":{switch(c){case'"':{e.pop(),e.push("INSIDE_OBJECT_KEY");break}case"}":{n=l,e.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(c){case'"':{e.pop(),e.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(c){case'"':{e.pop(),e.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(c){case":":{e.pop(),e.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{s(c,l,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{i(c,l);break}case"INSIDE_STRING":{switch(c){case'"':{e.pop(),n=l;break}case"\\":{e.push("INSIDE_STRING_ESCAPE");break}default:n=l}break}case"INSIDE_ARRAY_START":{switch(c){case"]":{n=l,e.pop();break}default:{n=l,s(c,l,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(c){case",":{e.pop(),e.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=l,e.pop();break}default:{n=l;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{s(c,l,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{e.pop(),n=l;break}case"INSIDE_NUMBER":{switch(c){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=l;break}case"e":case"E":case"-":case".":break;case",":{e.pop(),e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(c,l),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(c,l);break}case"}":{e.pop(),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(c,l);break}case"]":{e.pop(),e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(c,l);break}default:{e.pop();break}}break}case"INSIDE_LITERAL":{const d=t.substring(r,l+1);!"false".startsWith(d)&&!"true".startsWith(d)&&!"null".startsWith(d)?(e.pop(),e[e.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?i(c,l):e[e.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(c,l)):n=l;break}}}let a=t.slice(0,n+1);for(let l=e.length-1;l>=0;l--)switch(e[l]){case"INSIDE_STRING":{a+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{a+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{a+="]";break}case"INSIDE_LITERAL":{const u=t.substring(r,t.length);"true".startsWith(u)?a+="true".slice(u.length):"false".startsWith(u)?a+="false".slice(u.length):"null".startsWith(u)&&(a+="null".slice(u.length))}}return a}function Xut(t){if(t===void 0)return{value:void 0,state:"undefined-input"};let e=X2({text:t});return e.success?{value:e.value,state:"successful-parse"}:(e=X2({text:Yut(t)}),e.success?{value:e.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var nv={code:"0",name:"text",parse:t=>{if(typeof t!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:t}}},rv={code:"2",name:"data",parse:t=>{if(!Array.isArray(t))throw new Error('"data" parts expect an array value.');return{type:"data",value:t}}},sv={code:"3",name:"error",parse:t=>{if(typeof t!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:t}}},iv={code:"8",name:"message_annotations",parse:t=>{if(!Array.isArray(t))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:t}}},ov={code:"9",name:"tool_call",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("toolName"in t)||typeof t.toolName!="string"||!("args"in t)||typeof t.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:t}}},av={code:"a",name:"tool_result",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("result"in t))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:t}}},lv={code:"b",name:"tool_call_streaming_start",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("toolName"in t)||typeof t.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:t}}},cv={code:"c",name:"tool_call_delta",parse:t=>{if(t==null||typeof t!="object"||!("toolCallId"in t)||typeof t.toolCallId!="string"||!("argsTextDelta"in t)||typeof t.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:t}}},uv={code:"d",name:"finish_message",parse:t=>{if(t==null||typeof t!="object"||!("finishReason"in t)||typeof t.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');const e={finishReason:t.finishReason};return"usage"in t&&t.usage!=null&&typeof t.usage=="object"&&"promptTokens"in t.usage&&"completionTokens"in t.usage&&(e.usage={promptTokens:typeof t.usage.promptTokens=="number"?t.usage.promptTokens:Number.NaN,completionTokens:typeof t.usage.completionTokens=="number"?t.usage.completionTokens:Number.NaN}),{type:"finish_message",value:e}}},dv={code:"e",name:"finish_step",parse:t=>{if(t==null||typeof t!="object"||!("finishReason"in t)||typeof t.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');const e={finishReason:t.finishReason,isContinued:!1};return"usage"in t&&t.usage!=null&&typeof t.usage=="object"&&"promptTokens"in t.usage&&"completionTokens"in t.usage&&(e.usage={promptTokens:typeof t.usage.promptTokens=="number"?t.usage.promptTokens:Number.NaN,completionTokens:typeof t.usage.completionTokens=="number"?t.usage.completionTokens:Number.NaN}),"isContinued"in t&&typeof t.isContinued=="boolean"&&(e.isContinued=t.isContinued),{type:"finish_step",value:e}}},hv={code:"f",name:"start_step",parse:t=>{if(t==null||typeof t!="object"||!("messageId"in t)||typeof t.messageId!="string")throw new Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:t.messageId}}}},fv={code:"g",name:"reasoning",parse:t=>{if(typeof t!="string")throw new Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:t}}},pue=[nv,rv,sv,iv,ov,av,lv,cv,uv,dv,hv,fv],Jut={[nv.code]:nv,[rv.code]:rv,[sv.code]:sv,[iv.code]:iv,[ov.code]:ov,[av.code]:av,[lv.code]:lv,[cv.code]:cv,[uv.code]:uv,[dv.code]:dv,[hv.code]:hv,[fv.code]:fv};nv.name+"",nv.code,rv.name+"",rv.code,sv.name+"",sv.code,iv.name+"",iv.code,ov.name+"",ov.code,av.name+"",av.code,lv.name+"",lv.code,cv.name+"",cv.code,uv.name+"",uv.code,dv.name+"",dv.code,hv.name+"",hv.code,fv.name+"",fv.code;var Zut=pue.map(t=>t.code),Qut=t=>{const e=t.indexOf(":");if(e===-1)throw new Error("Failed to parse stream string. No separator found.");const n=t.slice(0,e);if(!Zut.includes(n))throw new Error(`Failed to parse stream string. Invalid code ${n}.`);const r=n,s=t.slice(e+1),i=JSON.parse(s);return Jut[r].parse(i)};function Pft(t,e){const n=pue.find(r=>r.name===t);if(!n)throw new Error(`Invalid stream part type: ${t}`);return`${n.code}:${JSON.stringify(e)}
`}var edt=10;function tdt(t,e){const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return t.length=0,n}async function ndt({stream:t,onTextPart:e,onReasoningPart:n,onDataPart:r,onErrorPart:s,onToolCallStreamingStartPart:i,onToolCallDeltaPart:o,onToolCallPart:a,onToolResultPart:l,onMessageAnnotationsPart:c,onFinishMessagePart:u,onFinishStepPart:d,onStartStepPart:h}){const f=t.getReader(),g=new TextDecoder,y=[];let m=0;for(;;){const{value:b}=await f.read();if(b&&(y.push(b),m+=b.length,b[b.length-1]!==edt))continue;if(y.length===0)break;const v=tdt(y,m);m=0;const _=g.decode(v,{stream:!0}).split(`
`).filter(E=>E!=="").map(Qut);for(const{type:E,value:w}of _)switch(E){case"text":await e?.(w);break;case"reasoning":await n?.(w);break;case"data":await r?.(w);break;case"error":await s?.(w);break;case"message_annotations":await c?.(w);break;case"tool_call_streaming_start":await i?.(w);break;case"tool_call_delta":await o?.(w);break;case"tool_call":await a?.(w);break;case"tool_result":await l?.(w);break;case"finish_message":await u?.(w);break;case"finish_step":await d?.(w);break;case"start_step":await h?.(w);break;default:{const S=E;throw new Error(`Unknown stream part type: ${S}`)}}}}async function rdt({stream:t,update:e,onToolCall:n,onFinish:r,generateId:s=ba,getCurrentDate:i=()=>new Date,lastMessage:o}){var a,l;const c=o?.role==="assistant";let u=c?1+((l=(a=o.toolInvocations)==null?void 0:a.reduce((w,S)=>{var k;return Math.max(w,(k=S.step)!=null?k:0)},0))!=null?l:0):0;const d=c?structuredClone(o):{id:s(),createdAt:i(),role:"assistant",content:"",parts:[]};let h,f;function g(w,S){const k=d.parts.find(x=>x.type==="tool-invocation"&&x.toolInvocation.toolCallId===w);k!=null?k.toolInvocation=S:d.parts.push({type:"tool-invocation",toolInvocation:S})}const y=[];let m=c?o?.annotations:void 0;const b={};let v={completionTokens:NaN,promptTokens:NaN,totalTokens:NaN},_="unknown";function E(){const w=[...y];m?.length&&(d.annotations=m);const S={...structuredClone(d),revisionId:s()};e({message:S,data:w,replaceLastMessage:c})}await ndt({stream:t,onTextPart(w){h==null?(h={type:"text",text:w},d.parts.push(h)):h.text+=w,d.content+=w,E()},onReasoningPart(w){var S;f==null?(f={type:"reasoning",reasoning:w},d.parts.push(f)):f.reasoning+=w,d.reasoning=((S=d.reasoning)!=null?S:"")+w,E()},onToolCallStreamingStartPart(w){d.toolInvocations==null&&(d.toolInvocations=[]),b[w.toolCallId]={text:"",step:u,toolName:w.toolName,index:d.toolInvocations.length};const S={state:"partial-call",step:u,toolCallId:w.toolCallId,toolName:w.toolName,args:void 0};d.toolInvocations.push(S),g(w.toolCallId,S),E()},onToolCallDeltaPart(w){const S=b[w.toolCallId];S.text+=w.argsTextDelta;const{value:k}=Xut(S.text),x={state:"partial-call",step:S.step,toolCallId:w.toolCallId,toolName:S.toolName,args:k};d.toolInvocations[S.index]=x,g(w.toolCallId,x),E()},async onToolCallPart(w){const S={state:"call",step:u,...w};if(b[w.toolCallId]!=null?d.toolInvocations[b[w.toolCallId].index]=S:(d.toolInvocations==null&&(d.toolInvocations=[]),d.toolInvocations.push(S)),g(w.toolCallId,S),E(),n){const k=await n({toolCall:w});if(k!=null){const x={state:"result",step:u,...w,result:k};d.toolInvocations[d.toolInvocations.length-1]=x,g(w.toolCallId,x),E()}}},onToolResultPart(w){const S=d.toolInvocations;if(S==null)throw new Error("tool_result must be preceded by a tool_call");const k=S.findIndex(I=>I.toolCallId===w.toolCallId);if(k===-1)throw new Error("tool_result must be preceded by a tool_call with the same toolCallId");const x={...S[k],state:"result",...w};S[k]=x,g(w.toolCallId,x),E()},onDataPart(w){y.push(...w),E()},onMessageAnnotationsPart(w){m==null?m=[...w]:m.push(...w),E()},onFinishStepPart(w){u+=1,h=w.isContinued?h:void 0,f=void 0},onStartStepPart(w){c||(d.id=w.messageId)},onFinishMessagePart(w){_=w.finishReason,w.usage!=null&&(v=Kut(w.usage))},onErrorPart(w){throw new Error(w)}}),r?.({message:d,finishReason:_,usage:v})}async function sdt({stream:t,onTextPart:e}){const n=t.pipeThrough(new TextDecoderStream).getReader();for(;;){const{done:r,value:s}=await n.read();if(r)break;await e(s)}}async function idt({stream:t,update:e,onFinish:n,getCurrentDate:r=()=>new Date,generateId:s=ba}){const i={type:"text",text:""},o={id:s(),createdAt:r(),role:"assistant",content:"",parts:[i]};await sdt({stream:t,onTextPart:a=>{o.content+=a,i.text+=a,e({message:{...o},data:[],replaceLastMessage:!1})}}),n?.(o,{usage:{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN},finishReason:"unknown"})}var odt=()=>fetch;async function adt({api:t,body:e,streamProtocol:n="data",credentials:r,headers:s,abortController:i,restoreMessagesOnFailure:o,onResponse:a,onUpdate:l,onFinish:c,onToolCall:u,generateId:d,fetch:h=odt(),lastMessage:f}){var g,y;const m=await h(t,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",...s},signal:(g=i?.())==null?void 0:g.signal,credentials:r}).catch(b=>{throw o(),b});if(a)try{await a(m)}catch(b){throw b}if(!m.ok)throw o(),new Error((y=await m.text())!=null?y:"Failed to fetch the chat response.");if(!m.body)throw new Error("The response body is empty.");switch(n){case"text":{await idt({stream:m.body,update:l,onFinish:c,generateId:d});return}case"data":{await rdt({stream:m.body,update:l,lastMessage:f,onToolCall:u,onFinish({message:b,finishReason:v,usage:_}){c&&b!=null&&c(b,{usage:_,finishReason:v})},generateId:d});return}default:{const b=n;throw new Error(`Unknown stream protocol: ${b}`)}}}function KI(t){return t?.reduce((e,n)=>{var r;return Math.max(e,(r=n.step)!=null?r:0)},0)}function mue(t){var e;return(e=t.parts)!=null?e:[...t.toolInvocations?t.toolInvocations.map(n=>({type:"tool-invocation",toolInvocation:n})):[],...t.reasoning?[{type:"reasoning",reasoning:t.reasoning}]:[],...t.content?[{type:"text",text:t.content}]:[]]}function X3(t){return t.map(e=>({...e,parts:mue(e)}))}async function uW(t){if(!t)return[];if(t instanceof FileList)return Promise.all(Array.from(t).map(async e=>{const{name:n,type:r}=e,s=await new Promise((i,o)=>{const a=new FileReader;a.onload=l=>{var c;i((c=l.target)==null?void 0:c.result)},a.onerror=l=>o(l),a.readAsDataURL(e)});return{name:n,contentType:r,url:s}}));if(Array.isArray(t))return t;throw new Error("Invalid attachments type")}function ldt(t,e){var n;const r=(n=void 0)!=null?n:!1;return cdt(Gut(t,{$refStrategy:r?"root":"none",target:"jsonSchema7"}),{validate:s=>{const i=t.safeParse(s);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}}})}var YI=Symbol.for("vercel.ai.schema");function cdt(t,{validate:e}={}){return{[YI]:!0,_type:void 0,[K2]:!0,jsonSchema:t,validate:e}}function udt(t){return typeof t=="object"&&t!==null&&YI in t&&t[YI]===!0&&"jsonSchema"in t&&"validate"in t}function Ift(t){return udt(t)?t:ldt(t)}function ddt({originalMaxToolInvocationStep:t,originalMessageCount:e,maxSteps:n,messages:r}){var s;const i=r[r.length-1];return n>1&&i!=null&&(r.length>e||KI(i.toolInvocations)!==t)&&gue(i)&&!hdt(i)&&((s=KI(i.toolInvocations))!=null?s:0)<n}function hdt(t){let e=!1;return t.parts.forEach(n=>{n.type==="text"&&(e=!0),n.type==="tool-invocation"&&(e=!1)}),e}function gue(t){return t.role==="assistant"&&t.parts.filter(e=>e.type==="tool-invocation").every(e=>"result"in e.toolInvocation)}function fdt({messages:t,toolCallId:e,toolResult:n}){var r;const s=t[t.length-1],i=s.parts.find(a=>a.type==="tool-invocation"&&a.toolInvocation.toolCallId===e);if(i==null)return;const o={...i.toolInvocation,state:"result",result:n};i.toolInvocation=o,s.toolInvocations=(r=s.toolInvocations)==null?void 0:r.map(a=>a.toolCallId===e?o:a)}var bue={exports:{}},yue={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cg=T;function pdt(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var mdt=typeof Object.is=="function"?Object.is:pdt,gdt=Cg.useState,bdt=Cg.useEffect,ydt=Cg.useLayoutEffect,vdt=Cg.useDebugValue;function _dt(t,e){var n=e(),r=gdt({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return ydt(function(){s.value=n,s.getSnapshot=e,J3(s)&&i({inst:s})},[t,n,e]),bdt(function(){return J3(s)&&i({inst:s}),t(function(){J3(s)&&i({inst:s})})},[t]),vdt(n),n}function J3(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!mdt(t,n)}catch{return!0}}function xdt(t,e){return e()}var wdt=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?xdt:_dt;yue.useSyncExternalStore=Cg.useSyncExternalStore!==void 0?Cg.useSyncExternalStore:wdt;bue.exports=yue;var Edt=bue.exports;const vue=0,_ue=1,xue=2,dW=3;var hW=Object.prototype.hasOwnProperty;function XI(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&XI(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(hW.call(t,n)&&++r&&!hW.call(e,n)||!(n in e)||!XI(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const Fc=new WeakMap,id=()=>{},si=id(),JI=Object,En=t=>t===si,Nl=t=>typeof t=="function",Rd=(t,e)=>({...t,...e}),wue=t=>Nl(t.then),Z3={},$w={},eM="undefined",a_=typeof window!=eM,ZI=typeof document!=eM,Sdt=a_&&"Deno"in window,kdt=()=>a_&&typeof window.requestAnimationFrame!=eM,Eue=(t,e)=>{const n=Fc.get(t);return[()=>!En(e)&&t.get(e)||Z3,r=>{if(!En(e)){const s=t.get(e);e in $w||($w[e]=s),n[5](e,Rd(s,r),s||Z3)}},n[6],()=>!En(e)&&e in $w?$w[e]:!En(e)&&t.get(e)||Z3]};let QI=!0;const Cdt=()=>QI,[eR,tR]=a_&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[id,id],Adt=()=>{const t=ZI&&document.visibilityState;return En(t)||t!=="hidden"},Tdt=t=>(ZI&&document.addEventListener("visibilitychange",t),eR("focus",t),()=>{ZI&&document.removeEventListener("visibilitychange",t),tR("focus",t)}),Ndt=t=>{const e=()=>{QI=!0,t()},n=()=>{QI=!1};return eR("online",e),eR("offline",n),()=>{tR("online",e),tR("offline",n)}},Pdt={isOnline:Cdt,isVisible:Adt},Idt={initFocus:Tdt,initReconnect:Ndt},fW=!ut.useId,pv=!a_||Sdt,Rdt=t=>kdt()?window.requestAnimationFrame(t):setTimeout(t,1),Q3=pv?T.useEffect:T.useLayoutEffect,eN=typeof navigator<"u"&&navigator.connection,pW=!pv&&eN&&(["slow-2g","2g"].includes(eN.effectiveType)||eN.saveData),Hw=new WeakMap,tN=(t,e)=>JI.prototype.toString.call(t)===`[object ${e}]`;let Ldt=0;const nR=t=>{const e=typeof t,n=tN(t,"Date"),r=tN(t,"RegExp"),s=tN(t,"Object");let i,o;if(JI(t)===t&&!n&&!r){if(i=Hw.get(t),i)return i;if(i=++Ldt+"~",Hw.set(t,i),Array.isArray(t)){for(i="@",o=0;o<t.length;o++)i+=nR(t[o])+",";Hw.set(t,i)}if(s){i="#";const a=JI.keys(t).sort();for(;!En(o=a.pop());)En(t[o])||(i+=o+":"+nR(t[o])+",");Hw.set(t,i)}}else i=n?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return i},tM=t=>{if(Nl(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?nR(t):"",[t,e]};let Odt=0;const rR=()=>++Odt;async function Sue(...t){const[e,n,r,s]=t,i=Rd({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let o=i.populateCache;const a=i.rollbackOnError;let l=i.optimisticData;const c=h=>typeof a=="function"?a(h):a!==!1,u=i.throwOnError;if(Nl(n)){const h=n,f=[],g=e.keys();for(const y of g)!/^\$(inf|sub)\$/.test(y)&&h(e.get(y)._k)&&f.push(y);return Promise.all(f.map(d))}return d(n);async function d(h){const[f]=tM(h);if(!f)return;const[g,y]=Eue(e,f),[m,b,v,_]=Fc.get(e),E=()=>{const O=m[f];return(Nl(i.revalidate)?i.revalidate(g().data,h):i.revalidate!==!1)&&(delete v[f],delete _[f],O&&O[0])?O[0](xue).then(()=>g().data):g().data};if(t.length<3)return E();let w=r,S;const k=rR();b[f]=[k,0];const x=!En(l),I=g(),R=I.data,C=I._c,N=En(C)?R:C;if(x&&(l=Nl(l)?l(N,R):l,y({data:l,_c:N})),Nl(w))try{w=w(N)}catch(O){S=O}if(w&&wue(w))if(w=await w.catch(O=>{S=O}),k!==b[f][0]){if(S)throw S;return w}else S&&x&&c(S)&&(o=!0,y({data:N,_c:si}));if(o&&!S)if(Nl(o)){const O=o(w,N);y({data:O,error:si,_c:si})}else y({data:w,error:si,_c:si});if(b[f][1]=rR(),Promise.resolve(E()).then(()=>{y({_c:si})}),S){if(u)throw S;return}return w}}const mW=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},Ddt=(t,e)=>{if(!Fc.has(t)){const n=Rd(Idt,e),r={},s=Sue.bind(si,t);let i=id;const o={},a=(u,d)=>{const h=o[u]||[];return o[u]=h,h.push(d),()=>h.splice(h.indexOf(d),1)},l=(u,d,h)=>{t.set(u,d);const f=o[u];if(f)for(const g of f)g(d,h)},c=()=>{if(!Fc.has(t)&&(Fc.set(t,[r,{},{},{},s,l,a]),!pv)){const u=n.initFocus(setTimeout.bind(si,mW.bind(si,r,vue))),d=n.initReconnect(setTimeout.bind(si,mW.bind(si,r,_ue)));i=()=>{u&&u(),d&&d(),Fc.delete(t)}}};return c(),[t,s,c,i]}return[t,Fc.get(t)[4]]},Mdt=(t,e,n,r,s)=>{const i=n.errorRetryCount,o=s.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!En(i)&&o>i||setTimeout(r,a,s)},jdt=XI,[kue,Fdt]=Ddt(new Map),Bdt=Rd({onLoadingSlow:id,onSuccess:id,onError:id,onErrorRetry:Mdt,onDiscarded:id,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:pW?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:pW?5e3:3e3,compare:jdt,isPaused:()=>!1,cache:kue,mutate:Fdt,fallback:{}},Pdt),Udt=(t,e)=>{const n=Rd(t,e);if(e){const{use:r,fallback:s}=t,{use:i,fallback:o}=e;r&&i&&(n.use=r.concat(i)),s&&o&&(n.fallback=Rd(s,o))}return n},$dt=T.createContext({}),Hdt="$inf$",Cue=a_&&window.__SWR_DEVTOOLS_USE__,zdt=Cue?window.__SWR_DEVTOOLS_USE__:[],Vdt=()=>{Cue&&(window.__SWR_DEVTOOLS_REACT__=ut)},Wdt=t=>Nl(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],Gdt=()=>Rd(Bdt,T.useContext($dt)),qdt=t=>(e,n,r)=>t(e,n&&((...i)=>{const[o]=tM(e),[,,,a]=Fc.get(kue);if(o.startsWith(Hdt))return n(...i);const l=a[o];return En(l)?n(...i):(delete a[o],l)}),r),Kdt=zdt.concat(qdt),Ydt=t=>function(...n){const r=Gdt(),[s,i,o]=Wdt(n),a=Udt(r,o);let l=t;const{use:c}=a,u=(c||[]).concat(Kdt);for(let d=u.length;d--;)l=u[d](l);return l(s,i||a.fetcher||null,a)},Xdt=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}};Vdt();const nN=ut.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),rN={dedupe:!0},Jdt=(t,e,n)=>{const{cache:r,compare:s,suspense:i,fallbackData:o,revalidateOnMount:a,revalidateIfStale:l,refreshInterval:c,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:h}=n,[f,g,y,m]=Fc.get(r),[b,v]=tM(t),_=T.useRef(!1),E=T.useRef(!1),w=T.useRef(b),S=T.useRef(e),k=T.useRef(n),x=()=>k.current,I=()=>x().isVisible()&&x().isOnline(),[R,C,N,O]=Eue(r,b),P=T.useRef({}).current,$=En(o)?En(n.fallback)?si:n.fallback[b]:o,ee=(ke,K)=>{for(const ge in P){const ne=ge;if(ne==="data"){if(!s(ke[ne],K[ne])&&(!En(ke[ne])||!s(W,K[ne])))return!1}else if(K[ne]!==ke[ne])return!1}return!0},J=T.useMemo(()=>{const ke=!b||!e?!1:En(a)?x().isPaused()||i?!1:l!==!1:a,K=Ce=>{const Ie=Rd(Ce);return delete Ie._k,ke?{isValidating:!0,isLoading:!0,...Ie}:Ie},ge=R(),ne=O(),le=K(ge),se=ge===ne?le:K(ne);let fe=le;return[()=>{const Ce=K(R());return ee(Ce,fe)?(fe.data=Ce.data,fe.isLoading=Ce.isLoading,fe.isValidating=Ce.isValidating,fe.error=Ce.error,fe):(fe=Ce,Ce)},()=>se]},[r,b]),Z=Edt.useSyncExternalStore(T.useCallback(ke=>N(b,(K,ge)=>{ee(ge,K)||ke()}),[r,b]),J[0],J[1]),M=!_.current,F=f[b]&&f[b].length>0,G=Z.data,D=En(G)?$&&wue($)?nN($):$:G,j=Z.error,V=T.useRef(D),W=h?En(G)?En(V.current)?D:V.current:G:D,re=F&&!En(j)?!1:M&&!En(a)?a:x().isPaused()?!1:i?En(D)?!1:l:En(D)||l,te=!!(b&&e&&M&&re),Y=En(Z.isValidating)?te:Z.isValidating,de=En(Z.isLoading)?te:Z.isLoading,ye=T.useCallback(async ke=>{const K=S.current;if(!b||!K||E.current||x().isPaused())return!1;let ge,ne,le=!0;const se=ke||{},fe=!y[b]||!se.dedupe,Ce=()=>fW?!E.current&&b===w.current&&_.current:b===w.current,Ie={isValidating:!1,isLoading:!1},xe=()=>{C(Ie)},$e=()=>{const Be=y[b];Be&&Be[1]===ne&&delete y[b]},je={isValidating:!0};En(R().data)&&(je.isLoading=!0);try{if(fe&&(C(je),n.loadingTimeout&&En(R().data)&&setTimeout(()=>{le&&Ce()&&x().onLoadingSlow(b,n)},n.loadingTimeout),y[b]=[K(v),rR()]),[ge,ne]=y[b],ge=await ge,fe&&setTimeout($e,n.dedupingInterval),!y[b]||y[b][1]!==ne)return fe&&Ce()&&x().onDiscarded(b),!1;Ie.error=si;const Be=g[b];if(!En(Be)&&(ne<=Be[0]||ne<=Be[1]||Be[1]===0))return xe(),fe&&Ce()&&x().onDiscarded(b),!1;const Ae=R().data;Ie.data=s(Ae,ge)?Ae:ge,fe&&Ce()&&x().onSuccess(ge,b,n)}catch(Be){$e();const Ae=x(),{shouldRetryOnError:Ye}=Ae;Ae.isPaused()||(Ie.error=Be,fe&&Ce()&&(Ae.onError(Be,b,Ae),(Ye===!0||Nl(Ye)&&Ye(Be))&&(!x().revalidateOnFocus||!x().revalidateOnReconnect||I())&&Ae.onErrorRetry(Be,b,Ae,Xe=>{const tt=f[b];tt&&tt[0]&&tt[0](dW,Xe)},{retryCount:(se.retryCount||0)+1,dedupe:!0})))}return le=!1,xe(),!0},[b,r]),Se=T.useCallback((...ke)=>Sue(r,w.current,...ke),[]);if(Q3(()=>{S.current=e,k.current=n,En(G)||(V.current=G)}),Q3(()=>{if(!b)return;const ke=ye.bind(si,rN);let K=0;const ne=Xdt(b,f,(le,se={})=>{if(le==vue){const fe=Date.now();x().revalidateOnFocus&&fe>K&&I()&&(K=fe+x().focusThrottleInterval,ke())}else if(le==_ue)x().revalidateOnReconnect&&I()&&ke();else{if(le==xue)return ye();if(le==dW)return ye(se)}});return E.current=!1,w.current=b,_.current=!0,C({_k:v}),re&&(En(D)||pv?ke():Rdt(ke)),()=>{E.current=!0,ne()}},[b]),Q3(()=>{let ke;function K(){const ne=Nl(c)?c(R().data):c;ne&&ke!==-1&&(ke=setTimeout(ge,ne))}function ge(){!R().error&&(u||x().isVisible())&&(d||x().isOnline())?ye(rN).then(K):K()}return K(),()=>{ke&&(clearTimeout(ke),ke=-1)}},[c,u,d,b]),T.useDebugValue(W),i&&En(D)&&b){if(!fW&&pv)throw new Error("Fallback data is required when using Suspense in SSR.");S.current=e,k.current=n,E.current=!1;const ke=m[b];if(!En(ke)){const K=Se(ke);nN(K)}if(En(j)){const K=ye(rN);En(W)||(K.status="fulfilled",K.value=!0),nN(K)}else throw j}return{mutate:Se,get data(){return P.data=!0,W},get error(){return P.error=!0,j},get isValidating(){return P.isValidating=!0,Y},get isLoading(){return P.isLoading=!0,de}}},zw=Ydt(Jdt);function Zdt(t,e){if(typeof t!="function")throw new TypeError(`Expected the first argument to be a \`function\`, got \`${typeof t}\`.`);let n,r=0;return function(...i){clearTimeout(n);const o=Date.now(),a=o-r,l=e-a;l<=0?(r=o,t.apply(this,i)):n=setTimeout(()=>{r=Date.now(),t.apply(this,i)},l)}}var Qdt=Zdt;const eht=ao(Qdt);function gW(t,e){return e!=null?eht(t,e):t}function tht({api:t="/api/chat",id:e,initialMessages:n,initialInput:r="",sendExtraMessageFields:s,onToolCall:i,experimental_prepareRequestBody:o,maxSteps:a=1,streamProtocol:l="data",onResponse:c,onFinish:u,onError:d,credentials:h,headers:f,body:g,generateId:y=ba,fetch:m,keepLastMessageOnError:b=!0,experimental_throttle:v}={}){const[_]=T.useState(y),E=e??_,w=typeof t=="string"?[t,E]:E,[S]=T.useState([]),{data:k,mutate:x}=zw([w,"messages"],null,{fallbackData:n!=null?X3(n):S}),I=T.useRef(k||[]);T.useEffect(()=>{I.current=k||[]},[k]);const{data:R,mutate:C}=zw([w,"streamData"],null),N=T.useRef(R);T.useEffect(()=>{N.current=R},[R]);const{data:O=!1,mutate:P}=zw([w,"loading"],null),{data:$=void 0,mutate:ee}=zw([w,"error"],null),J=T.useRef(null),Z=T.useRef({credentials:h,headers:f,body:g});T.useEffect(()=>{Z.current={credentials:h,headers:f,body:g}},[h,f,g]);const M=T.useCallback(async ye=>{var Se,Te;const ke=X3(ye.messages),K=ke.length,ge=KI((Se=ke[ke.length-1])==null?void 0:Se.toolInvocations);try{P(!0),ee(void 0);const le=new AbortController;J.current=le;const se=gW(x,v),fe=gW(C,v),Ce=I.current;se(ke,!1);const Ie=s?ke:ke.map(({role:$e,content:je,experimental_attachments:Be,data:Ae,annotations:Ye,toolInvocations:Xe,parts:tt})=>({role:$e,content:je,...Be!==void 0&&{experimental_attachments:Be},...Ae!==void 0&&{data:Ae},...Ye!==void 0&&{annotations:Ye},...Xe!==void 0&&{toolInvocations:Xe},...tt!==void 0&&{parts:tt}})),xe=N.current;await adt({api:t,body:(Te=o?.({id:E,messages:ke,requestData:ye.data,requestBody:ye.body}))!=null?Te:{id:E,messages:Ie,data:ye.data,...Z.current.body,...ye.body},streamProtocol:l,credentials:Z.current.credentials,headers:{...Z.current.headers,...ye.headers},abortController:()=>J.current,restoreMessagesOnFailure(){b||se(Ce,!1)},onResponse:c,onUpdate({message:$e,data:je,replaceLastMessage:Be}){se([...Be?ke.slice(0,ke.length-1):ke,$e],!1),je?.length&&fe([...xe??[],...je],!1)},onToolCall:i,onFinish:u,generateId:y,fetch:m,lastMessage:ke[ke.length-1]}),J.current=null}catch(le){if(le.name==="AbortError")return J.current=null,null;d&&le instanceof Error&&d(le),ee(le)}finally{P(!1)}const ne=I.current;ddt({originalMaxToolInvocationStep:ge,originalMessageCount:K,maxSteps:a,messages:ne})&&await M({messages:ne})},[x,P,t,Z,c,u,d,ee,C,N,l,s,o,i,a,I,J,y,m,b,v,E]),F=T.useCallback(async(ye,{data:Se,headers:Te,body:ke,experimental_attachments:K}={})=>{var ge,ne;const le=await uW(K),se=I.current.concat({...ye,id:(ge=ye.id)!=null?ge:y(),createdAt:(ne=ye.createdAt)!=null?ne:new Date,experimental_attachments:le.length>0?le:void 0,parts:mue(ye)});return M({messages:se,headers:Te,body:ke,data:Se})},[M,y]),G=T.useCallback(async({data:ye,headers:Se,body:Te}={})=>{const ke=I.current;if(ke.length===0)return null;const K=ke[ke.length-1];return M({messages:K.role==="assistant"?ke.slice(0,-1):ke,headers:Se,body:Te,data:ye})},[M]),D=T.useCallback(()=>{J.current&&(J.current.abort(),J.current=null)},[]),j=T.useCallback(ye=>{typeof ye=="function"&&(ye=ye(I.current));const Se=X3(ye);x(Se,!1),I.current=Se},[x]),V=T.useCallback(ye=>{typeof ye=="function"&&(ye=ye(N.current)),C(ye,!1),N.current=ye},[C]),[W,re]=T.useState(r),te=T.useCallback(async(ye,Se={},Te)=>{var ke;if((ke=ye?.preventDefault)==null||ke.call(ye),!W&&!Se.allowEmptySubmit)return;Te&&(Z.current={...Z.current,...Te});const K=await uW(Se.experimental_attachments),ne={messages:I.current.concat({id:y(),createdAt:new Date,role:"user",content:W,experimental_attachments:K.length>0?K:void 0,parts:[{type:"text",text:W}]}),headers:Se.headers,body:Se.body,data:Se.data};M(ne),re("")},[W,y,M]),Y=ye=>{re(ye.target.value)},de=T.useCallback(({toolCallId:ye,result:Se})=>{const Te=I.current;fdt({messages:Te,toolCallId:ye,toolResult:Se}),x(Te,!1);const ke=Te[Te.length-1];gue(ke)&&M({messages:Te})},[x,M]);return{messages:k??[],id:E,setMessages:j,data:R,setData:V,error:$,append:F,reload:G,stop:D,input:W,setInput:re,handleInputChange:Y,handleSubmit:te,isLoading:O,addToolResult:de}}var nht=tht;const Bc=Ld({started:!1,aborted:!1,showChat:!0}),rht=t=>`
You are an experienced developer who helps people choose the best starter template for their projects.

Available templates:
<template>
  <name>blank</name>
  <description>Empty starter for simple scripts and trivial tasks that don't require a full template setup</description>
  <tags>basic, script</tags>
</template>
${t.map(e=>`
<template>
  <name>${e.name}</name>
  <description>${e.description}</description>
  ${e.tags?`<tags>${e.tags.join(", ")}</tags>`:""}
</template>
`).join(`
`)}

Response Format:
<selection>
  <templateName>{selected template name}</templateName>
  <title>{a proper title for the project}</title>
</selection>

Examples:

<example>
User: I need to build a todo app
Response:
<selection>
  <templateName>react-basic-starter</templateName>
  <title>Simple React todo application</title>
</selection>
</example>

<example>
User: Write a script to generate numbers from 1 to 100
Response:
<selection>
  <templateName>blank</templateName>
  <title>script to generate numbers from 1 to 100</title>
</selection>
</example>

Instructions:
1. For trivial tasks and simple scripts, always recommend the blank template
2. For more complex projects, recommend templates from the provided list
3. Follow the exact XML format
4. Consider both technical requirements and tags
5. If no perfect match exists, recommend the closest option

Important: Provide only the selection tags in your response, no additional text.
MOST IMPORTANT: YOU DONT HAVE TIME TO THINK JUST START RESPONDING BASED ON HUNCH 
`,sht=kE.filter(t=>!t.name.includes("shadcn")),iht=t=>{try{const e=t.match(/<templateName>(.*?)<\/templateName>/),n=t.match(/<title>(.*?)<\/title>/);return e?{template:e[1].trim(),title:n?.[1].trim()||"Untitled Project"}:null}catch(e){return console.error("Error parsing template selection:",e),null}},oht=async t=>{const{message:e,model:n,provider:r}=t,s={message:e,model:n,provider:r,system:rht(sht)},o=await(await fetch("/api/llmcall",{method:"POST",body:JSON.stringify(s)})).json();console.log(o);const{text:a}=o,l=iht(a);return l||(console.log("No template selected, using blank template"),{template:"blank",title:""})},Aue=async(t,e="")=>{const n="https://api.github.com";try{const r=ur.get("githubToken")||void 0,s={Accept:"application/vnd.github.v3+json"};r&&(s.Authorization="token "+r);const i=await fetch(`${n}/repos/${t}/contents/${e}`,{headers:s});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const o=await i.json();if(!Array.isArray(o)&&o.type==="file"){const l=atob(o.content);return[{name:o.name,path:o.path,content:l}]}return(await Promise.all(o.map(async l=>{if(l.type==="dir")return await Aue(t,l.path);if(l.type==="file"){const u=await(await fetch(l.url,{headers:s})).json(),d=atob(u.content);return[{name:l.name,path:l.path,content:d}]}return[]}))).flat()}catch(r){throw console.error("Error fetching repo contents:",r),r}};async function aht(t,e){const n=kE.find(h=>h.name==t);if(!n)return null;const r=n.githubRepo,s=await Aue(r);let i=s;i=i.filter(h=>h.path.startsWith(".git")==!1);const o=["package-lock.json","yarn.lock","pnpm-lock.yaml"];i=i.filter(h=>o.includes(h.name)==!1),i=i.filter(h=>h.path.startsWith(".bolt")==!1);const a=s.find(h=>h.path.startsWith(".bolt")&&h.name=="ignore"),l={files:i,ignoreFile:[]};if(a){const h=a.content.split(`
`).map(y=>y.trim()),f=PD().add(h),g=i.filter(y=>f.ignores(y.path));l.files=i,l.ignoreFile=g}const c=`
<boltArtifact id="imported-files" title="${e||"Importing Starter Files"}" type="bundled">
${l.files.map(h=>`<boltAction type="file" filePath="${h.path}">
${h.content}
</boltAction>`).join(`
`)}
</boltArtifact>
`;let u="";const d=s.filter(h=>h.path.startsWith(".bolt")).find(h=>h.name=="prompt");return d&&(u=`
TEMPLATE INSTRUCTIONS:
${d.content}

IMPORTANT: Dont Forget to install the dependencies before running the app
---
`),l.ignoreFile.length>0&&(u=u+`
STRICT FILE ACCESS RULES - READ CAREFULLY:

The following files are READ-ONLY and must never be modified:
${l.ignoreFile.map(h=>`- ${h.path}`).join(`
`)}

Permitted actions:
 Import these files as dependencies
 Read from these files
 Reference these files

Strictly forbidden actions:
 Modify any content within these files
 Delete these files
 Rename these files
 Move these files
 Create new versions of these files
 Suggest changes to these files

Any attempt to modify these protected files will result in immediate termination of the operation.

If you need to make changes to functionality, create new files instead of modifying the protected ones listed above.
---
`),u+=`
---
template import is done, and you can now use the imported files,
edit only the files that need to be changed, and you can create new files as needed.
NO NOT EDIT/WRITE ANY FILES THAT ALREADY EXIST IN THE PROJECT AND DOES NOT NEED TO BE MODIFIED
---
Now that the Template is imported please continue with my original request
`,{assistantMessage:c,userMessage:u}}const Tue=tr(!1),lht=yv({enter:"animated fadeInRight",exit:"animated fadeOutRight"}),bW=Di("Chat");function Rft(){Ag.trace("Chat");const{ready:t,initialMessages:e,storeMessageHistory:n,importChat:r,exportChat:s}=cee(),i=It(El);return T.useEffect(()=>{St.setReloadedMessages(e.map(o=>o.id))},[e]),p.jsxs(p.Fragment,{children:[t&&p.jsx(uht,{description:i,initialMessages:e,exportChat:s,storeMessageHistory:n,importChat:r}),p.jsx(wge,{closeButton:({closeToast:o})=>p.jsx("button",{className:"Toastify__close-button",onClick:o,children:p.jsx("div",{className:"i-ph:x text-lg"})}),icon:({type:o})=>{switch(o){case"success":return p.jsx("div",{className:"i-ph:check-bold text-bolt-elements-icon-success text-2xl"});case"error":return p.jsx("div",{className:"i-ph:warning-circle-bold text-bolt-elements-icon-error text-2xl"})}},position:"bottom-right",pauseOnFocusLoss:!0,transition:lht})]})}const cht=aee(t=>{const{messages:e,initialMessages:n,isLoading:r,parseMessages:s,storeMessageHistory:i}=t;s(e,r),e.length>n.length&&i(e).catch(o=>ze.error(o.message))},50),uht=T.memo(({description:t,initialMessages:e,storeMessageHistory:n,importChat:r,exportChat:s})=>{oqe();const i=T.useRef(null),[o,a]=T.useState(e.length>0),[l,c]=T.useState([]),[u,d]=T.useState([]),[h,f]=yW(),[g,y]=T.useState(!1),m=It(St.files),b=It(St.alert),{activeProviders:v,promptId:_,autoSelectTemplate:E,contextOptimizationEnabled:w}=jd(),[S,k]=T.useState(()=>ur.get("selectedModel")||dAe),[x,I]=T.useState(()=>{const je=ur.get("selectedProvider");return Tk.find(Be=>Be.name===je)||hAe}),{showChat:R}=It(Bc),[C,N]=uge(),[O,P]=T.useState({}),{messages:$,isLoading:ee,input:J,handleInputChange:Z,setInput:M,stop:F,append:G,setMessages:D,reload:j,error:V,data:W,setData:re}=nht({api:"/api/chat",body:{apiKeys:O,files:m,promptId:_,contextOptimization:w},sendExtraMessageFields:!0,onError:je=>{bW.error(`Request failed

`,je,V),Lt.logError("Chat request failed",je,{component:"Chat",action:"request",error:je.message}),ze.error("There was an error processing your request: "+(je.message?je.message:"No details were returned"))},onFinish:(je,Be)=>{const Ae=Be.usage;re(void 0),Ae&&(console.log("Token usage:",Ae),Lt.logProvider("Chat response completed",{component:"Chat",action:"response",model:S,provider:x.name,usage:Ae,messageLength:je.content.length})),bW.debug("Finished streaming")},initialMessages:e,initialInput:ur.get(LT)||""});T.useEffect(()=>{const je=h.get("prompt");je&&(f({}),ne(),G({role:"user",content:[{type:"text",text:`[Model: ${S}]

[Provider: ${x.name}]

${je}`}]}))},[S,x,h]);const{enhancingPrompt:te,promptEnhanced:Y,enhancePrompt:de,resetEnhancer:ye}=rqe(),{parsedMessages:Se,parseMessages:Te}=nqe(),ke=o?400:200;T.useEffect(()=>{Bc.setKey("started",e.length>0)},[]),T.useEffect(()=>{cht({messages:$,initialMessages:e,isLoading:ee,parseMessages:Te,storeMessageHistory:n})},[$,ee,Te]);const K=()=>{const je=i.current;je&&(je.scrollTop=je.scrollHeight)},ge=()=>{F(),Bc.setKey("aborted",!0),St.abortAllActions(),Lt.logProvider("Chat response aborted",{component:"Chat",action:"abort",model:S,provider:x.name})};T.useEffect(()=>{const je=i.current;if(je){je.style.height="auto";const Be=je.scrollHeight;je.style.height=`${Math.min(Be,ke)}px`,je.style.overflowY=Be>ke?"auto":"hidden"}},[J,i]);const ne=async()=>{o||(await Promise.all([N("#examples",{opacity:0,display:"none"},{duration:.1}),N("#intro",{opacity:0,flex:1},{duration:.2,ease:so})]),Bc.setKey("started",!0),a(!0))},le=async(je,Be)=>{const Ae=Be||J;if(!Ae?.trim())return;if(ee){ge();return}if(ne(),!o){if(y(!0),E){const{template:Xe,title:tt}=await oht({message:Ae,model:S,provider:x});if(Xe!=="blank"){const ie=await aht(Xe,tt).catch(z=>(z.message.includes("rate limit")?ze.warning(`Rate limit exceeded. Skipping starter template
 Continuing with blank template`):ze.warning(`Failed to import starter template
 Continuing with blank template`),null));if(ie){const{assistantMessage:z,userMessage:X}=ie;D([{id:`1-${new Date().getTime()}`,role:"user",content:Ae},{id:`2-${new Date().getTime()}`,role:"assistant",content:z},{id:`3-${new Date().getTime()}`,role:"user",content:`[Model: ${S}]

[Provider: ${x.name}]

${X}`,annotations:["hidden"]}]),j(),y(!1);return}}}D([{id:`${new Date().getTime()}`,role:"user",content:[{type:"text",text:`[Model: ${S}]

[Provider: ${x.name}]

${Ae}`},...u.map(Xe=>({type:"image",image:Xe}))]}]),j(),y(!1);return}V!=null&&D($.slice(0,-1));const Ye=St.getModifiedFiles();if(Bc.setKey("aborted",!1),Ye!==void 0){const Xe=_it(Ye,`${Date.now()}`);G({role:"user",content:[{type:"text",text:`[Model: ${S}]

[Provider: ${x.name}]

${Xe}${Ae}`},...u.map(tt=>({type:"image",image:tt}))]}),St.resetAllFileModifications()}else G({role:"user",content:[{type:"text",text:`[Model: ${S}]

[Provider: ${x.name}]

${Ae}`},...u.map(Xe=>({type:"image",image:Xe}))]});M(""),ur.remove(LT),c([]),d([]),ye(),i.current?.blur()},se=je=>{Z(je)},fe=T.useCallback(Tv(je=>{const Be=je.target.value.trim();ur.set(LT,Be,{expires:30})},1e3),[]),[Ce,Ie]=aqe();T.useEffect(()=>{const je=ur.get("apiKeys");je&&P(JSON.parse(je))},[]);const xe=je=>{k(je),ur.set("selectedModel",je,{expires:30})},$e=je=>{I(je),ur.set("selectedProvider",je.name,{expires:30})};return p.jsx(aut,{ref:C,textareaRef:i,input:J,showChat:R,chatStarted:o,isStreaming:ee||g,onStreamingChange:je=>{Tue.set(je)},enhancingPrompt:te,promptEnhanced:Y,sendMessage:le,model:S,setModel:xe,provider:x,setProvider:$e,providerList:v,messageRef:Ce,scrollRef:Ie,handleInputChange:je=>{se(je),fe(je)},handleStop:ge,description:t,importChat:r,exportChat:s,messages:$.map((je,Be)=>je.role==="user"?je:{...je,content:Se[Be]||""}),enhancePrompt:()=>{de(J,je=>{M(je),K()},S,x,O)},uploadedFiles:l,setUploadedFiles:c,imageDataList:u,setImageDataList:d,actionAlert:b,clearAlert:()=>St.clearAlert(),data:W})});function dht(){const t=It(hg),e=It(ya);T.useEffect(()=>{t.token&&e&&u4(t.token)},[t.token,e]);const n=t.stats?.sites?.find(r=>r.name.includes(`bolt-diy-${e}`));return n?p.jsx(QL,{children:p.jsxs(eO,{children:[p.jsx(tO,{asChild:!0,children:p.jsx("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center w-8 h-8 rounded hover:bg-bolt-elements-item-backgroundActive text-bolt-elements-textSecondary hover:text-[#00AD9F] z-50",onClick:r=>{r.stopPropagation()},children:p.jsx("div",{className:"i-ph:rocket-launch w-5 h-5"})})}),p.jsx(nO,{children:p.jsxs(rO,{className:"px-3 py-2 rounded bg-bolt-elements-background-depth-3 text-bolt-elements-textPrimary text-xs z-50",sideOffset:5,children:[n.url,p.jsx(sO,{className:"fill-bolt-elements-background-depth-3"})]})})]})}):null}function hht({}){const t=It(St.showWorkbench),{showChat:e}=It(Bc),n=It(hg),[r]=T.useState(0),i=It(St.previews)[r],[o,a]=T.useState(!1),l=wse(1024),c=t||!e,[u,d]=T.useState(!1),h=T.useRef(null),f=It(Tue);T.useEffect(()=>{function m(b){h.current&&!h.current.contains(b.target)&&d(!1)}return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]);const g=It(ya),y=async()=>{if(!n.user||!n.token){ze.error("Please connect to Netlify first in the settings tab!");return}if(!g){ze.error("No active chat found");return}try{a(!0);const m=St.firstArtifact;if(!m)throw new Error("No active project found");const b="build-"+Date.now(),v={messageId:"netlify build",artifactId:m.id,actionId:b,action:{type:"build",content:"npm run build"}};if(m.runner.addAction(v),await m.runner.runAction(v),!m.runner.buildOutput)throw new Error("Build failed");const _=await qu,E=m.runner.buildOutput.path.replace("/home/project","");async function w(O){const P={},$=await _.fs.readdir(O,{withFileTypes:!0});for(const ee of $){const J=Th.join(O,ee.name);if(ee.isFile()){const Z=await _.fs.readFile(J,"utf-8"),M=J.replace(E,"");P[M]=Z}else if(ee.isDirectory()){const Z=await w(J);Object.assign(P,Z)}}return P}const S=await w(E),k=localStorage.getItem(`netlify-site-${g}`),x=await fetch("/api/deploy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({siteId:k||void 0,files:S,token:n.token,chatId:g})}),I=await x.json();if(!x.ok||!I.deploy||!I.site)throw console.error("Invalid deploy response:",I),new Error(I.error||"Invalid deployment response");const R=20;let C=0,N;for(;C<R;)try{if(N=await(await fetch(`https://api.netlify.com/api/v1/sites/${I.site.id}/deploys/${I.deploy.id}`,{headers:{Authorization:`Bearer ${n.token}`}})).json(),N.state==="ready"||N.state==="uploaded")break;if(N.state==="error")throw new Error("Deployment failed: "+(N.error_message||"Unknown error"));C++,await new Promise(P=>setTimeout(P,1e3))}catch(O){console.error("Status check error:",O),C++,await new Promise(P=>setTimeout(P,2e3))}if(C>=R)throw new Error("Deployment timed out");I.site&&localStorage.setItem(`netlify-site-${g}`,I.site.id),ze.success(p.jsxs("div",{children:["Deployed successfully!"," ",p.jsx("a",{href:N.ssl_url||N.url,target:"_blank",rel:"noopener noreferrer",className:"underline",children:"View site"})]}))}catch(m){console.error("Deploy error:",m),ze.error(m instanceof Error?m.message:"Deployment failed")}finally{a(!1)}};return p.jsxs("div",{className:"flex",children:[p.jsxs("div",{className:"relative",ref:h,children:[p.jsx("div",{className:"flex border border-bolt-elements-borderColor rounded-md overflow-hidden mr-2 text-sm",children:p.jsxs(Wp,{active:!0,disabled:o||!i||f,onClick:()=>d(!u),className:"px-4 hover:bg-bolt-elements-item-backgroundActive flex items-center gap-2",children:[o?"Deploying...":"Deploy",p.jsx("div",{className:Pe("i-ph:caret-down w-4 h-4 transition-transform",u?"rotate-180":"")})]})}),u&&p.jsxs("div",{className:"absolute right-2 flex flex-col gap-1 z-50 p-1 mt-1 min-w-[13.5rem] bg-bolt-elements-background-depth-2 rounded-md shadow-lg bg-bolt-elements-backgroundDefault border border-bolt-elements-borderColor",children:[p.jsxs(Wp,{active:!0,onClick:()=>{y(),d(!1)},disabled:o||!i||!n.user,className:"flex items-center w-full px-4 py-2 text-sm text-bolt-elements-textPrimary hover:bg-bolt-elements-item-backgroundActive gap-2 rounded-md group relative",children:[p.jsx("img",{className:"w-5 h-5",height:"24",width:"24",crossOrigin:"anonymous",src:"https://cdn.simpleicons.org/netlify"}),p.jsx("span",{className:"mx-auto",children:n.user?"Deploy to Netlify":"No Account Connected"}),n.user&&p.jsx(dht,{})]}),p.jsxs(Wp,{active:!1,disabled:!0,className:"flex items-center w-full rounded-md px-4 py-2 text-sm text-bolt-elements-textTertiary gap-2",children:[p.jsx("span",{className:"sr-only",children:"Coming Soon"}),p.jsx("img",{className:"w-5 h-5 bg-black p-1 rounded",height:"24",width:"24",crossOrigin:"anonymous",src:"https://cdn.simpleicons.org/vercel/white",alt:"vercel"}),p.jsx("span",{className:"mx-auto",children:"Deploy to Vercel (Coming Soon)"})]}),p.jsxs(Wp,{active:!1,disabled:!0,className:"flex items-center w-full rounded-md px-4 py-2 text-sm text-bolt-elements-textTertiary gap-2",children:[p.jsx("span",{className:"sr-only",children:"Coming Soon"}),p.jsx("img",{className:"w-5 h-5",height:"24",width:"24",crossOrigin:"anonymous",src:"https://cdn.simpleicons.org/cloudflare",alt:"vercel"}),p.jsx("span",{className:"mx-auto",children:"Deploy to Cloudflare (Coming Soon)"})]})]})]}),p.jsxs("div",{className:"flex border border-bolt-elements-borderColor rounded-md overflow-hidden",children:[p.jsx(Wp,{active:e,disabled:!c||l,onClick:()=>{c&&Bc.setKey("showChat",!e)},children:p.jsx("div",{className:"i-bolt:chat text-sm"})}),p.jsx("div",{className:"w-[1px] bg-bolt-elements-borderColor"}),p.jsx(Wp,{active:t,onClick:()=>{t&&!e&&Bc.setKey("showChat",!0),St.showWorkbench.set(!t)},children:p.jsx("div",{className:"i-ph:code-bold"})})]})]})}function Wp({active:t=!1,disabled:e=!1,children:n,onClick:r,className:s}){return p.jsx("button",{className:Pe("flex items-center p-1.5",{"bg-bolt-elements-item-backgroundDefault hover:bg-bolt-elements-item-backgroundActive text-bolt-elements-textTertiary hover:text-bolt-elements-textPrimary":!t,"bg-bolt-elements-item-backgroundAccent text-bolt-elements-item-contentAccent":t&&!e,"bg-bolt-elements-item-backgroundDefault text-alpha-gray-20 dark:text-alpha-white-20 cursor-not-allowed":e},s),onClick:r,children:n})}function fht(){const t=It(El),{editing:e,handleChange:n,handleBlur:r,handleSubmit:s,handleKeyDown:i,currentDescription:o,toggleEditMode:a}=xse({initialDescription:t,syncWithGlobalStore:!0});return t?p.jsx("div",{className:"flex items-center justify-center",children:e?p.jsxs("form",{onSubmit:s,className:"flex items-center justify-center",children:[p.jsx("input",{type:"text",className:"bg-bolt-elements-background-depth-1 text-bolt-elements-textPrimary rounded px-2 mr-2 w-fit",autoFocus:!0,value:o,onChange:n,onBlur:r,onKeyDown:i,style:{width:`${Math.max(o.length*8,100)}px`}}),p.jsx(IE,{children:p.jsx(Ef,{tooltip:"Save title",children:p.jsx("div",{className:"flex justify-between items-center p-2 rounded-md bg-bolt-elements-item-backgroundAccent",children:p.jsx("button",{type:"submit",className:"i-ph:check-bold scale-110 hover:text-bolt-elements-item-contentAccent",onMouseDown:s})})})})]}):p.jsxs(p.Fragment,{children:[o,p.jsx(IE,{children:p.jsx(Ef,{tooltip:"Rename chat",children:p.jsx("div",{className:"flex justify-between items-center p-2 rounded-md bg-bolt-elements-item-backgroundAccent ml-2",children:p.jsx("button",{type:"button",className:"i-ph:pencil-fill scale-110 hover:text-bolt-elements-item-contentAccent",onClick:l=>{l.preventDefault(),a()}})})})})]})}):null}function Lft(){const t=It(Bc);return p.jsxs("header",{className:Pe("flex items-center p-5 border-b h-[var(--header-height)]",{"border-transparent":!t.started,"border-bolt-elements-borderColor":t.started}),children:[p.jsxs("div",{className:"flex items-center gap-2 z-logo text-bolt-elements-textPrimary cursor-pointer",children:[p.jsx("div",{className:"i-ph:sidebar-simple-duotone text-xl"}),p.jsxs("a",{href:"/",className:"text-2xl font-semibold text-accent flex items-center",children:[p.jsx("img",{src:"/logo-light-styled.png",alt:"logo",className:"w-[90px] inline-block dark:hidden"}),p.jsx("img",{src:"/logo-dark-styled.png",alt:"logo",className:"w-[90px] inline-block hidden dark:block"})]})]}),t.started&&p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"flex-1 px-4 truncate text-center text-bolt-elements-textPrimary",children:p.jsx(Ec,{children:()=>p.jsx(fht,{})})}),p.jsx(Ec,{children:()=>p.jsx("div",{className:"mr-1",children:p.jsx(hht,{})})})]})]})}export{Rft as $,wft as A,xft as B,Joe as C,RZe as D,st as E,WQe as F,yft as G,rQe as H,hr as I,fft as J,q as K,hI as L,iye as M,Doe as N,Ift as O,BZe as P,X2 as Q,Y2 as R,Xut as S,Gr as T,_r as U,Pft as V,Rht as W,cee as X,$ct as Y,ze as Z,Ec as _,gft as a,Hct as a0,aut as a1,PD as a2,Zle as a3,Qle as a4,ba as a5,ece as a6,j3e as a7,Lft as a8,Bn as a9,_ft as b,Oi as c,bft as d,on as e,bQe as f,vft as g,Io as h,aQe as i,xa as j,nQe as k,gQe as l,Es as m,kC as n,Bd as o,pft as p,PC as q,Xg as r,JZe as s,Ge as t,hm as u,gn as v,ms as w,RS as x,kt as y,FQe as z};
